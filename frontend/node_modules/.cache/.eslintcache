[{"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/index.js":"1","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/index.js":"2","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/index.js":"3","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/tc-view.js":"4","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/tc-accept.js":"5","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/shared-dir-view.js":"6","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/wiki.js":"7","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/file-history.js":"8","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/file-history-old.js":"9","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/shared-file-view-markdown.js":"10","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/shared-file-view-image.js":"11","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/shared-file-view-text.js":"12","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/draft.js":"13","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/upload-link/index.js":"14","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/shared-file-view-document.js":"15","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/shared-file-view-audio.js":"16","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/shared-file-view-unknown.js":"17","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/app.js":"18","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/shared-file-view-pdf.js":"19","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/shared-file-view-svg.js":"20","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/shared-file-view-spreadsheet.js":"21","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/shared-file-view-sdoc.js":"22","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/view-file-spreadsheet.js":"23","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/shared-file-view-video.js":"24","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/file-view.js":"25","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/settings.js":"26","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sdoc/sdoc-file-history/index.js":"27","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/view-file-sdoc.js":"28","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/repo-history.js":"29","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/view-file-text.js":"30","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/history-trash-file-view.js":"31","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/view-file-document.js":"32","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/index.js":"33","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/repo-folder-trash.js":"34","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/repo-snapshot.js":"35","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/plain-markdown-editor/index.js":"36","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sdoc/sdoc-published-revision/index.js":"37","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/subscription.js":"38","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/search/index.js":"39","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-users-users.js":"40","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/side-panel.js":"41","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-users-admins.js":"42","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-user-profile.js":"43","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-group-repos.js":"44","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-departments-list.js":"45","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-user-shared-repos.js":"46","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-groups-search-groups.js":"47","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-logs-file-audit.js":"48","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-info.js":"49","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-departments.js":"50","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-group-members.js":"51","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-logs.js":"52","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-logs-file-update.js":"53","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-links.js":"54","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-logs-perm-audit.js":"55","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-subscription.js":"56","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-saml-config.js":"57","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-user-repos.js":"58","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-users-search-users.js":"59","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/statistic/statistic-storage.js":"60","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-groups.js":"61","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/statistic/statistic-file.js":"62","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-department-item.js":"63","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-group-info.js":"64","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/statistic/statistic-reports.js":"65","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/devices/mobile-devices.js":"66","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/info.js":"67","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/statistic/statistic-traffic.js":"68","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/main-panel.js":"69","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/statistic/statistic-users.js":"70","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/side-panel.js":"71","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/devices/devices-errors.js":"72","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/constants.js":"73","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/statistic/statistic-file.js":"74","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/_i18n/i18n-seafile-editor.js":"75","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/utils.js":"76","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/devices/desktop-devices.js":"77","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/web-settings/web-settings.js":"78","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/libraries/org-repo-trash.js":"79","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/statistic/statistic-users.js":"80","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/devices/desktop-devices.js":"81","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/statistic/statistic-traffic.js":"82","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/users/admin-users.js":"83","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/statistic/statistic-reports.js":"84","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/libraries/org-all-repos.js":"85","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/statistic/statistic-storage.js":"86","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/users/ldap-imported-users.js":"87","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/users/ldap-users.js":"88","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/users/user-links.js":"89","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/users/search-users.js":"90","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/users/users.js":"91","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/users/user-info.js":"92","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/devices/mobile-devices.js":"93","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/devices/devices-errors.js":"94","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/repos/search-repos.js":"95","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/groups/search-groups.js":"96","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/repos/trash-repos.js":"97","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/users/user-groups.js":"98","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/repos/dir-view.js":"99","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/repos/all-repos.js":"100","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/users/user-repos.js":"101","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/users/user-shared-repos.js":"102","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/groups/group-repos.js":"103","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/repos/system-repo.js":"104","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/groups/groups.js":"105","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/groups/group-members.js":"106","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/departments/departments.js":"107","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/departments/department-list.js":"108","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/departments/department-members.js":"109","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/departments/sub-departments.js":"110","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/departments/department-libraries.js":"111","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/links/share-links.js":"112","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/orgs/search-orgs.js":"113","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/links/upload-links.js":"114","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/orgs/orgs.js":"115","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/orgs/org-info.js":"116","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/orgs/org-users.js":"117","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/file-scan-records.js":"118","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/work-weixin-departments.js":"119","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/dingtalk-departments.js":"120","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/abuse-reports.js":"121","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/orgs/org-repos.js":"122","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/orgs/org-groups.js":"123","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/institutions/institutions.js":"124","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/institutions/institution-users.js":"125","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/institutions/institution-admins.js":"126","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/logs-page/login-logs.js":"127","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/institutions/institution-info.js":"128","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/logs-page/file-update-logs.js":"129","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/logs-page/share-permission-logs.js":"130","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/logs-page/file-access-logs.js":"131","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/web-settings/web-settings.js":"132","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/virus-scan/all-virus-files.js":"133","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/terms-and-conditions/terms-and-conditions.js":"134","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/notifications/notifications.js":"135","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/virus-scan/unhandled-virus-files.js":"136","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/admin-logs/login-logs.js":"137","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/terms-preview-widget.js":"138","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/invitations/invitations.js":"139","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/logo.js":"140","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/loading.js":"141","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/account.js":"142","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/seafile-api.js":"143","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/repo-tag.js":"144","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/repo-info-bar.js":"145","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/admin-logs/operation-logs.js":"146","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/shared-link-file-uploader/file-uploader.js":"147","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/zip-download-dialog.js":"148","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/modal-portal.js":"149","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/save-shared-dir-dialog.js":"150","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/image-dialog.js":"151","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/editor-utilities.js":"152","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/services/ad.js":"153","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/copy-move-dirent-progress-dialog.js":"154","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/file-history/main-panel.js":"155","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/shared-file-view/shared-file-view-tip.js":"156","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toolbar/common-toolbar.js":"157","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/shared-file-view/shared-file-view.js":"158","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/file-history-old/history-item.js":"159","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/markdown-editor/index.js":"160","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/file-history/side-panel.js":"161","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/audio-player.js":"162","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/upload-link/file-uploader.js":"163","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toast/index.js":"164","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/pdf-viewer.js":"165","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/side-panel.js":"166","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/wiki/index.js":"167","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/_i18n/i18n-sdoc-editor.js":"168","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/main-content-wrapper.js":"169","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/main-panel.js":"170","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/system-notification.js":"171","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/video-player.js":"172","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/dashboard/my-file-activities.js":"173","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/dashboard/files-activities.js":"174","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/linked-devices/linked-devices.js":"175","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/starred/starred.js":"176","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/share-admin/libraries.js":"177","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/shared-libs/shared-libs.js":"178","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/share-with-ocm/shared-with-ocm.js":"179","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/share-admin/share-links.js":"180","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/my-libs/my-libs.js":"181","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/share-admin/upload-links.js":"182","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/share-admin/folders.js":"183","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/shared-with-all/public-shared-view.js":"184","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/my-libs/my-libs-deleted.js":"185","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/share-with-ocm/remote-dir-view.js":"186","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/groups/group-view.js":"187","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/ocm-via-webdav/ocm-via-webdav.js":"188","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/groups/groups-view.js":"189","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/lib-content-view/lib-content-view.js":"190","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/wikis/wikis.js":"191","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/invitations/invitations-view.js":"192","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-content-view/svg.js":"193","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-view/file-view-tip.js":"194","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-content-view/image.js":"195","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-view/file-view.js":"196","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sdoc/sdoc-file-history/side-panel.js":"197","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sdoc/sdoc-file-history/helper.js":"198","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-content-view/video.js":"199","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-content-view/pdf.js":"200","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-content-view/audio.js":"201","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/side-nav.js":"202","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/user-avatar-form.js":"203","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/webdav-password.js":"204","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/user-basic-info-form.js":"205","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/two-factor-auth.js":"206","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/social-login.js":"207","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/list-in-address-book.js":"208","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/social-login-saml.js":"209","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/delete-account.js":"210","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/web-api-auth-token.js":"211","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/email-notice.js":"212","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/social-login-dingtalk.js":"213","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/edit-repo-commit-labels.js":"214","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-content-view/text.js":"215","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-content-view/markdown.js":"216","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-content-view/sdoc.js":"217","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/seafile-codemirror/index.js":"218","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/history-trash-file-view/file-view.js":"219","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/history-trash-file-view/file-view-tip.js":"220","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/commit-details.js":"221","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/paginator.js":"222","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/clean-trash.js":"223","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/plain-markdown-editor/code-mirror.js":"224","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/side-panel.js":"225","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/confirm-restore-repo.js":"226","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/go-back/index.js":"227","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/notification.js":"228","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/markdown-editor/editor-api.js":"229","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/search/main-panel.js":"230","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/plain-markdown-editor/helper.js":"231","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/subscription.js":"232","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/language-setting.js":"233","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/markdown-editor/header-toolbar/header-toolbar.js":"234","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/main-panel.js":"235","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/main-panel-topbar.js":"236","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/code-mirror-loading/index.js":"237","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/org-user.js":"238","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-users-list.js":"239","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/login/index.js":"240","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/icon.js":"241","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-admin-invite-user-dialog.js":"242","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sdoc/sdoc-editor/index.js":"243","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-admin-invite-user-via-weixin-dialog.js":"244","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-users-nav.js":"245","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-add-user-dialog.js":"246","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/org-admin-user-nav.js":"247","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/set-org-user-name.js":"248","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-add-admin-dialog.js":"249","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/set-org-user-quota.js":"250","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/set-org-user-contact-email.js":"251","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-admin-list.js":"252","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/org-admin-group-nav.js":"253","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/delete-repo-dialog.js":"254","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-add-department-dialog.js":"255","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/org-group.js":"256","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/op-menu.js":"257","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/org-logs-perm-audit.js":"258","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-set-group-quota-dialog.js":"259","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-delete-department-dialog.js":"260","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-rename-department-dialog.js":"261","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/org-logs-file-audit.js":"262","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-logs-file-update-detail.js":"263","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/org-logs-file-update.js":"264","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/services/share-admin-link-enhanced.js":"265","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/input-item.js":"266","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/statistic/statistic-nav.js":"267","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-user-item.js":"268","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/section.js":"269","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/statistic/statistic-chart.js":"270","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/statistic/statistic-common-tool.js":"271","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/single-selector.js":"272","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-add-repo-dialog.js":"273","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/devices/devices-nav.js":"274","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-add-member-dialog.js":"275","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-delete-member-dialog.js":"276","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/statistic/statistic-traffic-users.js":"277","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/devices/devices-by-platform.js":"278","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-delete-repo-dialog.js":"279","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/text-translation.js":"280","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/main-panel-topbar.js":"281","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/permission-denied-tip.js":"282","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/empty-tip.js":"283","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/user-link.js":"284","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/compare-two-string.js":"285","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/libraries/org-repo-nav.js":"286","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/statistic/statistic-chart.js":"287","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/statistic/statistic-common-tool.js":"288","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/statistic/statistic-nav.js":"289","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/web-settings/section.js":"290","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/web-settings/file-item.js":"291","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/devices/devices-nav.js":"292","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/common-operation-confirmation-dialog.js":"293","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/web-settings/input-item.js":"294","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/devices/devices-by-platform.js":"295","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/org-admin-repo.js":"296","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/statistic/statistic-traffic-users.js":"297","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/transfer-dialog.js":"298","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/users/users-nav.js":"299","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/statistic/statistic-traffic-orgs.js":"300","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/user-link.js":"301","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/users/user-nav.js":"302","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/sysadmin-admin-user.js":"303","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/sysadmin-user.js":"304","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/search.js":"305","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/users/users-content.js":"306","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/share-admin-link.js":"307","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-import-user-dialog.js":"308","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-batch-add-admin-dialog.js":"309","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/set-quota.js":"310","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/update-user.js":"311","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/groups/groups-content.js":"312","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-add-user-dialog.js":"313","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/repos/repos-nav.js":"314","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/create-folder-dialog.js":"315","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/repos/dir-content.js":"316","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/system-admin/dirent.js":"317","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/repos/repos.js":"318","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/set-upload-download-rate-limit.js":"319","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/repos/dir-path-bar.js":"320","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-create-repo-dialog.js":"321","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-group-add-member-dialog.js":"322","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/groups/group-nav.js":"323","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/departments/group-item.js":"324","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/departments/member-item.js":"325","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-create-group-dialog.js":"326","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-delete-repo-dialog.js":"327","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-add-department-dialog.js":"328","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/departments/repo-item.js":"329","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-delete-member-dialog.js":"330","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-add-org-dialog.js":"331","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/links/links-nav.js":"332","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/import-dingtalk-department-dialog.js":"333","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-set-org-max-user-number-dialog.js":"334","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/orgs/orgs-content.js":"335","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/import-work-weixin-department-dialog.js":"336","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/departments/department.js":"337","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/orgs/org-nav.js":"338","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-set-org-name-dialog.js":"339","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/logs-page/file-access-item-menu.js":"340","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-add-institution-dialog.js":"341","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/logs-page/logs-nav.js":"342","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/institutions/institution-nav.js":"343","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-add-institution-member-dialog.js":"344","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-logs-export-excel-dialog.js":"345","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/logs-page/file-access-toggle-filter.js":"346","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/work-weixin/index.js":"347","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/dingtalk/index.js":"348","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/web-settings/section.js":"349","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/web-settings/input-item.js":"350","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/virus-scan/nav.js":"351","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/web-settings/file-item.js":"352","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/admin-logs/logs-nav.js":"353","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-add-or-update-term-dialog.js":"354","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/terms-and-conditions/content.js":"355","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/services/footer-upgrade.js":"356","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-add-sys-notification-dialog.js":"357","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/list-taggedfiles-dialog.js":"358","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/shared-link-file-uploader/upload-progress-dialog.js":"359","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/web-settings/checkbox-item.js":"360","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/url-decorator.js":"361","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/logout.js":"362","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/insert-file-dialog.js":"363","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/add-abuse-report-dialog.js":"364","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/save-shared-file-dialog.js":"365","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/search/ai-search.js":"366","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/share-dialog.js":"367","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/search/search-by-name.js":"368","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/search/search.js":"369","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/dirent.js":"370","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/side-nav-footer.js":"371","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/main-side-nav.js":"372","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-chooser/file-chooser.js":"373","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toast/toaster.js":"374","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toolbar/general-toolbar.js":"375","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/history-list-view/history-list-view.js":"376","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/upload-link/upload-progress-dialog.js":"377","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/wiki/side-panel.js":"378","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/activity.js":"379","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/wiki/main-panel.js":"380","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/dashboard/content.js":"381","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/dashboard/user-selector.js":"382","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/tree-view/tree-node.js":"383","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/shared-repo-info.js":"384","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/confirm-unlink-device.js":"385","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/repo.js":"386","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sort-options.js":"387","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/libs-mobile-thead.js":"388","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/repo-monitored-icon.js":"389","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/share-link-permission-select.js":"390","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/upload-link.js":"391","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toolbar/top-toolbar.js":"392","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/share-link.js":"393","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toolbar/repo-view-toobar.js":"394","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/guide-for-new-dialog.js":"395","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/my-libs/mylib-repo-list-view.js":"396","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/shared-folder-info.js":"397","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/select-editor/share-permission-editor.js":"398","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/markdown-editor/header-toolbar/index.js":"399","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dirent-detail/lib-details.js":"400","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/share-repo-dialog.js":"401","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/create-repo-dialog.js":"402","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/tree-view/tree-helper.js":"403","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/share-with-ocm/remote-dir-topbar.js":"404","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/group.js":"405","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/rename-group-dialog.js":"406","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/transfer-group-dialog.js":"407","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/dismiss-group-dialog.js":"408","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/share-with-ocm/remote-dir-content.js":"409","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/leave-group-dialog.js":"410","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/create-group-dialog.js":"411","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/manage-members-dialog.js":"412","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/markdown-editor/detail-list-view/index.js":"413","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/import-members-dialog.js":"414","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/shared-repo-list-view/shared-repo-list-view.js":"415","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/share-with-ocm/remote-dir-path.js":"416","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toolbar/groups-toolbar.js":"417","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/perm-select.js":"418","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/file-tag.js":"419","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/lib-content-view/lib-content-toolbar.js":"420","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/repo-info.js":"421","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/lib-decrypt-dialog.js":"422","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/collab-server.js":"423","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/new-wiki-dialog.js":"424","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/delete-folder-dialog.js":"425","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/wiki-select-dialog.js":"426","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/op-icon.js":"427","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/lib-content-view/lib-content-container.js":"428","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toolbar/invitations-toolbar.js":"429","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/invite-people-dialog.js":"430","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/invitation-revoke-dialog.js":"431","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-uploader/file-uploader.js":"432","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dirent-detail/file-details.js":"433","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-view/file-info.js":"434","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-view/file-toolbar.js":"435","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/wiki-list-view/wiki-list-view.js":"436","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sdoc/sdoc-file-history/history-version.js":"437","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/set-webdav-password.js":"438","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/remove-webdav-password.js":"439","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/reset-webdav-password.js":"440","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/switch/index.js":"441","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/confirm-delete-account.js":"442","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/history-trash-file-view/download.js":"443","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/confirm-disconnect-dingtalk.js":"444","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/confirm-disconnect-wechat.js":"445","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/subscription-api.js":"446","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/notice-item.js":"447","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/user-notifications.js":"448","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/search/advanced-search.js":"449","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/search/search-results.js":"450","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/markdown-editor/header-toolbar/button-item.js":"451","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/markdown-editor/header-toolbar/more-menu.js":"452","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/markdown-editor/header-toolbar/button-group.js":"453","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/user-content/user-repos.js":"454","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/markdown-editor/header-toolbar/collab-users-button.js":"455","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/markdown-editor/header-toolbar/file-info.js":"456","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/copy-to-clipboard.js":"457","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/user-content/user-groups.js":"458","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-select.js":"459","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/user-content/user-info.js":"460","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sdoc/sdoc-editor/external-operations.js":"461","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/statistic/picker.js":"462","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/services/links.js":"463","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/user-content/index.js":"464","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-unlink-device-dialog.js":"465","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/notification-popover/index.js":"466","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/statistic/traffic-table-body.js":"467","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/statistic/picker.js":"468","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/statistic/traffic-table.js":"469","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/web-settings/setting-item-base.js":"470","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/user-list/index.js":"471","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/select/index.js":"472","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/user-list-search/index.js":"473","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/users-nav/index.js":"474","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/statistic/traffic-table-body.js":"475","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/statistic/traffic-table.js":"476","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-lib-history-setting-dialog.js":"477","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-group-transfer-dialog.js":"478","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-set-group-quota-dialog.js":"479","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-rename-department-dialog.js":"480","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-delete-department-dialog.js":"481","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-share-dialog.js":"482","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-add-member-dialog.js":"483","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-add-repo-dialog.js":"484","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/work-weixin/work-weixin-department-members-list.js":"485","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/select-editor/sysadmin-user-role-editor.js":"486","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/dingtalk/dingtalk-departments-tree-node.js":"487","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/dingtalk/dingtalk-department-members-list.js":"488","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/work-weixin/work-weixin-departments-tree-node.js":"489","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/dingtalk/dingtalk-departments-tree-panel.js":"490","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/work-weixin/work-weixin-departments-tree-panel.js":"491","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/terms-editor-dialog.js":"492","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/web-settings/setting-item-base.js":"493","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/services/chat.js":"494","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/shared-link-file-uploader/forbid-upload-list-item.js":"495","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/shared-link-file-uploader/upload-list-item.js":"496","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/terms-and-conditions/item.js":"497","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/extra-attributes.js":"498","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/search/ai-search-ask.js":"499","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/search/constant.js":"500","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/search/search-result-item.js":"501","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/share-to-user.js":"502","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/internal-link.js":"503","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/share-to-other-server.js":"504","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/share-to-group.js":"505","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/search-file-dialog.js":"506","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-chooser/repo-list-view.js":"507","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-chooser/searched-list-view.js":"508","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/custom-permission/custom-permission-manager.js":"509","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/about-dialog.js":"510","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/share-to-invite-people.js":"511","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/search/ai-search-widgets/ai-search-robot.js":"512","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/history-list-view/history-list-item.js":"513","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toast/toastManager.js":"514","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/dashboard/activity-item.js":"515","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/upload-link/upload-list-item.js":"516","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/upload-link/forbid-upload-list-item.js":"517","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/generate-upload-link.js":"518","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/tree-view/tree-view.js":"519","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/wiki-dir-list-view/wiki-dir-list-view.js":"520","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/custom-permission.js":"521","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/my-libs/mylib-repo-list-item.js":"522","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/select-editor/select-editor.js":"523","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/share-link-panel/index.js":"524","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/shared-repo-list-view/shared-repo-list-item.js":"525","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/tree-view/tree.js":"526","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-tag-list.js":"527","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/list-and-add-group-members.js":"528","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/seafile-markdown-viewer/index.js":"529","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toolbar/view-mode-toolbar.js":"530","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/wiki/index-md-viewer/index.js":"531","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toolbar/view-file-toolbar.js":"532","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toolbar/multiple-dir-operation-toolbar.js":"533","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toolbar/dir-operation-toolbar.js":"534","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dirent-detail/dirent-details.js":"535","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-uploader/upload-progress-dialog.js":"536","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/sdoc-wiki-page-viewer/index.js":"537","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/popover/edit-filetag-popover.js":"538","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/upload-remind-dialog.js":"539","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/icon-button.js":"540","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dir-view-mode/dir-grid-view.js":"541","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/wiki-list-view/wiki-list-item.js":"542","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dir-view-mode/dir-column-view.js":"543","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dir-view-mode/dir-list-view.js":"544","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/rename.js":"545","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/cur-dir-path/index.js":"546","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/operations/index.js":"547","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/user-content/user-group-item.js":"548","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/user-content/user-repo-item.js":"549","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/date-and-time-picker.js":"550","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/create-file-dialog.js":"551","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/date-format-utils.js":"552","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/internal-link-dialog.js":"553","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/api/index.js":"554","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/user-list/user-item.js":"555","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/select/seahub-select.js":"556","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/select/no-group-message.js":"557","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-share-to-group.js":"558","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-share-to-user.js":"559","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/select/seahub-select-style.js":"560","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/utils/index.js":"561","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/terms-preview-dialog.js":"562","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/markdown-utils.js":"563","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/number-precision.js":"564","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/search/ai-search-widgets/ai-search-refrences.js":"565","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-chooser/repo-list-item.js":"566","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/custom-permission/add-custom-permission.js":"567","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-chooser/searched-list-item.js":"568","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/send-link.js":"569","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/custom-permission/edit-custom-permission.js":"570","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/custom-permission/list-custom-permissions.js":"571","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toast/toast.js":"572","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/list-created-files-dialog.js":"573","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/tree-view/tree-node-view.js":"574","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/context-menu/context-menu.js":"575","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/context-menu/actions.js":"576","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/set-link-expiration.js":"577","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/shared-link.js":"578","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/wiki-dir-list-view/wiki-dir-list-item.js":"579","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/constants/index.js":"580","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/change-repo-password-dialog.js":"581","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/lib-history-setting-dialog.js":"582","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/lib-sub-folder-permission-dialog.js":"583","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/repo-api-token-dialog.js":"584","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/lib-old-files-auto-del-dialog.js":"585","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/repo-seatable-integration-dialog.js":"586","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/label-repo-state-dialog.js":"587","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/reset-encrypted-repo-password-dialog.js":"588","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/my-libs/mylib-repo-menu.js":"589","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/repo-share-admin-dialog.js":"590","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/services/generate-share-link-with-password.js":"591","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/share-link-panel/link-creation.js":"592","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/share-link-panel/link-list.js":"593","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/group-members.js":"594","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/share-link-panel/link-details.js":"595","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/edit-filetag-dialog.js":"596","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/wiki/index-md-viewer/nav-item.js":"597","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/copy-dirent-dialog.js":"598","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/move-dirent-dialog.js":"599","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dirent-detail/detail-list-view.js":"600","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/rename-dirent.js":"601","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/wiki/utils/generate-navs.js":"602","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-uploader/upload-list-item.js":"603","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/seahub-popover.js":"604","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-uploader/forbid-upload-list-item.js":"605","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/common-add-tool.js":"606","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/search-input.js":"607","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/popover/tag-item.js":"608","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dropdown-menu/item-dropdown-menu.js":"609","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/wiki-delete-dialog.js":"610","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dir-view-mode/dir-column-file.js":"611","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dir-view-mode/dir-column-nav.js":"612","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dirent-list-view/dirent-none-view.js":"613","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dirent-grid-view/dirent-grid-view.js":"614","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/cur-dir-path/dir-tool.js":"615","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/cur-dir-path/dir-path.js":"616","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dirent-list-view/dirent-list-view.js":"617","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/operations/internal-link-operation/index.js":"618","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-chooser/tree-list-view.js":"619","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/custom-permission/custom-permission-editor.js":"620","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toast/alert.js":"621","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/custom-permission/custom-permission-item.js":"622","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/context-menu/globalEventListener.js":"623","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/btn-qr-code.js":"624","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/context-menu/helpers.js":"625","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/seatable-integration-account-setting-widgets/seatable-account-setting-list.js":"626","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/constants/zIndexes.js":"627","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/seatable-integration-account-setting-widgets/add-seatable-account-setting.js":"628","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/constants/keyCodes.js":"629","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/lib-sub-folder-set-group-permission-dialog.js":"630","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/select-editor/repo-api-token-permission-editor.js":"631","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/lib-sub-folder-set-user-permission-dialog.js":"632","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/services/share-social-media.js":"633","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/share-link-panel/link-item.js":"634","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/repo-share-admin/upload-links.js":"635","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/services/china-share-info.js":"636","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/create-tag-dialog.js":"637","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/repo-share-admin/user-shares.js":"638","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/repo-share-admin/group-shares.js":"639","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dirent-grid-view/dirent-grid-item.js":"640","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/repo-share-admin/share-links.js":"641","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/rename-dialog.js":"642","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/confirm-apply-folder-properties-dialog.js":"643","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dirent-list-view/dirent-list-item.js":"644","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/popover/list-tag-popover.js":"645","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/draggable/dirents-dragged-preview.js":"646","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/services/share-link-panel/index.js":"647","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/extra-attributes-dialog/index.js":"648","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-chooser/tree-list-item.js":"649","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/seatable-integration-account-setting-widgets/seatable-account-setting-item.js":"650","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dirent-list-view/file-tag.js":"651","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/popover/virtual-tag-list-item.js":"652","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/popover/tag-list-item.js":"653","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/popover/tag-list-footer.js":"654","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/services/share-link-panel/link-creation.js":"655","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/services/share-link-panel/link-list.js":"656","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/extra-attributes-dialog/column/index.js":"657","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/seatable-integration-account-setting-widgets/delete-seatables-dialog.js":"658","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/popover/virtual-tag-color.js":"659","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/tag-color.js":"660","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/popover/virtual-tag-name.js":"661","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/tag-name.js":"662","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/extra-attributes-dialog/column/column-name.js":"663","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/extra-attributes-dialog/editor/index.js":"664","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/extra-attributes-dialog/editor/simple-text.js":"665","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/extra-attributes-dialog/editor/formula-formatter.js":"666","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/extra-attributes-dialog/editor/number-editor.js":"667","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/extra-attributes-dialog/editor/date-editor.js":"668","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/extra-attributes-dialog/editor/ctime-formatter.js":"669","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/extra-attributes-dialog/editor/single-select/index.js":"670","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/extra-attributes-dialog/editor/single-select/single-select-editor.js":"671","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/extra-attributes-dialog/editor/search-input.js":"672"},{"size":6106,"mtime":1767000516779,"results":"673","hashOfConfig":"674"},{"size":12700,"mtime":1767000516818,"results":"675","hashOfConfig":"674"},{"size":501,"mtime":1767000516551,"results":"676","hashOfConfig":"674"},{"size":936,"mtime":1767000516551,"results":"677","hashOfConfig":"674"},{"size":1586,"mtime":1767000516738,"results":"678","hashOfConfig":"674"},{"size":33385,"mtime":1767000516517,"results":"679","hashOfConfig":"674"},{"size":158,"mtime":1767000516736,"results":"680","hashOfConfig":"674"},{"size":2214,"mtime":1767000516735,"results":"681","hashOfConfig":"674"},{"size":9119,"mtime":1767000516862,"results":"682","hashOfConfig":"674"},{"size":2588,"mtime":1767000516565,"results":"683","hashOfConfig":"674"},{"size":1723,"mtime":1767000516738,"results":"684","hashOfConfig":"674"},{"size":878,"mtime":1767000516864,"results":"685","hashOfConfig":"674"},{"size":422,"mtime":1767000516735,"results":"686","hashOfConfig":"674"},{"size":2890,"mtime":1767000516743,"results":"687","hashOfConfig":"674"},{"size":2737,"mtime":1767000516566,"results":"688","hashOfConfig":"674"},{"size":1029,"mtime":1767000516864,"results":"689","hashOfConfig":"674"},{"size":595,"mtime":1767000516550,"results":"690","hashOfConfig":"674"},{"size":12073,"mtime":1767000931594,"results":"691","hashOfConfig":"674"},{"size":806,"mtime":1767000516873,"results":"692","hashOfConfig":"674"},{"size":855,"mtime":1767000516516,"results":"693","hashOfConfig":"674"},{"size":2835,"mtime":1767000516734,"results":"694","hashOfConfig":"674"},{"size":1703,"mtime":1767000516737,"results":"695","hashOfConfig":"674"},{"size":2718,"mtime":1767000516550,"results":"696","hashOfConfig":"674"},{"size":1068,"mtime":1767000516737,"results":"697","hashOfConfig":"674"},{"size":1305,"mtime":1767000516566,"results":"698","hashOfConfig":"674"},{"size":6779,"mtime":1767000516864,"results":"699","hashOfConfig":"674"},{"size":14092,"mtime":1767000516854,"results":"700","hashOfConfig":"674"},{"size":1628,"mtime":1767000516734,"results":"701","hashOfConfig":"674"},{"size":10720,"mtime":1767000516517,"results":"702","hashOfConfig":"674"},{"size":3471,"mtime":1767000516736,"results":"703","hashOfConfig":"674"},{"size":1682,"mtime":1767000516863,"results":"704","hashOfConfig":"674"},{"size":2657,"mtime":1767000516549,"results":"705","hashOfConfig":"674"},{"size":969,"mtime":1767000516796,"results":"706","hashOfConfig":"674"},{"size":14048,"mtime":1767000516735,"results":"707","hashOfConfig":"674"},{"size":11126,"mtime":1767000516553,"results":"708","hashOfConfig":"674"},{"size":8707,"mtime":1767000516756,"results":"709","hashOfConfig":"674"},{"size":1587,"mtime":1767000516857,"results":"710","hashOfConfig":"674"},{"size":2489,"mtime":1767000516550,"results":"711","hashOfConfig":"674"},{"size":1264,"mtime":1767000516767,"results":"712","hashOfConfig":"674"},{"size":11696,"mtime":1767000516777,"results":"713","hashOfConfig":"674"},{"size":6496,"mtime":1767000516781,"results":"714","hashOfConfig":"674"},{"size":4231,"mtime":1767000516777,"results":"715","hashOfConfig":"674"},{"size":5446,"mtime":1767000516783,"results":"716","hashOfConfig":"674"},{"size":5042,"mtime":1767000516781,"results":"717","hashOfConfig":"674"},{"size":8996,"mtime":1767000516776,"results":"718","hashOfConfig":"674"},{"size":3094,"mtime":1767000516774,"results":"719","hashOfConfig":"674"},{"size":8602,"mtime":1767000516787,"results":"720","hashOfConfig":"674"},{"size":7968,"mtime":1767000516773,"results":"721","hashOfConfig":"674"},{"size":2301,"mtime":1767000516782,"results":"722","hashOfConfig":"674"},{"size":386,"mtime":1767000516793,"results":"723","hashOfConfig":"674"},{"size":3309,"mtime":1767000516781,"results":"724","hashOfConfig":"674"},{"size":2131,"mtime":1767000516792,"results":"725","hashOfConfig":"674"},{"size":8719,"mtime":1767000516780,"results":"726","hashOfConfig":"674"},{"size":7063,"mtime":1767000516780,"results":"727","hashOfConfig":"674"},{"size":7062,"mtime":1767000516776,"results":"728","hashOfConfig":"674"},{"size":898,"mtime":1767000516774,"results":"729","hashOfConfig":"674"},{"size":10208,"mtime":1767000516775,"results":"730","hashOfConfig":"674"},{"size":5022,"mtime":1767000516792,"results":"731","hashOfConfig":"674"},{"size":6715,"mtime":1767000516780,"results":"732","hashOfConfig":"674"},{"size":2515,"mtime":1767000516784,"results":"733","hashOfConfig":"674"},{"size":8655,"mtime":1767000516793,"results":"734","hashOfConfig":"674"},{"size":3128,"mtime":1767000516784,"results":"735","hashOfConfig":"674"},{"size":21073,"mtime":1767000516782,"results":"736","hashOfConfig":"674"},{"size":2251,"mtime":1767000516783,"results":"737","hashOfConfig":"674"},{"size":2803,"mtime":1767000516785,"results":"738","hashOfConfig":"674"},{"size":687,"mtime":1767000516794,"results":"739","hashOfConfig":"674"},{"size":6348,"mtime":1767000516827,"results":"740","hashOfConfig":"674"},{"size":7824,"mtime":1767000516785,"results":"741","hashOfConfig":"674"},{"size":359,"mtime":1767000516814,"results":"742","hashOfConfig":"674"},{"size":2387,"mtime":1767000516786,"results":"743","hashOfConfig":"674"},{"size":14185,"mtime":1767000516832,"results":"744","hashOfConfig":"674"},{"size":6508,"mtime":1767000516795,"results":"745","hashOfConfig":"674"},{"size":12953,"mtime":1767000516555,"results":"746","hashOfConfig":"674"},{"size":3123,"mtime":1767000516841,"results":"747","hashOfConfig":"674"},{"size":903,"mtime":1767000516737,"results":"748","hashOfConfig":"674"},{"size":46548,"mtime":1767000516559,"results":"749","hashOfConfig":"674"},{"size":697,"mtime":1767000516794,"results":"750","hashOfConfig":"674"},{"size":4774,"mtime":1767000516790,"results":"751","hashOfConfig":"674"},{"size":12235,"mtime":1767000516778,"results":"752","hashOfConfig":"674"},{"size":2383,"mtime":1767000516843,"results":"753","hashOfConfig":"674"},{"size":707,"mtime":1767000516851,"results":"754","hashOfConfig":"674"},{"size":8364,"mtime":1767000516842,"results":"755","hashOfConfig":"674"},{"size":210,"mtime":1767000516836,"results":"756","hashOfConfig":"674"},{"size":2802,"mtime":1767000516843,"results":"757","hashOfConfig":"674"},{"size":12778,"mtime":1767000516779,"results":"758","hashOfConfig":"674"},{"size":2511,"mtime":1767000516841,"results":"759","hashOfConfig":"674"},{"size":231,"mtime":1767000516840,"results":"760","hashOfConfig":"674"},{"size":5127,"mtime":1767000516837,"results":"761","hashOfConfig":"674"},{"size":9090,"mtime":1767000516834,"results":"762","hashOfConfig":"674"},{"size":12355,"mtime":1767000516835,"results":"763","hashOfConfig":"674"},{"size":17453,"mtime":1767000516834,"results":"764","hashOfConfig":"674"},{"size":11514,"mtime":1767000516835,"results":"765","hashOfConfig":"674"},{"size":703,"mtime":1767000516850,"results":"766","hashOfConfig":"674"},{"size":6624,"mtime":1767000516851,"results":"767","hashOfConfig":"674"},{"size":5388,"mtime":1767000516811,"results":"768","hashOfConfig":"674"},{"size":4604,"mtime":1767000516823,"results":"769","hashOfConfig":"674"},{"size":12826,"mtime":1767000516809,"results":"770","hashOfConfig":"674"},{"size":5271,"mtime":1767000516839,"results":"771","hashOfConfig":"674"},{"size":7027,"mtime":1767000516810,"results":"772","hashOfConfig":"674"},{"size":5500,"mtime":1767000516812,"results":"773","hashOfConfig":"674"},{"size":9309,"mtime":1767000516840,"results":"774","hashOfConfig":"674"},{"size":4742,"mtime":1767000516837,"results":"775","hashOfConfig":"674"},{"size":6734,"mtime":1767000516822,"results":"776","hashOfConfig":"674"},{"size":2973,"mtime":1767000516810,"results":"777","hashOfConfig":"674"},{"size":5112,"mtime":1767000516821,"results":"778","hashOfConfig":"674"},{"size":11330,"mtime":1767000516822,"results":"779","hashOfConfig":"674"},{"size":380,"mtime":1767000516820,"results":"780","hashOfConfig":"674"},{"size":4564,"mtime":1767000516820,"results":"781","hashOfConfig":"674"},{"size":5781,"mtime":1767000516819,"results":"782","hashOfConfig":"674"},{"size":3734,"mtime":1767000516819,"results":"783","hashOfConfig":"674"},{"size":3288,"mtime":1767000516819,"results":"784","hashOfConfig":"674"},{"size":9009,"mtime":1767000516828,"results":"785","hashOfConfig":"674"},{"size":4492,"mtime":1767000516826,"results":"786","hashOfConfig":"674"},{"size":7235,"mtime":1767000516829,"results":"787","hashOfConfig":"674"},{"size":4934,"mtime":1767000516824,"results":"788","hashOfConfig":"674"},{"size":8679,"mtime":1767000516826,"results":"789","hashOfConfig":"674"},{"size":14648,"mtime":1767000516824,"results":"790","hashOfConfig":"674"},{"size":3097,"mtime":1767000516817,"results":"791","hashOfConfig":"674"},{"size":11839,"mtime":1767000516852,"results":"792","hashOfConfig":"674"},{"size":11814,"mtime":1767000516814,"results":"793","hashOfConfig":"674"},{"size":3466,"mtime":1767000516818,"results":"794","hashOfConfig":"674"},{"size":6060,"mtime":1767000516825,"results":"795","hashOfConfig":"674"},{"size":6361,"mtime":1767000516826,"results":"796","hashOfConfig":"674"},{"size":8564,"mtime":1767000516806,"results":"797","hashOfConfig":"674"},{"size":12014,"mtime":1767000516805,"results":"798","hashOfConfig":"674"},{"size":8878,"mtime":1767000516805,"results":"799","hashOfConfig":"674"},{"size":6163,"mtime":1767000516830,"results":"800","hashOfConfig":"674"},{"size":4585,"mtime":1767000516805,"results":"801","hashOfConfig":"674"},{"size":7148,"mtime":1767000516831,"results":"802","hashOfConfig":"674"},{"size":7472,"mtime":1767000516830,"results":"803","hashOfConfig":"674"},{"size":10435,"mtime":1767000516830,"results":"804","hashOfConfig":"674"},{"size":17370,"mtime":1767000516846,"results":"805","hashOfConfig":"674"},{"size":8598,"mtime":1767000516815,"results":"806","hashOfConfig":"674"},{"size":3778,"mtime":1767000516832,"results":"807","hashOfConfig":"674"},{"size":9420,"mtime":1767000516849,"results":"808","hashOfConfig":"674"},{"size":12599,"mtime":1767000516815,"results":"809","hashOfConfig":"674"},{"size":5218,"mtime":1767000516847,"results":"810","hashOfConfig":"674"},{"size":1374,"mtime":1767000516724,"results":"811","hashOfConfig":"674"},{"size":10062,"mtime":1767000516852,"results":"812","hashOfConfig":"674"},{"size":998,"mtime":1767000516727,"results":"813","hashOfConfig":"674"},{"size":147,"mtime":1767000516581,"results":"814","hashOfConfig":"674"},{"size":5988,"mtime":1767000516701,"results":"815","hashOfConfig":"674"},{"size":1867,"mtime":1767000760401,"results":"816","hashOfConfig":"674"},{"size":219,"mtime":1767000516563,"results":"817","hashOfConfig":"674"},{"size":2549,"mtime":1767000516704,"results":"818","hashOfConfig":"674"},{"size":9920,"mtime":1767000516848,"results":"819","hashOfConfig":"674"},{"size":21944,"mtime":1767000516706,"results":"820","hashOfConfig":"674"},{"size":4215,"mtime":1767000516665,"results":"821","hashOfConfig":"674"},{"size":659,"mtime":1767000516726,"results":"822","hashOfConfig":"674"},{"size":2229,"mtime":1767000516628,"results":"823","hashOfConfig":"674"},{"size":1635,"mtime":1767000516661,"results":"824","hashOfConfig":"674"},{"size":2731,"mtime":1767000516556,"results":"825","hashOfConfig":"674"},{"size":7857,"mtime":1767000516870,"results":"826","hashOfConfig":"674"},{"size":1639,"mtime":1767000516685,"results":"827","hashOfConfig":"674"},{"size":1041,"mtime":1767000516858,"results":"828","hashOfConfig":"674"},{"size":1092,"mtime":1767000516581,"results":"829","hashOfConfig":"674"},{"size":1879,"mtime":1767000516588,"results":"830","hashOfConfig":"674"},{"size":6207,"mtime":1767000516581,"results":"831","hashOfConfig":"674"},{"size":4792,"mtime":1767000516753,"results":"832","hashOfConfig":"674"},{"size":15823,"mtime":1767000516752,"results":"833","hashOfConfig":"674"},{"size":3591,"mtime":1767000516858,"results":"834","hashOfConfig":"674"},{"size":796,"mtime":1767000516727,"results":"835","hashOfConfig":"674"},{"size":20586,"mtime":1767000516743,"results":"836","hashOfConfig":"674"},{"size":90,"mtime":1767000516584,"results":"837","hashOfConfig":"674"},{"size":27605,"mtime":1767000516717,"results":"838","hashOfConfig":"674"},{"size":1040,"mtime":1767000516708,"results":"839","hashOfConfig":"674"},{"size":15372,"mtime":1767000516761,"results":"840","hashOfConfig":"674"},{"size":910,"mtime":1767000516737,"results":"841","hashOfConfig":"674"},{"size":475,"mtime":1767000516580,"results":"842","hashOfConfig":"674"},{"size":359,"mtime":1767000516579,"results":"843","hashOfConfig":"674"},{"size":1472,"mtime":1767000516580,"results":"844","hashOfConfig":"674"},{"size":780,"mtime":1767000516601,"results":"845","hashOfConfig":"674"},{"size":240,"mtime":1767000516768,"results":"846","hashOfConfig":"674"},{"size":9474,"mtime":1767000516769,"results":"847","hashOfConfig":"674"},{"size":6748,"mtime":1767000516860,"results":"848","hashOfConfig":"674"},{"size":9347,"mtime":1767000516770,"results":"849","hashOfConfig":"674"},{"size":11983,"mtime":1767000516770,"results":"850","hashOfConfig":"674"},{"size":17262,"mtime":1767000516766,"results":"851","hashOfConfig":"674"},{"size":5104,"mtime":1767000516803,"results":"852","hashOfConfig":"674"},{"size":20629,"mtime":1767000516771,"results":"853","hashOfConfig":"674"},{"size":7417,"mtime":1767000516759,"results":"854","hashOfConfig":"674"},{"size":10819,"mtime":1767000516772,"results":"855","hashOfConfig":"674"},{"size":12177,"mtime":1767000516771,"results":"856","hashOfConfig":"674"},{"size":9446,"mtime":1767000516746,"results":"857","hashOfConfig":"674"},{"size":5993,"mtime":1767000516759,"results":"858","hashOfConfig":"674"},{"size":5223,"mtime":1767000516803,"results":"859","hashOfConfig":"674"},{"size":25161,"mtime":1767000516765,"results":"860","hashOfConfig":"674"},{"size":9089,"mtime":1767000516853,"results":"861","hashOfConfig":"674"},{"size":7354,"mtime":1767000516765,"results":"862","hashOfConfig":"674"},{"size":70634,"mtime":1767000516755,"results":"863","hashOfConfig":"674"},{"size":5779,"mtime":1767000516754,"results":"864","hashOfConfig":"674"},{"size":9077,"mtime":1767000516862,"results":"865","hashOfConfig":"674"},{"size":371,"mtime":1767000516729,"results":"866","hashOfConfig":"674"},{"size":825,"mtime":1767000516598,"results":"867","hashOfConfig":"674"},{"size":2387,"mtime":1767000516728,"results":"868","hashOfConfig":"674"},{"size":4072,"mtime":1767000516595,"results":"869","hashOfConfig":"674"},{"size":10609,"mtime":1767000516855,"results":"870","hashOfConfig":"674"},{"size":1146,"mtime":1767000516856,"results":"871","hashOfConfig":"674"},{"size":586,"mtime":1767000516728,"results":"872","hashOfConfig":"674"},{"size":316,"mtime":1767000516727,"results":"873","hashOfConfig":"674"},{"size":545,"mtime":1767000516728,"results":"874","hashOfConfig":"674"},{"size":613,"mtime":1767000516573,"results":"875","hashOfConfig":"674"},{"size":3217,"mtime":1767000516575,"results":"876","hashOfConfig":"674"},{"size":4494,"mtime":1767000516572,"results":"877","hashOfConfig":"674"},{"size":3055,"mtime":1767000516576,"results":"878","hashOfConfig":"674"},{"size":1830,"mtime":1767000516571,"results":"879","hashOfConfig":"674"},{"size":1700,"mtime":1767000516573,"results":"880","hashOfConfig":"674"},{"size":1357,"mtime":1767000516571,"results":"881","hashOfConfig":"674"},{"size":2768,"mtime":1767000516571,"results":"882","hashOfConfig":"674"},{"size":1423,"mtime":1767000516574,"results":"883","hashOfConfig":"674"},{"size":2977,"mtime":1767000516571,"results":"884","hashOfConfig":"674"},{"size":4171,"mtime":1767000516575,"results":"885","hashOfConfig":"674"},{"size":1709,"mtime":1767000516574,"results":"886","hashOfConfig":"674"},{"size":2651,"mtime":1767000516633,"results":"887","hashOfConfig":"674"},{"size":437,"mtime":1767000516729,"results":"888","hashOfConfig":"674"},{"size":588,"mtime":1767000516730,"results":"889","hashOfConfig":"674"},{"size":498,"mtime":1767000516729,"results":"890","hashOfConfig":"674"},{"size":1732,"mtime":1767000516732,"results":"891","hashOfConfig":"674"},{"size":1347,"mtime":1767000516723,"results":"892","hashOfConfig":"674"},{"size":876,"mtime":1767000516724,"results":"893","hashOfConfig":"674"},{"size":3330,"mtime":1767000516661,"results":"894","hashOfConfig":"674"},{"size":2549,"mtime":1767000516720,"results":"895","hashOfConfig":"674"},{"size":2530,"mtime":1767000516666,"results":"896","hashOfConfig":"674"},{"size":2033,"mtime":1767000516756,"results":"897","hashOfConfig":"674"},{"size":1383,"mtime":1767000516799,"results":"898","hashOfConfig":"674"},{"size":1234,"mtime":1767000516645,"results":"899","hashOfConfig":"674"},{"size":379,"mtime":1767000516703,"results":"900","hashOfConfig":"674"},{"size":3869,"mtime":1767000516699,"results":"901","hashOfConfig":"674"},{"size":5044,"mtime":1767000516752,"results":"902","hashOfConfig":"674"},{"size":11688,"mtime":1767000516767,"results":"903","hashOfConfig":"674"},{"size":1922,"mtime":1767000516757,"results":"904","hashOfConfig":"674"},{"size":18947,"mtime":1767000516592,"results":"905","hashOfConfig":"674"},{"size":991,"mtime":1767000516572,"results":"906","hashOfConfig":"674"},{"size":9721,"mtime":1767000516751,"results":"907","hashOfConfig":"674"},{"size":1760,"mtime":1767000516795,"results":"908","hashOfConfig":"674"},{"size":879,"mtime":1767000516792,"results":"909","hashOfConfig":"674"},{"size":310,"mtime":1767000516599,"results":"910","hashOfConfig":"674"},{"size":592,"mtime":1767000516562,"results":"911","hashOfConfig":"674"},{"size":3257,"mtime":1767000516777,"results":"912","hashOfConfig":"674"},{"size":2299,"mtime":1767000799328,"results":"913","hashOfConfig":"674"},{"size":718,"mtime":1767000516585,"results":"914","hashOfConfig":"674"},{"size":2432,"mtime":1767000516640,"results":"915","hashOfConfig":"674"},{"size":2474,"mtime":1767000516856,"results":"916","hashOfConfig":"674"},{"size":1339,"mtime":1767000516663,"results":"917","hashOfConfig":"674"},{"size":1047,"mtime":1767000516775,"results":"918","hashOfConfig":"674"},{"size":5518,"mtime":1767000516690,"results":"919","hashOfConfig":"674"},{"size":1265,"mtime":1767000516710,"results":"920","hashOfConfig":"674"},{"size":2355,"mtime":1767000516686,"results":"921","hashOfConfig":"674"},{"size":2208,"mtime":1767000516634,"results":"922","hashOfConfig":"674"},{"size":2808,"mtime":1767000516662,"results":"923","hashOfConfig":"674"},{"size":2389,"mtime":1767000516634,"results":"924","hashOfConfig":"674"},{"size":2274,"mtime":1767000516775,"results":"925","hashOfConfig":"674"},{"size":1208,"mtime":1767000516733,"results":"926","hashOfConfig":"674"},{"size":2755,"mtime":1767000516689,"results":"927","hashOfConfig":"674"},{"size":2670,"mtime":1767000516667,"results":"928","hashOfConfig":"674"},{"size":461,"mtime":1767000516564,"results":"929","hashOfConfig":"674"},{"size":1987,"mtime":1767000516640,"results":"930","hashOfConfig":"674"},{"size":903,"mtime":1767000516561,"results":"931","hashOfConfig":"674"},{"size":2672,"mtime":1767000516631,"results":"932","hashOfConfig":"674"},{"size":1734,"mtime":1767000516639,"results":"933","hashOfConfig":"674"},{"size":3083,"mtime":1767000516666,"results":"934","hashOfConfig":"674"},{"size":637,"mtime":1767000516560,"results":"935","hashOfConfig":"674"},{"size":3727,"mtime":1767000516629,"results":"936","hashOfConfig":"674"},{"size":615,"mtime":1767000516562,"results":"937","hashOfConfig":"674"},{"size":11241,"mtime":1767000516865,"results":"938","hashOfConfig":"674"},{"size":3153,"mtime":1767000516791,"results":"939","hashOfConfig":"674"},{"size":1392,"mtime":1767000516786,"results":"940","hashOfConfig":"674"},{"size":7065,"mtime":1767000516774,"results":"941","hashOfConfig":"674"},{"size":560,"mtime":1767000516776,"results":"942","hashOfConfig":"674"},{"size":2854,"mtime":1767000516787,"results":"943","hashOfConfig":"674"},{"size":4434,"mtime":1767000516786,"results":"944","hashOfConfig":"674"},{"size":2772,"mtime":1767000516600,"results":"945","hashOfConfig":"674"},{"size":2441,"mtime":1767000516694,"results":"946","hashOfConfig":"674"},{"size":1148,"mtime":1767000516793,"results":"947","hashOfConfig":"674"},{"size":2378,"mtime":1767000516640,"results":"948","hashOfConfig":"674"},{"size":1821,"mtime":1767000516634,"results":"949","hashOfConfig":"674"},{"size":4678,"mtime":1767000516787,"results":"950","hashOfConfig":"674"},{"size":6791,"mtime":1767000516794,"results":"951","hashOfConfig":"674"},{"size":1774,"mtime":1767000516643,"results":"952","hashOfConfig":"674"},{"size":2281,"mtime":1767000516558,"results":"953","hashOfConfig":"674"},{"size":1058,"mtime":1767000516849,"results":"954","hashOfConfig":"674"},{"size":606,"mtime":1767000516731,"results":"955","hashOfConfig":"674"},{"size":571,"mtime":1767000516605,"results":"956","hashOfConfig":"674"},{"size":498,"mtime":1767000516778,"results":"957","hashOfConfig":"674"},{"size":2095,"mtime":1767000516559,"results":"958","hashOfConfig":"674"},{"size":1048,"mtime":1767000516779,"results":"959","hashOfConfig":"674"},{"size":2854,"mtime":1767000516845,"results":"960","hashOfConfig":"674"},{"size":4434,"mtime":1767000516844,"results":"961","hashOfConfig":"674"},{"size":1348,"mtime":1767000516843,"results":"962","hashOfConfig":"674"},{"size":560,"mtime":1767000516789,"results":"963","hashOfConfig":"674"},{"size":1661,"mtime":1767000516791,"results":"964","hashOfConfig":"674"},{"size":1185,"mtime":1767000516850,"results":"965","hashOfConfig":"674"},{"size":1324,"mtime":1767000516656,"results":"966","hashOfConfig":"674"},{"size":2433,"mtime":1767000516791,"results":"967","hashOfConfig":"674"},{"size":6818,"mtime":1767000516851,"results":"968","hashOfConfig":"674"},{"size":435,"mtime":1767000516563,"results":"969","hashOfConfig":"674"},{"size":4664,"mtime":1767000516844,"results":"970","hashOfConfig":"674"},{"size":6245,"mtime":1767000516665,"results":"971","hashOfConfig":"674"},{"size":1373,"mtime":1767000516836,"results":"972","hashOfConfig":"674"},{"size":4633,"mtime":1767000516844,"results":"973","hashOfConfig":"674"},{"size":489,"mtime":1767000516818,"results":"974","hashOfConfig":"674"},{"size":1569,"mtime":1767000516839,"results":"975","hashOfConfig":"674"},{"size":605,"mtime":1767000516561,"results":"976","hashOfConfig":"674"},{"size":849,"mtime":1767000516561,"results":"977","hashOfConfig":"674"},{"size":1201,"mtime":1767000516848,"results":"978","hashOfConfig":"674"},{"size":19523,"mtime":1767000516836,"results":"979","hashOfConfig":"674"},{"size":1253,"mtime":1767000516661,"results":"980","hashOfConfig":"674"},{"size":2070,"mtime":1767000516673,"results":"981","hashOfConfig":"674"},{"size":1637,"mtime":1767000516678,"results":"982","hashOfConfig":"674"},{"size":2336,"mtime":1767000516677,"results":"983","hashOfConfig":"674"},{"size":1786,"mtime":1767000516678,"results":"984","hashOfConfig":"674"},{"size":7426,"mtime":1767000516823,"results":"985","hashOfConfig":"674"},{"size":5568,"mtime":1767000516668,"results":"986","hashOfConfig":"674"},{"size":1128,"mtime":1767000516811,"results":"987","hashOfConfig":"674"},{"size":3310,"mtime":1767000516683,"results":"988","hashOfConfig":"674"},{"size":3709,"mtime":1767000516813,"results":"989","hashOfConfig":"674"},{"size":236,"mtime":1767000516564,"results":"990","hashOfConfig":"674"},{"size":11888,"mtime":1767000516813,"results":"991","hashOfConfig":"674"},{"size":2649,"mtime":1767000516676,"results":"992","hashOfConfig":"674"},{"size":2138,"mtime":1767000516813,"results":"993","hashOfConfig":"674"},{"size":2850,"mtime":1767000516671,"results":"994","hashOfConfig":"674"},{"size":1717,"mtime":1767000516669,"results":"995","hashOfConfig":"674"},{"size":1368,"mtime":1767000516822,"results":"996","hashOfConfig":"674"},{"size":4849,"mtime":1767000516821,"results":"997","hashOfConfig":"674"},{"size":2932,"mtime":1767000516821,"results":"998","hashOfConfig":"674"},{"size":2838,"mtime":1767000516673,"results":"999","hashOfConfig":"674"},{"size":1822,"mtime":1767000516675,"results":"1000","hashOfConfig":"674"},{"size":2768,"mtime":1767000516669,"results":"1001","hashOfConfig":"674"},{"size":1604,"mtime":1767000516819,"results":"1002","hashOfConfig":"674"},{"size":1827,"mtime":1767000516679,"results":"1003","hashOfConfig":"674"},{"size":3685,"mtime":1767000516671,"results":"1004","hashOfConfig":"674"},{"size":1074,"mtime":1767000516828,"results":"1005","hashOfConfig":"674"},{"size":1710,"mtime":1767000516654,"results":"1006","hashOfConfig":"674"},{"size":1970,"mtime":1767000516671,"results":"1007","hashOfConfig":"674"},{"size":7562,"mtime":1767000516825,"results":"1008","hashOfConfig":"674"},{"size":1716,"mtime":1767000516689,"results":"1009","hashOfConfig":"674"},{"size":6842,"mtime":1767000516820,"results":"1010","hashOfConfig":"674"},{"size":1589,"mtime":1767000516824,"results":"1011","hashOfConfig":"674"},{"size":1876,"mtime":1767000516674,"results":"1012","hashOfConfig":"674"},{"size":1445,"mtime":1767000516829,"results":"1013","hashOfConfig":"674"},{"size":1572,"mtime":1767000516677,"results":"1014","hashOfConfig":"674"},{"size":1261,"mtime":1767000516831,"results":"1015","hashOfConfig":"674"},{"size":1428,"mtime":1767000516806,"results":"1016","hashOfConfig":"674"},{"size":1502,"mtime":1767000516670,"results":"1017","hashOfConfig":"674"},{"size":3234,"mtime":1767000516672,"results":"1018","hashOfConfig":"674"},{"size":635,"mtime":1767000516831,"results":"1019","hashOfConfig":"674"},{"size":357,"mtime":1767000516816,"results":"1020","hashOfConfig":"674"},{"size":336,"mtime":1767000516807,"results":"1021","hashOfConfig":"674"},{"size":560,"mtime":1767000516845,"results":"1022","hashOfConfig":"674"},{"size":2318,"mtime":1767000516846,"results":"1023","hashOfConfig":"674"},{"size":1056,"mtime":1767000516816,"results":"1024","hashOfConfig":"674"},{"size":1661,"mtime":1767000516847,"results":"1025","hashOfConfig":"674"},{"size":1123,"mtime":1767000516848,"results":"1026","hashOfConfig":"674"},{"size":4769,"mtime":1767000516679,"results":"1027","hashOfConfig":"674"},{"size":2329,"mtime":1767000516833,"results":"1028","hashOfConfig":"674"},{"size":2489,"mtime":1767000516869,"results":"1029","hashOfConfig":"674"},{"size":1673,"mtime":1767000516675,"results":"1030","hashOfConfig":"674"},{"size":6121,"mtime":1767000516647,"results":"1031","hashOfConfig":"674"},{"size":5350,"mtime":1767000516707,"results":"1032","hashOfConfig":"674"},{"size":1316,"mtime":1767000516846,"results":"1033","hashOfConfig":"674"},{"size":1014,"mtime":1767000516556,"results":"1034","hashOfConfig":"674"},{"size":323,"mtime":1767000516699,"results":"1035","hashOfConfig":"674"},{"size":2052,"mtime":1767000516660,"results":"1036","hashOfConfig":"674"},{"size":3588,"mtime":1767000516664,"results":"1037","hashOfConfig":"674"},{"size":2535,"mtime":1767000516642,"results":"1038","hashOfConfig":"674"},{"size":22943,"mtime":1767000516621,"results":"1039","hashOfConfig":"674"},{"size":14969,"mtime":1767000516691,"results":"1040","hashOfConfig":"674"},{"size":1134,"mtime":1767000516623,"results":"1041","hashOfConfig":"674"},{"size":17071,"mtime":1767000516627,"results":"1042","hashOfConfig":"674"},{"size":1829,"mtime":1767000516562,"results":"1043","hashOfConfig":"674"},{"size":2163,"mtime":1767000516580,"results":"1044","hashOfConfig":"674"},{"size":13130,"mtime":1767000516591,"results":"1045","hashOfConfig":"674"},{"size":15532,"mtime":1767000516612,"results":"1046","hashOfConfig":"674"},{"size":1701,"mtime":1767000516584,"results":"1047","hashOfConfig":"674"},{"size":939,"mtime":1767000516589,"results":"1048","hashOfConfig":"674"},{"size":2468,"mtime":1767000516705,"results":"1049","hashOfConfig":"674"},{"size":5297,"mtime":1767000516745,"results":"1050","hashOfConfig":"674"},{"size":2642,"mtime":1767000516764,"results":"1051","hashOfConfig":"674"},{"size":1137,"mtime":1767000516561,"results":"1052","hashOfConfig":"674"},{"size":6273,"mtime":1767000516760,"results":"1053","hashOfConfig":"674"},{"size":2012,"mtime":1767000516769,"results":"1054","hashOfConfig":"674"},{"size":4400,"mtime":1767000516768,"results":"1055","hashOfConfig":"674"},{"size":3753,"mtime":1767000516714,"results":"1056","hashOfConfig":"674"},{"size":905,"mtime":1767000516563,"results":"1057","hashOfConfig":"674"},{"size":1659,"mtime":1767000516643,"results":"1058","hashOfConfig":"674"},{"size":963,"mtime":1767000516565,"results":"1059","hashOfConfig":"674"},{"size":2019,"mtime":1767000516662,"results":"1060","hashOfConfig":"674"},{"size":402,"mtime":1767000516580,"results":"1061","hashOfConfig":"674"},{"size":832,"mtime":1767000516599,"results":"1062","hashOfConfig":"674"},{"size":1616,"mtime":1767000516687,"results":"1063","hashOfConfig":"674"},{"size":539,"mtime":1767000516560,"results":"1064","hashOfConfig":"674"},{"size":919,"mtime":1767000516589,"results":"1065","hashOfConfig":"674"},{"size":714,"mtime":1767000516565,"results":"1066","hashOfConfig":"674"},{"size":3097,"mtime":1767000516589,"results":"1067","hashOfConfig":"674"},{"size":1564,"mtime":1767000516690,"results":"1068","hashOfConfig":"674"},{"size":4206,"mtime":1767000516758,"results":"1069","hashOfConfig":"674"},{"size":669,"mtime":1767000516564,"results":"1070","hashOfConfig":"674"},{"size":4482,"mtime":1767000516718,"results":"1071","hashOfConfig":"674"},{"size":77,"mtime":1767000516750,"results":"1072","hashOfConfig":"674"},{"size":2515,"mtime":1767000516582,"results":"1073","hashOfConfig":"674"},{"size":4907,"mtime":1767000516681,"results":"1074","hashOfConfig":"674"},{"size":9085,"mtime":1767000516641,"results":"1075","hashOfConfig":"674"},{"size":3956,"mtime":1767000516715,"results":"1076","hashOfConfig":"674"},{"size":804,"mtime":1767000516802,"results":"1077","hashOfConfig":"674"},{"size":503,"mtime":1767000516564,"results":"1078","hashOfConfig":"674"},{"size":2614,"mtime":1767000516663,"results":"1079","hashOfConfig":"674"},{"size":2238,"mtime":1767000516642,"results":"1080","hashOfConfig":"674"},{"size":1620,"mtime":1767000516664,"results":"1081","hashOfConfig":"674"},{"size":3314,"mtime":1767000516802,"results":"1082","hashOfConfig":"674"},{"size":1509,"mtime":1767000516642,"results":"1083","hashOfConfig":"674"},{"size":2692,"mtime":1767000516647,"results":"1084","hashOfConfig":"674"},{"size":1036,"mtime":1767000516660,"results":"1085","hashOfConfig":"674"},{"size":3414,"mtime":1767000516752,"results":"1086","hashOfConfig":"674"},{"size":2179,"mtime":1767000516632,"results":"1087","hashOfConfig":"674"},{"size":5064,"mtime":1767000516709,"results":"1088","hashOfConfig":"674"},{"size":2133,"mtime":1767000516803,"results":"1089","hashOfConfig":"674"},{"size":1735,"mtime":1767000516589,"results":"1090","hashOfConfig":"674"},{"size":3902,"mtime":1767000516630,"results":"1091","hashOfConfig":"674"},{"size":216,"mtime":1767000516565,"results":"1092","hashOfConfig":"674"},{"size":6485,"mtime":1767000516754,"results":"1093","hashOfConfig":"674"},{"size":962,"mtime":1767000516561,"results":"1094","hashOfConfig":"674"},{"size":2290,"mtime":1767000516692,"results":"1095","hashOfConfig":"674"},{"size":915,"mtime":1767000516557,"results":"1096","hashOfConfig":"674"},{"size":1823,"mtime":1767000516659,"results":"1097","hashOfConfig":"674"},{"size":2395,"mtime":1767000516655,"results":"1098","hashOfConfig":"674"},{"size":3508,"mtime":1767000516662,"results":"1099","hashOfConfig":"674"},{"size":590,"mtime":1767000516713,"results":"1100","hashOfConfig":"674"},{"size":15523,"mtime":1767000516755,"results":"1101","hashOfConfig":"674"},{"size":1629,"mtime":1767000516586,"results":"1102","hashOfConfig":"674"},{"size":3780,"mtime":1767000516688,"results":"1103","hashOfConfig":"674"},{"size":2217,"mtime":1767000516695,"results":"1104","hashOfConfig":"674"},{"size":23062,"mtime":1767000516711,"results":"1105","hashOfConfig":"674"},{"size":3981,"mtime":1767000516583,"results":"1106","hashOfConfig":"674"},{"size":2043,"mtime":1767000516596,"results":"1107","hashOfConfig":"674"},{"size":9930,"mtime":1767000516597,"results":"1108","hashOfConfig":"674"},{"size":2112,"mtime":1767000516730,"results":"1109","hashOfConfig":"674"},{"size":7365,"mtime":1767000516854,"results":"1110","hashOfConfig":"674"},{"size":3490,"mtime":1767000516687,"results":"1111","hashOfConfig":"674"},{"size":1256,"mtime":1767000516687,"results":"1112","hashOfConfig":"674"},{"size":3502,"mtime":1767000516656,"results":"1113","hashOfConfig":"674"},{"size":1463,"mtime":1767000516701,"results":"1114","hashOfConfig":"674"},{"size":1385,"mtime":1767000516689,"results":"1115","hashOfConfig":"674"},{"size":425,"mtime":1767000516723,"results":"1116","hashOfConfig":"674"},{"size":1409,"mtime":1767000516646,"results":"1117","hashOfConfig":"674"},{"size":1403,"mtime":1767000516654,"results":"1118","hashOfConfig":"674"},{"size":1515,"mtime":1767000516556,"results":"1119","hashOfConfig":"674"},{"size":16818,"mtime":1767000516699,"results":"1120","hashOfConfig":"674"},{"size":5496,"mtime":1767000516516,"results":"1121","hashOfConfig":"674"},{"size":12487,"mtime":1767000516767,"results":"1122","hashOfConfig":"674"},{"size":3036,"mtime":1767000516767,"results":"1123","hashOfConfig":"674"},{"size":2897,"mtime":1767000516751,"results":"1124","hashOfConfig":"674"},{"size":3321,"mtime":1767000516750,"results":"1125","hashOfConfig":"674"},{"size":397,"mtime":1767000516749,"results":"1126","hashOfConfig":"674"},{"size":1386,"mtime":1767000516798,"results":"1127","hashOfConfig":"674"},{"size":1233,"mtime":1767000516750,"results":"1128","hashOfConfig":"674"},{"size":1853,"mtime":1767000516751,"results":"1129","hashOfConfig":"674"},{"size":1052,"mtime":1767000516733,"results":"1130","hashOfConfig":"674"},{"size":1412,"mtime":1767000516798,"results":"1131","hashOfConfig":"674"},{"size":3700,"mtime":1767000516568,"results":"1132","hashOfConfig":"674"},{"size":2383,"mtime":1767000516797,"results":"1133","hashOfConfig":"674"},{"size":6251,"mtime":1767000516856,"results":"1134","hashOfConfig":"674"},{"size":1571,"mtime":1767000516784,"results":"1135","hashOfConfig":"674"},{"size":734,"mtime":1767000516865,"results":"1136","hashOfConfig":"674"},{"size":1141,"mtime":1767000516797,"results":"1137","hashOfConfig":"674"},{"size":1734,"mtime":1767000516672,"results":"1138","hashOfConfig":"674"},{"size":2662,"mtime":1767000516700,"results":"1139","hashOfConfig":"674"},{"size":1648,"mtime":1767000516785,"results":"1140","hashOfConfig":"674"},{"size":1571,"mtime":1767000516842,"results":"1141","hashOfConfig":"674"},{"size":2392,"mtime":1767000516783,"results":"1142","hashOfConfig":"674"},{"size":991,"mtime":1767000516788,"results":"1143","hashOfConfig":"674"},{"size":5181,"mtime":1767000516800,"results":"1144","hashOfConfig":"674"},{"size":247,"mtime":1767000516703,"results":"1145","hashOfConfig":"674"},{"size":3354,"mtime":1767000516796,"results":"1146","hashOfConfig":"674"},{"size":557,"mtime":1767000516801,"results":"1147","hashOfConfig":"674"},{"size":1639,"mtime":1767000516842,"results":"1148","hashOfConfig":"674"},{"size":2392,"mtime":1767000516841,"results":"1149","hashOfConfig":"674"},{"size":5049,"mtime":1767000516673,"results":"1150","hashOfConfig":"674"},{"size":2054,"mtime":1767000516674,"results":"1151","hashOfConfig":"674"},{"size":2775,"mtime":1767000516676,"results":"1152","hashOfConfig":"674"},{"size":3071,"mtime":1767000516668,"results":"1153","hashOfConfig":"674"},{"size":1781,"mtime":1767000516674,"results":"1154","hashOfConfig":"674"},{"size":3380,"mtime":1767000516677,"results":"1155","hashOfConfig":"674"},{"size":2368,"mtime":1767000516676,"results":"1156","hashOfConfig":"674"},{"size":2535,"mtime":1767000516669,"results":"1157","hashOfConfig":"674"},{"size":3129,"mtime":1767000516817,"results":"1158","hashOfConfig":"674"},{"size":1096,"mtime":1767000516719,"results":"1159","hashOfConfig":"674"},{"size":4779,"mtime":1767000516808,"results":"1160","hashOfConfig":"674"},{"size":3051,"mtime":1767000516808,"results":"1161","hashOfConfig":"674"},{"size":4791,"mtime":1767000516817,"results":"1162","hashOfConfig":"674"},{"size":1679,"mtime":1767000516807,"results":"1163","hashOfConfig":"674"},{"size":1696,"mtime":1767000516816,"results":"1164","hashOfConfig":"674"},{"size":2034,"mtime":1767000516691,"results":"1165","hashOfConfig":"674"},{"size":991,"mtime":1767000516845,"results":"1166","hashOfConfig":"674"},{"size":13762,"mtime":1767000516871,"results":"1167","hashOfConfig":"674"},{"size":920,"mtime":1767000516707,"results":"1168","hashOfConfig":"674"},{"size":5968,"mtime":1767000516706,"results":"1169","hashOfConfig":"674"},{"size":5726,"mtime":1767000516833,"results":"1170","hashOfConfig":"674"},{"size":11631,"mtime":1767000516555,"results":"1171","hashOfConfig":"674"},{"size":6544,"mtime":1767000516621,"results":"1172","hashOfConfig":"674"},{"size":481,"mtime":1767000516622,"results":"1173","hashOfConfig":"674"},{"size":1711,"mtime":1767000516625,"results":"1174","hashOfConfig":"674"},{"size":13168,"mtime":1767000516692,"results":"1175","hashOfConfig":"674"},{"size":1846,"mtime":1767000516685,"results":"1176","hashOfConfig":"674"},{"size":7694,"mtime":1767000516690,"results":"1177","hashOfConfig":"674"},{"size":11782,"mtime":1767000516631,"results":"1178","hashOfConfig":"674"},{"size":4757,"mtime":1767000516632,"results":"1179","hashOfConfig":"674"},{"size":1716,"mtime":1767000516615,"results":"1180","hashOfConfig":"674"},{"size":1317,"mtime":1767000516615,"results":"1181","hashOfConfig":"674"},{"size":4745,"mtime":1767000516636,"results":"1182","hashOfConfig":"674"},{"size":2248,"mtime":1767000516686,"results":"1183","hashOfConfig":"674"},{"size":9792,"mtime":1767000516629,"results":"1184","hashOfConfig":"674"},{"size":372,"mtime":1767000516624,"results":"1185","hashOfConfig":"674"},{"size":3583,"mtime":1767000516704,"results":"1186","hashOfConfig":"674"},{"size":3211,"mtime":1767000516584,"results":"1187","hashOfConfig":"674"},{"size":8037,"mtime":1767000516769,"results":"1188","hashOfConfig":"674"},{"size":5968,"mtime":1767000516744,"results":"1189","hashOfConfig":"674"},{"size":902,"mtime":1767000516744,"results":"1190","hashOfConfig":"674"},{"size":15902,"mtime":1767000516685,"results":"1191","hashOfConfig":"674"},{"size":9821,"mtime":1767000516714,"results":"1192","hashOfConfig":"674"},{"size":1430,"mtime":1767000516570,"results":"1193","hashOfConfig":"674"},{"size":229,"mtime":1767000516562,"results":"1194","hashOfConfig":"674"},{"size":18267,"mtime":1767000516758,"results":"1195","hashOfConfig":"674"},{"size":4720,"mtime":1767000516718,"results":"1196","hashOfConfig":"674"},{"size":9423,"mtime":1767000516721,"results":"1197","hashOfConfig":"674"},{"size":27736,"mtime":1767000516709,"results":"1198","hashOfConfig":"674"},{"size":2722,"mtime":1767000516714,"results":"1199","hashOfConfig":"674"},{"size":704,"mtime":1767000516733,"results":"1200","hashOfConfig":"674"},{"size":6922,"mtime":1767000516713,"results":"1201","hashOfConfig":"674"},{"size":4461,"mtime":1767000516708,"results":"1202","hashOfConfig":"674"},{"size":1847,"mtime":1767000516586,"results":"1203","hashOfConfig":"674"},{"size":3540,"mtime":1767000516763,"results":"1204","hashOfConfig":"674"},{"size":4132,"mtime":1767000516587,"results":"1205","hashOfConfig":"674"},{"size":16331,"mtime":1767000516586,"results":"1206","hashOfConfig":"674"},{"size":10497,"mtime":1767000516585,"results":"1207","hashOfConfig":"674"},{"size":5234,"mtime":1767000516582,"results":"1208","hashOfConfig":"674"},{"size":5350,"mtime":1767000516712,"results":"1209","hashOfConfig":"674"},{"size":4747,"mtime":1767000516602,"results":"1210","hashOfConfig":"674"},{"size":6610,"mtime":1767000516696,"results":"1211","hashOfConfig":"674"},{"size":1730,"mtime":1767000516643,"results":"1212","hashOfConfig":"674"},{"size":1573,"mtime":1767000516567,"results":"1213","hashOfConfig":"674"},{"size":3563,"mtime":1767000516726,"results":"1214","hashOfConfig":"674"},{"size":6541,"mtime":1767000516731,"results":"1215","hashOfConfig":"674"},{"size":8443,"mtime":1767000516725,"results":"1216","hashOfConfig":"674"},{"size":4395,"mtime":1767000516726,"results":"1217","hashOfConfig":"674"},{"size":2832,"mtime":1767000516590,"results":"1218","hashOfConfig":"674"},{"size":2450,"mtime":1767000516594,"results":"1219","hashOfConfig":"674"},{"size":123,"mtime":1767000516616,"results":"1220","hashOfConfig":"674"},{"size":1251,"mtime":1767000516798,"results":"1221","hashOfConfig":"674"},{"size":1560,"mtime":1767000516797,"results":"1222","hashOfConfig":"674"},{"size":2436,"mtime":1767000516569,"results":"1223","hashOfConfig":"674"},{"size":3699,"mtime":1767000516654,"results":"1224","hashOfConfig":"674"},{"size":1415,"mtime":1767000516557,"results":"1225","hashOfConfig":"674"},{"size":2576,"mtime":1767000516666,"results":"1226","hashOfConfig":"674"},{"size":3236,"mtime":1767000516801,"results":"1227","hashOfConfig":"674"},{"size":2749,"mtime":1767000516800,"results":"1228","hashOfConfig":"674"},{"size":3246,"mtime":1767000516702,"results":"1229","hashOfConfig":"674"},{"size":412,"mtime":1767000516702,"results":"1230","hashOfConfig":"674"},{"size":8985,"mtime":1767000516670,"results":"1231","hashOfConfig":"674"},{"size":8844,"mtime":1767000516678,"results":"1232","hashOfConfig":"674"},{"size":1184,"mtime":1767000516702,"results":"1233","hashOfConfig":"674"},{"size":285,"mtime":1767000516799,"results":"1234","hashOfConfig":"674"},{"size":1044,"mtime":1767000516689,"results":"1235","hashOfConfig":"674"},{"size":1423,"mtime":1767000516557,"results":"1236","hashOfConfig":"674"},{"size":3664,"mtime":1767000516558,"results":"1237","hashOfConfig":"674"},{"size":942,"mtime":1767000516624,"results":"1238","hashOfConfig":"674"},{"size":7159,"mtime":1767000516614,"results":"1239","hashOfConfig":"674"},{"size":761,"mtime":1767000516637,"results":"1240","hashOfConfig":"674"},{"size":1734,"mtime":1767000516614,"results":"1241","hashOfConfig":"674"},{"size":3609,"mtime":1767000516567,"results":"1242","hashOfConfig":"674"},{"size":1039,"mtime":1767000516636,"results":"1243","hashOfConfig":"674"},{"size":1983,"mtime":1767000516637,"results":"1244","hashOfConfig":"674"},{"size":4239,"mtime":1767000516585,"results":"1245","hashOfConfig":"674"},{"size":1989,"mtime":1767000516660,"results":"1246","hashOfConfig":"674"},{"size":10101,"mtime":1767000516715,"results":"1247","hashOfConfig":"674"},{"size":6279,"mtime":1767000516619,"results":"1248","hashOfConfig":"674"},{"size":975,"mtime":1767000516618,"results":"1249","hashOfConfig":"674"},{"size":4154,"mtime":1767000516731,"results":"1250","hashOfConfig":"674"},{"size":1110,"mtime":1767000516733,"results":"1251","hashOfConfig":"674"},{"size":1968,"mtime":1767000516570,"results":"1252","hashOfConfig":"674"},{"size":2810,"mtime":1767000516549,"results":"1253","hashOfConfig":"674"},{"size":4374,"mtime":1767000516643,"results":"1254","hashOfConfig":"674"},{"size":5372,"mtime":1767000516630,"results":"1255","hashOfConfig":"674"},{"size":3737,"mtime":1767000516690,"results":"1256","hashOfConfig":"674"},{"size":8292,"mtime":1767000516688,"results":"1257","hashOfConfig":"674"},{"size":3916,"mtime":1767000516684,"results":"1258","hashOfConfig":"674"},{"size":7689,"mtime":1767000516646,"results":"1259","hashOfConfig":"674"},{"size":3617,"mtime":1767000516646,"results":"1260","hashOfConfig":"674"},{"size":2060,"mtime":1767000516695,"results":"1261","hashOfConfig":"674"},{"size":9194,"mtime":1767000516759,"results":"1262","hashOfConfig":"674"},{"size":5694,"mtime":1767000516692,"results":"1263","hashOfConfig":"674"},{"size":3400,"mtime":1767000516872,"results":"1264","hashOfConfig":"674"},{"size":13310,"mtime":1767000516720,"results":"1265","hashOfConfig":"674"},{"size":5703,"mtime":1767000516721,"results":"1266","hashOfConfig":"674"},{"size":5270,"mtime":1767000516600,"results":"1267","hashOfConfig":"674"},{"size":11986,"mtime":1767000516722,"results":"1268","hashOfConfig":"674"},{"size":6528,"mtime":1767000516659,"results":"1269","hashOfConfig":"674"},{"size":2366,"mtime":1767000516763,"results":"1270","hashOfConfig":"674"},{"size":5336,"mtime":1767000516688,"results":"1271","hashOfConfig":"674"},{"size":6053,"mtime":1767000516633,"results":"1272","hashOfConfig":"674"},{"size":6402,"mtime":1767000516583,"results":"1273","hashOfConfig":"674"},{"size":4024,"mtime":1767000516694,"results":"1274","hashOfConfig":"674"},{"size":3033,"mtime":1767000516762,"results":"1275","hashOfConfig":"674"},{"size":5968,"mtime":1767000516712,"results":"1276","hashOfConfig":"674"},{"size":2990,"mtime":1767000516701,"results":"1277","hashOfConfig":"674"},{"size":920,"mtime":1767000516712,"results":"1278","hashOfConfig":"674"},{"size":704,"mtime":1767000516702,"results":"1279","hashOfConfig":"674"},{"size":3856,"mtime":1767000516699,"results":"1280","hashOfConfig":"674"},{"size":2792,"mtime":1767000516696,"results":"1281","hashOfConfig":"674"},{"size":5213,"mtime":1767000516591,"results":"1282","hashOfConfig":"674"},{"size":1027,"mtime":1767000516633,"results":"1283","hashOfConfig":"674"},{"size":2142,"mtime":1767000516725,"results":"1284","hashOfConfig":"674"},{"size":10976,"mtime":1767000516725,"results":"1285","hashOfConfig":"674"},{"size":2821,"mtime":1767000516578,"results":"1286","hashOfConfig":"674"},{"size":21085,"mtime":1767000516568,"results":"1287","hashOfConfig":"674"},{"size":4133,"mtime":1767000516593,"results":"1288","hashOfConfig":"674"},{"size":4407,"mtime":1767000516594,"results":"1289","hashOfConfig":"674"},{"size":24979,"mtime":1767000516577,"results":"1290","hashOfConfig":"674"},{"size":1301,"mtime":1767000516617,"results":"1291","hashOfConfig":"674"},{"size":1111,"mtime":1767000516613,"results":"1292","hashOfConfig":"674"},{"size":7684,"mtime":1767000516635,"results":"1293","hashOfConfig":"674"},{"size":3364,"mtime":1767000516584,"results":"1294","hashOfConfig":"674"},{"size":2038,"mtime":1767000516637,"results":"1295","hashOfConfig":"674"},{"size":1043,"mtime":1767000516618,"results":"1296","hashOfConfig":"674"},{"size":1368,"mtime":1767000516713,"results":"1297","hashOfConfig":"674"},{"size":435,"mtime":1767000516619,"results":"1298","hashOfConfig":"674"},{"size":2424,"mtime":1767000516716,"results":"1299","hashOfConfig":"674"},{"size":51,"mtime":1767000516549,"results":"1300","hashOfConfig":"674"},{"size":5699,"mtime":1767000516716,"results":"1301","hashOfConfig":"674"},{"size":1348,"mtime":1767000516549,"results":"1302","hashOfConfig":"674"},{"size":11431,"mtime":1767000516655,"results":"1303","hashOfConfig":"674"},{"size":2356,"mtime":1767000516719,"results":"1304","hashOfConfig":"674"},{"size":11109,"mtime":1767000516686,"results":"1305","hashOfConfig":"674"},{"size":11245,"mtime":1767000516868,"results":"1306","hashOfConfig":"674"},{"size":3931,"mtime":1767000516722,"results":"1307","hashOfConfig":"674"},{"size":4270,"mtime":1767000516645,"results":"1308","hashOfConfig":"674"},{"size":2356,"mtime":1767000516871,"results":"1309","hashOfConfig":"674"},{"size":4263,"mtime":1767000516687,"results":"1310","hashOfConfig":"674"},{"size":6357,"mtime":1767000516644,"results":"1311","hashOfConfig":"674"},{"size":6367,"mtime":1767000516644,"results":"1312","hashOfConfig":"674"},{"size":9005,"mtime":1767000516569,"results":"1313","hashOfConfig":"674"},{"size":4539,"mtime":1767000516645,"results":"1314","hashOfConfig":"674"},{"size":4104,"mtime":1767000516693,"results":"1315","hashOfConfig":"674"},{"size":2064,"mtime":1767000516665,"results":"1316","hashOfConfig":"674"},{"size":33222,"mtime":1767000516578,"results":"1317","hashOfConfig":"674"},{"size":4902,"mtime":1767000516697,"results":"1318","hashOfConfig":"674"},{"size":2229,"mtime":1767000516710,"results":"1319","hashOfConfig":"674"},{"size":11599,"mtime":1767000516872,"results":"1320","hashOfConfig":"674"},{"size":7218,"mtime":1767000516648,"results":"1321","hashOfConfig":"674"},{"size":4026,"mtime":1767000516613,"results":"1322","hashOfConfig":"674"},{"size":2322,"mtime":1767000516715,"results":"1323","hashOfConfig":"674"},{"size":843,"mtime":1767000516579,"results":"1324","hashOfConfig":"674"},{"size":1745,"mtime":1767000516696,"results":"1325","hashOfConfig":"674"},{"size":1624,"mtime":1767000516698,"results":"1326","hashOfConfig":"674"},{"size":4287,"mtime":1767000516697,"results":"1327","hashOfConfig":"674"},{"size":12943,"mtime":1767000516871,"results":"1328","hashOfConfig":"674"},{"size":8150,"mtime":1767000516872,"results":"1329","hashOfConfig":"674"},{"size":897,"mtime":1767000516648,"results":"1330","hashOfConfig":"674"},{"size":1110,"mtime":1767000516716,"results":"1331","hashOfConfig":"674"},{"size":2852,"mtime":1767000516697,"results":"1332","hashOfConfig":"674"},{"size":3170,"mtime":1767000516642,"results":"1333","hashOfConfig":"674"},{"size":1980,"mtime":1767000516698,"results":"1334","hashOfConfig":"674"},{"size":2247,"mtime":1767000516641,"results":"1335","hashOfConfig":"674"},{"size":434,"mtime":1767000516649,"results":"1336","hashOfConfig":"674"},{"size":775,"mtime":1767000516652,"results":"1337","hashOfConfig":"674"},{"size":2082,"mtime":1767000516652,"results":"1338","hashOfConfig":"674"},{"size":808,"mtime":1767000516653,"results":"1339","hashOfConfig":"674"},{"size":2547,"mtime":1767000516650,"results":"1340","hashOfConfig":"674"},{"size":612,"mtime":1767000516653,"results":"1341","hashOfConfig":"674"},{"size":573,"mtime":1767000516653,"results":"1342","hashOfConfig":"674"},{"size":2553,"mtime":1767000516651,"results":"1343","hashOfConfig":"674"},{"size":4813,"mtime":1767000516651,"results":"1344","hashOfConfig":"674"},{"size":2652,"mtime":1767000516650,"results":"1345","hashOfConfig":"674"},{"filePath":"1346","messages":"1347","suppressedMessages":"1348","errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1349"},"b3ivw4",{"filePath":"1350","messages":"1351","suppressedMessages":"1352","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1353"},{"filePath":"1354","messages":"1355","suppressedMessages":"1356","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1357","messages":"1358","suppressedMessages":"1359","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1360","messages":"1361","suppressedMessages":"1362","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1363","messages":"1364","suppressedMessages":"1365","errorCount":0,"fatalErrorCount":0,"warningCount":24,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1366"},{"filePath":"1367","messages":"1368","suppressedMessages":"1369","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1370","messages":"1371","suppressedMessages":"1372","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1373"},{"filePath":"1374","messages":"1375","suppressedMessages":"1376","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1377"},{"filePath":"1378","messages":"1379","suppressedMessages":"1380","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1381"},{"filePath":"1382","messages":"1383","suppressedMessages":"1384","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1385"},{"filePath":"1386","messages":"1387","suppressedMessages":"1388","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1389","messages":"1390","suppressedMessages":"1391","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1392","messages":"1393","suppressedMessages":"1394","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1395","messages":"1396","suppressedMessages":"1397","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1398"},{"filePath":"1399","messages":"1400","suppressedMessages":"1401","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1402","messages":"1403","suppressedMessages":"1404","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1405","messages":"1406","suppressedMessages":"1407","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1408"},{"filePath":"1409","messages":"1410","suppressedMessages":"1411","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1412","messages":"1413","suppressedMessages":"1414","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1415","messages":"1416","suppressedMessages":"1417","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1418"},{"filePath":"1419","messages":"1420","suppressedMessages":"1421","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1422","messages":"1423","suppressedMessages":"1424","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1425"},{"filePath":"1426","messages":"1427","suppressedMessages":"1428","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1429","messages":"1430","suppressedMessages":"1431","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1432","messages":"1433","suppressedMessages":"1434","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1435","messages":"1436","suppressedMessages":"1437","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1438","messages":"1439","suppressedMessages":"1440","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1441","messages":"1442","suppressedMessages":"1443","errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1444"},{"filePath":"1445","messages":"1446","suppressedMessages":"1447","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1448"},{"filePath":"1449","messages":"1450","suppressedMessages":"1451","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1452","messages":"1453","suppressedMessages":"1454","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1455"},{"filePath":"1456","messages":"1457","suppressedMessages":"1458","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1459","messages":"1460","suppressedMessages":"1461","errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1462"},{"filePath":"1463","messages":"1464","suppressedMessages":"1465","errorCount":0,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1466"},{"filePath":"1467","messages":"1468","suppressedMessages":"1469","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1470","messages":"1471","suppressedMessages":"1472","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1473","messages":"1474","suppressedMessages":"1475","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1476","messages":"1477","suppressedMessages":"1478","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1479"},{"filePath":"1480","messages":"1481","suppressedMessages":"1482","errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1483"},{"filePath":"1484","messages":"1485","suppressedMessages":"1486","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1487"},{"filePath":"1488","messages":"1489","suppressedMessages":"1490","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1491"},{"filePath":"1492","messages":"1493","suppressedMessages":"1494","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1495","messages":"1496","suppressedMessages":"1497","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1498"},{"filePath":"1499","messages":"1500","suppressedMessages":"1501","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1502"},{"filePath":"1503","messages":"1504","suppressedMessages":"1505","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1506","messages":"1507","suppressedMessages":"1508","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1509"},{"filePath":"1510","messages":"1511","suppressedMessages":"1512","errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1513"},{"filePath":"1514","messages":"1515","suppressedMessages":"1516","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1517","messages":"1518","suppressedMessages":"1519","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1520","messages":"1521","suppressedMessages":"1522","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1523"},{"filePath":"1524","messages":"1525","suppressedMessages":"1526","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1527"},{"filePath":"1528","messages":"1529","suppressedMessages":"1530","errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1531"},{"filePath":"1532","messages":"1533","suppressedMessages":"1534","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1535"},{"filePath":"1536","messages":"1537","suppressedMessages":"1538","errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1539"},{"filePath":"1540","messages":"1541","suppressedMessages":"1542","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1543","messages":"1544","suppressedMessages":"1545","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1546","messages":"1547","suppressedMessages":"1548","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1549"},{"filePath":"1550","messages":"1551","suppressedMessages":"1552","errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1553"},{"filePath":"1554","messages":"1555","suppressedMessages":"1556","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1557","messages":"1558","suppressedMessages":"1559","errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1560"},{"filePath":"1561","messages":"1562","suppressedMessages":"1563","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1564","messages":"1565","suppressedMessages":"1566","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1567"},{"filePath":"1568","messages":"1569","suppressedMessages":"1570","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1571","messages":"1572","suppressedMessages":"1573","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1574"},{"filePath":"1575","messages":"1576","suppressedMessages":"1577","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1578"},{"filePath":"1579","messages":"1580","suppressedMessages":"1581","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1582"},{"filePath":"1583","messages":"1584","suppressedMessages":"1585","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1586","messages":"1587","suppressedMessages":"1588","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1589","messages":"1590","suppressedMessages":"1591","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1592","messages":"1593","suppressedMessages":"1594","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1595"},{"filePath":"1596","messages":"1597","suppressedMessages":"1598","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1599"},{"filePath":"1600","messages":"1601","suppressedMessages":"1602","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1603","messages":"1604","suppressedMessages":"1605","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1606","messages":"1607","suppressedMessages":"1608","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1609","messages":"1610","suppressedMessages":"1611","errorCount":0,"fatalErrorCount":0,"warningCount":76,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1612"},{"filePath":"1613","messages":"1614","suppressedMessages":"1615","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1616"},{"filePath":"1617","messages":"1618","suppressedMessages":"1619","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1620"},{"filePath":"1621","messages":"1622","suppressedMessages":"1623","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1624"},{"filePath":"1625","messages":"1626","suppressedMessages":"1627","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1628","messages":"1629","suppressedMessages":"1630","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1631"},{"filePath":"1632","messages":"1633","suppressedMessages":"1634","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1635","messages":"1636","suppressedMessages":"1637","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1638","messages":"1639","suppressedMessages":"1640","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1641"},{"filePath":"1642","messages":"1643","suppressedMessages":"1644","errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1645"},{"filePath":"1646","messages":"1647","suppressedMessages":"1648","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1649","messages":"1650","suppressedMessages":"1651","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1652","messages":"1653","suppressedMessages":"1654","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1655"},{"filePath":"1656","messages":"1657","suppressedMessages":"1658","errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1659"},{"filePath":"1660","messages":"1661","suppressedMessages":"1662","errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1663"},{"filePath":"1664","messages":"1665","suppressedMessages":"1666","errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1667"},{"filePath":"1668","messages":"1669","suppressedMessages":"1670","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1671"},{"filePath":"1672","messages":"1673","suppressedMessages":"1674","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1675"},{"filePath":"1676","messages":"1677","suppressedMessages":"1678","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1679"},{"filePath":"1680","messages":"1681","suppressedMessages":"1682","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1683"},{"filePath":"1684","messages":"1685","suppressedMessages":"1686","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1687"},{"filePath":"1688","messages":"1689","suppressedMessages":"1690","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1691"},{"filePath":"1692","messages":"1693","suppressedMessages":"1694","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1695"},{"filePath":"1696","messages":"1697","suppressedMessages":"1698","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1699"},{"filePath":"1700","messages":"1701","suppressedMessages":"1702","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1703"},{"filePath":"1704","messages":"1705","suppressedMessages":"1706","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1707"},{"filePath":"1708","messages":"1709","suppressedMessages":"1710","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1711"},{"filePath":"1712","messages":"1713","suppressedMessages":"1714","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1715"},{"filePath":"1716","messages":"1717","suppressedMessages":"1718","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1719","messages":"1720","suppressedMessages":"1721","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1722"},{"filePath":"1723","messages":"1724","suppressedMessages":"1725","errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1726"},{"filePath":"1727","messages":"1728","suppressedMessages":"1729","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1730","messages":"1731","suppressedMessages":"1732","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1733"},{"filePath":"1734","messages":"1735","suppressedMessages":"1736","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1737"},{"filePath":"1738","messages":"1739","suppressedMessages":"1740","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1741"},{"filePath":"1742","messages":"1743","suppressedMessages":"1744","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1745","messages":"1746","suppressedMessages":"1747","errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1748"},{"filePath":"1749","messages":"1750","suppressedMessages":"1751","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1752"},{"filePath":"1753","messages":"1754","suppressedMessages":"1755","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1756"},{"filePath":"1757","messages":"1758","suppressedMessages":"1759","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1760"},{"filePath":"1761","messages":"1762","suppressedMessages":"1763","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1764","messages":"1765","suppressedMessages":"1766","errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1767"},{"filePath":"1768","messages":"1769","suppressedMessages":"1770","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1771","messages":"1772","suppressedMessages":"1773","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1774"},{"filePath":"1775","messages":"1776","suppressedMessages":"1777","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1778"},{"filePath":"1779","messages":"1780","suppressedMessages":"1781","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1782","messages":"1783","suppressedMessages":"1784","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1785"},{"filePath":"1786","messages":"1787","suppressedMessages":"1788","errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1789"},{"filePath":"1790","messages":"1791","suppressedMessages":"1792","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1793"},{"filePath":"1794","messages":"1795","suppressedMessages":"1796","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1797"},{"filePath":"1798","messages":"1799","suppressedMessages":"1800","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1801"},{"filePath":"1802","messages":"1803","suppressedMessages":"1804","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1805","messages":"1806","suppressedMessages":"1807","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1808","messages":"1809","suppressedMessages":"1810","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1811"},{"filePath":"1812","messages":"1813","suppressedMessages":"1814","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1815"},{"filePath":"1816","messages":"1817","suppressedMessages":"1818","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1819","messages":"1820","suppressedMessages":"1821","errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1822"},{"filePath":"1823","messages":"1824","suppressedMessages":"1825","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1826"},{"filePath":"1827","messages":"1828","suppressedMessages":"1829","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1830"},{"filePath":"1831","messages":"1832","suppressedMessages":"1833","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1834"},{"filePath":"1835","messages":"1836","suppressedMessages":"1837","errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1838"},{"filePath":"1839","messages":"1840","suppressedMessages":"1841","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1842"},{"filePath":"1843","messages":"1844","suppressedMessages":"1845","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1846","messages":"1847","suppressedMessages":"1848","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1849"},{"filePath":"1850","messages":"1851","suppressedMessages":"1852","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1853"},{"filePath":"1854","messages":"1855","suppressedMessages":"1856","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1857","messages":"1858","suppressedMessages":"1859","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1860"},{"filePath":"1861","messages":"1862","suppressedMessages":"1863","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1864"},{"filePath":"1865","messages":"1866","suppressedMessages":"1867","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1868","messages":"1869","suppressedMessages":"1870","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1871","messages":"1872","suppressedMessages":"1873","errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1874"},{"filePath":"1875","messages":"1876","suppressedMessages":"1877","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1878","messages":"1879","suppressedMessages":"1880","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1881"},{"filePath":"1882","messages":"1883","suppressedMessages":"1884","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1885","messages":"1886","suppressedMessages":"1887","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1888","messages":"1889","suppressedMessages":"1890","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1891","messages":"1892","suppressedMessages":"1893","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1894","messages":"1895","suppressedMessages":"1896","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1897","messages":"1898","suppressedMessages":"1899","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1900","messages":"1901","suppressedMessages":"1902","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1903","messages":"1904","suppressedMessages":"1905","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1906"},{"filePath":"1907","messages":"1908","suppressedMessages":"1909","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1910","messages":"1911","suppressedMessages":"1912","errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1913"},{"filePath":"1914","messages":"1915","suppressedMessages":"1916","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1917"},{"filePath":"1918","messages":"1919","suppressedMessages":"1920","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1921"},{"filePath":"1922","messages":"1923","suppressedMessages":"1924","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1925","messages":"1926","suppressedMessages":"1927","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1928","messages":"1929","suppressedMessages":"1930","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1931","messages":"1932","suppressedMessages":"1933","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1934","messages":"1935","suppressedMessages":"1936","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1937"},{"filePath":"1938","messages":"1939","suppressedMessages":"1940","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1941","messages":"1942","suppressedMessages":"1943","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1944","messages":"1945","suppressedMessages":"1946","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1947","messages":"1948","suppressedMessages":"1949","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1950"},{"filePath":"1951","messages":"1952","suppressedMessages":"1953","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1954","messages":"1955","suppressedMessages":"1956","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1957"},{"filePath":"1958","messages":"1959","suppressedMessages":"1960","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1961","messages":"1962","suppressedMessages":"1963","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1964","messages":"1965","suppressedMessages":"1966","errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1967"},{"filePath":"1968","messages":"1969","suppressedMessages":"1970","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1971"},{"filePath":"1972","messages":"1973","suppressedMessages":"1974","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1975"},{"filePath":"1976","messages":"1977","suppressedMessages":"1978","errorCount":0,"fatalErrorCount":0,"warningCount":17,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1979"},{"filePath":"1980","messages":"1981","suppressedMessages":"1982","errorCount":0,"fatalErrorCount":0,"warningCount":18,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1983"},{"filePath":"1984","messages":"1985","suppressedMessages":"1986","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1987"},{"filePath":"1988","messages":"1989","suppressedMessages":"1990","errorCount":0,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1991"},{"filePath":"1992","messages":"1993","suppressedMessages":"1994","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"1995","messages":"1996","suppressedMessages":"1997","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"1998"},{"filePath":"1999","messages":"2000","suppressedMessages":"2001","errorCount":0,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2002"},{"filePath":"2003","messages":"2004","suppressedMessages":"2005","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2006","messages":"2007","suppressedMessages":"2008","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2009"},{"filePath":"2010","messages":"2011","suppressedMessages":"2012","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2013","messages":"2014","suppressedMessages":"2015","errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2016"},{"filePath":"2017","messages":"2018","suppressedMessages":"2019","errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2020"},{"filePath":"2021","messages":"2022","suppressedMessages":"2023","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2024"},{"filePath":"2025","messages":"2026","suppressedMessages":"2027","errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2028"},{"filePath":"2029","messages":"2030","suppressedMessages":"2031","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2032","messages":"2033","suppressedMessages":"2034","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2035"},{"filePath":"2036","messages":"2037","suppressedMessages":"2038","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2039","messages":"2040","suppressedMessages":"2041","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2042"},{"filePath":"2043","messages":"2044","suppressedMessages":"2045","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2046"},{"filePath":"2047","messages":"2048","suppressedMessages":"2049","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2050","messages":"2051","suppressedMessages":"2052","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2053"},{"filePath":"2054","messages":"2055","suppressedMessages":"2056","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2057","messages":"2058","suppressedMessages":"2059","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2060","messages":"2061","suppressedMessages":"2062","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2063","messages":"2064","suppressedMessages":"2065","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2066","messages":"2067","suppressedMessages":"2068","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2069"},{"filePath":"2070","messages":"2071","suppressedMessages":"2072","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2073"},{"filePath":"2074","messages":"2075","suppressedMessages":"2076","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2077"},{"filePath":"2078","messages":"2079","suppressedMessages":"2080","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2081","messages":"2082","suppressedMessages":"2083","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2084"},{"filePath":"2085","messages":"2086","suppressedMessages":"2087","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2088"},{"filePath":"2089","messages":"2090","suppressedMessages":"2091","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2092","messages":"2093","suppressedMessages":"2094","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2095","messages":"2096","suppressedMessages":"2097","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2098","messages":"2099","suppressedMessages":"2100","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2101"},{"filePath":"2102","messages":"2103","suppressedMessages":"2104","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2105"},{"filePath":"2106","messages":"2107","suppressedMessages":"2108","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2109"},{"filePath":"2110","messages":"2111","suppressedMessages":"2112","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2113","messages":"2114","suppressedMessages":"2115","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2116","messages":"2117","suppressedMessages":"2118","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2119","messages":"2120","suppressedMessages":"2121","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2122","messages":"2123","suppressedMessages":"2124","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2125","messages":"2126","suppressedMessages":"2127","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2128"},{"filePath":"2129","messages":"2130","suppressedMessages":"2131","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2132"},{"filePath":"2133","messages":"2134","suppressedMessages":"2135","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2136","messages":"2137","suppressedMessages":"2138","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2139"},{"filePath":"2140","messages":"2141","suppressedMessages":"2142","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2143","messages":"2144","suppressedMessages":"2145","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2146","messages":"2147","suppressedMessages":"2148","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2149","messages":"2150","suppressedMessages":"2151","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2152","messages":"2153","suppressedMessages":"2154","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2155","messages":"2156","suppressedMessages":"2157","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2158"},{"filePath":"2159","messages":"2160","suppressedMessages":"2161","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2162","messages":"2163","suppressedMessages":"2164","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2165","messages":"2166","suppressedMessages":"2167","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2168","messages":"2169","suppressedMessages":"2170","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2171","messages":"2172","suppressedMessages":"2173","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2174","messages":"2175","suppressedMessages":"2176","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2177"},{"filePath":"2178","messages":"2179","suppressedMessages":"2180","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2181","messages":"2182","suppressedMessages":"2183","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2184","messages":"2185","suppressedMessages":"2186","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2187","messages":"2188","suppressedMessages":"2189","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2190","messages":"2191","suppressedMessages":"2192","errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2193"},{"filePath":"2194","messages":"2195","suppressedMessages":"2196","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2197","messages":"2198","suppressedMessages":"2199","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2200","messages":"2201","suppressedMessages":"2202","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2203"},{"filePath":"2204","messages":"2205","suppressedMessages":"2206","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2207","messages":"2208","suppressedMessages":"2209","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2210"},{"filePath":"2211","messages":"2212","suppressedMessages":"2213","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2214"},{"filePath":"2215","messages":"2216","suppressedMessages":"2217","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2218","messages":"2219","suppressedMessages":"2220","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2221"},{"filePath":"2222","messages":"2223","suppressedMessages":"2224","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2225","messages":"2226","suppressedMessages":"2227","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2228","messages":"2229","suppressedMessages":"2230","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2231","messages":"2232","suppressedMessages":"2233","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2234","messages":"2235","suppressedMessages":"2236","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2237","messages":"2238","suppressedMessages":"2239","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2240"},{"filePath":"2241","messages":"2242","suppressedMessages":"2243","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2244"},{"filePath":"2245","messages":"2246","suppressedMessages":"2247","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2248","messages":"2249","suppressedMessages":"2250","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2251","messages":"2252","suppressedMessages":"2253","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2254","messages":"2255","suppressedMessages":"2256","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2257","messages":"2258","suppressedMessages":"2259","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2260"},{"filePath":"2261","messages":"2262","suppressedMessages":"2263","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2264"},{"filePath":"2265","messages":"2266","suppressedMessages":"2267","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2268","messages":"2269","suppressedMessages":"2270","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2271","messages":"2272","suppressedMessages":"2273","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2274","messages":"2275","suppressedMessages":"2276","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2277","messages":"2278","suppressedMessages":"2279","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2280","messages":"2281","suppressedMessages":"2282","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2283"},{"filePath":"2284","messages":"2285","suppressedMessages":"2286","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2287"},{"filePath":"2288","messages":"2289","suppressedMessages":"2290","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2291"},{"filePath":"2292","messages":"2293","suppressedMessages":"2294","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2295"},{"filePath":"2296","messages":"2297","suppressedMessages":"2298","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2299","messages":"2300","suppressedMessages":"2301","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2302"},{"filePath":"2303","messages":"2304","suppressedMessages":"2305","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2306","messages":"2307","suppressedMessages":"2308","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2309","messages":"2310","suppressedMessages":"2311","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2312"},{"filePath":"2313","messages":"2314","suppressedMessages":"2315","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2316","messages":"2317","suppressedMessages":"2318","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2319"},{"filePath":"2320","messages":"2321","suppressedMessages":"2322","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2323"},{"filePath":"2324","messages":"2325","suppressedMessages":"2326","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2327"},{"filePath":"2328","messages":"2329","suppressedMessages":"2330","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2331"},{"filePath":"2332","messages":"2333","suppressedMessages":"2334","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2335","messages":"2336","suppressedMessages":"2337","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2338","messages":"2339","suppressedMessages":"2340","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2341","messages":"2342","suppressedMessages":"2343","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2344","messages":"2345","suppressedMessages":"2346","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2347","messages":"2348","suppressedMessages":"2349","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2350","messages":"2351","suppressedMessages":"2352","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2353"},{"filePath":"2354","messages":"2355","suppressedMessages":"2356","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2357","messages":"2358","suppressedMessages":"2359","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2302"},{"filePath":"2360","messages":"2361","suppressedMessages":"2362","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2363"},{"filePath":"2364","messages":"2365","suppressedMessages":"2366","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2295"},{"filePath":"2367","messages":"2368","suppressedMessages":"2369","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2370","messages":"2371","suppressedMessages":"2372","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2373"},{"filePath":"2374","messages":"2375","suppressedMessages":"2376","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2377","messages":"2378","suppressedMessages":"2379","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2380"},{"filePath":"2381","messages":"2382","suppressedMessages":"2383","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2384"},{"filePath":"2385","messages":"2386","suppressedMessages":"2387","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2388","messages":"2389","suppressedMessages":"2390","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2391"},{"filePath":"2392","messages":"2393","suppressedMessages":"2394","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2395"},{"filePath":"2396","messages":"2397","suppressedMessages":"2398","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2399"},{"filePath":"2400","messages":"2401","suppressedMessages":"2402","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2403"},{"filePath":"2404","messages":"2405","suppressedMessages":"2406","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2407","messages":"2408","suppressedMessages":"2409","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2410"},{"filePath":"2411","messages":"2412","suppressedMessages":"2413","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2414","messages":"2415","suppressedMessages":"2416","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2417","messages":"2418","suppressedMessages":"2419","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2420"},{"filePath":"2421","messages":"2422","suppressedMessages":"2423","errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2424"},{"filePath":"2425","messages":"2426","suppressedMessages":"2427","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2428"},{"filePath":"2429","messages":"2430","suppressedMessages":"2431","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2432"},{"filePath":"2433","messages":"2434","suppressedMessages":"2435","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2436","messages":"2437","suppressedMessages":"2438","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2439"},{"filePath":"2440","messages":"2441","suppressedMessages":"2442","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2443"},{"filePath":"2444","messages":"2445","suppressedMessages":"2446","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2447"},{"filePath":"2448","messages":"2449","suppressedMessages":"2450","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2451"},{"filePath":"2452","messages":"2453","suppressedMessages":"2454","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2455"},{"filePath":"2456","messages":"2457","suppressedMessages":"2458","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2459","messages":"2460","suppressedMessages":"2461","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2462"},{"filePath":"2463","messages":"2464","suppressedMessages":"2465","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2466","messages":"2467","suppressedMessages":"2468","errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2469"},{"filePath":"2470","messages":"2471","suppressedMessages":"2472","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2473"},{"filePath":"2474","messages":"2475","suppressedMessages":"2476","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2477"},{"filePath":"2478","messages":"2479","suppressedMessages":"2480","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2481","messages":"2482","suppressedMessages":"2483","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2484","messages":"2485","suppressedMessages":"2486","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2487"},{"filePath":"2488","messages":"2489","suppressedMessages":"2490","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2491","messages":"2492","suppressedMessages":"2493","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2494"},{"filePath":"2495","messages":"2496","suppressedMessages":"2497","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2498","messages":"2499","suppressedMessages":"2500","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2501"},{"filePath":"2502","messages":"2503","suppressedMessages":"2504","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2505","messages":"2506","suppressedMessages":"2507","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2508","messages":"2509","suppressedMessages":"2510","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2511"},{"filePath":"2512","messages":"2513","suppressedMessages":"2514","errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2515"},{"filePath":"2516","messages":"2517","suppressedMessages":"2518","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2519"},{"filePath":"2520","messages":"2521","suppressedMessages":"2522","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2523","messages":"2524","suppressedMessages":"2525","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2526"},{"filePath":"2527","messages":"2528","suppressedMessages":"2529","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2530"},{"filePath":"2531","messages":"2532","suppressedMessages":"2533","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2534","messages":"2535","suppressedMessages":"2536","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2537"},{"filePath":"2538","messages":"2539","suppressedMessages":"2540","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2541"},{"filePath":"2542","messages":"2543","suppressedMessages":"2544","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2545"},{"filePath":"2546","messages":"2547","suppressedMessages":"2548","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2549","messages":"2550","suppressedMessages":"2551","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2552"},{"filePath":"2553","messages":"2554","suppressedMessages":"2555","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2556"},{"filePath":"2557","messages":"2558","suppressedMessages":"2559","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2560"},{"filePath":"2561","messages":"2562","suppressedMessages":"2563","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2564","messages":"2565","suppressedMessages":"2566","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2567"},{"filePath":"2568","messages":"2569","suppressedMessages":"2570","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2571","messages":"2572","suppressedMessages":"2573","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2574","messages":"2575","suppressedMessages":"2576","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2577","messages":"2578","suppressedMessages":"2579","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2295"},{"filePath":"2580","messages":"2581","suppressedMessages":"2582","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2583"},{"filePath":"2584","messages":"2585","suppressedMessages":"2586","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2587"},{"filePath":"2588","messages":"2589","suppressedMessages":"2590","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2591","messages":"2592","suppressedMessages":"2593","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2594"},{"filePath":"2595","messages":"2596","suppressedMessages":"2597","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2598","messages":"2599","suppressedMessages":"2600","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2601","messages":"2602","suppressedMessages":"2603","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2604","messages":"2605","suppressedMessages":"2606","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2607"},{"filePath":"2608","messages":"2609","suppressedMessages":"2610","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2611"},{"filePath":"2612","messages":"2613","suppressedMessages":"2614","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2615"},{"filePath":"2616","messages":"2617","suppressedMessages":"2618","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2619","messages":"2620","suppressedMessages":"2621","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2622","messages":"2623","suppressedMessages":"2624","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2625","messages":"2626","suppressedMessages":"2627","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2628","messages":"2629","suppressedMessages":"2630","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2631","messages":"2632","suppressedMessages":"2633","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2634","messages":"2635","suppressedMessages":"2636","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2637"},{"filePath":"2638","messages":"2639","suppressedMessages":"2640","errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2641"},{"filePath":"2642","messages":"2643","suppressedMessages":"2644","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2645","messages":"2646","suppressedMessages":"2647","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2648"},{"filePath":"2649","messages":"2650","suppressedMessages":"2651","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2652"},{"filePath":"2653","messages":"2654","suppressedMessages":"2655","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2656"},{"filePath":"2657","messages":"2658","suppressedMessages":"2659","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2660"},{"filePath":"2661","messages":"2662","suppressedMessages":"2663","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2664"},{"filePath":"2665","messages":"2666","suppressedMessages":"2667","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2668","messages":"2669","suppressedMessages":"2670","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2671","messages":"2672","suppressedMessages":"2673","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2674","messages":"2675","suppressedMessages":"2676","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2677"},{"filePath":"2678","messages":"2679","suppressedMessages":"2680","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2681","messages":"2682","suppressedMessages":"2683","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2684","messages":"2685","suppressedMessages":"2686","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2687"},{"filePath":"2688","messages":"2689","suppressedMessages":"2690","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2691","messages":"2692","suppressedMessages":"2693","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2694"},{"filePath":"2695","messages":"2696","suppressedMessages":"2697","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2698","messages":"2699","suppressedMessages":"2700","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2701","messages":"2702","suppressedMessages":"2703","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2704","messages":"2705","suppressedMessages":"2706","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2707"},{"filePath":"2708","messages":"2709","suppressedMessages":"2710","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2711"},{"filePath":"2712","messages":"2713","suppressedMessages":"2714","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2715","messages":"2716","suppressedMessages":"2717","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2718","messages":"2719","suppressedMessages":"2720","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2721"},{"filePath":"2722","messages":"2723","suppressedMessages":"2724","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2725","messages":"2726","suppressedMessages":"2727","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2728","messages":"2729","suppressedMessages":"2730","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2731","messages":"2732","suppressedMessages":"2733","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2734"},{"filePath":"2735","messages":"2736","suppressedMessages":"2737","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2738","messages":"2739","suppressedMessages":"2740","errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2741"},{"filePath":"2742","messages":"2743","suppressedMessages":"2744","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2745","messages":"2746","suppressedMessages":"2747","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2748","messages":"2749","suppressedMessages":"2750","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2751","messages":"2752","suppressedMessages":"2753","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2754","messages":"2755","suppressedMessages":"2756","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2757","messages":"2758","suppressedMessages":"2759","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2760","messages":"2761","suppressedMessages":"2762","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2763","messages":"2764","suppressedMessages":"2765","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2766","messages":"2767","suppressedMessages":"2768","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2769","messages":"2770","suppressedMessages":"2771","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2772","messages":"2773","suppressedMessages":"2774","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2775","messages":"2776","suppressedMessages":"2777","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2778"},{"filePath":"2779","messages":"2780","suppressedMessages":"2781","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2782"},{"filePath":"2783","messages":"2784","suppressedMessages":"2785","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2786"},{"filePath":"2787","messages":"2788","suppressedMessages":"2789","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2790","messages":"2791","suppressedMessages":"2792","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2793","messages":"2794","suppressedMessages":"2795","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2796","messages":"2797","suppressedMessages":"2798","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2799"},{"filePath":"2800","messages":"2801","suppressedMessages":"2802","errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2803"},{"filePath":"2804","messages":"2805","suppressedMessages":"2806","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2807"},{"filePath":"2808","messages":"2809","suppressedMessages":"2810","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2811"},{"filePath":"2812","messages":"2813","suppressedMessages":"2814","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2815"},{"filePath":"2816","messages":"2817","suppressedMessages":"2818","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2819","messages":"2820","suppressedMessages":"2821","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2822","messages":"2823","suppressedMessages":"2824","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2825","messages":"2826","suppressedMessages":"2827","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2828"},{"filePath":"2829","messages":"2830","suppressedMessages":"2831","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2832","messages":"2833","suppressedMessages":"2834","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2835","messages":"2836","suppressedMessages":"2837","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2838","messages":"2839","suppressedMessages":"2840","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2841"},{"filePath":"2842","messages":"2843","suppressedMessages":"2844","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2845","messages":"2846","suppressedMessages":"2847","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2848","messages":"2849","suppressedMessages":"2850","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2851"},{"filePath":"2852","messages":"2853","suppressedMessages":"2854","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2855"},{"filePath":"2856","messages":"2857","suppressedMessages":"2858","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2859","messages":"2860","suppressedMessages":"2861","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2862","messages":"2863","suppressedMessages":"2864","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2865","messages":"2866","suppressedMessages":"2867","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2868"},{"filePath":"2869","messages":"2870","suppressedMessages":"2871","errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2872"},{"filePath":"2873","messages":"2874","suppressedMessages":"2875","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2876","messages":"2877","suppressedMessages":"2878","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2879"},{"filePath":"2880","messages":"2881","suppressedMessages":"2882","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2883","messages":"2884","suppressedMessages":"2885","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2886","messages":"2887","suppressedMessages":"2888","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2889","messages":"2890","suppressedMessages":"2891","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2892","messages":"2893","suppressedMessages":"2894","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2895","messages":"2896","suppressedMessages":"2897","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2898","messages":"2899","suppressedMessages":"2900","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2901","messages":"2902","suppressedMessages":"2903","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2904","messages":"2905","suppressedMessages":"2906","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2907","messages":"2908","suppressedMessages":"2909","errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2910"},{"filePath":"2911","messages":"2912","suppressedMessages":"2913","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2914","messages":"2915","suppressedMessages":"2916","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2917"},{"filePath":"2918","messages":"2919","suppressedMessages":"2920","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2921"},{"filePath":"2922","messages":"2923","suppressedMessages":"2924","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2925","messages":"2926","suppressedMessages":"2927","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2928","messages":"2929","suppressedMessages":"2930","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2931","messages":"2932","suppressedMessages":"2933","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2934","messages":"2935","suppressedMessages":"2936","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2937","messages":"2938","suppressedMessages":"2939","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2940","messages":"2941","suppressedMessages":"2942","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2943","messages":"2944","suppressedMessages":"2945","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2946","messages":"2947","suppressedMessages":"2948","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2949","messages":"2950","suppressedMessages":"2951","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2952","messages":"2953","suppressedMessages":"2954","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2955","messages":"2956","suppressedMessages":"2957","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2958"},{"filePath":"2959","messages":"2960","suppressedMessages":"2961","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2962","messages":"2963","suppressedMessages":"2964","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2965"},{"filePath":"2966","messages":"2967","suppressedMessages":"2968","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2969","messages":"2970","suppressedMessages":"2971","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2972","messages":"2973","suppressedMessages":"2974","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2975"},{"filePath":"2976","messages":"2977","suppressedMessages":"2978","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2958"},{"filePath":"2979","messages":"2980","suppressedMessages":"2981","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2982"},{"filePath":"2983","messages":"2984","suppressedMessages":"2985","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2986"},{"filePath":"2987","messages":"2988","suppressedMessages":"2989","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2990","messages":"2991","suppressedMessages":"2992","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2993","messages":"2994","suppressedMessages":"2995","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2996","messages":"2997","suppressedMessages":"2998","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"2999","messages":"3000","suppressedMessages":"3001","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3002"},{"filePath":"3003","messages":"3004","suppressedMessages":"3005","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2982"},{"filePath":"3006","messages":"3007","suppressedMessages":"3008","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3009","messages":"3010","suppressedMessages":"3011","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3012","messages":"3013","suppressedMessages":"3014","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3015"},{"filePath":"3016","messages":"3017","suppressedMessages":"3018","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3019","messages":"3020","suppressedMessages":"3021","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3022"},{"filePath":"3023","messages":"3024","suppressedMessages":"3025","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3026","messages":"3027","suppressedMessages":"3028","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3029","messages":"3030","suppressedMessages":"3031","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3032","messages":"3033","suppressedMessages":"3034","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3035"},{"filePath":"3036","messages":"3037","suppressedMessages":"3038","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3039","messages":"3040","suppressedMessages":"3041","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3042","messages":"3043","suppressedMessages":"3044","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3045"},{"filePath":"3046","messages":"3047","suppressedMessages":"3048","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3049","messages":"3050","suppressedMessages":"3051","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3052"},{"filePath":"3053","messages":"3054","suppressedMessages":"3055","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3056"},{"filePath":"3057","messages":"3058","suppressedMessages":"3059","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3060","messages":"3061","suppressedMessages":"3062","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2986"},{"filePath":"3063","messages":"3064","suppressedMessages":"3065","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3066","messages":"3067","suppressedMessages":"3068","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3069","messages":"3070","suppressedMessages":"3071","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3072"},{"filePath":"3073","messages":"3074","suppressedMessages":"3075","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3076"},{"filePath":"3077","messages":"3078","suppressedMessages":"3079","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3080"},{"filePath":"3081","messages":"3082","suppressedMessages":"3083","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3084","messages":"3085","suppressedMessages":"3086","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3087"},{"filePath":"3088","messages":"3089","suppressedMessages":"3090","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3091","messages":"3092","suppressedMessages":"3093","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3094","messages":"3095","suppressedMessages":"3096","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3097","messages":"3098","suppressedMessages":"3099","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3100"},{"filePath":"3101","messages":"3102","suppressedMessages":"3103","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3104"},{"filePath":"3105","messages":"3106","suppressedMessages":"3107","errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3108"},{"filePath":"3109","messages":"3110","suppressedMessages":"3111","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3112","messages":"3113","suppressedMessages":"3114","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3115","messages":"3116","suppressedMessages":"3117","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3118","messages":"3119","suppressedMessages":"3120","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3121"},{"filePath":"3122","messages":"3123","suppressedMessages":"3124","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3125"},{"filePath":"3126","messages":"3127","suppressedMessages":"3128","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3129","messages":"3130","suppressedMessages":"3131","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3132","messages":"3133","suppressedMessages":"3134","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3135","messages":"3136","suppressedMessages":"3137","errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3138"},{"filePath":"3139","messages":"3140","suppressedMessages":"3141","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3072"},{"filePath":"3142","messages":"3143","suppressedMessages":"3144","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3145","messages":"3146","suppressedMessages":"3147","errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3148"},{"filePath":"3149","messages":"3150","suppressedMessages":"3151","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3152","messages":"3153","suppressedMessages":"3154","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3155","messages":"3156","suppressedMessages":"3157","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3158","messages":"3159","suppressedMessages":"3160","errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3161"},{"filePath":"3162","messages":"3163","suppressedMessages":"3164","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3165"},{"filePath":"3166","messages":"3167","suppressedMessages":"3168","errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3169"},{"filePath":"3170","messages":"3171","suppressedMessages":"3172","errorCount":0,"fatalErrorCount":0,"warningCount":19,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3173"},{"filePath":"3174","messages":"3175","suppressedMessages":"3176","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3177"},{"filePath":"3178","messages":"3179","suppressedMessages":"3180","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3181","messages":"3182","suppressedMessages":"3183","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3184"},{"filePath":"3185","messages":"3186","suppressedMessages":"3187","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3188"},{"filePath":"3189","messages":"3190","suppressedMessages":"3191","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3192","messages":"3193","suppressedMessages":"3194","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3195"},{"filePath":"3196","messages":"3197","suppressedMessages":"3198","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3199","messages":"3200","suppressedMessages":"3201","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3202"},{"filePath":"3203","messages":"3204","suppressedMessages":"3205","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3206"},{"filePath":"3207","messages":"3208","suppressedMessages":"3209","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3210","messages":"3211","suppressedMessages":"3212","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"2615"},{"filePath":"3213","messages":"3214","suppressedMessages":"3215","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3216"},{"filePath":"3217","messages":"3218","suppressedMessages":"3219","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3220"},{"filePath":"3221","messages":"3222","suppressedMessages":"3223","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3224","messages":"3225","suppressedMessages":"3226","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3227"},{"filePath":"3228","messages":"3229","suppressedMessages":"3230","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3231","messages":"3232","suppressedMessages":"3233","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3234"},{"filePath":"3235","messages":"3236","suppressedMessages":"3237","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3238"},{"filePath":"3239","messages":"3240","suppressedMessages":"3241","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3242","messages":"3243","suppressedMessages":"3244","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3245"},{"filePath":"3246","messages":"3247","suppressedMessages":"3248","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3249","messages":"3250","suppressedMessages":"3251","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3252","messages":"3253","suppressedMessages":"3254","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3255","messages":"3256","suppressedMessages":"3257","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3258","messages":"3259","suppressedMessages":"3260","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3261"},{"filePath":"3262","messages":"3263","suppressedMessages":"3264","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3265","messages":"3266","suppressedMessages":"3267","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3268","messages":"3269","suppressedMessages":"3270","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3271","messages":"3272","suppressedMessages":"3273","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3274"},{"filePath":"3275","messages":"3276","suppressedMessages":"3277","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3278","messages":"3279","suppressedMessages":"3280","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3281","messages":"3282","suppressedMessages":"3283","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3284","messages":"3285","suppressedMessages":"3286","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3287","messages":"3288","suppressedMessages":"3289","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3290","messages":"3291","suppressedMessages":"3292","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3293","messages":"3294","suppressedMessages":"3295","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3296","messages":"3297","suppressedMessages":"3298","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3299","messages":"3300","suppressedMessages":"3301","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3302","messages":"3303","suppressedMessages":"3304","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3305","messages":"3306","suppressedMessages":"3307","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3308","messages":"3309","suppressedMessages":"3310","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3311"},{"filePath":"3312","messages":"3313","suppressedMessages":"3314","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3315","messages":"3316","suppressedMessages":"3317","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3318","messages":"3319","suppressedMessages":"3320","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3321"},{"filePath":"3322","messages":"3323","suppressedMessages":"3324","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3325","messages":"3326","suppressedMessages":"3327","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3328","messages":"3329","suppressedMessages":"3330","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3331","messages":"3332","suppressedMessages":"3333","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3334","messages":"3335","suppressedMessages":"3336","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3337","messages":"3338","suppressedMessages":"3339","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3340","messages":"3341","suppressedMessages":"3342","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3343","messages":"3344","suppressedMessages":"3345","errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3346"},{"filePath":"3347","messages":"3348","suppressedMessages":"3349","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3350","messages":"3351","suppressedMessages":"3352","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3353","messages":"3354","suppressedMessages":"3355","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3356","messages":"3357","suppressedMessages":"3358","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3359"},{"filePath":"3360","messages":"3361","suppressedMessages":"3362","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3363","messages":"3364","suppressedMessages":"3365","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3366","messages":"3367","suppressedMessages":"3368","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3369","messages":"3370","suppressedMessages":"3371","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3372","messages":"3373","suppressedMessages":"3374","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3375","messages":"3376","suppressedMessages":"3377","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3378","messages":"3379","suppressedMessages":"3380","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3381","messages":"3382","suppressedMessages":"3383","errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3384"},{"filePath":"3385","messages":"3386","suppressedMessages":"3387","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3388"},{"filePath":"3389","messages":"3390","suppressedMessages":"3391","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3392","messages":"3393","suppressedMessages":"3394","errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3395"},{"filePath":"3396","messages":"3397","suppressedMessages":"3398","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3399"},{"filePath":"3400","messages":"3401","suppressedMessages":"3402","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3403"},{"filePath":"3404","messages":"3405","suppressedMessages":"3406","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3407"},{"filePath":"3408","messages":"3409","suppressedMessages":"3410","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3411"},{"filePath":"3412","messages":"3413","suppressedMessages":"3414","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3415","messages":"3416","suppressedMessages":"3417","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3418","messages":"3419","suppressedMessages":"3420","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3421","messages":"3422","suppressedMessages":"3423","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3424","messages":"3425","suppressedMessages":"3426","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3427"},{"filePath":"3428","messages":"3429","suppressedMessages":"3430","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3431","messages":"3432","suppressedMessages":"3433","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3072"},{"filePath":"3434","messages":"3435","suppressedMessages":"3436","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3437","messages":"3438","suppressedMessages":"3439","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3440","messages":"3441","suppressedMessages":"3442","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3443","messages":"3444","suppressedMessages":"3445","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3446","messages":"3447","suppressedMessages":"3448","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3449"},{"filePath":"3450","messages":"3451","suppressedMessages":"3452","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3453"},{"filePath":"3454","messages":"3455","suppressedMessages":"3456","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3457","messages":"3458","suppressedMessages":"3459","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3460","messages":"3461","suppressedMessages":"3462","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3463"},{"filePath":"3464","messages":"3465","suppressedMessages":"3466","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3467","messages":"3468","suppressedMessages":"3469","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3470"},{"filePath":"3471","messages":"3472","suppressedMessages":"3473","errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3474"},{"filePath":"3475","messages":"3476","suppressedMessages":"3477","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3478"},{"filePath":"3479","messages":"3480","suppressedMessages":"3481","errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3482"},{"filePath":"3483","messages":"3484","suppressedMessages":"3485","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3486","messages":"3487","suppressedMessages":"3488","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3489","messages":"3490","suppressedMessages":"3491","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3492","messages":"3493","suppressedMessages":"3494","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3495"},{"filePath":"3496","messages":"3497","suppressedMessages":"3498","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3499","messages":"3500","suppressedMessages":"3501","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3502","messages":"3503","suppressedMessages":"3504","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3505","messages":"3506","suppressedMessages":"3507","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3508","messages":"3509","suppressedMessages":"3510","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3511","messages":"3512","suppressedMessages":"3513","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3514","messages":"3515","suppressedMessages":"3516","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3517","messages":"3518","suppressedMessages":"3519","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3520","messages":"3521","suppressedMessages":"3522","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3523"},{"filePath":"3524","messages":"3525","suppressedMessages":"3526","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3527","messages":"3528","suppressedMessages":"3529","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3530"},{"filePath":"3531","messages":"3532","suppressedMessages":"3533","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3534","messages":"3535","suppressedMessages":"3536","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3537"},{"filePath":"3538","messages":"3539","suppressedMessages":"3540","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3541","messages":"3542","suppressedMessages":"3543","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3544","messages":"3545","suppressedMessages":"3546","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3547","messages":"3548","suppressedMessages":"3549","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3550"},{"filePath":"3551","messages":"3552","suppressedMessages":"3553","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3554"},{"filePath":"3555","messages":"3556","suppressedMessages":"3557","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3558"},{"filePath":"3559","messages":"3560","suppressedMessages":"3561","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3562","messages":"3563","suppressedMessages":"3564","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3565"},{"filePath":"3566","messages":"3567","suppressedMessages":"3568","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3569","messages":"3570","suppressedMessages":"3571","errorCount":0,"fatalErrorCount":0,"warningCount":19,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3572"},{"filePath":"3573","messages":"3574","suppressedMessages":"3575","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3576"},{"filePath":"3577","messages":"3578","suppressedMessages":"3579","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3580","messages":"3581","suppressedMessages":"3582","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3583","messages":"3584","suppressedMessages":"3585","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3586","messages":"3587","suppressedMessages":"3588","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3589","messages":"3590","suppressedMessages":"3591","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3592","messages":"3593","suppressedMessages":"3594","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3595","messages":"3596","suppressedMessages":"3597","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3598","messages":"3599","suppressedMessages":"3600","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3601","messages":"3602","suppressedMessages":"3603","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3604","messages":"3605","suppressedMessages":"3606","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3607","messages":"3608","suppressedMessages":"3609","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3610","messages":"3611","suppressedMessages":"3612","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3613","messages":"3614","suppressedMessages":"3615","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3616","messages":"3617","suppressedMessages":"3618","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3619"},{"filePath":"3620","messages":"3621","suppressedMessages":"3622","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3623"},{"filePath":"3624","messages":"3625","suppressedMessages":"3626","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3627"},{"filePath":"3628","messages":"3629","suppressedMessages":"3630","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"3631"},{"filePath":"3632","messages":"3633","suppressedMessages":"3634","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3635","messages":"3636","suppressedMessages":"3637","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3638","messages":"3639","suppressedMessages":"3640","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3641","messages":"3642","suppressedMessages":"3643","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3644","messages":"3645","suppressedMessages":"3646","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3647","messages":"3648","suppressedMessages":"3649","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3650","messages":"3651","suppressedMessages":"3652","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3653","messages":"3654","suppressedMessages":"3655","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3656","messages":"3657","suppressedMessages":"3658","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"3659","messages":"3660","suppressedMessages":"3661","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/index.js",["3662","3663","3664","3665","3666"],[],"import React from 'react';\nimport ReactDom from 'react-dom';\nimport { Router } from '@gatsbyjs/reach-router';\nimport { siteRoot, enableMultiADFS } from '../../utils/constants';\nimport SidePanel from './side-panel';\n\nimport OrgStatisticFile from './statistic/statistic-file';\nimport OrgStatisticStorage from './statistic/statistic-storage';\nimport OrgStatisticTraffic from './statistic/statistic-traffic';\nimport OrgStatisticUsers from './statistic/statistic-users';\nimport OrgStatisticReport from './statistic/statistic-reports';\nimport OrgDesktopDevices from './devices/desktop-devices';\nimport OrgMobileDevices from './devices/mobile-devices';\nimport OrgDevicesErrors from './devices/devices-errors';\nimport OrgWebSettings from './web-settings/web-settings';\nimport OrgUsers from './org-users-users';\nimport OrgUsersSearchUsers from './org-users-search-users';\nimport OrgAdmins from './org-users-admins';\nimport OrgUserProfile from './org-user-profile';\nimport OrgUserRepos from './org-user-repos';\nimport OrgUserSharedRepos from './org-user-shared-repos';\nimport OrgGroups from './org-groups';\nimport OrgGroupsSearchGroups from './org-groups-search-groups';\nimport OrgGroupInfo from './org-group-info';\nimport OrgGroupRepos from './org-group-repos';\nimport OrgGroupMembers from './org-group-members';\nimport OrgAllRepos from './libraries/org-all-repos';\nimport OrgTrashRepos from './libraries/org-repo-trash';\nimport OrgInfo from './org-info';\nimport OrgLinks from './org-links';\nimport OrgDepartments from './org-departments';\nimport OrgDepartmentsList from './org-departments-list';\nimport OrgDepartmentItem from './org-department-item';\nimport OrgLogs from './org-logs';\nimport OrgLogsFileAudit from './org-logs-file-audit';\nimport OrgLogsFileUpdate from './org-logs-file-update';\nimport OrgLogsPermAudit from './org-logs-perm-audit';\nimport OrgSAMLConfig from './org-saml-config';\nimport OrgSubscription from './org-subscription';\n\nimport '../../css/layout.css';\nimport '../../css/toolbar.css';\n\nclass Org extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSidePanelClosed: false,\n      currentTab: 'users'\n    };\n  }\n\n  componentDidMount() {\n    let href = window.location.href.split('/');\n    let currentTab = href[href.length - 2];\n\n    if (location.href.indexOf(`${siteRoot}org/useradmin`) != -1) {\n      currentTab = 'users';\n    }\n    if (location.href.indexOf(`${siteRoot}org/statistics-admin/`) != -1) {\n      currentTab = 'statistics-admin';\n    }\n    if (location.href.indexOf(`${siteRoot}org/deviceadmin/`) != -1) {\n      currentTab = 'deviceadmin';\n    }\n    if (location.href.indexOf(`${siteRoot}org/groupadmin`) != -1) {\n      currentTab = 'groupadmin';\n    }\n    if (location.href.indexOf(`${siteRoot}org/departmentadmin`) != -1) {\n      currentTab = 'departmentadmin';\n    }\n    this.setState({currentTab: currentTab});\n  }\n\n  onCloseSidePanel = () => {\n    this.setState({isSidePanelClosed: !this.state.isSidePanelClosed});\n  };\n\n  tabItemClick = (param) => {\n    this.setState({currentTab: param});\n  };\n\n  render() {\n    let { isSidePanelClosed, currentTab } = this.state;\n    return (\n      <div id=\"main\">\n        <SidePanel isSidePanelClosed={isSidePanelClosed} onCloseSidePanel={this.onCloseSidePanel} currentTab={currentTab} tabItemClick={this.tabItemClick}/>\n        <div className=\"main-panel\">\n          <Router className=\"reach-router\">\n            <OrgInfo path={siteRoot + 'org/info/'} />\n            <OrgStatisticFile path={siteRoot + 'org/statistics-admin/file/'} />\n            <OrgStatisticStorage path={siteRoot + 'org/statistics-admin/total-storage/'} />\n            <OrgStatisticUsers path={siteRoot + 'org/statistics-admin/active-users/'} />\n            <OrgStatisticTraffic path={siteRoot + 'org/statistics-admin/traffic/'} />\n            <OrgStatisticReport path={siteRoot + 'org/statistics-admin/reports/'} />\n            <OrgDesktopDevices path={siteRoot + 'org/deviceadmin/desktop-devices/'} />\n            <OrgMobileDevices path={siteRoot + 'org/deviceadmin/mobile-devices/'} />\n            <OrgDevicesErrors path={siteRoot + 'org/deviceadmin/devices-errors/'} />\n            <OrgWebSettings path={siteRoot + 'org/web-settings'} />\n            <OrgSubscription path={siteRoot + 'org/subscription'} onCloseSidePanel={this.onCloseSidePanel} />\n            <OrgUsers path={siteRoot + 'org/useradmin'} />\n            <OrgUsersSearchUsers path={siteRoot + 'org/useradmin/search-users'} />\n            <OrgAdmins path={siteRoot + 'org/useradmin/admins/'} />\n            <OrgUserProfile path={siteRoot + 'org/useradmin/info/:email/'} />\n            <OrgUserRepos path={siteRoot + 'org/useradmin/info/:email/repos/'} />\n            <OrgUserSharedRepos path={siteRoot + 'org/useradmin/info/:email/shared-repos/'} />\n            <OrgGroups path={siteRoot + 'org/groupadmin'} />\n            <OrgGroupsSearchGroups path={siteRoot + 'org/groupadmin/search-groups'} />\n            <OrgGroupInfo path={siteRoot + 'org/groupadmin/:groupID/'} />\n            <OrgGroupRepos path={siteRoot + 'org/groupadmin/:groupID/repos/'} />\n            <OrgGroupMembers path={siteRoot + 'org/groupadmin/:groupID/members/'} />\n            <OrgAllRepos path={siteRoot + 'org/repoadmin'}/>\n            <OrgTrashRepos path={siteRoot + 'org/repoadmin-trash'}/>\n            <OrgLinks path={siteRoot + 'org/publinkadmin'}/>\n            <OrgDepartments path={siteRoot + 'org/departmentadmin'}>\n              <OrgDepartmentsList path='/'/>\n              <OrgDepartmentItem path='groups/:groupID'/>\n            </OrgDepartments>\n            <OrgLogs path={siteRoot + 'org/logadmin'} currentTab={currentTab} tabItemClick={this.tabItemClick}>\n              <OrgLogsFileAudit path='/' />\n              <OrgLogsFileUpdate path='file-update' />\n              <OrgLogsPermAudit path='perm-audit' />\n            </OrgLogs>\n            {enableMultiADFS &&\n              <OrgSAMLConfig path={siteRoot + 'org/samlconfig/'}/>\n            }\n          </Router>\n        </div>\n      </div>\n    );\n  }\n}\n\nReactDom.render(<Org />, document.getElementById('wrapper'));\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/index.js",["3667"],[],"import React from 'react';\nimport ReactDom from 'react-dom';\nimport MediaQuery from 'react-responsive';\nimport { Modal } from 'reactstrap';\nimport { Router } from '@gatsbyjs/reach-router';\nimport { I18nextProvider } from 'react-i18next';\nimport { siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport i18n from '../../_i18n/i18n-seafile-editor';\n\nimport SidePanel from './side-panel';\nimport MainPanel from './main-panel';\n\nimport Info from './info';\n\nimport StatisticFile from './statistic/statistic-file';\nimport StatisticStorage from './statistic/statistic-storage';\nimport StatisticTraffic from './statistic/statistic-traffic';\nimport StatisticUsers from './statistic/statistic-users';\nimport StatisticReport from './statistic/statistic-reports';\n\nimport DesktopDevices from './devices/desktop-devices';\nimport MobileDevices from './devices/mobile-devices';\nimport DeviceErrors from './devices/devices-errors';\n\nimport Users from './users/users';\nimport AdminUsers from './users/admin-users';\nimport LDAPImportedUsers from './users/ldap-imported-users';\nimport LDAPUsers from './users/ldap-users';\nimport SearchUsers from './users/search-users';\nimport User from './users/user-info';\nimport UserOwnedRepos from './users/user-repos';\nimport UserSharedRepos from './users/user-shared-repos';\nimport UserLinks from './users/user-links';\nimport UserGroups from './users/user-groups';\n\nimport AllRepos from './repos/all-repos';\nimport SystemRepo from './repos/system-repo';\nimport TrashRepos from './repos/trash-repos';\nimport SearchRepos from './repos/search-repos';\nimport DirView from './repos/dir-view';\n\nimport Groups from './groups/groups';\nimport SearchGroups from './groups/search-groups';\nimport GroupRepos from './groups/group-repos';\nimport GroupMembers from './groups/group-members';\n\nimport Departments from './departments/departments';\nimport DepartmentList from './departments/department-list';\nimport SubDepartments from './departments/sub-departments';\nimport DepartmentMembers from './departments/department-members';\nimport DepartmentLibraries from './departments/department-libraries';\n\nimport ShareLinks from './links/share-links';\nimport UploadLinks from './links/upload-links';\n\nimport Orgs from './orgs/orgs';\nimport SearchOrgs from './orgs/search-orgs';\nimport OrgInfo from './orgs/org-info';\nimport OrgUsers from './orgs/org-users';\nimport OrgGroups from './orgs/org-groups';\nimport OrgRepos from './orgs/org-repos';\n\nimport Institutions from './institutions/institutions';\nimport InstitutionInfo from './institutions/institution-info';\nimport InstitutionUsers from './institutions/institution-users';\nimport InstitutionAdmins from './institutions/institution-admins';\n\nimport LoginLogs from './logs-page/login-logs';\nimport FileAccessLogs from './logs-page/file-access-logs';\nimport FileUpdateLogs from './logs-page/file-update-logs';\nimport SharePermissionLogs from './logs-page/share-permission-logs';\n\nimport WebSettings from './web-settings/web-settings';\nimport Notifications from './notifications/notifications';\nimport FileScanRecords from './file-scan-records';\nimport WorkWeixinDepartments from './work-weixin-departments';\nimport DingtalkDepartments from './dingtalk-departments';\nimport Invitations from './invitations/invitations';\nimport TermsAndConditions from './terms-and-conditions/terms-and-conditions';\n\nimport AllVirusFiles from './virus-scan/all-virus-files';\nimport UnhandledVirusFiles from './virus-scan/unhandled-virus-files';\n\nimport AdminOperationLogs from './admin-logs/operation-logs';\nimport AdminLoginLogs from './admin-logs/login-logs';\n\nimport AbuseReports from './abuse-reports';\n\nimport '../../css/layout.css';\nimport '../../css/toolbar.css';\n\nclass SysAdmin extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSidePanelClosed: false,\n      currentTab: 'file-scan'\n    };\n  }\n\n  componentDidMount() {\n    let href = window.location.href.split('/');\n    let currentTab = href[href.length - 2];\n\n    const pageList = [\n      {\n        tab: 'devices',\n        urlPartList: ['desktop-devices', 'mobile-devices', 'device-errors']\n      },\n      {\n        tab: 'libraries',\n        urlPartList: ['all-libraries', 'search-libraries', 'system-library', 'trash-libraries', 'libraries/']\n      },\n      {\n        tab: 'statistic',\n        urlPartList: ['statistics/file', 'statistics/storage', 'statistics/user', 'statistics/traffic', 'statistics/reports']\n      },\n      {\n        tab: 'users',\n        urlPartList: ['users/', 'search-users/']\n      },\n      {\n        tab: 'groups',\n        urlPartList: ['groups/', 'search-groups/']\n      },\n      {\n        tab: 'organizations',\n        urlPartList: ['organizations/', 'search-organizations/']\n      },\n      {\n        tab: 'links',\n        urlPartList: ['share-links/', 'upload-links/']\n      },\n      {\n        tab: 'institutions',\n        urlPartList: ['institutions/']\n      },\n      {\n        tab: 'termsandconditions',\n        urlPartList: ['terms-and-conditions/']\n      },\n      {\n        tab: 'departments',\n        urlPartList: ['departments/']\n      },\n      {\n        tab: 'logs',\n        urlPartList: ['logs/']\n      },\n      {\n        tab: 'virus-files',\n        urlPartList: ['virus-files/']\n      },\n      {\n        tab: 'adminLogs',\n        urlPartList: ['admin-logs/']\n      }\n    ];\n    const tmpTab = this.getCurrentTabForPageList(pageList);\n    currentTab = tmpTab ? tmpTab : currentTab;\n\n    this.setState({currentTab: currentTab});\n  }\n\n  UNSAFE_componentWillMount() {\n    if (!Utils.isDesktop()) {\n      this.setState({\n        isSidePanelClosed: true\n      });\n    }\n  }\n\n  getCurrentTabForPageList = (pageList) => {\n    let urlPartList, tab;\n    const urlBase = `${siteRoot}sys/`;\n    for (let i = 0, len = pageList.length; i < len; i++) {\n      urlPartList = pageList[i].urlPartList;\n      tab = pageList[i].tab;\n      for (let j = 0, jlen = urlPartList.length; j < jlen; j++) {\n        if (location.href.indexOf(`${urlBase}${urlPartList[j]}`) != -1) {\n          return tab;\n        }\n      }\n    }\n  };\n\n  onCloseSidePanel = () => {\n    this.setState({isSidePanelClosed: !this.state.isSidePanelClosed});\n  };\n\n  tabItemClick = (param) => {\n    this.setState({currentTab: param});\n    if (!Utils.isDesktop() && !this.state.isSidePanelClosed) {\n      this.setState({ isSidePanelClosed: true });\n    }\n  };\n\n  toggleSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  };\n\n  render() {\n    const { currentTab, isSidePanelClosed } = this.state;\n    const commonProps = {\n      toggleSidePanel: this.toggleSidePanel\n    };\n\n    return (\n      <div id=\"main\">\n        <SidePanel\n          isSidePanelClosed={isSidePanelClosed}\n          onCloseSidePanel={this.onCloseSidePanel}\n          currentTab={currentTab}\n          tabItemClick={this.tabItemClick}\n        />\n        <MainPanel>\n          <Router className=\"reach-router\">\n            <Info path={siteRoot + 'sys/info'} {...commonProps} />\n            <StatisticFile path={siteRoot + 'sys/statistics/file'} {...commonProps} />\n            <StatisticStorage path={siteRoot + 'sys/statistics/storage'} {...commonProps} />\n            <StatisticUsers path={siteRoot + 'sys/statistics/user'} {...commonProps} />\n            <StatisticTraffic path={siteRoot + 'sys/statistics/traffic'} {...commonProps} />\n            <StatisticReport path={siteRoot + 'sys/statistics/reports'} {...commonProps} />\n            <DesktopDevices path={siteRoot + 'sys/desktop-devices'} {...commonProps} />\n            <MobileDevices path={siteRoot + 'sys/mobile-devices'} {...commonProps} />\n            <DeviceErrors path={siteRoot + 'sys/device-errors'} {...commonProps} />\n            <AllRepos path={siteRoot + 'sys/all-libraries'} {...commonProps} />\n            <SystemRepo path={siteRoot + 'sys/system-library'} {...commonProps} />\n            <TrashRepos path={siteRoot + 'sys/trash-libraries'} {...commonProps} />\n            <SearchRepos path={siteRoot + 'sys/search-libraries'} {...commonProps} />\n            <DirView path={siteRoot + 'sys/libraries/:repoID/*'} {...commonProps} />\n            <WebSettings path={siteRoot + 'sys/web-settings'} {...commonProps} />\n            <Notifications path={siteRoot + 'sys/notifications'} {...commonProps} />\n            <Groups path={siteRoot + 'sys/groups'} {...commonProps} />\n            <SearchGroups path={siteRoot + 'sys/search-groups'} {...commonProps} />\n            <GroupRepos path={siteRoot + 'sys/groups/:groupID/libraries'} {...commonProps} />\n            <GroupMembers path={siteRoot + 'sys/groups/:groupID/members'} {...commonProps} />\n            <Departments path={siteRoot + 'sys/departments'}>\n              <DepartmentList path='/' {...commonProps} />\n              <SubDepartments path='/:groupID' {...commonProps} />\n              <DepartmentMembers path='/:groupID/members' {...commonProps} />\n              <DepartmentLibraries path='/:groupID/libraries' {...commonProps} />\n            </Departments>\n            <ShareLinks path={siteRoot + 'sys/share-links'} {...commonProps} />\n            <UploadLinks path={siteRoot + 'sys/upload-links'} {...commonProps} />\n            <Orgs path={siteRoot + 'sys/organizations'} {...commonProps} />\n            <SearchOrgs path={siteRoot + 'sys/search-organizations'} {...commonProps} />\n            <OrgInfo path={siteRoot + 'sys/organizations/:orgID/info'} {...commonProps} />\n            <OrgUsers path={siteRoot + 'sys/organizations/:orgID/users'} {...commonProps} />\n            <OrgGroups path={siteRoot + 'sys/organizations/:orgID/groups'} {...commonProps} />\n            <OrgRepos path={siteRoot + 'sys/organizations/:orgID/libraries'} {...commonProps} />\n            <Institutions path={siteRoot + 'sys/institutions'} {...commonProps} />\n            <InstitutionInfo path={siteRoot + 'sys/institutions/:institutionID/info'} {...commonProps} />\n            <InstitutionUsers path={siteRoot + 'sys/institutions/:institutionID/members'} {...commonProps} />\n            <InstitutionAdmins path={siteRoot + 'sys/institutions/:institutionID/admins'} {...commonProps} />\n            <LoginLogs path={siteRoot + 'sys/logs/login'} {...commonProps} />\n            <FileAccessLogs path={siteRoot + 'sys/logs/file-access'} {...commonProps} />\n            <FileUpdateLogs path={siteRoot + 'sys/logs/file-update'} {...commonProps} />\n            <SharePermissionLogs path={siteRoot + 'sys/logs/share-permission'} {...commonProps} />\n            <AdminOperationLogs path={siteRoot + 'sys/admin-logs/operation'} {...commonProps} />\n            <AdminLoginLogs path={siteRoot + 'sys/admin-logs/login'} {...commonProps} />\n\n            <Users path={siteRoot + 'sys/users'} {...commonProps} />\n            <AdminUsers path={siteRoot + 'sys/users/admins'} {...commonProps} />\n            <LDAPImportedUsers path={siteRoot + 'sys/users/ldap-imported'} {...commonProps} />\n            <LDAPUsers path={siteRoot + 'sys/users/ldap'} {...commonProps} />\n            <SearchUsers path={siteRoot + 'sys/search-users'} {...commonProps} />\n            <User path={siteRoot + 'sys/users/:email'} {...commonProps} />\n            <UserOwnedRepos path={siteRoot + 'sys/users/:email/owned-libraries'} {...commonProps} />\n            <UserSharedRepos path={siteRoot + 'sys/users/:email/shared-libraries'} {...commonProps} />\n            <UserLinks path={siteRoot + 'sys/users/:email/shared-links'} {...commonProps} />\n            <UserGroups path={siteRoot + 'sys/users/:email/groups'} {...commonProps} />\n\n            <Invitations path={siteRoot + 'sys/invitations'} {...commonProps} />\n            <TermsAndConditions path={siteRoot + 'sys/terms-and-conditions/'} {...commonProps} />\n\n            <AllVirusFiles path={siteRoot + 'sys/virus-files/all'} {...commonProps} />\n            <UnhandledVirusFiles path={siteRoot + 'sys/virus-files/unhandled'} {...commonProps} />\n\n            <FileScanRecords path={siteRoot + 'sys/file-scan-records'} {...commonProps} />\n            <WorkWeixinDepartments path={siteRoot + 'sys/work-weixin'} {...commonProps} />\n            <DingtalkDepartments path={siteRoot + 'sys/dingtalk'} {...commonProps} />\n            <AbuseReports path={siteRoot + 'sys/abuse-reports'} {...commonProps} />\n          </Router>\n        </MainPanel>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          <Modal zIndex=\"1030\" isOpen={!isSidePanelClosed} toggle={this.toggleSidePanel} contentClassName=\"d-none\"></Modal>\n        </MediaQuery>\n      </div>\n    );\n  }\n}\n\nReactDom.render(\n  <I18nextProvider value={i18n}>\n    <SysAdmin />\n  </I18nextProvider>,\n  document.getElementById('wrapper')\n);\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/tc-view.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/tc-accept.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/shared-dir-view.js",["3668","3669","3670","3671","3672","3673","3674","3675","3676","3677","3678","3679","3680","3681","3682","3683","3684","3685","3686","3687","3688","3689","3690","3691"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MD5 from 'MD5';\nimport ReactDom from 'react-dom';\nimport { Button, Dropdown, DropdownToggle, DropdownItem, UncontrolledTooltip } from 'reactstrap';\nimport moment from 'moment';\nimport Account from './components/common/account';\nimport { useGoFileserver, fileServerRoot, gettext, siteRoot, mediaUrl, logoPath, logoWidth, logoHeight, siteTitle, thumbnailSizeForOriginal } from './utils/constants';\nimport { Utils } from './utils/utils';\nimport { seafileAPI } from './utils/seafile-api';\nimport Loading from './components/loading';\nimport toaster from './components/toast';\nimport ModalPortal from './components/modal-portal';\nimport ZipDownloadDialog from './components/dialog/zip-download-dialog';\nimport ImageDialog from './components/dialog/image-dialog';\nimport FileUploader from './components/shared-link-file-uploader/file-uploader';\nimport SaveSharedDirDialog from './components/dialog/save-shared-dir-dialog';\nimport CopyMoveDirentProgressDialog from './components/dialog/copy-move-dirent-progress-dialog';\nimport RepoInfoBar from './components/repo-info-bar';\nimport RepoTag from './models/repo-tag';\nimport InsertAd from './services/ad';\n\nimport './css/shared-dir-view.css';\nimport './css/grid-view.css';\n\nmoment.locale(window.app.config.lang);\n\nlet loginUser = window.app.pageOptions.name;\nlet {\n  token, dirName, dirPath, sharedBy,\n  repoID, relativePath,\n  mode, thumbnailSize, zipped,\n  trafficOverLimit, canDownload,\n  noQuota, canUpload, enableVideoThumbnail\n} = window.shared.pageOptions;\n\nconst showDownloadIcon = !trafficOverLimit && canDownload;\n\nclass SharedDirView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      items: [],\n\n      isAllItemsSelected: false,\n      selectedItems: [],\n\n      sortBy: 'name', // 'name' or 'time' or 'size'\n      sortOrder: 'asc', // 'asc' or 'desc'\n\n      isZipDialogOpen: false,\n      zipFolderPath: '',\n\n      usedRepoTags: [],\n      isRepoInfoBarShow: false,\n\n      isSaveSharedDirDialogShow: false,\n      itemsForSave: [],\n\n      asyncCopyMoveTaskId: '',\n      asyncOperationProgress: 0,\n      asyncOperatedFilesLength: 0,\n      isCopyMoveProgressDialogShow: false,\n\n      isImagePopupOpen: false,\n      imageItems: [],\n      imageIndex: 0\n    };\n  }\n\n  componentDidMount() {\n    if (trafficOverLimit) {\n      toaster.danger(gettext('File download is disabled: the share link traffic of owner is used up.'), {\n        duration: 3\n      });\n    }\n\n    seafileAPI.listSharedDir(token, relativePath, thumbnailSize).then((res) => {\n      const items = res.data['dirent_list'].map(item => {\n        item.isSelected = false;\n        return item;\n      });\n      this.setState({\n        isLoading: false,\n        errorMsg: '',\n        items: Utils.sortDirentsInSharedDir(items, this.state.sortBy, this.state.sortOrder)\n      });\n      this.getThumbnails();\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n\n    this.getShareLinkRepoTags();\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortDirentsInSharedDir(this.state.items, sortBy, sortOrder)\n    });\n  };\n\n  getThumbnails = () => {\n    let items = this.state.items.filter((item) => {\n      return !item.is_dir &&\n        (Utils.imageCheck(item.file_name) ||\n          (enableVideoThumbnail && Utils.videoCheck(item.file_name))) &&\n        !item.encoded_thumbnail_src;\n    });\n    if (items.length == 0) {\n      return;\n    }\n\n    const len = items.length;\n    const _this = this;\n    let getThumbnail = function (i) {\n      const curItem = items[i];\n      seafileAPI.getShareLinkThumbnail(token, curItem.file_path, thumbnailSize).then((res) => {\n        curItem.encoded_thumbnail_src = res.data.encoded_thumbnail_src;\n      }).catch((error) => {\n        // do nothing\n      }).then(() => {\n        if (i < len - 1) {\n          getThumbnail(++i);\n        } else {\n          // when done, `setState()`\n          _this.setState({\n            items: _this.state.items\n          });\n        }\n      });\n    };\n    getThumbnail(0);\n  };\n\n  renderPath = () => {\n    return (\n      <React.Fragment>\n        {zipped.map((item, index) => {\n          if (index != zipped.length - 1) {\n            return (\n              <React.Fragment key={index}>\n                <a href={`?p=${encodeURIComponent(item.path)}&mode=${mode}`} className=\"mx-1 ellipsis\" title={item.name}>{item.name}</a>\n                <span> / </span>\n              </React.Fragment>\n            );\n          }\n          return null;\n        })\n        }\n        <span className=\"ml-1 ellipsis\" title={zipped[zipped.length - 1].name}>{zipped[zipped.length - 1].name}</span>\n      </React.Fragment>\n    );\n  };\n\n  zipDownloadFolder = (folderPath) => {\n    if (!useGoFileserver) {\n      this.setState({\n        isZipDialogOpen: true,\n        zipFolderPath: folderPath\n      });\n    }\n    else {\n      seafileAPI.getShareLinkZipTask(token, folderPath).then((res) => {\n        const zipToken = res.data['zip_token'];\n        location.href = `${fileServerRoot}zip/${zipToken}`;\n      }).catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({\n          isLoading: false,\n          errorMsg: errorMsg\n        });\n      });\n    }\n  };\n\n  zipDownloadSelectedItems = () => {\n    if (!useGoFileserver) {\n      this.setState({\n        isZipDialogOpen: true,\n        zipFolderPath: relativePath,\n        selectedItems: this.state.items.filter(item => item.isSelected)\n          .map(item => item.file_name || item.folder_name)\n      });\n    }\n    else {\n      let target = this.state.items.filter(item => item.isSelected).map(item => item.file_name || item.folder_name);\n      seafileAPI.getShareLinkDirentsZipTask(token, relativePath, target).then((res) => {\n        const zipToken = res.data['zip_token'];\n        location.href = `${fileServerRoot}zip/${zipToken}`;\n      }).catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({\n          isLoading: false,\n          errorMsg: errorMsg\n        });\n      });\n    }\n  };\n\n  async getAsyncCopyMoveProgress() {\n    let { asyncCopyMoveTaskId } = this.state;\n    try {\n      let res = await seafileAPI.queryAsyncOperationProgress(asyncCopyMoveTaskId);\n      let data = res.data;\n      if (data.failed) {\n        let message = gettext('Failed to copy files to another library.');\n        toaster.danger(message);\n        this.setState({\n          asyncOperationProgress: 0,\n          isCopyMoveProgressDialogShow: false,\n        });\n        return;\n      }\n\n      if (data.successful) {\n        this.setState({\n          asyncOperationProgress: 0,\n          isCopyMoveProgressDialogShow: false,\n        });\n        let message = gettext('Successfully copied files to another library.');\n        toaster.success(message);\n        return;\n      }\n      // init state: total is 0\n      let asyncOperationProgress = !data.total ? 0 : parseInt((data.done / data.total * 100).toFixed(2));\n\n      this.getAsyncCopyMoveProgress();\n      this.setState({ asyncOperationProgress: asyncOperationProgress });\n    } catch (error) {\n      this.setState({\n        asyncOperationProgress: 0,\n        isCopyMoveProgressDialogShow: false,\n      });\n    }\n  }\n\n  saveSelectedItems = () => {\n    this.setState({\n      isSaveSharedDirDialogShow: true,\n      itemsForSave: this.state.items.filter(item => item.isSelected)\n        .map(item => item.file_name || item.folder_name)\n    });\n  };\n\n  saveAllItems = () => {\n    this.setState({\n      isSaveSharedDirDialogShow: true,\n      itemsForSave: this.state.items\n        .map(item => item.file_name || item.folder_name)\n    });\n  };\n\n  toggleSaveSharedDirCancel = () => {\n    this.setState({\n      isSaveSharedDirDialogShow: false,\n      itemsForSave: []\n    });\n  };\n\n  handleSaveSharedDir = (destRepoID, dstPath) => {\n\n    const itemsForSave = this.state.itemsForSave;\n\n    seafileAPI.saveSharedDir(destRepoID, dstPath, token, relativePath, itemsForSave).then((res) => {\n      this.setState({\n        isSaveSharedDirDialogShow: false,\n        itemsForSave: [],\n        isCopyMoveProgressDialogShow: true,\n        asyncCopyMoveTaskId: res.data.task_id,\n        asyncOperatedFilesLength: itemsForSave.length,\n      }, () => {\n        this.getAsyncCopyMoveProgress();\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      this.setState({ errMessage: errMessage });\n    });\n  };\n\n  onProgressDialogToggle = () => {\n    let { asyncOperationProgress } = this.state;\n    if (asyncOperationProgress !== 100) {\n      let taskId = this.state.asyncCopyMoveTaskId;\n      seafileAPI.cancelCopyMoveOperation(taskId);\n    }\n\n    this.setState({\n      asyncOperationProgress: 0,\n      isCopyMoveProgressDialogShow: false,\n    });\n  };\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false,\n      zipFolderPath: '',\n      selectedItems: []\n    });\n  };\n\n  // for image popup\n  prepareImageItem = (item) => {\n    const name = item.file_name;\n    const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n    const isGIF = fileExt == 'gif';\n\n    let src;\n    const fileURL = `${siteRoot}d/${token}/files/?p=${encodeURIComponent(item.file_path)}`;\n    if (!isGIF) {\n      src = `${siteRoot}thumbnail/${token}/${thumbnailSizeForOriginal}${Utils.encodePath(item.file_path)}`;\n    } else {\n      src = `${fileURL}&raw=1`;\n    }\n\n    return {\n      'name': name,\n      'url': fileURL,\n      'src': src\n    };\n  };\n\n  showImagePopup = (curItem) => {\n    const items = this.state.items.filter((item) => {\n      return !item.is_dir && Utils.imageCheck(item.file_name);\n    });\n    const imageItems = items.map((item) => {\n      return this.prepareImageItem(item);\n    });\n\n    this.setState({\n      isImagePopupOpen: true,\n      imageItems: imageItems,\n      imageIndex: items.indexOf(curItem)\n    });\n  };\n\n  closeImagePopup = () => {\n    this.setState({\n      isImagePopupOpen: false\n    });\n  };\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  };\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  };\n\n  toggleAllSelected = () => {\n    this.setState((prevState) => ({\n      isAllItemsSelected: !prevState.isAllItemsSelected,\n      items: this.state.items.map((item) => {\n        item.isSelected = !prevState.isAllItemsSelected;\n        return item;\n      })\n    }));\n  };\n\n  toggleItemSelected = (targetItem, isSelected) => {\n    this.setState({\n      items: this.state.items.map((item) => {\n        if (item === targetItem) {\n          item.isSelected = isSelected;\n        }\n        return item;\n      })\n    }, () => {\n      this.setState({\n        isAllItemsSelected: !this.state.items.some(item => !item.isSelected)\n      });\n    });\n  };\n\n  onUploadFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.uploader.onFileUpload();\n  };\n\n  onFileUploadSuccess = (direntObject) => {\n    const { name, size } = direntObject;\n    const newItem = {\n      isSelected: false,\n      file_name: name,\n      file_path: Utils.joinPath(relativePath, name),\n      is_dir: false,\n      last_modified: moment().format(),\n      size: size\n    };\n    const folderItems = this.state.items.filter(item => { return item.is_dir; });\n    // put the new file as the first file\n    let items = Array.from(this.state.items);\n    items.splice(folderItems.length, 0, newItem);\n    this.setState({ items: items });\n    seafileAPI.shareLinksUploadDone(token, Utils.joinPath(dirPath, name));\n  };\n\n  getShareLinkRepoTags = () => {\n    seafileAPI.getShareLinkRepoTags(token).then(res => {\n      let usedRepoTags = [];\n      res.data.repo_tags.forEach(item => {\n        let usedRepoTag = new RepoTag(item);\n        if (usedRepoTag.fileCount > 0) {\n          usedRepoTags.push(usedRepoTag);\n        }\n      });\n      this.setState({ usedRepoTags: usedRepoTags });\n      if (usedRepoTags.length != 0 && relativePath == '/') {\n        this.setState({ isRepoInfoBarShow: true });\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    const modeBaseClass = 'btn btn-secondary btn-icon sf-view-mode-btn';\n    return (\n      <React.Fragment>\n        <div className=\"h-100 d-flex flex-column\">\n          <div className=\"top-header d-flex justify-content-between\">\n            <a href={siteRoot}>\n              <img src={mediaUrl + logoPath} height={logoHeight} width={logoWidth} title={siteTitle} alt=\"logo\" />\n            </a>\n            {loginUser && <Account />}\n          </div>\n          <div className=\"o-auto\">\n            <div className=\"shared-dir-view-main\">\n              <InsertAd zone='shared-dir-view' category='Flat_message' center={true} />\n              <h2 className=\"h3 text-truncate\" title={dirName}>{dirName}</h2>\n              <p>{gettext('Shared by: ')}{sharedBy}</p>\n              <div className=\"d-flex justify-content-between align-items-center op-bar\">\n                <p className=\"m-0 mr-4 ellipsis d-flex align-items-center\">{gettext('Current path: ')}{this.renderPath()}</p>\n                <div className=\"flex-none\">\n                  {isDesktop &&\n                    <div className=\"view-mode btn-group\">\n                      <a\n                        href={`?p=${encodeURIComponent(relativePath)}&mode=list`}\n                        className={`${modeBaseClass} sf2-icon-list-view ${mode == 'list' ? 'current-mode' : ''}`}\n                        title={gettext('List')}\n                        aria-label={gettext('List')}\n                      ></a>\n                      <a\n                        href={`?p=${encodeURIComponent(relativePath)}&mode=grid`}\n                        className={`${modeBaseClass} sf2-icon-grid-view ${mode == 'grid' ? 'current-mode' : ''}`}\n                        title={gettext('Grid')}\n                        aria-label={gettext('Grid')}\n                      ></a>\n                    </div>\n                  }\n                  {canUpload && (\n                    <Button disabled={noQuota}\n                      title={noQuota ? gettext('The owner of this library has run out of space.') : ''}\n                      onClick={this.onUploadFile} className=\"ml-2 shared-dir-op-btn shared-dir-upload-btn\"\n                    >{gettext('Upload')}</Button>\n                  )}\n                  {showDownloadIcon &&\n                    <Fragment>\n                      {this.state.items.some(item => item.isSelected) ?\n                        <Fragment>\n                          <Button color=\"success\" onClick={this.zipDownloadSelectedItems} className=\"ml-2 shared-dir-op-btn\">{gettext('ZIP Selected Items')}</Button>\n                          {(canDownload && loginUser && (loginUser !== sharedBy)) &&\n                            <Button color=\"success\" onClick={this.saveSelectedItems} className=\"ml-2 shared-dir-op-btn\">{gettext('Save Selected Items')}</Button>\n                          }\n                        </Fragment>\n                        :\n                        <Fragment>\n                          <Button color=\"success\" onClick={this.zipDownloadFolder.bind(this, relativePath)} className=\"ml-2 shared-dir-op-btn\">{gettext('ZIP')}</Button>\n                          {(canDownload && loginUser && (loginUser !== sharedBy)) &&\n                            <Button color=\"success\" onClick={this.saveAllItems} className=\"ml-2 shared-dir-op-btn\">{gettext('Save')}</Button>\n                          }\n                        </Fragment>\n                      }\n                    </Fragment>\n                  }\n                </div>\n              </div>\n              {!noQuota && canUpload && (\n                <FileUploader\n                  ref={uploader => this.uploader = uploader}\n                  dragAndDrop={false}\n                  token={token}\n                  path={dirPath === '/' ? dirPath : dirPath.replace(/\\/+$/, '')}\n                  relativePath={relativePath === '/' ? relativePath : relativePath.replace(/\\/+$/, '')}\n                  repoID={repoID}\n                  onFileUploadSuccess={this.onFileUploadSuccess}\n                />\n              )}\n\n              {this.state.isRepoInfoBarShow && (\n                <RepoInfoBar\n                  repoID={repoID}\n                  currentPath={'/'}\n                  usedRepoTags={this.state.usedRepoTags}\n                  shareLinkToken={token}\n                  enableFileDownload={showDownloadIcon}\n                  className=\"mx-0\"\n                />\n              )}\n\n              <Content\n                isDesktop={isDesktop}\n                isLoading={this.state.isLoading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortItems={this.sortItems}\n                isAllItemsSelected={this.state.isAllItemsSelected}\n                toggleAllSelected={this.toggleAllSelected}\n                toggleItemSelected={this.toggleItemSelected}\n                zipDownloadFolder={this.zipDownloadFolder}\n                showImagePopup={this.showImagePopup}\n              />\n            </div>\n          </div>\n        </div>\n        {this.state.isZipDialogOpen &&\n          <ModalPortal>\n            <ZipDownloadDialog\n              token={token}\n              path={this.state.zipFolderPath}\n              target={this.state.selectedItems}\n              toggleDialog={this.closeZipDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isSaveSharedDirDialogShow &&\n          <SaveSharedDirDialog\n            sharedToken={token}\n            parentDir={relativePath}\n            items={this.state.itemsForSave}\n            toggleCancel={this.toggleSaveSharedDirCancel}\n            handleSaveSharedDir={this.handleSaveSharedDir}\n          />\n        }\n        {this.state.isCopyMoveProgressDialogShow && (\n          <CopyMoveDirentProgressDialog\n            type='copy'\n            asyncOperatedFilesLength={this.state.asyncOperatedFilesLength}\n            asyncOperationProgress={this.state.asyncOperationProgress}\n            toggleDialog={this.onProgressDialogToggle}\n          />\n        )}\n        {this.state.isImagePopupOpen &&\n          <ModalPortal>\n            <ImageDialog\n              imageItems={this.state.imageItems}\n              imageIndex={this.state.imageIndex}\n              closeImagePopup={this.closeImagePopup}\n              moveToPrevImage={this.moveToPrevImage}\n              moveToNextImage={this.moveToNextImage}\n            />\n          </ModalPortal>\n        }\n      </React.Fragment>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  render() {\n    const {\n      isDesktop,\n      isLoading, errorMsg, items,\n      sortBy, sortOrder,\n      isAllItemsSelected\n    } = this.props;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-6 text-center\">{errorMsg}</p>;\n    }\n\n    const tbody = (\n      <tbody>\n        {items.map((item, index) => {\n          return <Item\n            key={index}\n            isDesktop={isDesktop}\n            item={item}\n            zipDownloadFolder={this.props.zipDownloadFolder}\n            showImagePopup={this.props.showImagePopup}\n            toggleItemSelected={this.props.toggleItemSelected}\n          />;\n        })}\n      </tbody>\n    );\n\n    if (!isDesktop) {\n      return (\n        <table className=\"table-hover table-thead-hidden\">\n          <thead>\n            <tr>\n              <th width=\"12%\"></th>\n              <th width=\"80%\"></th>\n              <th width=\"8%\"></th>\n            </tr>\n          </thead>\n          {tbody}\n        </table>\n      );\n    }\n\n    const sortIcon = <span className={`fas ${sortOrder == 'asc' ? 'fa-caret-up' : 'fa-caret-down'}`}></span>;\n    return mode == 'list' ? (\n      <table className=\"table-hover\">\n        <thead>\n          <tr>\n            {showDownloadIcon &&\n              <th width=\"3%\" className=\"text-center\">\n                <input type=\"checkbox\" checked={isAllItemsSelected} onChange={this.props.toggleAllSelected} />\n              </th>\n            }\n            <th width=\"5%\"></th>\n            <th width={showDownloadIcon ? '50%' : '53%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortBy == 'name' && sortIcon}</a></th>\n            <th width=\"8%\"></th>\n            <th width=\"14%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBy == 'size' && sortIcon}</a></th>\n            <th width=\"13%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortBy == 'time' && sortIcon}</a></th>\n            <th width=\"7%\"></th>\n          </tr>\n        </thead>\n        {tbody}\n      </table>\n    ) : (\n      <ul className=\"grid-view\">\n        {items.map((item, index) => {\n          return <GridItem\n            key={index}\n            item={item}\n            zipDownloadFolder={this.props.zipDownloadFolder}\n            showImagePopup={this.props.showImagePopup}\n          />;\n        })}\n      </ul>\n    );\n  }\n}\n\nContent.propTypes = {\n  isDesktop: PropTypes.bool,\n  isLoading: PropTypes.bool,\n  isAllItemsSelected: PropTypes.bool,\n  errorMsg: PropTypes.string,\n  items: PropTypes.array,\n  sortItems: PropTypes.func,\n  sortBy: PropTypes.string,\n  sortOrder: PropTypes.string,\n  toggleAllSelected: PropTypes.func,\n  toggleItemSelected: PropTypes.func,\n  zipDownloadFolder: PropTypes.func,\n  showImagePopup: PropTypes.func,\n};\n\nclass Item extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isIconShown: false,\n      isOpMenuOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({ isOpMenuOpen: !this.state.isOpMenuOpen });\n  };\n\n  handleMouseOver = () => {\n    this.setState({ isIconShown: true });\n  };\n\n  handleMouseOut = () => {\n    this.setState({ isIconShown: false });\n  };\n\n  zipDownloadFolder = (e) => {\n    e.preventDefault();\n    this.props.zipDownloadFolder.bind(this, this.props.item.folder_path)();\n  };\n\n  handleFileClick = (e) => {\n    const item = this.props.item;\n    if (!Utils.imageCheck(item.file_name)) {\n      return;\n    }\n\n    e.preventDefault();\n    this.props.showImagePopup(item);\n  };\n\n  toggleItemSelected = (e) => {\n    this.props.toggleItemSelected(this.props.item, e.target.checked);\n  };\n\n  render() {\n    const { item, isDesktop } = this.props;\n    const { isIconShown } = this.state;\n\n    let toolTipID = '';\n    let tagTitle = '';\n    if (item.file_tags && item.file_tags.length > 0) {\n      toolTipID = MD5(item.file_name).slice(0, 7);\n      tagTitle = item.file_tags.map(item => item.tag_name).join(' ');\n    }\n\n    if (item.is_dir) {\n      return isDesktop ? (\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n          {showDownloadIcon &&\n            <td className=\"text-center\">\n              <input type=\"checkbox\" checked={item.isSelected} onChange={this.toggleItemSelected} />\n            </td>\n          }\n          <td className=\"text-center\"><img src={Utils.getFolderIconUrl()} alt=\"\" width=\"24\" /></td>\n          <td>\n            <a href={`?p=${encodeURIComponent(item.folder_path.substr(0, item.folder_path.length - 1))}&mode=${mode}`}>{item.folder_name}</a>\n          </td>\n          <td></td>\n          <td></td>\n          <td title={moment(item.last_modified).format('llll')}>{moment(item.last_modified).fromNow()}</td>\n          <td>\n            {showDownloadIcon &&\n              <a role=\"button\" className={`action-icon sf2-icon-download${isIconShown ? '' : ' invisible'}`} href=\"#\" onClick={this.zipDownloadFolder} title={gettext('Download')} aria-label={gettext('Download')}>\n              </a>\n            }\n          </td>\n        </tr>\n      ) : (\n        <tr>\n          <td className=\"text-center\"><img src={Utils.getFolderIconUrl()} alt=\"\" width=\"24\" /></td>\n          <td>\n            <a href={`?p=${encodeURIComponent(item.folder_path.substr(0, item.folder_path.length - 1))}&mode=${mode}`}>{item.folder_name}</a>\n            <br />\n            <span className=\"item-meta-info\">{moment(item.last_modified).fromNow()}</span>\n          </td>\n          <td>\n            {showDownloadIcon &&\n              <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n                <DropdownToggle\n                  tag=\"i\"\n                  className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                  title={gettext('More operations')}\n                  aria-label={gettext('More operations')}\n                  data-toggle=\"dropdown\"\n                  aria-expanded={this.state.isOpMenuOpen}\n                />\n                <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                  <div className=\"mobile-operation-menu-bg-layer\"></div>\n                  <div className=\"mobile-operation-menu\">\n                    <DropdownItem className=\"mobile-menu-item\" onClick={this.zipDownloadFolder}>{gettext('Download')}</DropdownItem>\n                  </div>\n                </div>\n              </Dropdown>\n            }\n          </td>\n        </tr>\n      );\n    } else {\n      const fileURL = `${siteRoot}d/${token}/files/?p=${encodeURIComponent(item.file_path)}`;\n      const thumbnailURL = item.encoded_thumbnail_src ? `${siteRoot}${item.encoded_thumbnail_src}` : '';\n      return isDesktop ? (\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n          {showDownloadIcon &&\n            <td className=\"text-center\">\n              <input type=\"checkbox\" checked={item.isSelected} onChange={this.toggleItemSelected} />\n            </td>\n          }\n          <td className=\"text-center\">\n            {thumbnailURL ?\n              <img className=\"thumbnail\" src={thumbnailURL} alt=\"\" /> :\n              <img src={Utils.getFileIconUrl(item.file_name)} alt=\"\" width=\"24\" />\n            }\n          </td>\n          <td>\n            <a href={fileURL} onClick={this.handleFileClick}>{item.file_name}</a>\n          </td>\n          <td className=\"tag-list-title\">\n            {(item.file_tags && item.file_tags.length > 0) && (\n              <Fragment>\n                <div id={`tag-list-title-${toolTipID}`} className=\"dirent-item tag-list tag-list-stacked\">\n                  {item.file_tags.map((fileTag, index) => {\n                    let length = item.file_tags.length;\n                    return (\n                      <span className=\"file-tag\" key={fileTag.file_tag_id} style={{ zIndex: length - index, backgroundColor: fileTag.tag_color }}></span>\n                    );\n                  })}\n                </div>\n                <UncontrolledTooltip target={`tag-list-title-${toolTipID}`} placement=\"bottom\">\n                  {tagTitle}\n                </UncontrolledTooltip>\n              </Fragment>\n            )}\n          </td>\n          <td>{Utils.bytesToSize(item.size)}</td>\n          <td title={moment(item.last_modified).format('llll')}>{moment(item.last_modified).fromNow()}</td>\n          <td>\n            {showDownloadIcon &&\n              <a className={`action-icon sf2-icon-download${isIconShown ? '' : ' invisible'}`} href={`${fileURL}&dl=1`} title={gettext('Download')} aria-label={gettext('Download')}></a>\n            }\n          </td>\n        </tr>\n      ) : (\n        <tr>\n          <td className=\"text-center\">\n            {thumbnailURL ?\n              <img className=\"thumbnail\" src={thumbnailURL} alt=\"\" /> :\n              <img src={Utils.getFileIconUrl(item.file_name)} alt=\"\" width=\"24\" />\n            }\n          </td>\n          <td>\n            <a href={fileURL} onClick={this.handleFileClick}>{item.file_name}</a>\n            <br />\n            <span className=\"item-meta-info\">{Utils.bytesToSize(item.size)}</span>\n            <span className=\"item-meta-info\">{moment(item.last_modified).fromNow()}</span>\n          </td>\n          <td>\n            {showDownloadIcon &&\n              <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n                <DropdownToggle\n                  tag=\"i\"\n                  className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                  title={gettext('More operations')}\n                  aria-label={gettext('More operations')}\n                  data-toggle=\"dropdown\"\n                  aria-expanded={this.state.isOpMenuOpen}\n                />\n                <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                  <div className=\"mobile-operation-menu-bg-layer\"></div>\n                  <div className=\"mobile-operation-menu\">\n                    <DropdownItem className=\"mobile-menu-item\" tag=\"a\" href={`${fileURL}&dl=1`}>{gettext('Download')}</DropdownItem>\n                  </div>\n                </div>\n              </Dropdown>\n            }\n          </td>\n        </tr>\n      );\n    }\n  }\n}\n\nItem.propTypes = {\n  isDesktop: PropTypes.bool,\n  item: PropTypes.object,\n  sortItems: PropTypes.func,\n  sortBy: PropTypes.string,\n  sortOrder: PropTypes.string,\n  toggleAllSelected: PropTypes.func,\n  toggleItemSelected: PropTypes.func,\n  zipDownloadFolder: PropTypes.func,\n  showImagePopup: PropTypes.func,\n};\n\nclass GridItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({ isIconShown: true });\n  };\n\n  handleMouseOut = () => {\n    this.setState({ isIconShown: false });\n  };\n\n  zipDownloadFolder = (e) => {\n    e.preventDefault();\n    this.props.zipDownloadFolder.bind(this, this.props.item.folder_path)();\n  };\n\n  handleFileClick = (e) => {\n    const item = this.props.item;\n    if (!Utils.imageCheck(item.file_name)) {\n      return;\n    }\n\n    e.preventDefault();\n    this.props.showImagePopup(item);\n  };\n\n  render() {\n    const item = this.props.item;\n    const { isIconShown } = this.state;\n\n    if (item.is_dir) {\n      const folderURL = `?p=${encodeURIComponent(item.folder_path.substr(0, item.folder_path.length - 1))}&mode=${mode}`;\n      return (\n        <li className=\"grid-item\" onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n          <a href={folderURL} className=\"grid-file-img-link d-block\">\n            <img src={Utils.getFolderIconUrl(false, 192)} alt=\"\" width=\"96\" height=\"96\" />\n          </a>\n          <a href={folderURL} className=\"grid-file-name grid-file-name-link\">{item.folder_name}</a>\n          {showDownloadIcon &&\n            <a role=\"button\" className={`action-icon sf2-icon-download${isIconShown ? '' : ' invisible'}`} href=\"#\" onClick={this.zipDownloadFolder} title={gettext('Download')} aria-label={gettext('Download')}>\n            </a>\n          }\n        </li>\n      );\n    } else {\n      const fileURL = `${siteRoot}d/${token}/files/?p=${encodeURIComponent(item.file_path)}`;\n      const thumbnailURL = item.encoded_thumbnail_src ? `${siteRoot}${item.encoded_thumbnail_src}` : '';\n      return (\n        <li className=\"grid-item\" onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n          <a href={fileURL} className=\"grid-file-img-link d-block\" onClick={this.handleFileClick}>\n            {thumbnailURL ?\n              <img className=\"thumbnail\" src={thumbnailURL} alt=\"\" /> :\n              <img src={Utils.getFileIconUrl(item.file_name, 192)} alt=\"\" width=\"96\" height=\"96\" />\n            }\n          </a>\n          <a href={fileURL} className=\"grid-file-name grid-file-name-link\" onClick={this.handleFileClick}>{item.file_name}</a>\n          {showDownloadIcon &&\n            <a className={`action-icon sf2-icon-download${isIconShown ? '' : ' invisible'}`} href={`${fileURL}&dl=1`} title={gettext('Download')} aria-label={gettext('Download')}>\n            </a>\n          }\n        </li>\n      );\n    }\n  }\n}\n\nGridItem.propTypes = {\n  item: PropTypes.object,\n  zipDownloadFolder: PropTypes.func,\n  showImagePopup: PropTypes.func,\n};\n\nReactDom.render(<SharedDirView />, document.getElementById('wrapper'));\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/wiki.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/file-history.js",["3692"],[],"import React from 'react';\nimport ReactDom from 'react-dom';\nimport axios from 'axios';\nimport { fileName, historyRepoID } from './utils/constants';\nimport SidePanel from './pages/file-history/side-panel';\nimport MainPanel from './pages/file-history/main-panel';\nimport { seafileAPI } from './utils/seafile-api';\n\nimport './css/layout.css';\nimport './css/file-history.css';\n\nclass FileHistory extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      renderingContent: true,\n      newMarkdownContent: '',\n      oldMarkdownContent: ''\n    };\n  }\n\n  setDiffContent = (newMarkdownContent, oldMarkdownContent)=> {\n    this.setState({\n      renderingContent: false,\n      newMarkdownContent: newMarkdownContent,\n      oldMarkdownContent: oldMarkdownContent,\n    });\n  };\n\n\n  onHistoryItemClick = (item, preItem)=> {\n    this.setState({renderingContent: true});\n    seafileAPI.getFileRevision(historyRepoID, item.commit_id, item.path).then((res) => {\n      axios.all([\n        seafileAPI.getFileContent(res.data),\n      ]).then(axios.spread((content1) => {\n        this.setDiffContent(content1.data, '');\n      }));\n    });\n  };\n\n  onBackClick = (event) => {\n    event.preventDefault();\n    window.history.back();\n  };\n\n  render() {\n    return (\n      <div className=\"history-content flex-fill d-flex h-100\">\n        <div className=\"flex-fill d-flex flex-column text-truncate\">\n          <div className=\"history-header file-history-header flex-shrink-0\">\n            <div className=\"title d-flex mw-100\">\n              <a href=\"#\" className=\"go-back\" title=\"Back\" onClick={this.onBackClick}>\n                <span className=\"fas fa-chevron-left\"></span>\n              </a>\n              <span className=\"name text-truncate\" title={fileName}>{fileName}</span>\n            </div>\n          </div>\n          <MainPanel\n            newMarkdownContent={this.state.newMarkdownContent}\n            oldMarkdownContent={this.state.oldMarkdownContent}\n            renderingContent={this.state.renderingContent}\n          />\n        </div>\n        <SidePanel onItemClick={this.onHistoryItemClick}/>\n      </div>\n    );\n  }\n}\n\nReactDom.render(<FileHistory />, document.getElementById('wrapper'));\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/file-history-old.js",["3693"],[],"import React, { Fragment } from 'react';\nimport ReactDom from 'react-dom';\nimport { Button } from 'reactstrap';\nimport { Utils } from './utils/utils';\nimport { seafileAPI } from './utils/seafile-api';\nimport { gettext, PER_PAGE, filePath, fileName, historyRepoID, useNewAPI, canDownload, canCompare } from './utils/constants';\nimport editUtilities from './utils/editor-utilities';\nimport Loading from './components/loading';\nimport Logo from './components/logo';\nimport CommonToolbar from './components/toolbar/common-toolbar';\nimport HistoryItem from './pages/file-history-old/history-item';\n\nimport './css/layout.css';\nimport './css/toolbar.css';\nimport './css/search.css';\nimport './css/file-history-old.css';\n\nclass FileHistory extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      historyList: [],\n      currentPage: 1,\n      hasMore: false,\n      nextCommit: undefined,\n      filePath: '',\n      oldFilePath: '',\n      isLoading: true,\n      isReloadingData: false,\n    };\n  }\n\n  componentDidMount() {\n    if (useNewAPI) {\n      this.listNewHistoryRecords(filePath, PER_PAGE);\n    } else {\n      this.listOldHistoryRecords(historyRepoID, filePath);\n    }\n  }\n\n  listNewHistoryRecords = (filePath, PER_PAGE) => {\n    editUtilities.listFileHistoryRecords(filePath, 1, PER_PAGE).then(res => {\n      let historyData = res.data;\n      if (!historyData) {\n        this.setState({isLoading: false});\n        throw Error('There is an error in server.');\n      }\n      this.initNewRecords(res.data);\n    });\n  };\n\n  listOldHistoryRecords = (repoID, filePath) => {\n    seafileAPI.listOldFileHistoryRecords(repoID, filePath).then((res) => {\n      let historyData = res.data;\n      if (!historyData) {\n        this.setState({isLoading: false});\n        throw Error('There is an error in server.');\n      }\n      this.initOldRecords(res.data);\n    });\n  };\n\n  initNewRecords(result) {\n    if (result.total_count < 5) {\n      if (result.data.length) {\n        let commitID = result.data[result.data.length-1].commit_id;\n        let path = result.data[result.data.length-1].path;\n        let oldPath = result.data[result.data.length-1].old_path;\n        path = oldPath ? oldPath : path;\n        seafileAPI.listOldFileHistoryRecords(historyRepoID, path, commitID).then((res) => {\n          if (!res.data) {\n            this.setState({isLoading: false});\n            throw Error('There is an error in server.');\n          }\n          this.setState({\n            historyList: result.data.concat(res.data.data.slice(1, res.data.data.length)),\n            isLoading: false,\n          });\n        });\n      } else {\n        seafileAPI.listOldFileHistoryRecords(historyRepoID, filePath).then((res) => {\n          if (!res.data) {\n            this.setState({isLoading: false});\n            throw Error('There is an error in server.');\n          }\n          this.setState({\n            historyList: res.data.data,\n            isLoading: false,\n          });\n        });\n      }\n    } else {\n      this.setState({\n        historyList: result.data,\n        currentPage: result.page,\n        hasMore: result.total_count > (PER_PAGE * this.state.currentPage),\n        isLoading: false,\n      });\n    }\n  }\n\n  initOldRecords(result) {\n    if (result.data.length) {\n      this.setState({\n        historyList: result.data,\n        nextCommit: result.next_start_commit,\n        filePath: result.data[result.data.length-1].path,\n        oldFilePath: result.data[result.data.length-1].rev_renamed_old_path,\n        isLoading: false,\n      });\n    } else {\n      this.setState({nextCommit: result.next_start_commit,});\n      if (this.state.nextCommit) {\n        seafileAPI.listOldFileHistoryRecords(historyRepoID, filePath, this.state.nextCommit).then((res) => {\n          this.initOldRecords(res.data);\n        });\n      } else {\n        this.setState({isLoading: false});\n      }\n    }\n  }\n\n  onScrollHandler = (event) => {\n    const clientHeight = event.target.clientHeight;\n    const scrollHeight = event.target.scrollHeight;\n    const scrollTop = event.target.scrollTop;\n    const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n    let hasMore = this.state.hasMore;\n    if (isBottom && hasMore) {\n      this.reloadMore();\n    }\n  };\n\n  reloadMore = () => {\n    if (!this.state.isReloadingData) {\n      if (useNewAPI) {\n        let currentPage = this.state.currentPage + 1;\n        this.setState({\n          currentPage: currentPage,\n          isReloadingData: true,\n        });\n        editUtilities.listFileHistoryRecords(filePath, currentPage, PER_PAGE).then(res => {\n          this.updateNewRecords(res.data);\n        });\n      } else {\n        let commitID = this.state.nextCommit;\n        let filePath = this.state.filePath;\n        let oldFilePath = this.state.oldFilePath;\n        this.setState({isReloadingData: true});\n        if (oldFilePath) {\n          seafileAPI.listOldFileHistoryRecords(historyRepoID, oldFilePath, commitID).then((res) => {\n            this.updateOldRecords(res.data, oldFilePath);\n          });\n        } else {\n          seafileAPI.listOldFileHistoryRecords(historyRepoID, filePath, commitID).then((res) => {\n            this.updateOldRecords(res.data, filePath);\n          });\n        }\n      }\n    }\n  };\n\n  updateNewRecords(result) {\n    this.setState({\n      historyList: [...this.state.historyList, ...result.data],\n      currentPage: result.page,\n      hasMore: result.total_count > (PER_PAGE * this.state.currentPage),\n      isReloadingData: false,\n    });\n  }\n\n  updateOldRecords(result, filePath) {\n    if (result.data.length) {\n      this.setState({\n        historyList: [...this.state.historyList, ...result.data],\n        nextCommit: result.next_start_commit,\n        filePath: result.data[result.data.length-1].path,\n        oldFilePath: result.data[result.data.length-1].rev_renamed_old_path,\n        isReloadingData: false,\n      });\n    } else {\n      this.setState({nextCommit: result.next_start_commit,});\n      if (this.state.nextCommit) {\n        seafileAPI.listOldFileHistoryRecords(historyRepoID, filePath, this.state.nextCommit).then((res) => {\n          this.updateOldRecords(res.data, filePath);\n        });\n      }\n    }\n  }\n\n  onItemRestore = (item) => {\n    let commitId = item.commit_id;\n    let filePath = item.path;\n    editUtilities.revertFile(filePath, commitId).then(res => {\n      if (res.data.success) {\n        this.setState({isLoading: true});\n        this.refershFileList();\n      }\n    });\n  };\n\n  refershFileList() {\n    if (useNewAPI) {\n      editUtilities.listFileHistoryRecords(filePath, 1, PER_PAGE).then((res) => {\n        this.initNewRecords(res.data);\n      });\n    } else {\n      seafileAPI.listOldFileHistoryRecords(historyRepoID, filePath).then((res) => {\n        this.initOldRecords(res.data);\n      });\n    }\n  }\n\n  onSearchedClick = (searchedItem) => {\n    Utils.handleSearchedItemClick(searchedItem);\n  };\n\n  goBack = (e) => {\n    e.preventDefault();\n    window.history.back();\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div id=\"header\" className=\"old-history-header\">\n          <Logo showCloseSidePanelIcon={false} />\n          <CommonToolbar onSearchedClick={this.onSearchedClick} />\n        </div>\n        <div id=\"main\" onScroll={this.onScrollHandler}>\n          <div className=\"old-history-main\">\n            <Fragment>\n              <a href=\"#\" className=\"go-back\" title=\"Back\" onClick={this.goBack}>\n                <span className=\"fas fa-chevron-left\"></span>\n              </a>\n              <h2><span className=\"file-name\">{fileName}</span>{' '}{gettext('History Versions')}</h2>\n            </Fragment>\n            <Fragment>\n              <table className=\"commit-list\">\n                <thead>\n                  <tr>\n                    <th width=\"40%\" >{gettext('Time')}</th>\n                    <th width=\"30%\" >{gettext('Modifier')}</th>\n                    <th width=\"25%\" >{gettext('Size')}</th>\n                    <th width=\"5%\" ></th>\n                  </tr>\n                </thead>\n                {!this.state.isLoading &&\n                  <tbody>\n                    {this.state.historyList.map((item, index) => {\n                      return (\n                        <HistoryItem\n                          key={index}\n                          item={item}\n                          index={index}\n                          canDownload={canDownload}\n                          canCompare={canCompare}\n                          onItemRestore={this.onItemRestore}\n                        />\n                      );\n                    })}\n                  </tbody>\n                }\n              </table>\n              {(this.state.isReloadingData || this.state.isLoading) && <Loading />}\n              {this.state.nextCommit && !this.state.isLoading && !this.state.isReloadingData &&\n                <Button className=\"get-more-btn\" onClick={this.reloadMore}>{gettext('More')}</Button>\n              }\n            </Fragment>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nReactDom.render(<FileHistory />, document.getElementById('wrapper'));\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/shared-file-view-markdown.js",["3694"],[],"import React from 'react';\nimport ReactDom from 'react-dom';\nimport { MarkdownViewer } from '@seafile/seafile-editor';\nimport { seafileAPI } from './utils/seafile-api';\nimport { Utils } from './utils/utils';\nimport { serviceURL, mediaUrl } from './utils/constants';\nimport SharedFileView from './components/shared-file-view/shared-file-view';\nimport SharedFileViewTip from './components/shared-file-view/shared-file-view-tip';\nimport Loading from './components/loading';\nimport toaster from './components/toast';\n\nconst { repoID, sharedToken, rawPath, err } = window.shared.pageOptions;\n\nclass SharedFileViewMarkdown extends React.Component {\n  render() {\n    return <SharedFileView content={<FileContent />} fileType=\"md\" />;\n  }\n}\n\nclass FileContent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      markdownContent: '',\n      loading: !err\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getFileContent(rawPath).then((res) => {\n      this.setState({\n        markdownContent: res.data,\n        loading: false\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  changeImageURL = (innerNode) => {\n    if (innerNode.type == 'image') {\n      let imageUrl = innerNode.data.src;\n\n      const re = new RegExp(serviceURL + '/lib/' + repoID +'/file.*raw=1');\n\n      // different repo\n      if (!re.test(imageUrl)) {\n        return;\n      }\n      // get image path\n      let imagePath = imageUrl.substring(serviceURL.length);\n      let index = imagePath.indexOf('/file');\n      let index2 = imagePath.indexOf('?');\n      imagePath = imagePath.substring(index + 5, index2);\n      // change image url\n      // the image path has been encoded when inserting the image\n      innerNode.data.src = serviceURL + '/view-image-via-share-link/?token=' + sharedToken + '&path=' + imagePath;\n    }\n    return innerNode;\n  };\n\n  modifyValueBeforeRender = (value) => {\n    return Utils.changeMarkdownNodes(value, this.changeImageURL);\n  };\n\n  render() {\n    if (err) {\n      return <SharedFileViewTip />;\n    }\n\n    if (this.state.loading) {\n      return <Loading />;\n    }\n\n    return (\n      <div className=\"shared-file-view-body md-view\">\n        <MarkdownViewer\n          value={this.state.markdownContent}\n          isShowOutline={true}\n          mathJaxSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n          beforeRenderCallback={this.modifyValueBeforeRender}\n        />\n      </div>\n    );\n  }\n}\n\nReactDom.render(<SharedFileViewMarkdown />, document.getElementById('wrapper'));\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/shared-file-view-image.js",["3695","3696"],[],"import React from 'react';\nimport ReactDom from 'react-dom';\nimport SharedFileView from './components/shared-file-view/shared-file-view';\nimport SharedFileViewTip from './components/shared-file-view/shared-file-view-tip';\nimport { gettext } from './utils/constants';\n\nimport './css/image-file-view.css';\n\nconst { fileName, rawPath, err, prevImgPath, nextImgPath } = window.shared.pageOptions;\n\nconst prevImgURL = `?p=${encodeURIComponent(prevImgPath)}`;\nconst nextImgURL = `?p=${encodeURIComponent(nextImgPath)}`;\n\nclass SharedFileViewImage extends React.Component {\n  render() {\n    return <SharedFileView content={<FileContent />} />;\n  }\n}\n\nclass FileContent extends React.Component {\n\n  componentDidMount() {\n    document.addEventListener('keydown', (e) => {\n      if (prevImgPath && e.keyCode == 37) { // press '<-'\n        location.href = prevImgURL;\n      }\n      if (nextImgPath && e.keyCode == 39) { // press '->'\n        location.href = nextImgURL;\n      }\n    });\n  }\n\n  render() {\n    if (err) {\n      return <SharedFileViewTip />;\n    }\n\n    return (\n      <div className=\"shared-file-view-body d-flex text-center\">\n        <div className=\"image-file-view flex-1\">\n          {prevImgPath && (\n            <a href={prevImgURL} id=\"img-prev\" title={gettext('you can also press  ')}><span className=\"fas fa-chevron-left\"></span></a>\n          )}\n          {nextImgPath && (\n            <a href={nextImgURL} id=\"img-next\" title={gettext('you can also press ')}><span className=\"fas fa-chevron-right\"></span></a>\n          )}\n          <img src={rawPath} alt={fileName} id=\"image-view\" />\n        </div>\n      </div>\n    );\n  }\n}\n\nReactDom.render(<SharedFileViewImage />, document.getElementById('wrapper'));\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/shared-file-view-text.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/draft.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/upload-link/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/shared-file-view-document.js",["3697"],[],"import React from 'react';\nimport ReactDom from 'react-dom';\nimport { seafileAPI } from './utils/seafile-api';\nimport { gettext, mediaUrl} from './utils/constants';\nimport SharedFileView from './components/shared-file-view/shared-file-view';\nimport SharedFileViewTip from './components/shared-file-view/shared-file-view-tip';\nimport Loading from './components/loading';\nimport PDFViewer from './components/pdf-viewer';\n\nimport './css/pdf-file-view.css';\n\nconst {\n  repoID, filePath, err,\n  commitID, fileType, sharedToken\n} = window.shared.pageOptions;\n\nclass SharedFileViewDocument extends React.Component {\n  render() {\n    return <SharedFileView content={<FileContent />} />;\n  }\n}\n\nclass FileContent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: !err,\n      errorMsg: ''\n    };\n  }\n\n  componentDidMount() {\n    if (err) {\n      return;\n    }\n\n    let queryStatus = () => {\n      seafileAPI.queryOfficeFileConvertStatus(repoID, commitID, filePath, fileType.toLowerCase(), sharedToken).then((res) => {\n        const convertStatus = res.data['status'];\n        switch (convertStatus) {\n          case 'PROCESSING':\n            this.setState({\n              isLoading: true\n            });\n            setTimeout(queryStatus, 2000);\n            break;\n          case 'ERROR':\n            this.setState({\n              isLoading: false,\n              errorMsg: gettext('Document convertion failed.')\n            });\n            break;\n          case 'DONE':\n            this.setState({\n              isLoading: false,\n              errorMsg: ''\n            });\n            // eslint-disable-next-line\n            let scriptNode = document.createElement('script');\n            scriptNode.type = 'text/javascript';\n            scriptNode.src = `${mediaUrl}js/pdf/web/viewer.js`;\n            document.body.append(scriptNode);\n        }\n      }).catch((error) => {\n        if (error.response) {\n          this.setState({\n            isLoading: false,\n            errorMsg: gettext('Document convertion failed.')\n          });\n        } else {\n          this.setState({\n            isLoading: false,\n            errorMsg: gettext('Please check the network.')\n          });\n        }\n      });\n    };\n\n    queryStatus();\n  }\n\n  render() {\n    const { isLoading, errorMsg } = this.state;\n\n    if (err) {\n      return <SharedFileViewTip />;\n    }\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <SharedFileViewTip errorMsg={errorMsg} />;\n    }\n\n    return (\n      <div className=\"shared-file-view-body pdf-file-view\">\n        <PDFViewer />\n      </div>\n    );\n  }\n}\n\nReactDom.render(<SharedFileViewDocument />, document.getElementById('wrapper'));\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/shared-file-view-audio.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/shared-file-view-unknown.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/app.js",["3698"],[],"import React, { Component } from 'react';\nimport ReactDom from 'react-dom';\nimport { Router, navigate } from '@gatsbyjs/reach-router';\nimport MediaQuery from 'react-responsive';\nimport { Modal } from 'reactstrap';\nimport { siteRoot, canAddRepo } from './utils/constants';\nimport { Utils } from './utils/utils';\nimport { isAuthenticated } from './utils/seafile-api';\nimport LoginPage from './pages/login';\nimport SystemNotification from './components/system-notification';\nimport SidePanel from './components/side-panel';\nimport MainPanel from './components/main-panel';\nimport FilesActivities from './pages/dashboard/files-activities';\nimport MyFileActivities from './pages/dashboard/my-file-activities';\nimport Starred from './pages/starred/starred';\nimport LinkedDevices from './pages/linked-devices/linked-devices';\nimport ShareAdminLibraries from './pages/share-admin/libraries';\nimport ShareAdminFolders from './pages/share-admin/folders';\nimport ShareAdminShareLinks from './pages/share-admin/share-links';\nimport ShareAdminUploadLinks from './pages/share-admin/upload-links';\nimport SharedLibraries from './pages/shared-libs/shared-libs';\nimport ShareWithOCM from './pages/share-with-ocm/shared-with-ocm';\nimport OCMViaWebdav from './pages/ocm-via-webdav/ocm-via-webdav';\nimport OCMRepoDir from './pages/share-with-ocm/remote-dir-view';\nimport MyLibraries from './pages/my-libs/my-libs';\nimport MyLibDeleted from './pages/my-libs/my-libs-deleted';\nimport PublicSharedView from './pages/shared-with-all/public-shared-view';\nimport LibContentView from './pages/lib-content-view/lib-content-view';\nimport Group from './pages/groups/group-view';\nimport Groups from './pages/groups/groups-view';\nimport InvitationsView from './pages/invitations/invitations-view';\nimport Wikis from './pages/wikis/wikis';\nimport MainContentWrapper from './components/main-content-wrapper';\n\nimport './css/layout.css';\nimport './css/toolbar.css';\nimport './css/search.css';\n\nimport './services/css.css';\n\nconst FilesActivitiesWrapper = MainContentWrapper(FilesActivities);\nconst MyFileActivitiesWrapper = MainContentWrapper(MyFileActivities);\nconst StarredWrapper = MainContentWrapper(Starred);\nconst LinkedDevicesWrapper = MainContentWrapper(LinkedDevices);\nconst SharedLibrariesWrapper = MainContentWrapper(SharedLibraries);\nconst SharedWithOCMWrapper = MainContentWrapper(ShareWithOCM);\nconst OCMViaWebdavWrapper = MainContentWrapper(OCMViaWebdav);\nconst ShareAdminLibrariesWrapper = MainContentWrapper(ShareAdminLibraries);\nconst ShareAdminFoldersWrapper = MainContentWrapper(ShareAdminFolders);\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: false,\n      isSidePanelClosed: false,\n      currentTab: '/',\n      pathPrefix: [],\n      isCheckingAuth: true,\n      isLoggedIn: false,\n    };\n    this.dirViewPanels = ['my-libs', 'shared-libs', 'org']; // and group\n    window.onpopstate = this.onpopstate;\n  }\n\n  onpopstate = (event) => {\n    if (event.state && event.state.currentTab && event.state.pathPrefix) {\n      let { currentTab, pathPrefix } = event.state;\n      this.setState({ currentTab, pathPrefix });\n    }\n  };\n\n  UNSAFE_componentWillMount() {\n    if (!Utils.isDesktop()) {\n      this.setState({\n        isSidePanelClosed: true\n      });\n    }\n  }\n\n  navigateClientUrlToLib = () => {\n    if (window.location.hash && window.location.hash.indexOf('common/lib') != -1) {\n      let splitUrlArray = window.location.hash.split('/');\n      let repoID = splitUrlArray[splitUrlArray.length - 2];\n      let url = siteRoot + 'library/' + repoID + '/';\n      navigate(url, { repalce: true });\n    }\n  };\n\n  componentDidMount() {\n    // Check authentication status\n    const loggedIn = isAuthenticated();\n    const isLoginPage = window.location.pathname === '/login/' || window.location.pathname === '/login';\n\n    if (!loggedIn && !isLoginPage) {\n      // Redirect to login if not authenticated\n      window.location.href = '/login/';\n      return;\n    }\n\n    if (loggedIn && isLoginPage) {\n      // Redirect to home if already authenticated and on login page\n      window.location.href = '/';\n      return;\n    }\n\n    this.setState({\n      isCheckingAuth: false,\n      isLoggedIn: loggedIn,\n    });\n\n    if (!loggedIn) {\n      return; // Don't initialize app state for login page\n    }\n\n    // url from client  e.g. http://127.0.0.1:8000/#common/lib/34e7fb92-e91d-499d-bcde-c30ea8af9828/\n    // navigate to library page http://127.0.0.1:8000/library/34e7fb92-e91d-499d-bcde-c30ea8af9828/\n    this.navigateClientUrlToLib();\n\n    // TODO: need refactor later\n    let href = window.location.href.split('/');\n    this.setState({ currentTab: href[href.length - 2] });\n  }\n\n  onCloseSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  };\n\n  onShowSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  };\n\n  onSearchedClick = (selectedItem) => {\n    if (selectedItem.is_dir === true) {\n      this.setState({ currentTab: '', pathPrefix: [] });\n      let url = siteRoot + 'library/' + selectedItem.repo_id + '/' + selectedItem.repo_name + selectedItem.path;\n      navigate(url, { repalce: true });\n    } else {\n      let url = siteRoot + 'lib/' + selectedItem.repo_id + '/file' + Utils.encodePath(selectedItem.path);\n      let isWeChat = Utils.isWeChat();\n      if (!isWeChat) {\n        let newWindow = window.open('about:blank');\n        newWindow.location.href = url;\n      } else {\n        location.href = url;\n      }\n    }\n  };\n\n  onGroupChanged = (groupID) => {\n    setTimeout(function () {\n      let url;\n      if (groupID) {\n        url = siteRoot + 'group/' + groupID + '/';\n      }\n      else {\n        url = siteRoot + 'groups/';\n      }\n      window.location = url.toString();\n    }, 1);\n  };\n\n  tabItemClick = (tabName, groupID) => {\n    let pathPrefix = [];\n    if (groupID || this.dirViewPanels.indexOf(tabName) > -1) {\n      pathPrefix = this.generatorPrefix(tabName, groupID);\n    }\n    this.setState({\n      currentTab: tabName,\n      pathPrefix: pathPrefix\n    }, () => {\n      let { currentTab, pathPrefix } = this.state;\n      window.history.replaceState({ currentTab: currentTab, pathPrefix: pathPrefix }, null);\n    });\n    if (!Utils.isDesktop() && !this.state.isSidePanelClosed) {\n      this.setState({ isSidePanelClosed: true });\n    }\n  };\n\n  generatorPrefix = (tabName, groupID) => {\n    let pathPrefix = [];\n    if (groupID) {\n      let navTab1 = {\n        url: siteRoot + 'groups/',\n        showName: 'Groups',\n        name: 'groups',\n        id: null,\n      };\n      let navTab2 = {\n        url: siteRoot + 'group/' + groupID + '/',\n        showName: tabName,\n        name: tabName,\n        id: groupID,\n      };\n      pathPrefix.push(navTab1);\n      pathPrefix.push(navTab2);\n    } else {\n      let navTab = {\n        url: siteRoot + tabName + '/',\n        showName: this.getTabShowName(tabName),\n        name: tabName,\n        id: null,\n      };\n      pathPrefix.push(navTab);\n    }\n    return pathPrefix;\n  };\n\n  getTabShowName = (tabName) => {\n    if (tabName === 'my-libs') {\n      return 'Libraries';\n    }\n    if (tabName === 'shared-libs') {\n      return 'Shared with me';\n    }\n    if (tabName === 'org') {\n      return 'Shared with all';\n    }\n  };\n\n  toggleSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  };\n\n  render() {\n    let { currentTab, isSidePanelClosed, isCheckingAuth, isLoggedIn } = this.state;\n\n    // Show loading while checking auth\n    if (isCheckingAuth) {\n      return (\n        <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100vh' }}>\n          <div>Loading...</div>\n        </div>\n      );\n    }\n\n    // Show login page if not authenticated\n    if (!isLoggedIn) {\n      return <LoginPage />;\n    }\n\n    const home = canAddRepo ?\n      <MyLibraries path={siteRoot} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} /> :\n      <SharedLibrariesWrapper path={siteRoot} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />;\n\n    return (\n      <React.Fragment>\n        <SystemNotification />\n        <div id=\"main\">\n          <SidePanel isSidePanelClosed={this.state.isSidePanelClosed} onCloseSidePanel={this.onCloseSidePanel} currentTab={currentTab} tabItemClick={this.tabItemClick} />\n          <MainPanel>\n            <Router className=\"reach-router\">\n              {home}\n              <FilesActivitiesWrapper path={siteRoot + 'dashboard'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <MyFileActivitiesWrapper path={siteRoot + 'my-activities'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <StarredWrapper path={siteRoot + 'starred'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <LinkedDevicesWrapper path={siteRoot + 'linked-devices'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminLibrariesWrapper path={siteRoot + 'share-admin-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminFoldersWrapper path={siteRoot + 'share-admin-folders'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminShareLinks path={siteRoot + 'share-admin-share-links'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminUploadLinks path={siteRoot + 'share-admin-upload-links'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <SharedLibrariesWrapper path={siteRoot + 'shared-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <SharedWithOCMWrapper path={siteRoot + 'shared-with-ocm'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <OCMViaWebdavWrapper path={siteRoot + 'ocm-via-webdav'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <MyLibraries path={siteRoot + 'my-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <MyLibDeleted path={siteRoot + 'my-libs/deleted/'} onSearchedClick={this.onSearchedClick} />\n              <LibContentView path={siteRoot + 'library/:repoID/*'} pathPrefix={this.state.pathPrefix} onMenuClick={this.onShowSidePanel} onTabNavClick={this.tabItemClick} />\n              <OCMRepoDir path={siteRoot + 'remote-library/:providerID/:repoID/*'} pathPrefix={this.state.pathPrefix} onMenuClick={this.onShowSidePanel} onTabNavClick={this.tabItemClick} />\n              <Groups path={siteRoot + 'groups'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <Group\n                path={siteRoot + 'group/:groupID'}\n                onShowSidePanel={this.onShowSidePanel}\n                onSearchedClick={this.onSearchedClick}\n                onTabNavClick={this.tabItemClick}\n                onGroupChanged={this.onGroupChanged}\n              />\n              <Wikis path={siteRoot + 'published'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <PublicSharedView path={siteRoot + 'org/'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} onTabNavClick={this.tabItemClick} />\n              <InvitationsView path={siteRoot + 'invitations/'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n            </Router>\n          </MainPanel>\n          <MediaQuery query=\"(max-width: 767.8px)\">\n            <Modal zIndex=\"1030\" isOpen={!isSidePanelClosed} toggle={this.toggleSidePanel} contentClassName=\"d-none\"></Modal>\n          </MediaQuery>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nReactDom.render(<App />, document.getElementById('wrapper'));\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/shared-file-view-pdf.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/shared-file-view-svg.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/shared-file-view-spreadsheet.js",["3699"],[],"import React from 'react';\nimport ReactDom from 'react-dom';\nimport { seafileAPI } from './utils/seafile-api';\nimport { siteRoot, gettext } from './utils/constants';\nimport SharedFileView from './components/shared-file-view/shared-file-view';\nimport SharedFileViewTip from './components/shared-file-view/shared-file-view-tip';\nimport Loading from './components/loading';\n\nimport './css/spreadsheet-file-view.css';\n\nconst {\n  repoID, filePath, err,\n  commitID, fileType, fileName, sharedToken\n} = window.shared.pageOptions;\n\nclass SharedFileViewSpreadsheet extends React.Component {\n  render() {\n    return (\n      <SharedFileView content={<FileContent />} />\n    );\n  }\n}\n\nclass FileContent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: !err,\n      errorMsg: ''\n    };\n  }\n\n  componentDidMount() {\n    if (err) {\n      return;\n    }\n\n    let queryStatus = () => {\n      seafileAPI.queryOfficeFileConvertStatus(repoID, commitID, filePath, fileType.toLowerCase(), sharedToken).then((res) => {\n        const convertStatus = res.data['status'];\n        switch (convertStatus) {\n          case 'QUEUED':\n          case 'PROCESSING':\n            this.setState({\n              isLoading: true\n            });\n            setTimeout(queryStatus, 2000);\n            break;\n          case 'ERROR':\n            this.setState({\n              isLoading: false,\n              errorMsg: gettext('Document convertion failed.')\n            });\n            break;\n          case 'DONE':\n            this.setState({\n              isLoading: false,\n              errorMsg: ''\n            });\n        }\n      }).catch((error) => {\n        if (error.response) {\n          this.setState({\n            isLoading: false,\n            errorMsg: gettext('Document convertion failed.')\n          });\n        } else {\n          this.setState({\n            isLoading: false,\n            errorMsg: gettext('Please check the network.')\n          });\n        }\n      });\n    };\n\n    queryStatus();\n  }\n\n  setIframeHeight = (e) => {\n    const iframe = e.currentTarget;\n    iframe.height = iframe.contentDocument.body.scrollHeight;\n  };\n\n  render() {\n    const { isLoading, errorMsg } = this.state;\n\n    if (err) {\n      return <SharedFileViewTip />;\n    }\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <SharedFileViewTip errorMsg={errorMsg} />;\n    }\n\n    return (\n      <div className=\"shared-file-view-body spreadsheet-file-view\">\n        <iframe id=\"spreadsheet-container\" title={fileName} src={`${siteRoot}office-convert/static/${repoID}/${commitID}${encodeURIComponent(filePath)}/index.html?token=${sharedToken}`} onLoad={this.setIframeHeight}></iframe>\n      </div>\n    );\n  }\n}\n\nReactDom.render(<SharedFileViewSpreadsheet />, document.getElementById('wrapper'));\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/shared-file-view-sdoc.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/view-file-spreadsheet.js",["3700"],[],"import React from 'react';\nimport ReactDom from 'react-dom';\nimport { seafileAPI } from './utils/seafile-api';\nimport { siteRoot, gettext } from './utils/constants';\nimport FileView from './components/file-view/file-view';\nimport FileViewTip from './components/file-view/file-view-tip';\nimport Loading from './components/loading';\n\nimport './css/spreadsheet-file-view.css';\n\nconst {\n  repoID, filePath, err,\n  commitID, fileType, fileName\n} = window.app.pageOptions;\n\nclass ViewFileSpreadsheet extends React.Component {\n  render() {\n    return (\n      <FileView content={<FileContent />} />\n    );\n  }\n}\n\nclass FileContent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: !err,\n      errorMsg: ''\n    };\n  }\n\n  componentDidMount() {\n    if (err) {\n      return;\n    }\n\n    let queryStatus = () => {\n      seafileAPI.queryOfficeFileConvertStatus(repoID, commitID, filePath, fileType.toLowerCase()).then((res) => {\n        const convertStatus = res.data['status'];\n        switch (convertStatus) {\n          case 'QUEUED':\n          case 'PROCESSING':\n            this.setState({\n              isLoading: true\n            });\n            setTimeout(queryStatus, 2000);\n            break;\n          case 'ERROR':\n            this.setState({\n              isLoading: false,\n              errorMsg: gettext('Document convertion failed.')\n            });\n            break;\n          case 'DONE':\n            this.setState({\n              isLoading: false,\n              errorMsg: ''\n            });\n        }\n      }).catch((error) => {\n        if (error.response) {\n          this.setState({\n            isLoading: false,\n            errorMsg: gettext('Document convertion failed.')\n          });\n        } else {\n          this.setState({\n            isLoading: false,\n            errorMsg: gettext('Please check the network.')\n          });\n        }\n      });\n    };\n\n    queryStatus();\n  }\n\n  setIframeHeight = (e) => {\n    const iframe = e.currentTarget;\n    iframe.height = iframe.contentDocument.body.scrollHeight;\n  };\n\n  render() {\n    const { isLoading, errorMsg } = this.state;\n\n    if (err) {\n      return <FileViewTip />;\n    }\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <FileViewTip errorMsg={errorMsg} />;\n    }\n\n    return (\n      <div className=\"file-view-content flex-1 spreadsheet-file-view\">\n        <iframe id=\"spreadsheet-container\" title={fileName} src={`${siteRoot}office-convert/static/${repoID}/${commitID}${encodeURIComponent(filePath)}/index.html`} onLoad={this.setIframeHeight}></iframe>\n      </div>\n    );\n  }\n}\n\nReactDom.render(<ViewFileSpreadsheet />, document.getElementById('wrapper'));\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/shared-file-view-video.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/file-view.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/settings.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sdoc/sdoc-file-history/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/view-file-sdoc.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/repo-history.js",["3701","3702","3703","3704","3705","3706","3707","3708","3709","3710"],[],"import React from 'react';\nimport ReactDom from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Utils } from './utils/utils';\nimport { gettext, siteRoot, mediaUrl, logoPath, logoWidth, logoHeight, siteTitle } from './utils/constants';\nimport { seafileAPI } from './utils/seafile-api';\nimport Loading from './components/loading';\nimport Paginator from './components/paginator';\nimport ModalPortal from './components/modal-portal';\nimport CommonToolbar from './components/toolbar/common-toolbar';\nimport CommitDetails from './components/dialog/commit-details';\nimport UpdateRepoCommitLabels from './components/dialog/edit-repo-commit-labels';\n\nimport './css/toolbar.css';\nimport './css/search.css';\n\nimport './css/repo-history.css';\n\nconst {\n  repoID,\n  repoName,\n  userPerm,\n  showLabel\n} = window.app.pageOptions;\n\nclass RepoHistory extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      currentPage: 1,\n      perPage: 25,\n      hasNextPage: false,\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const {\n      currentPage, perPage\n    } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getItems(this.state.currentPage);\n    });\n  }\n\n  getItems = (page) => {\n    seafileAPI.getRepoHistory(repoID, page, this.state.perPage).then((res) => {\n      this.setState({\n        isLoading: false,\n        currentPage: page,\n        items: res.data.data,\n        hasNextPage: res.data.more\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getItems(1);\n    });\n  };\n\n  onSearchedClick = (selectedItem) => {\n    if (selectedItem.is_dir === true) {\n      let url = siteRoot + 'library/' + selectedItem.repo_id + '/' + selectedItem.repo_name + selectedItem.path;\n      navigate(url, {repalce: true});\n    } else {\n      let url = siteRoot + 'lib/' + selectedItem.repo_id + '/file' + Utils.encodePath(selectedItem.path);\n      let newWindow = window.open('about:blank');\n      newWindow.location.href = url;\n    }\n  };\n\n  goBack = (e) => {\n    e.preventDefault();\n    window.history.back();\n  };\n\n  render() {\n    let title = gettext('{placeholder} Modification History');\n    title = title.replace('{placeholder}', '<span class=\"op-target text-truncate mx-1\">' + Utils.HTMLescape(repoName) + '</span>');\n\n    return (\n      <React.Fragment>\n        <div className=\"h-100 d-flex flex-column\">\n          <div className=\"top-header d-flex justify-content-between\">\n            <a href={siteRoot}>\n              <img src={mediaUrl + logoPath} height={logoHeight} width={logoWidth} title={siteTitle} alt=\"logo\" />\n            </a>\n            <CommonToolbar onSearchedClick={this.onSearchedClick} />\n          </div>\n          <div className=\"flex-auto container-fluid pt-4 pb-6 o-auto\">\n            <div className=\"row\">\n              <div className=\"col-md-10 offset-md-1\">\n                <h2 dangerouslySetInnerHTML={{__html: title}} className=\"d-flex text-nowrap\"></h2>\n                <a href=\"#\" className=\"go-back\" title={gettext('Back')} onClick={this.goBack} role=\"button\" aria-label={gettext('Back')}>\n                  <span className=\"fas fa-chevron-left\"></span>\n                </a>\n                {userPerm == 'rw' && <p className=\"tip\">{gettext('Tip: a snapshot will be generated after modification, which records the library state after the modification.')}</p>}\n                <Content\n                  isLoading={this.state.isLoading}\n                  errorMsg={this.state.errorMsg}\n                  items={this.state.items}\n                  currentPage={this.state.currentPage}\n                  hasNextPage={this.state.hasNextPage}\n                  curPerPage={this.state.perPage}\n                  resetPerPage={this.resetPerPage}\n                  getListByPage={this.getItems}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.theadData = showLabel ? [\n      {width: '43%', text: gettext('Description')},\n      {width: '12%', text: gettext('Time')},\n      {width: '9%', text: gettext('Modifier')},\n      {width: '12%', text: `${gettext('Device')} / ${gettext('Version')}`},\n      {width: '12%', text: gettext('Labels')},\n      {width: '12%', text: ''}\n    ] : [\n      {width: '43%', text: gettext('Description')},\n      {width: '15%', text: gettext('Time')},\n      {width: '15%', text: gettext('Modifier')},\n      {width: '15%', text: `${gettext('Device')} / ${gettext('Version')}`},\n      {width: '12%', text: ''}\n    ];\n  }\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.currentPage - 1);\n  };\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.currentPage + 1);\n  };\n\n  render() {\n    const {\n      isLoading, errorMsg, items,\n      curPerPage, currentPage, hasNextPage\n    } = this.props;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-6 text-center\">{errorMsg}</p>;\n    }\n\n    return (\n      <React.Fragment>\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              {this.theadData.map((item, index) => {\n                return <th key={index} width={item.width}>{item.text}</th>;\n              })}\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              item.isFirstCommit = (currentPage == 1) && (index == 0);\n              item.showDetails = hasNextPage || (index != items.length - 1);\n              return <Item key={index} item={item} />;\n            })}\n          </tbody>\n        </table>\n        <Paginator\n          gotoPreviousPage={this.getPreviousPage}\n          gotoNextPage={this.getNextPage}\n          currentPage={currentPage}\n          hasNextPage={hasNextPage}\n          curPerPage={curPerPage}\n          resetPerPage={this.props.resetPerPage}\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nContent.propTypes = {\n  isLoading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  currentPage: PropTypes.number.isRequired,\n  hasNextPage: PropTypes.bool.isRequired,\n  curPerPage: PropTypes.number.isRequired,\n  resetPerPage: PropTypes.func.isRequired,\n  getListByPage: PropTypes.func.isRequired,\n};\n\nclass Item extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      labels: this.props.item.tags,\n      isIconShown: false,\n      isCommitLabelUpdateDialogOpen: false,\n      isCommitDetailsDialogOpen: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({isIconShown: true});\n  };\n\n  handleMouseOut = () => {\n    this.setState({isIconShown: false});\n  };\n\n  showCommitDetails = (e) => {\n    e.preventDefault();\n    this.setState({\n      isCommitDetailsDialogOpen: !this.state.isCommitDetailsDialogOpen\n    });\n  };\n\n  toggleCommitDetailsDialog = () => {\n    this.setState({\n      isCommitDetailsDialogOpen: !this.state.isCommitDetailsDialogOpen\n    });\n  };\n\n  editLabel = (e) => {\n    e.preventDefault();\n    this.setState({\n      isCommitLabelUpdateDialogOpen: !this.state.isCommitLabelUpdateDialogOpen\n    });\n  };\n\n  toggleLabelEditDialog = () => {\n    this.setState({\n      isCommitLabelUpdateDialogOpen: !this.state.isCommitLabelUpdateDialogOpen\n    });\n  };\n\n  updateLabels = (labels) => {\n    this.setState({\n      labels: labels\n    });\n  };\n\n  render() {\n    const item = this.props.item;\n    const { isIconShown, isCommitLabelUpdateDialogOpen, isCommitDetailsDialogOpen, labels } = this.state;\n\n    let name = '';\n    if (item.email) {\n      if (!item.second_parent_id) {\n        name = <a href={`${siteRoot}profile/${encodeURIComponent(item.email)}/`}>{item.name}</a>;\n      } else {\n        name = gettext('None');\n      }\n    } else {\n      name = gettext('Unknown');\n    }\n\n    return (\n      <React.Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n          <td>\n            {item.description}\n            {item.showDetails &&\n            <a href=\"#\" className=\"details\" onClick={this.showCommitDetails} role=\"button\">{gettext('Details')}</a>\n            }\n          </td>\n          <td title={moment(item.time).format('LLLL')}>{moment(item.time).format('YYYY-MM-DD')}</td>\n          <td>{name}</td>\n          <td>\n            {item.client_version ? `${item.device_name} / ${item.client_version}` : 'API / --'}\n          </td>\n          {showLabel &&\n          <td>\n            {labels.map((item, index) => {\n              return <span key={index} className=\"commit-label\">{item}</span>;\n            })}\n            {userPerm == 'rw' &&\n            <a href=\"#\" role=\"button\" className={`attr-action-icon fa fa-pencil-alt ${isIconShown ? '': 'invisible'}`} title={gettext('Edit')} aria-label={gettext('Edit')} onClick={this.editLabel}></a>\n            }\n          </td>\n          }\n          <td>\n            {userPerm == 'rw' && (\n              item.isFirstCommit ?\n                <span className={isIconShown ? '': 'invisible'}>{gettext('Current Version')}</span> :\n                <a href={`${siteRoot}repo/${repoID}/snapshot/?commit_id=${item.commit_id}`} className={isIconShown ? '': 'invisible'}>{gettext('View Snapshot')}</a>\n            )}\n          </td>\n        </tr>\n        {isCommitDetailsDialogOpen &&\n          <ModalPortal>\n            <CommitDetails\n              repoID={repoID}\n              commitID={item.commit_id}\n              commitTime={item.time}\n              toggleDialog={this.toggleCommitDetailsDialog}\n            />\n          </ModalPortal>\n        }\n        {isCommitLabelUpdateDialogOpen &&\n          <ModalPortal>\n            <UpdateRepoCommitLabels\n              repoID={repoID}\n              commitID={item.commit_id}\n              commitLabels={labels}\n              updateCommitLabels={this.updateLabels}\n              toggleDialog={this.toggleLabelEditDialog}\n            />\n          </ModalPortal>\n        }\n      </React.Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n};\n\nReactDom.render(<RepoHistory />, document.getElementById('wrapper'));\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/view-file-text.js",["3711"],[],"import React from 'react';\nimport ReactDom from 'react-dom';\nimport PropTypes from 'prop-types';\nimport toaster from './components/toast';\nimport { gettext } from './utils/constants';\nimport FileView from './components/file-view/file-view';\nimport SeafileCodeMirror from './components/seafile-codemirror';\nimport FileViewTip from './components/file-view/file-view-tip';\nimport { seafileAPI } from './utils/seafile-api';\nimport { Utils } from './utils/utils';\n\nimport './css/text-file-view.css';\nconst {\n  err, fileExt, fileContent, repoID, filePath, fileName, canEditFile, username\n} = window.app.pageOptions;\n\nconst propTypes = {\n  updateContent: PropTypes.func.isRequired,\n  content: PropTypes.string.isRequired,\n};\n\nclass FileContent extends React.Component {\n  render() {\n    if (err) {\n      return <FileViewTip />;\n    }\n\n    return (\n      <div className=\"file-view-content flex-1 text-file-view\">\n        <SeafileCodeMirror\n          fileExt={fileExt}\n          value={this.props.content}\n          readOnly={!canEditFile}\n          onChange={this.props.updateContent}\n        />\n      </div>\n    );\n  }\n}\n\nFileContent.propTypes = propTypes;\n\nclass ViewFileText extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      content: fileContent,\n      needSave: false,\n      isSaving: false,\n      participants: [],\n    };\n    this.onSave=this.onSave.bind(this);\n    this.isParticipant = false;\n  }\n\n\n  updateContent = (value) => {\n    this.setState({\n      needSave: true,\n      content: value,\n    });\n  };\n\n  onSave () {\n    if (!this.isParticipant) {\n      this.addParticipant();\n    }\n    let dirPath = Utils.getDirName(filePath);\n    return (\n      seafileAPI.getUpdateLink(repoID, dirPath).then((res) => {\n        const uploadLink = res.data;\n        this.setState({\n          isSaving: true\n        });\n        return seafileAPI.updateFile(\n          uploadLink,\n          filePath,\n          fileName,\n          this.state.content\n        ).then(() => {\n          toaster.success(gettext('Successfully saved'), {\n            duration: 2\n          });\n          this.setState({\n            isSaving: false,\n            needSave: false\n          });\n        });\n      })\n    );\n  }\n\n  addParticipant = () => {\n    seafileAPI.addFileParticipants(repoID, filePath, [username]).then((res) => {\n      if (res.status === 200) {\n        this.isParticipant = true;\n        this.getParticipants();\n      }\n    });\n  };\n\n  getParticipants = () => {\n    seafileAPI.listFileParticipants(repoID, filePath).then((res) => {\n      const participants = res.data.participant_list;\n      this.setState({ participants: participants });\n      if (participants.length > 0) {\n        this.isParticipant = participants.every((participant) => {\n          return participant.email == username;\n        });\n      }\n    });\n  };\n\n  onParticipantsChange = () => {\n    this.getParticipants();\n  };\n\n  componentDidMount() {\n    this.getParticipants();\n  }\n\n  render() {\n    return (\n      <FileView\n        content={\n          <FileContent\n            content={this.state.content}\n            updateContent={this.updateContent}\n          />\n        }\n        isSaving={this.state.isSaving}\n        needSave={this.state.needSave}\n        onSave={this.onSave}\n        participants={this.state.participants}\n        onParticipantsChange={this.onParticipantsChange}\n      />\n    );\n  }\n}\n\nReactDom.render(<ViewFileText />, document.getElementById('wrapper'));\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/history-trash-file-view.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/view-file-document.js",["3712"],[],"import React from 'react';\nimport ReactDom from 'react-dom';\nimport { seafileAPI } from './utils/seafile-api';\nimport { gettext, mediaUrl } from './utils/constants';\nimport FileView from './components/file-view/file-view';\nimport FileViewTip from './components/file-view/file-view-tip';\nimport Loading from './components/loading';\nimport PDFViewer from './components/pdf-viewer';\n\nimport './css/pdf-file-view.css';\n\nconst {\n  repoID, filePath, err,\n  commitID, fileType\n} = window.app.pageOptions;\n\nclass ViewFileDocument extends React.Component {\n  render() {\n    return (\n      <FileView content={<FileContent />} />\n    );\n  }\n}\n\nclass FileContent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: !err,\n      errorMsg: ''\n    };\n  }\n\n  componentDidMount() {\n    if (err) {\n      return;\n    }\n\n    let queryStatus = () => {\n      seafileAPI.queryOfficeFileConvertStatus(repoID, commitID, filePath, fileType.toLowerCase()).then((res) => {\n        const convertStatus = res.data['status'];\n        switch (convertStatus) {\n          case 'PROCESSING':\n            this.setState({\n              isLoading: true\n            });\n            setTimeout(queryStatus, 2000);\n            break;\n          case 'ERROR':\n            this.setState({\n              isLoading: false,\n              errorMsg: gettext('Document convertion failed.')\n            });\n            break;\n          case 'DONE':\n            this.setState({\n              isLoading: false,\n              errorMsg: ''\n            });\n            // eslint-disable-next-line\n            let scriptNode = document.createElement('script');\n            scriptNode.type = 'text/javascript';\n            scriptNode.src = `${mediaUrl}js/pdf/web/viewer.js`;\n            document.body.append(scriptNode);\n        }\n      }).catch((error) => {\n        if (error.response) {\n          this.setState({\n            isLoading: false,\n            errorMsg: gettext('Document convertion failed.')\n          });\n        } else {\n          this.setState({\n            isLoading: false,\n            errorMsg: gettext('Please check the network.')\n          });\n        }\n      });\n    };\n\n    queryStatus();\n  }\n\n\n  render() {\n    const { isLoading, errorMsg } = this.state;\n\n    if (err) {\n      return <FileViewTip />;\n    }\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <FileViewTip errorMsg={errorMsg} />;\n    }\n\n    return (\n      <div className=\"file-view-content flex-1 pdf-file-view\">\n        <PDFViewer />\n      </div>\n    );\n  }\n}\n\nReactDom.render(<ViewFileDocument />, document.getElementById('wrapper'));\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/repo-folder-trash.js",["3713","3714","3715","3716","3717","3718","3719","3720","3721","3722","3723"],[],"import React from 'react';\nimport ReactDom from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Utils } from './utils/utils';\nimport { gettext, siteRoot, mediaUrl, logoPath, logoWidth, logoHeight, siteTitle } from './utils/constants';\nimport { seafileAPI } from './utils/seafile-api';\nimport Loading from './components/loading';\nimport ModalPortal from './components/modal-portal';\nimport toaster from './components/toast';\nimport CommonToolbar from './components/toolbar/common-toolbar';\nimport CleanTrash from './components/dialog/clean-trash';\n\nimport './css/toolbar.css';\nimport './css/search.css';\n\nimport './css/repo-folder-trash.css';\n\nconst {\n  repoID,\n  repoFolderName,\n  path,\n  enableClean\n} = window.app.pageOptions;\n\nclass RepoFolderTrash extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      items: [],\n      scanStat: null,\n      more: false,\n      isCleanTrashDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    this.getItems();\n  }\n\n  getItems = (scanStat) => {\n    seafileAPI.getRepoFolderTrash(repoID, path, scanStat).then((res) => {\n      const { data, more, scan_stat } = res.data;\n      if (!data.length && more) {\n        this.getItems(scan_stat);\n      } else {\n        this.setState({\n          isLoading: false,\n          items: this.state.items.concat(data),\n          more: more,\n          scanStat: scan_stat\n        });\n      }\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  getMore = () => {\n    this.setState({\n      isLoading: true\n    });\n    this.getItems(this.state.scanStat);\n  };\n\n  onSearchedClick = (selectedItem) => {\n    if (selectedItem.is_dir === true) {\n      let url = siteRoot + 'library/' + selectedItem.repo_id + '/' + selectedItem.repo_name + selectedItem.path;\n      navigate(url, {repalce: true});\n    } else {\n      let url = siteRoot + 'lib/' + selectedItem.repo_id + '/file' + Utils.encodePath(selectedItem.path);\n      let newWindow = window.open('about:blank');\n      newWindow.location.href = url;\n    }\n  };\n\n  goBack = (e) => {\n    e.preventDefault();\n    window.history.back();\n  };\n\n  cleanTrash = () => {\n    this.toggleCleanTrashDialog();\n  };\n\n  toggleCleanTrashDialog = () => {\n    this.setState({\n      isCleanTrashDialogOpen: !this.state.isCleanTrashDialogOpen\n    });\n  };\n\n  refreshTrash = () => {\n    this.setState({\n      isLoading: true,\n      errorMsg: '',\n      items: [],\n      scanStat: null,\n      more: false,\n      showFolder: false\n    });\n    this.getItems();\n  };\n\n  renderFolder = (commitID, baseDir, folderPath) => {\n    this.setState({\n      showFolder: true,\n      commitID: commitID,\n      baseDir: baseDir,\n      folderPath: folderPath,\n      folderItems: [],\n      isLoading: true\n    });\n\n    seafileAPI.listCommitDir(repoID, commitID, `${baseDir.substr(0, baseDir.length - 1)}${folderPath}`).then((res) => {\n      this.setState({\n        isLoading: false,\n        folderItems: res.data.dirent_list\n      });\n    }).catch((error) => {\n      if (error.response) {\n        if (error.response.status == 403) {\n          this.setState({\n            isLoading: false,\n            errorMsg: gettext('Permission denied')\n          });\n        } else {\n          this.setState({\n            isLoading: false,\n            errorMsg: gettext('Error')\n          });\n        }\n      } else {\n        this.setState({\n          isLoading: false,\n          errorMsg: gettext('Please check the network.')\n        });\n      }\n    });\n  };\n\n  clickRoot = (e) => {\n    e.preventDefault();\n    this.refreshTrash();\n  };\n\n  clickFolderPath = (folderPath, e) => {\n    e.preventDefault();\n    const { commitID, baseDir } = this.state;\n    this.renderFolder(commitID, baseDir, folderPath);\n  };\n\n  renderFolderPath = () => {\n    const pathList = this.state.folderPath.split('/');\n    return (\n      <React.Fragment>\n        <a href=\"#\" onClick={this.clickRoot} className=\"text-truncate\" title={repoFolderName}>{repoFolderName}</a>\n        <span className=\"mx-1\">/</span>\n        {pathList.map((item, index) => {\n          if (index > 0 && index != pathList.length - 1) {\n            return (\n              <React.Fragment key={index}>\n                <a className=\"text-truncate\" href=\"#\" onClick={this.clickFolderPath.bind(this, pathList.slice(0, index+1).join('/'))} title={pathList[index]}>{pathList[index]}</a>\n                <span className=\"mx-1\">/</span>\n              </React.Fragment>\n            );\n          }\n          return null;\n        }\n        )}\n        <span className=\"text-truncate\" title={pathList[pathList.length - 1]}>{pathList[pathList.length - 1]}</span>\n      </React.Fragment>\n    );\n  };\n\n  render() {\n    const { isCleanTrashDialogOpen, showFolder } = this.state;\n\n    let title = gettext('{placeholder} Trash');\n    title = title.replace('{placeholder}', '<span class=\"op-target text-truncate mx-1\">' + Utils.HTMLescape(repoFolderName) + '</span>');\n\n    return (\n      <React.Fragment>\n        <div className=\"h-100 d-flex flex-column\">\n          <div className=\"top-header d-flex justify-content-between\">\n            <a href={siteRoot}>\n              <img src={mediaUrl + logoPath} height={logoHeight} width={logoWidth} title={siteTitle} alt=\"logo\" />\n            </a>\n            <CommonToolbar onSearchedClick={this.onSearchedClick} />\n          </div>\n          <div className=\"flex-auto container-fluid pt-4 pb-6 o-auto\">\n            <div className=\"row\">\n              <div className=\"col-md-10 offset-md-1\">\n                <h2 dangerouslySetInnerHTML={{__html: title}} className=\"d-flex mw-100\"></h2>\n                <a href=\"#\" className=\"go-back\" title={gettext('Back')} onClick={this.goBack} role={gettext('Back')}>\n                  <span className=\"fas fa-chevron-left\"></span>\n                </a>\n                <div className=\"d-flex justify-content-between align-items-center op-bar\">\n                  <p className=\"m-0 text-truncate d-flex\"><span className=\"mr-1\">{gettext('Current path: ')}</span>{showFolder ? this.renderFolderPath() : <span className=\"text-truncate\" title={repoFolderName}>{repoFolderName}</span>}</p>\n                  {(path == '/' && enableClean && !showFolder) &&\n                  <button className=\"btn btn-secondary clean flex-shrink-0 ml-4\" onClick={this.cleanTrash}>{gettext('Clean')}</button>\n                  }\n                </div>\n                <Content\n                  data={this.state}\n                  getMore={this.getMore}\n                  renderFolder={this.renderFolder}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        {isCleanTrashDialogOpen &&\n        <ModalPortal>\n          <CleanTrash\n            repoID={repoID}\n            refreshTrash={this.refreshTrash}\n            toggleDialog={this.toggleCleanTrashDialog}\n          />\n        </ModalPortal>\n        }\n      </React.Fragment>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.theadData = [\n      {width: '5%', text: ''},\n      {width: '20%', text: gettext('Name')},\n      {width: '40%', text: gettext('Original path')},\n      {width: '12%', text: gettext('Delete Time')},\n      {width: '13%', text: gettext('Size')},\n      {width: '10%', text: ''}\n    ];\n  }\n\n  render() {\n    const { isLoading, errorMsg, items, more, showFolder, commitID, baseDir, folderPath, folderItems } = this.props.data;\n\n    return (\n      <React.Fragment>\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              {this.theadData.map((item, index) => {\n                return <th key={index} width={item.width}>{item.text}</th>;\n              })}\n            </tr>\n          </thead>\n          <tbody>\n            {showFolder ?\n              folderItems.map((item, index) => {\n                return <FolderItem\n                  key={index}\n                  item={item}\n                  commitID={commitID}\n                  baseDir={baseDir}\n                  folderPath={folderPath}\n                  renderFolder={this.props.renderFolder}\n                />;\n              }) :\n              items.map((item, index) => {\n                return <Item\n                  key={index}\n                  item={item}\n                  renderFolder={this.props.renderFolder}\n                />;\n              })}\n          </tbody>\n        </table>\n        {isLoading && <Loading />}\n        {errorMsg && <p className=\"error mt-6 text-center\">{errorMsg}</p>}\n        {(more && !isLoading && !showFolder) && (\n          <button className=\"btn btn-block more mt-6\" onClick={this.props.getMore}>{gettext('More')}</button>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nContent.propTypes = {\n  data: PropTypes.object.isRequired,\n  getMore: PropTypes.func.isRequired,\n  renderFolder: PropTypes.func.isRequired,\n};\n\n\nclass Item extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      restored: false,\n      isIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({isIconShown: true});\n  };\n\n  handleMouseOut = () => {\n    this.setState({isIconShown: false});\n  };\n\n  restoreItem = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    const { commit_id, parent_dir, obj_name } = item;\n    const path = parent_dir + obj_name;\n    const request = item.is_dir ?\n      seafileAPI.restoreFolder(repoID, commit_id, path) :\n      seafileAPI.restoreFile(repoID, commit_id, path);\n    request.then((res) => {\n      this.setState({\n        restored: true\n      });\n      toaster.success(gettext('Successfully restored 1 item.'));\n    }).catch((error) => {\n      let errorMsg = '';\n      if (error.response) {\n        errorMsg = error.response.data.error_msg || gettext('Error');\n      } else {\n        errorMsg = gettext('Please check the network.');\n      }\n      toaster.danger(errorMsg);\n    });\n  };\n\n  renderFolder = (e) => {\n    e.preventDefault();\n    const item = this.props.item;\n    this.props.renderFolder(item.commit_id, item.parent_dir, Utils.joinPath('/', item.obj_name));\n  };\n\n  render() {\n    const item = this.props.item;\n    const { restored, isIconShown } = this.state;\n\n    if (restored) {\n      return null;\n    }\n\n    return item.is_dir ? (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td className=\"text-center\"><img src={Utils.getFolderIconUrl()} alt={gettext('Directory')} width=\"24\" /></td>\n        <td><a href=\"#\" onClick={this.renderFolder}>{item.obj_name}</a></td>\n        <td>{item.parent_dir}</td>\n        <td title={moment(item.deleted_time).format('LLLL')}>{moment(item.deleted_time).format('YYYY-MM-DD')}</td>\n        <td></td>\n        <td>\n          <a href=\"#\" className={isIconShown ? '': 'invisible'} onClick={this.restoreItem} role=\"button\">{gettext('Restore')}</a>\n        </td>\n      </tr>\n    ) : (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td className=\"text-center\"><img src={Utils.getFileIconUrl(item.obj_name)} alt={gettext('File')} width=\"24\" /></td>\n        <td><a href={`${siteRoot}repo/${repoID}/trash/files/?obj_id=${item.obj_id}&commit_id=${item.commit_id}&base=${encodeURIComponent(item.parent_dir)}&p=${encodeURIComponent('/' + item.obj_name)}`} target=\"_blank\" rel=\"noreferrer\">{item.obj_name}</a></td>\n        <td>{item.parent_dir}</td>\n        <td title={moment(item.deleted_time).format('LLLL')}>{moment(item.deleted_time).format('YYYY-MM-DD')}</td>\n        <td>{Utils.bytesToSize(item.size)}</td>\n        <td>\n          <a href=\"#\" className={isIconShown ? '': 'invisible'} onClick={this.restoreItem} role=\"button\">{gettext('Restore')}</a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  renderFolder: PropTypes.func.isRequired,\n};\n\nclass FolderItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({isIconShown: true});\n  };\n\n  handleMouseOut = () => {\n    this.setState({isIconShown: false});\n  };\n\n  renderFolder = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    const { commitID, baseDir, folderPath } = this.props;\n    this.props.renderFolder(commitID, baseDir, Utils.joinPath(folderPath, item.name));\n  };\n\n  render() {\n    const item = this.props.item;\n    const { commitID, baseDir, folderPath } = this.props;\n\n    return item.type == 'dir' ? (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td className=\"text-center\"><img src={Utils.getFolderIconUrl()} alt={gettext('Directory')} width=\"24\" /></td>\n        <td><a href=\"#\" onClick={this.renderFolder}>{item.name}</a></td>\n        <td>{item.parent_dir}</td>\n        <td></td>\n        <td></td>\n      </tr>\n    ) : (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td className=\"text-center\"><img src={Utils.getFileIconUrl(item.name)} alt={gettext('File')} width=\"24\" /></td>\n        <td><a href={`${siteRoot}repo/${repoID}/trash/files/?obj_id=${item.obj_id}&commit_id=${commitID}&base=${encodeURIComponent(baseDir)}&p=${encodeURIComponent(Utils.joinPath(folderPath, item.name))}`} target=\"_blank\" rel=\"noreferrer\">{item.name}</a></td>\n        <td>{item.parent_dir}</td>\n        <td></td>\n        <td>{Utils.bytesToSize(item.size)}</td>\n        <td></td>\n      </tr>\n    );\n  }\n}\n\nFolderItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  commitID: PropTypes.string.isRequired,\n  baseDir: PropTypes.string.isRequired,\n  folderPath: PropTypes.string.isRequired,\n  renderFolder: PropTypes.func.isRequired,\n};\n\nReactDom.render(<RepoFolderTrash />, document.getElementById('wrapper'));\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/repo-snapshot.js",["3724","3725","3726","3727","3728","3729","3730","3731","3732","3733","3734","3735","3736","3737","3738"],[],"import React from 'react';\nimport ReactDom from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { Utils } from './utils/utils';\nimport { gettext, siteRoot, mediaUrl, logoPath, logoWidth, logoHeight, siteTitle } from './utils/constants';\nimport { seafileAPI } from './utils/seafile-api';\nimport Loading from './components/loading';\nimport ModalPortal from './components/modal-portal';\nimport toaster from './components/toast';\nimport CommonToolbar from './components/toolbar/common-toolbar';\nimport ConfirmRestoreRepo from './components/dialog/confirm-restore-repo';\n\nimport './css/toolbar.css';\nimport './css/search.css';\n\nimport './css/repo-snapshot.css';\n\nconst {\n  repoID, repoName, canRestoreRepo,\n  commitID, commitTime, commitDesc, commitRelativeTime,\n  showAuthor, authorAvatarURL, authorName, authorNickName\n} = window.app.pageOptions;\n\nclass RepoSnapshot extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      folderPath: '/',\n      folderItems: [],\n      isConfirmDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    this.renderFolder(this.state.folderPath);\n  }\n\n  toggleDialog = () => {\n    this.setState({\n      isConfirmDialogOpen: !this.state.isConfirmDialogOpen\n    });\n  };\n\n  onSearchedClick = (selectedItem) => {\n    if (selectedItem.is_dir === true) {\n      let url = siteRoot + 'library/' + selectedItem.repo_id + '/' + selectedItem.repo_name + selectedItem.path;\n      navigate(url, {repalce: true});\n    } else {\n      let url = siteRoot + 'lib/' + selectedItem.repo_id + '/file' + Utils.encodePath(selectedItem.path);\n      let newWindow = window.open('about:blank');\n      newWindow.location.href = url;\n    }\n  };\n\n  goBack = (e) => {\n    e.preventDefault();\n    window.history.back();\n  };\n\n  renderFolder = (folderPath) => {\n    this.setState({\n      folderPath: folderPath,\n      folderItems: [],\n      isLoading: true\n    });\n\n    seafileAPI.listCommitDir(repoID, commitID, folderPath).then((res) => {\n      this.setState({\n        isLoading: false,\n        folderItems: res.data.dirent_list\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  clickFolderPath = (folderPath, e) => {\n    e.preventDefault();\n    this.renderFolder(folderPath);\n  };\n\n  renderPath = () => {\n    const path = this.state.folderPath;\n    const pathList = path.split('/');\n\n    if (path == '/') {\n      return <span className=\"text-truncate\" title={repoName}>{repoName}</span>;\n    }\n\n    return (\n      <React.Fragment>\n        <a href=\"#\" onClick={this.clickFolderPath.bind(this, '/')} className=\"text-truncate\" title={repoName}>{repoName}</a>\n        <span className=\"mx-1\">/</span>\n        {pathList.map((item, index) => {\n          if (index > 0 && index != pathList.length - 1) {\n            return (\n              <React.Fragment key={index}>\n                <a href=\"#\" onClick={this.clickFolderPath.bind(this, pathList.slice(0, index+1).join('/'))} className=\"text-truncate\" title={pathList[index]}>{pathList[index]}</a>\n                <span className=\"mx-1\">/</span>\n              </React.Fragment>\n            );\n          }\n          return null;\n        }\n        )}\n        <span className=\"text-truncate\" title={pathList[pathList.length - 1]}>{pathList[pathList.length - 1]}</span>\n      </React.Fragment>\n    );\n  };\n\n  restoreRepo = () => {\n    seafileAPI.revertRepo(repoID, commitID).then((res) => {\n      this.toggleDialog();\n      toaster.success(gettext('Successfully restored the library.'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.toggleDialog();\n      toaster.danger(errorMsg);\n    });\n  };\n\n  render() {\n    const { isConfirmDialogOpen, folderPath } = this.state;\n\n    let title = gettext('{placeholder} Snapshot');\n    title = title.replace('{placeholder}', '<span class=\"op-target text-truncate mx-1\">' + Utils.HTMLescape(repoName) + '</span>');\n    return (\n      <React.Fragment>\n        <div className=\"h-100 d-flex flex-column\">\n          <div className=\"top-header d-flex justify-content-between\">\n            <a href={siteRoot}>\n              <img src={mediaUrl + logoPath} height={logoHeight} width={logoWidth} title={siteTitle} alt=\"logo\" />\n            </a>\n            <CommonToolbar onSearchedClick={this.onSearchedClick} />\n          </div>\n          <div className=\"flex-auto container-fluid pt-4 pb-6 o-auto\">\n            <div className=\"row\">\n              <div className=\"col-md-10 offset-md-1\">\n                <h2>\n                  <span dangerouslySetInnerHTML={{__html: title}} className=\"d-flex mw-100\"></span>\n                  <span className=\"heading-commit-time ml-1\">({commitTime})</span>\n                </h2>\n                <a href=\"#\" className=\"go-back\" title={gettext('Back')} role=\"button\" aria-label={gettext('Back')} onClick={this.goBack}>\n                  <span className=\"fas fa-chevron-left\"></span>\n                </a>\n                {folderPath == '/' && (\n                  <div className=\"d-flex mb-2 align-items-center\">\n                    <p className=\"m-0 text-truncate\" title={commitDesc}>{commitDesc}</p>\n                    <div className=\"ml-4 border-left pl-4 d-flex align-items-center flex-shrink-0\">\n                      {showAuthor ? (\n                        <React.Fragment>\n                          <img src={authorAvatarURL} width=\"20\" height=\"20\" alt=\"\" className=\"rounded mr-1\" />\n                          <a href={`${siteRoot}profile/${encodeURIComponent(authorName)}/`}>{authorNickName}</a>\n                        </React.Fragment>\n                      ) : <span>{gettext('Unknown')}</span>}\n                      <p className=\"m-0 ml-2\" dangerouslySetInnerHTML={{__html: commitRelativeTime}}></p>\n                    </div>\n                  </div>\n                )}\n                <div className=\"d-flex justify-content-between align-items-center op-bar\">\n                  <p className=\"m-0 text-truncate d-flex\"><span className=\"mr-1\">{gettext('Current path: ')}</span>{this.renderPath()}</p>\n                  {(folderPath == '/' && canRestoreRepo) &&\n                  <button className=\"btn btn-secondary op-bar-btn flex-shrink-0 ml-4\" onClick={this.toggleDialog}>{gettext('Restore')}</button>\n                  }\n                </div>\n                <Content\n                  data={this.state}\n                  renderFolder={this.renderFolder}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        {isConfirmDialogOpen &&\n        <ModalPortal>\n          <ConfirmRestoreRepo\n            restoreRepo={this.restoreRepo}\n            toggle={this.toggleDialog}\n          />\n        </ModalPortal>\n        }\n      </React.Fragment>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.theadData = [\n      {width: '5%', text: ''},\n      {width: '55%', text: gettext('Name')},\n      {width: '20%', text: gettext('Size')},\n      {width: '20%', text: ''}\n    ];\n  }\n\n  render() {\n    const { isLoading, errorMsg, folderPath, folderItems } = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-6 text-center\">{errorMsg}</p>;\n    }\n\n    return (\n      <table className=\"table-hover\">\n        <thead>\n          <tr>\n            {this.theadData.map((item, index) => {\n              return <th key={index} width={item.width}>{item.text}</th>;\n            })}\n          </tr>\n        </thead>\n        <tbody>\n          {folderItems.map((item, index) => {\n            return <FolderItem\n              key={index}\n              item={item}\n              folderPath={folderPath}\n              renderFolder={this.props.renderFolder}\n            />;\n          })\n          }\n        </tbody>\n      </table>\n    );\n  }\n}\n\nContent.propTypes = {\n  data: PropTypes.object.isRequired,\n  renderFolder: PropTypes.func.isRequired,\n};\n\nclass FolderItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({isIconShown: true});\n  };\n\n  handleMouseOut = () => {\n    this.setState({isIconShown: false});\n  };\n\n  restoreItem = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    const path = Utils.joinPath(this.props.folderPath, item.name);\n    const request = item.type == 'dir' ?\n      seafileAPI.revertFolder(repoID, path, commitID):\n      seafileAPI.revertFile(repoID, path, commitID);\n    request.then((res) => {\n      toaster.success(gettext('Successfully restored 1 item.'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n    });\n  };\n\n  renderFolder = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    const { folderPath } = this.props;\n    this.props.renderFolder(Utils.joinPath(folderPath, item.name));\n  };\n\n  render() {\n    const item = this.props.item;\n    const { isIconShown } = this.state;\n    const { folderPath } = this.props;\n\n    return item.type == 'dir' ? (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td className=\"text-center\"><img src={Utils.getFolderIconUrl()} alt={gettext('Directory')} width=\"24\" /></td>\n        <td><a href=\"#\" onClick={this.renderFolder}>{item.name}</a></td>\n        <td></td>\n        <td>\n          <a href=\"#\" className={`action-icon sf2-icon-reply ${isIconShown ? '': 'invisible'}`} onClick={this.restoreItem} title={gettext('Restore')} aria-label={gettext('Restore')} role=\"button\"></a>\n        </td>\n      </tr>\n    ) : (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td className=\"text-center\"><img src={Utils.getFileIconUrl(item.name)} alt={gettext('File')} width=\"24\" /></td>\n        <td><a href={`${siteRoot}repo/${repoID}/snapshot/files/?obj_id=${item.obj_id}&commit_id=${commitID}&p=${encodeURIComponent(Utils.joinPath(folderPath, item.name))}`} target=\"_blank\" rel=\"noreferrer\">{item.name}</a></td>\n        <td>{Utils.bytesToSize(item.size)}</td>\n        <td>\n          <a href=\"#\" className={`action-icon sf2-icon-reply ${isIconShown ? '': 'invisible'}`} onClick={this.restoreItem} title={gettext('Restore')} aria-label={gettext('Restore')} role=\"button\"></a>\n          <a href={`${siteRoot}repo/${repoID}/${item.obj_id}/download/?file_name=${encodeURIComponent(item.name)}&p=${encodeURIComponent(Utils.joinPath(folderPath, item.name))}`} className={`action-icon sf2-icon-download ${isIconShown ? '': 'invisible'}`} title={gettext('Download')}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nFolderItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  folderPath: PropTypes.string.isRequired,\n  renderFolder: PropTypes.func.isRequired,\n};\n\nReactDom.render(<RepoSnapshot />, document.getElementById('wrapper'));\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/plain-markdown-editor/index.js",[],["3739"],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sdoc/sdoc-published-revision/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/subscription.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/search/index.js",["3740"],[],"import React from 'react';\nimport ReactDom from 'react-dom';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport Logo from '../../components/logo';\nimport SearchViewPanel from './main-panel';\nimport { siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nimport '../../css/layout.css';\nimport '../../css/toolbar.css';\nimport '../../css/search.css';\n\nclass SearchView extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  onSearchedClick = (selectedItem) => {\n    let url = selectedItem.is_dir ?\n      siteRoot + 'library/' + selectedItem.repo_id + '/' + selectedItem.repo_name + selectedItem.path :\n      siteRoot + 'lib/' + selectedItem.repo_id + '/file' + Utils.encodePath(selectedItem.path);\n    let newWindow = window.open('about:blank');\n    newWindow.location.href = url;\n  };\n\n  render() {\n    return (\n      <div className=\"w-100 h-100\">\n        <div className=\"main-panel-north border-left-show\">\n          <Logo/>\n          <CommonToolbar onSearchedClick={this.onSearchedClick}/>\n        </div>\n        <div className=\"main-panel-south\">\n          <SearchViewPanel/>\n        </div>\n      </div>\n    );\n  }\n}\n\nReactDom.render(<SearchView />, document.getElementById('wrapper'));\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-users-users.js",["3741","3742","3743","3744","3745"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport Nav from './org-users-nav';\nimport OrgUsersList from './org-users-list';\nimport MainPanelTopbar from './main-panel-topbar';\nimport ModalPortal from '../../components/modal-portal';\n// import ImportOrgUsersDialog from '../../components/dialog/org-import-users-dialog';\nimport AddOrgUserDialog from '../../components/dialog/org-add-user-dialog';\nimport InviteUserDialog from '../../components/dialog/org-admin-invite-user-dialog';\nimport InviteUserViaWeiXinDialog from '../../components/dialog/org-admin-invite-user-via-weixin-dialog';\nimport toaster from '../../components/toast';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport OrgUserInfo from '../../models/org-user';\nimport { gettext, invitationLink, orgID, siteRoot, orgEnableAdminInviteUser, isFreeUser, hasUserAvailability, orgMembers, orgMembersQuota } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nclass Search extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: ''\n    };\n  }\n\n  handleInputChange = (e) => {\n    this.setState({\n      value: e.target.value\n    });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      e.preventDefault();\n      this.handleSubmit();\n    }\n  };\n\n  handleSubmit = () => {\n    const value = this.state.value.trim();\n    if (!value) {\n      return false;\n    }\n    this.props.submit(value);\n  };\n\n  render() {\n    return (\n      <div className=\"input-icon\">\n        <i className=\"d-flex input-icon-addon fas fa-search\"></i>\n        <input\n          type=\"text\"\n          className=\"form-control search-input h-6 mr-1\"\n          style={{ width: '15rem' }}\n          placeholder={this.props.placeholder}\n          value={this.state.value}\n          onChange={this.handleInputChange}\n          onKeyDown={this.handleKeyDown}\n          autoComplete=\"off\"\n        />\n      </div>\n    );\n  }\n}\n\nSearch.propTypes = {\n  placeholder: PropTypes.string.isRequired,\n  submit: PropTypes.func.isRequired,\n};\n\nclass OrgUsers extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      orgUsers: [],\n      page: 1,\n      pageNext: false,\n      sortBy: '',\n      sortOrder: 'asc',\n      isShowAddOrgUserDialog: false,\n      isImportOrgUsersDialogOpen: false,\n      isInviteUserDialogOpen: false,\n      isInviteUserViaWeiXinDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { page, sortBy, sortOrder } = this.state;\n    this.setState({\n      /*\n        perPage: parseInt(urlParams.get('per_page') || perPage),\n        currentPage: parseInt(urlParams.get('page') || currentPage),\n        */\n      page: parseInt(urlParams.get('page') || page),\n      sortBy: urlParams.get('order_by') || sortBy,\n      sortOrder: urlParams.get('direction') || sortOrder\n    }, () => {\n      this.initOrgUsersData(this.state.page);\n    });\n  }\n\n  sortByQuotaUsage = () => {\n    this.setState({\n      sortBy: 'quota_usage',\n      sortOrder: this.state.sortOrder == 'asc' ? 'desc' : 'asc',\n      page: 1\n    }, () => {\n      let url = new URL(location.href);\n      let searchParams = new URLSearchParams(url.search);\n      const { page, sortBy, sortOrder } = this.state;\n      searchParams.set('page', page);\n      searchParams.set('order_by', sortBy);\n      searchParams.set('direction', sortOrder);\n      url.search = searchParams.toString();\n      navigate(url.toString());\n      this.initOrgUsersData(page);\n    });\n  };\n\n  toggleImportOrgUsersDialog = () => {\n    this.setState({ isImportOrgUsersDialogOpen: !this.state.isImportOrgUsersDialogOpen });\n  };\n\n  toggleAddOrgUser = () => {\n    this.setState({ isShowAddOrgUserDialog: !this.state.isShowAddOrgUserDialog });\n  };\n\n  toggleInviteUserDialog = () => {\n    this.setState({ isInviteUserDialogOpen: !this.state.isInviteUserDialogOpen });\n  };\n\n  toggleInviteUserViaWeiXinDialog = () => {\n    this.setState({ isInviteUserViaWeiXinDialogOpen: !this.state.isInviteUserViaWeiXinDialogOpen });\n  };\n\n  initOrgUsersData = (page) => {\n    const { sortBy, sortOrder } = this.state;\n    seafileAPI.orgAdminListOrgUsers(orgID, '', page, sortBy, sortOrder).then(res => {\n      let userList = res.data.user_list.map(item => {\n        return new OrgUserInfo(item);\n      });\n      this.setState({\n        orgUsers: userList,\n        pageNext: res.data.page_next,\n        page: res.data.page,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  importOrgUsers = (file) => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    seafileAPI.orgAdminImportUsersViaFile(orgID, file).then((res) => {\n      if (res.data.success.length) {\n        const users = res.data.success.map(item => {\n          if (item.institution == undefined) {\n            item.institution = '';\n          }\n          return new OrgUserInfo(item);\n        });\n        this.setState({\n          orgUsers: users.concat(this.state.orgUsers)\n        });\n      }\n      res.data.failed.forEach(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  };\n\n  addOrgUser = (email, name, password) => {\n    seafileAPI.orgAdminAddOrgUser(orgID, email, name, password).then(res => {\n      let userInfo = new OrgUserInfo(res.data);\n      this.state.orgUsers.unshift(userInfo);\n      this.setState({\n        orgUsers: this.state.orgUsers\n      });\n      this.toggleAddOrgUser();\n      let msg = gettext('successfully added user %s.');\n      msg = msg.replace('%s', email);\n      toaster.success(msg);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n      this.toggleAddOrgUser();\n    });\n  };\n\n  toggleOrgUsersDelete = (email, username) => {\n    seafileAPI.orgAdminDeleteOrgUser(orgID, email).then(res => {\n      let users = this.state.orgUsers.filter(item => item.email != email);\n      this.setState({ orgUsers: users });\n      let msg = gettext('Deleted user %s');\n      msg = msg.replace('%s', username);\n      toaster.success(msg);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  inviteOrgUser = (emails) => {\n    seafileAPI.orgAdminInviteOrgUsers(orgID, emails.split(',')).then(res => {\n      this.toggleInviteUserDialog();\n      let users = res.data.success.map(user => {\n        return new OrgUserInfo(user);\n      });\n      this.setState({\n        orgUsers: users.concat(this.state.orgUsers)\n      });\n\n      res.data.success.forEach(item => {\n        let msg = gettext('successfully sent email to %s.');\n        msg = msg.replace('%s', item.email);\n        toaster.success(msg);\n      });\n\n      res.data.failed.forEach(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch(error => {\n      this.toggleInviteUserDialog();\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  changeStatus = (email, isActive) => {\n    seafileAPI.orgAdminChangeOrgUserStatus(orgID, email, isActive).then(res => {\n      let users = this.state.orgUsers.map(item => {\n        if (item.email == email) {\n          item['is_active'] = res.data['is_active'];\n        }\n        return item;\n      });\n      this.setState({ orgUsers: users });\n      toaster.success(gettext('Edit succeeded.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  searchItems = (keyword) => {\n    navigate(`${siteRoot}org/useradmin/search-users/?query=${encodeURIComponent(keyword)}`);\n  };\n\n  getSearch = () => {\n    return <Search\n      placeholder={gettext('Search users')}\n      submit={this.searchItems}\n    />;\n  };\n\n  render() {\n    const topBtn = 'btn btn-secondary operation-item';\n    const canAddUsers = !isFreeUser && hasUserAvailability;\n\n    let topbarChildren;\n    topbarChildren = (\n      <Fragment>\n        {/* <button className=\"btn btn-secondary operation-item\" onClick={this.toggleImportOrgUsersDialog}>{gettext('Import users')}</button> */}\n\n        {isFreeUser ? (\n          <div className=\"d-flex align-items-center\">\n            <span className=\"mr-3\" style={{ color: '#666' }}>Upgrade your plan to add more users</span>\n            <a href=\"/billing/\" className=\"btn btn-primary\">Upgrade Plan</a>\n          </div>\n        ) : !hasUserAvailability ? (\n          <div className=\"d-flex align-items-center\">\n            <span className=\"mr-3\" style={{ color: '#666' }}>\n              You have reached your user limit ({orgMembers}/{orgMembersQuota}). Add more users to your plan\n            </span>\n            <a href=\"/billing/\" className=\"btn btn-outline-primary\">Manage Billing</a>\n          </div>\n        ) : (\n          <Fragment>\n            <button className={topBtn} title={gettext('Add user')} onClick={this.toggleAddOrgUser}>\n              <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Add user')}</button>\n            {orgEnableAdminInviteUser &&\n              <button className={topBtn} title={gettext('Invite users')} onClick={this.toggleInviteUserDialog}>\n                <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Invite users')}</button>\n            }\n            {invitationLink &&\n              <button className={topBtn} title={''} onClick={this.toggleInviteUserViaWeiXinDialog}>\n                <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{''}</button>\n            }\n          </Fragment>\n        )}\n\n        {/* Dialogs - only render if not free user */}\n        {/* {this.state.isImportOrgUsersDialogOpen &&\n        <ModalPortal>\n          <ImportOrgUsersDialog importUsersInBatch={this.importOrgUsers} toggle={this.toggleImportOrgUsersDialog}/>\n        </ModalPortal>\n        } */}\n        {canAddUsers && this.state.isShowAddOrgUserDialog &&\n          <ModalPortal>\n            <AddOrgUserDialog handleSubmit={this.addOrgUser} toggle={this.toggleAddOrgUser} />\n          </ModalPortal>\n        }\n        {canAddUsers && this.state.isInviteUserDialogOpen &&\n          <ModalPortal>\n            <InviteUserDialog handleSubmit={this.inviteOrgUser} toggle={this.toggleInviteUserDialog} />\n          </ModalPortal>\n        }\n        {canAddUsers && this.state.isInviteUserViaWeiXinDialogOpen &&\n          <ModalPortal>\n            <InviteUserViaWeiXinDialog invitationLink={invitationLink} toggle={this.toggleInviteUserViaWeiXinDialog} />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n\n    return (\n      <Fragment>\n        <MainPanelTopbar children={topbarChildren} search={this.getSearch()} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"all\" />\n            <OrgUsersList\n              initOrgUsersData={this.initOrgUsersData}\n              toggleDelete={this.toggleOrgUsersDelete}\n              changeStatus={this.changeStatus}\n              orgUsers={this.state.orgUsers}\n              page={this.state.page}\n              pageNext={this.state.pageNext}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortByQuotaUsage={this.sortByQuotaUsage}\n            />\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgUsers;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/side-panel.js",["3746"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport Logo from '../../components/logo';\nimport Icon from '../../components/icon';\nimport { gettext, siteRoot, enableSubscription, enableMultiADFS } from '../../utils/constants';\n\nconst propTypes = {\n  isSidePanelClosed: PropTypes.bool.isRequired,\n  onCloseSidePanel: PropTypes.func.isRequired,\n  currentTab: PropTypes.string.isRequired,\n  tabItemClick: PropTypes.func.isRequired\n};\n\nclass SidePanel extends React.Component {\n\n  getActiveClass = (tab) => {\n    return this.props.currentTab == tab ? 'active' : '';\n  };\n\n  tabItemClick = (tab) => {\n    this.props.tabItemClick(tab);\n  };\n\n  render() {\n    return (\n      <div className={`side-panel ${this.props.isSidePanelClosed ? '' : 'left-zero'}`}>\n        <div className=\"side-panel-north\">\n          <Logo onCloseSidePanel={this.props.onCloseSidePanel}/>\n        </div>\n        <div className=\"side-panel-center\">\n          <div className=\"side-nav\">\n            <div className=\"side-nav-con\">\n              <h3 className=\"sf-heading\" style={{ 'color': '#f7941d' }}>{gettext('Admin')}</h3>\n              <ul className=\"nav nav-pills flex-column nav-container\">\n                <li className=\"nav-item\">\n                  <Link className={`nav-link ellipsis ${this.getActiveClass('info')}`} to={siteRoot + 'org/info/'} onClick={() => this.tabItemClick('info')} >\n                    <span className=\"sf2-icon-info\"></span>\n                    <span className=\"nav-text\">{gettext('Info')}</span>\n                  </Link>\n                </li>\n                <li className=\"nav-item\">\n                  <Link className={`nav-link ellipsis ${this.getActiveClass('statistics-admin')}`} to={siteRoot + 'org/statistics-admin/file/'} onClick={() => this.tabItemClick('statistics-admin')} >\n                    <span className=\"sf2-icon-histogram\"></span>\n                    <span className=\"nav-text\">{gettext('Statistic')}</span>\n                  </Link>\n                </li>\n                <li className=\"nav-item\">\n                  <Link className={`nav-link ellipsis ${this.getActiveClass('deviceadmin')}`} to={siteRoot + 'org/deviceadmin/desktop-devices/'} onClick={() => this.tabItemClick('deviceadmin')} >\n                    <span className=\"sf2-icon-monitor\"></span>\n                    <span className=\"nav-text\">{gettext('Devices')}</span>\n                  </Link>\n                </li>\n                <li className=\"nav-item\">\n                  <Link className={`nav-link ellipsis ${this.getActiveClass('web-settings')}`} to={siteRoot + 'org/web-settings/'} onClick={() => this.tabItemClick('web-settings')} >\n                    <span className=\"sf2-icon-cog2\"></span>\n                    <span className=\"nav-text\">{gettext('Settings')}</span>\n                  </Link>\n                </li>\n                <li className=\"nav-item\">\n                  <Link className={`nav-link ellipsis ${this.getActiveClass('repoadmin')}`} to={siteRoot + 'org/repoadmin/'} onClick={() => this.tabItemClick('repoadmin')} >\n                    <span className=\"sf2-icon-library\"></span>\n                    <span className=\"nav-text\">{gettext('Libraries')}</span>\n                  </Link>\n                </li>\n                <li className=\"nav-item\">\n                  <Link className={`nav-link ellipsis ${this.getActiveClass('users') || this.getActiveClass('admins')}`} to={siteRoot + 'org/useradmin/'} onClick={() => this.tabItemClick('users')} >\n                    <span className=\"sf2-icon-user\"></span>\n                    <span className=\"nav-text\">{gettext('Users')}</span>\n                  </Link>\n                </li>\n                <li className=\"nav-item\">\n                  <Link className={`nav-link ellipsis ${this.getActiveClass('groupadmin')}`} to={siteRoot + 'org/groupadmin/'} onClick={() => this.tabItemClick('groupadmin')}>\n                    <span className=\"sf2-icon-group\"></span>\n                    <span className=\"nav-text\">{gettext('Groups')}</span>\n                  </Link>\n                </li>\n                <li className=\"nav-item\">\n                  <Link className={`nav-link ellipsis ${this.getActiveClass('departmentadmin')}`} to={siteRoot + 'org/departmentadmin/'} onClick={() => this.tabItemClick('departmentadmin')} >\n                    <span className=\"sf2-icon-organization\"></span>\n                    <span className=\"nav-text\">{gettext('Departments')}</span>\n                  </Link>\n                </li>\n                {enableSubscription &&\n                  <li className=\"nav-item\">\n                    <Link className={`nav-link ellipsis ${this.getActiveClass('subscription')}`} to={siteRoot + 'org/subscription/'} onClick={() => this.tabItemClick('subscription')} >\n                      <Icon symbol='currency' />\n                      <span className=\"nav-text\">{''}</span>\n                    </Link>\n                  </li>\n                }\n                <li className=\"nav-item\">\n                  <Link className={`nav-link ellipsis ${this.getActiveClass('publinkadmin')}`} to={siteRoot + 'org/publinkadmin/'} onClick={() => this.tabItemClick('publinkadmin')} >\n                    <span className=\"sf2-icon-link\"></span>\n                    <span className=\"nav-text\">{gettext('Links')}</span>\n                  </Link>\n                </li>\n                <li className=\"nav-item\">\n                  <Link className={`nav-link ellipsis ${this.getActiveClass('logadmin') || this.getActiveClass('file-update') || this.getActiveClass('perm-audit')}`} to={siteRoot + 'org/logadmin/'} onClick={() => this.tabItemClick('logadmin')} >\n                    <span className=\"sf2-icon-clock\"></span>\n                    <span className=\"nav-text\">{gettext('Logs')}</span>\n                  </Link>\n                </li>\n                {enableMultiADFS &&\n                  <li className=\"nav-item\">\n                    <Link className={`nav-link ellipsis ${this.getActiveClass('SAML config')}`} to={siteRoot + 'org/samlconfig/'} onClick={() => this.tabItemClick('SAML config')} >\n                      <span className=\"sf2-icon-cog2\"></span>\n                      <span className=\"nav-text\">{gettext('SAML config')}</span>\n                    </Link>\n                  </li>\n                }\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nSidePanel.propTypes = propTypes;\n\nexport default SidePanel;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-users-admins.js",["3747","3748","3749"],[],"import React, { Component, Fragment } from 'react';\nimport Nav from './org-users-nav';\nimport OrgAdminList from './org-admin-list';\nimport MainPanelTopbar from './main-panel-topbar';\nimport AddOrgAdminDialog from '../../components/dialog/org-add-admin-dialog';\nimport ModalPortal from '../../components/modal-portal';\nimport toaster from '../../components/toast';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport OrgUserInfo from '../../models/org-user';\nimport { gettext, orgID } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nclass OrgUsers extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      orgAdminUsers: [],\n      isShowAddOrgAdminDialog: false\n    };\n  }\n\n  toggleAddOrgAdmin = () => {\n    this.setState({isShowAddOrgAdminDialog: !this.state.isShowAddOrgAdminDialog});\n  };\n\n  initOrgAdmin = () => {\n    seafileAPI.orgAdminListOrgUsers(orgID, true).then(res => {\n      let userList = res.data.user_list.map(item => {\n        return new OrgUserInfo(item);\n      });\n      this.setState({orgAdminUsers: userList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  toggleOrgAdminDelete = (email, username) => {\n    seafileAPI.orgAdminDeleteOrgUser(orgID, email).then(res => {\n      this.setState({\n        orgAdminUsers: this.state.orgAdminUsers.filter(item => item.email != email)\n      });\n      let msg = gettext('Deleted user %s');\n      msg = msg.replace('%s', username);\n      toaster.success(msg);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  toggleRevokeAdmin = (email) => {\n    seafileAPI.orgAdminSetOrgAdmin(orgID, email, false).then(res => {\n      this.setState({\n        orgAdminUsers: this.state.orgAdminUsers.filter(item => item.email != email)\n      });\n      let msg = gettext('Successfully revoke the admin permission of %s');\n      msg = msg.replace('%s', res.data.name);\n      toaster.success(msg);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onAddedOrgAdmin = (userInfo) => {\n    this.state.orgAdminUsers.unshift(userInfo);\n    this.setState({\n      orgAdminUsers: this.state.orgAdminUsers\n    });\n    let msg = gettext('Successfully set %s as admin.');\n    msg = msg.replace('%s', userInfo.email);\n    toaster.success(msg);\n    this.toggleAddOrgAdmin();\n  };\n\n  changeStatus = (email, isActive) => {\n    seafileAPI.orgAdminChangeOrgUserStatus(orgID, email, isActive).then(res => {\n      let users = this.state.orgAdminUsers.map(item => {\n        if (item.email == email) {\n          item['is_active']= res.data['is_active'];\n        }\n        return item;\n      });\n      this.setState({orgAdminUsers: users});\n      toaster.success(gettext('Edit succeeded.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const topBtn = 'btn btn-secondary operation-item';\n    let topbarChildren;\n    topbarChildren = (\n      <Fragment>\n        <button className={topBtn} title={gettext('Add admin')} onClick={this.toggleAddOrgAdmin}>\n          <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Add admin')}\n        </button>\n        {this.state.isShowAddOrgAdminDialog &&\n        <ModalPortal>\n          <AddOrgAdminDialog toggle={this.toggleAddOrgAdmin} onAddedOrgAdmin={this.onAddedOrgAdmin}/>\n        </ModalPortal>\n        }\n      </Fragment>\n    );\n\n    return (\n      <Fragment>\n        <MainPanelTopbar children={topbarChildren}/>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"admins\" />\n            <OrgAdminList\n              currentTab=\"admins\"\n              toggleDelete={this.toggleOrgAdminDelete}\n              toggleRevokeAdmin={this.toggleRevokeAdmin}\n              orgAdminUsers={this.state.orgAdminUsers}\n              initOrgAdmin={this.initOrgAdmin}\n              changeStatus={this.changeStatus}\n            />\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgUsers;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-user-profile.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-group-repos.js",["3750","3751","3752"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\nimport OrgAdminGroupNav from '../../components/org-admin-group-nav';\nimport DeleteRepoDialog from '../../components/dialog/delete-repo-dialog';\nimport MainPanelTopbar from './main-panel-topbar';\n\nimport '../../css/org-admin-user.css';\n\nconst { orgID } = window.org.pageOptions;\n\nclass OrgGroupRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: ''\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.orgAdminListGroupRepos(orgID, this.props.groupID).then((res) => {\n      this.setState(Object.assign({\n        loading: false\n      }, res.data));\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar/>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgAdminGroupNav groupID={this.props.groupID} currentItem='repos' />\n            <div className=\"cur-view-content\">\n              <Content\n                data={this.state}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const {\n      loading, errorMsg, libraries\n    } = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    }\n    if (errorMsg) {\n      return <p className=\"error text-center mt-2\">{errorMsg}</p>;\n    }\n\n    return (\n      <Fragment>\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"4%\">{/*icon*/}</th>\n              <th width=\"35%\">{gettext('Name')}</th>\n              <th width=\"20%\">{gettext('Size')}</th>\n              <th width=\"26%\">{gettext('Shared By')}</th>\n              <th width=\"15%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            {libraries.map((item, index) => {\n              return <Item key={index} data={item} />;\n            })}\n          </tbody>\n        </table>\n      </Fragment>\n    );\n  }\n}\n\nContent.propTypes = {\n  data: PropTypes.object.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      deleted: false,\n      isDeleteRepoDialogOpen: false,\n      isRepoDeleted: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  };\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  };\n\n  handleDeleteIconClick = (e) => {\n    e.preventDefault();\n    this.toggleDeleteRepoDialog();\n  };\n\n  toggleDeleteRepoDialog = () => {\n    this.setState({\n      isDeleteRepoDialogOpen: !this.state.isDeleteRepoDialogOpen\n    });\n  };\n\n  deleteRepo = () => {\n    const repo = this.props.data;\n    seafileAPI.orgAdminDeleteOrgRepo(orgID, repo.repo_id).then((res) => {\n      this.setState({\n        deleted: true,\n        isRepoDeleted: true,\n      });\n      const msg = gettext('Successfully deleted {name}.').replace('{name}', repo.name);\n      toaster.success(msg);\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n\n      this.setState({isRepoDeleted: false});\n    });\n  };\n\n  render() {\n    const { deleted, isOpIconShown, isDeleteRepoDialogOpen } = this.state;\n    const repo = this.props.data;\n\n    if (deleted) {\n      return null;\n    }\n\n    return (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          <td>\n            <img src={Utils.getLibIconUrl(repo, false)} alt={Utils.getLibIconTitle(repo)} title={Utils.getLibIconTitle(repo)} width=\"24\" />\n          </td>\n          <td>{repo.name}</td>\n          <td>{Utils.bytesToSize(repo.size)}</td>\n          <td><Link to={`${siteRoot}org/useradmin/info/${encodeURIComponent(repo.shared_by)}/`}>{repo.shared_by_name}</Link></td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-delete${isOpIconShown ? '' : ' invisible'}`} title={gettext('Delete')} onClick={this.handleDeleteIconClick}></a>\n          </td>\n        </tr>\n        {isDeleteRepoDialogOpen && (\n          <DeleteRepoDialog\n            repo={repo}\n            isRepoDeleted={this.state.isRepoDeleted}\n            onDeleteRepo={this.deleteRepo}\n            toggle={this.toggleDeleteRepoDialog}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  data: PropTypes.object.isRequired,\n};\n\nOrgGroupRepos.propTypes = {\n  groupID: PropTypes.string,\n};\n\nexport default OrgGroupRepos;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-departments-list.js",["3753"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport MainPanelTopbar from './main-panel-topbar';\nimport ModalPortal from '../../components/modal-portal';\nimport AddDepartDialog from '../../components/dialog/org-add-department-dialog';\nimport DeleteDepartDialog from '../../components/dialog/org-delete-department-dialog';\nimport SetGroupQuotaDialog from '../../components/dialog/org-set-group-quota-dialog';\nimport RenameDepartmentDialog from '../../components/dialog/org-rename-department-dialog';\nimport OpMenu from '../../components/dialog/op-menu';\nimport { siteRoot, gettext, orgID, lang } from '../../utils/constants';\nimport '../../css/org-department-item.css';\n\nmoment.locale(lang);\n\nclass OrgDepartmentsList extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groups: null,\n      groupID: '',\n      groupName: '',\n      showDeleteDepartDialog: false,\n      showSetGroupQuotaDialog: false,\n      isShowAddDepartDialog: false,\n      isItemFreezed: false,\n    };\n  }\n\n  componentDidMount() {\n    this.listDepartGroups();\n  }\n\n  listDepartGroups = () => {\n    seafileAPI.orgAdminListDepartGroups(orgID).then(res => {\n      this.setState({ groups: res.data.data });\n    });\n  };\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  onDepartmentNameChanged = (dept) => {\n    this.setState({\n      groups: this.state.groups.map(item => {\n        if (item.id == dept.id) {\n          item.name = dept.name;\n        }\n        return item;\n      })\n    });\n  };\n\n  showDeleteDepartDialog = (group) => {\n    this.setState({ showDeleteDepartDialog: true, groupID: group.id, groupName: group.name });\n  };\n\n  showSetGroupQuotaDialog = (groupID) => {\n    this.setState({ showSetGroupQuotaDialog: true, groupID: groupID });\n  };\n\n  toggleAddDepartDialog = () => {\n    this.setState({ isShowAddDepartDialog: !this.state.isShowAddDepartDialog});\n  };\n\n  toggleCancel = () => {\n    this.setState({\n      showDeleteDepartDialog: false,\n      showSetGroupQuotaDialog: false,\n    });\n  };\n\n  onDepartChanged = () => {\n    this.listDepartGroups();\n  };\n\n  render() {\n    const groups = this.state.groups;\n    const topbarChildren = (\n      <Fragment>\n        <button className='btn btn-secondary operation-item' title={gettext('New Department')} onClick={this.toggleAddDepartDialog}>{gettext('New Department')}\n        </button>\n        {this.state.isShowAddDepartDialog && (\n          <ModalPortal>\n            <AddDepartDialog\n              onDepartChanged={this.onDepartChanged}\n              groupID={this.state.groupID}\n              toggle={this.toggleAddDepartDialog}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n    return (\n      <Fragment>\n        <MainPanelTopbar children={topbarChildren}/>\n        <div className=\"main-panel-center flex-row h-100\">\n          <div className=\"cur-view-container o-auto\">\n            <div className=\"cur-view-path\">\n              <div className=\"fleft\">\n                <h3 className=\"sf-heading\">{gettext('Departments')}</h3>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {groups && groups.length > 0 ?\n                <table>\n                  <thead>\n                    <tr>\n                      <th width=\"40%\">{gettext('Name')}</th>\n                      <th width=\"25%\">{gettext('Created At')}</th>\n                      <th width=\"20%\">{gettext('Quota')}</th>\n                      <th width=\"15%\"></th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {groups.map((group, index) => {\n                      return(\n                        <React.Fragment key={group.id}>\n                          <GroupItem\n                            group={group}\n                            isItemFreezed={this.state.isItemFreezed}\n                            onFreezedItem={this.onFreezedItem}\n                            onUnfreezedItem={this.onUnfreezedItem}\n                            onDepartmentNameChanged={this.onDepartmentNameChanged}\n                            showDeleteDepartDialog={this.showDeleteDepartDialog}\n                            showSetGroupQuotaDialog={this.showSetGroupQuotaDialog}\n                          />\n                        </React.Fragment>\n                      );\n                    })}\n                  </tbody>\n                </table>\n                :\n                <p className=\"no-group\">{gettext('No departments')}</p>\n              }\n            </div>\n            <React.Fragment>\n              {this.state.showDeleteDepartDialog && (\n                <ModalPortal>\n                  <DeleteDepartDialog\n                    toggle={this.toggleCancel}\n                    groupID={this.state.groupID}\n                    groupName={this.state.groupName}\n                    onDepartChanged={this.onDepartChanged}\n                  />\n                </ModalPortal>\n              )}\n              {this.state.showSetGroupQuotaDialog && (\n                <ModalPortal>\n                  <SetGroupQuotaDialog\n                    toggle={this.toggleCancel}\n                    groupID={this.state.groupID}\n                    onDepartChanged={this.onDepartChanged}\n                  />\n                </ModalPortal>\n              )}\n            </React.Fragment>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOpIconShown: false,\n      isRenameDialogOpen: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  };\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Rename':\n        translateResult = gettext('Rename');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  };\n\n  onMenuItemClick = (operation) => {\n    const { group } = this.props;\n    switch(operation) {\n      case 'Rename':\n        this.toggleRenameDialog();\n        break;\n      case 'Delete':\n        this.props.showDeleteDepartDialog(group);\n        break;\n      default:\n        break;\n    }\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  toggleRenameDialog = () => {\n    this.setState({\n      isRenameDialogOpen: !this.state.isRenameDialogOpen\n    });\n  };\n\n  render() {\n    const group = this.props.group;\n    const { highlight, isOpIconShown, isRenameDialogOpen } = this.state;\n    const newHref = siteRoot+ 'org/departmentadmin/groups/' + group.id + '/';\n    return (\n      <Fragment>\n        <tr className={highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n          <td><Link to={newHref}>{group.name}</Link></td>\n          <td>{moment(group.created_at).fromNow()}</td>\n          <td onClick={this.props.showSetGroupQuotaDialog.bind(this, group.id)}>\n            {Utils.bytesToSize(group.quota)}{' '}\n            <span title=\"Edit Quota\" className={`fa fa-pencil-alt attr-action-icon ${highlight ? '' : 'vh'}`}></span>\n          </td>\n          <td>\n            {isOpIconShown &&\n              <OpMenu\n                operations={['Rename', 'Delete']}\n                translateOperations={this.translateOperations}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            }\n          </td>\n        </tr>\n        {isRenameDialogOpen && (\n          <RenameDepartmentDialog\n            orgID={orgID}\n            groupID={group.id}\n            name={group.name}\n            toggle={this.toggleRenameDialog}\n            onDepartmentNameChanged={this.props.onDepartmentNameChanged}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nconst GroupItemPropTypes = {\n  group: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onDepartmentNameChanged: PropTypes.func.isRequired,\n  showSetGroupQuotaDialog: PropTypes.func.isRequired,\n  showDeleteDepartDialog: PropTypes.func.isRequired,\n};\n\nGroupItem.propTypes = GroupItemPropTypes;\n\nexport default OrgDepartmentsList;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-user-shared-repos.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-groups-search-groups.js",["3754","3755","3756","3757"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { Form, FormGroup, Input, Col } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, orgID, siteRoot } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport OrgGroupInfo from '../../models/org-group';\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      showMenu: false,\n      isItemMenuShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        showMenu: true,\n        highlight: true,\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        showMenu: false,\n        highlight: false\n      });\n    }\n  };\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    this.toggleOperationMenu(e);\n  };\n\n  toggleOperationMenu = (e) => {\n    e.stopPropagation();\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow }, () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.setState({\n            highlight: false,\n            showMenu: false,\n          });\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  };\n\n  toggleDelete = () => {\n    this.props.deleteGroupItem(this.props.group);\n  };\n\n  renderGroupHref = (group) => {\n    let groupInfoHref;\n    if (group.creatorName == 'system admin') {\n      groupInfoHref = siteRoot + 'org/departmentadmin/groups/' + group.id + '/';\n    } else {\n      groupInfoHref = siteRoot + 'org/groupadmin/' + group.id + '/';\n    }\n\n    return groupInfoHref;\n  };\n\n  renderGroupCreator = (group) => {\n    let userInfoHref = siteRoot + 'org/useradmin/info/' + group.creatorEmail + '/';\n    if (group.creatorName == 'system admin') {\n      return (\n        <td> -- </td>\n      );\n    } else {\n      return(\n        <td>\n          <a href={userInfoHref} className=\"font-weight-normal\">{group.creatorName}</a>\n        </td>\n      );\n    }\n  };\n\n  render() {\n    let { group } = this.props;\n    let isOperationMenuShow = (group.creatorName != 'system admin') && this.state.showMenu;\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td>\n          <a href={this.renderGroupHref(group)} className=\"font-weight-normal\">{group.groupName}</a>\n        </td>\n        {this.renderGroupCreator(group)}\n        <td>{group.ctime}</td>\n        <td className=\"text-center cursor-pointer\">\n          {isOperationMenuShow &&\n            <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n              <DropdownToggle\n                tag=\"a\"\n                className=\"attr-action-icon fas fa-ellipsis-v\"\n                title={gettext('More operations')}\n                aria-label={gettext('More operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isItemMenuShow}\n                onClick={this.onDropdownToggleClick}\n              />\n              <DropdownMenu>\n                <DropdownItem onClick={this.toggleDelete}>{gettext('Delete')}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nGroupItem.propTypes = {\n  group: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  deleteGroupItem: PropTypes.func.isRequired,\n};\n\nclass OrgGroupsSearchGroupsResult extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  render() {\n    let { orgGroups } = this.props;\n    return (\n      <div className=\"cur-view-content\">\n        <table>\n          <thead>\n            <tr>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"35%\">{gettext('Creator')}</th>\n              <th width=\"23%\">{gettext('Created At')}</th>\n              <th width=\"12%\" className=\"text-center\">{gettext('Operations')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {orgGroups.map(item => {\n              return (\n                <GroupItem\n                  key={item.id}\n                  group={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  deleteGroupItem={this.props.toggleDelete}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n\nOrgGroupsSearchGroupsResult.propTypes = {\n  toggleDelete: PropTypes.func.isRequired,\n  orgGroups: PropTypes.array.isRequired,\n};\n\nclass OrgGroupsSearchGroups extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      query: '',\n      orgGroups: [],\n      isSubmitBtnActive: false,\n      loading: true,\n      errorMsg: '',\n    };\n  }\n\n  componentDidMount () {\n    let params = (new URL(document.location)).searchParams;\n    this.setState({\n      query: params.get('query') || '',\n    }, () => {this.getItems();});\n  }\n\n  getItems = () => {\n    seafileAPI.orgAdminSearchGroup(orgID, this.state.query.trim()).then(res => {\n      let groupList = res.data.group_list.map(item => {\n        return new OrgGroupInfo(item);\n      });\n      this.setState({\n        orgGroups: groupList,\n        loading: false,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  deleteGroupItem = (group) => {\n    seafileAPI.orgAdminDeleteOrgGroup(orgID, group.id).then(res => {\n      this.setState({\n        orgGroups: this.state.orgGroups.filter(item => item.id != group.id)\n      });\n      let msg = gettext('Successfully deleted {name}');\n      msg = msg.replace('{name}', group.groupName);\n      toaster.success(msg);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  handleInputChange = (e) => {\n    this.setState({\n      query: e.target.value\n    }, this.checkSubmitBtnActive);\n  };\n\n  checkSubmitBtnActive = () => {\n    const { query } = this.state;\n    this.setState({\n      isSubmitBtnActive: query.trim()\n    });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      const { isSubmitBtnActive } = this.state;\n      if (isSubmitBtnActive) {\n        this.getItems();\n      }\n    }\n  };\n\n  render() {\n    const { query, isSubmitBtnActive } = this.state;\n\n    return (\n      <Fragment>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Groups')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Search Groups')}</h4>\n                <Form tag={'div'}>\n                  <FormGroup row>\n                    <Col sm={5}>\n                      <Input type=\"text\" name=\"query\" value={query} placeholder={gettext('Search groups')} onChange={this.handleInputChange} onKeyDown={this.handleKeyDown} />\n                    </Col>\n                  </FormGroup>\n                  <FormGroup row>\n                    <Col sm={{size: 5}}>\n                      <button className=\"btn btn-outline-primary\" disabled={!isSubmitBtnActive} onClick={this.getItems}>{gettext('Submit')}</button>\n                    </Col>\n                  </FormGroup>\n                </Form>\n              </div>\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Result')}</h4>\n                <OrgGroupsSearchGroupsResult\n                  toggleDelete={this.deleteGroupItem}\n                  orgGroups={this.state.orgGroups}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgGroupsSearchGroups;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-logs-file-audit.js",["3758","3759","3760","3761","3762","3763","3764","3765"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { siteRoot, gettext, lang } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport OrgLogsFileAuditEvent from '../../models/org-logs-file-audit';\nimport '../../css/org-logs.css';\n\nmoment.locale(lang);\n\nclass OrgLogsFileAudit extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      page: 1,\n      pageNext: false,\n      eventList: [],\n      userSelected: '',\n      repoSelected: '',\n      isItemFreezed: false\n    };\n  }\n\n  componentDidMount() {\n    let page = this.state.page;\n    let email = this.state.userSelected;\n    let repoID = this.state.repoSelected;\n    this.initData(email, repoID, page);\n  }\n\n  initData = (email, repoID, page) => {\n    seafileAPI.orgAdminListFileAudit(email, repoID, page).then(res => {\n      let eventList = res.data.log_list.map(item => {\n        return new OrgLogsFileAuditEvent(item);\n      });\n\n      this.setState({\n        eventList: eventList,\n        pageNext: res.data.page_next,\n        page: res.data.page,\n        userSelected: res.data.user_selected,\n        repoSelected: res.data.repo_selected\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n\n  onChangePageNum = (e, num) => {\n    e.preventDefault();\n    let page = this.state.page;\n\n    if (num == 1) {\n      page = page + 1;\n    } else {\n      page = page - 1;\n    }\n    let email = this.state.userSelected;\n    let repoID = this.state.repoSelected;\n    this.initData(email, repoID, page);\n  };\n\n  filterUser = (userSelected) => {\n    this.setState({ userSelected: userSelected });\n  };\n\n  filterRepo = (repoSelected) => {\n    this.setState({ repoSelected: repoSelected });\n  };\n\n  render() {\n    let eventList = this.state.eventList;\n    return (\n      <div className=\"cur-view-content\">\n        {\n          (this.state.userSelected || this.state.repoSelected) &&\n          <React.Fragment>\n            {this.state.userSelected &&\n              <span className=\"audit-unselect-item\" onClick={this.filterUser.bind(this, null)}>\n                <span className=\"no-deco\">{this.state.userSelected}</span>{' '}\n              </span>\n            }\n            {this.state.repoSelected &&\n              <span className=\"audit-unselect-item\" onClick={this.filterRepo.bind(this, null)}>\n                <span className=\"no-deco\">{this.state.repoSelected}</span>{' '}\n              </span>\n            }\n          </React.Fragment>\n        }\n        <table>\n          <thead>\n            <tr>\n              <th width=\"24%\">{gettext('User')}</th>\n              <th width=\"10%\">{gettext('Type')}</th>\n              <th width=\"13%\">{gettext('IP')}</th>\n              <th width=\"17%\">{gettext('Date')}</th>\n              <th width=\"18%\">{gettext('Library')}</th>\n              <th width=\"18%\">{gettext('File')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {eventList.map((item, index) => {\n              return (\n                <FileAuditItem\n                  key={index}\n                  fileEvent={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  filterUser={this.filterUser}\n                  filterRepo={this.filterRepo}\n                  userSelected={this.state.userSelected}\n                  repoSelected={this.state.repoSelected}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        <div className=\"paginator\">\n          {this.state.page != 1 && <a href=\"#\" onClick={(e) => this.onChangePageNum(e, -1)}>{gettext('Previous')}</a>}\n          {(this.state.page != 1 && this.state.pageNext) && <span> | </span>}\n          {this.state.pageNext && <a href=\"#\" onClick={(e) => this.onChangePageNum(e, 1)}>{gettext('Next')}</a>}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst propTypes = {\n  filterUser: PropTypes.func.isRequired,\n  filterRepo: PropTypes.func.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  fileEvent: PropTypes.object.isRequired,\n  userSelected: PropTypes.string,\n  repoSelected: PropTypes.string,\n};\n\nclass FileAuditItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      showMenu: false,\n      isItemMenuShow: false,\n      userDropdownOpen: false,\n      repoDropdownOpen: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        showMenu: true,\n        highlight: true,\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        showMenu: false,\n        highlight: false\n      });\n    }\n  };\n\n  toggleUserDropdown = () => {\n    this.setState({ userDropdownOpen: !this.state.userDropdownOpen });\n  };\n\n  renderUser = (fileEvent) => {\n    if (!fileEvent.user_email) {\n      return gettext('Anonymous User');\n    }\n\n    return (\n      <span>\n        <a href={siteRoot + 'org/useradmin/info/' + fileEvent.user_email + '/'}>{fileEvent.user_name}</a>{' '}\n        <Dropdown size='sm' isOpen={this.state.userDropdownOpen} toggle={this.toggleUserDropdown}\n          className={this.state.highlight ? '' : 'vh'} tag=\"span\">\n          <DropdownToggle tag=\"i\" className=\"sf-dropdown-toggle sf2-icon-caret-down\"></DropdownToggle>\n          <DropdownMenu>\n            <DropdownItem onClick={this.props.filterUser.bind(this, fileEvent.user_email)}>\n              {gettext('Only Show')}{' '}\n              <span className=\"font-weight-bold\">{fileEvent.user_name}</span>\n            </DropdownItem>\n          </DropdownMenu>\n        </Dropdown>\n      </span>\n    );\n\n  };\n\n  renderType = (type) => {\n    if (type.indexOf('web') != -1) {\n      type = 'web';\n    }\n    if (type.indexOf('api') != -1) {\n      type = 'api';\n    }\n    if (type.indexOf('share-link') != -1) {\n      type = 'share link';\n    }\n    return type;\n  };\n\n  toggleRepoDropdown = () => {\n    this.setState({ repoDropdownOpen: !this.state.repoDropdownOpen });\n  };\n\n  renderRepo = (fileEvent) => {\n    let repoName = 'Deleted';\n    if (fileEvent.repo_name) {\n      repoName = fileEvent.repo_name;\n    }\n    return (\n      <span>\n        <span>{repoName}</span>\n        { fileEvent.repo_name &&\n          <Dropdown size='sm' isOpen={this.state.repoDropdownOpen} toggle={this.toggleRepoDropdown}\n            className={this.state.highlight ? '' : 'vh'} >\n            <DropdownToggle tag=\"i\" className=\"sf-dropdown-toggle sf2-icon-caret-down\"></DropdownToggle>\n            <DropdownMenu>\n              <DropdownItem size='sm' onClick={this.props.filterRepo.bind(this, fileEvent.repo_name)}>\n                {gettext('Only Show')}{' '}<span className=\"font-weight-bold\">{fileEvent.repo_name}</span></DropdownItem>\n            </DropdownMenu>\n          </Dropdown>\n        }\n      </span>\n    );\n  };\n\n  render() {\n    let { fileEvent } = this.props;\n    if (this.props.userSelected && fileEvent.user_email !== this.props.userSelected ) {\n      return null;\n    } else if (this.props.repoSelected && fileEvent.repo_name !== this.props.repoSelected) {\n      return null;\n    } else {\n      return (\n        <tr className={this.state.highlight ? 'tr-highlight' : ''}\n          onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n          <td>{this.renderUser(fileEvent)}</td>\n          <td>{this.renderType(fileEvent.type)}</td>\n          <td>{fileEvent.ip}</td>\n          <td>{moment(fileEvent.time).format('YYYY-MM-DD HH:mm:ss')}</td>\n          <td>{this.renderRepo(fileEvent)}</td>\n          <td><span title={fileEvent.file_path}>{fileEvent.file_name}</span></td>\n        </tr>\n      );\n    }\n  }\n}\n\nFileAuditItem.propTypes = propTypes;\n\nexport default OrgLogsFileAudit;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-info.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-departments.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-group-members.js",["3766","3767","3768"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport OrgAdminGroupNav from '../../components/org-admin-group-nav';\nimport MainPanelTopbar from './main-panel-topbar';\n\nimport '../../css/org-admin-user.css';\n\nconst { orgID } = window.org.pageOptions;\n\nclass OrgGroupMembers extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: ''\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.orgAdminListGroupMembers(orgID, this.props.groupID).then((res) => {\n      this.setState(Object.assign({\n        loading: false\n      }, res.data));\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar/>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgAdminGroupNav groupID={this.props.groupID} currentItem='members' />\n            <div className=\"cur-view-content\">\n              <Content\n                data={this.state}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const {\n      loading, errorMsg, members\n    } = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    }\n    if (errorMsg) {\n      return <p className=\"error text-center mt-2\">{errorMsg}</p>;\n    }\n\n    return (\n      <Fragment>\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"10%\"></th>\n              <th width=\"50%\">{gettext('Name')}</th>\n              <th width=\"40%\">{gettext('Role')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {members.map((item, index) => {\n              return <Item key={index} data={item} />;\n            })}\n          </tbody>\n        </table>\n      </Fragment>\n    );\n  }\n}\n\nContent.propTypes = {\n  data: PropTypes.object.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getRoleText() {\n    switch (this.props.data.role) {\n      case 'Owner':\n        return gettext('Owner');\n      case 'Admin':\n        return gettext('Admin');\n      case 'Member':\n        return gettext('Member');\n    }\n  }\n\n  render() {\n    const item = this.props.data;\n    return (\n      <Fragment>\n        <tr>\n          <td className=\"text-center\">\n            <img src={item.avatar_url} alt=\"\" className=\"avatar\" width=\"32\" />\n          </td>\n          <td>\n            <Link to={`${siteRoot}org/useradmin/info/${encodeURIComponent(item.email)}/`}>{item.name}</Link>\n          </td>\n          <td>\n            {this.getRoleText()}\n          </td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  data: PropTypes.object.isRequired,\n};\n\nOrgGroupMembers.propTypes = {\n  groupID: PropTypes.string,\n};\n\nexport default OrgGroupMembers;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-logs.js",["3769"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport MainPanelTopbar from './main-panel-topbar';\n\nclass OrgLogs extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  tabItemClick = (param) => {\n    this.props.tabItemClick(param);\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar/>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path org-user-nav\">\n              <ul className=\"nav\">\n                <li className=\"nav-item\" onClick={() => this.tabItemClick('logadmin')}>\n                  <Link\n                    className={`nav-link ${this.props.currentTab === 'logadmin' ? 'active': ''}`}\n                    to={siteRoot + 'org/logadmin/'} title={gettext('File Access')}>{gettext('File Access')}\n                  </Link>\n                </li>\n                <li className=\"nav-item\" onClick={() => this.tabItemClick('file-update')}>\n                  <Link\n                    className={`nav-link ${this.props.currentTab === 'file-update' ? 'active': ''}`}\n                    to={siteRoot + 'org/logadmin/file-update/'} title={gettext('File Update')}>{gettext('File Update')}\n                  </Link>\n                </li>\n                <li className=\"nav-item\" onClick={() => this.tabItemClick('perm-audit')}>\n                  <Link\n                    className={`nav-link ${this.props.currentTab === 'perm-audit' ? 'active': ''}`}\n                    to={siteRoot + 'org/logadmin/perm-audit/'} title={gettext('Permission')}>{gettext('Permission')}\n                  </Link>\n                </li>\n              </ul>\n            </div>\n            {this.props.children}\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nconst propTypes = {\n  currentTab: PropTypes.string.isRequired,\n  tabItemClick: PropTypes.func.isRequired,\n  children: PropTypes.any.isRequired,\n};\n\nOrgLogs.propTypes = propTypes;\n\nexport default OrgLogs;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-logs-file-update.js",["3770","3771","3772","3773","3774","3775"],[],"import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { siteRoot, gettext, lang } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport OrgLogsFileUpdateEvent from '../../models/org-logs-file-update';\nimport ModalPortal from '../../components/modal-portal';\nimport FileUpdateDetailDialog from '../../components/dialog/org-logs-file-update-detail';\nimport '../../css/org-logs.css';\n\nmoment.locale(lang);\n\nclass OrgLogsFileUpdate extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      page: 1,\n      pageNext: false,\n      eventList: [],\n      userSelected: '',\n      repoSelected: '',\n      isItemFreezed: false,\n      showDetails: false,\n      repoID: '',\n      commitID: ''\n    };\n  }\n\n  componentDidMount() {\n    let page = this.state.page;\n    let email = this.state.userSelected;\n    let repoID = this.state.repoSelected;\n    this.initData(email, repoID, page);\n  }\n\n  initData = (email, repoID, page) => {\n    seafileAPI.orgAdminListFileUpdate(email, repoID, page).then(res => {\n      let eventList = res.data.log_list.map(item => {\n        return new OrgLogsFileUpdateEvent(item);\n      });\n      this.setState({\n        eventList: eventList,\n        pageNext: res.data.page_next,\n        page: res.data.page,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onChangePageNum = (e, num) => {\n    e.preventDefault();\n    let page = this.state.page;\n\n    if (num == 1) {\n      page = page + 1;\n    } else {\n      page = page - 1;\n    }\n    let email = this.state.userSelected;\n    let repoID = this.state.repoSelected;\n    this.initData(email, repoID, page);\n  };\n\n  toggleCancelDetail = () => {\n    this.setState({\n      showDetails: !this.state.showDetails\n    });\n  };\n\n  onDetails = (e, fileEvent) => {\n    e.preventDefault();\n    this.setState({\n      showDetails: !this.state.showDetails,\n      repoID: fileEvent.repo_id,\n      commitID: fileEvent.repo_commit_id\n    });\n  };\n\n  filterUser = (userSelected) => {\n    this.setState({ userSelected: userSelected });\n  };\n\n  filterRepo = (repoSelected) => {\n    this.setState({ repoSelected: repoSelected });\n  };\n\n  render() {\n    let eventList = this.state.eventList;\n    return (\n      <div className=\"cur-view-content\">\n        {\n          (this.state.userSelected || this.state.repoSelected) &&\n          <React.Fragment>\n            {this.state.userSelected &&\n              <span className=\"audit-unselect-item\" onClick={this.filterUser.bind(this, null)}>\n                <span className=\"no-deco\">{this.state.userSelected}</span>{' '}\n              </span>\n            }\n            {this.state.repoSelected &&\n              <span className=\"audit-unselect-item\" onClick={this.filterRepo.bind(this, null)}>\n                <span className=\"no-deco\">{this.state.repoSelected}</span>{' '}\n              </span>\n            }\n          </React.Fragment>\n        }\n        <table>\n          <thead>\n            <tr>\n              <th width=\"25%\">{gettext('User')}</th>\n              <th width=\"17%\">{gettext('Date')}</th>\n              <th width=\"25%\">{gettext('Library')}</th>\n              <th width=\"33%\">{gettext('Action')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {eventList.map((item, index) => {\n              return (\n                <FileUpdateItem\n                  key={index}\n                  fileEvent={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onDetails={this.onDetails}\n                  filterUser={this.filterUser}\n                  filterRepo={this.filterRepo}\n                  userSelected={this.state.userSelected}\n                  repoSelected={this.state.repoSelected}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        <div className=\"paginator\">\n          {this.state.page != 1 && <a href=\"#\" onClick={(e) => this.onChangePageNum(e, -1)}>{gettext('Previous')}</a>}\n          {(this.state.page != 1 && this.state.pageNext) && <span> | </span>}\n          {this.state.pageNext && <a href=\"#\" onClick={(e) => this.onChangePageNum(e, 1)}>{gettext('Next')}</a>}\n        </div>\n        {this.state.showDetails &&\n          <ModalPortal>\n            <FileUpdateDetailDialog\n              repoID={this.state.repoID}\n              commitID={this.state.commitID}\n              toggleCancel={this.toggleCancelDetail}\n            />\n          </ModalPortal>\n        }\n      </div>\n    );\n  }\n}\n\nconst propTypes = {\n  filterUser: PropTypes.func.isRequired,\n  filterRepo: PropTypes.func.isRequired,\n  onDetails: PropTypes.func.isRequired,\n  userSelected: PropTypes.string.isRequired,\n  repoSelected: PropTypes.string.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  fileEvent: PropTypes.object.isRequired,\n};\n\n\nclass FileUpdateItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      showMenu: false,\n      isItemMenuShow: false,\n      userDropdownOpen: false,\n      repoDropdownOpen: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        showMenu: true,\n        highlight: true,\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        showMenu: false,\n        highlight: false\n      });\n    }\n  };\n\n  toggleUserDropdown = () => {\n    this.setState({ userDropdownOpen: !this.state.userDropdownOpen });\n  };\n\n  renderUser = (fileEvent) => {\n    if (!fileEvent.user_email) {\n      return gettext('Anonymous User');\n    }\n\n    return (\n      <span>\n        <a href={siteRoot + 'org/useradmin/info/' + fileEvent.user_email + '/'}>{fileEvent.user_name}</a>{' '}\n        <Dropdown size='sm' isOpen={this.state.userDropdownOpen} toggle={this.toggleUserDropdown}\n          className={this.state.highlight ? '' : 'vh'} tag=\"span\">\n          <DropdownToggle tag=\"i\" className=\"sf-dropdown-toggle sf2-icon-caret-down\"></DropdownToggle>\n          <DropdownMenu>\n            <DropdownItem onClick={this.props.filterUser.bind(this, fileEvent.user_email)}>\n              {gettext('Only Show')}{' '}<span className=\"font-weight-bold\">{fileEvent.user_name}</span>\n            </DropdownItem>\n          </DropdownMenu>\n        </Dropdown>\n      </span>\n    );\n  };\n\n  toggleRepoDropdown = () => {\n    this.setState({ repoDropdownOpen: !this.state.repoDropdownOpen });\n  };\n\n  renderRepo = (fileEvent) => {\n    let repoName = 'Deleted';\n    if (fileEvent.repo_name) {\n      repoName = fileEvent.repo_name;\n    }\n    return (\n      <span>\n        <span>{repoName}</span>\n        { fileEvent.repo_name &&\n          <Dropdown size='sm' isOpen={this.state.repoDropdownOpen} toggle={this.toggleRepoDropdown}\n            className={this.state.highlight ? '' : 'vh'} >\n            <DropdownToggle tag=\"i\" className=\"sf-dropdown-toggle sf2-icon-caret-down\"></DropdownToggle>\n            <DropdownMenu>\n              <DropdownItem size='sm' onClick={this.props.filterRepo.bind(this, fileEvent.repo_name)}>\n                {gettext('Only Show')}{' '}\n                <span className=\"font-weight-bold\">{fileEvent.repo_name}</span>\n              </DropdownItem>\n            </DropdownMenu>\n          </Dropdown>\n        }\n      </span>\n    );\n  };\n\n  renderAction = (fileEvent) => {\n    if (fileEvent.repo_encrypted || !fileEvent.repo_id) {\n      return <td>{fileEvent.description}</td>;\n    }\n\n    return (\n      <td>{fileEvent.description}\n        <a className=\"font-weight-normal text-muted ml-1\" href='#'\n          onClick={(e) => this.props.onDetails(e, fileEvent)}>{gettext('Details')}</a>\n      </td>\n    );\n  };\n\n  render() {\n    let { fileEvent } = this.props;\n    if (this.props.userSelected && fileEvent.user_email !== this.props.userSelected ) {\n      return null;\n    } else if (this.props.repoSelected && fileEvent.repo_name !== this.props.repoSelected) {\n      return null;\n    } else {\n      return (\n        <tr className={this.state.highlight ? 'tr-highlight' : ''}\n          onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n          <td>{this.renderUser(fileEvent)}</td>\n          <td>{moment(fileEvent.time).format('YYYY-MM-DD HH:mm:ss')}</td>\n          <td>{this.renderRepo(fileEvent)}</td>\n          {this.renderAction(fileEvent)}\n        </tr>\n      );\n    }\n  }\n}\n\nFileUpdateItem.propTypes = propTypes;\n\nexport default OrgLogsFileUpdate;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-links.js",["3776","3777"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport MainPanelTopbar from './main-panel-topbar';\nimport ShareAdminLinkEnhanced from '../../services/share-admin-link-enhanced';\n\nclass OrgLinks extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      linkList: null,\n      page: 1,\n      pageNext: false,\n      isItemFreezed: false,\n      isShowLinkDialog: false,\n      currentLink: null,\n    };\n  }\n\n  listOrgLinks = (page) => {\n    seafileAPI.orgAdminListOrgLinks(page).then(res => {\n      const data = res.data;\n      this.setState({\n        linkList: data.link_list,\n        page: data.page,\n        pageNext: data.page_next,\n      });\n    });\n  };\n\n  onFreezedItem = () => {\n    this.setState({ isItemFreezed: true });\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({ isItemFreezed: false });\n  };\n\n  onChangePageNum = (event, num) => {\n    event.preventDefault();\n    let page = this.state.page;\n    if (num === 1) {\n      page = page + 1;\n    } else {\n      page = page - 1;\n    }\n    this.listOrgLinks(page);\n  };\n\n  deleteOrgLink = (token) => {\n    seafileAPI.orgAdminDeleteOrgLink(token).then(res => {\n      if (res.data.success === true) {\n        this.listOrgLinks(this.state.page);\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  openLinkDialog = (link) => {\n    this.setState({ currentLink: link });\n    this.toggleLinkDialog();\n  };\n\n  toggleLinkDialog = () => {\n    this.setState({ isShowLinkDialog: !this.state.isShowLinkDialog });\n  };\n\n  componentDidMount() {\n    this.listOrgLinks(this.state.page);\n  }\n\n  render() {\n    const linkList = this.state.linkList;\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('All Public Links')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <table>\n                <thead>\n                  <tr>\n                    <th width=\"50%\">{gettext('Name')}</th>\n                    <th width=\"15%\">{gettext('Owner')}</th>\n                    <th width=\"15%\">{gettext('Created At')}</th>\n                    <th width=\"10%\">{gettext('Count')}</th>\n                    <th width=\"10%\"></th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {linkList && linkList.map((item, index) => {\n                    return (\n                      <React.Fragment key={index}>\n                        <RepoItem\n                          link={item}\n                          isItemFreezed={this.state.isItemFreezed}\n                          onFreezedItem={this.onFreezedItem}\n                          onUnfreezedItem={this.onUnfreezedItem}\n                          deleteOrgLink={this.deleteOrgLink}\n                          openLinkDialog={this.openLinkDialog}\n                        />\n                      </React.Fragment>\n                    );\n                  })}\n                </tbody>\n              </table>\n              <div className=\"paginator\">\n                {this.state.page !== 1 && <a href=\"#\" onClick={(e) => this.onChangePageNum(e, -1)}>{gettext('Previous')}</a>}\n                {(this.state.page !== 1 && this.state.pageNext) && <span> | </span>}\n                {this.state.pageNext && <a href=\"#\" onClick={(e) => this.onChangePageNum(e, 1)}>{gettext('Next')}</a>}\n              </div>\n            </div>\n          </div>\n        </div>\n        {this.state.isShowLinkDialog && this.state.currentLink &&\n          <ShareAdminLinkEnhanced\n            link={this.state.currentLink.link}\n            password={this.state.currentLink.password}\n            viewCount={this.state.currentLink.view_count}\n            isShareLink={true}\n            toggleDialog={this.toggleLinkDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst propTypes = {\n  link: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  deleteOrgLink: PropTypes.func.isRequired,\n  openLinkDialog: PropTypes.func.isRequired,\n};\n\nclass RepoItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      showMenu: false,\n      isItemMenuShow: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({ showMenu: true, highlight: true });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({ showMenu: false, highlight: false });\n    }\n  };\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    this.toggleOperationMenu(e);\n  };\n\n  toggleOperationMenu = (e) => {\n    e.stopPropagation();\n    this.setState(\n      { isItemMenuShow: !this.state.isItemMenuShow }, () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.setState({\n            highlight: false,\n            showMenu: false,\n          });\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  };\n\n  render() {\n    const { link, deleteOrgLink } = this.props;\n    const href = siteRoot + 'org/useradmin/info/' + encodeURIComponent(link.owner_email) + '/';\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} >\n        <td>{link.name}</td>\n        <td><a href={href}>{link.owner_name}</a></td>\n        <td>{moment(link.created_time).fromNow()}</td>\n        <td>{link.view_count}</td>\n        <td className=\"cursor-pointer text-center\">\n          {this.state.showMenu &&\n            <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n              <DropdownToggle\n                tag=\"a\"\n                className=\"attr-action-icon fas fa-ellipsis-v\"\n                title={gettext('More operations')}\n                aria-label={gettext('More operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isItemMenuShow}\n                onClick={this.onDropdownToggleClick}\n              />\n              <DropdownMenu>\n                <DropdownItem onClick={deleteOrgLink.bind(this, link.token)}>{gettext('Delete')}</DropdownItem>\n                <DropdownItem onClick={this.props.openLinkDialog.bind(this, link)}>{gettext('View Link')}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nRepoItem.propTypes = propTypes;\n\nexport default OrgLinks;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-logs-perm-audit.js",["3778","3779","3780","3781","3782","3783","3784","3785","3786","3787","3788"],[],"import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { siteRoot, gettext, lang } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport OrgLogsFilePermEvent from '../../models/org-logs-perm-audit';\nimport '../../css/org-logs.css';\n\nmoment.locale(lang);\n\nclass OrgLogsFileUpdate extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      page: 1,\n      pageNext: false,\n      eventList: [],\n      userSelected: '',\n      repoSelected: '',\n      isItemFreezed: false\n    };\n  }\n\n  componentDidMount() {\n    let page = this.state.page;\n    let email = this.state.userSelected;\n    let repoID = this.state.repoSelected;\n    this.initData(email, repoID, page);\n  }\n\n  initData = (email, repoID, page) => {\n    seafileAPI.orgAdminListPermAudit(email, repoID, page).then(res => {\n      let eventList = res.data.log_list.map(item => {\n        return new OrgLogsFilePermEvent(item);\n      });\n\n      this.setState({\n        eventList: eventList,\n        pageNext: res.data.page_next,\n        page: res.data.page,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onChangePageNum = (e, num) => {\n    e.preventDefault();\n    let page = this.state.page;\n\n    if (num == 1) {\n      page = page + 1;\n    } else {\n      page = page - 1;\n    }\n    this.initData(page);\n  };\n\n  filterUser = (userSelected) => {\n    this.setState({ userSelected: userSelected });\n  };\n\n  render() {\n    let eventList = this.state.eventList;\n    return (\n      <div className=\"cur-view-content\">\n        {this.state.userSelected &&\n          <span className=\"audit-unselect-item\" onClick={this.filterUser.bind(this, null)}>\n            <span className=\"no-deco\">{this.state.userSelected}</span>{' '}\n          </span>\n        }\n        <table>\n          <thead>\n            <tr>\n              <th width=\"18%\">{gettext('Share From')}</th>\n              <th width=\"15%\">{gettext('Share To')}</th>\n              <th width=\"8%\">{gettext('Actions')}</th>\n              <th width=\"13%\">{gettext('Permission')}</th>\n              <th width=\"15%\">{gettext('Library')}</th>\n              <th width=\"15%\">{gettext('Folder')}</th>\n              <th width=\"16%\">{gettext('Date')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {eventList.map((item, index) => {\n              return (\n                <PermAuditItem\n                  key={index}\n                  permEvent={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  filterUser={this.filterUser}\n                  userSelected={this.state.userSelected}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        <div className=\"paginator\">\n          {this.state.page != 1 && <a href=\"#\" onClick={(e) => this.onChangePageNum(e, -1)}>{gettext('Previous')}</a>}\n          {(this.state.page != 1 && this.state.pageNext) && <span> | </span>}\n          {this.state.pageNext && <a href=\"#\" onClick={(e) => this.onChangePageNum(e, 1)}>{gettext('Next')}</a>}\n        </div>\n      </div>\n    );\n  }\n}\n\n\nconst propTypes = {\n  filterUser: PropTypes.func.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  userSelected: PropTypes.string.isRequired,\n  permEvent: PropTypes.object.isRequired,\n};\n\nclass PermAuditItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      showMenu: false,\n      isItemMenuShow: false,\n      userDropdownOpen: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        showMenu: true,\n        highlight: true,\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        showMenu: false,\n        highlight: false\n      });\n    }\n  };\n\n  renderFromUser = (permEvent) => {\n    if (!permEvent.from_user_email) {\n      return gettext('Anonymous User');\n    }\n    return (\n      <span>\n        <a href={siteRoot + 'org/useradmin/info/' + permEvent.from_user_email + '/'}>{permEvent.from_user_name}</a>{' '}\n        <Dropdown size='sm' isOpen={this.state.userDropdownOpen} toggle={this.toggleUserDropdown}\n          className={this.state.highlight ? '' : 'vh'} tag=\"span\">\n          <DropdownToggle tag=\"i\" className=\"sf-dropdown-toggle sf2-icon-caret-down\"></DropdownToggle>\n          <DropdownMenu>\n            <DropdownItem onClick={this.props.filterUser.bind(this, permEvent.from_user_email)}>\n              {gettext('Only Show')}{' '}\n              <span className=\"font-weight-bold\">{permEvent.from_user_name}</span>\n            </DropdownItem>\n          </DropdownMenu>\n        </Dropdown>\n      </span>\n    );\n  };\n\n  toggleUserDropdown = () => {\n    this.setState({ userDropdownOpen: !this.state.userDropdownOpen });\n  };\n\n  renderToUser = (permEvent) => {\n    if (permEvent.type.indexOf('public') != -1) {\n      return <a href={siteRoot + 'org/'}>{gettext('Organization')}</a>;\n    }\n\n    if (permEvent.type.indexOf('group') != -1) {\n      if (permEvent.to_group_name) {\n        return <a href={siteRoot + 'org/groupadmin/' + permEvent.to_group_id + '/'}>{permEvent.to_group_name}</a>;\n      }\n      return 'Deleted';\n    }\n\n    if (permEvent.type.indexOf('user') != -1) {\n      return <a href={siteRoot + 'org/useradmin/info/' + permEvent.to_user_email + '/'}>{permEvent.to_user_name}</a>;\n    }\n\n  };\n\n  renderType = (type) => {\n    if (type.indexOf('add') != -1) {\n      type = 'Add';\n    }\n    if (type.indexOf('modify') != -1) {\n      type = 'Modify';\n    }\n    if (type.indexOf('delete') != -1) {\n      type = 'Delete';\n    }\n    return type;\n  };\n\n  renderRepo = (permEvent) => {\n    let repoName = 'Deleted';\n    if (permEvent.repo_name) {\n      repoName = permEvent.repo_name;\n    }\n    return repoName;\n  };\n\n  renderFolder = (name) => {\n    let folderName = '/';\n    if (name) {\n      folderName = name;\n    }\n    return folderName;\n  };\n\n  render() {\n    let { permEvent } = this.props;\n    if (this.props.userSelected && permEvent.from_user_email !== this.props.userSelected ) {\n      return null;\n    } else {\n      return (\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n          <td>{this.renderFromUser(permEvent)}</td>\n          <td>{this.renderToUser(permEvent)}</td>\n          <td>{this.renderType(permEvent.type)}</td>\n          <td>{Utils.sharePerms(permEvent.permission)}</td>\n          <td>{this.renderRepo(permEvent)}</td>\n          <td>{this.renderFolder(permEvent.folder_name)}</td>\n          <td>{moment(permEvent.time).format('YYYY-MM-DD HH:mm:ss')}</td>\n        </tr>\n      );\n    }\n  }\n}\n\nPermAuditItem.propTypes = propTypes;\n\nexport default OrgLogsFileUpdate;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-subscription.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-saml-config.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-user-repos.js",["3789","3790"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\nimport OrgAdminUserNav from '../../components/org-admin-user-nav';\nimport DeleteRepoDialog from '../../components/dialog/delete-repo-dialog';\nimport MainPanelTopbar from './main-panel-topbar';\n\nimport '../../css/org-admin-user.css';\n\nconst { orgID } = window.org.pageOptions;\n\nclass OrgUserOwnedRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: ''\n    };\n  }\n\n  componentDidMount() {\n    const email = decodeURIComponent(this.props.email);\n    seafileAPI.orgAdminGetOrgUserOwnedRepos(orgID, email).then((res) => {\n      this.setState(Object.assign({\n        loading: false\n      }, res.data));\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar/>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgAdminUserNav email={this.props.email} currentItem='owned-repos' />\n            <div className=\"cur-view-content\">\n              <Content\n                data={this.state}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nclass Content extends Component {\n  render() {\n    const {\n      loading, errorMsg, repo_list\n    } = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    }\n    if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    }\n\n    return (\n      <Fragment>\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"4%\">{/*icon*/}</th>\n              <th width=\"35%\">{gettext('Name')}</th>\n              <th width=\"16%\">{gettext('Size')}</th>\n              <th width=\"25%\">{gettext('Last Update')}</th>\n              <th width=\"20%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            {repo_list.map((item, index) => {\n              return <Item key={index} data={item} />;\n            })}\n          </tbody>\n        </table>\n      </Fragment>\n    );\n  }\n}\n\nContent.propTypes = {\n  data: PropTypes.object.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      deleted: false,\n      isDeleteRepoDialogOpen: false,\n      isRepoDeleted: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  };\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  };\n\n  handleDeleteIconClick = (e) => {\n    e.preventDefault();\n    this.toggleDeleteRepoDialog();\n  };\n\n  toggleDeleteRepoDialog = () => {\n    this.setState({\n      isDeleteRepoDialogOpen: !this.state.isDeleteRepoDialogOpen\n    });\n  };\n\n  deleteRepo = () => {\n    const repo = this.props.data;\n    seafileAPI.orgAdminDeleteOrgRepo(orgID, repo.repo_id).then((res) => {\n      this.setState({\n        deleted: true,\n        isRepoDeleted: true,\n      });\n      const msg = gettext('Successfully deleted {name}.').replace('{name}', repo.repo_name);\n      toaster.success(msg);\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n\n      this.setState({isRepoDeleted: false});\n    });\n  };\n\n  render() {\n    const { deleted, isOpIconShown, isDeleteRepoDialogOpen } = this.state;\n    const repo = this.props.data;\n\n    if (deleted) {\n      return null;\n    }\n\n    return (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          <td>\n            <img src={Utils.getLibIconUrl(repo, false)} alt={Utils.getLibIconTitle(repo)} title={Utils.getLibIconTitle(repo)} width=\"24\" />\n          </td>\n          <td>{repo.repo_name}</td>\n          <td>{Utils.bytesToSize(repo.size)}</td>\n          <td title={moment(repo.last_modified).format('LLLL')}>{moment(repo.last_modified).format('YYYY-MM-DD')}</td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-delete${isOpIconShown ? '' : ' invisible'}`} title={gettext('Delete')} onClick={this.handleDeleteIconClick}></a>\n          </td>\n        </tr>\n        {isDeleteRepoDialogOpen && (\n          <DeleteRepoDialog\n            repo={repo}\n            isRepoDeleted={this.state.isRepoDeleted}\n            onDeleteRepo={this.deleteRepo}\n            toggle={this.toggleDeleteRepoDialog}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  data: PropTypes.object.isRequired,\n};\n\nOrgUserOwnedRepos.propTypes = {\n  email: PropTypes.string,\n};\n\n\nexport default OrgUserOwnedRepos;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-users-search-users.js",["3791","3792","3793","3794","3795"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Form, FormGroup, Input, Col } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, orgID } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport UserItem from './org-user-item';\nimport OrgUserInfo from '../../models/org-user';\n\nclass OrgUsersSearchUsersResult extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  render() {\n    let { orgUsers, changeStatus } = this.props;\n    return (\n      <div className=\"cur-view-content\">\n        <table>\n          <thead>\n            <tr>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"15%\">{gettext('Status')}</th>\n              <th width=\"20%\">\n                <a className=\"d-inline-block table-sort-op\" href=\"#\" >{gettext('Space Used')}</a> / {gettext('Quota')}\n              </th>\n              <th width=\"25%\">{gettext('Created At')} / {gettext('Last Login')}</th>\n              <th width=\"10%\">{/*Operations*/}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {orgUsers.map((item, index) => {\n              return (\n                <UserItem\n                  key={index}\n                  user={item}\n                  currentTab=\"users\"\n                  isItemFreezed={this.state.isItemFreezed}\n                  toggleDelete={this.props.toggleDelete}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  changeStatus={changeStatus}\n                />\n              );})}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n\nOrgUsersSearchUsersResult.propTypes = {\n  toggleDelete: PropTypes.func.isRequired,\n  orgUsers: PropTypes.array.isRequired,\n  changeStatus: PropTypes.func.isRequired,\n};\n\nclass OrgUsersSearchUsers extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      query: '',\n      orgUsers: [],\n      org_id: '',\n      isSubmitBtnActive: false,\n      loading: true,\n      errorMsg: '',\n    };\n  }\n\n  componentDidMount () {\n    let params = (new URL(document.location)).searchParams;\n    this.setState({\n      query: params.get('query') || '',\n    }, () => {this.getItems();});\n  }\n\n  getItems = () => {\n    seafileAPI.orgAdminSearchUser(orgID, this.state.query.trim()).then(res => {\n      let userList = res.data.user_list.map(item => {\n        return new OrgUserInfo(item);\n      });\n      this.setState({\n        orgUsers: userList,\n        loading: false,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  deleteUser = (email, username) => {\n    seafileAPI.orgAdminDeleteOrgUser(orgID, email).then(res => {\n      let newUserList = this.state.orgUsers.filter(item => {\n        return item.email != email;\n      });\n      this.setState({orgUsers: newUserList});\n      let msg = gettext('Deleted user %s');\n      msg = msg.replace('%s', username);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  updateUser = (email, key, value) => {\n    seafileAPI.sysAdminUpdateUser(email, key, value).then(res => {\n      let newUserList = this.state.orgUsers.map(item => {\n        if (item.email == email) {\n          item[key]= res.data[key];\n        }\n        return item;\n      });\n      this.setState({orgUsers: newUserList});\n      const msg = (key == 'is_active' && value) ?\n        res.data.update_status_tip : gettext('Edit succeeded');\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  handleInputChange = (e) => {\n    this.setState({\n      query: e.target.value\n    }, this.checkSubmitBtnActive);\n  };\n\n  checkSubmitBtnActive = () => {\n    const { query } = this.state;\n    this.setState({\n      isSubmitBtnActive: query.trim()\n    });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      const { isSubmitBtnActive } = this.state;\n      if (isSubmitBtnActive) {\n        this.getItems();\n      }\n    }\n  };\n\n  changeStatus = (email, isActive) => {\n    seafileAPI.orgAdminChangeOrgUserStatus(orgID, email, isActive).then(res => {\n      let users = this.state.orgUsers.map(item => {\n        if (item.email == email) {\n          item['is_active']= res.data['is_active'];\n        }\n        return item;\n      });\n      this.setState({orgUsers: users});\n      toaster.success(gettext('Edit succeeded.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { query, isSubmitBtnActive } = this.state;\n\n    return (\n      <Fragment>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Users')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Search Users')}</h4>\n                <Form tag={'div'}>\n                  <FormGroup row>\n                    <Col sm={5}>\n                      <Input type=\"text\" name=\"query\" value={query} placeholder={gettext('Search users')} onChange={this.handleInputChange} onKeyDown={this.handleKeyDown} />\n                    </Col>\n                  </FormGroup>\n                  <FormGroup row>\n                    <Col sm={{size: 5}}>\n                      <button className=\"btn btn-outline-primary\" disabled={!isSubmitBtnActive} onClick={this.getItems}>{gettext('Submit')}</button>\n                    </Col>\n                  </FormGroup>\n                </Form>\n              </div>\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Result')}</h4>\n                <OrgUsersSearchUsersResult\n                  toggleDelete={this.deleteUser}\n                  changeStatus={this.changeStatus}\n                  orgUsers={this.state.orgUsers}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgUsersSearchUsers;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/statistic/statistic-storage.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-groups.js",["3796","3797","3798","3799","3800","3801","3802","3803","3804","3805"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { siteRoot, gettext, orgID } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport OrgGroupInfo from '../../models/org-group';\nimport MainPanelTopbar from './main-panel-topbar';\n\nclass Search extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: ''\n    };\n  }\n\n  handleInputChange = (e) => {\n    this.setState({\n      value: e.target.value\n    });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      e.preventDefault();\n      this.handleSubmit();\n    }\n  };\n\n  handleSubmit = () => {\n    const value = this.state.value.trim();\n    if (!value) {\n      return false;\n    }\n    this.props.submit(value);\n  };\n\n  render() {\n    return (\n      <div className=\"input-icon\">\n        <i className=\"d-flex input-icon-addon fas fa-search\"></i>\n        <input\n          type=\"text\"\n          className=\"form-control search-input h-6 mr-1\"\n          style={{width: '15rem'}}\n          placeholder={this.props.placeholder}\n          value={this.state.value}\n          onChange={this.handleInputChange}\n          onKeyDown={this.handleKeyDown}\n          autoComplete=\"off\"\n        />\n      </div>\n    );\n  }\n}\n\nSearch.propTypes = {\n  placeholder: PropTypes.string.isRequired,\n  submit: PropTypes.func.isRequired,\n};\n\nclass OrgGroups extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      page: 1,\n      pageNext: false,\n      orgGroups: [],\n      isItemFreezed: false\n    };\n  }\n\n  componentDidMount() {\n    let page = this.state.page;\n    this.initData(page);\n  }\n\n  initData = (page) => {\n    seafileAPI.orgAdminListOrgGroups(orgID, page).then(res => {\n      let orgGroups = res.data.groups.map(item => {\n        return new OrgGroupInfo(item);\n      });\n\n      this.setState({\n        orgGroups: orgGroups,\n        pageNext: res.data.page_next,\n        page: res.data.page,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n\n  onChangePageNum = (e, num) => {\n    e.preventDefault();\n    let page = this.state.page;\n\n    if (num == 1) {\n      page = page + 1;\n    } else {\n      page = page - 1;\n    }\n    this.initData(page);\n  };\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  deleteGroupItem = (group) => {\n    seafileAPI.orgAdminDeleteOrgGroup(orgID, group.id).then(res => {\n      this.setState({\n        orgGroups: this.state.orgGroups.filter(item => item.id != group.id)\n      });\n      let msg = gettext('Successfully deleted {name}');\n      msg = msg.replace('{name}', group.groupName);\n      toaster.success(msg);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  searchItems = (keyword) => {\n    navigate(`${siteRoot}org/groupadmin/search-groups/?query=${encodeURIComponent(keyword)}`);\n  };\n\n  getSearch = () => {\n    return <Search\n      placeholder={gettext('Search groups by name')}\n      submit={this.searchItems}\n    />;\n  };\n\n  render() {\n    let groups = this.state.orgGroups;\n    return (\n      <Fragment>\n        <MainPanelTopbar search={this.getSearch()}/>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('All Groups')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <table>\n                <thead>\n                  <tr>\n                    <th width=\"30%\">{gettext('Name')}</th>\n                    <th width=\"35%\">{gettext('Creator')}</th>\n                    <th width=\"23%\">{gettext('Created At')}</th>\n                    <th width=\"12%\" className=\"text-center\">{gettext('Operations')}</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {groups.map(item => {\n                    return (\n                      <GroupItem\n                        key={item.id}\n                        group={item}\n                        isItemFreezed={this.state.isItemFreezed}\n                        onFreezedItem={this.onFreezedItem}\n                        onUnfreezedItem={this.onUnfreezedItem}\n                        deleteGroupItem={this.deleteGroupItem}\n                      />\n                    );\n                  })}\n                </tbody>\n              </table>\n              <div className=\"paginator\">\n                {this.state.page != 1 && <a href=\"#\" onClick={(e) => this.onChangePageNum(e, -1)}>{gettext('Previous')}</a>}\n                {(this.state.page != 1 && this.state.pageNext) && <span> | </span>}\n                {this.state.pageNext && <a href=\"#\" onClick={(e) => this.onChangePageNum(e, 1)}>{gettext('Next')}</a>}\n              </div>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nconst GroupItemPropTypes = {\n  group: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  deleteGroupItem: PropTypes.func.isRequired,\n};\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      showMenu: false,\n      isItemMenuShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        showMenu: true,\n        highlight: true,\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        showMenu: false,\n        highlight: false\n      });\n    }\n  };\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    this.toggleOperationMenu(e);\n  };\n\n  toggleOperationMenu = (e) => {\n    e.stopPropagation();\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow }, () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.setState({\n            highlight: false,\n            showMenu: false,\n          });\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  };\n\n  toggleDelete = () => {\n    this.props.deleteGroupItem(this.props.group);\n  };\n\n  renderGroupHref = (group) => {\n    let groupInfoHref;\n    if (group.creatorName == 'system admin') {\n      groupInfoHref = siteRoot + 'org/departmentadmin/groups/' + group.id + '/';\n    } else {\n      groupInfoHref = siteRoot + 'org/groupadmin/' + group.id + '/';\n    }\n\n    return groupInfoHref;\n  };\n\n  renderGroupCreator = (group) => {\n    let userInfoHref = siteRoot + 'org/useradmin/info/' + group.creatorEmail + '/';\n    if (group.creatorName == 'system admin') {\n      return (\n        <td> -- </td>\n      );\n    } else {\n      return(\n        <td>\n          <a href={userInfoHref} className=\"font-weight-normal\">{group.creatorName}</a>\n        </td>\n      );\n    }\n  };\n\n  render() {\n    let { group } = this.props;\n    let isOperationMenuShow = (group.creatorName != 'system admin') && this.state.showMenu;\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td>\n          <a href={this.renderGroupHref(group)} className=\"font-weight-normal\">{group.groupName}</a>\n        </td>\n        {this.renderGroupCreator(group)}\n        <td>{group.ctime}</td>\n        <td className=\"text-center cursor-pointer\">\n          {isOperationMenuShow &&\n            <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n              <DropdownToggle\n                tag=\"a\"\n                className=\"attr-action-icon fas fa-ellipsis-v\"\n                title={gettext('More operations')}\n                aria-label={gettext('More operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isItemMenuShow}\n                onClick={this.onDropdownToggleClick}\n              />\n              <DropdownMenu>\n                <DropdownItem onClick={this.toggleDelete}>{gettext('Delete')}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n          }\n        </td>\n      </tr>\n    );\n  }\n\n}\n\nGroupItem.propTypes = GroupItemPropTypes;\n\nexport default OrgGroups;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/statistic/statistic-file.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-department-item.js",["3806","3807"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport MainPanelTopbar from './main-panel-topbar';\nimport ModalPortal from '../../components/modal-portal';\nimport RoleSelector from '../../components/single-selector';\nimport AddDepartDialog from '../../components/dialog/org-add-department-dialog';\nimport AddMemberDialog from '../../components/dialog/org-add-member-dialog';\nimport DeleteMemberDialog from '../../components/dialog/org-delete-member-dialog';\nimport AddRepoDialog from '../../components/dialog/org-add-repo-dialog';\nimport DeleteRepoDialog from '../../components/dialog/org-delete-repo-dialog';\nimport DeleteDepartDialog from '../../components/dialog/org-delete-department-dialog';\nimport SetGroupQuotaDialog from '../../components/dialog/org-set-group-quota-dialog';\nimport RenameDepartmentDialog from '../../components/dialog/org-rename-department-dialog';\nimport OpMenu from '../../components/dialog/op-menu';\nimport { serviceURL, siteRoot, gettext, orgID, lang } from '../../utils/constants';\nimport '../../css/org-department-item.css';\n\nmoment.locale(lang);\n\nclass OrgDepartmentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupName: '',\n      isItemFreezed: false,\n      isDepartFreezed: false,\n      ancestorGroups: [],\n      members: [],\n      deletedMember: {},\n      isShowAddMemberDialog: false,\n      showDeleteMemberDialog: false,\n      repos: [],\n      deletedRepo: {},\n      isShowAddRepoDialog: false,\n      showDeleteRepoDialog: false,\n      groups: [],\n      subGroupID: '',\n      subGroupName: '',\n      isShowAddDepartDialog: false,\n      showDeleteDepartDialog: false,\n      showSetGroupQuotaDialog: false,\n    };\n  }\n\n  componentDidMount() {\n    const groupID = this.props.groupID;\n    this.listOrgGroupRepo(groupID);\n    this.listOrgMembers(groupID);\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (this.props.groupID !== nextProps.groupID) {\n      this.listOrgGroupRepo(nextProps.groupID);\n      this.listOrgMembers(nextProps.groupID);\n    }\n  }\n\n  listOrgGroupRepo = (groupID) => {\n    seafileAPI.orgAdminListGroupRepos(orgID, groupID).then(res => {\n      this.setState({ repos: res.data.libraries });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  listOrgMembers = (groupID) => {\n    seafileAPI.orgAdminListGroupInfo(orgID, groupID, true).then(res => {\n      this.setState({\n        members: res.data.members,\n        groups: res.data.groups,\n        ancestorGroups: res.data.ancestor_groups,\n        groupName: res.data.name,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  listSubDepartGroups = (groupID) => {\n    seafileAPI.orgAdminListGroupInfo(orgID, groupID, true).then(res => {\n      this.setState({ groups: res.data.groups });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  toggleCancel = () => {\n    this.setState({\n      showDeleteMemberDialog: false,\n      showDeleteRepoDialog: false,\n      showDeleteDepartDialog: false,\n      showSetGroupQuotaDialog: false,\n    });\n  };\n\n  onFreezedDepart = () => {\n    this.setState({isDepartFreezed: true});\n  };\n\n  onUnfreezedDepart = () => {\n    this.setState({isDepartFreezed: false});\n  };\n\n  onDepartmentNameChanged = (dept) => {\n    this.setState({\n      groups: this.state.groups.map(item => {\n        if (item.id == dept.id) {\n          item.name = dept.name;\n        }\n        return item;\n      })\n    });\n  };\n\n  onSubDepartChanged = () => {\n    this.listSubDepartGroups(this.props.groupID);\n  };\n\n  onRepoChanged = () => {\n    this.listOrgGroupRepo(this.props.groupID);\n  };\n\n  onMemberChanged = () => {\n    this.listOrgMembers(this.props.groupID);\n  };\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({ isItemFreezed: isFreezed });\n  };\n\n  showDeleteMemberDialog = (member) => {\n    this.setState({ showDeleteMemberDialog: true, deletedMember: member });\n  };\n\n  showDeleteRepoDialog = (repo) => {\n    this.setState({ showDeleteRepoDialog: true, deletedRepo: repo });\n  };\n\n  toggleAddRepoDialog = () => {\n    this.setState({ isShowAddRepoDialog: !this.state.isShowAddRepoDialog });\n  };\n\n  toggleAddMemberDialog = () => {\n    this.setState({ isShowAddMemberDialog: !this.state.isShowAddMemberDialog });\n  };\n\n  toggleAddDepartDialog = () => {\n    this.setState({ isShowAddDepartDialog: !this.state.isShowAddDepartDialog});\n  };\n\n  showDeleteDepartDialog = (subGroup) => {\n    this.setState({\n      showDeleteDepartDialog: true,\n      subGroupID: subGroup.id,\n      subGroupName: subGroup.name\n    });\n  };\n\n  showSetGroupQuotaDialog = (subGroupID) => {\n    this.setState({\n      showSetGroupQuotaDialog: true,\n      subGroupID: subGroupID\n    });\n  };\n\n  render() {\n    const { members, repos, groups } = this.state;\n    const groupID = this.props.groupID;\n    const topBtn = 'btn btn-secondary operation-item';\n    const topbarChildren = (\n      <Fragment>\n        {groupID &&\n          <button className={topBtn} title={gettext('New Sub-department')} onClick={this.toggleAddDepartDialog}>{gettext('New Sub-department')}</button>\n        }\n        {groupID &&\n          <button className={topBtn} title={gettext('Add Member')} onClick={this.toggleAddMemberDialog}>{gettext('Add Member')}</button>\n        }\n        {groupID &&\n          <button className={topBtn} onClick={this.toggleAddRepoDialog} title={gettext('New Library')}>{gettext('New Library')}</button>\n        }\n        {this.state.isShowAddMemberDialog && (\n          <ModalPortal>\n            <AddMemberDialog\n              toggle={this.toggleAddMemberDialog}\n              onMemberChanged={this.onMemberChanged}\n              groupID={groupID}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowAddRepoDialog && (\n          <ModalPortal>\n            <AddRepoDialog\n              toggle={this.toggleAddRepoDialog}\n              onRepoChanged={this.onRepoChanged}\n              groupID={groupID}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowAddDepartDialog && (\n          <ModalPortal>\n            <AddDepartDialog\n              onDepartChanged={this.onSubDepartChanged}\n              parentGroupID={groupID}\n              toggle={this.toggleAddDepartDialog}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n\n    return (\n      <Fragment>\n        <MainPanelTopbar children={topbarChildren} />\n        <div className=\"main-panel-center flex-row h-100\">\n          <div className=\"cur-view-container o-auto\">\n            <div className=\"cur-view-path\">\n              <div className=\"fleft\">\n                <h3 className=\"sf-heading\">\n                  {groupID ?\n                    <Link to={siteRoot + 'org/departmentadmin/'}>{gettext('Departments')}</Link>\n                    : <span>{gettext('Departments')}</span>\n                  }\n                  {this.state.ancestorGroups.map(ancestor => {\n                    let newHref = siteRoot + 'org/departmentadmin/groups/' + ancestor.id + '/';\n                    return <span key={ancestor.id}>{' / '}<Link to={newHref}>{ancestor.name}</Link></span>;\n                  })}\n                  {groupID && <span>{' / '}{this.state.groupName}</span>}\n                </h3>\n              </div>\n            </div>\n\n            <div className=\"cur-view-subcontainer org-groups\">\n              <div className=\"cur-view-path\">\n                <div className=\"fleft\"><h3 className=\"sf-heading\">{gettext('Sub-departments')}</h3></div>\n              </div>\n              <div className=\"cur-view-content\">\n                {groups && groups.length > 0 ?\n                  <table>\n                    <thead>\n                      <tr>\n                        <th width=\"40%\">{gettext('Name')}</th>\n                        <th width=\"25%\">{gettext('Created At')}</th>\n                        <th width=\"20%\">{gettext('Quota')}</th>\n                        <th width=\"15%\"></th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {groups.map((group, index) => {\n                        return(\n                          <React.Fragment key={group.id}>\n                            <GroupItem\n                              group={group}\n                              isItemFreezed={this.state.isDepartFreezed}\n                              onFreezedItem={this.onFreezedDepart}\n                              onUnfreezedItem={this.onUnfreezedDepart}\n                              onDepartmentNameChanged={this.onDepartmentNameChanged}\n                              showDeleteDepartDialog={this.showDeleteDepartDialog}\n                              showSetGroupQuotaDialog={this.showSetGroupQuotaDialog}\n                            />\n                          </React.Fragment>\n                        );\n                      })}\n                    </tbody>\n                  </table>\n                  : <p className=\"no-group\">{gettext('No sub-departments')}</p>\n                }\n              </div>\n            </div>\n\n            <div className=\"cur-view-subcontainer org-members\">\n              <div className=\"cur-view-path\">\n                <div className=\"fleft\"><h3 className=\"sf-heading\">{gettext('Members')}</h3></div>\n              </div>\n              <div className=\"cur-view-content\">\n                {(!members || members.length === 0) ?\n                  <p className=\"no-member\">{gettext('No members')}</p> :\n                  <table>\n                    <thead>\n                      <tr>\n                        <th width=\"5%\"></th>\n                        <th width=\"50%\">{gettext('Name')}</th>\n                        <th width=\"15%\">{gettext('Role')}</th>\n                        <th width=\"30%\"></th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {members.map((member, index) => {\n                        return (\n                          <React.Fragment key={index}>\n                            <MemberItem\n                              member={member}\n                              showDeleteMemberDialog={this.showDeleteMemberDialog}\n                              isItemFreezed={this.state.isItemFreezed}\n                              onMemberChanged={this.onMemberChanged}\n                              toggleItemFreezed={this.toggleItemFreezed}\n                              groupID={groupID}\n                            />\n                          </React.Fragment>\n                        );\n                      })}\n                    </tbody>\n                  </table>\n                }\n              </div>\n            </div>\n\n            <div className=\"cur-view-subcontainer org-libriries\">\n              <div className=\"cur-view-path\">\n                <div className=\"fleft\"><h3 className=\"sf-heading\">{gettext('Libraries')}</h3></div>\n              </div>\n              { repos.length > 0 ?\n                <div className=\"cur-view-content\">\n                  <table>\n                    <thead>\n                      <tr>\n                        <th width=\"5%\"></th>\n                        <th width=\"50%\">{gettext('Name')}</th>\n                        <th width=\"30%\">{gettext('Size')}</th>\n                        <th width=\"15%\"></th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {repos.map((repo, index) => {\n                        return(\n                          <React.Fragment key={index}>\n                            <RepoItem repo={repo} showDeleteRepoDialog={this.showDeleteRepoDialog}/>\n                          </React.Fragment>\n                        );\n                      })}\n                    </tbody>\n                  </table>\n                </div>\n                : <p className=\"no-libraty\">{gettext('No libraries')}</p>\n              }\n            </div>\n\n          </div>\n          <React.Fragment>\n            {this.state.showDeleteMemberDialog && (\n              <ModalPortal>\n                <DeleteMemberDialog\n                  toggle={this.toggleCancel}\n                  onMemberChanged={this.onMemberChanged}\n                  member={this.state.deletedMember}\n                  groupID={groupID}\n                />\n              </ModalPortal>\n            )}\n            {this.state.showDeleteRepoDialog && (\n              <ModalPortal>\n                <DeleteRepoDialog\n                  toggle={this.toggleCancel}\n                  onRepoChanged={this.onRepoChanged}\n                  repo={this.state.deletedRepo}\n                  groupID={groupID}\n                />\n              </ModalPortal>\n            )}\n            {this.state.showDeleteDepartDialog && (\n              <ModalPortal>\n                <DeleteDepartDialog\n                  toggle={this.toggleCancel}\n                  groupID={this.state.subGroupID}\n                  groupName={this.state.subGroupName}\n                  onDepartChanged={this.onSubDepartChanged}\n                />\n              </ModalPortal>\n            )}\n            {this.state.showSetGroupQuotaDialog && (\n              <ModalPortal>\n                <SetGroupQuotaDialog\n                  toggle={this.toggleCancel}\n                  groupID={this.state.subGroupID}\n                  onDepartChanged={this.onSubDepartChanged}\n                />\n              </ModalPortal>\n            )}\n          </React.Fragment>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nclass MemberItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false\n    };\n    this.roleOptions = [\n      { value: 'Admin', text: gettext('Admin'), isSelected: false },\n      { value: 'Member', text: gettext('Member'), isSelected: false }\n    ];\n  }\n\n  onMouseEnter = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({ highlight: true });\n  };\n\n  onMouseLeave = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({ highlight: false });\n  };\n\n  onChangeUserRole = (roleOption) => {\n    let isAdmin = roleOption.value === 'Admin' ? true : false;\n    seafileAPI.orgAdminSetGroupMemberRole(orgID, this.props.groupID, this.props.member.email, isAdmin).then((res) => {\n      this.props.onMemberChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n    this.setState({\n      highlight: false,\n    });\n  };\n\n  render() {\n    const member = this.props.member;\n    const highlight = this.state.highlight;\n    let memberLink = serviceURL + '/org/useradmin/info/' + member.email + '/';\n    if (member.role === 'Owner') return null;\n\n    this.roleOptions = this.roleOptions.map(item => {\n      item.isSelected = item.value == member.role;\n      return item;\n    });\n    const currentSelectedOption = this.roleOptions.filter(item => item.isSelected)[0];\n\n    return (\n      <tr className={highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={member.avatar_url} alt=\"member-header\" width=\"24\" className=\"avatar\"/></td>\n        <td><a href={memberLink}>{member.name}</a></td>\n        <td>\n          <RoleSelector\n            isDropdownToggleShown={highlight}\n            currentSelectedOption={currentSelectedOption}\n            options={this.roleOptions}\n            selectOption={this.onChangeUserRole}\n            toggleItemFreezed={this.props.toggleItemFreezed}\n          />\n        </td>\n        <td className=\"cursor-pointer text-center\" onClick={this.props.showDeleteMemberDialog.bind(this, member)}>\n          <span className={`sf2-icon-x3 action-icon ${highlight ? '' : 'vh'}`} title=\"Delete\"></span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nconst MemberItemPropTypes = {\n  groupID: PropTypes.string,\n  member: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onMemberChanged: PropTypes.func.isRequired,\n  showDeleteMemberDialog: PropTypes.func.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n};\n\nMemberItem.propTypes = MemberItemPropTypes;\n\nclass RepoItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({ highlight: true });\n  };\n\n  onMouseLeave = () => {\n    this.setState({ highlight: false });\n  };\n\n  render() {\n    const repo = this.props.repo;\n    const highlight = this.state.highlight;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    return (\n      <tr className={highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={iconUrl} width=\"24\" alt={gettext('icon')}/></td>\n        <td>{repo.name}</td>\n        <td>{Utils.bytesToSize(repo.size)}{' '}</td>\n        <td className=\"cursor-pointer text-center\" onClick={this.props.showDeleteRepoDialog.bind(this, repo)}>\n          <span className={`sf2-icon-delete action-icon ${highlight ? '' : 'vh'}`} title=\"Delete\"></span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nconst RepoItemPropTypes = {\n  repo: PropTypes.object.isRequired,\n  showDeleteRepoDialog: PropTypes.func.isRequired,\n};\n\nRepoItem.propTypes = RepoItemPropTypes;\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOpIconShown: false,\n      isRenameDialogOpen: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  };\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Rename':\n        translateResult = gettext('Rename');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  };\n\n  onMenuItemClick = (operation) => {\n    const { group } = this.props;\n    switch(operation) {\n      case 'Rename':\n        this.toggleRenameDialog();\n        break;\n      case 'Delete':\n        this.props.showDeleteDepartDialog(group);\n        break;\n      default:\n        break;\n    }\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  toggleRenameDialog = () => {\n    this.setState({\n      isRenameDialogOpen: !this.state.isRenameDialogOpen\n    });\n  };\n\n  render() {\n    const group = this.props.group;\n    const { highlight, isOpIconShown, isRenameDialogOpen } = this.state;\n    const newHref = siteRoot+ 'org/departmentadmin/groups/' + group.id + '/';\n    return (\n      <Fragment>\n        <tr className={highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n          <td><Link to={newHref}>{group.name}</Link></td>\n          <td>{moment(group.created_at).fromNow()}</td>\n          <td onClick={this.props.showSetGroupQuotaDialog.bind(this, group.id)}>\n            {Utils.bytesToSize(group.quota)}{' '}\n            <span title=\"Edit Quota\" className={`fa fa-pencil-alt attr-action-icon ${highlight ? '' : 'vh'}`}></span>\n          </td>\n          <td>\n            {isOpIconShown &&\n              <OpMenu\n                operations={['Rename', 'Delete']}\n                translateOperations={this.translateOperations}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            }\n          </td>\n        </tr>\n        {isRenameDialogOpen && (\n          <RenameDepartmentDialog\n            orgID={orgID}\n            groupID={group.id}\n            name={group.name}\n            toggle={this.toggleRenameDialog}\n            onDepartmentNameChanged={this.props.onDepartmentNameChanged}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nconst GroupItemPropTypes = {\n  group: PropTypes.object.isRequired,\n  groupID: PropTypes.string,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onDepartmentNameChanged: PropTypes.func.isRequired,\n  showSetGroupQuotaDialog: PropTypes.func.isRequired,\n  showDeleteDepartDialog: PropTypes.func.isRequired,\n  isSubdepartChanged: PropTypes.bool,\n};\n\nGroupItem.propTypes = GroupItemPropTypes;\n\n\nconst OrgDepartmentItemPropTypes = {\n  groupID: PropTypes.string,\n};\n\nOrgDepartmentItem.propTypes = OrgDepartmentItemPropTypes;\n\nexport default OrgDepartmentItem;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-group-info.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/statistic/statistic-reports.js",["3808"],[],"import React, { Fragment } from 'react';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport moment from 'moment';\nimport StatisticNav from './statistic-nav';\nimport { Button, Input } from 'reactstrap';\nimport { siteRoot, gettext, orgID } from '../../../utils/constants';\n\nclass OrgStatisticReports extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      month: moment().format('YYYYMM'),\n      errorMessage: ''\n    };\n  }\n\n  handleChange = (e) => {\n    let month = e.target.value;\n    this.setState({\n      month: month\n    });\n  };\n\n  onGenerateReports = (type) => {\n    let url = siteRoot + 'api/v2.1/org/' + orgID + '/admin/statistics/';\n    let { month } = this.state;\n    if (!month) {\n      let errorMessage = gettext('It is required.');\n      this.setState({\n        errorMessage: errorMessage\n      });\n      return;\n    }\n    if (type === 'month') {\n      let pattern = /^([012]\\d{3})(0[1-9]|1[012])$/;\n      if (!pattern.test(month)) {\n        let errorMessage = gettext('Invalid month, should be yyyymm.');\n        this.setState({\n          errorMessage: errorMessage\n        });\n        return;\n      }\n    }\n    switch(type) {\n      case 'month':\n        url += 'user-traffic/excel/?month=' + month;\n        break;\n      case 'storage':\n        url += 'user-storage/excel/?';\n        break;\n    }\n    this.setState({\n      errorMessage: ''\n    });\n    window.location.href = url;\n  };\n\n  render() {\n\n    let { errorMessage } = this.state;\n    return(\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"cur-view-container\">\n          <StatisticNav currentItem=\"reportsStatistic\" />\n          <div className=\"cur-view-content\">\n            <div className=\"statistic-reports\">\n              <div className=\"statistic-reports-title\">{gettext('Monthly User Traffic')}</div>\n              <div className=\"d-flex align-items-center mt-4\">\n                <span className=\"statistic-reports-tip\">{gettext('Month:')}</span>\n                <Input className=\"statistic-reports-input\" defaultValue={moment().format('YYYYMM')} onChange={this.handleChange} />\n                <Button className=\"statistic-reports-submit operation-item\" onClick={this.onGenerateReports.bind(this, 'month')}>{gettext('Create Report')}</Button>\n              </div>\n              {errorMessage && <div className=\"error\">{errorMessage}</div>}\n            </div>\n            <div className=\"statistic-reports\">\n              <div className=\"statistic-reports-title\">{gettext('User Storage')}</div>\n              <Button className=\"mt-4 operation-item\" onClick={this.onGenerateReports.bind(this, 'storage')}>{gettext('Create Report')}</Button>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgStatisticReports;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/devices/mobile-devices.js",["3809"],[],"import React, { Component, Fragment } from 'react';\nimport DevicesNav from './devices-nav';\nimport DevicesByPlatform from './devices-by-platform';\nimport MainPanelTopbar from '../main-panel-topbar';\n\nclass MobileDevices extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <DevicesNav currentItem=\"mobile\" />\n            <DevicesByPlatform\n              devicesPlatform={'mobile'}\n            />\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default MobileDevices;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/info.js",["3810","3811"],[],"import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, isPro, isDefaultAdmin, seafileVersion } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport MainPanelTopbar from './main-panel-topbar';\n\nimport '../../css/system-info.css';\n\nclass Info extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      sysInfo: {}\n    };\n    this.fileInput = React.createRef();\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetSysInfo().then((res) => {\n      this.setState({\n        loading: false,\n        sysInfo: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  uploadLicenseFile = (e) => {\n\n    // no file selected\n    if (!this.fileInput.current.files.length) {\n      return;\n    }\n    const file = this.fileInput.current.files[0];\n    seafileAPI.sysAdminUploadLicense(file).then((res) => {\n      let info = this.state.sysInfo;\n      Object.assign(info, res.data, {with_license: true});\n      this.setState({\n        sysInfo: info\n      });\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  };\n\n  openFileInput = () => {\n    this.fileInput.current.click();\n  };\n\n  renderLicenseDescString = (license_mode, license_to, license_expiration) => {\n    if (license_mode == 'life-time') {\n      if (window.app.config.lang == 'zh-cn') {\n        return ' ' + license_to + ' ' + license_expiration + ' ';\n      } else {\n        return gettext('licensed to {placeholder_license_to}, upgrade service expired in {placeholder_license_expiration}')\n          .replace('{placeholder_license_to}', license_to).replace('{placeholder_license_expiration}', license_expiration);\n      }\n    } else {\n      return gettext('licensed to {placeholder_license_to}, expires on {placeholder_license_expiration}')\n        .replace('{placeholder_license_to}', license_to).replace('{placeholder_license_expiration}', license_expiration);\n    }\n  };\n\n  render() {\n    let { license_mode, license_to, license_expiration, org_count,\n      repos_count, total_files_count, total_storage, total_devices_count,\n      current_connected_devices_count, license_maxusers, multi_tenancy_enabled,\n      active_users_count, users_count, groups_count, with_license } = this.state.sysInfo;\n    let { loading, errorMsg } = this.state;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container system-admin-info\">\n            <h2 className=\"heading\">{gettext('Info')}</h2>\n            <div className=\"content\">\n              {loading && <Loading />}\n              {errorMsg && <p className=\"error text-center mt-4\">{errorMsg}</p>}\n              {(!loading && !errorMsg) &&\n              <dl className=\"flex-1 m-0\">\n                <dt className=\"info-item-heading\">{gettext('System Info')}</dt>\n                {isPro ?\n                  <dd className=\"info-item-content\">\n                    {gettext('Professional Edition')}\n                    {with_license &&\n                      ' ' + this.renderLicenseDescString(license_mode, license_to, license_expiration)\n                    }<br/>\n                    {isDefaultAdmin &&\n                      <Fragment>\n                        <Button type=\"button\" className=\"mt-2\" onClick={this.openFileInput}>{gettext('Upload license')}</Button>\n                        <input className=\"d-none\" type=\"file\" onChange={this.uploadLicenseFile} ref={this.fileInput} />\n                      </Fragment>\n                    }\n                  </dd> :\n                  <dd className=\"info-item-content\">\n                    {gettext('Community Edition')}\n                    <a className=\"ml-1\" href=\"https://download.seafile.com/published/seafile-manual/deploy_pro/migrate_from_seafile_community_server.md\" target=\"_blank\" rel=\"noreferrer\">{gettext('Upgrade to Pro Edition')}</a>\n                  </dd>\n                }\n\n                <dt className=\"info-item-heading\">{gettext('Version')}</dt>\n                <dd className=\"info-item-content\">{seafileVersion}</dd>\n\n                <dt className=\"info-item-heading\">{gettext('Libraries')} / {gettext('Files')}</dt>\n                <dd className=\"info-item-content\">{repos_count} / {total_files_count}</dd>\n\n                <dt className=\"info-item-heading\">{gettext('Storage Used')}</dt>\n                <dd className=\"info-item-content\">{Utils.bytesToSize(total_storage)}</dd>\n\n                <dt className=\"info-item-heading\">{gettext('Total Devices')} / {gettext('Current Connected Devices')}</dt>\n                <dd className=\"info-item-content\">{total_devices_count} / {current_connected_devices_count}</dd>\n\n                {isPro ?\n                  <Fragment>\n                    <dt className=\"info-item-heading\">{gettext('Activated Users')} / {gettext('Total Users')} / {gettext('Limits')}</dt>\n                    <dd className=\"info-item-content\">{active_users_count}{' / '}{users_count}{' / '}{with_license ? license_maxusers : '--'}</dd>\n                  </Fragment> :\n                  <Fragment>\n                    <dt className=\"info-item-heading\">{gettext('Activated Users')} / {gettext('Total Users')}</dt>\n                    <dd className=\"info-item-content\">{active_users_count} / {users_count}</dd>\n                  </Fragment>\n                }\n\n                <dt className=\"info-item-heading\">{gettext('Groups')}</dt>\n                <dd className=\"info-item-content\">{groups_count}</dd>\n\n                {multi_tenancy_enabled &&\n                  <Fragment>\n                    <dt className=\"info-item-heading\">{gettext('Organizations')}</dt>\n                    <dd className=\"info-item-content\">{org_count}</dd>\n                  </Fragment>\n                }\n              </dl>\n              }\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Info;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/statistic/statistic-traffic.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/main-panel.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/statistic/statistic-users.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/side-panel.js",["3812"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport Logo from '../../components/logo';\nimport { gettext, siteRoot, isPro, otherPermission, canViewSystemInfo, canViewStatistic,\n  canConfigSystem, canManageLibrary, canManageUser, canManageGroup, canViewUserLog,\n  canViewAdminLog, constanceEnabled, multiTenancy, multiInstitution, sysadminExtraEnabled,\n  enableGuestInvitation, enableTermsAndConditions, enableFileScan, enableWorkWeixin, enableDingtalk,\n  enableShareLinkReportAbuse, isDBSqlite3 } from '../../utils/constants';\n\nconst propTypes = {\n  isSidePanelClosed: PropTypes.bool.isRequired,\n  onCloseSidePanel: PropTypes.func.isRequired,\n  currentTab: PropTypes.string.isRequired,\n  tabItemClick: PropTypes.func.isRequired\n};\n\nclass SidePanel extends React.Component {\n\n  getActiveClass = (tab) => {\n    return this.props.currentTab == tab ? 'active' : '';\n  };\n\n  render() {\n    return (\n      <div className={`side-panel ${this.props.isSidePanelClosed ? '' : 'left-zero'}`}>\n        <div className=\"side-panel-north\">\n          <Logo onCloseSidePanel={this.props.onCloseSidePanel}/>\n        </div>\n        <div className=\"side-panel-center\">\n          <div className=\"side-nav\">\n            <div className=\"side-nav-con\">\n              <h3 className=\"sf-heading\">{gettext('System Admin')}</h3>\n              <ul className=\"nav nav-pills flex-column nav-container\">\n                {canViewSystemInfo &&\n                <li className=\"nav-item\">\n                  <Link\n                    className={`nav-link ellipsis ${this.getActiveClass('info')}`}\n                    to={siteRoot + 'sys/info/'}\n                    onClick={() => this.props.tabItemClick('info')}\n                  >\n                    <span className=\"sf2-icon-info\" aria-hidden=\"true\"></span>\n                    <span className=\"nav-text\">{gettext('Info')}</span>\n                  </Link>\n                </li>\n                }\n                {(isPro || !isDBSqlite3) && canViewStatistic &&\n                  <li className=\"nav-item\">\n                    <Link className={`nav-link ellipsis ${this.getActiveClass('statistic')}`}\n                      to={siteRoot + 'sys/statistics/file/'}\n                      onClick={() => this.props.tabItemClick('statistic')}\n                    >\n                      <span className=\"sf2-icon-histogram\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Statistic')}</span>\n                    </Link>\n                  </li>\n                }\n                {otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('devices')}`}\n                      to={siteRoot + 'sys/desktop-devices/'}\n                      onClick={() => this.props.tabItemClick('devices')}\n                    >\n                      <span className=\"sf2-icon-monitor\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Devices')}</span>\n                    </Link>\n                  </li>\n                }\n                {constanceEnabled && canConfigSystem &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('web-settings')}`}\n                      to={siteRoot + 'sys/web-settings/'}\n                      onClick={() => this.props.tabItemClick('web-settings')}\n                    >\n                      <span className=\"sf2-icon-cog2\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Settings')}</span>\n                    </Link>\n                  </li>\n                }\n                {canManageLibrary &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('libraries')}`}\n                      to={siteRoot + 'sys/all-libraries/'}\n                      onClick={() => this.props.tabItemClick('libraries')}\n                    >\n                      <span className=\"sf2-icon-library\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Libraries')}</span>\n                    </Link>\n                  </li>\n                }\n                {canManageUser &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('users')}`}\n                      to={siteRoot + 'sys/users/'}\n                      onClick={() => this.props.tabItemClick('users')}\n                    >\n                      <span className=\"sf2-icon-user\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Users')}</span>\n                    </Link>\n                  </li>\n                }\n                {canManageGroup &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('groups')}`}\n                      to={siteRoot + 'sys/groups/'}\n                      onClick={() => this.props.tabItemClick('groups')}\n                    >\n                      <span className=\"sf2-icon-group\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Groups')}</span>\n                    </Link>\n                  </li>\n                }\n                {isPro && canManageGroup &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('departments')}`}\n                      to={siteRoot + 'sys/departments/'}\n                      onClick={() => this.props.tabItemClick('departments')}\n                    >\n                      <span className=\"sf2-icon-organization\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Departments')}</span>\n                    </Link>\n                  </li>\n                }\n                {multiTenancy && otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('organizations')}`}\n                      to={siteRoot + 'sys/organizations/'}\n                      onClick={() => this.props.tabItemClick('organizations')}\n                    >\n                      <span className=\"sf2-icon-organization\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Organizations')}</span>\n                    </Link>\n                  </li>\n                }\n                {isPro && multiInstitution && otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('institutions')}`}\n                      to={siteRoot + 'sys/institutions/'}\n                      onClick={() => this.props.tabItemClick('institutions')}\n                    >\n                      <span className=\"sf2-icon-organization\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Institutions')}</span>\n                    </Link>\n                  </li>\n                }\n                {otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('notifications')}`}\n                      to={siteRoot + 'sys/notifications/'}\n                      onClick={() => this.props.tabItemClick('notifications')}\n                    >\n                      <span className=\"sf2-icon-msgs\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Notifications')}</span>\n                    </Link>\n                  </li>\n                }\n                {otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('links')}`}\n                      to={siteRoot + 'sys/share-links/'}\n                      onClick={() => this.props.tabItemClick('links')}\n                    >\n                      <span className=\"sf2-icon-link\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Links')}</span>\n                    </Link>\n                  </li>\n                }\n                {sysadminExtraEnabled && canViewUserLog &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('logs')}`}\n                      to={siteRoot + 'sys/logs/login'}\n                      onClick={() => this.props.tabItemClick('logs')}\n                    >\n                      <span className=\"sf2-icon-clock\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Logs')}</span>\n                    </Link>\n                  </li>\n                }\n                {isPro && otherPermission && enableFileScan &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('file-scan-records')}`}\n                      to={siteRoot + 'sys/file-scan-records/'}\n                      onClick={() => this.props.tabItemClick('file-scan-records')}\n                    >\n                      <span className=\"sf2-icon-security\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('File Scan')}</span>\n                    </Link>\n                  </li>\n                }\n                {isPro && otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('virus-files')}`}\n                      to={siteRoot + 'sys/virus-files/all/'}\n                      onClick={() => this.props.tabItemClick('virus-files')}\n                    >\n                      <span className=\"sf2-icon-security\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Virus Scan')}</span>\n                    </Link>\n                  </li>\n                }\n                {isPro && enableGuestInvitation && otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('invitations')}`}\n                      to={siteRoot + 'sys/invitations/'}\n                      onClick={() => this.props.tabItemClick('invitations')}\n                    >\n                      <span className=\"sf2-icon-invite\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Invitations')}</span>\n                    </Link>\n                  </li>\n                }\n                {otherPermission && enableTermsAndConditions &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('termsandconditions')}`}\n                      to={siteRoot + 'sys/terms-and-conditions/'}\n                      onClick={() => this.props.tabItemClick('termsandconditions')}\n                    >\n                      <span className=\"sf2-icon-wiki\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Terms and Conditions')}</span>\n                    </Link>\n                  </li>\n                }\n                {isPro && canViewAdminLog &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('adminLogs')}`}\n                      to={siteRoot + 'sys/admin-logs/operation'}\n                      onClick={() => this.props.tabItemClick('adminLogs')}\n                    >\n                      <span className=\"sf2-icon-admin-log\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Admin Logs')}</span>\n                    </Link>\n                  </li>\n                }\n                {otherPermission && enableWorkWeixin &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('work-weixin')}`}\n                      to={siteRoot + 'sys/work-weixin/'}\n                      onClick={() => this.props.tabItemClick('work-weixin')}\n                    >\n                      <span className=\"sf3-font-enterprise-wechat sf3-font\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{''}</span>\n                    </Link>\n                  </li>\n                }\n\n                {otherPermission && enableDingtalk &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('dingtalk')}`}\n                      to={siteRoot + 'sys/dingtalk/'}\n                      onClick={() => this.props.tabItemClick('dingtalk')}\n                    >\n                      <span className=\"sf3-font-dingtalk sf3-font\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{''}</span>\n                    </Link>\n                  </li>\n                }\n\n                {otherPermission && enableShareLinkReportAbuse &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('abuse-reports')}`}\n                      to={siteRoot + 'sys/abuse-reports/'}\n                      onClick={() => this.props.tabItemClick('abuse-reports')}\n                    >\n                      <span className=\"sf2-icon-monitor\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Abuse Reports')}</span>\n                    </Link>\n                  </li>\n                }\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nSidePanel.propTypes = propTypes;\n\nexport default SidePanel;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/devices/devices-errors.js",["3813"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext, orgID } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport { Link } from '@gatsbyjs/reach-router';\nimport DevicesNav from './devices-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport Paginator from '../../../components/paginator';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPageDeviceErrorsList = () => {\n    this.props.getDeviceErrorsListByPage(this.props.pageInfo.current_page - 1);\n  };\n\n  getNextPageDeviceErrorsList = () => {\n    this.props.getDeviceErrorsListByPage(this.props.pageInfo.current_page + 1);\n  };\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No sync errors')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"16%\">{gettext('User')}</th>\n                <th width=\"20%\">{gettext('Device')}{' / '}{gettext('Version')}</th>\n                <th width=\"16%\">{gettext('IP')}</th>\n                <th width=\"16%\">{gettext('Library')}</th>\n                <th width=\"16%\">{gettext('Error')}</th>\n                <th width=\"16%\">{gettext('Time')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item key={index} item={item} />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPageDeviceErrorsList}\n            gotoNextPage={this.getNextPageDeviceErrorsList}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  getDeviceErrorsListByPage: PropTypes.func.isRequired,\n  resetPerPage: PropTypes.func.isRequired,\n  curPerPage: PropTypes.number.isRequired,\n  pageInfo: PropTypes.object,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  };\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  };\n\n  render() {\n    let item = this.props.item;\n    return (\n      <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n        <td><UserLink email={item.email} name={item.name} /></td>\n        <td>{item.device_name}{' / '}{item.client_version}</td>\n        <td>{item.device_ip}</td>\n        <td><Link to={`${siteRoot}sysadmin/#libs/${item.repo_id}`}>{item.repo_name}</Link></td>\n        <td>{item.error_msg}</td>\n        <td>\n          <span className=\"item-meta-info\" title={moment(item.last_accessed).format('llll')}>{moment(item.error_time).fromNow()}</span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n};\n\nclass OrgDevicesErrors extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      devicesErrors: [],\n      isCleanBtnShown: false,\n      pageInfo: {},\n      perPage: 25\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage = 1, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getDeviceErrorsListByPage(this.state.currentPage);\n    });\n  }\n\n  getDeviceErrorsListByPage = (page) => {\n    let per_page = this.state.perPage;\n    seafileAPI.orgAdminListDevicesErrors(orgID, page, per_page).then((res) => {\n      this.setState({\n        loading: false,\n        devicesErrors: res.data.device_errors,\n        pageInfo: res.data.page_info,\n        isCleanBtnShown: res.data.length > 0\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  clean = () => {\n    seafileAPI.sysAdminClearDeviceErrors().then((res) => {\n      this.setState({\n        devicesErrors: [],\n        isCleanBtnShown: false\n      });\n      let message = gettext('Successfully cleaned all errors.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getDeviceErrorsListByPage(1);\n    });\n  };\n  render() {\n    return (\n      <Fragment>\n        {this.state.isCleanBtnShown ? (\n          <MainPanelTopbar>\n            <Button className=\"operation-item\" onClick={this.clean}>{gettext('Clean')}</Button>\n          </MainPanelTopbar>\n        ) : (\n          <MainPanelTopbar />\n        )}\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <DevicesNav currentItem=\"errors\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.devicesErrors}\n                getDeviceErrorsListByPage={this.getDeviceErrorsListByPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                pageInfo={this.state.pageInfo}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgDevicesErrors;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/constants.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/statistic/statistic-file.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/_i18n/i18n-seafile-editor.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/utils.js",["3814","3815","3816","3817","3818","3819","3820","3821","3822","3823","3824","3825","3826","3827","3828","3829","3830","3831","3832","3833","3834","3835","3836","3837","3838","3839","3840","3841","3842","3843","3844","3845","3846","3847","3848","3849","3850","3851","3852","3853","3854","3855","3856","3857","3858","3859","3860","3861","3862","3863","3864","3865","3866","3867","3868","3869","3870","3871","3872","3873","3874","3875","3876","3877","3878","3879","3880","3881","3882","3883","3884","3885","3886","3887","3888","3889"],["3890","3891","3892","3893","3894"],"import { mediaUrl, gettext, serviceURL, siteRoot, isPro, fileAuditEnabled, canGenerateShareLink, canGenerateUploadLink, shareLinkPasswordMinLength, username, folderPermEnabled, onlyofficeConverterExtensions, enableOnlyoffice, enableSeadoc } from './constants';\nimport TextTranslation from './text-translation';\nimport React from 'react';\nimport toaster from '../components/toast';\nimport PermissionDeniedTip from '../components/permission-denied-tip';\nimport { compareTwoString } from './compare-two-string';\n\nexport const Utils = {\n\n  keyCodes:  {\n    enter: 13,\n    esc:   27,\n    space: 32,\n    tab:   9,\n    up:    38,\n    down:  40\n  },\n\n  bytesToSize: function(bytes) {\n    if (typeof(bytes) == 'undefined') return ' ';\n\n    if(bytes < 0) return '--';\n    const sizes = ['bytes', 'KB', 'MB', 'GB', 'TB', 'PB'];\n\n    if (bytes === 0) return bytes + ' ' + sizes[0];\n\n    const i = parseInt(Math.floor(Math.log(bytes) / Math.log(1000)), 10);\n    if (i === 0) return bytes + ' ' + sizes[i];\n    return (bytes / (1000 ** i)).toFixed(1) + ' ' + sizes[i];\n  },\n\n  isHiDPI: function() {\n    var pixelRatio = window.devicePixelRatio ? window.devicePixelRatio : 1;\n    if (pixelRatio > 1) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  isDesktop: function() {\n    return window.innerWidth >= 768;\n  },\n\n  isWeChat: function() {\n    let ua = window.navigator.userAgent.toLowerCase();\n    let isWeChat = ua.match(/MicroMessenger/i) == 'micromessenger';\n    let isEnterpriseWeChat = ua.match(/MicroMessenger/i) == 'micromessenger' && ua.match(/wxwork/i) == 'wxwork';\n    return isEnterpriseWeChat || isWeChat;\n  },\n\n  FILEEXT_ICON_MAP: {\n\n    // text file\n    'md': 'txt.png',\n    'txt': 'txt.png',\n\n    // pdf file\n    'pdf' : 'pdf.png',\n\n    // document file\n    'doc' : 'word.png',\n    'docx' : 'word.png',\n    'odt' : 'word.png',\n    'fodt' : 'word.png',\n\n    'ppt' : 'ppt.png',\n    'pptx' : 'ppt.png',\n    'odp' : 'ppt.png',\n    'fodp' : 'ppt.png',\n\n    'xls' : 'excel.png',\n    'xlsx' : 'excel.png',\n    'ods' : 'excel.png',\n    'fods' : 'excel.png',\n\n    // video\n    'mp4': 'video.png',\n    'ogv': 'video.png',\n    'webm': 'video.png',\n    'mov': 'video.png',\n    'flv': 'video.png',\n    'wmv': 'video.png',\n    'rmvb': 'video.png',\n\n    // music file\n    'mp3' : 'music.png',\n    'oga' : 'music.png',\n    'ogg' : 'music.png',\n    'wav' : 'music.png',\n    'flac' : 'music.png',\n    'opus' : 'music.png',\n    'aac' : 'music.png',\n    'ac3' : 'music.png',\n    'wma' : 'music.png',\n\n    // image file\n    'jpg' : 'pic.png',\n    'jpeg' : 'pic.png',\n    'png' : 'pic.png',\n    'svg' : 'pic.png',\n    'gif' : 'pic.png',\n    'bmp' : 'pic.png',\n    'ico' : 'pic.png',\n\n    // default\n    'default' : 'file.png',\n    'sdoc': 'sdoc.png',\n    'sdoc_notification': 'sdoc_notification.ico'\n  },\n\n  // check if a file is an image\n  imageCheck: function(filename) {\n    // no file ext\n    if (filename.lastIndexOf('.') == -1) {\n      return false;\n    }\n    var file_ext = filename.substr(filename.lastIndexOf('.') + 1).toLowerCase();\n    var image_exts = ['gif', 'jpeg', 'jpg', 'png', 'ico', 'bmp', 'tif', 'tiff', 'jfif'];\n    if (image_exts.indexOf(file_ext) != -1) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  getShareLinkPermissionList: function(itemType, permission, path, canEdit) {\n    // itemType: library, dir, file\n    // permission: rw, r, admin, cloud-edit, preview, custom-*\n\n    let permissionOptions = [];\n\n    const { isCustomPermission } = Utils.getUserPermission(permission);\n    if (isCustomPermission) {\n      permissionOptions.push('preview_download');\n      permissionOptions.push('preview_only');\n      return permissionOptions;\n    }\n\n    if (permission == 'rw' || permission == 'admin' || permission == 'r') {\n      permissionOptions.push('preview_download');\n    }\n    permissionOptions.push('preview_only');\n\n    if (itemType == 'library' || itemType == 'dir') {\n      if (permission == 'rw' || permission == 'admin') {\n        permissionOptions.push('download_upload');\n      }\n    } else {\n      if (this.isEditableOfficeFile(path) && (permission == 'rw' || permission == 'admin') && canEdit) {\n        permissionOptions.push('edit_download');\n      }\n\n      // not support\n      // if (this.isEditableOfficeFile(path) && (permission == 'cloud-edit')) {\n      //   permissionOptions.push('cloud_edit');\n      // }\n\n    }\n    return permissionOptions;\n  },\n\n  getShareLinkPermissionStr: function(permissions) {\n    const { can_edit, can_download, can_upload } = permissions;\n    switch (`${can_edit} ${can_download} ${can_upload}`) {\n      case 'false true false':\n        return 'preview_download';\n      case 'false false false':\n        return 'preview_only';\n      case 'false true true':\n        return 'download_upload';\n      case 'true true false':\n        return 'edit_download';\n      case 'true false false':\n        return 'cloud_edit';\n    }\n  },\n\n  isEditableOfficeFile: function(filename) {\n    // no file ext\n    if (filename.lastIndexOf('.') == -1) {\n      return false;\n    }\n    var file_ext = filename.substr(filename.lastIndexOf('.') + 1).toLowerCase();\n    var exts = ['docx', 'pptx', 'xlsx'];\n    if (exts.indexOf(file_ext) != -1) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  // check if a file is a video\n  videoCheck: function(filename) {\n    // no file ext\n    if (filename.lastIndexOf('.') == -1) {\n      return false;\n    }\n    var file_ext = filename.substr(filename.lastIndexOf('.') + 1).toLowerCase();\n    var exts = ['mp4', 'ogv', 'webm', 'mov'];\n    if (exts.indexOf(file_ext) != -1) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  checkDuplicatedNameInList: function(list, targetName) {\n    return list.some(object => {\n      return object.name === targetName;\n    });\n  },\n\n  encodePath: function(path) {\n    // IE8 does not support 'map()'\n    /*\n       return path.split('/').map(function(e) {\n       return encodeURIComponent(e);\n       }).join('/');\n       */\n    if (!path) {\n      return '';\n    }\n    var path_arr = path.split('/');\n    var path_arr_ = [];\n    for (var i = 0, len = path_arr.length; i < len; i++) {\n      path_arr_.push(encodeURIComponent(path_arr[i]));\n    }\n    return path_arr_.join('/');\n  },\n\n  HTMLescape: function(html) {\n    return document.createElement('div')\n      .appendChild(document.createTextNode(html))\n      .parentNode\n      .innerHTML;\n  },\n\n  generateDialogTitle: function(title, operationTarget) {\n    /*\n     * @param title: gettext('...{placeholder}...')\n     */\n    /*\n    const targetStr = this.HTMLescape(operationTarget);\n    const str = `<span class=\"op-target ellipsis ellipsis-op-target\" title=${targetStr}>${targetStr}</span>`;\n    return title.replace('{placeholder}', str);\n    */\n    return title.replace('{placeholder}', operationTarget);\n  },\n\n  getFileName: function(filePath) {\n    let lastIndex = filePath.lastIndexOf('/');\n    return filePath.slice(lastIndex+1);\n  },\n\n  /**\n   * input: '/abc/bc/cb'\n   * output: ['/abc', '/abc/bc', '/abc/bc/cb'];\n   */\n  getPaths: function(path) {\n    let paths = path.split('/').slice(1);\n    let result = [];\n    while(paths.length) {\n      result.push('/' + paths.join('/'));\n      paths.pop();\n    }\n    return result.reverse();\n  },\n\n  /**\n   * input:\n   *  eg: /\n   *      ../abc/abc/\n   *      ../abc/bc\n   * output(return):\n   *  eg: /\n   *      abc\n   *      bc\n   */\n  getFolderName: function(path) {\n    if (path === '/') {\n      return path;\n    }\n    path = path[path.length - 1] !== '/' ? path : path.slice(0, path.length - 1);\n    return path.slice(path.lastIndexOf('/') + 1);\n  },\n\n  /*\n    return dirname of a path.\n    if path is '/', return '/'.\n  */\n  getDirName: function(path) {\n    let dir = path.slice(0, path.lastIndexOf('/'));\n    if (dir === '') {\n      return '/';\n    } else {\n      return dir;\n    }\n  },\n\n  isChildPath: function(child, parent) {\n    let p = this.getDirName(child);\n    return p === parent;\n  },\n\n  isAncestorPath: function(ancestor, path) {\n    return path.indexOf(ancestor) > -1;\n  },\n\n  renameAncestorPath: function(path, ancestor, newAncestor) {\n    return path.replace(ancestor, newAncestor);\n  },\n\n  joinPath: function(pathA, pathB) {\n    if (pathA[pathA.length-1] === '/') {\n      return pathA + pathB;\n    } else {\n      return pathA + '/' + pathB;\n    }\n  },\n\n  isSupportUploadFolder: function() {\n    return navigator.userAgent.indexOf('Firefox')!=-1 ||\n      navigator.userAgent.indexOf('Chrome') > -1 ||\n      navigator.userAgent.indexOf('Safari') > -1;\n  },\n\n  isIEBrower: function() { // is ie <= ie11 not include Edge\n    var userAgent = navigator.userAgent;\n    var isIE = userAgent.indexOf('compatible') > -1 && userAgent.indexOf('MSIE') > -1;\n    var isIE11 = userAgent.indexOf('Trident') > -1 && userAgent.indexOf('rv:11.0') > -1;\n    return isIE || isIE11;\n  },\n\n  getDefaultLibIconUrl: function(isBig) {\n    let size = Utils.isHiDPI() ? 48 : 24;\n    size = isBig ? 256 : size;\n    let icon_name = 'lib.png';\n    return mediaUrl + 'img/lib/' + size + '/' + icon_name;\n  },\n\n  getLibIconUrl: function(repo, isBig) {\n    let permission = repo.permission || repo.share_permission; //Compatible with regular repo and repo shared\n    let size = Utils.isHiDPI() ? 48 : 24;\n    size = isBig ? 256 : size;\n\n    let icon_name = 'lib.png';\n    if (repo.encrypted) {\n      icon_name = 'lib-encrypted.png';\n    }\n    switch (permission) {\n      case 'r':\n        icon_name = 'lib-readonly.png';\n        break;\n      case 'preview':\n        icon_name = 'lib-cloud-preview.png';\n        break;\n      case 'cloud-edit':\n        icon_name = 'lib-cloud-preview-edit.png';\n        break;\n    }\n\n    // must be the last\n    if (repo.status == 'read-only') {\n      icon_name = 'lib-readonly.png';\n    }\n\n    return mediaUrl + 'img/lib/' + size + '/' + icon_name;\n  },\n\n  getDirentIcon: function (dirent, isBig) {\n    let size = this.isHiDPI() ? 48 : 24;\n    size = isBig ? 192 : size;\n    if (dirent.isDir()) {\n      let readonly = false;\n      if (dirent.permission && (dirent.permission === 'r' || dirent.permission === 'preview')) {\n        readonly = true;\n      }\n      return this.getFolderIconUrl(readonly, size, dirent.has_been_shared_out);\n    } else {\n      return this.getFileIconUrl(dirent.name, size);\n    }\n  },\n\n  getAdminTemplateDirentIcon: function (dirent, isBig) {\n    let size = this.isHiDPI() ? 48 : 24;\n    size = isBig ? 192 : size;\n    if (dirent.is_file) {\n      return this.getFileIconUrl(dirent.obj_name, size);\n    } else {\n      return this.getFolderIconUrl();\n    }\n  },\n\n  getFolderIconUrl: function(readonly = false, size, sharedOut) {\n    if (!size) {\n      size = Utils.isHiDPI() ? 48 : 24;\n    }\n    size = size > 24 ? 192 : 24;\n    return `${mediaUrl}img/folder${readonly ? '-read-only' : ''}${sharedOut ? '-shared-out' : ''}-${size}.png`;\n  },\n\n  getFileIconUrl: function(filename, size) {\n    if (!size) {\n      size = Utils.isHiDPI() ? 48 : 24;\n    }\n    size = size > 24 ? 192 : 24;\n    let file_ext = '';\n    if (filename.lastIndexOf('.') == -1) {\n      return mediaUrl + 'img/file/' + size + '/' + this.FILEEXT_ICON_MAP['default'];\n    } else {\n      file_ext = filename.substr(filename.lastIndexOf('.') + 1).toLowerCase();\n    }\n\n    if (this.FILEEXT_ICON_MAP[file_ext]) {\n      return mediaUrl + 'img/file/' + size + '/' + this.FILEEXT_ICON_MAP[file_ext];\n    } else {\n      return mediaUrl + 'img/file/' + size + '/' + this.FILEEXT_ICON_MAP['default'];\n    }\n  },\n\n  getLibIconTitle: function(repo) {\n    var title;\n    let permission = repo.permission || repo.share_permission; //Compatible with regular repo and repo shared\n    if (repo.encrypted) {\n      title = gettext('Encrypted library');\n    } else if (repo.is_admin) { // shared with 'admin' permission\n      title = gettext('Admin access');\n    } else {\n      switch(permission) {\n        case 'rw':\n          title = gettext('Read-Write library');\n          break;\n        case 'r':\n          title = gettext('Read-Only library');\n          break;\n        case 'cloud-edit':\n          title = gettext('Online Read-Write library');\n          break;\n        case 'preview':\n          title = gettext('Online Read-Only library');\n          break;\n      }\n    }\n    return title;\n  },\n\n  getFolderIconTitle: function(options) {\n    var title;\n    switch(options.permission) {\n      case 'rw':\n        title = gettext('Read-Write folder');\n        break;\n      case 'r':\n        title = gettext('Read-Only folder');\n        break;\n      case 'cloud-edit':\n        title = gettext('Online Read-Write folder');\n        break;\n      case 'preview':\n        title = gettext('Online Read-Only folder');\n        break;\n    }\n    return title;\n  },\n\n  getFolderOperationList: function(isRepoOwner, currentRepoInfo, dirent, isContextmenu) {\n\n    let list = [];\n    const { SHARE, DOWNLOAD, DELETE, RENAME, MOVE, COPY, PERMISSION, OPEN_VIA_CLIENT } = TextTranslation;\n    const permission = dirent.permission;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(permission);\n\n    if (isContextmenu) {\n      if (permission == 'rw' || permission == 'r') {\n        list.push(DOWNLOAD);\n      }\n\n      if (isCustomPermission && customPermission.permission.download) {\n        list.push(DOWNLOAD);\n      }\n\n      if (Utils.isHasPermissionToShare(currentRepoInfo, permission, dirent)) {\n        list.push(SHARE);\n      }\n\n      if (permission == 'rw' || permission == 'cloud-edit') {\n        list.push(DELETE, 'Divider');\n      }\n\n      if (isCustomPermission && customPermission.permission.delete) {\n        list.push(DELETE, 'Divider');\n      }\n    }\n\n    if (permission == 'rw' || permission == 'cloud-edit') {\n      list.push(RENAME, MOVE);\n    }\n\n    if (isCustomPermission && customPermission.permission.modify) {\n      list.push(RENAME, MOVE);\n    }\n\n    if (permission == 'rw' || permission == 'cloud-edit') {\n      list.push(COPY);\n    }\n\n    if (isCustomPermission && customPermission.permission.copy) {\n      list.push(COPY);\n    }\n\n    if (permission == 'rw') {\n      if (folderPermEnabled  && ((isRepoOwner && currentRepoInfo.has_been_shared_out) || currentRepoInfo.is_admin)) {\n        list.push('Divider', PERMISSION);\n      }\n      list.push('Divider', OPEN_VIA_CLIENT);\n    }\n\n    if (permission == 'r' && !currentRepoInfo.encrypted) {\n      list.push(COPY);\n    }\n\n    // if the last item of menuList is Divider, delete the last item\n    if (list[list.length - 1] === 'Divider') {\n      list.pop();\n    }\n\n    return list;\n  },\n\n  getFileOperationList: function(isRepoOwner, currentRepoInfo, dirent, isContextmenu) {\n    let list = [];\n    const { SHARE, DOWNLOAD, DELETE, RENAME, MOVE, COPY, TAGS, UNLOCK, LOCK, UNFREEZE_DOCUMENT, FREEZE_DOCUMENT,\n      HISTORY, ACCESS_LOG, PROPERTIES, OPEN_VIA_CLIENT, ONLYOFFICE_CONVERT, CONVERT_TO_MARKDOWN, CONVERT_TO_DOCX, EXPORT_DOCX, CONVERT_TO_SDOC } = TextTranslation;\n    const permission = dirent.permission;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(permission);\n\n    if (isContextmenu) {\n      if (permission == 'rw' || permission == 'r') {\n        list.push(DOWNLOAD);\n      }\n\n      if (isCustomPermission && customPermission.permission.download) {\n        list.push(DOWNLOAD);\n      }\n\n      if (Utils.isHasPermissionToShare(currentRepoInfo, permission, dirent)) {\n        list.push(SHARE);\n      }\n\n      if (permission == 'rw' || permission == 'cloud-edit') {\n        if (!dirent.is_locked || (dirent.is_locked && dirent.locked_by_me)) {\n          list.push(DELETE);\n        }\n        list.push('Divider');\n      }\n\n      if (isCustomPermission && customPermission.permission.delete) {\n        if (!dirent.is_locked || (dirent.is_locked && dirent.locked_by_me)) {\n          list.push(DELETE);\n        }\n        list.push('Divider');\n      }\n    }\n\n    if (permission == 'rw' || permission == 'cloud-edit') {\n      if (!dirent.is_locked || (dirent.is_locked && dirent.locked_by_me)) {\n        list.push(RENAME, MOVE);\n      }\n    }\n\n    if (isCustomPermission && customPermission.permission.modify) {\n      if (!dirent.is_locked || (dirent.is_locked && dirent.locked_by_me)) {\n        list.push(RENAME, MOVE);\n      }\n    }\n\n    if (permission == 'rw' || permission == 'cloud-edit') {\n      list.push(COPY);\n    }\n\n    if (isCustomPermission) {\n      if (customPermission.permission.copy) {\n        list.push(COPY);\n      }\n    }\n\n    if (permission == 'rw') {\n      list.push(TAGS);\n      if (isPro) {\n        if (dirent.is_locked) {\n          if (dirent.locked_by_me || dirent.lock_owner == 'OnlineOffice' || isRepoOwner || currentRepoInfo.is_admin) {\n            if (!dirent.name.endsWith('.sdoc')) {\n              list.push(UNLOCK);\n            }\n          }\n        } else {\n          if (!dirent.name.endsWith('.sdoc')) {\n            list.push(LOCK);\n          }\n        }\n      }\n\n      list.push('Divider');\n\n      if (isPro && !dirent.is_locked && dirent.name.endsWith('.sdoc')) {\n        list.push(FREEZE_DOCUMENT);\n      }\n      if (isPro && dirent.is_locked && dirent.name.endsWith('.sdoc')) {\n        list.push(UNFREEZE_DOCUMENT);\n      }\n\n    }\n\n    if ((permission == 'rw' || permission == 'cloud-edit') && enableSeadoc && !currentRepoInfo.encrypted) {\n      if (dirent.name.endsWith('.md') || dirent.name.endsWith('.docx')) {\n        list.push(CONVERT_TO_SDOC);\n      }\n\n      if (dirent.name.endsWith('.sdoc')) {\n        list.push(CONVERT_TO_MARKDOWN);\n        list.push(CONVERT_TO_DOCX);\n        list.push(EXPORT_DOCX);\n      }\n    }\n\n    if (permission == 'rw') {\n      list.push('Divider');\n      list.push(PROPERTIES, HISTORY);\n      if (isPro && fileAuditEnabled) {\n        list.push(ACCESS_LOG);\n      }\n      list.push('Divider', OPEN_VIA_CLIENT);\n    }\n\n    if (permission == 'r') {\n      if (!currentRepoInfo.encrypted) {\n        list.push(COPY);\n      }\n      list.push(HISTORY);\n    }\n\n    if (permission == 'rw' && enableOnlyoffice &&\n      onlyofficeConverterExtensions.includes(this.getFileExtension(dirent.name, false))) {\n      list.push(ONLYOFFICE_CONVERT);\n    }\n\n    // if the last item of menuList is Divider, delete the last item\n    if (list[list.length - 1] === 'Divider') {\n      list.pop();\n    }\n\n    // Remove adjacent excess 'Divider'\n    for (let i = 0; i < list.length; i++) {\n      if (list[i] === 'Divider' && list[i + 1] === 'Divider') {\n        list.splice(i, 1);\n        i--;\n      }\n    }\n\n    return list;\n  },\n\n  getFileExtension: function (fileName, withoutDot) {\n    let parts = fileName.toLowerCase().split('.');\n\n    return withoutDot ? parts.pop() : '.' + parts.pop();\n  },\n\n  getDirentOperationList: function(isRepoOwner, currentRepoInfo, dirent, isContextmenu) {\n    return dirent.type == 'dir' ?\n      Utils.getFolderOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu) :\n      Utils.getFileOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n  },\n\n  sharePerms: function(permission) {\n    var title;\n    switch(permission) {\n      case 'rw':\n        title = gettext('Read-Write');\n        break;\n      case 'r':\n        title = gettext('Read-Only');\n        break;\n      case 'admin':\n        title = gettext('Admin');\n        break;\n      case 'cloud-edit':\n        title = gettext('Online Read-Write');\n        break;\n      case 'preview':\n        title = gettext('Online Read-Only');\n        break;\n      case 'invisible':\n        title = gettext('Invisible');\n        break;\n    }\n    return title;\n  },\n\n  sharePermsExplanation: function(permission) {\n    var title;\n    switch(permission) {\n      case 'rw':\n        title = gettext('User can read, write, upload, download and sync files.');\n        break;\n      case 'r':\n        title = gettext('User can read, download and sync files.');\n        break;\n      case 'admin':\n        title = gettext('Besides Write permission, user can also share the library.');\n        break;\n      case 'cloud-edit':\n        title = gettext('User can view and edit file online via browser. Files can\\'t be downloaded.');\n        break;\n      case 'preview':\n        title = gettext('User can only view files online via browser. Files can\\'t be downloaded.');\n        break;\n      case 'invisible':\n        title = gettext('User can not see this folder.');\n        break;\n    }\n    return title;\n  },\n\n  getShareLinkPermissionObject: function(permission) {\n    switch (permission) {\n      case 'preview_download':\n        return {\n          value: permission,\n          text: gettext('Preview and download'),\n          permissionDetails: {\n            'can_edit': false,\n            'can_download': true,\n            'can_upload': false\n          }\n        };\n      case 'preview_only':\n        return {\n          value: permission,\n          text: gettext('Preview only'),\n          permissionDetails: {\n            'can_edit': false,\n            'can_download': false,\n            'can_upload': false\n          }\n        };\n      case 'download_upload':\n        return {\n          value: permission,\n          text: gettext('Download and upload'),\n          permissionDetails: {\n            'can_edit': false,\n            'can_download': true,\n            'can_upload': true\n          }\n        };\n      case 'edit_download':\n        return {\n          value: permission,\n          text: gettext('Edit on cloud and download'),\n          permissionDetails: {\n            'can_edit': true,\n            'can_download': true,\n            'can_upload': false\n          }\n        };\n      case 'cloud_edit':\n        return {\n          value: permission,\n          text: gettext('Edit on cloud only'),\n          permissionDetails: {\n            'can_edit': true,\n            'can_download': false,\n            'can_upload': false\n          }\n        };\n    }\n    return {\n      text: '',\n    };\n  },\n\n  formatSize: function(options) {\n    /*\n     * param: {bytes, precision}\n     */\n    var bytes = options.bytes;\n    var precision = options.precision || 0;\n\n    var kilobyte = 1000;\n    var megabyte = kilobyte * 1000;\n    var gigabyte = megabyte * 1000;\n    var terabyte = gigabyte * 1000;\n\n    if ((bytes >= 0) && (bytes < kilobyte)) {\n      return bytes + ' B';\n\n    } else if ((bytes >= kilobyte) && (bytes < megabyte)) {\n      return (bytes / kilobyte).toFixed(precision) + ' KB';\n\n    } else if ((bytes >= megabyte) && (bytes < gigabyte)) {\n      return (bytes / megabyte).toFixed(precision) + ' MB';\n\n    } else if ((bytes >= gigabyte) && (bytes < terabyte)) {\n      return (bytes / gigabyte).toFixed(precision) + ' GB';\n\n    } else if (bytes >= terabyte) {\n      return (bytes / terabyte).toFixed(precision) + ' TB';\n\n    } else {\n      return bytes + ' B';\n    }\n  },\n\n  formatBitRate: function(bits) {\n    var Bs;\n    if (typeof bits !== 'number') {\n      return '';\n    }\n    Bs = bits / 8;\n    if (Bs >= 1000000000) {\n      return (Bs / 1000000000).toFixed(2) + ' GB/s';\n    }\n    if (Bs >= 1000000) {\n      return (Bs / 1000000).toFixed(2) + ' MB/s';\n    }\n    if (Bs >= 1000) {\n      return (Bs / 1000).toFixed(2) + ' kB/s';\n    }\n    return Bs.toFixed(2) + ' B/s';\n  },\n\n  isMarkdownFile: function(filePath) {\n    let index = filePath.lastIndexOf('.');\n    if (index === -1) {\n      return false;\n    } else {\n      let type = filePath.substring(index).toLowerCase();\n      if (type === '.md' || type === '.markdown') {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  },\n\n  isSdocFile: function(filePath) {\n    let index = filePath.lastIndexOf('.');\n    if (index === -1) {\n      return false;\n    } else {\n      let type = filePath.substring(index).toLowerCase();\n      if (type === '.sdoc') {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  },\n\n  isInternalFileLink: function(url, repoID) {\n    var re = new RegExp(serviceURL + '/lib/' + repoID + '/file.*');\n    return re.test(url);\n  },\n\n  isInternalMarkdownLink: function(url, repoID) {\n    // eslint-disable-next-line\n    var re = new RegExp(serviceURL + '/lib/' + repoID + '.*\\.md$');\n    return re.test(url);\n  },\n\n  isInternalDirLink: function(url, repoID) {\n    var re = new RegExp(serviceURL + '/library/' + repoID + '.*');\n    return re.test(url);\n  },\n\n  getPathFromInternalMarkdownLink: function(url, repoID) {\n    // eslint-disable-next-line\n    var re = new RegExp(serviceURL + '/lib/' + repoID + '/file' + '(.*\\.md)');\n    var array = re.exec(url);\n    var path = decodeURIComponent(array[1]);\n    return path;\n  },\n\n  getPathFromInternalDirLink: function(url, repoID) {\n    var re = new RegExp(serviceURL + '/library/' + repoID + '(/.*)');\n    var array = re.exec(url);\n    var path = decodeURIComponent(array[1]);\n    path = path.slice(1);\n    path = path.slice(path.indexOf('/'));\n    return path;\n  },\n\n  isWikiInternalMarkdownLink: function(url, slug) {\n    slug = encodeURIComponent(slug);\n    // eslint-disable-next-line\n    var re = new RegExp(serviceURL + '/published/' + slug + '.*\\.md$');\n    return re.test(url);\n  },\n\n  isWikiInternalDirLink: function(url, slug) {\n    slug = encodeURIComponent(slug);\n    var re = new RegExp(serviceURL + '/published/' + slug + '.*');\n    return re.test(url);\n  },\n\n  getPathFromWikiInternalMarkdownLink: function(url, slug) {\n    slug = encodeURIComponent(slug);\n    // eslint-disable-next-line\n    var re = new RegExp(serviceURL + '/published/' + slug + '(.*\\.md)');\n    var array = re.exec(url);\n    var path = array[1];\n    try {\n      path = decodeURIComponent(path);\n    } catch(err) {\n      path = path.replace(/%/g, '%25');\n      path = decodeURIComponent(path);\n    }\n    return path;\n  },\n\n  getPathFromWikiInternalDirLink: function(url, slug) {\n    slug = encodeURIComponent(slug);\n    var re = new RegExp(serviceURL + '/published/' + slug + '(/.*)');\n    var array = re.exec(url);\n    var path = array[1];\n    try {\n      path = decodeURIComponent(path);\n    } catch(err) {\n      path = path.replace(/%/g, '%25');\n      path = decodeURIComponent(path);\n    }\n    return path;\n  },\n\n  compareTwoWord: function(wordA, wordB) {\n    // compare wordA and wordB at lower case\n    // if wordA >= wordB, return 1\n    // if wordA < wordB, return -1\n\n    return compareTwoString(wordA, wordB);\n  },\n\n  // compare two strings which may have digits in them\n  // and compare those digits as number instead of string\n  compareStrWithNumbersIn: function(a, b) {\n    var reParts = /\\d+|\\D+/g;\n    var reDigit = /\\d/;\n    var aParts = a.match(reParts);\n    var bParts = b.match(reParts);\n    var isDigitPart;\n    var len = Math.min(aParts.length, bParts.length);\n    var aPart, bPart;\n\n    if (aParts && bParts &&\n      (isDigitPart = reDigit.test(aParts[0])) == reDigit.test(bParts[0])) {\n      // Loop through each substring part to compare the overall strings.\n      for (var i = 0; i < len; i++) {\n        aPart = aParts[i];\n        bPart = bParts[i];\n\n        if (isDigitPart) {\n          aPart = parseInt(aPart, 10);\n          bPart = parseInt(bPart, 10);\n        }\n\n        if (aPart != bPart) {\n          return aPart < bPart ? -1 : 1;\n        }\n\n        // Toggle the value of isDigitPart since the parts will alternate.\n        isDigitPart = !isDigitPart;\n      }\n    }\n\n    // Use normal comparison.\n    return (a >= b) - (a <= b);\n  },\n\n  sortRepos: function(repos, sortBy, sortOrder) {\n    const _this = this;\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function(a, b) {\n          if (!a.repo_name) {\n            return 1;\n          }\n          if (!b.repo_name) {\n            return -1;\n          }\n          var result = _this.compareTwoWord(a.repo_name, b.repo_name);\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function(a, b) {\n          if (!a.repo_name) {\n            return -1;\n          }\n          if (!b.repo_name) {\n            return 1;\n          }\n          var result = _this.compareTwoWord(a.repo_name, b.repo_name);\n          return -result;\n        };\n        break;\n      case 'time-asc':\n        comparator = function(a, b) {\n          return a.last_modified < b.last_modified ? -1 : 1;\n        };\n        break;\n      case 'time-desc':\n        comparator = function(a, b) {\n          return a.last_modified < b.last_modified ? 1 : -1;\n        };\n        break;\n      case 'size-asc':\n        comparator = function(a, b) {\n          if (a.size === b.size) {\n            let result = _this.compareTwoWord(a.repo_name, b.repo_name);\n            return result;\n          }\n          return a.size_original < b.size_original ? -1 : 1;\n        };\n        break;\n      case 'size-desc':\n        comparator = function(a, b) {\n          if (a.size === b.size) {\n            let result = _this.compareTwoWord(a.repo_name, b.repo_name);\n            return -result;\n          }\n\n          return a.size_original < b.size_original ? 1 : -1;\n        };\n        break;\n    }\n\n    repos.sort(comparator);\n    return repos;\n  },\n\n  sortDirents: function(items, sortBy, sortOrder) {\n    const _this = this;\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function(a, b) {\n          var result = _this.compareTwoWord(a.name, b.name);\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function(a, b) {\n          var result = _this.compareTwoWord(a.name, b.name);\n          return -result;\n        };\n        break;\n      case 'time-asc':\n        comparator = function(a, b) {\n          return a.mtime < b.mtime ? -1 : 1;\n        };\n        break;\n      case 'time-desc':\n        comparator = function(a, b) {\n          return a.mtime < b.mtime ? 1 : -1;\n        };\n        break;\n      case 'size-asc':\n        comparator = function(a, b) {\n          if (a.type == 'dir' && b.type == 'dir') {\n            return 0;\n          }\n          return a.size_original < b.size_original ? -1 : 1;\n        };\n        break;\n      case 'size-desc':\n        comparator = function(a, b) {\n          if (a.type == 'dir' && b.type == 'dir') {\n            return 0;\n          }\n          return a.size_original < b.size_original ? 1 : -1;\n        };\n        break;\n    }\n\n    items.sort((a, b) => {\n      if (a.type == 'dir' && b.type == 'file') {\n        return -1;\n      } else if (a.type == 'file' && b.type == 'dir') {\n        return 1;\n      } else {\n        return comparator(a, b);\n      }\n    });\n    return items;\n  },\n\n  // sort dirents in shared folder\n  sortDirentsInSharedDir: function(items, sortBy, sortOrder) {\n    const _this = this;\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function(a, b) {\n          let result;\n          if (a.is_dir) {\n            result = _this.compareTwoWord(a.folder_name, b.folder_name);\n          } else {\n            result = _this.compareTwoWord(a.file_name, b.file_name);\n          }\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function(a, b) {\n          let result;\n          if (a.is_dir) {\n            result = _this.compareTwoWord(a.folder_name, b.folder_name);\n          } else {\n            result = _this.compareTwoWord(a.file_name, b.file_name);\n          }\n          return -result;\n        };\n        break;\n      case 'time-asc':\n        comparator = function(a, b) {\n          return a.last_modified < b.last_modified ? -1 : 1;\n        };\n        break;\n      case 'time-desc':\n        comparator = function(a, b) {\n          return a.last_modified < b.last_modified ? 1 : -1;\n        };\n        break;\n      case 'size-asc':\n        comparator = function(a, b) {\n          if (a.is_dir) {\n            return 0;\n          } else {\n            return a.size < b.size ? -1 : 1;\n          }\n        };\n        break;\n      case 'size-desc':\n        comparator = function(a, b) {\n          if (a.is_dir) {\n            return 0;\n          } else {\n            return a.size < b.size ? 1 : -1;\n          }\n        };\n        break;\n    }\n\n    items.sort((a, b) => {\n      if (a.is_dir && !b.is_dir) {\n        return -1;\n      } else if (!a.is_dir && b.is_dir) {\n        return 1;\n      } else {\n        return comparator(a, b);\n      }\n    });\n    return items;\n  },\n\n  /*\n   * only used in the 'catch' part of a seafileAPI request\n   */\n  getErrorMsg: function(error, showPermissionDeniedTip) {\n    let errorMsg = '';\n    if (error.response) {\n      if (error.response.status == 403) {\n        if (showPermissionDeniedTip) {\n          toaster.danger(\n            <PermissionDeniedTip />,\n            {id: 'permission_denied', duration: 3600}\n          );\n        }\n        errorMsg = gettext('Permission denied');\n      } else if (error.response.status == 429) {\n        errorMsg = gettext('Too many requests');\n      } else if (error.response.data &&\n        error.response.data['error_msg']) {\n        errorMsg = error.response.data['error_msg'];\n      } else {\n        errorMsg = gettext('Error');\n      }\n    } else {\n      errorMsg = gettext('Please check the network.');\n    }\n    return errorMsg;\n  },\n\n  changeMarkdownNodes: function(nodes, fn) {\n    nodes.forEach((item) => {\n      fn(item);\n      if (item.children && item.children.length > 0){\n        Utils.changeMarkdownNodes(item.children, fn);\n      }\n    });\n    return nodes;\n  },\n\n  chooseLanguage: function(suffix) {\n    let mode;\n    switch(suffix) {\n      case 'py':\n        mode = 'python';\n        break;\n      case 'js':\n        mode = 'javascript';\n        break;\n      case 'c':\n        mode = 'c';\n        break;\n      case 'cpp':\n        mode = 'cpp';\n        break;\n      case 'cs':\n        mode = 'csharp';\n        break;\n      case 'java':\n        mode = 'java';\n        break;\n      case 'mdf':\n        mode = 'text/x-sql';\n        break;\n      case 'html':\n        mode = 'html';\n        break;\n      case 'sh':\n        mode = 'shell';\n        break;\n      default:\n        mode = suffix;\n    }\n    return mode;\n  },\n\n  DARK_COLOR_MAP: {\n    // old color\n    'red': '#D11507',\n    'orange': '#FF8C00',\n    'yellow': '#EDEF00',\n    'green': '#006400',\n    'cyan': '#00E0E1',\n    'blue': '#2510A3',\n    'indigo': '#350C56',\n    'purple': '#551054',\n    'pink': '#E3A5B0',\n    'azure': '#C4D0D0',\n    'lime': '#00E100',\n    'teal': '#006A6B',\n    'gray': '#545454',\n\n    // new color\n    '#FFA8A8': '#E49090',\n    '#FFA94D': '#E39136',\n    '#FFD43B': '#E0B815',\n    '#A0EC50': '#83CF32',\n    '#A9E34B': '#8DC72E',\n    '#63E6BE': '#43CAA4',\n    '#4FD2C9': '#2DB9B0',\n    '#72C3FC': '#57ABE3',\n    '#91A7FF': '#7A91E7',\n    '#E599F7': '#CC82DE',\n    '#B197FC': '#9B82E5',\n    '#F783AC': '#DF6D97',\n    '#CED4DA': '#A8ADB2',\n  },\n\n  getDarkColor: function(color) {\n    let darkColor;\n    darkColor = this.DARK_COLOR_MAP[color];\n    return darkColor;\n  },\n\n  getCopySuccessfulMessage: function(dirNames) {\n    let message;\n    let dirNamesLength = dirNames.length;\n    if (dirNamesLength === 1) {\n      message = gettext('Successfully copied %(name)s.');\n    } else if (dirNamesLength === 2) {\n      message = gettext('Successfully copied %(name)s and 1 other item.');\n    } else {\n      message = gettext('Successfully copied %(name)s and %(amount)s other items.');\n      message = message.replace('%(amount)s', dirNamesLength - 1);\n    }\n    message = message.replace('%(name)s', dirNames[0]);\n    return message;\n  },\n\n  getMoveSuccessMessage: function(dirNames) {\n    let message;\n    let dirNamesLength = dirNames.length;\n    if (dirNamesLength === 1) {\n      message = gettext('Successfully moved %(name)s.');\n    } else if (dirNamesLength === 2) {\n      message = gettext('Successfully moved %(name)s and 1 other item.');\n    } else {\n      message = gettext('Successfully moved %(name)s and %(amount)s other items.');\n      message = message.replace('%(amount)s', dirNamesLength - 1);\n    }\n    message = message.replace('%(name)s', dirNames[0]);\n    return message;\n  },\n\n  getCopyFailedMessage: function(dirNames) {\n    let message;\n    let dirNamesLength = dirNames.length;\n\n    if (dirNamesLength > 1) {\n      message = gettext('Failed to copy %(name)s and %(amount)s other item(s).');\n      message = message.replace('%(amount)s', dirNamesLength - 1);\n    } else {\n      message = gettext('Failed to copy %(name)s.');\n    }\n    message = message.replace('%(name)s', dirNames[0]);\n    return message;\n  },\n\n  getMoveFailedMessage: function(dirNames) {\n    let message;\n    let dirNamesLength = dirNames.length;\n    if (dirNamesLength > 1) {\n      message = gettext('Failed to move %(name)s and %(amount)s other item(s).');\n      message = message.replace('%(amount)s', dirNamesLength - 1);\n    } else {\n      message = gettext('Failed to move %(name)s.');\n    }\n    message = message.replace('%(name)s', dirNames[0]);\n    return message;\n  },\n\n  handleSearchedItemClick: function(searchedItem) {\n    if (searchedItem.is_dir === true) {\n      let url = siteRoot + 'library/' + searchedItem.repo_id + '/' + searchedItem.repo_name + searchedItem.path;\n      let newWindow = window.open('about:blank');\n      newWindow.location.href = url;\n    } else {\n      let url = siteRoot + 'lib/' + searchedItem.repo_id + '/file' + Utils.encodePath(searchedItem.path);\n      let newWindow = window.open('about:blank');\n      newWindow.location.href = url;\n    }\n  },\n\n  generatePassword: function(length, hasNum=1, hasChar=1, hasSymbol=1) {\n\n    var password = '';\n\n    // 65~90A~Z\n    password += String.fromCharCode(Math.floor((Math.random() * (90-65)) + 65));\n\n    // 97~122a~z\n    password += String.fromCharCode(Math.floor((Math.random() * (122-97)) + 97));\n\n    // 48~570~9\n    password += String.fromCharCode(Math.floor((Math.random() * (57-48)) + 48));\n\n    // 33~47!~/\n    password += String.fromCharCode(Math.floor((Math.random() * (47-33)) + 33));\n\n    // 33~47!~/\n    // 48~570~9\n    // 58~64:~@\n    // 65~90A~Z\n    // 91~96[~`\n    // 97~122a~z\n    // 123~127{~\n    for (var i = 0; i < length-4; i++) {\n      var num = Math.floor((Math.random() * (127-33)) + 33);\n      password += String.fromCharCode(num);\n    }\n\n    return password;\n  },\n\n  pathNormalize: function(originalPath) {\n    let oldPath = originalPath.split('/');\n    let newPath = [];\n    for (let i = 0; i < oldPath.length; i++) {\n      if (oldPath[i] === '.' || oldPath[i] === '') {\n        continue;\n      } else if (oldPath[i] === '..') {\n        newPath.pop();\n      } else {\n        newPath.push(oldPath[i]);\n      }\n    }\n    return newPath.join('/');\n  },\n\n  getEventData: function(event, data) {\n    if (event.target.dataset) {\n      return event.target.dataset[data];\n    }\n    return event.target.getAttribute('data-' + data);\n\n  },\n\n  /**\n   * Check whether user has permission to share a dirent.\n   * If dirent is none, then check whether the user can share the repo\n   * scene 1: root path or folder path, control the share button in the toolbar\n   * scene 2: selected a dirent, control the share button in the toolbar dropdown-menu\n   * scene 3: dirent list(grid list), control the share button in the dirent-item or righe-menu\n   *\n   * @param {*} repoInfo\n   * @param {*} userDirPermission\n   * @param {*} dirent\n   */\n  isHasPermissionToShare: function(repoInfo, userDirPermission, dirent) {\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userDirPermission);\n    if (isCustomPermission) {\n      const { download_external_link } = customPermission.permission;\n      return download_external_link;\n    }\n\n    let { is_admin: isAdmin, is_virtual: isVirtual, encrypted: repoEncrypted, owner_email: ownerEmail } = repoInfo;\n    let isRepoOwner = ownerEmail === username;\n\n    if (repoEncrypted) {\n      return true;\n    }\n\n    // for 'file' & 'dir'\n    if (dirent) {\n      if (userDirPermission == 'rw' || userDirPermission == 'r') {\n        // can generate internal link\n        return true;\n      }\n    }\n\n    // the root path or the dirent type is dir\n    let hasGenerateShareLinkPermission = false;\n    if (canGenerateShareLink && (userDirPermission == 'rw' || userDirPermission == 'r')) {\n      hasGenerateShareLinkPermission = true;\n      return hasGenerateShareLinkPermission;\n    }\n\n    let hasGenerateUploadLinkPermission = false;\n    if (canGenerateUploadLink && (userDirPermission == 'rw')) {\n      hasGenerateUploadLinkPermission = true;\n      return hasGenerateUploadLinkPermission;\n    }\n\n    let hasDirPrivateSharePermission = false;\n    if (!isVirtual && (isRepoOwner || isAdmin)) {\n      hasDirPrivateSharePermission = true;\n      return hasDirPrivateSharePermission;\n    }\n\n    return false;\n  },\n\n  registerGlobalVariable: function(namespace, key, value) {\n    if (!window[namespace]) {\n      window[namespace] = {};\n    }\n    window[namespace][key] = value;\n  },\n\n  formatTime: function(seconds) {\n    var ss = parseInt(seconds);\n    var mm = 0;\n    var hh = 0;\n    if (ss > 60) {\n      mm = parseInt(ss / 60);\n      ss = parseInt(ss % 60);\n    }\n    if (mm > 60) {\n      hh = parseInt(mm / 60);\n      mm = parseInt(mm % 60);\n    }\n\n    var result = ('00' + parseInt(ss)).slice(-2);\n    if (mm > 0) {\n      result = ('00' + parseInt(mm)).slice(-2) + ':' + result;\n    } else {\n      result = '00:' + result;\n    }\n    if (hh > 0) {\n      result = ('00' + parseInt(hh)).slice(-2) + ':' + result;\n    } else {\n      result = '00:' + result;\n    }\n    return result;\n  },\n\n  hasNextPage(curPage, perPage, totalCount) {\n    return curPage * perPage < totalCount;\n  },\n\n  getStrengthLevel: function(pwd) {\n    const _this = this;\n    var num = 0;\n\n    if (pwd.length < shareLinkPasswordMinLength) {\n      return 0;\n    } else {\n      for (var i = 0; i < pwd.length; i++) {\n        // return the unicode\n        // bitwise OR\n        num |= _this.getCharMode(pwd.charCodeAt(i));\n      }\n      return _this.calculateBitwise(num);\n    }\n  },\n\n  getCharMode: function(n) {\n    if (n >= 48 && n <= 57) // nums\n      return 1;\n    if (n >= 65 && n <= 90) // uppers\n      return 2;\n    if (n >= 97 && n <= 122) // lowers\n      return 4;\n    else\n      return 8;\n  },\n\n  calculateBitwise: function(num) {\n    var level = 0;\n    for (var i = 0; i < 4; i++){\n      // bitwise AND\n      if (num&1) level++;\n      // Right logical shift\n      num>>>=1;\n    }\n    return level;\n  },\n\n  getSharedPermission: function(item) {\n    let permission = item.permission;\n    if (item.is_admin) {\n      permission = 'admin';\n    }\n    if (item.permission.startsWith('custom-')) {\n      permission = item.permission.slice(7);\n    }\n    return permission;\n  },\n\n  getUserPermission: function(userPerm) {\n    const { custom_permission } = window;\n    const common_permissions = ['rw', 'r', 'admin', 'cloud-edit', 'preview'];\n    // visit the shared repo(virtual repo) by custom permission\n    if (!custom_permission || common_permissions.indexOf(userPerm) > -1) {\n      return { isCustomPermission: false };\n    }\n    // userPerm is startsWith 'custom-'\n    if (custom_permission) {\n      const permissionId = custom_permission.id;\n      const userPermId = parseInt(userPerm.split('-')[1]);\n      if (permissionId === userPermId) {\n        return { isCustomPermission: true, customPermission: custom_permission };\n      }\n      // TODO user set custom permission on folder\n    }\n    return { isCustomPermission: false };\n  },\n\n  // for a11y\n  onKeyDown: function(e) {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      e.target.click();\n    }\n  },\n\n  updateTabTitle: function(content) {\n    const title = document.getElementsByTagName('title')[0];\n    title.innerText = content;\n  },\n\n  generateHistoryURL: function(siteRoot, repoID, path) {\n    if (!siteRoot || !repoID || !path) return '';\n    return siteRoot + 'repo/file_revisions/' + repoID + '/?p=' + this.encodePath(path);\n  },\n\n  generateRevisionURL: function(siteRoot, repoID, path) {\n    if (!siteRoot || !repoID || !path) return '';\n    return siteRoot + 'repo/sdoc_revision/' + repoID + '/?p=' + this.encodePath(path);\n  },\n\n  generateRevisionsURL: function(siteRoot, repoID, path) {\n    if (!siteRoot || !repoID || !path) return '';\n    return siteRoot + 'repo/sdoc_revisions/' + repoID + '/?p=' + this.encodePath(path);\n  },\n\n  isFunction: function(functionToCheck) {\n    const getType = {};\n    return functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\n  },\n\n  getUrlSearches() {\n    const search = location.search;\n    let searchParams = {};\n    if (search.length === 0) {\n      return searchParams;\n    }\n    let allSearches = search.split('?')[1];\n    let allSearchesArr = allSearches.split('&');\n    allSearchesArr.forEach(item => {\n      let itemArr = item.split('=');\n      searchParams[itemArr[0]] = decodeURI(itemArr[1]);\n    });\n    return searchParams;\n  },\n\n  // If value is null, delete the search parameter; else, add or update the search parameter.\n  updateSearchParameter(key, value) {\n    const { origin, pathname } = location;\n    const searchParams = this.getUrlSearches();\n    searchParams[key] = value;\n    let newSearch = '?';\n    for (let key in searchParams) {\n      let value = searchParams[key];\n      if (value) {\n        newSearch = newSearch === '?' ? `?${key}=${value}` : `${newSearch}&${key}=${value}`;\n      }\n    }\n    history.replaceState(null, '', origin + pathname + newSearch);\n  },\n\n  isRelativePath(url) {\n    let RgExp = new RegExp('^(?:[a-z]+:)?//', 'i');\n    return !RgExp.test(url);\n  }\n\n};\n\nexport const isMobile = (typeof (window) !== 'undefined') && (window.innerWidth < 768 || navigator.userAgent.toLowerCase().match(/(ipod|ipad|iphone|android|coolpad|mmp|smartphone|midp|wap|xoom|symbian|j2me|blackberry|wince)/i) != null);\n\nexport const validateName = (newName) => {\n  let isValid = true;\n  let errMessage = '';\n  if (!newName || !newName.trim()) {\n    isValid = false;\n    errMessage = gettext('Name is required');\n    return { isValid, errMessage };\n  }\n  if (newName.includes('/')) {\n    isValid = false;\n    errMessage = gettext('Name cannot contain slash');\n    return { isValid, errMessage };\n  }\n  if (newName.includes('`')) {\n    isValid = false;\n    errMessage = gettext('Name cannot contain backtick');\n    return { isValid, errMessage };\n  }\n  if (newName.includes('\\\\')) {\n    isValid = false;\n    errMessage = gettext('Name cannot contain backslash');\n    return { isValid, errMessage };\n  }\n  if (newName === '..') {\n    isValid = false;\n    errMessage = gettext('Name cannot be double dots');\n    return { isValid, errMessage };\n  }\n  return { isValid, errMessage };\n};\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/devices/desktop-devices.js",["3895"],[],"import React, { Component, Fragment } from 'react';\nimport DevicesNav from './devices-nav';\nimport DevicesByPlatform from './devices-by-platform';\nimport MainPanelTopbar from '../main-panel-topbar';\n\nclass OrgDesktopDevices extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <DevicesNav currentItem=\"desktop\" />\n            <DevicesByPlatform\n              devicesPlatform={'desktop'}\n            />\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgDesktopDevices;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/web-settings/web-settings.js",["3896"],[],"import React, { Component, Fragment } from 'react';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, mediaUrl, logoPath, orgID, orgEnableAdminCustomLogo, orgEnableAdminCustomName } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\nimport toaster from '../../../components/toast';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Section from './section';\nimport InputItem from './input-item';\nimport FileItem from './file-item';\n\nimport '../../../css/system-admin-web-settings.css';\n\nclass OrgWebSettings extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      config_dict: null,\n      logoPath: logoPath,\n      file_ext_white_list: '',\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.orgAdminGetOrgInfo().then((res) => {\n      this.setState({\n        loading: false,\n        config_dict: res.data,\n        file_ext_white_list: res.data.file_ext_white_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  updateName= (key, newOrgName) => {\n    seafileAPI.orgAdminUpdateName(orgID, newOrgName).then((res) => {\n      this.setState({\n        config_dict: res.data\n      });\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  updateLogo = (file) => {\n    seafileAPI.orgAdminUpdateLogo(orgID, file).then((res) => {\n      this.setState({\n        logoPath: res.data.logo_path\n      });\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  updateFileExtWhiteList = (key, value) => {\n    seafileAPI.orgAdminSetSysSettingInfo(orgID, key, value).then((res) => {\n      this.setState({\n        file_ext_white_list: res.data.file_ext_white_list\n      });\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { loading, errorMsg, config_dict, file_ext_white_list } = this.state;\n    let logoPath = this.state.logoPath;\n    logoPath = logoPath.indexOf('image-view') != -1 ? logoPath : mediaUrl + logoPath;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Settings')}</h3>\n            </div>\n            <div className=\"cur-view-content container mw-100\">\n              {loading && <Loading />}\n              {errorMsg && <p className=\"error text-center mt-4\">{errorMsg}</p>}\n              {(!loading && !errorMsg) && config_dict &&\n              <Fragment>\n                <p className=\"small text-secondary my-4\"></p>\n\n                <Section headingText={gettext('Info')}>\n                  <Fragment>\n                    <InputItem\n                      saveSetting={this.updateName}\n                      displayName={gettext('Team name')}\n                      keyText='orgName'\n                      value={config_dict['org_name']}\n                      helpTip={''}\n                      disabled={!orgEnableAdminCustomName}\n                    />\n                    { orgEnableAdminCustomLogo && <FileItem\n                      postFile={this.updateLogo}\n                      displayName='Logo'\n                      keyText='Logo'\n                      filePath={logoPath}\n                      fileWidth={256}\n                      fileHeight={64}\n                      helpTip='logo.png, 256px * 64px'\n                    />\n                    }\n                  </Fragment>\n                </Section>\n                <Section headingText={gettext('File Upload')}>\n                  <Fragment>\n                    <InputItem\n                      saveSetting={this.updateFileExtWhiteList}\n                      displayName={gettext('File extension white list')}\n                      keyText='file_ext_white_list'\n                      value={file_ext_white_list}\n                      helpTip={gettext('File extension white list for file upload via web UI and API. For example, \"md;txt;docx\". Empty means no limit.')}\n                    />\n                  </Fragment>\n                </Section>\n              </Fragment>\n              }\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgWebSettings;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/libraries/org-repo-trash.js",["3897","3898","3899"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, orgID } from '../../../utils/constants';\nimport toaster from '../../../components/toast/index';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport ModalPortal from '../../../components/modal-portal';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport ReposNav from './org-repo-nav';\n\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  getPreviousPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page - 1);\n  };\n\n  getNextPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page + 1);\n  };\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No deleted libraries')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          {/* <p className=\"mt-4 small text-secondary\">{gettext('Tip: libraries deleted {trashReposExpireDays} days ago will be cleaned automatically.').replace('{trashReposExpireDays}', trashReposExpireDays)}</p> */}\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"5%\">{/*icon*/}</th>\n                <th width=\"43%\">{gettext('Name')}</th>\n                <th width=\"27%\">{gettext('Owner')}</th>\n                <th width=\"20%\">{gettext('Deleted Time')}</th>\n                <th width=\"5%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  repo={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  onDeleteRepo={this.props.onDeleteRepo}\n                  onRestoreRepo={this.props.onRestoreRepo}\n                />);\n              })}\n            </tbody>\n          </table>\n          {pageInfo &&\n            <Paginator\n              gotoPreviousPage={this.getPreviousPageList}\n              gotoNextPage={this.getNextPageList}\n              currentPage={pageInfo.current_page}\n              hasNextPage={pageInfo.has_next_page}\n              curPerPage={curPerPage}\n              resetPerPage={this.props.resetPerPage}\n            />\n          }\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  deleteItem: PropTypes.func,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onRestoreRepo: PropTypes.func,\n  getListByPage: PropTypes.func.isRequired,\n  resetPerPage: PropTypes.func,\n  pageInfo: PropTypes.object,\n  curPerPage: PropTypes.number,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOpIconShown: false,\n      isDeleteRepoDialogOpen: false,\n      isRestoreRepoDialogOpen: false\n    };\n  }\n\n  handleMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  };\n\n  handleMouseOut = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  onDeleteRepo = () => {\n    const repo = this.props.repo;\n    seafileAPI.orgAdminDeleteTrashRepo(orgID, repo.id).then((res) => {\n      this.props.onDeleteRepo(repo);\n      const msg = gettext('Successfully deleted {name}.').replace('{name}', repo.name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onRestoreRepo = () => {\n    const repo = this.props.repo;\n    seafileAPI.orgAdminRestoreTrashRepo(orgID, repo.id).then((res) => {\n      this.props.onRestoreRepo(repo);\n      let message = gettext('Successfully restored the library.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  toggleDeleteRepoDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteRepoDialogOpen: !this.state.isDeleteRepoDialogOpen});\n  };\n\n  toggleRestoreRepoDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isRestoreRepoDialogOpen: !this.state.isRestoreRepoDialogOpen});\n  };\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Restore':\n        translateResult = gettext('Restore');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  };\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Restore':\n        this.toggleRestoreRepoDialog();\n        break;\n      case 'Delete':\n        this.toggleDeleteRepoDialog();\n        break;\n      default:\n        break;\n    }\n  };\n\n  render () {\n    const { repo } = this.props;\n    const { isOpIconShown, isDeleteRepoDialogOpen, isRestoreRepoDialogOpen } = this.state;\n    const iconUrl = Utils.getLibIconUrl(repo);\n    const iconTitle = Utils.getLibIconTitle(repo);\n    const repoName = '<span class=\"op-target\">' + Utils.HTMLescape(repo.name) + '</span>';\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{repo.name}</td>\n          <td>\n            {repo.owner.indexOf('@seafile_group') == -1 ?\n              <UserLink email={repo.owner} name={repo.owner_name} /> :\n              repo.group_name}\n          </td>\n          <td>{moment(repo.delete_time).fromNow()}</td>\n          <td>\n            {isOpIconShown && (\n              <OpMenu\n                operations={['Restore', 'Delete']}\n                translateOperations={this.translateOperations}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            )}\n          </td>\n        </tr>\n        {isDeleteRepoDialogOpen &&\n          <ModalPortal>\n            <CommonOperationConfirmationDialog\n              title={gettext('Delete Library')}\n              message={gettext('Are you sure you want to delete {placeholder} completely?').replace('{placeholder}', repoName)}\n              executeOperation={this.onDeleteRepo}\n              confirmBtnText={gettext('Delete')}\n              toggleDialog={this.toggleDeleteRepoDialog}\n            />\n          </ModalPortal>\n        }\n        {isRestoreRepoDialogOpen &&\n          <ModalPortal>\n            <CommonOperationConfirmationDialog\n              title={gettext('Restore Library')}\n              message={gettext('Are you sure you want to restore {placeholder}?').replace('{placeholder}', repoName)}\n              executeOperation={this.onRestoreRepo}\n              confirmBtnText={gettext('Restore')}\n              toggleDialog={this.toggleRestoreRepoDialog}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onRestoreRepo: PropTypes.func,\n};\n\nclass TrashRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      repos: [],\n      pageInfo: {},\n      perPage: 25,\n      isCleanTrashDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage = 1, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getReposByPage(this.state.currentPage);\n    });\n  }\n\n  toggleCleanTrashDialog = () => {\n    this.setState({isCleanTrashDialogOpen: !this.state.isCleanTrashDialogOpen});\n  };\n\n  getReposByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.orgAdminListTrashRepos(orgID, page, perPage).then((res) => {\n      this.setState({\n        repos: res.data.repos,\n        pageInfo: res.data.page_info,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getReposByPage(1);\n    });\n  };\n\n  onDeleteRepo = (targetRepo) => {\n    let repos = this.state.repos.filter(repo => {\n      return repo.id != targetRepo.id;\n    });\n    this.setState({\n      repos: repos\n    });\n  };\n\n  onRestoreRepo = (targetRepo) => {\n    let repos = this.state.repos.filter(repo => {\n      return repo.id != targetRepo.id;\n    });\n    this.setState({\n      repos: repos\n    });\n  };\n\n  cleanTrash = () => {\n    seafileAPI.orgAdminCleanTrashRepo(orgID).then(res => {\n      this.setState({repos: []});\n      toaster.success(gettext('Successfully cleared trash.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { isCleanTrashDialogOpen } = this.state;\n\n    // enable 'search': <MainPanelTopbar search={this.getSearch()}>\n    return (\n      <Fragment>\n        {this.state.repos.length ? (\n          <MainPanelTopbar {...this.props}>\n            <Button className=\"operation-item\" onClick={this.toggleCleanTrashDialog}>{gettext('Clean')}</Button>\n          </MainPanelTopbar>\n        ) : <MainPanelTopbar {...this.props} />\n        }\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <ReposNav currentItem=\"trash\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repos}\n                pageInfo={this.state.pageInfo}\n                onDeleteRepo={this.onDeleteRepo}\n                onRestoreRepo={this.onRestoreRepo}\n                getListByPage={this.getReposByPage}\n                resetPerPage={this.resetPerPage}\n                curPerPage={this.state.perPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isCleanTrashDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Clear Trash')}\n            message={gettext('Are you sure you want to clear trash?')}\n            executeOperation={this.cleanTrash}\n            confirmBtnText={gettext('Clear')}\n            toggleDialog={this.toggleCleanTrashDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default TrashRepos;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/statistic/statistic-users.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/devices/desktop-devices.js",["3900"],[],"import React, { Component, Fragment } from 'react';\nimport DevicesNav from './devices-nav';\nimport DevicesByPlatform from './devices-by-platform';\nimport MainPanelTopbar from '../main-panel-topbar';\n\nclass DesktopDevices extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <DevicesNav currentItem=\"desktop\" />\n            <DevicesByPlatform\n              devicesPlatform={'desktop'}\n            />\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default DesktopDevices;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/statistic/statistic-traffic.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/users/admin-users.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/statistic/statistic-reports.js",["3901"],[],"import React, { Fragment } from 'react';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport moment from 'moment';\nimport StatisticNav from './statistic-nav';\nimport { Button, Input } from 'reactstrap';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nclass StatisticReports extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      month: moment().format('YYYYMM'),\n      errorMessage: ''\n    };\n  }\n\n  handleChange = (e) => {\n    let month = e.target.value;\n    this.setState({\n      month: month\n    });\n  };\n\n  onGenerateReports = (type) => {\n    let url = siteRoot + 'api/v2.1/admin/statistics/';\n    let { month } = this.state;\n    if (!month) {\n      let errorMessage = gettext('It is required.');\n      this.setState({\n        errorMessage: errorMessage\n      });\n      return;\n    }\n    if (type === 'month') {\n      let pattern = /^([012]\\d{3})(0[1-9]|1[012])$/;\n      if (!pattern.test(month)) {\n        let errorMessage = gettext('Invalid month, should be yyyymm.');\n        this.setState({\n          errorMessage: errorMessage\n        });\n        return;\n      }\n    }\n    switch(type) {\n      case 'month':\n        url += 'system-user-traffic/excel/?month=' + month;\n        break;\n      case 'storage':\n        url += 'system-user-storage/excel/?';\n        break;\n    }\n    this.setState({\n      errorMessage: ''\n    });\n    window.location.href = url;\n  };\n\n  render() {\n\n    let { errorMessage } = this.state;\n    return(\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"cur-view-container\">\n          <StatisticNav currentItem=\"reportsStatistic\" />\n          <div className=\"cur-view-content\">\n            <div className=\"statistic-reports\">\n              <div className=\"statistic-reports-title\">{gettext('Monthly User Traffic')}</div>\n              <div className=\"d-flex align-items-center mt-4\">\n                <span className=\"statistic-reports-tip\">{gettext('Month:')}</span>\n                <Input className=\"statistic-reports-input\" defaultValue={moment().format('YYYYMM')} onChange={this.handleChange} />\n                <Button className=\"statistic-reports-submit operation-item\" onClick={this.onGenerateReports.bind(this, 'month')}>{gettext('Create Report')}</Button>\n              </div>\n              {errorMessage && <div className=\"error\">{errorMessage}</div>}\n            </div>\n            <div className=\"statistic-reports\">\n              <div className=\"statistic-reports-title\">{gettext('User Storage')}</div>\n              <Button className=\"mt-4 operation-item\" onClick={this.onGenerateReports.bind(this, 'storage')}>{gettext('Create Report')}</Button>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default StatisticReports;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/libraries/org-all-repos.js",["3902","3903","3904","3905","3906","3907"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot, mediaUrl, orgID } from '../../../utils/constants';\nimport toaster from '../../../components/toast/index';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport ModalPortal from '../../../components/modal-portal';\nimport TransferDialog from '../../../components/dialog/transfer-dialog';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport OrgAdminRepo from '../../../models/org-admin-repo';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport ReposNav from './org-repo-nav';\n\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  getPreviousPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page - 1);\n  };\n\n  getNextPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page + 1);\n  };\n\n  sortByFileCount = (e) => {\n    e.preventDefault();\n    this.props.sortItems('file_count');\n  };\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    this.props.sortItems('size');\n  };\n\n  render() {\n    // offer 'sort' only for 'all repos'\n    const { loading, errorMsg, items, pageInfo, curPerPage, sortBy } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries')}</h2>\n        </EmptyTip>\n      );\n      const initialSortIcon = <span className=\"fas fa-sort\"></span>;\n      const sortIcon = <span className=\"fas fa-caret-down\"></span>;\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"5%\">{/*icon*/}</th>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"15%\">\n                  {sortBy != undefined ?\n                    <Fragment>\n                      <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortByFileCount}>{gettext('Files')} {sortBy == 'file_count' ? sortIcon : initialSortIcon}</a>{' / '}\n                      <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBy == 'size' ? sortIcon : initialSortIcon}</a>\n                    </Fragment> :\n                    gettext('Files') / gettext('Size')\n                  }\n                </th>\n                <th width=\"32%\">ID</th>\n                <th width=\"18%\">{gettext('Owner')}</th>\n                <th width=\"5%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<RepoItem\n                  key={index}\n                  repo={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  onDeleteRepo={this.props.onDeleteRepo}\n                  transferRepoItem={this.props.transferRepoItem}\n                />);\n              })}\n            </tbody>\n          </table>\n          {pageInfo &&\n            <Paginator\n              gotoPreviousPage={this.getPreviousPageList}\n              gotoNextPage={this.getNextPageList}\n              currentPage={pageInfo.current_page}\n              hasNextPage={pageInfo.has_next_page}\n              curPerPage={curPerPage}\n              resetPerPage={this.props.resetPerPage}\n            />\n          }\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  deleteItem: PropTypes.func,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onRestoreRepo: PropTypes.func,\n  getListByPage: PropTypes.func.isRequired,\n  resetPerPage: PropTypes.func,\n  pageInfo: PropTypes.object,\n  curPerPage: PropTypes.number,\n  sortItems: PropTypes.func,\n  sortBy: PropTypes.string,\n  transferRepoItem: PropTypes.func.isRequired,\n};\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n  transferRepoItem: PropTypes.func.isRequired,\n};\n\nclass RepoItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      showMenu: false,\n      isItemMenuShow: false,\n      isTransferDialogShow: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        showMenu: true,\n        highlight: true,\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        showMenu: false,\n        highlight: false\n      });\n    }\n  };\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    this.toggleOperationMenu(e);\n  };\n\n  toggleOperationMenu = (e) => {\n    e.stopPropagation();\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow }, () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.setState({\n            highlight: false,\n            showMenu: false,\n          });\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  };\n\n  toggleDelete = () => {\n    this.props.onDeleteRepo(this.props.repo);\n  };\n\n  renderLibIcon = (repo) => {\n    let href;\n    let iconTitle;\n    if (repo.encrypted) {\n      href = mediaUrl + 'img/lib/48/lib-encrypted.png';\n      iconTitle = gettext('Encrypted library');\n    } else {\n      href = mediaUrl + 'img/lib/48/lib.png';\n      iconTitle = gettext('Read-Write library');\n    }\n    return <img src={href} title={iconTitle} alt={iconTitle} width=\"24\" />;\n  };\n\n  renderRepoOwnerHref = (repo) => {\n    let href;\n    if (repo.isDepartmentRepo) {\n      href = siteRoot + 'org/groupadmin/' + repo.groupID + '/';\n    } else {\n      href = siteRoot + 'org/useradmin/info/' + repo.ownerEmail + '/';\n    }\n    return href;\n  };\n\n  toggleTransfer = () => {\n    this.setState({isTransferDialogShow: !this.state.isTransferDialogShow});\n  };\n\n  onTransferRepo = (user) => {\n    let repo = this.props.repo;\n    seafileAPI.orgAdminTransferOrgRepo(orgID, repo.repoID, user.email).then(res => {\n      this.props.transferRepoItem(repo.repoID, user);\n      let msg = gettext('Successfully transferred the library.');\n      toaster.success(msg);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n    this.toggleTransfer();\n  };\n\n  render() {\n    let { repo } = this.props;\n    let isOperationMenuShow = this.state.showMenu;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n          <td>{this.renderLibIcon(repo)}</td>\n          <td>{repo.repoName}</td>\n          <td>{`${repo.file_count} / ${Utils.bytesToSize(repo.size)}`}</td>\n          <td>{repo.repoID}</td>\n          <td><a href={this.renderRepoOwnerHref(repo)}>{repo.ownerName}</a></td>\n          <td className=\"text-center cursor-pointer\">\n            {isOperationMenuShow &&\n            <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n              <DropdownToggle\n                tag=\"a\"\n                className=\"attr-action-icon fas fa-ellipsis-v\"\n                title={gettext('More operations')}\n                aria-label={gettext('More operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isItemMenuShow}\n                onClick={this.onDropdownToggleClick}\n              />\n              <DropdownMenu>\n                <DropdownItem onClick={this.toggleDelete}>{gettext('Delete')}</DropdownItem>\n                <DropdownItem onClick={this.toggleTransfer}>{gettext('Transfer')}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n            }\n          </td>\n        </tr>\n        {this.state.isTransferDialogShow && (\n          <ModalPortal>\n            <TransferDialog\n              itemName={repo.repoName}\n              submit={this.onTransferRepo}\n              toggleDialog={this.toggleTransfer}\n              isOrgAdmin={true}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nRepoItem.propTypes = propTypes;\n\nclass OrgAllRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      repos: [],\n      pageInfo: {},\n      perPage: 25,\n      sortBy: '',\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage = 1, perPage, sortBy } = this.state;\n    this.setState({\n      sortBy: urlParams.get('order_by') || sortBy,\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getReposByPage(this.state.currentPage);\n    });\n  }\n\n  getReposByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.orgAdminListOrgRepos(orgID, page, perPage, this.state.sortBy).then((res) => {\n      let orgRepos = res.data.repo_list.map(item => {\n        return new OrgAdminRepo(item);\n      });\n      let page_info = {};\n      if(res.data.page_info === undefined){\n        let page = res.data.page;\n        let has_next_page = res.data.page_next;\n        page_info = {\n          'current_page': page,\n          'has_next_page': has_next_page\n        };\n      }else{\n        page_info = res.data.page_info;\n      }\n      this.setState({\n        loading: false,\n        repos: orgRepos,\n        pageInfo: page_info\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  sortItems = (sortBy) => {\n    this.setState({\n      currentPage: 1,\n      sortBy: sortBy\n    }, () => {\n      let url = new URL(location.href);\n      let searchParams = new URLSearchParams(url.search);\n      const { currentPage, sortBy } = this.state;\n      searchParams.set('page', currentPage);\n      searchParams.set('order_by', sortBy);\n      url.search = searchParams.toString();\n      navigate(url.toString());\n      this.getReposByPage(currentPage);\n    });\n  };\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getReposByPage(1);\n    });\n  };\n\n\n  deleteRepoItem = (repo) => {\n    seafileAPI.orgAdminDeleteOrgRepo(orgID, repo.repoID).then(res => {\n      this.setState({\n        repos: this.state.repos.filter(item => item.repoID !== repo.repoID)\n      });\n      let msg = gettext('Successfully deleted {name}');\n      msg = msg.replace('{name}', repo.repoName);\n      toaster.success(msg);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  transferRepoItem = (repoID, user) => {\n    this.setState({\n      repos: this.state.repos.map(item =>{\n        if (item.repoID == repoID) {\n          item.ownerEmail = user.email;\n          item.ownerName = user.value;\n        }\n        return item;\n      })\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <ReposNav currentItem=\"all\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repos}\n                sortBy={this.state.sortBy}\n                sortItems={this.sortItems}\n                pageInfo={this.state.pageInfo}\n                curPerPage={this.state.perPage}\n                getListByPage={this.getReposByPage}\n                resetPerPage={this.resetPerPage}\n                onDeleteRepo={this.deleteRepoItem}\n                transferRepoItem={this.transferRepoItem}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgAllRepos;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/statistic/statistic-storage.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/users/ldap-imported-users.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/users/ldap-users.js",["3908"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport UsersNav from './users-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.currentPage - 1);\n  };\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.currentPage + 1);\n  };\n\n  render() {\n    const { loading, errorMsg, items, curPerPage, hasNextPage, currentPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No users')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"40%\">{gettext('Email')}</th>\n                <th width=\"30%\">{gettext('Space Used')}{' / '}{gettext('Quota')}</th>\n                <th width=\"30%\">{gettext('Last Login')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  resetPerPage: PropTypes.func,\n  getListByPage: PropTypes.func.isRequired,\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  currentPage: PropTypes.number,\n  curPerPage: PropTypes.number,\n  hasNextPage: PropTypes.bool,\n};\n\nclass Item extends Component {\n  render() {\n    const { item } = this.props;\n    return (\n      <Fragment>\n        <tr>\n          <td><UserLink email={item.email} name={item.email} /></td>\n          <td>\n            {`${Utils.bytesToSize(item.quota_usage)} / ${item.quota_total > 0 ? Utils.bytesToSize(item.quota_total) : '--'}`}\n          </td>\n          <td>\n            {item.last_login ? moment(item.last_login).fromNow() : '--'}\n          </td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n};\n\nclass Users extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userList: {},\n      hasNextPage: false,\n      currentPage: 1,\n      perPage: 25\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getUsersListByPage(this.state.currentPage);\n    });\n  }\n\n  getUsersListByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListLDAPUsers(page, perPage).then(res => {\n      this.setState({\n        loading: false,\n        userList: res.data.ldap_user_list,\n        hasNextPage: res.data.has_next_page,\n        currentPage: page\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getUsersListByPage(1);\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <UsersNav currentItem=\"ldap\" />\n            <div className=\"cur-view-content\">\n              <Content\n                resetPerPage={this.resetPerPage}\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.userList}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                getListByPage={this.getUsersListByPage}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nUsers.propTypes = {\n  email: PropTypes.string,\n};\n\nexport default Users;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/users/user-links.js",["3909","3910","3911","3912","3913","3914","3915","3916","3917"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport LinkDialog from '../../../components/dialog/share-admin-link';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './user-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No shared links')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"5%\">{/* icon */}</th>\n                <th width=\"30%\">{gettext('Name')}</th>\n                <th width=\"20%\">{gettext('Size')}</th>\n                <th width=\"20%\">{gettext('Type')}</th>\n                <th width=\"20%\">{gettext('Visits')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  deleteItem={this.props.deleteItem}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  deleteItem: PropTypes.func,\n  email: PropTypes.string,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isLinkDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  };\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  toggleLinkDialog = () => {\n    this.setState({isLinkDialogOpen: !this.state.isLinkDialogOpen});\n  };\n\n  deleteItem = () => {\n    this.props.deleteItem(this.props.item);\n  };\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch (item) {\n      case 'View':\n        translateResult = gettext('View');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n    }\n\n    return translateResult;\n  };\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'View':\n        this.toggleLinkDialog();\n        break;\n      case 'Delete':\n        this.deleteItem();\n        break;\n    }\n  };\n\n  getRoleText = () => {\n    let roleText;\n    const { item } = this.props;\n    switch(item.role) {\n      case 'Owner':\n        roleText = gettext('Owner');\n        break;\n      case 'Admin':\n        roleText = gettext('Admin');\n        break;\n      case 'Member':\n        roleText = gettext('Member');\n        break;\n    }\n    return roleText;\n  };\n\n  getIconUrl = () => {\n    const { item } = this.props;\n    let url;\n    if (item.type == 'upload') {\n      url = Utils.getFolderIconUrl();\n    } else { // share link\n      if (item.is_dir) {\n        url = Utils.getFolderIconUrl();\n      } else {\n        url = Utils.getFileIconUrl(item.obj_name);\n      }\n    }\n    return url;\n  };\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isLinkDialogOpen } = this.state;\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><img src={this.getIconUrl()} alt=\"\" width=\"24\" /></td>\n          <td>{item.obj_name == '/' ? item.repo_name : item.obj_name}</td>\n          {item.type == 'upload' ?\n            <Fragment>\n              <td></td>\n              <td>{gettext('Upload')}</td>\n            </Fragment> :\n            <Fragment>\n              <td>{item.is_dir ? null : Utils.bytesToSize(item.size)}</td>\n              <td>{gettext('Download')}</td>\n            </Fragment>\n          }\n          <td>{item.view_cnt}</td>\n          <td>\n            {isOpIconShown &&\n            <OpMenu\n              operations={['View', 'Delete']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isLinkDialogOpen &&\n          <LinkDialog\n            link={item.link}\n            toggleDialog={this.toggleLinkDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  deleteItem: PropTypes.func,\n  email: PropTypes.string,\n};\n\nclass Links extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userInfo: {},\n      uploadLinkItems: [],\n      shareLinkItems: []\n    };\n  }\n\n  componentDidMount () {\n    const email = decodeURIComponent(this.props.email);\n    seafileAPI.sysAdminGetUser(email).then((res) => {\n      this.setState({\n        userInfo: res.data\n      });\n    });\n\n    seafileAPI.sysAdminListShareLinksByUser(email).then(res => {\n      const items = res.data.share_link_list.map(item => {\n        item.type = 'download';\n        return item;\n      });\n      items.sort((a, b) => {\n        return a.is_dir ? -1 : 1;\n      });\n      this.setState({\n        loading: false,\n        shareLinkItems: items\n      });\n    });\n    seafileAPI.sysAdminListUploadLinksByUser(email).then(res => {\n      const items = res.data.upload_link_list.map(item => {\n        item.type = 'upload';\n        return item;\n      });\n      this.setState({\n        loading: false,\n        uploadLinkItems: items\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteItem = (item) => {\n    const type = item.type;\n    const token = item.token;\n    if (type == 'download') {\n      seafileAPI.sysAdminDeleteShareLink(token).then(res => {\n        let items = this.state.shareLinkItems.filter(item=> {\n          return item.token != token;\n        });\n        this.setState({\n          shareLinkItems: items\n        });\n        toaster.success(gettext('Successfully deleted 1 item.'));\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.sysAdminDeleteUploadLink(token).then(res => {\n        let items = this.state.uploadLinkItems.filter(item=> {\n          return item.token != token;\n        });\n        this.setState({\n          uploadLinkItems: items\n        });\n        toaster.success(gettext('Successfully deleted 1 item.'));\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  render() {\n    const { shareLinkItems, uploadLinkItems } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"links\" email={this.props.email} userName={this.state.userInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={[].concat(uploadLinkItems, shareLinkItems)}\n                deleteItem={this.deleteItem}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nLinks.propTypes = {\n  email: PropTypes.string,\n};\n\nexport default Links;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/users/search-users.js",["3918","3919","3920","3921","3922","3923","3924","3925","3926","3927","3928"],[],"import React, { Component, Fragment } from 'react';\nimport { Button, Form, FormGroup, Input, Col } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport Paginator from '../../../components/paginator';\nimport toaster from '../../../components/toast';\nimport SysAdminUserSetQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Content from './users-content';\n\n\nclass SearchUsers extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      query: '',\n      isSubmitBtnActive: false,\n      loading: true,\n      errorMsg: '',\n      userList: [],\n      pageInfo: {\n        has_next_page: false,\n        current_page: 1,\n      },\n      currentPage: 1,\n      perPage: 25,\n      hasUserSelected: false,\n      selectedUserList: [],\n      isAllUsersSelected: false,\n      isBatchSetQuotaDialogOpen: false,\n      isBatchDeleteUserDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    let params = (new URL(document.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      query: params.get('query') || '',\n      currentPage: parseInt(params.get('page') || currentPage),\n      perPage: parseInt(params.get('per_page') || perPage)\n    }, () => {this.getItems(this.state.currentPage);});\n  }\n\n  toggleBatchSetQuotaDialog = () => {\n    this.setState({isBatchSetQuotaDialogOpen: !this.state.isBatchSetQuotaDialogOpen});\n  };\n\n  toggleBatchDeleteUserDialog = () => {\n    this.setState({isBatchDeleteUserDialogOpen: !this.state.isBatchDeleteUserDialogOpen});\n  };\n\n  onUserSelected = (item) => {\n    let hasUserSelected = false;\n    let selectedUserList = [];\n    // traverse all users, toggle its selected status\n    let users = this.state.userList.map(user => {\n      // toggle status\n      if (user.email === item.email) {\n        user.isSelected = !user.isSelected;\n      }\n      // update selectedUserList\n      // if current user is now selected, push it to selectedUserList\n      // if current user is now not selected, drop it from selectedUserList\n      if (user.isSelected == true) {\n        hasUserSelected = true;\n        selectedUserList.push(user);\n      } else {\n        selectedUserList = selectedUserList.filter(thisuser => {\n          return thisuser.email != user.email;\n        });\n      }\n      return user;\n    });\n    // finally update state\n    this.setState({\n      userList: users,\n      hasUserSelected: hasUserSelected,\n      selectedUserList: selectedUserList,\n    });\n  };\n\n  toggleSelectAllUsers = () => {\n    if (this.state.isAllUsersSelected) {\n      // if previous state is allSelected, toggle to not select\n      let users = this.state.userList.map(user => {\n        user.isSelected = false;\n        return user;\n      });\n      this.setState({\n        userList: users,\n        hasUserSelected: false,\n        isAllUsersSelected: false,\n        selectedUserList: [],\n      });\n    } else {\n      // if previous state is not allSelected, toggle to selectAll\n      let users = this.state.userList.map(user => {\n        user.isSelected = true;\n        return user;\n      });\n      this.setState({\n        userList: users,\n        hasUserSelected: true,\n        isAllUsersSelected: true,\n        selectedUserList: users\n      });\n    }\n  };\n\n  getItems = (page) => {\n    seafileAPI.sysAdminSearchUsers(this.state.query.trim(), page, this.state.perPage).then(res => {\n      this.setState({\n        userList: res.data.user_list,\n        loading: false,\n        pageInfo: res.data.page_info\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getItems(1);\n    });\n  };\n\n  deleteUser = (email, username) => {\n    seafileAPI.sysAdminDeleteUser(email).then(res => {\n      let newUserList = this.state.userList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({userList: newUserList});\n      let msg = gettext('Deleted user %s');\n      msg = msg.replace('%s', username);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  setUserQuotaInBatch = (quotaTotal) => {\n    let emails = this.state.selectedUserList.map(user => {\n      return user.email;\n    });\n    seafileAPI.sysAdminSetUserQuotaInBatch(emails, quotaTotal).then(res => {\n      let userList = this.state.userList.map(item => {\n        res.data.success.forEach(resultUser => {\n          if (item.email == resultUser.email) {\n            item.quota_total = resultUser.quota_total;\n          }\n        });\n        return item;\n      });\n      this.setState({userList: userList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  deleteUserInBatch = () => {\n    let emails = this.state.selectedUserList.map(user => {\n      return user.email;\n    });\n    seafileAPI.sysAdminDeleteUserInBatch(emails).then(res => {\n      if (res.data.success.length) {\n        let oldUserList = this.state.userList;\n        let newUserList = oldUserList.filter(oldUser => {\n          return !res.data.success.some(deletedUser =>{\n            return deletedUser.email == oldUser.email;\n          });\n        });\n        this.setState({\n          userList: newUserList,\n          hasUserSelected: emails.length != res.data.success.length\n        });\n        const length = res.data.success.length;\n        const msg = length == 1 ?\n          gettext('Successfully deleted 1 user.') :\n          gettext('Successfully deleted {user_number_placeholder} users.')\n            .replace('{user_number_placeholder}', length);\n        toaster.success(msg);\n      }\n      res.data.failed.forEach(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  updateUser = (email, key, value) => {\n    seafileAPI.sysAdminUpdateUser(email, key, value).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item[key]= res.data[key];\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n      const msg = (key == 'is_active' && value) ?\n        res.data.update_status_tip : gettext('Edit succeeded');\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  updateAdminRole = (email, role) => {\n    seafileAPI.sysAdminUpdateAdminRole(email, role).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item.admin_role = res.data.role;\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n      toaster.success(gettext('Edit succeeded'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  revokeAdmin = (email, name) => {\n    seafileAPI.sysAdminUpdateUser(email, 'is_staff', false).then(res => {\n      let userList = this.state.userList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({\n        userList: userList\n      });\n      toaster.success(gettext('Successfully revoked the admin permission of {placeholder}.').replace('{placeholder}', name));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  handleInputChange = (e) => {\n    this.setState({\n      query: e.target.value\n    }, this.checkSubmitBtnActive);\n  };\n\n  checkSubmitBtnActive = () => {\n    const { query } = this.state;\n    this.setState({\n      isSubmitBtnActive: query.trim()\n    });\n  };\n\n  getPreviousPageList = () => {\n    this.getItems(this.state.pageInfo.current_page - 1);\n  };\n\n  getNextPageList = () => {\n    this.getItems(this.state.pageInfo.current_page + 1);\n  };\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      const { isSubmitBtnActive } = this.state;\n      if (isSubmitBtnActive) {\n        this.getItems();\n      }\n    }\n  };\n\n  render() {\n    const { query, isSubmitBtnActive } = this.state;\n    const {\n      hasUserSelected,\n      isBatchDeleteUserDialogOpen,\n      isBatchSetQuotaDialogOpen\n    } = this.state;\n    return (\n      <Fragment>\n        {hasUserSelected ?\n          <MainPanelTopbar {...this.props}>\n            <Fragment>\n              <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleBatchSetQuotaDialog}>{gettext('Set Quota')}</Button>\n              <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleBatchDeleteUserDialog}>{gettext('Delete Users')}</Button>\n            </Fragment>\n          </MainPanelTopbar> :\n          <MainPanelTopbar {...this.props} />\n        }\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Users')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Search Users')}</h4>\n                <Form tag={'div'}>\n                  <FormGroup row>\n                    <Col sm={5}>\n                      <Input type=\"text\" name=\"query\" value={query} placeholder={gettext('Search users')} onChange={this.handleInputChange} onKeyDown={this.handleKeyDown} />\n                    </Col>\n                  </FormGroup>\n                  <FormGroup row>\n                    <Col sm={{size: 5}}>\n                      <button className=\"btn btn-outline-primary\" disabled={!isSubmitBtnActive} onClick={this.getItems}>{gettext('Submit')}</button>\n                    </Col>\n                  </FormGroup>\n                </Form>\n              </div>\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Result')}</h4>\n                <Content\n                  isLDAPImported={false}\n                  isAdmin={false}\n                  isSearchResult={true}\n                  loading={this.state.loading}\n                  errorMsg={this.state.errorMsg}\n                  items={this.state.userList}\n                  updateUser={this.updateUser}\n                  deleteUser={this.deleteUser}\n                  updateAdminRole={this.updateAdminRole}\n                  revokeAdmin={this.revokeAdmin}\n                  onUserSelected={this.onUserSelected}\n                  isAllUsersSelected={this.isAllUsersSelected}\n                  toggleSelectAllUsers={this.toggleSelectAllUsers}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        {isBatchSetQuotaDialogOpen &&\n          <SysAdminUserSetQuotaDialog\n            toggle={this.toggleBatchSetQuotaDialog}\n            updateQuota={this.setUserQuotaInBatch}\n          />\n        }\n        {isBatchDeleteUserDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Users')}\n            message={gettext('Are you sure you want to delete the selected user(s) ?')}\n            executeOperation={this.deleteUserInBatch}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleBatchDeleteUserDialog}\n          />\n        }\n        {this.state.pageInfo &&\n        <Paginator\n          gotoPreviousPage={this.getPreviousPageList}\n          gotoNextPage={this.getNextPageList}\n          currentPage={this.state.pageInfo.current_page}\n          hasNextPage={this.state.pageInfo.has_next_page}\n          curPerPage={this.state.perPage}\n          resetPerPage={this.resetPerPage}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default SearchUsers;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/users/users.js",["3929","3930","3931","3932","3933","3934","3935","3936","3937","3938","3939","3940","3941"],[],"import React, { Component, Fragment } from 'react';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { Button } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { isPro, gettext, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport SysAdminUserSetQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport SysAdminImportUserDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-import-user-dialog';\nimport SysAdminAddUserDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-user-dialog';\nimport SysAdminBatchAddAdminDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-batch-add-admin-dialog';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport SysAdminUser from '../../../models/sysadmin-user';\nimport SysAdminAdminUser from '../../../models/sysadmin-admin-user';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Search from '../search';\nimport UsersNav from './users-nav';\nimport Content from './users-content';\n\nconst { availableRoles } = window.sysadmin.pageOptions;\n\nconst propTypes = {\n  isAdmin: PropTypes.bool,\n  isLDAPImported: PropTypes.bool\n};\n\nclass Users extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userList: [],\n      hasNextPage: false,\n      currentPage: 1,\n      perPage: 25,\n      hasUserSelected: false,\n      selectedUserList: [],\n      isAllUsersSelected: false,\n      isImportUserDialogOpen: false,\n      isAddUserDialogOpen: false,\n      isBatchSetQuotaDialogOpen: false,\n      isBatchDeleteUserDialogOpen: false,\n      isBatchAddAdminDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    if (this.props.isAdmin) { // 'Admin' page\n      this.getUserList(); // no pagination\n    } else {\n      let urlParams = (new URL(window.location)).searchParams;\n      const {\n        currentPage, perPage,\n        sortBy = '',\n        sortOrder = 'asc'\n      } = this.state;\n      this.setState({\n        perPage: parseInt(urlParams.get('per_page') || perPage),\n        currentPage: parseInt(urlParams.get('page') || currentPage),\n        sortBy: urlParams.get('order_by') || sortBy,\n        sortOrder: urlParams.get('direction') || sortOrder\n      }, () => {\n        this.getUsersListByPage(this.state.currentPage);\n      });\n    }\n  }\n\n  toggleImportUserDialog = () => {\n    this.setState({isImportUserDialogOpen: !this.state.isImportUserDialogOpen});\n  };\n\n  toggleAddUserDialog = () => {\n    this.setState({isAddUserDialogOpen: !this.state.isAddUserDialogOpen});\n  };\n\n  toggleBatchSetQuotaDialog = () => {\n    this.setState({isBatchSetQuotaDialogOpen: !this.state.isBatchSetQuotaDialogOpen});\n  };\n\n  toggleBatchDeleteUserDialog = () => {\n    this.setState({isBatchDeleteUserDialogOpen: !this.state.isBatchDeleteUserDialogOpen});\n  };\n\n  onUserSelected = (item) => {\n    let hasUserSelected = false;\n    let selectedUserList = [];\n    // traverse all users, toggle its selected status\n    let users = this.state.userList.map(user => {\n      // toggle status\n      if (user.email === item.email) {\n        user.isSelected = !user.isSelected;\n      }\n      // update selectedUserList\n      // if current user is now selected, push it to selectedUserList\n      // if current user is now not selected, drop it from selectedUserList\n      if (user.isSelected == true) {\n        hasUserSelected = true;\n        selectedUserList.push(user);\n      } else {\n        selectedUserList = selectedUserList.filter(thisuser => {\n          return thisuser.email != user.email;\n        });\n      }\n      return user;\n    });\n    // finally update state\n    this.setState({\n      userList: users,\n      hasUserSelected: hasUserSelected,\n      selectedUserList: selectedUserList,\n    });\n  };\n\n  toggleSelectAllUsers = () => {\n    if (this.state.isAllUsersSelected) {\n      // if previous state is allSelected, toggle to not select\n      let users = this.state.userList.map(user => {\n        user.isSelected = false;\n        return user;\n      });\n      this.setState({\n        userList: users,\n        hasUserSelected: false,\n        isAllUsersSelected: false,\n        selectedUserList: [],\n      });\n    } else {\n      // if previous state is not allSelected, toggle to selectAll\n      let users = this.state.userList.map(user => {\n        user.isSelected = true;\n        return user;\n      });\n      this.setState({\n        userList: users,\n        hasUserSelected: true,\n        isAllUsersSelected: true,\n        selectedUserList: users\n      });\n    }\n  };\n\n  getUserList = () => {\n  // get admins\n    seafileAPI.sysAdminListAdmins().then(res => {\n      let users = res.data.admin_user_list.map(user => {\n        return new SysAdminAdminUser(user);\n      });\n      this.setState({\n        userList: users,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  getUsersListByPage = (page) => {\n    const { perPage, sortBy, sortOrder } = this.state;\n    const { isLDAPImported } = this.props;\n    seafileAPI.sysAdminListUsers(page, perPage, isLDAPImported, sortBy, sortOrder).then(res => {\n      let users = res.data.data.map(user => {return new SysAdminUser(user);});\n      this.setState({\n        userList: users,\n        loading: false,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n        currentPage: page\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  sortByQuotaUsage = () => {\n    this.setState({\n      sortBy: 'quota_usage',\n      sortOrder: this.state.sortOrder == 'asc' ? 'desc' : 'asc',\n      currentPage: 1\n    }, () => {\n      let url = new URL(location.href);\n      let searchParams = new URLSearchParams(url.search);\n      const { currentPage, sortBy, sortOrder } = this.state;\n      searchParams.set('page', currentPage);\n      searchParams.set('order_by', sortBy);\n      searchParams.set('direction', sortOrder);\n      url.search = searchParams.toString();\n      navigate(url.toString());\n      this.getUsersListByPage(currentPage);\n    });\n  };\n\n  deleteUser = (email, username) => {\n    seafileAPI.sysAdminDeleteUser(email).then(res => {\n      let newUserList = this.state.userList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({userList: newUserList});\n      let msg = gettext('Deleted user %s');\n      msg = msg.replace('%s', username);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  setUserQuotaInBatch = (quotaTotal) => {\n    let emails = this.state.selectedUserList.map(user => {\n      return user.email;\n    });\n    seafileAPI.sysAdminSetUserQuotaInBatch(emails, quotaTotal).then(res => {\n      let userList = this.state.userList.map(item => {\n        res.data.success.forEach(resultUser => {\n          if (item.email == resultUser.email) {\n            item.quota_total = resultUser.quota_total;\n          }\n        });\n        return item;\n      });\n      this.setState({userList: userList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  deleteUserInBatch = () => {\n    let emails = this.state.selectedUserList.map(user => {\n      return user.email;\n    });\n    seafileAPI.sysAdminDeleteUserInBatch(emails).then(res => {\n      if (res.data.success.length) {\n        let oldUserList = this.state.userList;\n        let newUserList = oldUserList.filter(oldUser => {\n          return !res.data.success.some(deletedUser =>{\n            return deletedUser.email == oldUser.email;\n          });\n        });\n        this.setState({\n          userList: newUserList,\n          hasUserSelected: emails.length != res.data.success.length\n        });\n        const length = res.data.success.length;\n        const msg = length == 1 ?\n          gettext('Successfully deleted 1 user.') :\n          gettext('Successfully deleted {user_number_placeholder} users.')\n            .replace('{user_number_placeholder}', length);\n        toaster.success(msg);\n      }\n      res.data.failed.forEach(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  importUserInBatch = (file) => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    seafileAPI.sysAdminImportUserViaFile(file).then((res) => {\n      if (res.data.success.length) {\n        const users = res.data.success.map(item => {\n          if (item.institution == undefined) {\n            item.institution = '';\n          }\n          return new SysAdminUser(item);\n        });\n        this.setState({\n          userList: users.concat(this.state.userList)\n        });\n      }\n      res.data.failed.forEach(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  };\n\n  addUser = (data) => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    const { email, name, role, password } = data;\n    seafileAPI.sysAdminAddUser(email, name, role, password).then((res) => {\n      let userList = this.state.userList;\n      userList.unshift(res.data);\n      this.setState({\n        userList: userList\n      });\n      toaster.success(res.data.add_user_tip);\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  };\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getUsersListByPage(1);\n    });\n  };\n\n  updateUser = (email, key, value) => {\n    seafileAPI.sysAdminUpdateUser(email, key, value).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item[key]= res.data[key];\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n      const msg = (key == 'is_active' && value) ?\n        res.data.update_status_tip : gettext('Edit succeeded');\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  updateAdminRole = (email, role) => {\n    seafileAPI.sysAdminUpdateAdminRole(email, role).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item.admin_role = res.data.role;\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n      toaster.success(gettext('Edit succeeded'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  revokeAdmin = (email, name) => {\n    seafileAPI.sysAdminUpdateUser(email, 'is_staff', false).then(res => {\n      let userList = this.state.userList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({\n        userList: userList\n      });\n      toaster.success(gettext('Successfully revoked the admin permission of {placeholder}.').replace('{placeholder}', name));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  getOperationsForAll = () => {\n    const { isAdmin, isLDAPImported } = this.props;\n\n    if (isAdmin) {\n      return <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleBatchAddAdminDialog}>{gettext('Add Admin')}</Button>;\n    }\n\n    if (isLDAPImported) {\n      return <a className=\"btn btn-secondary operation-item\" href={`${siteRoot}sys/useradmin/export-excel/`}>{gettext('Export Excel')}</a>;\n    }\n\n    // 'database'\n    return (\n      <Fragment>\n        <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleImportUserDialog}>{gettext('Import Users')}</Button>\n        <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddUserDialog}>{gettext('Add User')}</Button>\n        <a className=\"btn btn-secondary operation-item\" href={`${siteRoot}sys/useradmin/export-excel/`}>{gettext('Export Excel')}</a>\n      </Fragment>\n    );\n  };\n\n  getCurrentNavItem = () => {\n    const { isAdmin, isLDAPImported } = this.props;\n    let item = 'database';\n    if (isAdmin) {\n      item = 'admin';\n    } else if (isLDAPImported) {\n      item = 'ldap-imported';\n    }\n    return item;\n  };\n\n  toggleBatchAddAdminDialog = () => {\n    this.setState({isBatchAddAdminDialogOpen: !this.state.isBatchAddAdminDialogOpen});\n  };\n\n  addAdminInBatch = (emails) => {\n    seafileAPI.sysAdminAddAdminInBatch(emails).then(res => {\n      let users = res.data.success.map(user => {\n        return new SysAdminAdminUser(user);\n      });\n      this.setState({\n        userList: users.concat(this.state.userList)\n      });\n      res.data.failed.forEach(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  getSearch = () => {\n    if (this.props.isAdmin) {\n      return null;\n    }\n    // offer 'Search' for 'DB' & 'LDAPImported' users\n    return <Search\n      placeholder={gettext('Search users')}\n      submit={this.searchItems}\n    />;\n  };\n\n  searchItems = (keyword) => {\n    navigate(`${siteRoot}sys/search-users/?query=${encodeURIComponent(keyword)}`);\n  };\n\n  render() {\n    const { isAdmin, isLDAPImported } = this.props;\n    const {\n      hasUserSelected,\n      isImportUserDialogOpen,\n      isAddUserDialogOpen,\n      isBatchDeleteUserDialogOpen,\n      isBatchSetQuotaDialogOpen,\n      isBatchAddAdminDialogOpen\n    } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar search={this.getSearch()} {...this.props}>\n          {hasUserSelected ?\n            <Fragment>\n              <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleBatchSetQuotaDialog}>{gettext('Set Quota')}</Button>\n              <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleBatchDeleteUserDialog}>{gettext('Delete Users')}</Button>\n            </Fragment>\n            : this.getOperationsForAll()\n          }\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <UsersNav currentItem={this.getCurrentNavItem()} />\n            <div className=\"cur-view-content\">\n              <Content\n                isAdmin={isAdmin}\n                isLDAPImported={isLDAPImported}\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.userList}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortByQuotaUsage={this.sortByQuotaUsage}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                getListByPage={this.getUsersListByPage}\n                updateUser={this.updateUser}\n                deleteUser={this.deleteUser}\n                updateAdminRole={this.updateAdminRole}\n                revokeAdmin={this.revokeAdmin}\n                onUserSelected={this.onUserSelected}\n                isAllUsersSelected={this.isAllUsersSelected}\n                toggleSelectAllUsers={this.toggleSelectAllUsers}\n              />\n            </div>\n          </div>\n        </div>\n        {isImportUserDialogOpen &&\n        <SysAdminImportUserDialog\n          toggle={this.toggleImportUserDialog}\n          importUserInBatch={this.importUserInBatch}\n        />\n        }\n        {isAddUserDialogOpen &&\n          <SysAdminAddUserDialog\n            dialogTitle={gettext('Add User')}\n            showRole={isPro}\n            availableRoles={availableRoles}\n            addUser={this.addUser}\n            toggleDialog={this.toggleAddUserDialog}\n          />\n        }\n        {isBatchSetQuotaDialogOpen &&\n          <SysAdminUserSetQuotaDialog\n            toggle={this.toggleBatchSetQuotaDialog}\n            updateQuota={this.setUserQuotaInBatch}\n          />\n        }\n        {isBatchDeleteUserDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Users')}\n            message={gettext('Are you sure you want to delete the selected user(s) ?')}\n            executeOperation={this.deleteUserInBatch}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleBatchDeleteUserDialog}\n          />\n        }\n        {isBatchAddAdminDialogOpen &&\n          <SysAdminBatchAddAdminDialog\n            addAdminInBatch={this.addAdminInBatch}\n            toggle={this.toggleBatchAddAdminDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nUsers.propTypes = propTypes;\n\nexport default Users;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/users/user-info.js",["3942","3943"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { FormGroup, Label, Input, Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, isPro } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport Loading from '../../../components/loading';\nimport SysAdminSetQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport SysAdminSetUploadDownloadRateLimitDialog from '../../../components/dialog/sysadmin-dialog/set-upload-download-rate-limit';\nimport SysAdminUpdateUserDialog from '../../../components/dialog/sysadmin-dialog/update-user';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './user-nav';\n\nconst { twoFactorAuthEnabled } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentKey: '',\n      dialogTitle: '',\n      isSetQuotaDialogOpen: false,\n      isSetUserUploadRateLimitDialogOpen: false,\n      isSetUserDownloadRateLimitDialogOpen: false,\n      isUpdateUserDialogOpen: false\n    };\n  }\n\n  toggleSetQuotaDialog = () => {\n    this.setState({isSetQuotaDialogOpen: !this.state.isSetQuotaDialogOpen});\n  };\n\n  toggleSetUserUploadRateLimitDialog = () => {\n    this.setState({isSetUserUploadRateLimitDialogOpen: !this.state.isSetUserUploadRateLimitDialogOpen});\n  };\n\n  toggleSetUserDownloadRateLimitDialog = () => {\n    this.setState({isSetUserDownloadRateLimitDialogOpen: !this.state.isSetUserDownloadRateLimitDialogOpen});\n  };\n\n  updateQuota = (value) => {\n    this.props.updateUser('quota_total', value);\n  };\n\n  updateUploadDownloadRateLimit = (uploadOrDownload, value) => {\n    if (uploadOrDownload == 'upload'){\n      this.props.updateUser('upload_rate_limit', value);\n    }\n    if (uploadOrDownload == 'download'){\n      this.props.updateUser('download_rate_limit', value);\n    }\n  };\n\n  toggleDialog = (key, dialogTitle) => {\n    this.setState({\n      currentKey: key,\n      dialogTitle: dialogTitle,\n      isUpdateUserDialogOpen: !this.state.isUpdateUserDialogOpen\n    });\n  };\n\n  toggleSetNameDialog = () => {\n    this.toggleDialog('name', gettext('Set Name'));\n  };\n\n  toggleSetUserLoginIDDialog = () => {\n    this.toggleDialog('login_id', gettext('Set Login ID'));\n  };\n\n  toggleSetUserComtactEmailDialog = () => {\n    this.toggleDialog('contact_email', gettext('Set Contact Email'));\n  };\n\n  toggleSetUserReferenceIDDialog = () => {\n    this.toggleDialog('reference_id', gettext('Set Reference ID'));\n  };\n\n  updateValue = (value) => {\n    this.props.updateUser(this.state.currentKey, value);\n  };\n\n  toggleUpdateUserDialog = () => {\n    this.toggleDialog('', '');\n  };\n\n  showEditIcon = (action) => {\n    return (\n      <span\n        title={gettext('Edit')}\n        className=\"fa fa-pencil-alt attr-action-icon\"\n        onClick={action}>\n      </span>\n    );\n  };\n\n  render() {\n    const { loading, errorMsg } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const user = this.props.userInfo;\n      const {\n        currentKey, dialogTitle,\n        isSetQuotaDialogOpen, isUpdateUserDialogOpen,\n        isSetUserUploadRateLimitDialogOpen, isSetUserDownloadRateLimitDialogOpen\n      } = this.state;\n      return (\n        <Fragment>\n          <dl className=\"m-0\">\n            <dt className=\"info-item-heading\">{gettext('Avatar')}</dt>\n            <dd className=\"info-item-content\">\n              <img src={user.avatar_url} alt={user.name} width=\"80\" className=\"rounded\"  />\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Email')}</dt>\n            <dd className=\"info-item-content\">{user.email}</dd>\n\n            {user.org_name &&\n              <Fragment>\n                <dt className=\"info-item-heading\">{gettext('Organization')}</dt>\n                <dd className=\"info-item-content\">{user.org_name}</dd>\n              </Fragment>\n            }\n\n            <dt className=\"info-item-heading\">{gettext('Name')}</dt>\n            <dd className=\"info-item-content\">\n              {user.name || '--'}\n              {this.showEditIcon(this.toggleSetNameDialog)}\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Login ID')}</dt>\n            <dd className=\"info-item-content\">\n              {user.login_id || '--'}\n              {this.showEditIcon(this.toggleSetUserLoginIDDialog)}\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Contact Email')}</dt>\n            <dd className=\"info-item-content\">\n              {user.contact_email || '--'}\n              {this.showEditIcon(this.toggleSetUserComtactEmailDialog)}\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Reference ID')}</dt>\n            <dd className=\"info-item-content\">\n              {user.reference_id|| '--'}\n              {this.showEditIcon(this.toggleSetUserReferenceIDDialog)}\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Space Used / Quota')}</dt>\n            <dd className=\"info-item-content\">\n              {`${Utils.bytesToSize(user.quota_usage)} / ${user.quota_total > 0 ? Utils.bytesToSize(user.quota_total) : '--'}`}\n              {this.showEditIcon(this.toggleSetQuotaDialog)}\n            </dd>\n            {isPro &&\n              <Fragment>\n                <dt className=\"info-item-heading\">{gettext('Upload Rate Limit')}</dt>\n                <dd className=\"info-item-content\">\n                  {user.upload_rate_limit > 0 ? user.upload_rate_limit + ' kB/s' : '--'}\n                  {this.showEditIcon(this.toggleSetUserUploadRateLimitDialog)}\n                </dd>\n                <dt className=\"info-item-heading\">{gettext('Download Rate Limit')}</dt>\n                <dd className=\"info-item-content\">\n                  {user.download_rate_limit > 0 ? user.download_rate_limit + ' kB/s' : '--'}\n                  {this.showEditIcon(this.toggleSetUserDownloadRateLimitDialog)}\n                </dd>\n              </Fragment>\n            }\n            {twoFactorAuthEnabled &&\n              <Fragment>\n                <dt className=\"info-item-heading\">{gettext('Two-Factor Authentication')}</dt>\n                <dd className=\"info-item-content\">\n                  {user.has_default_device ?\n                    <FormGroup>\n                      <p className=\"mb-1\">{gettext('Status: enabled')}</p>\n                      <Button onClick={this.props.disable2FA}>{gettext('Disable Two-Factor Authentication')}</Button>\n                    </FormGroup> :\n                    <FormGroup>\n                      <Button disabled={true}>{gettext('Disable Two-Factor Authentication')}</Button>\n                    </FormGroup>\n                  }\n                  <FormGroup check>\n                    <Label check>\n                      <Input type=\"checkbox\" checked={user.is_force_2fa} onChange={this.props.toggleForce2fa} />\n                      <span>{gettext('Force Two-Factor Authentication')}</span>\n                    </Label>\n                  </FormGroup>\n                </dd>\n              </Fragment>\n            }\n          </dl>\n          {isSetQuotaDialogOpen &&\n          <SysAdminSetQuotaDialog\n            updateQuota={this.updateQuota}\n            toggle={this.toggleSetQuotaDialog}\n          />\n          }\n          {(isPro && isSetUserUploadRateLimitDialogOpen) &&\n          <SysAdminSetUploadDownloadRateLimitDialog\n            uploadOrDownload=\"upload\"\n            updateUploadDownloadRateLimit={this.updateUploadDownloadRateLimit}\n            toggle={this.toggleSetUserUploadRateLimitDialog}\n          />\n          }\n          {(isPro && isSetUserDownloadRateLimitDialogOpen) &&\n          <SysAdminSetUploadDownloadRateLimitDialog\n            uploadOrDownload=\"download\"\n            updateUploadDownloadRateLimit={this.updateUploadDownloadRateLimit}\n            toggle={this.toggleSetUserDownloadRateLimitDialog}\n          />\n          }\n          {isUpdateUserDialogOpen &&\n          <SysAdminUpdateUserDialog\n            dialogTitle={dialogTitle}\n            value={user[currentKey]}\n            updateValue={this.updateValue}\n            toggleDialog={this.toggleUpdateUserDialog}\n          />\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  deleteItem: PropTypes.func,\n  updateUser: PropTypes.func.isRequired,\n  userInfo: PropTypes.object.isRequired,\n  disable2FA: PropTypes.func.isRequired,\n  toggleForce2fa: PropTypes.func.isRequired,\n  email: PropTypes.string,\n};\n\nclass User extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userInfo: {}\n    };\n  }\n\n  componentDidMount () {\n    // avatar size: 160\n    const email = decodeURIComponent(this.props.email);\n    seafileAPI.sysAdminGetUser(email, 160).then((res) => {\n      this.setState({\n        loading: false,\n        userInfo: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  updateUser = (key, value) => {\n    const email = this.state.userInfo.email;\n    seafileAPI.sysAdminUpdateUser(email, key, value).then(res => {\n      let userInfo = this.state.userInfo;\n      userInfo[key]= res.data[key];\n      this.setState({\n        userInfo: userInfo\n      });\n      toaster.success(gettext('Edit succeeded'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  disable2FA = () => {\n    const email = this.state.userInfo.email;\n    seafileAPI.sysAdminDeleteTwoFactorAuth(email).then(res => {\n      let userInfo = this.state.userInfo;\n      userInfo.has_default_device = false;\n      this.setState({\n        userInfo: userInfo\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  toggleForce2fa = (e) => {\n    const email = this.state.userInfo.email;\n    const checked = e.target.checked;\n    seafileAPI.sysAdminSetForceTwoFactorAuth(email, checked).then(res => {\n      let userInfo = this.state.userInfo;\n      userInfo.is_force_2fa = checked;\n      this.setState({\n        userInfo: userInfo\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { userInfo } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"info\" email={this.props.email} userName={userInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                userInfo={this.state.userInfo}\n                updateUser={this.updateUser}\n                disable2FA={this.disable2FA}\n                toggleForce2fa={this.toggleForce2fa}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nUser.propTypes = {\n  email: PropTypes.string,\n};\n\nexport default User;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/devices/mobile-devices.js",["3944"],[],"import React, { Component, Fragment } from 'react';\nimport DevicesNav from './devices-nav';\nimport DevicesByPlatform from './devices-by-platform';\nimport MainPanelTopbar from '../main-panel-topbar';\n\nclass MobileDevices extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <DevicesNav currentItem=\"mobile\" />\n            <DevicesByPlatform\n              devicesPlatform={'mobile'}\n            />\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default MobileDevices;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/devices/devices-errors.js",["3945"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport { Link } from '@gatsbyjs/reach-router';\nimport DevicesNav from './devices-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport Paginator from '../../../components/paginator';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPageDeviceErrorsList = () => {\n    this.props.getDeviceErrorsListByPage(this.props.pageInfo.current_page - 1);\n  };\n\n  getNextPageDeviceErrorsList = () => {\n    this.props.getDeviceErrorsListByPage(this.props.pageInfo.current_page + 1);\n  };\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No sync errors')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"16%\">{gettext('User')}</th>\n                <th width=\"20%\">{gettext('Device')}{' / '}{gettext('Version')}</th>\n                <th width=\"16%\">{gettext('IP')}</th>\n                <th width=\"16%\">{gettext('Library')}</th>\n                <th width=\"16%\">{gettext('Error')}</th>\n                <th width=\"16%\">{gettext('Time')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item key={index} item={item} />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPageDeviceErrorsList}\n            gotoNextPage={this.getNextPageDeviceErrorsList}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  getLogsByPage: PropTypes.func,\n  resetPerPage: PropTypes.func,\n  currentPage: PropTypes.number,\n  perPage: PropTypes.number,\n  pageInfo: PropTypes.object,\n  hasNextPage: PropTypes.bool,\n  getDeviceErrorsListByPage: PropTypes.func,\n  curPerPage: PropTypes.number,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  };\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  };\n\n  render() {\n    let item = this.props.item;\n    return (\n      <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n        <td><UserLink email={item.email} name={item.name} /></td>\n        <td>{item.device_name}{' / '}{item.client_version}</td>\n        <td>{item.device_ip}</td>\n        <td><Link to={`${siteRoot}sysadmin/#libs/${item.repo_id}`}>{item.repo_name}</Link></td>\n        <td>{item.error_msg}</td>\n        <td>\n          <span className=\"item-meta-info\" title={moment(item.last_accessed).format('llll')}>{moment(item.error_time).fromNow()}</span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n};\n\nclass DeviceErrors extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      devicesErrors: [],\n      isCleanBtnShown: false,\n      pageInfo: {},\n      perPage: 25\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage = 1, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getDeviceErrorsListByPage(this.state.currentPage);\n    });\n  }\n\n  getDeviceErrorsListByPage = (page) => {\n    let per_page = this.state.perPage;\n    seafileAPI.sysAdminListDeviceErrors(page, per_page).then((res) => {\n      this.setState({\n        loading: false,\n        devicesErrors: res.data.device_errors,\n        pageInfo: res.data.page_info,\n        isCleanBtnShown: res.data.device_errors.length > 0\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  clean = () => {\n    seafileAPI.sysAdminClearDeviceErrors().then((res) => {\n      this.setState({\n        devicesErrors: [],\n        isCleanBtnShown: false\n      });\n      let message = gettext('Successfully cleaned all errors.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getDeviceErrorsListByPage(1);\n    });\n  };\n  render() {\n    return (\n      <Fragment>\n        {this.state.isCleanBtnShown ? (\n          <MainPanelTopbar {...this.props}>\n            <Button className=\"operation-item\" onClick={this.clean}>{gettext('Clean')}</Button>\n          </MainPanelTopbar>\n        ) : (\n          <MainPanelTopbar {...this.props} />\n        )}\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <DevicesNav currentItem=\"errors\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.devicesErrors}\n                getDeviceErrorsListByPage={this.getDeviceErrorsListByPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                pageInfo={this.state.pageInfo}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default DeviceErrors;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/repos/search-repos.js",["3946","3947"],[],"import React, { Component, Fragment } from 'react';\nimport { Form, FormGroup, Input, Label, Col } from 'reactstrap';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport { Utils } from '../../../utils/utils';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Content from './repos';\n\n\nclass SearchRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      currentPage: 1,\n      perPage: 25,\n      isSubmitBtnActive: false,\n      loading: true,\n      errorMsg: '',\n      repos: [],\n      pageInfo: {},\n    };\n  }\n\n  componentDidMount() {\n    let params = (new URL(document.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      name: params.get('name_or_id') || '',\n      perPage: parseInt(params.get('per_page') || perPage),\n      currentPage: parseInt(params.get('page') || currentPage),\n    }, () => {\n      this.getRepos(this.state.currentPage);\n    });\n  }\n\n  getRepos = (page) => {\n    const { name, perPage } = this.state;\n    if (this.getValueLength(name) < 3) {\n      toaster.notify(gettext('Required at least three letters.'));\n      return;\n    }\n    seafileAPI.sysAdminSearchRepos(name, page, perPage).then((res) => {\n      this.setState({\n        loading: false,\n        errorMsg: '',\n        repos: res.data.repo_list,\n        pageInfo: res.data.page_info,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  searchRepos = () => {\n    const { currentPage } = this.state;\n    this.getRepos(currentPage);\n  };\n\n  onDeleteRepo = (targetRepo) => {\n    let repos = this.state.repos.filter(repo => {\n      return repo.id != targetRepo.id;\n    });\n    this.setState({\n      repos: repos\n    });\n  };\n\n  onTransferRepo = (targetRepo) => {\n    let repos = this.state.repos.map((item) => {\n      return item.id == targetRepo.id ? targetRepo : item;\n    });\n    this.setState({\n      repos: repos\n    });\n  };\n\n  handleNameInputChange = (e) => {\n    this.setState({\n      name: e.target.value,\n      currentPage: 1,\n    }, this.checkSubmitBtnActive);\n  };\n\n  checkSubmitBtnActive = () => {\n    const { name } = this.state;\n    this.setState({\n      isSubmitBtnActive: name.trim()\n    });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      const { isSubmitBtnActive } = this.state;\n      if (isSubmitBtnActive) {\n        this.searchRepos();\n      }\n    }\n  };\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage,\n      currentPage: 1,\n    }, () => {\n      this.searchRepos();\n    });\n  };\n\n  getValueLength(str) {\n    let code, len = 0;\n    for (let i = 0, length = str.length; i < length; i++) {\n      code = str.charCodeAt(i);\n      if (code === 10) { //solve enter problem\n        len += 2;\n      } else if (code < 0x007f) {\n        len += 1;\n      } else if (code >= 0x0080 && code <= 0x07ff) {\n        len += 2;\n      } else if (code >= 0x0800 && code <= 0xffff) {\n        len += 3;\n      }\n    }\n    return len;\n  }\n\n  render() {\n    const { name, isSubmitBtnActive } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Libraries')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Search Libraries')}</h4>\n                <p className=\"text-secondary small\">{gettext('Tip: you can search by keyword in name or ID.')}</p>\n                <Form tag={'div'}>\n                  <FormGroup row>\n                    <Label for=\"name\" sm={1}>{gettext('Name or ID')}</Label>\n                    <Col sm={5}>\n                      <Input type=\"text\" name=\"name\" id=\"name\" value={name} onChange={this.handleNameInputChange} onKeyDown={this.handleKeyDown} />\n                    </Col>\n                  </FormGroup>\n                  <FormGroup row>\n                    <Col sm={{size: 5, offset: 1}}>\n                      <button className=\"btn btn-outline-primary\" disabled={!isSubmitBtnActive} onClick={this.searchRepos}>{gettext('Submit')}</button>\n                    </Col>\n                  </FormGroup>\n                </Form>\n              </div>\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Result')}</h4>\n                <Content\n                  loading={this.state.loading}\n                  errorMsg={this.state.errorMsg}\n                  items={this.state.repos}\n                  pageInfo={this.state.pageInfo}\n                  curPerPage={this.state.perPage}\n                  getListByPage={this.getRepos}\n                  resetPerPage={this.resetPerPage}\n                  onDeleteRepo={this.onDeleteRepo}\n                  onTransferRepo={this.onTransferRepo}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SearchRepos;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/groups/search-groups.js",["3948","3949"],[],"import React, { Component, Fragment } from 'react';\nimport { Form, FormGroup, Input, Label, Col } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Content from './groups-content';\n\nclass SearchGroups extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      isSubmitBtnActive: false,\n      loading: true,\n      errorMsg: '',\n      groupList: [],\n      pageInfo: null\n    };\n  }\n\n  componentDidMount () {\n    let params = (new URL(document.location)).searchParams;\n    this.setState({\n      name: params.get('name') || ''\n    }, this.getGroups);\n  }\n\n  getGroups = () => {\n    const { name } = this.state;\n    seafileAPI.sysAdminSearchGroups(name).then((res) => {\n      this.setState({\n        loading: false,\n        groupList: res.data.group_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  deleteGroup = (groupID) => {\n    seafileAPI.sysAdminDismissGroupByID(groupID).then(res => {\n      let newGroupList = this.state.groupList.filter(item => {\n        return item.id != groupID;\n      });\n      this.setState({\n        groupList: newGroupList\n      });\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  transferGroup = (groupID, receiverEmail) => {\n    seafileAPI.sysAdminTransferGroup(receiverEmail, groupID).then(res => {\n      let newGroupList = this.state.groupList.map(item => {\n        if (item.id == groupID) {\n          item = res.data;\n        }\n        return item;\n      });\n      this.setState({\n        groupList: newGroupList\n      });\n      toaster.success(gettext('Successfully transferred the group.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  handleNameInputChange = (e) => {\n    this.setState({\n      name: e.target.value\n    }, this.checkSubmitBtnActive);\n  };\n\n  checkSubmitBtnActive = () => {\n    const { name } = this.state;\n    this.setState({\n      isSubmitBtnActive: name.trim()\n    });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      const { isSubmitBtnActive } = this.state;\n      if (isSubmitBtnActive) {\n        this.getGroups();\n      }\n    }\n  };\n\n  render() {\n    const { name, isSubmitBtnActive } = this.state;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Groups')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Search Groups')}</h4>\n                <p className=\"text-secondary small\">{gettext('Tip: you can search by keyword in name.')}</p>\n                <Form tag={'div'}>\n                  <FormGroup row>\n                    <Label for=\"name\" sm={1}>{gettext('Name')}</Label>\n                    <Col sm={5}>\n                      <Input type=\"text\" name=\"name\" id=\"name\" value={name} onChange={this.handleNameInputChange} onKeyDown={this.handleKeyDown} />\n                    </Col>\n                  </FormGroup>\n                  <FormGroup row>\n                    <Col sm={{size: 5, offset: 1}}>\n                      <button className=\"btn btn-outline-primary\" disabled={!isSubmitBtnActive} onClick={this.getGroups}>{gettext('Submit')}</button>\n                    </Col>\n                  </FormGroup>\n                </Form>\n              </div>\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Result')}</h4>\n                <Content\n                  loading={this.state.loading}\n                  errorMsg={this.state.errorMsg}\n                  items={this.state.groupList}\n                  deleteGroup={this.deleteGroup}\n                  transferGroup={this.transferGroup}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SearchGroups;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/repos/trash-repos.js",["3950","3951","3952"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport ModalPortal from '../../../components/modal-portal';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Search from '../search';\nimport UserLink from '../user-link';\nimport ReposNav from './repos-nav';\n\nconst { trashReposExpireDays } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  getPreviousPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page - 1);\n  };\n\n  getNextPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page + 1);\n  };\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No deleted libraries')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <p className=\"mt-4 small text-secondary\">{gettext('Tip: libraries deleted {trashReposExpireDays} days ago will be cleaned automatically.').replace('{trashReposExpireDays}', trashReposExpireDays)}</p>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"5%\">{/*icon*/}</th>\n                <th width=\"43%\">{gettext('Name')}</th>\n                <th width=\"27%\">{gettext('Owner')}</th>\n                <th width=\"20%\">{gettext('Deleted Time')}</th>\n                <th width=\"5%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  repo={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  onDeleteRepo={this.props.onDeleteRepo}\n                  onRestoreRepo={this.props.onRestoreRepo}\n                />);\n              })}\n            </tbody>\n          </table>\n          {pageInfo &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPageList}\n            gotoNextPage={this.getNextPageList}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  deleteItem: PropTypes.func,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onRestoreRepo: PropTypes.func,\n  getListByPage: PropTypes.func.isRequired,\n  resetPerPage: PropTypes.func,\n  pageInfo: PropTypes.object,\n  curPerPage: PropTypes.number,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOpIconShown: false,\n      isDeleteRepoDialogOpen: false,\n      isRestoreRepoDialogOpen: false\n    };\n  }\n\n  handleMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  };\n\n  handleMouseOut = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  onDeleteRepo = () => {\n    const repo = this.props.repo;\n    seafileAPI.sysAdminDeleteTrashRepo(repo.id).then((res) => {\n      this.props.onDeleteRepo(repo);\n      const msg = gettext('Successfully deleted {name}.').replace('{name}', repo.name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onRestoreRepo = () => {\n    const repo = this.props.repo;\n    seafileAPI.sysAdminRestoreTrashRepo(repo.id).then((res) => {\n      this.props.onRestoreRepo(repo);\n      let message = gettext('Successfully restored the library.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  toggleDeleteRepoDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteRepoDialogOpen: !this.state.isDeleteRepoDialogOpen});\n  };\n\n  toggleRestoreRepoDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isRestoreRepoDialogOpen: !this.state.isRestoreRepoDialogOpen});\n  };\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Restore':\n        translateResult = gettext('Restore');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  };\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Restore':\n        this.toggleRestoreRepoDialog();\n        break;\n      case 'Delete':\n        this.toggleDeleteRepoDialog();\n        break;\n      default:\n        break;\n    }\n  };\n\n  render () {\n    const { repo } = this.props;\n    const { isOpIconShown, isDeleteRepoDialogOpen, isRestoreRepoDialogOpen } = this.state;\n    const iconUrl = Utils.getLibIconUrl(repo);\n    const iconTitle = Utils.getLibIconTitle(repo);\n    const repoName = '<span class=\"op-target\">' + Utils.HTMLescape(repo.name) + '</span>';\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{repo.name}</td>\n          <td>\n            {repo.owner.indexOf('@seafile_group') == -1 ?\n              <UserLink email={repo.owner} name={repo.owner_name} /> :\n              repo.group_name}\n          </td>\n          <td>{moment(repo.delete_time).fromNow()}</td>\n          <td>\n            {isOpIconShown && (\n              <OpMenu\n                operations={['Restore', 'Delete']}\n                translateOperations={this.translateOperations}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            )}\n          </td>\n        </tr>\n        {isDeleteRepoDialogOpen &&\n          <ModalPortal>\n            <CommonOperationConfirmationDialog\n              title={gettext('Delete Library')}\n              message={gettext('Are you sure you want to delete {placeholder} completely?').replace('{placeholder}', repoName)}\n              executeOperation={this.onDeleteRepo}\n              confirmBtnText={gettext('Delete')}\n              toggleDialog={this.toggleDeleteRepoDialog}\n            />\n          </ModalPortal>\n        }\n        {isRestoreRepoDialogOpen &&\n          <ModalPortal>\n            <CommonOperationConfirmationDialog\n              title={gettext('Restore Library')}\n              message={gettext('Are you sure you want to restore {placeholder}?').replace('{placeholder}', repoName)}\n              executeOperation={this.onRestoreRepo}\n              confirmBtnText={gettext('Restore')}\n              toggleDialog={this.toggleRestoreRepoDialog}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onRestoreRepo: PropTypes.func,\n};\n\nclass TrashRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      repos: [],\n      pageInfo: {},\n      perPage: 25,\n      isCleanTrashDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage = 1, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getReposByPage(this.state.currentPage);\n    });\n  }\n\n  toggleCleanTrashDialog = () => {\n    this.setState({isCleanTrashDialogOpen: !this.state.isCleanTrashDialogOpen});\n  };\n\n  getReposByPage = (page) => {\n    let perPage = this.state.perPage;\n    seafileAPI.sysAdminListTrashRepos(page, perPage).then((res) => {\n      this.setState({\n        repos: res.data.repos,\n        pageInfo: res.data.page_info,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getReposByPage(1);\n    });\n  };\n\n  onDeleteRepo = (targetRepo) => {\n    let repos = this.state.repos.filter(repo => {\n      return repo.id != targetRepo.id;\n    });\n    this.setState({\n      repos: repos\n    });\n  };\n\n  onRestoreRepo = (targetRepo) => {\n    let repos = this.state.repos.filter(repo => {\n      return repo.id != targetRepo.id;\n    });\n    this.setState({\n      repos: repos\n    });\n  };\n\n  cleanTrash = () => {\n    seafileAPI.sysAdminCleanTrashRepos().then(res => {\n      this.setState({repos: []});\n      toaster.success(gettext('Successfully cleared trash.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  getSearch = () => {\n    return <Search\n      placeholder={gettext('Search libraries by owner')}\n      submit={this.searchRepos}\n    />;\n  };\n\n  searchRepos = (owner) => {\n    seafileAPI.sysAdminSearchTrashRepos(owner).then((res) => {\n      this.setState({\n        repos: res.data.repos,\n        pageInfo: null,\n        errorMsg: '', // necessary!\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  render() {\n    const { isCleanTrashDialogOpen } = this.state;\n\n    // enable 'search': <MainPanelTopbar search={this.getSearch()}>\n    return (\n      <Fragment>\n        {this.state.repos.length ? (\n          <MainPanelTopbar {...this.props}>\n            <Button className=\"operation-item\" onClick={this.toggleCleanTrashDialog}>{gettext('Clean')}</Button>\n          </MainPanelTopbar>\n        ) : <MainPanelTopbar {...this.props} />\n        }\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <ReposNav currentItem=\"trash\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repos}\n                pageInfo={this.state.pageInfo}\n                onDeleteRepo={this.onDeleteRepo}\n                onRestoreRepo={this.onRestoreRepo}\n                getListByPage={this.getReposByPage}\n                resetPerPage={this.resetPerPage}\n                curPerPage={this.state.perPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isCleanTrashDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Clear Trash')}\n            message={gettext('Are you sure you want to clear trash?')}\n            executeOperation={this.cleanTrash}\n            confirmBtnText={gettext('Clear')}\n            toggleDialog={this.toggleCleanTrashDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default TrashRepos;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/users/user-groups.js",["3953","3954"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './user-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No groups')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"35%\">{gettext('Name')}</th>\n                <th width=\"30%\">{gettext('Role')}</th>\n                <th width=\"35%\">{gettext('Created At')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  deleteItem: PropTypes.func,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  };\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  getRoleText = () => {\n    let roleText;\n    const { item } = this.props;\n    switch(item.role) {\n      case 'Owner':\n        roleText = gettext('Owner');\n        break;\n      case 'Admin':\n        roleText = gettext('Admin');\n        break;\n      case 'Member':\n        roleText = gettext('Member');\n        break;\n    }\n    return roleText;\n  };\n\n  render() {\n    const { item } = this.props;\n    const url = item.parent_group_id == 0 ?\n      `${siteRoot}sys/groups/${item.id}/libraries/` :\n      `${siteRoot}sys/departments/${item.id}/`;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><Link to={url}>{item.name}</Link></td>\n          <td>{this.getRoleText()}</td>\n          <td>{moment(item.created_at).format('YYYY-MM-DD HH:mm')}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  deleteItem: PropTypes.func,\n};\n\nclass Groups extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userInfo: {},\n      items: []\n    };\n  }\n\n  componentDidMount () {\n    const email = decodeURIComponent(this.props.email);\n    seafileAPI.sysAdminGetUser(email).then((res) => {\n      this.setState({\n        userInfo: res.data\n      });\n    });\n    seafileAPI.sysAdminListGroupsJoinedByUser(email).then(res => {\n      this.setState({\n        loading: false,\n        items: res.data.group_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"groups\" email={this.props.email} userName={this.state.userInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nGroups.propTypes = {\n  email: PropTypes.string,\n};\n\nexport default Groups;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/repos/dir-view.js",["3955"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport axios from 'axios';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport CreateFolderDialog from '../../../components/dialog/create-folder-dialog';\nimport Dirent from '../../../models/system-admin/dirent';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport DirPathBar from './dir-path-bar';\nimport DirContent from './dir-content';\n\nclass DirView extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      isSystemRepo: false,\n      repoName: '',\n      path: '',\n      direntList: [],\n      isNewFolderDialogOpen: false\n    };\n    this.fileInput = React.createRef();\n  }\n\n  componentDidMount () {\n    this.loadDirentList('/');\n  }\n\n  onPathClick = (path) => {\n    this.loadDirentList(path);\n  };\n\n  toggleNewFolderDialog = () => {\n    this.setState({isNewFolderDialogOpen: !this.state.isNewFolderDialogOpen});\n  };\n\n  createNewFolder = (path) => {\n    let folderName = Utils.getFileName(path);\n    seafileAPI.sysAdminCreateSysRepoFolder(this.props.repoID, this.state.path, folderName).then(res => {\n      let new_dirent = new Dirent(res.data);\n      let direntList = this.state.direntList;\n      direntList.unshift(new_dirent);\n      this.setState({\n        direntList: direntList\n      });\n      this.toggleNewFolderDialog();\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  };\n\n  openFolder = (dirent) => {\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (!dirent.is_file) {\n      this.loadDirentList(direntPath);\n    }\n  };\n\n  loadDirentList = (path) => {\n    const repoID = this.props.repoID;\n    seafileAPI.sysAdminListRepoDirents(repoID, path).then(res => {\n      const { is_system_library: isSystemRepo, repo_name: repoName, dirent_list } = res.data;\n      let direntList = [];\n      dirent_list.forEach(item => {\n        let dirent = new Dirent(item);\n        direntList.push(dirent);\n      });\n      this.setState({\n        loading: false,\n        repoName: repoName,\n        isSystemRepo: isSystemRepo,\n        direntList: direntList,\n        path: path,\n      }, () => {\n        let url = siteRoot + 'sys/libraries/' + repoID + '/' + encodeURIComponent(this.state.repoName) + Utils.encodePath(path);\n        window.history.replaceState({url: url, path: path}, path, url);\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  deleteDirent = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    seafileAPI.sysAdminDeleteRepoDirent(this.props.repoID, path).then(res => {\n      toaster.success(gettext('Successfully deleted 1 item.'));\n      let direntList = this.state.direntList.filter(item => {\n        return item.name != dirent.name;\n      });\n      this.setState({\n        direntList: direntList\n      });\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  };\n\n  downloadDirent = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    seafileAPI.sysAdminGetRepoFileDownloadURL(this.props.repoID, path).then(res => {\n      location.href = res.data.download_url;\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  };\n\n  openFileInput = () => {\n    this.fileInput.current.click();\n  };\n\n  onFileInputChange = () => {\n    if (!this.fileInput.current.files.length) {\n      return;\n    }\n    const file = this.fileInput.current.files[0];\n\n    let { path } = this.state;\n    seafileAPI.sydAdminGetSysRepoItemUploadURL(path).then(res => {\n      let formData = new FormData();\n      formData.append('parent_dir', path);\n      formData.append('file', file);\n      axios.post(res.data.upload_link, formData).then(res => {\n        const fileObj = res.data[0];\n        let newDirent = new Dirent({\n          'is_file': true,\n          'obj_name': fileObj.name,\n          'file_size': Utils.bytesToSize(fileObj.size),\n          'last_update': (new Date()).getTime()\n        });\n        let direntList = this.state.direntList;\n        const dirs = direntList.filter(item => { return !item.is_file; });\n        direntList.splice(dirs.length, 0, newDirent);\n        this.setState({\n          direntList: direntList\n        });\n      });\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  };\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.state.direntList;\n    let isDuplicated = direntList.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  };\n\n  render() {\n    const { loading, errorMsg,\n      repoName, direntList, isSystemRepo, path,\n      isNewFolderDialogOpen } = this.state;\n    const { repoID } = this.props;\n\n    return (\n      <Fragment>\n        {isSystemRepo ?\n          <MainPanelTopbar {...this.props}>\n            <Fragment>\n              <input className=\"d-none\" type=\"file\" onChange={this.onFileInputChange} ref={this.fileInput} />\n              <Button className=\"operation-item\" onClick={this.openFileInput}>{gettext('Upload')}</Button>\n              <Button className=\"operation-item\" onClick={this.toggleNewFolderDialog}>{gettext('New Folder')}</Button>\n            </Fragment>\n          </MainPanelTopbar> : <MainPanelTopbar {...this.props} />\n        }\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path align-items-center\">\n              <DirPathBar\n                isSystemRepo={isSystemRepo}\n                repoID={repoID}\n                repoName={repoName}\n                currentPath={path}\n                onPathClick={this.onPathClick}\n              />\n            </div>\n            <div className=\"cur-view-content\">\n              <DirContent\n                loading={loading}\n                errorMsg={errorMsg}\n                fromSystemRepo={isSystemRepo}\n                direntList={direntList}\n                openFolder={this.openFolder}\n                deleteDirent={this.deleteDirent}\n                downloadDirent={this.downloadDirent}\n              />\n            </div>\n          </div>\n        </div>\n        {isNewFolderDialogOpen &&\n          <CreateFolderDialog\n            parentPath={path}\n            checkDuplicatedName={this.checkDuplicatedName}\n            onAddFolder={this.createNewFolder}\n            addFolderCancel={this.toggleNewFolderDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nDirView.propTypes = {\n  repoID: PropTypes.string,\n};\n\nexport default DirView;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/repos/all-repos.js",["3956","3957"],[],"import React, { Component, Fragment } from 'react';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport SysAdminCreateRepoDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-create-repo-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Search from '../search';\nimport ReposNav from './repos-nav';\nimport Content from './repos';\n\nclass AllRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      repos: [],\n      pageInfo: {},\n      perPage: 25,\n      sortBy: '',\n      isCreateRepoDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage = 1, perPage, sortBy } = this.state;\n    this.setState({\n      sortBy: urlParams.get('order_by') || sortBy,\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getReposByPage(this.state.currentPage);\n    });\n  }\n\n  toggleCreateRepoDialog = () => {\n    this.setState({isCreateRepoDialogOpen: !this.state.isCreateRepoDialogOpen});\n  };\n\n  getReposByPage = (page) => {\n    const { perPage, sortBy } = this.state;\n    seafileAPI.sysAdminListAllRepos(page, perPage, sortBy).then((res) => {\n      this.setState({\n        loading: false,\n        repos: res.data.repos,\n        pageInfo: res.data.page_info\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  sortItems = (sortBy) => {\n    this.setState({\n      currentPage: 1,\n      sortBy: sortBy\n    }, () => {\n      let url = new URL(location.href);\n      let searchParams = new URLSearchParams(url.search);\n      const { currentPage, sortBy } = this.state;\n      searchParams.set('page', currentPage);\n      searchParams.set('order_by', sortBy);\n      url.search = searchParams.toString();\n      navigate(url.toString());\n      this.getReposByPage(currentPage);\n    });\n  };\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getReposByPage(1);\n    });\n  };\n\n  createRepo = (repoName, Owner) => {\n    seafileAPI.sysAdminCreateRepo(repoName, Owner).then(res => {\n      this.state.repos.unshift(res.data);\n      this.setState({\n        repos: this.state.repos\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onDeleteRepo = (targetRepo) => {\n    let repos = this.state.repos.filter(repo => {\n      return repo.id != targetRepo.id;\n    });\n    this.setState({\n      repos: repos\n    });\n  };\n\n  onTransferRepo = (targetRepo) => {\n    let repos = this.state.repos.map((item) => {\n      return item.id == targetRepo.id ? targetRepo : item;\n    });\n    this.setState({\n      repos: repos\n    });\n  };\n\n  getSearch = () => {\n    return <Search\n      placeholder={gettext('Search libraries by name or ID')}\n      submit={this.searchRepos}\n    />;\n  };\n\n  searchRepos = (repoNameOrID) => {\n    if (this.getValueLength(repoNameOrID) < 3) {\n      toaster.notify(gettext('Required at least three letters.'));\n      return;\n    }\n    navigate(`${siteRoot}sys/search-libraries/?name_or_id=${encodeURIComponent(repoNameOrID)}`);\n  };\n\n  getValueLength(str) {\n    let code, len = 0;\n    for (let i = 0, length = str.length; i < length; i++) {\n      code = str.charCodeAt(i);\n      if (code === 10) { //solve enter problem\n        len += 2;\n      } else if (code < 0x007f) {\n        len += 1;\n      } else if (code >= 0x0080 && code <= 0x07ff) {\n        len += 2;\n      } else if (code >= 0x0800 && code <= 0xffff) {\n        len += 3;\n      }\n    }\n    return len;\n  }\n\n  render() {\n    let { isCreateRepoDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar search={this.getSearch()} {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleCreateRepoDialog}>\n            <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n          </Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <ReposNav currentItem=\"all\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repos}\n                sortBy={this.state.sortBy}\n                sortItems={this.sortItems}\n                pageInfo={this.state.pageInfo}\n                curPerPage={this.state.perPage}\n                getListByPage={this.getReposByPage}\n                resetPerPage={this.resetPerPage}\n                onDeleteRepo={this.onDeleteRepo}\n                onTransferRepo={this.onTransferRepo}\n              />\n            </div>\n          </div>\n        </div>\n        {isCreateRepoDialogOpen &&\n        <SysAdminCreateRepoDialog\n          createRepo={this.createRepo}\n          toggleDialog={this.toggleCreateRepoDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default AllRepos;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/users/user-repos.js",["3958","3959","3960","3961"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { isPro, siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport TransferDialog from '../../../components/dialog/transfer-dialog';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './user-nav';\n\nconst { enableSysAdminViewRepo } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"5%\"></th>\n                <th width=\"35%\">{gettext('Name')}</th>\n                <th width=\"30%\">{gettext('Size')}</th>\n                <th width=\"25%\">{gettext('Last Update')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  deleteRepo={this.props.deleteRepo}\n                  transferRepo={this.props.transferRepo}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  items: PropTypes.array.isRequired,\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  deleteRepo: PropTypes.func.isRequired,\n  transferRepo: PropTypes.func.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isDeleteDialogOpen: false,\n      isTransferDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  };\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  toggleDeleteDialog = () => {\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  };\n\n  deleteRepo = () => {\n    this.props.deleteRepo(this.props.item.id);\n  };\n\n  toggleTransferDialog = () => {\n    this.setState({isTransferDialogOpen: !this.state.isTransferDialogOpen});\n  };\n\n  transferRepo = (owner) => {\n    this.props.transferRepo(this.props.item.id, owner.email);\n    this.toggleTransferDialog();\n  };\n\n  renderRepoName = () => {\n    const { item } = this.props;\n    const repo = item;\n    if (repo.name) {\n      if (isPro && enableSysAdminViewRepo && !repo.encrypted) {\n        return <Link to={`${siteRoot}sys/libraries/${repo.id}/`}>{repo.name}</Link>;\n      } else {\n        return repo.name;\n      }\n    } else {\n      return gettext('Broken ({repo_id_placeholder})')\n        .replace('{repo_id_placeholder}', repo.id);\n    }\n  };\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch (item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Transfer':\n        translateResult = gettext('Transfer');\n        break;\n    }\n\n    return translateResult;\n  };\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n      case 'Transfer':\n        this.toggleTransferDialog();\n        break;\n    }\n  };\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen, isTransferDialogOpen } = this.state;\n\n    const iconUrl = Utils.getLibIconUrl(item);\n    const iconTitle = Utils.getLibIconTitle(item);\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    const deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{this.renderRepoName()}</td>\n          <td>{Utils.bytesToSize(item.size)}</td>\n          <td>{moment(item.last_modified).fromNow()}</td>\n          <td>\n            {isOpIconShown &&\n            <OpMenu\n              operations={['Delete', 'Transfer']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Library')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteRepo}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n        {isTransferDialogOpen &&\n        <TransferDialog\n          itemName={item.name}\n          submit={this.transferRepo}\n          canTransferToDept={false}\n          toggleDialog={this.toggleTransferDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  deleteRepo: PropTypes.func.isRequired,\n  transferRepo: PropTypes.func.isRequired,\n};\n\nclass Repos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userInfo: {},\n      repoList: []\n    };\n  }\n\n  componentDidMount () {\n    const email = decodeURIComponent(this.props.email);\n    seafileAPI.sysAdminGetUser(email).then((res) => {\n      this.setState({\n        userInfo: res.data\n      });\n    });\n    seafileAPI.sysAdminListReposByOwner(email).then(res => {\n      this.setState({\n        loading: false,\n        repoList: res.data.repos\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteRepo = (repoID) => {\n    seafileAPI.sysAdminDeleteRepo(repoID).then(res => {\n      let newRepoList = this.state.repoList.filter(item => {\n        return item.id != repoID;\n      });\n      this.setState({repoList: newRepoList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  transferRepo = (repoID, email) => {\n    seafileAPI.sysAdminTransferRepo(repoID, email).then((res) => {\n      let newRepoList = this.state.repoList.filter(item => {\n        return item.id != repoID;\n      });\n      this.setState({repoList: newRepoList});\n      let message = gettext('Successfully transferred the library.');\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"owned-repos\" email={this.props.email} userName={this.state.userInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repoList}\n                deleteRepo={this.deleteRepo}\n                transferRepo={this.transferRepo}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nRepos.propTypes = {\n  email: PropTypes.string,\n};\n\nexport default Repos;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/users/user-shared-repos.js",["3962"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { isPro, siteRoot, gettext } from '../../../utils/constants';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport Nav from './user-nav';\n\nconst { enableSysAdminViewRepo } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"5%\"></th>\n                <th width=\"35%\">{gettext('Name')}</th>\n                <th width=\"20%\">{gettext('Share From')}</th>\n                <th width=\"20%\">{gettext('Size')}</th>\n                <th width=\"20%\">{gettext('Last Update')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass Item extends Component {\n\n  renderRepoName = () => {\n    const { item } = this.props;\n    const repo = item;\n    if (repo.name) {\n      if (isPro && enableSysAdminViewRepo && !repo.encrypted) {\n        return <Link to={`${siteRoot}sys/libraries/${repo.id}/`}>{repo.name}</Link>;\n      } else {\n        return repo.name;\n      }\n    } else {\n      return gettext('Broken ({repo_id_placeholder})')\n        .replace('{repo_id_placeholder}', repo.id);\n    }\n  };\n\n  getOwnerLink = () => {\n    let link;\n    const { item } = this.props;\n    const index = item.owner_email.indexOf('@seafile_group');\n    if (index == -1) {\n      link = <UserLink email={item.owner_email} name={item.owner_name} />;\n    } else {\n      const groupID = item.owner_email.substring(0, index);\n      link = <Link to={`${siteRoot}sys/departments/${groupID}/`}>{item.owner_name}</Link>;\n    }\n    return link;\n  };\n\n  render() {\n    const { item } = this.props;\n    const iconUrl = Utils.getLibIconUrl(item);\n    const iconTitle = Utils.getLibIconTitle(item);\n    return (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{this.renderRepoName()}</td>\n          <td>{this.getOwnerLink()}</td>\n          <td>{Utils.bytesToSize(item.size)}</td>\n          <td>{moment(item.last_modify).fromNow()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n};\n\nclass Repos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userInfo: {},\n      repoList: []\n    };\n  }\n\n  componentDidMount () {\n    const email = decodeURIComponent(this.props.email);\n    seafileAPI.sysAdminGetUser(email).then((res) => {\n      this.setState({\n        userInfo: res.data\n      });\n    });\n    seafileAPI.sysAdminListShareInRepos(email).then(res => {\n      this.setState({\n        loading: false,\n        repoList: res.data.repo_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"shared-repos\" email={this.props.email} userName={this.state.userInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repoList}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nRepos.propTypes = {\n  email: PropTypes.string,\n};\n\nexport default Repos;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/groups/group-repos.js",["3963","3964","3965","3966"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext, isPro } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport GroupNav from './group-nav';\n\nconst { enableSysAdminViewRepo } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"5%\">{/* icon */}</th>\n                <th width=\"30%\">{gettext('Name')}</th>\n                <th width=\"30%\">{gettext('Size')}</th>\n                <th width=\"25%\">{gettext('Shared By')}</th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  unshareRepo={this.props.unshareRepo}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  getDeviceErrorsListByPage: PropTypes.func,\n  resetPerPage: PropTypes.func,\n  curPerPage: PropTypes.number,\n  pageInfo: PropTypes.object,\n  unshareRepo: PropTypes.func.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isUnshareRepoDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  };\n\n  handleMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  };\n\n  toggleUnshareRepoDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isUnshareRepoDialogOpen: !this.state.isUnshareRepoDialogOpen});\n  };\n\n  unshareRepo = () => {\n    const { item } = this.props;\n    this.props.unshareRepo(item.repo_id, item.name);\n    this.toggleUnshareRepoDialog();\n  };\n\n  renderRepoName = () => {\n    const { item } = this.props;\n    const repo = item;\n    repo.id = item.repo_id;\n    if (repo.name) {\n      if (isPro && enableSysAdminViewRepo && !repo.encrypted) {\n        return <a href={`${siteRoot}sys/libraries/${repo.id}/`}>{repo.name}</a>;\n      } else {\n        return repo.name;\n      }\n    } else {\n      return '--';\n    }\n  };\n\n  render() {\n    let { isOpIconShown, isUnshareRepoDialogOpen } = this.state;\n    let { item } = this.props;\n\n    let iconUrl = Utils.getLibIconUrl(item);\n    let iconTitle = Utils.getLibIconTitle(item);\n\n    let repoName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    let dialogMsg = gettext('Are you sure you want to unshare {placeholder} ?').replace('{placeholder}', repoName);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{this.renderRepoName()}</td>\n          <td>{Utils.bytesToSize(item.size)}</td>\n          <td>\n            <UserLink email={item.shared_by} name={item.shared_by_name} />\n          </td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Unshare')} onClick={this.toggleUnshareRepoDialog}></a>\n          </td>\n        </tr>\n        {isUnshareRepoDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Unshare Library')}\n            message={dialogMsg}\n            executeOperation={this.unshareRepo}\n            confirmBtnText={gettext('Unshare')}\n            toggleDialog={this.toggleUnshareRepoDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  unshareRepo: PropTypes.func.isRequired,\n};\n\nclass GroupRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      groupName: '',\n      repoList: []\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminListGroupRepos(this.props.groupID).then((res) => {\n      this.setState({\n        loading: false,\n        repoList: res.data.libraries,\n        groupName: res.data.group_name\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  unshareRepo = (repoID, repoName) => {\n    seafileAPI.sysAdminUnshareRepoFromGroup(this.props.groupID, repoID).then(res => {\n      let newRepoList = this.state.repoList.filter(item => {\n        return item.repo_id != repoID;\n      });\n      this.setState({\n        repoList: newRepoList\n      });\n      const msg = gettext('Successfully unshared library {placeholder}')\n        .replace('{placeholder}', repoName);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <GroupNav\n              groupID={this.props.groupID}\n              groupName={this.state.groupName}\n              currentItem=\"repos\"\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repoList}\n                unshareRepo={this.unshareRepo}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nGroupRepos.propTypes = {\n  groupID: PropTypes.string,\n};\n\nexport default GroupRepos;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/repos/system-repo.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/groups/groups.js",["3967","3968"],[],"import React, { Component, Fragment } from 'react';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport SysAdminCreateGroupDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-create-group-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Search from '../search';\nimport Content from './groups-content';\n\nclass Groups extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      groupList: [],\n      pageInfo: {},\n      perPage: 25,\n      isCreateGroupDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage = 1, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getGroupListByPage(this.state.currentPage);\n    });\n  }\n\n  toggleCreateGroupDialog = () => {\n    this.setState({isCreateGroupDialogOpen: !this.state.isCreateGroupDialogOpen});\n  };\n\n  getGroupListByPage = (page) => {\n    seafileAPI.sysAdminListAllGroups(page, this.state.perPage).then((res) => {\n      this.setState({\n        loading: false,\n        groupList: res.data.groups,\n        pageInfo: res.data.page_info\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getGroupListByPage(1);\n    });\n  };\n\n  createGroup = (groupName, OnwerEmail) => {\n    seafileAPI.sysAdminCreateNewGroup(groupName, OnwerEmail).then(res => {\n      let newGroupList = this.state.groupList;\n      newGroupList.unshift(res.data);\n      this.setState({\n        groupList: newGroupList\n      });\n      this.toggleCreateGroupDialog();\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  deleteGroup = (groupID) => {\n    seafileAPI.sysAdminDismissGroupByID(groupID).then(res => {\n      let newGroupList = this.state.groupList.filter(item => {\n        return item.id != groupID;\n      });\n      this.setState({\n        groupList: newGroupList\n      });\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  transferGroup = (groupID, receiverEmail) => {\n    seafileAPI.sysAdminTransferGroup(receiverEmail, groupID).then(res => {\n      let newGroupList = this.state.groupList.map(item => {\n        if (item.id == groupID) {\n          item = res.data;\n        }\n        return item;\n      });\n      this.setState({\n        groupList: newGroupList\n      });\n      toaster.success(gettext('Successfully transferred the group.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  getSearch = () => {\n    return <Search\n      placeholder={gettext('Search groups by name')}\n      submit={this.searchGroups}\n    />;\n  };\n\n  searchGroups = (name) => {\n    navigate(`${siteRoot}sys/search-groups/?name=${encodeURIComponent(name)}`);\n  };\n\n  render() {\n    let { isCreateGroupDialogOpen } = this.state;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar search={this.getSearch()} {...this.props}>\n          <Fragment>\n            <Button className=\"operation-item\" onClick={this.toggleCreateGroupDialog}>{gettext('New Group')}</Button>\n            <a className=\"btn btn-secondary operation-item\" href={`${siteRoot}sys/groupadmin/export-excel/`}>{gettext('Export Excel')}</a>\n          </Fragment>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Groups')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.groupList}\n                pageInfo={this.state.pageInfo}\n                deleteGroup={this.deleteGroup}\n                transferGroup={this.transferGroup}\n                getListByPage={this.getGroupListByPage}\n                resetPerPage={this.resetPerPage}\n                curPerPage={this.state.perPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isCreateGroupDialogOpen &&\n          <SysAdminCreateGroupDialog\n            createGroup={this.createGroup}\n            toggleDialog={this.toggleCreateGroupDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Groups;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/groups/group-members.js",["3969","3970","3971","3972","3973","3974","3975","3976"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport SysAdminGroupAddMemberDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-group-add-member-dialog';\nimport RoleSelector from '../../../components/single-selector';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport GroupNav from './group-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({ isItemFreezed: isFreezed });\n  };\n\n  getPreviousPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page - 1);\n  };\n\n  getNextPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page + 1);\n  };\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No members')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"5%\">{/* icon */}</th>\n                <th width=\"55%\">{gettext('Name')}</th>\n                <th width=\"30%\">{gettext('Role')}</th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  toggleItemFreezed={this.toggleItemFreezed}\n                  removeMember={this.props.removeMember}\n                  updateMemberRole={this.props.updateMemberRole}\n                />);\n              })}\n            </tbody>\n          </table>\n          {pageInfo &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPageList}\n            gotoNextPage={this.getNextPageList}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  removeMember: PropTypes.func.isRequired,\n  resetPerPage: PropTypes.func,\n  updateMemberRole: PropTypes.func.isRequired,\n  curPerPage: PropTypes.number,\n  pageInfo: PropTypes.object,\n  getListByPage: PropTypes.func.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.roleOptions = [\n      { value: 'Admin', text: gettext('Admin'), isSelected: false },\n      { value: 'Member', text: gettext('Member'), isSelected: false }\n    ];\n    this.state = {\n      highlighted: false,\n      isDeleteDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({highlighted: true});\n  };\n\n  handleMouseLeave = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({highlighted: false});\n  };\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  };\n\n  removeMember = () => {\n    const { item } = this.props;\n    this.props.removeMember(item.email, item.name);\n    this.toggleDeleteDialog();\n  };\n\n  updateMemberRole = (roleOption) => {\n    this.props.updateMemberRole(this.props.item.email, roleOption.value);\n  };\n\n  render() {\n    let { highlighted, isDeleteDialogOpen } = this.state;\n    let { item } = this.props;\n\n    let itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    let dialogMsg = gettext('Are you sure you want to remove {placeholder} ?').replace('{placeholder}', itemName);\n\n    const { role: curRole } = item;\n    this.roleOptions = this.roleOptions.map(item => {\n      item.isSelected = item.value == curRole;\n      return item;\n    });\n    const currentSelectedOption = this.roleOptions.filter(item => item.isSelected)[0];\n\n    return (\n      <Fragment>\n        <tr className={highlighted ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><img src={item.avatar_url} alt=\"\" className=\"rounded-circle\" width=\"24\" /></td>\n          <td><UserLink email={item.email} name={item.name} /></td>\n          <td>\n            {item.role == 'Owner' ?\n              gettext('Owner') :\n              <RoleSelector\n                isDropdownToggleShown={highlighted}\n                currentSelectedOption={currentSelectedOption}\n                options={this.roleOptions}\n                selectOption={this.updateMemberRole}\n                toggleItemFreezed={this.props.toggleItemFreezed}\n              />\n            }\n          </td>\n          <td>\n            {item.role != 'Owner' &&\n            <a href=\"#\" className={`action-icon sf2-icon-x3 ${highlighted ? '' : 'invisible'}`} title={gettext('Remove')} onClick={this.toggleDeleteDialog}></a>\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Remove Member')}\n            message={dialogMsg}\n            executeOperation={this.removeMember}\n            confirmBtnText={gettext('Remove')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  removeMember: PropTypes.func.isRequired,\n  updateMemberRole: PropTypes.func.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired\n};\n\nclass GroupMembers extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      groupName: '',\n      memberList: [],\n      pageInfo: {},\n      currentPage: 1,\n      perPage: 25,\n      isAddMemberDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      currentPage: parseInt(urlParams.get('page') || currentPage),\n      perPage: parseInt(urlParams.get('per_page') || perPage)\n    }, () => {\n      this.getListByPage(this.state.currentPage);\n    });\n  }\n\n  getListByPage = (page) => {\n    const { perPage } = this.state;\n    seafileAPI.sysAdminListGroupMembers(this.props.groupID, page, perPage).then((res) => {\n      this.setState({\n        loading: false,\n        memberList: res.data.members,\n        groupName: res.data.group_name,\n        pageInfo: res.data.page_info\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getListByPage(1);\n    });\n  };\n\n  toggleAddMemgerDialog = () => {\n    this.setState({isAddMemberDialogOpen: !this.state.isAddMemberDialogOpen});\n  };\n\n  addMembers = (emails) => {\n    seafileAPI.sysAdminAddGroupMember(this.props.groupID, emails).then(res => {\n      let newMemberList = res.data.success;\n      if (newMemberList.length) {\n        this.setState({\n          memberList: newMemberList.concat(this.state.memberList)\n        });\n        newMemberList.forEach(item => {\n          const msg = gettext('Successfully added {email_placeholder}')\n            .replace('{email_placeholder}', item.email);\n          toaster.success(msg);\n        });\n      }\n      res.data.failed.forEach(item => {\n        const msg = gettext('Failed to add {email_placeholder}: {error_msg_placeholder}')\n          .replace('{email_placeholder}', item.email)\n          .replace('{error_msg_placeholder}', item.error_msg);\n        toaster.danger(msg, {duration: 3});\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  removeMember = (email, name) => {\n    seafileAPI.sysAdminDeleteGroupMember(this.props.groupID, email).then(res => {\n      let newRepoList = this.state.memberList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({\n        memberList: newRepoList\n      });\n      toaster.success(gettext('Successfully removed {placeholder}.').replace('{placeholder}', name));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  updateMemberRole = (email, role) => {\n    let isAdmin = role == 'Admin';\n    seafileAPI.sysAdminUpdateGroupMemberRole(this.props.groupID, email, isAdmin).then(res => {\n      let newRepoList = this.state.memberList.map(item => {\n        if (item.email == email) {\n          item.role = role;\n        }\n        return item;\n      });\n      this.setState({\n        memberList: newRepoList\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    let { isAddMemberDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddMemgerDialog}>{gettext('Add Member')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <GroupNav\n              currentItem=\"members\"\n              groupID={this.props.groupID}\n              groupName={this.state.groupName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.memberList}\n                removeMember={this.removeMember}\n                updateMemberRole={this.updateMemberRole}\n                pageInfo={this.state.pageInfo}\n                curPerPage={this.state.perPage}\n                getListByPage={this.getListByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddMemberDialogOpen &&\n          <SysAdminGroupAddMemberDialog\n            addMembers={this.addMembers}\n            toggle={this.toggleAddMemgerDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nGroupMembers.propTypes = {\n  groupID: PropTypes.string,\n};\n\nexport default GroupMembers;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/departments/departments.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/departments/department-list.js",["3977","3978","3979"],[],"import React, { Fragment } from 'react';\nimport moment from 'moment';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport ModalPortal from '../../../components/modal-portal';\nimport AddDepartDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-department-dialog';\nimport { gettext, lang } from '../../../utils/constants';\nimport GroupItem from './group-item';\nimport '../../../css/org-department-item.css';\n\nmoment.locale(lang);\n\nclass DepartmentList extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groups: null,\n      groupID: '',\n      isShowAddDepartDialog: false,\n      isItemFreezed: false\n    };\n  }\n\n  componentDidMount() {\n    this.listDepartments();\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  listDepartments = () => {\n    seafileAPI.sysAdminListAllDepartments().then(res => {\n      this.setState({ groups: res.data.data });\n    });\n  };\n\n  toggleAddDepartDialog = () => {\n    this.setState({ isShowAddDepartDialog: !this.state.isShowAddDepartDialog });\n  };\n\n  onDepartmentNameChanged = (dept) => {\n    this.setState({\n      groups: this.state.groups.map(item => {\n        if (item.id == dept.id) {\n          item.name = dept.name;\n        }\n        return item;\n      })\n    });\n  };\n\n  onAddNewDepartment = (newDepartment) => {\n    const { groups } = this.state;\n    groups.unshift(newDepartment);\n    this.setState({\n      groups: groups\n    });\n  };\n\n  onDeleteDepartment = (id) => {\n    const { groups } = this.state;\n    this.setState({\n      groups: groups.filter((item) => item.id != id)\n    });\n  };\n\n  onSetDepartmentQuota = (target) => {\n    const { groups } = this.state;\n    this.setState({\n      groups: groups.map((item) => {\n        if (item.id == target.id) {\n          item.quota = target.quota;\n        }\n        return item;\n      })\n    });\n  };\n\n  render() {\n    const groups = this.state.groups;\n    const topbarChildren = (\n      <Fragment>\n        <button className='btn btn-secondary operation-item' title={gettext('New Department')} onClick={this.toggleAddDepartDialog}>{gettext('New Department')}\n        </button>\n        {this.state.isShowAddDepartDialog && (\n          <ModalPortal>\n            <AddDepartDialog\n              onAddNewDepartment={this.onAddNewDepartment}\n              groupID={this.state.groupID}\n              toggle={this.toggleAddDepartDialog}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          {topbarChildren}\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row h-100\">\n          <div className=\"cur-view-container o-auto\">\n            <div className=\"cur-view-path\">\n              <div className=\"fleft\">\n                <h3 className=\"sf-heading\">{gettext('Departments')}</h3>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {groups && groups.length > 0 ?\n                <table>\n                  <thead>\n                    <tr>\n                      <th width=\"40%\">{gettext('Name')}</th>\n                      <th width=\"25%\">{gettext('Created At')}</th>\n                      <th width=\"20%\">{gettext('Quota')}</th>\n                      <th width=\"15%\"></th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {groups.map((group, index) => {\n                      return(\n                        <Fragment key={group.id}>\n                          <GroupItem\n                            group={group}\n                            isItemFreezed={this.state.isItemFreezed}\n                            onFreezedItem={this.onFreezedItem}\n                            onUnfreezedItem={this.onUnfreezedItem}\n                            onDepartmentNameChanged={this.onDepartmentNameChanged}\n                            onDeleteDepartment={this.onDeleteDepartment}\n                            onSetDepartmentQuota={this.onSetDepartmentQuota}\n                          />\n                        </Fragment>\n                      );\n                    })}\n                  </tbody>\n                </table>\n                :\n                <p className=\"no-group\">{gettext('No departments')}</p>\n              }\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default DepartmentList;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/departments/department-members.js",["3980"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport Paginator from '../../../components/paginator';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport ModalPortal from '../../../components/modal-portal';\nimport DeleteMemberDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-delete-member-dialog';\nimport { gettext, lang } from '../../../utils/constants';\nimport MemberItem from './member-item';\nimport Department from './department';\nimport '../../../css/org-department-item.css';\n\nmoment.locale(lang);\n\nconst DepartmentMembersPropTypes = {\n  groupID: PropTypes.string,\n};\n\nclass DepartmentMembers extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      members: [],\n      membersErrorMsg: '',\n      currentPageInfo: {\n      },\n      currentPage: 1,\n      perPage: 25,\n      deletedMember: {},\n      showDeleteMemberDialog: false\n    };\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      const { groupID } = this.props;\n      this.listMembers(groupID, this.state.currentPage, this.state.perPage);\n    });\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (this.props.groupID !== nextProps.groupID) {\n      this.listMembers(nextProps.groupID, this.state.currentPage, this.state.perPage);\n    }\n  }\n\n  listMembers = (groupID, page, perPage) => {\n    seafileAPI.sysAdminListGroupMembers(groupID, page, perPage).then((res) => {\n      this.setState({\n        members: res.data.members,\n        currentPageInfo: res.data.page_info\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      this.setState({membersErrorMsg: errMessage});\n    });\n  };\n\n  getPreviousPageList = () => {\n    this.listMembers(this.props.groupID, this.state.currentPageInfo.current_page - 1, this.state.perPage);\n  };\n\n  getNextPageList = () => {\n    this.listMembers(this.props.groupID, this.state.currentPageInfo.current_page + 1, this.state.perPage);\n  };\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.listMembers(this.props.groupID, 1, perPage);\n    });\n  };\n\n  toggleCancel = () => {\n    this.setState({\n      showDeleteMemberDialog: false,\n    });\n  };\n\n  onMemberChanged = () => {\n    this.listMembers(this.props.groupID, this.state.currentPageInfo.current_page, this.state.perPage);\n  };\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({ isItemFreezed: isFreezed });\n  };\n\n  showDeleteMemberDialog = (member) => {\n    this.setState({ showDeleteMemberDialog: true, deletedMember: member });\n  };\n\n  onAddNewMembers = (newMembers) => {\n    const { members } = this.state;\n    members.unshift(...newMembers);\n    this.setState({ members });\n  };\n\n  render() {\n    const { members, membersErrorMsg } = this.state;\n    const { groupID } = this.props;\n\n    return (\n      <Fragment>\n        <Department\n          groupID={groupID}\n          currentItem=\"members\"\n          onAddNewMembers={this.onAddNewMembers}\n        >\n          <div className=\"cur-view-content\">\n            {membersErrorMsg ? <p className=\"error text-center\">{membersErrorMsg}</p> :\n              members.length == 0 ?\n                <p className=\"no-member\">{gettext('No members')}</p> :\n                <Fragment>\n                  <table>\n                    <thead>\n                      <tr>\n                        <th width=\"5%\"></th>\n                        <th width=\"50%\">{gettext('Name')}</th>\n                        <th width=\"15%\">{gettext('Role')}</th>\n                        <th width=\"30%\"></th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {members.map((member, index) => {\n                        return (\n                          <Fragment key={index}>\n                            <MemberItem\n                              member={member}\n                              showDeleteMemberDialog={this.showDeleteMemberDialog}\n                              isItemFreezed={this.state.isItemFreezed}\n                              onMemberChanged={this.onMemberChanged}\n                              toggleItemFreezed={this.toggleItemFreezed}\n                              groupID={groupID}\n                            />\n                          </Fragment>\n                        );\n                      })}\n                    </tbody>\n                  </table>\n                  {this.state.currentPageInfo &&\n                  <Paginator\n                    gotoPreviousPage={this.getPreviousPageList}\n                    gotoNextPage={this.getNextPageList}\n                    currentPage={this.state.currentPageInfo.current_page}\n                    hasNextPage={this.state.currentPageInfo.has_next_page}\n                    curPerPage={this.state.perPage}\n                    resetPerPage={this.resetPerPage}\n                  />\n                  }\n                </Fragment>\n            }\n          </div>\n        </Department>\n        {this.state.showDeleteMemberDialog && (\n          <ModalPortal>\n            <DeleteMemberDialog\n              toggle={this.toggleCancel}\n              onMemberChanged={this.onMemberChanged}\n              member={this.state.deletedMember}\n              groupID={groupID}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDepartmentMembers.propTypes = DepartmentMembersPropTypes;\n\nexport default DepartmentMembers;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/departments/sub-departments.js",["3981","3982","3983"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\nimport { gettext, lang } from '../../../utils/constants';\nimport GroupItem from './group-item';\nimport Department from './department';\n\nimport '../../../css/org-department-item.css';\n\nmoment.locale(lang);\n\nconst SubDepartmentsPropTypes = {\n  groupID: PropTypes.string\n};\n\nclass SubDepartments extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      groups: []\n    };\n  }\n\n  componentDidMount() {\n    this.listSubDepartments(this.props.groupID);\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (this.props.groupID !== nextProps.groupID) {\n      this.listSubDepartments(nextProps.groupID);\n    }\n  }\n\n  listSubDepartments = (groupID) => {\n    seafileAPI.sysAdminGetDepartmentInfo(groupID, true).then(res => {\n      this.setState({groups: res.data.groups});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onSubDepartmentNameChanged = (dept) => {\n    this.setState({\n      groups: this.state.groups.map(item => {\n        if (item.id == dept.id) {\n          item.name = dept.name;\n        }\n        return item;\n      })\n    });\n  };\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  onAddNewDepartment = (newDepartment) => {\n    const { groups } = this.state;\n    groups.unshift(newDepartment);\n    this.setState({\n      groups: groups\n    });\n  };\n\n  onDeleteDepartment = (id) => {\n    const { groups } = this.state;\n    this.setState({\n      groups: groups.filter(item => item.id != id)\n    });\n  };\n\n  onSetDepartmentQuota = (target) => {\n    const { groups } = this.state;\n    this.setState({\n      groups: groups.map((item) => {\n        if (item.id == target.id) {\n          item.quota = target.quota;\n        }\n        return item;\n      })\n    });\n  };\n\n  render() {\n    const { groups } = this.state;\n    const { groupID } = this.props;\n\n    return (\n      <Department\n        groupID={groupID}\n        currentItem=\"subDepartments\"\n        onAddNewDepartment={this.onAddNewDepartment}\n      >\n        <div className=\"cur-view-content\">\n          {groups && groups.length > 0 ?\n            <table>\n              <thead>\n                <tr>\n                  <th width=\"40%\">{gettext('Name')}</th>\n                  <th width=\"25%\">{gettext('Created At')}</th>\n                  <th width=\"20%\">{gettext('Quota')}</th>\n                  <th width=\"15%\"></th>\n                </tr>\n              </thead>\n              <tbody>\n                {groups.map((group, index) => {\n                  return(\n                    <GroupItem\n                      key={group.id}\n                      isItemFreezed={this.state.isItemFreezed}\n                      onFreezedItem={this.onFreezedItem}\n                      onUnfreezedItem={this.onUnfreezedItem}\n                      onDepartmentNameChanged={this.onSubDepartmentNameChanged}\n                      group={group}\n                      onDeleteDepartment={this.onDeleteDepartment}\n                      onSetDepartmentQuota={this.onSetDepartmentQuota}\n                    />\n                  );\n                })}\n              </tbody>\n            </table>\n            : <p className=\"no-group\">{gettext('No sub-departments')}</p>\n          }\n        </div>\n      </Department>\n    );\n  }\n}\n\nSubDepartments.propTypes = SubDepartmentsPropTypes;\n\nexport default SubDepartments;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/departments/department-libraries.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/links/share-links.js",["3984","3985","3986","3987","3988","3989","3990","3991","3992","3993"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LinksNav from './links-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getShareLinksByPage(this.props.currentPage - 1);\n  };\n\n  getNextPage = () => {\n    this.props.getShareLinksByPage(this.props.currentPage + 1);\n  };\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    this.props.sortItems('ctime');\n  };\n\n  sortByCount = (e) => {\n    e.preventDefault();\n    this.props.sortItems('view_cnt');\n  };\n\n  render() {\n    const {\n      loading, errorMsg, items,\n      perPage, currentPage, hasNextPage,\n      sortBy, sortOrder\n    } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No share links')}</h2>\n        </EmptyTip>\n      );\n\n      const initialSortIcon = <span className=\"fas fa-sort\"></span>;\n      const sortIcon = <span className={`fas ${sortOrder == 'asc' ? 'fa-caret-up' : 'fa-caret-down'}`}></span>;\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"18%\">{gettext('Name')}</th>\n                <th width=\"18%\">{gettext('Token')}</th>\n                <th width=\"18%\">{gettext('Owner')}</th>\n                <th width=\"15%\">\n                  <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Created At')} {sortBy == 'ctime' ? sortIcon : initialSortIcon}</a>\n                </th>\n                <th width=\"10%\">\n                  <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortByCount}>{gettext('Count')} {sortBy == 'view_cnt' ? sortIcon : initialSortIcon}</a>\n                </th>\n                <th width=\"11%\">{gettext('Expiration')}</th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                    deleteShareLink={this.props.deleteShareLink}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  getLogsByPage: PropTypes.func,\n  resetPerPage: PropTypes.func,\n  currentPage: PropTypes.number,\n  perPage: PropTypes.number,\n  pageInfo: PropTypes.object,\n  hasNextPage: PropTypes.bool,\n  getShareLinksByPage: PropTypes.func.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  deleteShareLink: PropTypes.func.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  };\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  };\n\n  deleteShareLink = () => {\n    this.props.deleteShareLink(this.props.item.token);\n  };\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  };\n\n  render() {\n    let { isOpIconShown } = this.state;\n    let { item } = this.props;\n    let deleteIcon = `action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td>{item.obj_name}</td>\n        <td>{item.token}</td>\n        <td><UserLink email={item.creator_email} name={item.creator_name} /></td>\n        <td>{moment(item.ctime).fromNow()}</td>\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          <a href=\"#\" className={deleteIcon} title={gettext('Remove')} onClick={this.deleteShareLink}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  deleteShareLink: PropTypes.func.isRequired,\n};\n\nclass ShareLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      shareLinkList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      sortBy: '',\n      sortOrder: 'asc'\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage, sortBy, sortOrder } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage),\n      sortBy: urlParams.get('order_by') || sortBy,\n      sortOrder: urlParams.get('direction') || sortOrder\n    }, () => {\n      this.getShareLinksByPage(this.state.currentPage);\n    });\n  }\n\n  getShareLinksByPage = (page) => {\n    const { perPage, sortBy, sortOrder } = this.state;\n    seafileAPI.sysAdminListShareLinks(page, perPage, sortBy, sortOrder).then((res) => {\n      this.setState({\n        shareLinkList: res.data.share_link_list,\n        loading: false,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  sortItems = (sortBy) => {\n    this.setState({\n      currentPage: 1,\n      sortBy: sortBy,\n      sortOrder: this.state.sortOrder == 'asc' ? 'desc' : 'asc'\n    }, () => {\n      let url = new URL(location.href);\n      let searchParams = new URLSearchParams(url.search);\n      const { currentPage, sortBy, sortOrder } = this.state;\n      searchParams.set('page', currentPage);\n      searchParams.set('order_by', sortBy);\n      searchParams.set('direction', sortOrder);\n      url.search = searchParams.toString();\n      navigate(url.toString());\n      this.getShareLinksByPage(currentPage);\n    });\n  };\n\n  deleteShareLink = (linkToken) => {\n    seafileAPI.sysAdminDeleteShareLink(linkToken).then(res => {\n      let newShareLinkList = this.state.shareLinkList.filter(item =>\n        item.token != linkToken\n      );\n      this.setState({shareLinkList: newShareLinkList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getShareLinksByPage(this.initPage));\n  };\n\n  render() {\n    let { shareLinkList, currentPage, perPage, hasNextPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LinksNav currentItem=\"shareLinks\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={shareLinkList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getShareLinksByPage={this.getShareLinksByPage}\n                resetPerPage={this.resetPerPage}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortItems={this.sortItems}\n                deleteShareLink={this.deleteShareLink}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default ShareLinks;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/orgs/search-orgs.js",["3994","3995"],[],"import React, { Component, Fragment } from 'react';\nimport { Form, FormGroup, Input, Label, Col } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Content from './orgs-content';\n\n\nclass SearchOrgs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      query: '',\n      isSubmitBtnActive: false,\n      loading: true,\n      errorMsg: '',\n      orgList: []\n    };\n  }\n\n  componentDidMount () {\n    let params = (new URL(document.location)).searchParams;\n    this.setState({\n      query: params.get('query') || ''\n    }, this.getItems);\n  }\n\n  getItems = () => {\n    seafileAPI.sysAdminSearchOrgs(this.state.query.trim()).then(res => {\n      this.setState({\n        loading: false,\n        orgList: res.data.organization_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  updateRole = (orgID, role) => {\n    let orgInfo = {};\n    orgInfo.role = role;\n    seafileAPI.sysAdminUpdateOrg(orgID, orgInfo).then(res => {\n      let newOrgList = this.state.orgList.map(org => {\n        if (org.org_id == orgID) {\n          org.role = role;\n        }\n        return org;\n      });\n      this.setState({orgList: newOrgList});\n      toaster.success(gettext('Edit succeeded'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  deleteOrg = (orgID) => {\n    seafileAPI.sysAdminDeleteOrg(orgID).then(res => {\n      let orgList = this.state.orgList.filter(org => {\n        return org.org_id != orgID;\n      });\n      this.setState({orgList: orgList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  handleInputChange = (e) => {\n    this.setState({\n      query: e.target.value\n    }, this.checkSubmitBtnActive);\n  };\n\n  checkSubmitBtnActive = () => {\n    const { query } = this.state;\n    this.setState({\n      isSubmitBtnActive: query.trim()\n    });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      const { isSubmitBtnActive } = this.state;\n      if (isSubmitBtnActive) {\n        this.getItems();\n      }\n    }\n  };\n\n  render() {\n    const { query, isSubmitBtnActive } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Organizations')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Search Organizations')}</h4>\n                <p className=\"text-secondary small\">{gettext('Tip: you can search by keyword in name.')}</p>\n                <Form tag={'div'}>\n                  <FormGroup row>\n                    <Label for=\"name\" sm={1}>{gettext('Name')}</Label>\n                    <Col sm={5}>\n                      <Input type=\"text\" name=\"query\" id=\"name\" value={query} onChange={this.handleInputChange} onKeyDown={this.handleKeyDown} />\n                    </Col>\n                  </FormGroup>\n                  <FormGroup row>\n                    <Col sm={{size: 5, offset: 1}}>\n                      <button className=\"btn btn-outline-primary\" disabled={!isSubmitBtnActive} onClick={this.getItems}>{gettext('Submit')}</button>\n                    </Col>\n                  </FormGroup>\n                </Form>\n              </div>\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Result')}</h4>\n                <Content\n                  loading={this.state.loading}\n                  errorMsg={this.state.errorMsg}\n                  items={this.state.orgList}\n                  updateRole={this.updateRole}\n                  deleteOrg={this.deleteOrg}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SearchOrgs;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/links/upload-links.js",["3996","3997","3998","3999"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LinksNav from './links-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getUploadLinksByPage(this.props.currentPage - 1);\n  };\n\n  getNextPage = () => {\n    this.props.getUploadLinksByPage(this.props.currentPage + 1);\n  };\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No upload links')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"18%\">{gettext('Name')}</th>\n                <th width=\"18%\">{gettext('Token')}</th>\n                <th width=\"18%\">{gettext('Owner')}</th>\n                <th width=\"15%\">{gettext('Created At')}</th>\n                <th width=\"10%\">{gettext('Count')}</th>\n                <th width=\"11%\">{gettext('Expiration')}</th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                    deleteUploadLink={this.props.deleteUploadLink}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  getLogsByPage: PropTypes.func,\n  resetPerPage: PropTypes.func,\n  currentPage: PropTypes.number,\n  perPage: PropTypes.number,\n  pageInfo: PropTypes.object,\n  hasNextPage: PropTypes.bool,\n  getUploadLinksByPage: PropTypes.func.isRequired,\n  deleteUploadLink: PropTypes.func.isRequired,\n};\n\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  };\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  };\n\n  deleteUploadLink = () => {\n    this.props.deleteUploadLink(this.props.item.token);\n  };\n\n  renderExpiration = () => {\n    let item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  };\n\n  render() {\n    let { isOpIconShown } = this.state;\n    let { item } = this.props;\n    let deleteIcon = `action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`;\n    return (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          <td>{item.path}</td>\n          <td>{item.token}</td>\n          <td><UserLink email={item.creator_email} name={item.creator_name} /></td>\n          <td>{moment(item.ctime).fromNow()}</td>\n          <td>{item.view_cnt}</td>\n          <td>{this.renderExpiration()}</td>\n          <td>\n            <a href=\"#\" className={deleteIcon} title={gettext('Remove')} onClick={this.deleteUploadLink}></a>\n          </td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  deleteUploadLink: PropTypes.func.isRequired,\n};\n\n\nclass UploadLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      uploadLinkList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getUploadLinksByPage(this.state.currentPage);\n    });\n  }\n\n  getUploadLinksByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListAllUploadLinks(page, perPage).then((res) => {\n      this.setState({\n        uploadLinkList: res.data.upload_link_list,\n        loading: false,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  deleteUploadLink = (linkToken) => {\n    seafileAPI.sysAdminDeleteUploadLink(linkToken).then(res => {\n      let newUploadLinkList = this.state.uploadLinkList.filter(item =>\n        item.token != linkToken\n      );\n      this.setState({uploadLinkList: newUploadLinkList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getUploadLinksByPage(this.initPage));\n  };\n\n  render() {\n    let { uploadLinkList, currentPage, perPage, hasNextPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LinksNav currentItem=\"uploadLinks\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={uploadLinkList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getUploadLinksByPage={this.getUploadLinksByPage}\n                resetPerPage={this.resetPerPage}\n                deleteUploadLink={this.deleteUploadLink}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default UploadLinks;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/orgs/orgs.js",["4000","4001"],[],"import React, { Component, Fragment } from 'react';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport SysAdminAddOrgDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-org-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Search from '../search';\nimport Content from './orgs-content';\n\n\nclass Orgs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      orgList: [],\n      currentPage: 1,\n      perPage: 25,\n      hasNextPage: false,\n      isAddOrgDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getItemsByPage(this.state.currentPage);\n    });\n  }\n\n  getItemsByPage = (page) => {\n    const { perPage } = this.state;\n    seafileAPI.sysAdminListOrgs(page, perPage).then((res) => {\n      this.setState({\n        loading: false,\n        orgList: res.data.organizations,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getItemsByPage(1);\n    });\n  };\n\n  toggleAddOrgDialog = () => {\n    this.setState({isAddOrgDialogOpen: !this.state.isAddOrgDialogOpen});\n  };\n\n  updateRole = (orgID, role) => {\n    let orgInfo = {};\n    orgInfo.role = role;\n    seafileAPI.sysAdminUpdateOrg(orgID, orgInfo).then(res => {\n      let newOrgList = this.state.orgList.map(org => {\n        if (org.org_id == orgID) {\n          org.role = role;\n        }\n        return org;\n      });\n      this.setState({orgList: newOrgList});\n      toaster.success(gettext('Edit succeeded'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  addOrg = (data) => {\n    const { orgName, ownerEmail, password } = data;\n    seafileAPI.sysAdminAddOrg(orgName, ownerEmail, password).then(res => {\n      let orgList = this.state.orgList;\n      orgList.unshift(res.data);\n      this.setState({orgList: orgList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  deleteOrg = (orgID) => {\n    seafileAPI.sysAdminDeleteOrg(orgID).then(res => {\n      let orgList = this.state.orgList.filter(org => {\n        return org.org_id != orgID;\n      });\n      this.setState({orgList: orgList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  getSearch = () => {\n    return <Search\n      placeholder={gettext('Search organizations')}\n      submit={this.searchItems}\n    />;\n  };\n\n  searchItems = (keyword) => {\n    navigate(`${siteRoot}sys/search-organizations/?query=${encodeURIComponent(keyword)}`);\n  };\n\n  render() {\n    const { isAddOrgDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar search={this.getSearch()} {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddOrgDialog}>{gettext('Add Organization')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Organizations')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.orgList}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                getListByPage={this.getItemsByPage}\n                updateRole={this.updateRole}\n                deleteOrg={this.deleteOrg}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddOrgDialogOpen &&\n          <SysAdminAddOrgDialog\n            addOrg={this.addOrg}\n            toggleDialog={this.toggleAddOrgDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Orgs;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/orgs/org-info.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/orgs/org-users.js",["4002","4003","4004","4005","4006","4007","4008","4009","4010","4011","4012"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, username } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Selector from '../../../components/single-selector';\nimport SysAdminAddUserDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-user-dialog';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport OrgNav from './org-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({ isItemFreezed: isFreezed });\n  };\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No members')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"15%\">{gettext('Status')}</th>\n                <th width=\"15%\">{gettext('Role')}</th>\n                <th width=\"15%\">{gettext('Space Used')}</th>\n                <th width=\"25%\">{gettext('Created At')}{' / '}{gettext('Last Login')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  toggleItemFreezed={this.toggleItemFreezed}\n                  updateStatus={this.props.updateStatus}\n                  updateMembership={this.props.updateMembership}\n                  deleteUser={this.props.deleteUser}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  updateStatus: PropTypes.func.isRequired,\n  updateMembership: PropTypes.func.isRequired,\n  deleteUser: PropTypes.func.isRequired,\n};\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isDeleteDialogOpen: false,\n      isResetPasswordDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  };\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n      case 'Reset Password':\n        this.toggleResetPasswordDialog();\n        break;\n      default:\n        break;\n    }\n  };\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  };\n\n  toggleResetPasswordDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isResetPasswordDialogOpen: !this.state.isResetPasswordDialogOpen});\n  };\n\n  toggleConfirmInactiveDialog= () => {\n    this.setState({isConfirmInactiveDialogOpen: !this.state.isConfirmInactiveDialogOpen});\n  };\n\n  updateStatus= (statusOption) => {\n    this.props.updateStatus(this.props.item.email, statusOption.value);\n  };\n\n  setUserInactive = () => {\n    this.props.updateStatus(this.props.item.email, 'inactive');\n  };\n\n  updateMembership= (membershipOption) => {\n    this.props.updateMembership(this.props.item.email, membershipOption.value);\n  };\n\n  deleteUser = () => {\n    const { item } = this.props;\n    this.props.deleteUser(item.org_id, item.email);\n  };\n\n  resetPassword = () => {\n    seafileAPI.sysAdminResetUserPassword(this.props.item.email).then(res => {\n      toaster.success(res.data.reset_tip);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n    }\n\n    return translateResult;\n  };\n\n  translateStatus = (status) => {\n    switch (status) {\n      case 'active':\n        return gettext('Active');\n      case 'inactive':\n        return gettext('Inactive');\n    }\n  };\n\n  translateMembership = (membership) => {\n    switch (membership) {\n      case 'Admin':\n        return gettext('Admin');\n      case 'Member':\n        return gettext('Member');\n    }\n  };\n\n  render() {\n    const { item } = this.props;\n    const { highlight, isOpIconShown, isDeleteDialogOpen, isResetPasswordDialogOpen, isConfirmInactiveDialogOpen } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    let deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n    let resetPasswordDialogMsg = gettext('Are you sure you want to reset the password of {placeholder} ?').replace('{placeholder}', itemName);\n    const confirmSetUserInactiveMsg = gettext('Are you sure you want to set {user_placeholder} inactive?').replace('{user_placeholder}', itemName);\n\n    // for 'user status'\n    const curStatus = item.active ? 'active' : 'inactive';\n    this.statusOptions = ['active', 'inactive'].map(item => {\n      return {\n        value: item,\n        text: this.translateStatus(item),\n        isSelected: item == curStatus\n      };\n    });\n    const currentSelectedStatusOption = this.statusOptions.filter(item => item.isSelected)[0];\n\n    // for 'user membership'\n    const curMembership = item.is_org_staff? 'Admin' : 'Member';\n    this.membershipOptions = ['Admin', 'Member'].map(item => {\n      return {\n        value: item,\n        text: this.translateMembership(item),\n        isSelected: item == curMembership\n      };\n    });\n    const currentSelectedMembershipOption = this.membershipOptions.filter(item => item.isSelected)[0];\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><UserLink email={item.email} name={item.name} /></td>\n          <td>\n            <Selector\n              isDropdownToggleShown={highlight}\n              currentSelectedOption={currentSelectedStatusOption}\n              options={this.statusOptions}\n              selectOption={this.updateStatus}\n              toggleItemFreezed={this.props.toggleItemFreezed}\n              operationBeforeSelect={item.active ? this.toggleConfirmInactiveDialog : undefined}\n            />\n          </td>\n          <td>\n            <Selector\n              isDropdownToggleShown={highlight}\n              currentSelectedOption={currentSelectedMembershipOption}\n              options={this.membershipOptions}\n              selectOption={this.updateMembership}\n              toggleItemFreezed={this.props.toggleItemFreezed}\n            />\n          </td>\n          <td>{`${Utils.bytesToSize(item.quota_usage)} / ${item.quota_total > 0 ? Utils.bytesToSize(item.quota_total) : '--'}`}</td>\n          <td>\n            {moment(item.create_time).format('YYYY-MM-DD HH:mm:ss')}{' / '}{item.last_login ? moment(item.last_login).fromNow() : '--'}\n          </td>\n          <td>\n            {(isOpIconShown && item.email != username) &&\n            <OpMenu\n              operations={['Delete', 'Reset Password']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Member')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteUser}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n        {isResetPasswordDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Reset Password')}\n            message={resetPasswordDialogMsg}\n            executeOperation={this.resetPassword}\n            confirmBtnText={gettext('Reset')}\n            toggleDialog={this.toggleResetPasswordDialog}\n          />\n        }\n        {isConfirmInactiveDialogOpen &&\n        <CommonOperationConfirmationDialog\n          title={gettext('Set user inactive')}\n          message={confirmSetUserInactiveMsg}\n          executeOperation={this.setUserInactive}\n          confirmBtnText={gettext('Set')}\n          toggleDialog={this.toggleConfirmInactiveDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n  updateStatus: PropTypes.func.isRequired,\n  updateMembership: PropTypes.func.isRequired,\n  deleteUser: PropTypes.func.isRequired,\n};\n\nclass OrgUsers extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      orgName: '',\n      userList: [],\n      isAddUserDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetOrg(this.props.orgID).then((res) => {\n      this.setState({\n        orgName: res.data.org_name\n      });\n    });\n    seafileAPI.sysAdminListOrgUsers(this.props.orgID).then((res) => {\n      this.setState({\n        loading: false,\n        userList: res.data.users\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleAddUserDialog = () => {\n    this.setState({isAddUserDialogOpen: !this.state.isAddUserDialogOpen});\n  };\n\n  addUser = (newUserInfo) => {\n    const { email, name, password } = newUserInfo;\n    seafileAPI.sysAdminAddOrgUser(this.props.orgID, email, name, password).then(res => {\n      let userList = this.state.userList;\n      userList.unshift(res.data);\n      this.setState({userList: userList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  deleteUser = (orgID, email) => {\n    seafileAPI.sysAdminDeleteOrgUser(orgID, email).then(res => {\n      let newUserList = this.state.userList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({userList: newUserList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  updateStatus = (email, statusValue) => {\n    const isActive = statusValue == 'active';\n    seafileAPI.sysAdminUpdateOrgUser(this.props.orgID, email, 'active', isActive).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item.active = res.data.active;\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  updateMembership = (email, membershipValue) => {\n    const isOrgStaff = membershipValue == 'Admin';\n    seafileAPI.sysAdminUpdateOrgUser(this.props.orgID, email, 'is_org_staff', isOrgStaff).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item.is_org_staff = res.data.is_org_staff;\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { isAddUserDialogOpen, orgName } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddUserDialog}>{gettext('Add Member')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgNav\n              currentItem=\"users\"\n              orgID={this.props.orgID}\n              orgName={orgName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.userList}\n                updateStatus={this.updateStatus}\n                updateMembership={this.updateMembership}\n                deleteUser={this.deleteUser}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddUserDialogOpen &&\n          <SysAdminAddUserDialog\n            addUser={this.addUser}\n            toggleDialog={this.toggleAddUserDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nOrgUsers.propTypes = {\n  orgID: PropTypes.string,\n};\n\nexport default OrgUsers;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/file-scan-records.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/work-weixin-departments.js",["4013"],[],"import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport deepCopy from 'deep-copy';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { siteRoot, isPro } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport MainPanelTopbar from './main-panel-topbar';\nimport { WorkWeixinDepartmentMembersList, WorkWeixinDepartmentsTreePanel } from './work-weixin';\nimport ImportWorkWeixinDepartmentDialog from '../../components/dialog/import-work-weixin-department-dialog';\n\nimport '../../css/work-weixin-departments.css';\n\nclass WorkWeixinDepartments extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTreeLoading: true,\n      isMembersListLoading: true,\n      departmentsTree: [],\n      checkedDepartmentId: 0,\n      membersTempObj: {},\n      membersList: [],\n      newUsersTempObj: {},\n      isCheckedAll: false,\n      canCheckUserIds: [],\n      isImportDepartmentDialogShow: false,\n      importDepartment: null,\n      importDepartmentChildrenCount: 0,\n      importDepartmentMembersCount: 0,\n    };\n  }\n\n  getDepartmentsTree = (list) => {\n    let childIds = [];\n    let parentIds = [];\n    for (let i = 0; i < list.length; i++) {\n      if (childIds.indexOf(list[i].id) === -1) {\n        childIds.push(list[i].id);\n      }\n      if (parentIds.indexOf(list[i].parentid) === -1) {\n        parentIds.push(list[i].parentid);\n      }\n    }\n    let intersection = parentIds.filter((v) => {\n      return childIds.indexOf(v) !== -1;\n    });\n    let rootIds = parentIds.concat(intersection).filter((v) => {\n      return parentIds.indexOf(v) === -1 || intersection.indexOf(v) === -1;\n    });\n    let cloneData = deepCopy(list);\n    return cloneData.filter(father => {\n      let branchArr = cloneData.filter(child => father.id === child.parentid);\n      branchArr.length > 0 ? father.children = branchArr : '';\n      return rootIds.indexOf(father.parentid) !== -1;\n    });\n  };\n\n  getWorkWeixinDepartmentsList = (departmentID) => {\n    seafileAPI.adminListWorkWeixinDepartments(departmentID).then((res) => {\n      if (!departmentID) {\n        let departmentsTree = this.getDepartmentsTree(res.data.department);\n        this.setState({\n          isTreeLoading: false,\n          departmentsTree: departmentsTree,\n        });\n      } else {\n        this.setState({\n          importDepartmentChildrenCount: res.data.department.length,\n          importDepartmentMembersCount: this.state.membersTempObj[departmentID].length,\n        });\n      }\n    }).catch((error) => {\n      this.handleError(error);\n      this.setState({\n        isTreeLoading: false,\n        isMembersListLoading: false,\n      });\n      if (error.response && error.response.status === 403) {\n        window.location = siteRoot + 'sys/useradmin/';\n      }\n    });\n  };\n\n  getWorkWeixinDepartmentMembersList = (department_id) => {\n    this.setState({\n      isMembersListLoading: true,\n    });\n    seafileAPI.adminListWorkWeixinDepartmentMembers(department_id, {fetch_child: true}).then((res) => {\n      let membersTempObj = this.state.membersTempObj;\n      membersTempObj[department_id] = res.data.userlist;\n      let canCheckUserIds = this.getCanCheckUserIds(res.data.userlist);\n      this.setState({\n        membersTempObj: membersTempObj,\n        membersList: res.data.userlist,\n        isMembersListLoading: false,\n        canCheckUserIds: canCheckUserIds,\n      });\n    }).catch((error) => {\n      this.setState({isMembersListLoading: false});\n      this.handleError(error);\n    });\n  };\n\n  getCanCheckUserIds = (membersList) => {\n    let userIds = [];\n    membersList.forEach((member) => {\n      if (!member.email) userIds.push(member.userid);\n    });\n    return userIds;\n  };\n\n  onChangeDepartment = (department_id) => {\n    this.setState({\n      newUsersTempObj: {},\n      isCheckedAll: false,\n      checkedDepartmentId: department_id,\n    });\n    if (!(department_id in this.state.membersTempObj)) {\n      this.getWorkWeixinDepartmentMembersList(department_id);\n    } else {\n      let canCheckUserIds = this.getCanCheckUserIds(this.state.membersTempObj[department_id]);\n      this.setState({\n        membersList: this.state.membersTempObj[department_id],\n        canCheckUserIds: canCheckUserIds,\n      });\n    }\n  };\n\n  onUserChecked = (user) => {\n    if (this.state.canCheckUserIds.indexOf(user.userid) !== -1) {\n      let newUsersTempObj = this.state.newUsersTempObj;\n      if (user.userid in newUsersTempObj) {\n        delete newUsersTempObj[user.userid];\n        if (this.state.isCheckedAll) {\n          this.setState({ isCheckedAll: false });\n        }\n      } else {\n        newUsersTempObj[user.userid] = user;\n        if (Object.keys(newUsersTempObj).length === this.state.canCheckUserIds.length) {\n          this.setState({ isCheckedAll: true });\n        }\n      }\n      this.setState({ newUsersTempObj: newUsersTempObj });\n    }\n  };\n\n  onAllUsersChecked = () => {\n    this.setState({\n      isCheckedAll: !this.state.isCheckedAll,\n    }, () => {\n      if (this.state.isCheckedAll) {\n        let newUsersTempObj = {};\n        let newUsersTempList = this.state.membersList.filter(user => {\n          return this.state.canCheckUserIds.indexOf(user.userid) !== -1;\n        });\n        for (let i = 0; i < newUsersTempList.length; i++) {\n          newUsersTempObj[newUsersTempList[i].userid] = newUsersTempList[i];\n        }\n        this.setState({ newUsersTempObj: newUsersTempObj });\n      } else {\n        this.setState({ newUsersTempObj: {} });\n      }\n    });\n  };\n\n  onSubmit = () => {\n    const { newUsersTempObj } = this.state;\n    if (JSON.stringify(newUsersTempObj) === '{}') return;\n    let userList = [];\n    for (let i in newUsersTempObj) {\n      userList.push(newUsersTempObj[i]);\n    }\n    if (userList.length === 0) {\n      toaster.danger('', {duration: 3});\n      return;\n    }\n    seafileAPI.adminAddWorkWeixinUsersBatch(userList).then((res) => {\n      this.setState({\n        newUsersTempObj: {},\n        isCheckedAll: false,\n      });\n      if (res.data.success) {\n        this.handleSubmitSuccess(res.data.success);\n      }\n      if (res.data.failed) {\n        const fails= res.data.failed;\n        for (let i = 0; i < fails.length; i++) {\n          toaster.danger(fails[i].name + ' ' + fails[i].error_msg, {duration: 3});\n        }\n      }\n    }).catch((error) => {\n      this.handleError(error);\n    });\n\n  };\n\n  handleSubmitSuccess = (success) => {\n    let { membersTempObj, membersList, canCheckUserIds } = this.state;\n    for (let i = 0; i < success.length; i++) {\n      let { userid, name, email } = success[i];\n      toaster.success(name + ' ', {duration: 1});\n      // refresh all temp\n      if (canCheckUserIds.indexOf(userid) !== -1) {\n        canCheckUserIds.splice(canCheckUserIds.indexOf(userid), 1);\n      }\n      for (let j = 0; j < membersList.length; j++) {\n        if (membersList[j].userid === userid) {\n          membersList[j].email = email;\n          break;\n        }\n      }\n      for (let departmentId in membersTempObj) {\n        for (let k = 0; k < membersTempObj[departmentId].length; k++) {\n          if (membersTempObj[departmentId][k].userid === userid) {\n            membersTempObj[departmentId][k].email = email;\n            break;\n          }\n        }\n      }\n    }\n    this.setState({\n      membersTempObj: membersTempObj,\n      membersList: membersList,\n      canCheckUserIds: canCheckUserIds,\n    });\n  };\n\n  importDepartmentDialogToggle = (importDepartment) => {\n    this.setState({\n      isImportDepartmentDialogShow: !this.state.isImportDepartmentDialogShow,\n      importDepartment: importDepartment,\n    }, () => {\n      if (importDepartment) {\n        this.getWorkWeixinDepartmentsList(importDepartment.id);\n      }\n    });\n  };\n\n  onImportDepartmentSubmit = () => {\n    let importDepartment = this.state.importDepartment;\n    if (!importDepartment) return;\n    seafileAPI.adminImportWorkWeixinDepartment(importDepartment.id).then((res) => {\n      this.setState({\n        isMembersListLoading: true,\n        checkedDepartmentId: importDepartment.id,\n        membersTempObj: {},\n        membersList: [],\n        newUsersTempObj: {},\n        isCheckedAll: false,\n        canCheckUserIds: [],\n      });\n      this.getWorkWeixinDepartmentMembersList(importDepartment.id);\n      this.importDepartmentDialogToggle(null);\n      if (res.data.success) {\n        this.handleImportDepartmentSubmitSuccess(res.data.success);\n      }\n      if (res.data.failed) {\n        this.handleImportDepartmentSubmitFailed(res.data.failed);\n      }\n    }).catch((error) => {\n      this.handleError(error);\n    });\n  };\n\n  handleImportDepartmentSubmitSuccess = (successes) => {\n    for (let i = 0, len = successes.length; i < len; i++) {\n      let success = successes[i];\n      let successMsg = success.type === 'department' ? ' ' + success.department_name + ' ' : success.api_user_name + ' ' ;\n      toaster.success(successMsg, { duration: 3 });\n    }\n  };\n\n  handleImportDepartmentSubmitFailed = (fails) => {\n    for (let i = 0, len = fails.length; i < len; i++) {\n      let fail = fails[i];\n      let failName = fail.type === 'department' ? fail.department_name : fail.api_user_name;\n      toaster.danger(failName + ' ' + fail.msg, { duration: 3} );\n    }\n  };\n\n  handleError = (error) => {\n    const errorMsg = Utils.getErrorMsg(error);\n    toaster.danger(errorMsg);\n  };\n\n  componentDidMount() {\n    this.getWorkWeixinDepartmentsList(null);\n  }\n\n  render() {\n    const { isImportDepartmentDialogShow, isTreeLoading, importDepartment, importDepartmentChildrenCount, importDepartmentMembersCount } = this.state;\n    let canImportDepartment = !!(isPro && isImportDepartmentDialogShow && !isTreeLoading && importDepartment);\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"operation-item\" onClick={this.onSubmit}>{''}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{''}</h3>\n            </div>\n            <div className=\"cur-view-content d-flex flex-row\">\n              <WorkWeixinDepartmentsTreePanel\n                departmentsTree={this.state.departmentsTree}\n                isTreeLoading={this.state.isTreeLoading}\n                onChangeDepartment={this.onChangeDepartment}\n                checkedDepartmentId={this.state.checkedDepartmentId}\n                importDepartmentDialogToggle={this.importDepartmentDialogToggle}\n              />\n              <div className=\"dir-content-resize\"></div>\n              <WorkWeixinDepartmentMembersList\n                isMembersListLoading={this.state.isMembersListLoading}\n                membersList={this.state.membersList}\n                checkedDepartmentId={this.state.checkedDepartmentId}\n                newUsersTempObj={this.state.newUsersTempObj}\n                onUserChecked={this.onUserChecked}\n                onAllUsersChecked={this.onAllUsersChecked}\n                isCheckedAll={this.state.isCheckedAll}\n                canCheckUserIds={this.state.canCheckUserIds}\n              />\n            </div>\n          </div>\n        </div>\n        {canImportDepartment &&\n          <ImportWorkWeixinDepartmentDialog\n            importDepartmentDialogToggle={this.importDepartmentDialogToggle}\n            onImportDepartmentSubmit={this.onImportDepartmentSubmit}\n            departmentsCount={importDepartmentChildrenCount}\n            membersCount={importDepartmentMembersCount}\n            departmentName={importDepartment.name}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default WorkWeixinDepartments;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/dingtalk-departments.js",["4014"],[],"import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport deepCopy from 'deep-copy';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { siteRoot, isPro } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport MainPanelTopbar from './main-panel-topbar';\nimport toaster from '../../components/toast';\nimport { DingtalkDepartmentMembersList, DingtalkDepartmentsTreePanel } from './dingtalk';\nimport ImportDingtalkDepartmentDialog from '../../components/dialog/import-dingtalk-department-dialog';\n\nimport '../../css/work-weixin-departments.css';\nimport '../../css/dingtalk-departments.css';\n\nclass DingtalkDepartments extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTreeLoading: true,\n      isMembersListLoading: true,\n      departmentsTree: [],\n      checkedDepartmentId: 0,\n      membersTempObj: {},\n      membersList: [],\n      newUsersTempObj: {},\n      isCheckedAll: false,\n      canCheckUserIds: [],\n      isImportDepartmentDialogShow: false,\n      importDepartment: null,\n      importDepartmentChildrenCount: 0,\n      importDepartmentMembersCount: 0,\n    };\n  }\n\n  getDepartmentsTree = (list) => {\n    let childIds = [];\n    let parentIds = [];\n    for (let i = 0; i < list.length; i++) {\n      if (childIds.indexOf(list[i].id) === -1) {\n        childIds.push(list[i].id);\n      }\n      if (parentIds.indexOf(list[i].parentid) === -1) {\n        parentIds.push(list[i].parentid);\n      }\n    }\n    let intersection = parentIds.filter((v) => {\n      return childIds.indexOf(v) !== -1;\n    });\n    let rootIds = parentIds.concat(intersection).filter((v) => {\n      return parentIds.indexOf(v) === -1 || intersection.indexOf(v) === -1;\n    });\n    let cloneData = deepCopy(list);\n    return cloneData.filter(father => {\n      let branchArr = cloneData.filter(child => father.id === child.parentid);\n      branchArr.length > 0 ? father.children = branchArr : '';\n      return rootIds.indexOf(father.parentid) !== -1;\n    });\n  };\n\n  getDingtalkDepartmentsList = (departmentID) => {\n    seafileAPI.adminListDingtalkDepartments(departmentID).then((res) => {\n      if (!departmentID) {\n        let departmentsTree = this.getDepartmentsTree(res.data.department);\n        this.setState({\n          isTreeLoading: false,\n          departmentsTree: departmentsTree,\n        });\n      } else {\n        this.setState({\n          importDepartmentChildrenCount: res.data.department.length,\n          importDepartmentMembersCount: this.state.membersTempObj[departmentID].length,\n        });\n      }\n    }).catch((error) => {\n      this.handleError(error);\n      this.setState({\n        isTreeLoading: false,\n        isMembersListLoading: false,\n      });\n      if (error.response && error.response.status === 403) {\n        window.location = siteRoot + 'sys/useradmin/';\n      }\n    });\n  };\n\n  getDingtalkDepartmentMembersList = (department_id) => {\n    this.setState({\n      isMembersListLoading: true,\n    });\n    seafileAPI.adminListDingtalkDepartmentMembers(department_id).then((res) => {\n      let membersTempObj = this.state.membersTempObj;\n      membersTempObj[department_id] = res.data.userlist;\n      let canCheckUserIds = this.getCanCheckUserIds(res.data.userlist);\n      this.setState({\n        membersTempObj: membersTempObj,\n        membersList: res.data.userlist,\n        isMembersListLoading: false,\n        canCheckUserIds: canCheckUserIds,\n      });\n    }).catch((error) => {\n      this.setState({isMembersListLoading: false});\n      this.handleError(error);\n    });\n  };\n  getCanCheckUserIds = (membersList) => {\n    let userIds = [];\n    membersList.forEach((member) => {\n      if (!member.email) userIds.push(member.userid);\n    });\n    return userIds;\n  };\n\n  onChangeDepartment = (department_id) => {\n    this.setState({\n      newUsersTempObj: {},\n      isCheckedAll: false,\n      checkedDepartmentId: department_id,\n    });\n    if (!(department_id in this.state.membersTempObj)) {\n      this.getDingtalkDepartmentMembersList(department_id);\n    } else {\n      let canCheckUserIds = this.getCanCheckUserIds(this.state.membersTempObj[department_id]);\n      this.setState({\n        membersList: this.state.membersTempObj[department_id],\n        canCheckUserIds: canCheckUserIds,\n      });\n    }\n  };\n\n  onUserChecked = (user) => {\n    if (this.state.canCheckUserIds.indexOf(user.userid) !== -1) {\n      let newUsersTempObj = this.state.newUsersTempObj;\n      if (user.userid in newUsersTempObj) {\n        delete newUsersTempObj[user.userid];\n        if (this.state.isCheckedAll) {\n          this.setState({ isCheckedAll: false });\n        }\n      } else {\n        newUsersTempObj[user.userid] = user;\n        if (Object.keys(newUsersTempObj).length === this.state.canCheckUserIds.length) {\n          this.setState({ isCheckedAll: true });\n        }\n      }\n      this.setState({ newUsersTempObj: newUsersTempObj });\n    }\n  };\n\n  onAllUsersChecked = () => {\n    this.setState({\n      isCheckedAll: !this.state.isCheckedAll,\n    }, () => {\n      if (this.state.isCheckedAll) {\n        let newUsersTempObj = {};\n        let newUsersTempList = this.state.membersList.filter(user => {\n          return this.state.canCheckUserIds.indexOf(user.userid) !== -1;\n        });\n        for (let i = 0; i < newUsersTempList.length; i++) {\n          newUsersTempObj[newUsersTempList[i].userid] = newUsersTempList[i];\n        }\n        this.setState({ newUsersTempObj: newUsersTempObj });\n      } else {\n        this.setState({ newUsersTempObj: {} });\n      }\n    });\n  };\n\n  onSubmit = () => {\n    const { newUsersTempObj } = this.state;\n    if (JSON.stringify(newUsersTempObj) === '{}') return;\n    let userList = [];\n    for (let i in newUsersTempObj) {\n      userList.push(newUsersTempObj[i]);\n    }\n    if (userList.length === 0) {\n      toaster.danger('', {duration: 3});\n      return;\n    }\n    seafileAPI.adminAddDingtalkUsersBatch(userList).then((res) => {\n      this.setState({\n        newUsersTempObj: {},\n        isCheckedAll: false,\n      });\n      if (res.data.success) {\n        this.handleSubmitSuccess(res.data.success);\n      }\n      if (res.data.failed) {\n        const fails= res.data.failed;\n        for (let i = 0; i < fails.length; i++) {\n          toaster.danger(fails[i].name + ' ' + fails[i].error_msg, {duration: 3});\n        }\n      }\n    }).catch((error) => {\n      this.handleError(error);\n    });\n\n  };\n\n  handleSubmitSuccess = (success) => {\n    let { membersTempObj, membersList, canCheckUserIds } = this.state;\n    for (let i = 0; i < success.length; i++) {\n      let { userid, name, email } = success[i];\n      toaster.success(name + ' ', {duration: 1});\n      // refresh all temp\n      if (canCheckUserIds.indexOf(userid) !== -1) {\n        canCheckUserIds.splice(canCheckUserIds.indexOf(userid), 1);\n      }\n      for (let j = 0; j < membersList.length; j++) {\n        if (membersList[j].userid === userid) {\n          membersList[j].email = email;\n          break;\n        }\n      }\n      for (let departmentId in membersTempObj) {\n        for (let k = 0; k < membersTempObj[departmentId].length; k++) {\n          if (membersTempObj[departmentId][k].userid === userid) {\n            membersTempObj[departmentId][k].email = email;\n            break;\n          }\n        }\n      }\n    }\n    this.setState({\n      membersTempObj: membersTempObj,\n      membersList: membersList,\n      canCheckUserIds: canCheckUserIds,\n    });\n  };\n\n  importDepartmentDialogToggle = (importDepartment) => {\n    this.setState({\n      isImportDepartmentDialogShow: !this.state.isImportDepartmentDialogShow,\n      importDepartment: importDepartment,\n    }, () => {\n      if (importDepartment) {\n        this.getDingtalkDepartmentsList(importDepartment.id);\n      }\n    });\n  };\n\n  onImportDepartmentSubmit = () => {\n    let importDepartment = this.state.importDepartment;\n    if (!importDepartment) return;\n    seafileAPI.adminImportDingtalkDepartment(importDepartment.id).then((res) => {\n      this.setState({\n        isMembersListLoading: true,\n        checkedDepartmentId: importDepartment.id,\n        membersTempObj: {},\n        membersList: [],\n        newUsersTempObj: {},\n        isCheckedAll: false,\n        canCheckUserIds: [],\n      });\n      this.getDingtalkDepartmentMembersList(importDepartment.id);\n      this.importDepartmentDialogToggle(null);\n      if (res.data.success) {\n        this.handleImportDepartmentSubmitSuccess(res.data.success);\n      }\n      if (res.data.failed) {\n        this.handleImportDepartmentSubmitFailed(res.data.failed);\n      }\n    }).catch((error) => {\n      this.handleError(error);\n    });\n  };\n\n  handleImportDepartmentSubmitSuccess = (successes) => {\n    for (let i = 0, len = successes.length; i < len; i++) {\n      let success = successes[i];\n      let successMsg = success.type === 'department' ? ' ' + success.department_name + ' ' : success.api_user_name + ' ' ;\n      toaster.success(successMsg, { duration: 3 });\n    }\n  };\n\n  handleImportDepartmentSubmitFailed = (fails) => {\n    for (let i = 0, len = fails.length; i < len; i++) {\n      let fail = fails[i];\n      let failName = fail.type === 'department' ? fail.department_name : fail.api_user_name;\n      toaster.danger(failName + ' ' + fail.msg, { duration: 3} );\n    }\n  };\n\n  handleError = (error) => {\n    const errorMsg = Utils.getErrorMsg(error);\n    toaster.danger(errorMsg);\n  };\n\n  componentDidMount() {\n    this.getDingtalkDepartmentsList(null);\n  }\n\n  render() {\n    const { isImportDepartmentDialogShow, isTreeLoading, importDepartment, importDepartmentChildrenCount, importDepartmentMembersCount } = this.state;\n    let canImportDepartment = !!(isPro && isImportDepartmentDialogShow && !isTreeLoading && importDepartment);\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"operation-item\" onClick={this.onSubmit}>{''}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{''}</h3>\n            </div>\n            <div className=\"cur-view-content d-flex flex-row\">\n              <DingtalkDepartmentsTreePanel\n                departmentsTree={this.state.departmentsTree}\n                isTreeLoading={this.state.isTreeLoading}\n                onChangeDepartment={this.onChangeDepartment}\n                checkedDepartmentId={this.state.checkedDepartmentId}\n                importDepartmentDialogToggle={this.importDepartmentDialogToggle}\n              />\n              <div className=\"dir-content-resize\"></div>\n              <DingtalkDepartmentMembersList\n                isMembersListLoading={this.state.isMembersListLoading}\n                membersList={this.state.membersList}\n                checkedDepartmentId={this.state.checkedDepartmentId}\n                newUsersTempObj={this.state.newUsersTempObj}\n                onUserChecked={this.onUserChecked}\n                onAllUsersChecked={this.onAllUsersChecked}\n                isCheckedAll={this.state.isCheckedAll}\n                canCheckUserIds={this.state.canCheckUserIds}\n              />\n            </div>\n          </div>\n        </div>\n        {canImportDepartment &&\n          <ImportDingtalkDepartmentDialog\n            importDepartmentDialogToggle={this.importDepartmentDialogToggle}\n            onImportDepartmentSubmit={this.onImportDepartmentSubmit}\n            departmentsCount={importDepartmentChildrenCount}\n            membersCount={importDepartmentMembersCount}\n            departmentName={importDepartment.name}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default DingtalkDepartments;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/abuse-reports.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/orgs/org-repos.js",["4015","4016","4017","4018"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport OrgNav from './org-nav';\n\nclass Content extends Component {\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"5%\"></th>\n                <th width=\"30%\">{gettext('Name')}</th>\n                <th width=\"35%\">{'ID'}</th>\n                <th width=\"20%\">{gettext('Owner')}</th>\n                <th width=\"10%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  deleteRepo={this.props.deleteRepo}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  deleteRepo: PropTypes.func.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isDeleteDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  };\n\n  handleMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  };\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  };\n\n  deleteRepo = () => {\n    this.props.deleteRepo(this.props.item.repo_id);\n  };\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen } = this.state;\n\n    const iconUrl = Utils.getLibIconUrl(item);\n    const iconTitle = Utils.getLibIconTitle(item);\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.repo_name) + '</span>';\n    const deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{item.repo_name}</td>\n          <td>{item.repo_id}</td>\n          <td>\n            {!item.owner_email ?\n              '--' :\n              item.owner_email.indexOf('@seafile_group') == -1 ?\n                <UserLink email={item.owner_email} name={item.owner_name} /> :\n                item.owner_name\n            }\n          </td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Delete')} onClick={this.toggleDeleteDialog}></a>\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Library')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteRepo}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  deleteRepo: PropTypes.func.isRequired,\n};\n\nclass OrgRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      orgName: '',\n      repoList: []\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetOrg(this.props.orgID).then((res) => {\n      this.setState({\n        orgName: res.data.org_name\n      });\n    });\n    seafileAPI.sysAdminListOrgRepos(this.props.orgID).then((res) => {\n      this.setState({\n        loading: false,\n        repoList: res.data.repo_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteRepo = (repoID) => {\n    seafileAPI.sysAdminDeleteRepo(repoID).then(res => {\n      let newRepoList = this.state.repoList.filter(item => {\n        return item.repo_id != repoID;\n      });\n      this.setState({repoList: newRepoList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgNav\n              currentItem=\"repos\"\n              orgID={this.props.orgID}\n              orgName={this.state.orgName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repoList}\n                deleteRepo={this.deleteRepo}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nOrgRepos.propTypes = {\n  orgID: PropTypes.string,\n};\n\nexport default OrgRepos;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/orgs/org-groups.js",["4019","4020","4021","4022","4023"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport OrgNav from './org-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No groups')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"30%\">{gettext('Name')}</th>\n                <th width=\"30%\">{gettext('Creator')}</th>\n                <th width=\"30%\">{gettext('Created At')}</th>\n                <th width=\"10%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  deleteGroup={this.props.deleteGroup}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  getDeviceErrorsListByPage: PropTypes.func,\n  resetPerPage: PropTypes.func,\n  curPerPage: PropTypes.number,\n  pageInfo: PropTypes.object,\n  deleteGroup: PropTypes.func.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isDeleteDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  };\n\n  handleMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  };\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  };\n\n  deleteGroup = () => {\n    this.toggleDeleteDialog();\n    this.props.deleteGroup(this.props.item.group_id);\n  };\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.group_name) + '</span>';\n    const deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n\n    const groupUrl = item.parent_group_id == 0 ?\n      `${siteRoot}sys/groups/${item.group_id}/libraries/` :\n      `${siteRoot}sys/departments/${item.group_id}/`;\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><a href={groupUrl}>{item.group_name}</a></td>\n          <td><UserLink email={item.creator_email} name={item.creator_name} /></td>\n          <td>{moment(item.created_at).format('YYYY-MM-DD HH:mm:ss')}</td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Delete')} onClick={this.toggleDeleteDialog}></a>\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Group')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteGroup}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  deleteGroup: PropTypes.func.isRequired,\n  transferGroup: PropTypes.func.isRequired,\n};\n\nclass OrgGroups extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      orgName: '',\n      groupList: []\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetOrg(this.props.orgID).then((res) => {\n      this.setState({\n        orgName: res.data.org_name\n      });\n    });\n    seafileAPI.sysAdminListOrgGroups(this.props.orgID).then((res) => {\n      this.setState({\n        loading: false,\n        groupList: res.data.group_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteGroup = (groupID) => {\n    seafileAPI.sysAdminDismissGroupByID(groupID).then(res => {\n      let newGroupList = this.state.groupList.filter(item => {\n        return item.group_id != groupID;\n      });\n      this.setState({groupList: newGroupList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgNav\n              currentItem=\"groups\"\n              orgID={this.props.orgID}\n              orgName={this.state.orgName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.groupList}\n                deleteGroup={this.deleteGroup}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nOrgGroups.propTypes = {\n  orgID: PropTypes.string,\n};\n\n\n\nexport default OrgGroups;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/institutions/institutions.js",["4024","4025","4026","4027"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport SysAdminAddInstitutionDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-institution-dialog';\nimport Paginator from '../../../components/paginator';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getInstitutionsByPage(this.props.currentPage - 1);\n  };\n\n  getNextPage = () => {\n    this.props.getInstitutionsByPage(this.props.currentPage + 1);\n  };\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No institutions')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"75%\">{gettext('Name')}</th>\n                <th width=\"20%\">{gettext('Created At')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  deleteInstitution={this.props.deleteInstitution}\n                />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  getLogsByPage: PropTypes.func,\n  resetPerPage: PropTypes.func,\n  currentPage: PropTypes.number,\n  perPage: PropTypes.number,\n  pageInfo: PropTypes.object,\n  hasNextPage: PropTypes.bool,\n  getInstitutionsByPage: PropTypes.func.isRequired,\n  deleteInstitution: PropTypes.func.isRequired,\n};\n\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isDeleteDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  };\n\n  handleMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  };\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  };\n\n  deleteInstitution = () => {\n    this.props.deleteInstitution(this.props.item.id);\n  };\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen } = this.state;\n\n    const institutionName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    const deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', institutionName);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><Link to={`${siteRoot}sys/institutions/${item.id}/info/`}>{item.name}</Link></td>\n          <td>{moment(item.ctime).fromNow()}</td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Delete')} onClick={this.toggleDeleteDialog}></a>\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Institution')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteInstitution}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  deleteInstitution: PropTypes.func.isRequired,\n};\n\nclass Institutions extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      institutionList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      isAddInstitutionDialogOpen: false,\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getInstitutionsByPage(this.state.currentPage);\n    });\n  }\n\n  getInstitutionsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListInstitutions(page, perPage).then((res) => {\n      this.setState({\n        loading: false,\n        institutionList: res.data.institution_list,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getInstitutionsByPage(this.initPage));\n  };\n\n  toggleAddInstitutionDialog = () => {\n    this.setState({isAddInstitutionDialogOpen: !this.state.isAddInstitutionDialogOpen});\n  };\n\n  addInstitution = (name) => {\n    seafileAPI.sysAdminAddInstitution(name).then(res => {\n      let institutionList = this.state.institutionList;\n      institutionList.push(res.data);\n      this.setState({institutionList: institutionList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  deleteInstitution = (institutionID) => {\n    seafileAPI.sysAdminDeleteInstitution(institutionID).then(res => {\n      let institutionList = this.state.institutionList.filter(inst => {\n        return inst.id != institutionID;\n      });\n      this.setState({institutionList: institutionList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { isAddInstitutionDialogOpen, hasNextPage, currentPage, perPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddInstitutionDialog}>{gettext('Add Institution')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Institutions')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.institutionList}\n                deleteInstitution={this.deleteInstitution}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getInstitutionsByPage={this.getInstitutionsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddInstitutionDialogOpen &&\n          <SysAdminAddInstitutionDialog\n            addInstitution={this.addInstitution}\n            toggle={this.toggleAddInstitutionDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Institutions;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/institutions/institution-users.js",["4028","4029","4030","4031"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport AddMemberDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-institution-member-dialog';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport UserLink from '../user-link';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport InstitutionNav from './institution-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  getPreviousPage = () => {\n    this.props.getInstitutionUsersByPage(this.props.currentPage - 1);\n  };\n\n  getNextPage = () => {\n    this.props.getInstitutionUsersByPage(this.props.currentPage + 1);\n  };\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No members')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"10%\">{gettext('Status')}</th>\n                <th width=\"20%\">{gettext('Space Used')}</th>\n                <th width=\"40%\">{gettext('Created At')}{' / '}{gettext('Last Login')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  setAdmin={this.props.setAdmin}\n                  deleteUser={this.props.deleteUser}\n                />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  getLogsByPage: PropTypes.func,\n  resetPerPage: PropTypes.func,\n  currentPage: PropTypes.number,\n  perPage: PropTypes.number,\n  pageInfo: PropTypes.object,\n  hasNextPage: PropTypes.bool,\n  getInstitutionUsersByPage: PropTypes.func.isRequired,\n  setAdmin: PropTypes.func.isRequired,\n  deleteUser: PropTypes.func.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isSetAdminDialogOpen: false,\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  };\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  toggleSetAdminDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isSetAdminDialogOpen: !this.state.isSetAdminDialogOpen});\n  };\n\n  setAdmin = () => {\n    this.props.setAdmin(this.props.item.email);\n  };\n\n  onMenuItemClick = (operation) => {\n    switch (operation) {\n      case 'Delete':\n        this.props.deleteUser(this.props.item.email);\n        break;\n      case 'Set Admin':\n        this.toggleSetAdminDialog();\n        break;\n    }\n  };\n\n  getOperations = () => {\n    let operations = [];\n    if (!this.props.item.is_institution_admin) {\n      operations.push('Set Admin');\n    }\n    operations.push('Delete');\n    return operations;\n  };\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Set Admin':\n        translateResult = gettext('Set Admin');\n        break;\n    }\n\n    return translateResult;\n  };\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isSetAdminDialogOpen } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    const dialogMsg = gettext('Are you sure you want to set {placeholder} as Admin?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td>\n            <UserLink email={item.email} name={item.name} />\n          </td>\n          <td>\n            {item.is_active ? gettext('Active') : gettext('Inactive')}\n          </td>\n          <td>{`${Utils.bytesToSize(item.quota_usage)} / ${item.quota_total > 0 ? Utils.bytesToSize(item.quota_total) : '--'}`}</td>\n          <td>\n            {moment(item.create_time).format('YYYY-MM-DD HH:mm:ss')}{' / '}{item.last_login ? moment(item.last_login).fromNow() : '--'}\n          </td>\n          <td>\n            {isOpIconShown &&\n              <OpMenu\n                operations={this.getOperations()}\n                translateOperations={this.translateOperations}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            }\n          </td>\n        </tr>\n        {isSetAdminDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Set Admin')}\n            message={dialogMsg}\n            executeOperation={this.setAdmin}\n            toggleDialog={this.toggleSetAdminDialog}\n            confirmBtnText={gettext('Set Admin')}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.string.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  setAdmin: PropTypes.func.isRequired,\n  deleteUser: PropTypes.func.isRequired,\n};\n\nclass InstitutionUsers extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      institutionName: '',\n      userList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      isAddUserDialogOpen: false\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetInstitution(this.props.institutionID).then((res) => {\n      this.setState({\n        institutionName: res.data.name\n      });\n    });\n\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getInstitutionUsersByPage(this.state.currentPage);\n    });\n  }\n\n  getInstitutionUsersByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListInstitutionUsers(this.props.institutionID, page, perPage).then((res) => {\n      this.setState({\n        loading: false,\n        userList: res.data.user_list,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  setAdmin = (email) => {\n    seafileAPI.sysAdminUpdateInstitutionUser(this.props.institutionID, email, true).then(res => {\n      let userList = this.state.userList.map(user => {\n        if (user.email == email) {\n          user.is_institution_admin = true;\n        }\n        return user;\n      });\n      this.setState({userList: userList});\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  toggleAddUserDialog = () => {\n    this.setState({isAddUserDialogOpen: !this.state.isAddUserDialogOpen});\n  };\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getInstitutionUsersByPage(this.initPage));\n  };\n\n  addUser = (emails) => {\n    seafileAPI.sysAdminAddInstitutionUserBatch(this.props.institutionID, emails).then(res => {\n      this.toggleAddUserDialog();\n      let successArray = res.data.success;\n      let failedArray = res.data.failed;\n      if (successArray.length) {\n        let newUserList = this.state.userList.concat(successArray);\n        this.setState({userList: newUserList});\n      }\n      failedArray.forEach((item) => {\n        toaster.danger(item.error_msg);\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  deleteUser = (email) => {\n    seafileAPI.sysAdminDeleteInstitutionUser(this.props.institutionID, email).then(res => {\n      let newUserList = this.state.userList.filter(user => {\n        return user.email != email;\n      });\n      this.setState({userList: newUserList});\n      toaster.success('success');\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { isAddUserDialogOpen, institutionName, hasNextPage, currentPage, perPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddUserDialog}>{gettext('Add Member')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <InstitutionNav\n              currentItem=\"members\"\n              institutionID={this.props.institutionID}\n              institutionName={institutionName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.userList}\n                setAdmin={this.setAdmin}\n                deleteUser={this.deleteUser}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getInstitutionUsersByPage={this.getInstitutionUsersByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddUserDialogOpen &&\n          <AddMemberDialog\n            addUser={this.addUser}\n            toggle={this.toggleAddUserDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nInstitutionUsers.propTypes = {\n  institutionID: PropTypes.string,\n};\n\nexport default InstitutionUsers;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/institutions/institution-admins.js",["4032","4033","4034","4035"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport UserLink from '../user-link';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport InstitutionNav from './institution-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No admins')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"10%\">{gettext('Status')}</th>\n                <th width=\"20%\">{gettext('Space Used')}</th>\n                <th width=\"40%\">{gettext('Created At')}{' / '}{gettext('Last Login')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  revokeAdmin={this.props.revokeAdmin}\n                  deleteUser={this.props.deleteUser}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  getLogsByPage: PropTypes.func,\n  resetPerPage: PropTypes.func,\n  currentPage: PropTypes.number,\n  perPage: PropTypes.number,\n  pageInfo: PropTypes.object,\n  hasNextPage: PropTypes.bool,\n  revokeAdmin: PropTypes.func.isRequired,\n  deleteUser: PropTypes.func.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isRevokeAdminDialogOpen: false,\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  };\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  toggleRevokeAdminDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isRevokeAdminDialogOpen: !this.state.isRevokeAdminDialogOpen});\n  };\n\n  revokeAdmin = () => {\n    this.props.revokeAdmin(this.props.item);\n  };\n\n  onMenuItemClick = (operation) => {\n    switch (operation) {\n      case 'Revoke Admin':\n        this.toggleRevokeAdminDialog();\n        break;\n    }\n  };\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Revoke Admin':\n        translateResult = gettext('Revoke Admin');\n        break;\n    }\n    return translateResult;\n  };\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isRevokeAdminDialogOpen } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    const revokeAdminDialogMsg = gettext('Are you sure you want to revoke the admin permission of {placeholder} ?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td>\n            <UserLink email={item.email} name={item.name} />\n          </td>\n          <td>\n            {item.is_active ? gettext('Active') : gettext('Inactive')}\n          </td>\n          <td>{`${Utils.bytesToSize(item.quota_usage)} / ${item.quota_total > 0 ? Utils.bytesToSize(item.quota_total) : '--'}`}</td>\n          <td>\n            {moment(item.create_time).format('YYYY-MM-DD HH:mm:ss')}{' / '}{item.last_login ? moment(item.last_login).fromNow() : '--'}\n          </td>\n          <td>\n            {isOpIconShown &&\n            <OpMenu\n              operations={['Revoke Admin']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isRevokeAdminDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Revoke Admin')}\n            message={revokeAdminDialogMsg}\n            executeOperation={this.revokeAdmin}\n            confirmBtnText={gettext('Revoke')}\n            toggleDialog={this.toggleRevokeAdminDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  revokeAdmin: PropTypes.func.isRequired,\n  deleteUser: PropTypes.func.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n};\n\nclass InstitutionAdmins extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      institutionName: '',\n      userList: [],\n      isAddUserDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetInstitution(this.props.institutionID).then((res) => {\n      this.setState({\n        institutionName: res.data.name\n      });\n    });\n    seafileAPI.sysAdminListInstitutionAdmins(this.props.institutionID).then((res) => {\n      this.setState({\n        loading: false,\n        userList: res.data.user_list,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  revokeAdmin = (item) => {\n    const email = item.email;\n    const name = item.name;\n    seafileAPI.sysAdminUpdateInstitutionUser(this.props.institutionID, email, false).then(res => {\n      let userList = this.state.userList.filter(user => {\n        return user.email != email;\n      });\n      this.setState({userList: userList});\n      toaster.success(gettext('Successfully revoked the admin permission of {placeholder}.').replace('{placeholder}', name));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  deleteUser = (email) => {\n    seafileAPI.sysAdminDeleteInstitutionUser(this.props.institutionID, email).then(res => {\n      let newUserList = this.state.userList.filter(user => {\n        return user.email != email;\n      });\n      this.setState({userList: newUserList});\n      toaster.success('success');\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { institutionName } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <InstitutionNav\n              currentItem=\"admins\"\n              institutionID={this.props.institutionID}\n              institutionName={institutionName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.userList}\n                revokeAdmin={this.revokeAdmin}\n                deleteUser={this.deleteUser}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nInstitutionAdmins.propTypes = {\n  institutionID: PropTypes.string,\n};\n\nexport default InstitutionAdmins;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/logs-page/login-logs.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/institutions/institution-info.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/logs-page/file-update-logs.js",["4036"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LogsNav from './logs-nav';\nimport { Button } from 'reactstrap';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport ModalPortal from '../../../components/modal-portal';\nimport CommitDetails from '../../../components/dialog/commit-details';\nimport LogsExportExcelDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-logs-export-excel-dialog';\n\nclass Content extends Component {\n\n  getPreviousPage = () => {\n    this.props.getLogsByPage(this.props.currentPage - 1);\n  };\n\n  getNextPage = () => {\n    this.props.getLogsByPage(this.props.currentPage + 1);\n  };\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No file update logs')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"25%\">{gettext('Date')}</th>\n                <th width=\"25%\">{gettext('Library')}</th>\n                <th width=\"25%\">{gettext('Action')}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  getLogsByPage: PropTypes.func,\n  resetPerPage: PropTypes.func,\n  currentPage: PropTypes.number,\n  perPage: PropTypes.number,\n  pageInfo: PropTypes.object,\n  hasNextPage: PropTypes.bool,\n};\n\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isCommitDetailsDialogOpen: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  };\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  };\n\n\n  toggleCommitDetailsDialog = () => {\n    this.setState({\n      isCommitDetailsDialogOpen: !this.state.isCommitDetailsDialogOpen\n    });\n  };\n\n  showCommitDetails = (e) => {\n    e.preventDefault();\n    this.setState({\n      isCommitDetailsDialogOpen: !this.state.isCommitDetailsDialogOpen\n    });\n  };\n\n  render() {\n    let { item } = this.props;\n    return (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          <td><UserLink email={item.email} name={item.name} /></td>\n          <td>{moment(item.time).fromNow()}</td>\n          <td>{item.repo_name ? item.repo_name : gettext('Deleted')}</td>\n          <td>\n            {item.file_operation}\n            {item.repo_name && !item.repo_encrypted &&\n              <a className=\"ml-1\" href=\"#\" onClick={this.showCommitDetails}>{gettext('Details')}</a>\n            }\n          </td>\n        </tr>\n        {this.state.isCommitDetailsDialogOpen &&\n          <ModalPortal>\n            <CommitDetails\n              repoID={item.repo_id}\n              commitID={item.commit_id}\n              commitTime={item.time}\n              toggleDialog={this.toggleCommitDetailsDialog}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n};\n\n\nclass FileUpdateLogs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      logList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      isExportExcelDialogOpen: false,\n    };\n    this.initPage = 1;\n  }\n\n  toggleExportExcelDialog = () => {\n    this.setState({isExportExcelDialogOpen: !this.state.isExportExcelDialogOpen});\n  };\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getLogsByPage(this.state.currentPage);\n    });\n  }\n\n  getLogsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListFileUpdateLogs(page, perPage).then((res) => {\n      this.setState({\n        logList: res.data.file_update_log_list,\n        loading: false,\n        currentPage: page,\n        hasNextPage: res.data.has_next_page,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getLogsByPage(this.initPage));\n  };\n\n  render() {\n    let { logList, currentPage, perPage, hasNextPage, isExportExcelDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleExportExcelDialog}>{gettext('Export Excel')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LogsNav currentItem=\"fileUpdateLogs\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={logList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getLogsByPage={this.getLogsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isExportExcelDialogOpen &&\n        <ModalPortal>\n          <LogsExportExcelDialog\n            logType={'fileUpdate'}\n            toggle={this.toggleExportExcelDialog}\n          />\n        </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default FileUpdateLogs;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/logs-page/share-permission-logs.js",["4037","4038","4039"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport LogsExportExcelDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-logs-export-excel-dialog';\nimport ModalPortal from '../../../components/modal-portal';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport LogsNav from './logs-nav';\n\nclass Content extends Component {\n\n  getPreviousPage = () => {\n    this.props.getLogsByPage(this.props.currentPage - 1);\n  };\n\n  getNextPage = () => {\n    this.props.getLogsByPage(this.props.currentPage + 1);\n  };\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No permission logs')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"15%\">{gettext('Share From')}</th>\n                <th width=\"15%\">{gettext('Share To')}</th>\n                <th width=\"10%\">{gettext('Actions')}</th>\n                <th width=\"13%\">{gettext('Permission')}</th>\n                <th width=\"20%\">{gettext('Library')}</th>\n                <th width=\"12%\">{gettext('Folder')}</th>\n                <th width=\"15%\">{gettext('Date')}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  getLogsByPage: PropTypes.func,\n  resetPerPage: PropTypes.func,\n  currentPage: PropTypes.number,\n  perPage: PropTypes.number,\n  pageInfo: PropTypes.object,\n  hasNextPage: PropTypes.bool,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  };\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  };\n\n  getActionTextByEType = (etype) => {\n    if (etype.indexOf('add') != -1) {\n      return gettext('Add');\n    } else if (etype.indexOf('modify') != -1) {\n      return gettext('Modify');\n    } else if (etype.indexOf('delete') != -1) {\n      return gettext('Delete');\n    } else {\n      return '';\n    }\n  };\n\n  getShareTo = (item) => {\n    switch(item.share_type) {\n      case 'user':\n        return <UserLink email={item.to_user_email} name={item.to_user_name} />;\n      case 'group':\n        return <Link to={`${siteRoot}sys/groups/${item.to_group_id}/libraries/`}>{item.to_group_name}</Link>;\n      case 'department':\n        return <Link to={`${siteRoot}sys/departments/${item.to_group_id}/`}>{item.to_group_name}</Link>;\n      case 'all':\n        return <Link to={`${siteRoot}org/`}>{gettext('All')}</Link>;\n      default:\n        return gettext('Deleted');\n    }\n  };\n\n  render() {\n    let { item } = this.props;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><UserLink email={item.from_user_email} name={item.from_user_name} /></td>\n        <td>{this.getShareTo(item)}</td>\n        <td>{this.getActionTextByEType(item.etype)}</td>\n        <td>{Utils.sharePerms(item.permission)}</td>\n        <td>{item.repo_name ? item.repo_name : gettext('Deleted')}</td>\n        <td>{item.folder}</td>\n        <td>{moment(item.date).fromNow()}</td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n};\n\nclass SharePermissionLogs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      logList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      isExportExcelDialogOpen: false,\n    };\n    this.initPage = 1;\n  }\n\n  toggleExportExcelDialog = () => {\n    this.setState({isExportExcelDialogOpen: !this.state.isExportExcelDialogOpen});\n  };\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getLogsByPage(this.state.currentPage);\n    });\n  }\n\n  getLogsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListSharePermissionLogs(page, perPage).then((res) => {\n      this.setState({\n        logList: res.data.share_permission_log_list,\n        loading: false,\n        currentPage: page,\n        hasNextPage: res.data.has_next_page,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getLogsByPage(this.initPage));\n  };\n\n  render() {\n    let { logList, currentPage, perPage, hasNextPage, isExportExcelDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleExportExcelDialog}>{gettext('Export Excel')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LogsNav currentItem=\"sharePermissionLogs\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={logList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getLogsByPage={this.getLogsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isExportExcelDialogOpen &&\n        <ModalPortal>\n          <LogsExportExcelDialog\n            logType={'sharePermission'}\n            toggle={this.toggleExportExcelDialog}\n          />\n        </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default SharePermissionLogs;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/logs-page/file-access-logs.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/web-settings/web-settings.js",["4040","4041","4042","4043","4044","4045"],[],"import React, { Component, Fragment } from 'react';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, isPro, mediaUrl, logoPath, faviconPath, loginBGPath } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\nimport toaster from '../../../components/toast';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Section from './section';\nimport InputItem from './input-item';\nimport FileItem from './file-item';\nimport CheckboxItem from './checkbox-item';\n\nimport '../../../css/system-admin-web-settings.css';\n\nclass WebSettings extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      config_dict: null,\n      logoPath: mediaUrl + logoPath,\n      faviconPath: mediaUrl + faviconPath,\n      loginBGPath: mediaUrl + loginBGPath\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetSysSettingInfo().then((res) => {\n      this.setState({\n        loading: false,\n        config_dict: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  saveSetting = (key, value) => {\n    seafileAPI.sysAdminSetSysSettingInfo(key, value).then((res) => {\n      this.setState({\n        config_dict: res.data\n      });\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  postFile = (file, fileType) => {\n    let postFile;\n    if (fileType == 'Logo') {\n      postFile = seafileAPI.sysAdminUpdateLogo(file);\n    } else if (fileType == 'Favicon') {\n      postFile = seafileAPI.sysAdminUpdateFavicon(file);\n    } else if (fileType == 'loginBGImage') {\n      postFile = seafileAPI.sysAdminUpdateLoginBG(file);\n    }\n    postFile.then((res) => {\n      if (fileType == 'Logo') {\n        this.setState({\n          logoPath: res.data.logo_path\n        });\n      } else if (fileType == 'Favicon') {\n        this.setState({\n          faviconPath: res.data.favicon_path\n        });\n      } else if (fileType == 'loginBGImage') {\n        this.setState({\n          loginBGPath: res.data.login_bg_image_path\n        });\n      }\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { loading, errorMsg, config_dict, logoPath, faviconPath, loginBGPath } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Settings')}</h3>\n            </div>\n            <div className=\"cur-view-content container mw-100\">\n              {loading && <Loading />}\n              {errorMsg && <p className=\"error text-center mt-4\">{errorMsg}</p>}\n              {(!loading && !errorMsg) && config_dict &&\n              <Fragment>\n                <p className=\"small text-secondary my-4\">{gettext('Note: Settings via web interface are saved in database table (seahub-db/constance_config). They have a higher priority over the settings in config files.')}</p>\n\n                <Section headingText='URL'>\n                  <Fragment>\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName='SERVICE_URL'\n                      keyText='SERVICE_URL'\n                      value={config_dict['SERVICE_URL']}\n                      helpTip={gettext('The URL of the server, like https://seafile.example.com or http://192.168.1.2:8000')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName='FILE_SERVER_ROOT'\n                      keyText='FILE_SERVER_ROOT'\n                      value={config_dict['FILE_SERVER_ROOT']}\n                      helpTip={gettext('The internal URL for downloading/uploading files. Users will not be able to download/upload files if this is not set correctly. If you config Seafile behind Nginx/Apache, it should be SERVICE_URL/seafhttp, like https://seafile.example.com/seafhttp .')}\n                    />\n                  </Fragment>\n                </Section>\n\n                <Section headingText={gettext('Branding')}>\n                  <Fragment>\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName='SITE_TITLE'\n                      keyText='SITE_TITLE'\n                      value={config_dict['SITE_TITLE']}\n                      helpTip={gettext('Site title shown in a browser tab')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName='SITE_NAME'\n                      keyText='SITE_NAME'\n                      value={config_dict['SITE_NAME']}\n                      helpTip={gettext('Site name used in email sending')}\n                    />\n                    <FileItem\n                      postFile={this.postFile}\n                      displayName='Logo'\n                      keyText='Logo'\n                      filePath={logoPath}\n                      fileWidth={256}\n                      fileHeight={64}\n                      helpTip='logo.png, 256px * 64px'\n                    />\n                    <FileItem\n                      postFile={this.postFile}\n                      displayName='Favicon'\n                      keyText='Favicon'\n                      filePath={faviconPath}\n                      fileWidth={32}\n                      fileHeight={32}\n                      helpTip='favicon.ico, 32px * 32px'\n                    />\n                    <FileItem\n                      postFile={this.postFile}\n                      displayName={gettext('Login Background Image')}\n                      keyText='loginBGImage'\n                      filePath={loginBGPath}\n                      fileWidth={240}\n                      fileHeight={160}\n                      helpTip='login-bg.jpg, 2400px * 1600px'\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='ENABLE_BRANDING_CSS'\n                      keyText='ENABLE_BRANDING_CSS'\n                      value={config_dict['ENABLE_BRANDING_CSS']}\n                      helpTip={gettext('Use custom CSS')}\n                    />\n                    <InputItem\n                      inputType=\"textarea\"\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('Custom CSS')}\n                      keyText='CUSTOM_CSS'\n                      value={config_dict['CUSTOM_CSS']}\n                      helpTip=''\n                    />\n                  </Fragment>\n                </Section>\n\n                <Section headingText={gettext('User')}>\n                  <Fragment>\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('allow new registrations')}\n                      keyText='ENABLE_SIGNUP'\n                      value={config_dict['ENABLE_SIGNUP']}\n                      helpTip={gettext('Allow new user registrations. Uncheck this to prevent anyone from creating a new account.')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('activate after registration')}\n                      keyText='ACTIVATE_AFTER_REGISTRATION'\n                      value={config_dict['ACTIVATE_AFTER_REGISTRATION']}\n                      helpTip={gettext('Activate user immediately after registration. If unchecked, a user need to be activated by administrator or via activation email')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('send activation email')}\n                      keyText='REGISTRATION_SEND_MAIL'\n                      value={config_dict['REGISTRATION_SEND_MAIL']}\n                      helpTip={gettext('Send activation Email after user registration.')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('keep sign in')}\n                      keyText='LOGIN_REMEMBER_DAYS'\n                      value={config_dict['LOGIN_REMEMBER_DAYS']}\n                      helpTip={gettext('Number of days that keep user sign in.')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName='LOGIN_ATTEMPT_LIMIT'\n                      keyText='LOGIN_ATTEMPT_LIMIT'\n                      value={config_dict['LOGIN_ATTEMPT_LIMIT']}\n                      helpTip={gettext('The maximum number of failed login attempts before showing CAPTCHA.')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='FREEZE_USER_ON_LOGIN_FAILED'\n                      keyText='FREEZE_USER_ON_LOGIN_FAILED'\n                      value={config_dict['FREEZE_USER_ON_LOGIN_FAILED']}\n                      helpTip={gettext('Freeze user account when failed login attempts exceed limit.')}\n                    />\n                  </Fragment>\n                </Section>\n\n                <Section headingText={gettext('Groups')}>\n                  <CheckboxItem\n                    saveSetting={this.saveSetting}\n                    displayName='ENABLE_SHARE_TO_ALL_GROUPS'\n                    keyText='ENABLE_SHARE_TO_ALL_GROUPS'\n                    value={config_dict['ENABLE_SHARE_TO_ALL_GROUPS']}\n                    helpTip={gettext('Enable users to share libraries to any groups in the system.')}\n                  />\n                </Section>\n\n                <Section headingText={gettext('Password')}>\n                  <Fragment>\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='strong password'\n                      keyText='USER_STRONG_PASSWORD_REQUIRED'\n                      value={config_dict['USER_STRONG_PASSWORD_REQUIRED']}\n                      helpTip={gettext('Force user to use a strong password when sign up or change password.')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='force password change'\n                      keyText='FORCE_PASSWORD_CHANGE'\n                      value={config_dict['FORCE_PASSWORD_CHANGE']}\n                      helpTip={gettext('Force user to change password when account is newly added or reset by admin')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('password minimum length')}\n                      keyText='USER_PASSWORD_MIN_LENGTH'\n                      value={config_dict['USER_PASSWORD_MIN_LENGTH']}\n                      helpTip={gettext('The least number of characters an account password should include.')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('password strength level')}\n                      keyText='USER_PASSWORD_STRENGTH_LEVEL'\n                      value={config_dict['USER_PASSWORD_STRENGTH_LEVEL']}\n                      helpTip={gettext('The level(1-4) of an account password\\'s strength. For example, \\'3\\' means password must have at least 3 of the following: num, upper letter, lower letter and other symbols')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='enable two factor authentication'\n                      keyText='ENABLE_TWO_FACTOR_AUTH'\n                      value={config_dict['ENABLE_TWO_FACTOR_AUTH']}\n                      helpTip={gettext('Enable two factor authentication')}\n                    />\n                  </Fragment>\n                </Section>\n\n                <Section headingText={gettext('Library')}>\n                  <Fragment>\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='library history'\n                      keyText='ENABLE_REPO_HISTORY_SETTING'\n                      value={config_dict['ENABLE_REPO_HISTORY_SETTING']}\n                      helpTip={gettext('Allow user to change library history settings')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='encrypted library'\n                      keyText='ENABLE_ENCRYPTED_LIBRARY'\n                      value={config_dict['ENABLE_ENCRYPTED_LIBRARY']}\n                      helpTip={gettext('Allow user to create encrypted libraries')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('library password minimum length')}\n                      keyText='REPO_PASSWORD_MIN_LENGTH'\n                      value={config_dict['REPO_PASSWORD_MIN_LENGTH']}\n                      helpTip={gettext('The least number of characters an encrypted library password should include.')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('share/upload link force password')}\n                      keyText='SHARE_LINK_FORCE_USE_PASSWORD'\n                      value={config_dict['SHARE_LINK_FORCE_USE_PASSWORD']}\n                      helpTip={gettext('Force user use password when generating share/upload link.')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('share/upload link password minimum length')}\n                      keyText='SHARE_LINK_PASSWORD_MIN_LENGTH'\n                      value={config_dict['SHARE_LINK_PASSWORD_MIN_LENGTH']}\n                      helpTip={gettext('The least number of characters a share/upload link password should include.')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('share/upload link password strength level')}\n                      keyText='SHARE_LINK_PASSWORD_STRENGTH_LEVEL'\n                      value={config_dict['SHARE_LINK_PASSWORD_STRENGTH_LEVEL']}\n                      helpTip={gettext('The level(1-4) of a share/upload link password\\'s strength. For example, \\'3\\' means password must have at least 3 of the following: num, upper letter, lower letter and other symbols')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='ENABLE_USER_CLEAN_TRASH'\n                      keyText='ENABLE_USER_CLEAN_TRASH'\n                      value={config_dict['ENABLE_USER_CLEAN_TRASH']}\n                      helpTip={gettext('Allow user to clean library trash')}\n                    />\n                  </Fragment>\n                </Section>\n\n                <Section headingText={gettext('Online Preview')}>\n                  <InputItem\n                    inputType=\"textarea\"\n                    saveSetting={this.saveSetting}\n                    displayName={gettext('text file extensions')}\n                    keyText='TEXT_PREVIEW_EXT'\n                    value={config_dict['TEXT_PREVIEW_EXT']}\n                    helpTip={gettext('Extensions of text files that can be online previewed, each suffix is separated by a comma.')}\n                  />\n                </Section>\n\n                <Section headingText={gettext('Sync')}>\n                  <CheckboxItem\n                    saveSetting={this.saveSetting}\n                    displayName='DISABLE_SYNC_WITH_ANY_FOLDER'\n                    keyText='DISABLE_SYNC_WITH_ANY_FOLDER'\n                    value={config_dict['DISABLE_SYNC_WITH_ANY_FOLDER']}\n                    helpTip={gettext('If turn on, the desktop clients will not be able to sync a folder outside the default Seafile folder.')}\n                  />\n                </Section>\n\n                {isPro && <Section headingText={gettext('Terms')}>\n                  <CheckboxItem\n                    saveSetting={this.saveSetting}\n                    displayName='ENABLE_TERMS_AND_CONDITIONS'\n                    keyText='ENABLE_TERMS_AND_CONDITIONS'\n                    value={config_dict['ENABLE_TERMS_AND_CONDITIONS']}\n                    helpTip={gettext('Enable system admin to add Terms and Conditions, and all users will have to accept the terms.')}\n                  />\n                </Section>}\n              </Fragment>\n              }\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default WebSettings;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/virus-scan/all-virus-files.js",["4046","4047","4048","4049"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './nav';\n\nconst virusFileItemPropTypes = {\n  virusFile: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  handleFile: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n};\n\nclass VirusFileItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  };\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  onMenuItemClick = (operation) => {\n    this.props.handleFile(this.props.virusFile.virus_id, operation);\n  };\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'ignore':\n        translateResult = gettext('Ignore');\n        break;\n      case 'do-not-ignore':\n        translateResult = gettext('Don\\'t ignore');\n        break;\n    }\n    return translateResult;\n  };\n\n  render() {\n    const virusFile = this.props.virusFile;\n    let fileStatus = '',\n      fileOpList = [];\n    if (virusFile.has_deleted) {\n      fileStatus = <span className=\"text-green\">{gettext('Deleted')}</span>;\n    } else if (virusFile.has_ignored) {\n      fileStatus = <span className=\"text-orange\">{gettext('Ignored')}</span>;\n      fileOpList = ['do-not-ignore'];\n    } else {\n      fileStatus = <span className=\"text-red\">{gettext('Unhandled')}</span>;\n      fileOpList = ['delete', 'ignore'];\n    }\n\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n        <td>{virusFile.repo_name}</td>\n        <td>{virusFile.repo_owner}</td>\n        <td>{virusFile.file_path}</td>\n        <td>{fileStatus}</td>\n        <td>\n          {fileOpList.length > 0 && this.state.isOpIconShown &&\n            <OpMenu\n              operations={fileOpList}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nVirusFileItem.propTypes = virusFileItemPropTypes;\n\n\nconst virusFileListPropTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  virusFiles: PropTypes.array.isRequired,\n  currentPage: PropTypes.number,\n  hasNextPage: PropTypes.bool,\n  curPerPage: PropTypes.number,\n  resetPerPage: PropTypes.func,\n  getListByPage: PropTypes.func.isRequired,\n  handleFile: PropTypes.func.isRequired,\n};\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.currentPage - 1);\n  };\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.currentPage + 1);\n  };\n\n  render() {\n    const {\n      loading, errorMsg, virusFiles,\n      curPerPage, hasNextPage, currentPage\n    } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      return (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"27%\">{gettext('Library')}</th>\n                <th width=\"25%\">{gettext('Owner')}</th>\n                <th width=\"28%\">{gettext('Virus File')}</th>\n                <th width=\"15%\">{gettext('Status')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {virusFiles.map((virusFile, index) => {\n                return (\n                  <VirusFileItem\n                    key={index}\n                    virusFile={virusFile}\n                    isItemFreezed={this.state.isItemFreezed}\n                    onFreezedItem={this.onFreezedItem}\n                    onUnfreezedItem={this.onUnfreezedItem}\n                    handleFile={this.props.handleFile}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n          {virusFiles.length > 0 &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nContent.propTypes = virusFileListPropTypes;\n\n\nclass AllVirusFiles extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      virusFiles: [],\n      currentPage: 1,\n      perPage: 25,\n      hasNextPage: false\n    };\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const {\n      currentPage, perPage\n    } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getListByPage(this.state.currentPage);\n    });\n  }\n\n  getListByPage = (page) => {\n    const { perPage } = this.state;\n    seafileAPI.listVirusFiles(page, perPage).then((res) => {\n      const data = res.data;\n      this.setState({\n        loading: false,\n        virusFiles: data.virus_file_list,\n        hasNextPage: data.has_next_page\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getListByPage(1);\n    });\n  };\n\n  handleFile = (virusID, op) => {\n    let request;\n    switch(op) {\n      case 'delete':\n        request = seafileAPI.deleteVirusFile(virusID);\n        break;\n      case 'ignore':\n        request = seafileAPI.toggleIgnoreVirusFile(virusID, true);\n        break;\n      case 'do-not-ignore':\n        request = seafileAPI.toggleIgnoreVirusFile(virusID, false);\n        break;\n    }\n    request.then((res) => {\n      this.setState({\n        virusFiles: this.state.virusFiles.map((item) => {\n          if (item.virus_id == virusID) {\n            if (op == 'delete') {\n              item.has_deleted = true;\n            } else {\n              item = res.data.virus_file;\n            }\n          }\n          return item;\n        })\n      });\n    }).catch((error) => {\n      toaster.danger(Utils.getErrorMsg(error));\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"all\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                virusFiles={this.state.virusFiles}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                getListByPage={this.getListByPage}\n                handleFile={this.handleFile}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default AllVirusFiles;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/terms-and-conditions/terms-and-conditions.js",["4050","4051"],[],"import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport AddOrUpdateTermDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-or-update-term-dialog';\nimport ModalPortal from '../../../components/modal-portal';\nimport toaster from '../../../components/toast';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Content from './content';\n\nclass TermsAndConditions extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      termList: [],\n      isAddTermDialogOpen: false,\n    };\n  }\n\n  toggleAddTermDialog = () => {\n    this.setState({isAddTermDialogOpen: !this.state.isAddTermDialogOpen});\n  };\n\n  componentDidMount () {\n    seafileAPI.sysAdminListTermsAndConditions().then((res) => {\n      this.setState({\n        termList: res.data.term_and_condition_list,\n        loading: false,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  addTerm = (name, versionNumber, text, isActive) => {\n    seafileAPI.sysAdminAddTermAndCondition(name, versionNumber, text, isActive).then(res => {\n      // After adding the terms, you need to refresh the page.\n      location.reload();\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  updateTerm = (termID, name, versionNumber, text, isActive) => {\n    seafileAPI.sysAdminUpdateTermAndCondition(termID, name, versionNumber, text, isActive).then(res => {\n      let termList = this.state.termList.map(item => {\n        if (item.id == termID) {\n          return res.data;\n        } else {\n          return item;\n        }\n      });\n      this.setState({termList: termList});\n      toaster.success(gettext('Update succeeded.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  deleteTerm = (termID) => {\n    seafileAPI.sysAdminDeleteTermAndCondition(termID).then(res => {\n      let termList = this.state.termList.filter(item => item.id != termID);\n      this.setState({termList: termList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    let { termList, isAddTermDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddTermDialog}>{gettext('Add')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Terms and Conditions')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={termList}\n                deleteTerm={this.deleteTerm}\n                updateTerm={this.updateTerm}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddTermDialogOpen &&\n        <ModalPortal>\n          <AddOrUpdateTermDialog\n            isUpdate={false}\n            addTerm={this.addTerm}\n            toggle={this.toggleAddTermDialog}\n          />\n        </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default TermsAndConditions;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/notifications/notifications.js",["4052","4053","4054"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport SysAdminAddSysNotificationDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-sys-notification-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No notifications')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <table>\n          <thead>\n            <tr>\n              <th width=\"95%\">{gettext('Notification Detail')}</th>\n              <th width=\"5%\">{/*Operations*/}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item\n                key={index}\n                item={item}\n                isItemFreezed={this.state.isItemFreezed}\n                onFreezedItem={this.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n                deleteNotification={this.props.deleteNotification}\n                setToCurrent={this.props.setToCurrent}\n              />);\n            })}\n          </tbody>\n        </table>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  getLogsByPage: PropTypes.func,\n  resetPerPage: PropTypes.func,\n  currentPage: PropTypes.number,\n  perPage: PropTypes.number,\n  pageInfo: PropTypes.object,\n  hasNextPage: PropTypes.bool,\n  getItemsByPage: PropTypes.func,\n  curPerPage: PropTypes.number,\n  deleteItem: PropTypes.func,\n  setToCurrent: PropTypes.func.isRequired,\n  deleteNotification: PropTypes.func.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isDeleteDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  };\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  };\n\n  deleteNotification = () => {\n    this.props.deleteNotification(this.props.item.id);\n    this.toggleDeleteDialog();\n  };\n\n  setToCurrent = () => {\n    this.props.setToCurrent(this.props.item.id);\n  };\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Set to current':\n        this.setToCurrent();\n        break;\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n    }\n  };\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch (item) {\n      case 'Set to current':\n        translateResult = gettext('Set to current');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      default:\n        break;\n    }\n    return translateResult;\n  };\n\n  getOperations = () => {\n    const { item } = this.props;\n    let operations = [];\n    if (!item.is_current) {\n      operations.push('Set to current');\n    }\n    operations.push('Delete');\n    return operations;\n  };\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen } = this.state;\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td>\n            {item.msg}\n            {item.is_current &&\n              <span className=\"small text-orange\">{gettext('(current notification)')}</span>\n            }\n          </td>\n          <td>\n            {isOpIconShown &&\n            <OpMenu\n              operations={this.getOperations()}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Notification')}\n            message={gettext('Are you sure you want to delete the notification ?')}\n            toggleDialog={this.toggleDeleteDialog}\n            executeOperation={this.deleteNotification}\n            confirmBtnText={gettext('Delete')}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  deleteItem: PropTypes.func,\n  onFreezedItem: PropTypes.func.isRequired,\n  setToCurrent: PropTypes.func.isRequired,\n  deleteNotification: PropTypes.func.isRequired,\n};\n\nclass Notifications extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      notificationList: [],\n      isAddNotificationDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminListAllSysNotifications().then((res) => {\n      this.setState({\n        loading: false,\n        notificationList: res.data.notifications\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleAddNotificationDialog = () => {\n    this.setState({isAddNotificationDialogOpen: !this.state.isAddNotificationDialogOpen});\n  };\n\n  addNotification = (msg) => {\n    seafileAPI.sysAdminAddSysNotification(msg).then(res => {\n      let notificationList = this.state.notificationList;\n      notificationList.unshift(res.data.notification);\n      this.setState({notificationList: notificationList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  deleteNotification = (id) => {\n    seafileAPI.sysAdminDeleteSysNotification(id).then(res => {\n      let notificationList = this.state.notificationList.filter(item => {\n        return item.id != id;\n      });\n      this.setState({notificationList: notificationList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  setToCurrent = (id) => {\n    seafileAPI.sysAdminSetSysNotificationToCurrent(id).then(res => {\n      let notificationList = this.state.notificationList.map(item => {\n        if (item.id == id) {\n          item.is_current = true;\n        } else {\n          item.is_current = false;\n        }\n        return item;\n      });\n      this.setState({notificationList: notificationList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { isAddNotificationDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddNotificationDialog}>{gettext('Add new notification')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('All Notifications')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.notificationList}\n                deleteNotification={this.deleteNotification}\n                setToCurrent={this.setToCurrent}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddNotificationDialogOpen &&\n          <SysAdminAddSysNotificationDialog\n            addNotification={this.addNotification}\n            toggle={this.toggleAddNotificationDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Notifications;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/virus-scan/unhandled-virus-files.js",["4055","4056","4057","4058","4059","4060","4061","4062","4063"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './nav';\n\nconst virusFileItemPropTypes = {\n  resetPerPage: PropTypes.func,\n  getListByPage: PropTypes.func.isRequired,\n  handleFile: PropTypes.func.isRequired,\n  virusFile: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  toggleItemSelected: PropTypes.func.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired\n};\n\nclass VirusFileItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  };\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  onMenuItemClick = (operation) => {\n    this.props.handleFile(this.props.virusFile.virus_id, operation);\n  };\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'ignore':\n        translateResult = gettext('Ignore');\n        break;\n      case 'do-not-ignore':\n        translateResult = gettext('Don\\'t ignore');\n        break;\n    }\n    return translateResult;\n  };\n\n  toggleItemSelected = (e) => {\n    this.props.toggleItemSelected(this.props.virusFile, e.target.checked);\n  };\n\n  render() {\n    const virusFile = this.props.virusFile;\n    let fileStatus = '',\n      fileOpList = [];\n    if (virusFile.has_deleted) {\n      fileStatus = <span className=\"text-green\">{gettext('Deleted')}</span>;\n    } else if (virusFile.has_ignored) {\n      fileStatus = <span className=\"text-orange\">{gettext('Ignored')}</span>;\n      fileOpList = ['do-not-ignore'];\n    } else {\n      fileStatus = <span className=\"text-red\">{gettext('Unhandled')}</span>;\n      fileOpList = ['delete', 'ignore'];\n    }\n\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n        <td className=\"text-center\">\n          <input type=\"checkbox\" checked={virusFile.isSelected} onChange={this.toggleItemSelected} />\n        </td>\n        <td>{virusFile.repo_name}</td>\n        <td>{virusFile.repo_owner}</td>\n        <td>{virusFile.file_path}</td>\n        <td>{fileStatus}</td>\n        <td>\n          {fileOpList.length > 0 && this.state.isOpIconShown &&\n            <OpMenu\n              operations={fileOpList}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nVirusFileItem.propTypes = virusFileItemPropTypes;\n\n\nconst virusFileListPropTypes = {\n  currentPage: PropTypes.number,\n  hasNextPage: PropTypes.bool,\n  curPerPage: PropTypes.number,\n  resetPerPage: PropTypes.func,\n  getListByPage: PropTypes.func.isRequired,\n  handleFile: PropTypes.func.isRequired,\n  isAllItemsSelected: PropTypes.bool.isRequired,\n  toggleAllSelected: PropTypes.func.isRequired,\n  toggleItemSelected: PropTypes.func.isRequired,\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  virusFiles: PropTypes.array.isRequired\n};\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.currentPage - 1);\n  };\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.currentPage + 1);\n  };\n\n  render() {\n    const {\n      loading, errorMsg, virusFiles,\n      curPerPage, hasNextPage, currentPage,\n      isAllItemsSelected\n    } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      return (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"3%\" className=\"text-center\">\n                  <input type=\"checkbox\" checked={isAllItemsSelected} onChange={this.props.toggleAllSelected} />\n                </th>\n                <th width=\"24%\">{gettext('Library')}</th>\n                <th width=\"25%\">{gettext('Owner')}</th>\n                <th width=\"28%\">{gettext('Virus File')}</th>\n                <th width=\"15%\">{gettext('Status')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {virusFiles.map((virusFile, index) => {\n                return (\n                  <VirusFileItem\n                    key={index}\n                    virusFile={virusFile}\n                    isItemFreezed={this.state.isItemFreezed}\n                    onFreezedItem={this.onFreezedItem}\n                    onUnfreezedItem={this.onUnfreezedItem}\n                    handleFile={this.props.handleFile}\n                    toggleItemSelected={this.props.toggleItemSelected}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n          {virusFiles.length > 0 &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nContent.propTypes = virusFileListPropTypes;\n\n\nclass UnhandledVirusFiles extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      virusFiles: [],\n\n      isAllItemsSelected: false,\n      selectedItems: [],\n\n      currentPage: 1,\n      perPage: 25,\n      hasNextPage: false\n    };\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const {\n      currentPage, perPage\n    } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getListByPage(this.state.currentPage);\n    });\n  }\n\n  getListByPage = (page) => {\n    const { perPage } = this.state;\n    const hasHandled = false;\n    seafileAPI.listVirusFiles(page, perPage, hasHandled).then((res) => {\n      const data = res.data;\n      const items = data.virus_file_list.map(item => {\n        item.isSelected = false;\n        return item;\n      });\n      this.setState({\n        loading: false,\n        virusFiles: items,\n        hasNextPage: data.has_next_page\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getListByPage(1);\n    });\n  };\n\n  handleFile = (virusID, op) => {\n    let request;\n    switch(op) {\n      case 'delete':\n        request = seafileAPI.deleteVirusFile(virusID);\n        break;\n      case 'ignore':\n        request = seafileAPI.toggleIgnoreVirusFile(virusID, true);\n        break;\n      case 'do-not-ignore':\n        request = seafileAPI.toggleIgnoreVirusFile(virusID, false);\n        break;\n    }\n    request.then((res) => {\n      this.setState({\n        virusFiles: this.state.virusFiles.map((item) => {\n          if (item.virus_id == virusID) {\n            if (op == 'delete') {\n              item.has_deleted = true;\n            } else {\n              item = res.data.virus_file;\n            }\n          }\n          return item;\n        })\n      });\n    }).catch((error) => {\n      toaster.danger(Utils.getErrorMsg(error));\n    });\n  };\n\n  toggleAllSelected = () => {\n    this.setState((prevState) => ({\n      isAllItemsSelected: !prevState.isAllItemsSelected,\n      virusFiles: this.state.virusFiles.map((item) => {\n        item.isSelected = !prevState.isAllItemsSelected;\n        return item;\n      })\n    }));\n  };\n\n  toggleItemSelected = (targetItem, isSelected) => {\n    this.setState({\n      virusFiles: this.state.virusFiles.map((item) => {\n        if (item === targetItem) {\n          item.isSelected = isSelected;\n        }\n        return item;\n      })\n    }, () => {\n      this.setState({\n        isAllItemsSelected: !this.state.virusFiles.some(item => !item.isSelected)\n      });\n    });\n  };\n\n  handleSelectedItems = (op) => {\n    // op: 'delete-virus', 'ignore-virus'\n    const virusIDs = this.state.virusFiles\n      .filter(item => {\n        if (op == 'delete-virus') {\n          return item.isSelected && !item.has_deleted;\n        } else {\n          return item.isSelected && !item.has_ignored;\n        }\n      })\n      .map(item => item.virus_id);\n    seafileAPI.batchProcessVirusFiles(virusIDs, op).then((res) => {\n      let fileList = this.state.virusFiles;\n      res.data.success.forEach(item => {\n        let file = fileList.find(file => file.virus_id == item.virus_id);\n        if (op == 'delete-virus') {\n          file.has_deleted = true;\n        } else {\n          file.has_ignored = true;\n        }\n      });\n      this.setState({\n        virusFiles: fileList\n      });\n\n      res.data.failed.forEach(item => {\n        const file = fileList.find(file => file.virus_id == item.virus_id);\n        let errMsg = op == 'delete-virus' ?\n          gettext('Failed to delete %(virus_file) from library %(library): %(error_msg)') :\n          gettext('Failed to ignore %(virus_file) from library %(library): %(error_msg)');\n        errMsg = errMsg.replace('%(virus_file)', file.file_path)\n          .replace('%(library)', file.repo_name)\n          .replace('%(error_msg)', item.error_msg);\n        toaster.danger(errMsg);\n      });\n    }).catch((error) => {\n      toaster.danger(Utils.getErrorMsg(error));\n    });\n  };\n\n  deleteSelectedItems = () => {\n    const op = 'delete-virus';\n    this.handleSelectedItems(op);\n  };\n\n  ignoreSelectedItems = () => {\n    const op = 'ignore-virus';\n    this.handleSelectedItems(op);\n  };\n\n  render() {\n    return (\n      <Fragment>\n        {this.state.virusFiles.some(item => item.isSelected) ? (\n          <MainPanelTopbar {...this.props}>\n            <Fragment>\n              <Button onClick={this.deleteSelectedItems} className=\"operation-item\">{gettext('Delete')}</Button>\n              <Button onClick={this.ignoreSelectedItems} className=\"operation-item\">{gettext('Ignore')}</Button>\n            </Fragment>\n          </MainPanelTopbar>\n        ) : <MainPanelTopbar {...this.props} />\n        }\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"unhandled\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                virusFiles={this.state.virusFiles}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                getListByPage={this.getListByPage}\n                handleFile={this.handleFile}\n                isAllItemsSelected={this.state.isAllItemsSelected}\n                toggleAllSelected={this.toggleAllSelected}\n                toggleItemSelected={this.toggleItemSelected}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default UnhandledVirusFiles;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/admin-logs/login-logs.js",["4064","4065"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LogsNav from './logs-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getLogsByPage(this.props.currentPage - 1);\n  };\n\n  getNextPage = () => {\n    this.props.getLogsByPage(this.props.currentPage + 1);\n  };\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No Admin login logs')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"25%\">{gettext('IP')}</th>\n                <th width=\"25%\">{gettext('Status')}</th>\n                <th width=\"25%\">{gettext('Time')}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  getLogsByPage: PropTypes.func,\n  resetPerPage: PropTypes.func,\n  currentPage: PropTypes.number,\n  perPage: PropTypes.number,\n  pageInfo: PropTypes.object,\n  hasNextPage: PropTypes.bool,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { item } = this.props;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><UserLink email={item.email} name={item.name} /></td>\n        <td>{item.login_ip}</td>\n        <td>{item.login_success ? gettext('Success') : gettext('Failed')}</td>\n        <td>{moment(item.login_time).fromNow()}</td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n};\n\nclass AdminLoginLogs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      logList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getLogsByPage(this.state.currentPage);\n    });\n  }\n\n  getLogsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListAdminLoginLogs(page, perPage).then((res) => {\n      this.setState({\n        logList: res.data.data,\n        loading: false,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getLogsByPage(this.initPage));\n  };\n\n  render() {\n    let { logList, currentPage, perPage, hasNextPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LogsNav currentItem=\"adminLoginLogs\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={logList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getLogsByPage={this.getLogsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default AdminLoginLogs;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/terms-preview-widget.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/invitations/invitations.js",["4066","4067","4068"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  getPreviousPage = () => {\n    this.props.getItemsByPage(this.props.currentPage - 1);\n  };\n\n  getNextPage = () => {\n    this.props.getItemsByPage(this.props.currentPage + 1);\n  };\n\n  render() {\n    const { loading, errorMsg, items, curPerPage, hasNextPage, currentPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No invitations')}</h2>\n        </EmptyTip>\n      );\n\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"20%\">{gettext('Inviter')}</th>\n                <th width=\"20%\">{gettext('Accepter')}</th>\n                <th width=\"9%\">{gettext('Type')}</th>\n                <th width=\"14%\">{gettext('Invited at')}</th>\n                <th width=\"14%\">{gettext('Accepted at')}</th>\n                <th width=\"18%\">{gettext('Expired at')}</th>\n                <th width=\"5%\"></th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  deleteItem={this.props.deleteItem}\n                />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  getLogsByPage: PropTypes.func,\n  resetPerPage: PropTypes.func,\n  currentPage: PropTypes.number,\n  perPage: PropTypes.number,\n  pageInfo: PropTypes.object,\n  hasNextPage: PropTypes.bool,\n  getItemsByPage: PropTypes.func,\n  curPerPage: PropTypes.number,\n  deleteItem: PropTypes.func,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  };\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  deleteItem = () => {\n    this.props.deleteItem(this.props.item);\n  };\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch (item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n    }\n    return translateResult;\n  };\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Delete':\n        this.deleteItem();\n        break;\n      default:\n        break;\n    }\n  };\n\n  getInviteTypeText = () => {\n    let translateResult = '';\n    switch (this.props.item.invite_type) {\n      case 'Guest':\n        translateResult = gettext('Guest');\n        break;\n      case 'guest':\n        translateResult = gettext('Guest');\n        break;\n      case 'Default':\n        translateResult = gettext('Default');\n        break;\n      case 'default':\n        translateResult = gettext('Default');\n        break;\n    }\n    return translateResult;\n  };\n\n  render() {\n    const { item } = this.props;\n    const {\n      isOpIconShown\n    } = this.state;\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td>\n            <UserLink email={item.inviter_email} name={item.inviter_name} />\n          </td>\n          <td>\n            {item.accept_time ?\n              <UserLink email={item.accepter_email} name={item.accepter_name} /> :\n              item.accepter_email\n            }\n          </td>\n          <td>{this.getInviteTypeText()}</td>\n          <td>\n            <span title={moment(item.invite_time).format('llll')}>{moment(item.invite_time).fromNow()}</span>\n          </td>\n          <td>\n            {item.accept_time ?\n              <span title={moment(item.accept_time).format('llll')}>{moment(item.accept_time).fromNow()}</span> :\n              '--'\n            }\n          </td>\n          <td>\n            {item.is_expired ?\n              <span className=\"text-red\">{moment(item.expire_time).format('YYYY-MM-DD HH:mm')}</span> :\n              moment(item.expire_time).format('YYYY-MM-DD HH:mm')\n            }\n          </td>\n          <td>\n            {isOpIconShown &&\n            <OpMenu\n              operations={['Delete']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  deleteItem: PropTypes.func,\n  onFreezedItem: PropTypes.func.isRequired,\n};\n\nclass Invitations extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      totalItemCount: 0,\n      hasNextPage: false,\n      currentPage: 1,\n      perPage: 25\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getItemsByPage(this.state.currentPage);\n    });\n  }\n\n  getItemsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListInvitations(page, perPage).then(res => {\n      this.setState({\n        loading: false,\n        items: res.data.invitation_list,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n        currentPage: page\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  deleteItem = (targetItem) => {\n    const token = targetItem.token;\n    seafileAPI.sysAdminDeleteInvitation(token).then(res => {\n      let items = this.state.items.filter(item => {\n        return item.token != token;\n      });\n      this.setState({items: items});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  deleteItemInBatch = () => {\n    seafileAPI.sysAdminDeleteExpiredInvitations().then(res => {\n      const prevItems = this.state.items;\n      const items = this.state.items.filter(item => !item.is_expired || item.accept_time);\n      if (items.length < prevItems.length) {\n        this.setState({\n          items: items\n        });\n        toaster.success(gettext('Operation succeeded.'));\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getItemsByPage(1);\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.deleteItemInBatch}>{gettext('Delete Expired Invitations')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Invitations')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                getItemsByPage={this.getItemsByPage}\n                deleteItem={this.deleteItem}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Invitations;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/logo.js",["4069","4070"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, mediaUrl, logoPath, logoWidth, logoHeight, siteTitle } from '../utils/constants';\n\nconst propTypes = {\n  onCloseSidePanel: PropTypes.func,\n  showCloseSidePanelIcon: PropTypes.bool,\n};\n\nclass Logo extends React.Component {\n\n  closeSide = () => {\n    this.props.onCloseSidePanel();\n  };\n\n  render() {\n    return (\n      <div className=\"top-logo\">\n        <a href={siteRoot} id=\"logo\">\n          <img src={logoPath.indexOf('image-view') != -1 ? logoPath : mediaUrl + logoPath} height={logoHeight} width={logoWidth} title={siteTitle} alt=\"logo\" />\n        </a>\n        {this.props.showCloseSidePanelIcon &&\n          <a\n            className=\"sf2-icon-x1 sf-popover-close side-panel-close action-icon d-md-none\"\n            onClick={this.closeSide}\n            title=\"Close\"\n            aria-label=\"Close\"\n          >\n          </a>\n        }\n      </div>\n    );\n  }\n}\n\nLogo.propTypes = propTypes;\n\nexport default Logo;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/loading.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/account.js",["4071"],[],"import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { siteRoot, isPro, gettext, appAvatarURL, enableSSOToThirdpartWebsite } from '../../utils/constants';\nimport toaster from '../toast';\nimport RenderRole from '../../services/footer-upgrade';\n\nconst {\n  isOrgContext,\n} = window.app.pageOptions;\n\nconst propTypes = {\n  isAdminPanel: PropTypes.bool,\n};\n\nclass Account extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showInfo: false,\n      userName: '',\n      contactEmail: '',\n      quotaUsage: '',\n      quotaTotal: '',\n      isStaff: false,\n      isOrgStaff: false,\n      usageRate: '',\n      enableSubscription: false,\n    };\n    this.isFirstMounted = true;\n  }\n\n  componentDidUpdate(prevProps) {\n    this.handleProps();\n  }\n\n  getContainer = () => {\n    return ReactDOM.findDOMNode(this);\n  };\n\n  handleProps = () => {\n    if (this.state.showInfo) {\n      this.addEvents();\n    } else {\n      this.removeEvents();\n    }\n  };\n\n  addEvents = () => {\n    ['click', 'touchstart', 'keyup'].forEach(event =>\n      document.addEventListener(event, this.handleDocumentClick, true)\n    );\n  };\n\n  removeEvents = () => {\n    ['click', 'touchstart', 'keyup'].forEach(event =>\n      document.removeEventListener(event, this.handleDocumentClick, true)\n    );\n  };\n\n  handleDocumentClick = (e) => {\n    if (e && (e.which === 3 || (e.type === 'keyup' && e.which !== Utils.keyCodes.tab))) return;\n    const container = this.getContainer();\n\n    if (container.contains(e.target) && container !== e.target && (e.type !== 'keyup' || e.which === Utils.keyCodes.tab)) {\n      return;\n    }\n\n    this.setState({\n      showInfo: !this.state.showInfo,\n    });\n  };\n\n  onClickAccount = (e) => {\n    e.preventDefault();\n    if (this.isFirstMounted) {\n      seafileAPI.getAccountInfo().then(resp => {\n        this.setState({\n          userName: resp.data.name,\n          contactEmail: resp.data.email,\n          usageRate: resp.data.space_usage,\n          quotaUsage: Utils.bytesToSize(resp.data.usage),\n          // quotaTotal: Utils.bytesToSize(resp.data.total),\n          quotaTotal: resp.data.total === -2 ? 'Unlimited' : Utils.bytesToSize(resp.data.total),\n          isStaff: resp.data.is_staff,\n          isInstAdmin: resp.data.is_inst_admin,\n          isOrgStaff: resp.data.is_org_staff === 1 ? true : false,\n          showInfo: !this.state.showInfo,\n          enableSubscription: resp.data.enable_subscription,\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n      this.isFirstMounted = false;\n    } else {\n      this.setState({ showInfo: !this.state.showInfo });\n    }\n  };\n\n  renderMenu = () => {\n    let data;\n    const { isStaff, isOrgStaff, isInstAdmin } = this.state;\n\n    if (this.props.isAdminPanel) {\n      if (isStaff) {\n        data = {\n          url: siteRoot,\n          text: gettext('Exit System Admin')\n        };\n      } else if (isOrgStaff) {\n        data = {\n          url: siteRoot,\n          text: gettext('Exit Organization Admin')\n        };\n      } else if (isInstAdmin) {\n        data = {\n          url: siteRoot,\n          text: gettext('Exit Institution Admin')\n        };\n      }\n\n    } else {\n      if (isStaff) {\n        data = {\n          url: `${siteRoot}sys/info/`,\n          text: gettext('System Admin')\n        };\n      } else if (isOrgStaff) {\n        data = {\n          url: `${siteRoot}org/info/`,\n          text: gettext('Organization Admin')\n        };\n      } else if (isPro && isInstAdmin) {\n        data = {\n          url: `${siteRoot}inst/useradmin/`,\n          text: gettext('Institution Admin')\n        };\n      }\n    }\n\n    return data && <a href={data.url} title={data.text} className=\"item\">{data.text}</a>;\n  };\n\n  renderAvatar = () => {\n    return (<img src={appAvatarURL} width=\"36\" height=\"36\" className=\"avatar\" alt={gettext('Avatar')} />);\n  };\n\n  render() {\n    return (\n      <div id=\"account\">\n        <a id=\"my-info\" href=\"#\" onClick={this.onClickAccount} className=\"account-toggle no-deco d-none d-md-block\" aria-label={gettext('View profile and more')}>\n          {this.renderAvatar()}\n        </a>\n        <span className=\"account-toggle sf2-icon-more mobile-icon d-md-none\" aria-label={gettext('View profile and more')} onClick={this.onClickAccount}></span>\n        <div id=\"user-info-popup\" className={`account-popup sf-popover ${this.state.showInfo ? '' : 'hide'}`}>\n          <div className=\"outer-caret up-outer-caret\">\n            <div className=\"inner-caret\"></div>\n          </div>\n          <div className=\"sf-popover-con\">\n            <div className=\"item o-hidden\">\n              {this.renderAvatar()}\n              <div className=\"txt\">{this.state.userName}</div>\n            </div>\n            <div id=\"space-traffic\">\n              <div className=\"item\">\n                <p>{gettext('Used:')}{' '}{this.state.quotaUsage} / {this.state.quotaTotal}</p>\n                <div id=\"quota-bar\"><span id=\"quota-usage\" className=\"usage\" style={{ width: this.state.usageRate }}></span></div>\n              </div>\n            </div>\n            <RenderRole isOrgStaff={this.state.isOrgStaff} />\n            <a href={siteRoot + 'profile/'} className=\"item\">{gettext('Settings')}</a>\n            {(this.state.enableSubscription && !isOrgContext) && <a href={siteRoot + 'subscription/'} className=\"item\">{''}</a>}\n            {this.renderMenu()}\n            {enableSSOToThirdpartWebsite && <a href={siteRoot + 'sso-to-thirdpart/'} className=\"item\">{gettext('Customer Portal')}</a>}\n            <a href={siteRoot + 'accounts/logout/'} className=\"item\">{gettext('Log out')}</a>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nAccount.defaultProps = {\n  isAdminPanel: false\n};\n\nAccount.propTypes = propTypes;\n\nexport default Account;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/seafile-api.js",["4072"],[],"import { SeafileAPI } from 'seafile-js';\nimport { siteRoot, serviceURL } from './constants';\n\nconst TOKEN_KEY = 'sesamefs_auth_token';\n\nlet seafileAPI = new SeafileAPI();\n\n// Initialize with token from localStorage if available\nfunction initAPI() {\n  const token = localStorage.getItem(TOKEN_KEY);\n  const server = serviceURL || window.location.origin;\n\n  if (token) {\n    // Token-based authentication for SesameFS\n    seafileAPI.init({ server, token });\n  } else {\n    // Initialize without auth - will need to login\n    seafileAPI.init({ server });\n  }\n}\n\n// Check if user is authenticated\nfunction isAuthenticated() {\n  return !!localStorage.getItem(TOKEN_KEY);\n}\n\n// Login and store token\nasync function login(username, password) {\n  const server = serviceURL || window.location.origin;\n\n  // Call the auth-token endpoint\n  const response = await fetch(`${server}/api2/auth-token/`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded',\n    },\n    body: new URLSearchParams({\n      username: username,\n      password: password,\n    }),\n  });\n\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({}));\n    throw new Error(error.non_field_errors?.[0] || error.detail || 'Login failed');\n  }\n\n  const data = await response.json();\n\n  if (data.token) {\n    localStorage.setItem(TOKEN_KEY, data.token);\n    // Reinitialize API with the new token\n    seafileAPI.init({ server, token: data.token });\n    return data;\n  }\n\n  throw new Error('No token received');\n}\n\n// Logout - clear token\nfunction logout() {\n  localStorage.removeItem(TOKEN_KEY);\n  // Redirect to login\n  window.location.href = '/login/';\n}\n\n// Get stored token\nfunction getToken() {\n  return localStorage.getItem(TOKEN_KEY);\n}\n\n// Initialize on load\ninitAPI();\n\nexport { seafileAPI, isAuthenticated, login, logout, getToken, initAPI };\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/repo-tag.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/repo-info-bar.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/admin-logs/operation-logs.js",["4073","4074","4075","4076","4077","4078","4079"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot, enableSysAdminViewRepo, isPro } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LogsNav from './logs-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getLogsByPage(this.props.currentPage - 1);\n  };\n\n  getNextPage = () => {\n    this.props.getLogsByPage(this.props.currentPage + 1);\n  };\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No Admin operation logs')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"20%\">{gettext('Name')}</th>\n                <th width=\"15%\">{gettext('Operation')}</th>\n                <th width=\"50%\">{gettext('Detail')}</th>\n                <th width=\"15%\">{gettext('Time')}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  getLogsByPage: PropTypes.func,\n  resetPerPage: PropTypes.func,\n  currentPage: PropTypes.number,\n  perPage: PropTypes.number,\n  pageInfo: PropTypes.object,\n  hasNextPage: PropTypes.bool,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  getOperationText = (operationType) => {\n    switch (operationType) {\n      case 'repo_create': return gettext('Create Library');\n      case 'repo_delete': return gettext('Delete Library');\n      case 'repo_transfer': return gettext('Transfer Library');\n      case 'group_create': return gettext('Create Group');\n      case 'group_transfer': return gettext('Transfer Group');\n      case 'group_delete': return gettext('Delete Group');\n      case 'user_add': return gettext('Add User');\n      case 'user_delete': return gettext('Delete User');\n      case 'user_migrate': return gettext('Migrate User');\n      default: return '';\n    }\n  };\n\n  getOperationDetail = (item) => {\n    let detail = item.detail;\n\n    let ownerPageUrl = '';\n    if (detail.owner) {\n      ownerPageUrl = siteRoot + 'sys/users/' + encodeURIComponent(detail.owner) + '/';\n    }\n    let userPageUrl = '';\n    if (detail.email) {\n      userPageUrl = siteRoot + 'sys/users/' + encodeURIComponent(detail.email) + '/';\n    }\n    let detailText = '';\n    let repoPageUrl = '';\n    let groupPageUrl = '';\n    if (item.operation == 'repo_create' || item.operation == 'repo_delete' || item.operation == 'repo_transfer') {\n      repoPageUrl = siteRoot + 'sys/libraries/' + detail.id + '/' + encodeURIComponent(detail.name) + '/';\n    }\n    if (item.operation == 'group_create' || item.operation == 'group_delete' || item.operation == 'group_transfer') {\n      groupPageUrl = siteRoot + 'sys/groups/' + detail.id + '/libraries/';\n    }\n\n    switch (item.operation) {\n      case 'repo_create':\n        detailText = gettext('Created library {library_name} with {owner} as its owner')\n          .replace('{owner}', '<a href=\"' + ownerPageUrl + '\">' + detail.owner + '</a>');\n        if (isPro && enableSysAdminViewRepo) {\n          detailText = detailText.replace('{library_name}', '<a href=\"' + repoPageUrl + '\">' + detail.name + '</a>');\n        } else {\n          detailText = detailText.replace('{library_name}', '<span class=\"font-weight-bold\">' + detail.name + '</span>');\n        }\n        return detailText;\n\n      case 'repo_delete':\n        detailText = gettext('Deleted library {library_name}')\n          .replace('{library_name}', '<span class=\"font-weight-bold\">' + detail.name + '</span>');\n        return detailText;\n\n      case 'repo_transfer':\n        detailText = gettext('Transferred library {library_name} from {user_from} to {user_to}')\n          .replace('{user_from}', '<span class=\"font-weight-bold\">' + detail.from + '</span>')\n          .replace('{user_to}', '<span class=\"font-weight-bold\">' + detail.to+ '</span>');\n        if (isPro && enableSysAdminViewRepo) {\n          detailText = detailText.replace('{library_name}', '<a href=\"' + repoPageUrl + '\">' + detail.name + '</a>');\n        } else {\n          detailText = detailText.replace('{library_name}', '<span class=\"font-weight-bold\">' + detail.name + '</span>');\n        }\n        return detailText;\n\n      case 'group_create':\n        detailText = gettext('Created group {group_name}')\n          .replace('{group_name}', '<a href=\"' + groupPageUrl + '\">' + detail.name+ '</a>');\n        return detailText;\n\n      case 'group_transfer':\n        detailText = gettext('Transferred group {group_name} from {user_from} to {user_to}')\n          .replace('{user_from}', '<span class=\"font-weight-bold\">' + detail.from + '</span>')\n          .replace('{user_to}', '<span class=\"font-weight-bold\">' + detail.to+ '</span>')\n          .replace('{group_name}', '<a href=\"' + groupPageUrl + '\">' + detail.name+ '</a>');\n        return detailText;\n\n      case 'group_delete':\n        detailText = gettext('Deleted group {group_name}')\n          .replace('{group_name}', '<span class=\"font-weight-bold\">' + detail.name + '</span>');\n        return detailText;\n\n      case 'user_add':\n        detailText = gettext('Added user {user}')\n          .replace('{user}', '<a href=\"' + userPageUrl + '\">' + detail.email+ '</a>');\n        return detailText;\n\n      case 'user_delete':\n        detailText = gettext('Deleted user {user}')\n          .replace('{user}', '<span class=\"font-weight-bold\">' + detail.email+ '</span>');\n        return detailText;\n\n      case 'user_migrate':\n        detailText = gettext('User migrate from {user_from} to {user_to}')\n          .replace('{user_from}', '<span class=\"font-weight-bold\">' + detail.from + '</span>')\n          .replace('{user_to}', '<span class=\"font-weight-bold\">' + detail.to+ '</span>');\n        return detailText;\n\n      default: return '';\n    }\n  };\n\n  render() {\n    let { item } = this.props;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><UserLink email={item.email} name={item.name} /></td>\n        <td>{this.getOperationText(item.operation)}</td>\n        <td>\n          <span dangerouslySetInnerHTML={{__html: this.getOperationDetail(item)}}></span>\n        </td>\n        <td>{moment(item.datetime).fromNow()}</td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n};\n\nclass AdminOperationLogs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      logList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getLogsByPage(this.state.currentPage);\n    });\n  }\n\n  getLogsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListAdminLogs(page, perPage).then((res) => {\n      this.setState({\n        logList: res.data.data,\n        loading: false,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getLogsByPage(this.initPage));\n  };\n\n  render() {\n    let { logList, currentPage, perPage, hasNextPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LogsNav currentItem=\"adminOperationLogs\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={logList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getLogsByPage={this.getLogsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default AdminOperationLogs;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/shared-link-file-uploader/file-uploader.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/zip-download-dialog.js",["4080","4081","4082","4083"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { mediaUrl, gettext, fileServerRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\n\nconst propTypes = {\n  data: PropTypes.object,\n  token: PropTypes.string,\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string,\n  target: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.array\n  ]),\n  toggleDialog: PropTypes.func.isRequired\n};\n\nlet interval;\n\nclass ZipDownloadDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      zipProgress: null\n    };\n  }\n\n  componentDidMount() {\n    const { token, path, repoID, target } = this.props;\n    let getZipTask;\n    if (token) {\n      getZipTask = target.length ?\n        seafileAPI.getShareLinkDirentsZipTask(token, path, target) :\n        seafileAPI.getShareLinkZipTask(token, path);\n    } else {\n      getZipTask = seafileAPI.zipDownload(repoID, path, target);\n    }\n    getZipTask.then((res) => {\n      const zipToken = res.data['zip_token'];\n      this.setState({\n        isLoading: false,\n        errorMsg: '',\n        zipToken: zipToken\n      });\n      this.queryZipProgress();\n      interval = setInterval(this.queryZipProgress, 1000);\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  queryZipProgress = () => {\n    const zipToken = this.state.zipToken;\n    seafileAPI.queryZipProgress(zipToken).then((res) => {\n      const data = res.data;\n      if (data.failed == 1) {\n        clearInterval(interval);\n        let errorMsg;\n        switch (data.failed_reason) { // returned from seaserv\n          case 'size too large':\n            errorMsg = gettext('Failed to download. The total size of the files exceeded the limit.');\n            break;\n          case 'internal error':\n            errorMsg = gettext('Internal Server Error');\n            break;\n          default:\n            errorMsg = gettext('Error');\n        }\n        this.setState({\n          isLoading: false,\n          errorMsg: errorMsg\n        });\n      } else {\n        this.setState({\n          zipProgress: data.total == 0 ? '100%' : (data.zipped/data.total*100).toFixed(2) + '%'\n        });\n        if (data['total'] == data['zipped']) {\n          clearInterval(interval);\n          this.props.toggleDialog();\n          location.href = `${fileServerRoot}zip/${zipToken}`;\n        }\n      }\n    }).catch((error) => {\n      clearInterval(interval);\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  };\n\n  cancelZipTask = () => {\n    const zipToken = this.state.zipToken;\n    seafileAPI.cancelZipTask(zipToken).then((res) => {\n    // do nothing\n    }).catch((error) => {\n    // do nothing\n    });\n  };\n\n  toggleDialog = () => {\n    const zipProgress = this.state.zipProgress;\n    if (zipProgress && zipProgress != '100%') {\n      clearInterval(interval);\n      this.cancelZipTask();\n    }\n    this.props.toggleDialog();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggleDialog}>\n        <ModalHeader toggle={this.toggleDialog}>{gettext('Download')}</ModalHeader>\n        <ModalBody>\n          <Content data={this.state} />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  render() {\n    const {isLoading, errorMsg, zipProgress} = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return (\n        <div className=\"text-center mt-7 mb-8\">\n          <img src={`${mediaUrl}img/error-tip.png`} alt=\"\" width=\"100\" />\n          <p className=\"mt-3\">{errorMsg}</p>\n        </div>\n      );\n    }\n\n    return <p className=\"mt-4 text-center\">{`${gettext('Packaging...')} ${zipProgress}`}</p>;\n  }\n}\n\nContent.propTypes = {\n  data: PropTypes.object,\n};\n\nZipDownloadDialog.propTypes = propTypes;\n\nexport default ZipDownloadDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/modal-portal.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/save-shared-dir-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/image-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/editor-utilities.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/services/ad.js",[],["4084","4085","4086","4087","4088","4089"],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/copy-move-dirent-progress-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/file-history/main-panel.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/shared-file-view/shared-file-view-tip.js",["4090"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nconst { err, trafficOverLimit, zipped, filePath, canDownload } = window.shared.pageOptions;\n\nconst propTypes = {\n  errorMsg: PropTypes.string\n};\n\nclass SharedFileViewTip extends React.Component {\n  render() {\n    let errorMsg;\n    if (err == 'File preview unsupported') {\n      errorMsg = <p>{gettext('Online view is not applicable to this file format')}</p>;\n    } else {\n      errorMsg = <p className=\"error\">{err || this.props.errorMsg}</p>;\n    }\n\n    let isShowDownloadBtn = canDownload && !trafficOverLimit;\n\n    return (\n      <div className=\"shared-file-view-body\">\n        <div className={`file-view-tip ${!isShowDownloadBtn ? 'pt-7' : ''}`}>\n          {errorMsg}\n          {isShowDownloadBtn &&\n            <a href={`?${zipped ? 'p=' + encodeURIComponent(filePath) + '&' : ''}dl=1`} className=\"btn btn-secondary\">{gettext('Download')}</a>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nSharedFileViewTip.propTypes = propTypes;\n\nexport default SharedFileViewTip;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toolbar/common-toolbar.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/shared-file-view/shared-file-view.js",["4091","4092","4093","4094","4095","4096","4097"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport Account from '../common/account';\nimport { gettext, siteRoot, mediaUrl, logoPath, logoWidth, logoHeight, siteTitle } from '../../utils/constants';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\nimport SaveSharedFileDialog from '../dialog/save-shared-file-dialog';\nimport AddAbuseReportDialog from '../../components/dialog/add-abuse-report-dialog';\nimport toaster from '../toast';\nimport watermark from 'watermark-dom';\nimport InsertAd from '../../services/ad';\n\nimport '../../css/shared-file-view.css';\n\nconst propTypes = {\n  content: PropTypes.object.isRequired,\n  fileType: PropTypes.string\n};\n\nlet loginUser = window.app.pageOptions.name;\nlet contactEmail = window.app.pageOptions.contactEmail;\nconst { sharedToken, trafficOverLimit, fileName, fileSize, sharedBy, siteName, enableWatermark, canDownload,\n  zipped, filePath, enableShareLinkReportAbuse } = window.shared.pageOptions;\n\nclass SharedFileView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showSaveSharedFileDialog: false,\n      isAddAbuseReportDialogOpen: false\n    };\n  }\n\n  handleSaveSharedFileDialog = () => {\n    this.setState({\n      showSaveSharedFileDialog: true\n    });\n  };\n\n  toggleCancel = () => {\n    this.setState({\n      showSaveSharedFileDialog: false\n    });\n  };\n\n  handleSaveSharedFile = () => {\n    toaster.success(gettext('Successfully saved'), {\n      duration: 3\n    });\n  };\n\n  toggleAddAbuseReportDialog = () => {\n    this.setState({\n      isAddAbuseReportDialogOpen: !this.state.isAddAbuseReportDialogOpen\n    });\n  };\n\n  componentDidMount() {\n\n    const fileIcon = Utils.getFileIconUrl(fileName, 192);\n    document.getElementById('favicon').href = fileIcon;\n\n    if (trafficOverLimit) {\n      toaster.danger(gettext('File download is disabled: the share link traffic of owner is used up.'), {\n        duration: 3\n      });\n    }\n    if (!canDownload) {\n      document.addEventListener('contextmenu', function (e) {\n        e.preventDefault();\n        return false;\n      });\n      document.addEventListener('keydown', function (e) {\n        // prevent ctrl + s/p/a/c, i.e, 'save', 'print', 'select all', 'copy'\n        // metaKey: for mac\n        if ((e.ctrlKey || e.metaKey) && (e.which == 83 || e.which == 80 || e.which == 65 || e.which == 67)) {\n          e.preventDefault();\n          e.stopPropagation();\n          return false;\n        }\n      });\n    }\n  }\n\n  renderPath = () => {\n    return (\n      <React.Fragment>\n        {zipped.map((item, index) => {\n          if (index != zipped.length - 1) {\n            return (\n              <React.Fragment key={index}>\n                <a className=\"text-truncate mx-1\" href={`${siteRoot}d/${sharedToken}/?p=${encodeURIComponent(item.path)}`} title={item.name}>{item.name}</a>\n                <span> / </span>\n              </React.Fragment>\n            );\n          }\n          return null;\n        })\n        }\n        <span className=\"text-truncate ml-1\" title={zipped[zipped.length - 1].name}>{zipped[zipped.length - 1].name}</span>\n      </React.Fragment>\n    );\n  };\n\n  render() {\n    const { fileType } = this.props;\n    return (\n      <div className=\"shared-file-view-md\">\n        <div className=\"shared-file-view-md-header d-flex\">\n          <React.Fragment>\n            <a href={siteRoot}>\n              <img src={mediaUrl + logoPath} height={logoHeight} width={logoWidth} title={siteTitle} alt=\"logo\" />\n            </a>\n          </React.Fragment>\n          {loginUser && <Account />}\n        </div>\n        <div className=\"shared-file-view-md-main\">\n          <InsertAd zone='shared-file-view' category='Flat_message' center={true} />\n          <div className={`shared-file-view-head ${(fileType == 'md' || fileType == 'pdf') ? 'w-100 px-4' : ''}`}>\n            <div className=\"text-truncate\">\n              <h2 className=\"ellipsis\" title={fileName}>{fileName}</h2>\n              {zipped ?\n                <p className=\"m-0 d-flex\">{gettext('Current path: ')}{this.renderPath()}</p> :\n                <p className=\"share-by ellipsis\">{gettext('Shared by:')}{'  '}{sharedBy}</p>\n              }\n            </div>\n            <div className=\"flex-shrink-0 ml-4\">\n              {(canDownload && loginUser && (loginUser !== sharedBy)) &&\n                <Button color=\"secondary\" id=\"save\"\n                  onClick={this.handleSaveSharedFileDialog}>{gettext('Save as ...')}\n                </Button>\n              }{' '}\n              {(canDownload && !trafficOverLimit) &&\n                <a href={`?${zipped ? 'p=' + encodeURIComponent(filePath) + '&' : ''}dl=1`} className=\"btn btn-success\">{gettext('Download')} ({Utils.bytesToSize(fileSize)})</a>\n              }{' '}\n              {(enableShareLinkReportAbuse && (loginUser !== sharedBy)) &&\n                <Button\n                  onClick={this.toggleAddAbuseReportDialog}>{gettext('Report Abuse')}\n                </Button>\n              }\n            </div>\n          </div>\n          {this.props.content}\n        </div>\n        {this.state.showSaveSharedFileDialog &&\n          <SaveSharedFileDialog\n            sharedToken={sharedToken}\n            filePath={zipped ? filePath : ''}\n            toggleCancel={this.toggleCancel}\n            handleSaveSharedFile={this.handleSaveSharedFile}\n          />\n        }\n        {(this.state.isAddAbuseReportDialogOpen && enableShareLinkReportAbuse) &&\n          <AddAbuseReportDialog\n            sharedToken={sharedToken}\n            filePath={filePath}\n            toggleAddAbuseReportDialog={this.toggleAddAbuseReportDialog}\n            isAddAbuseReportDialogOpen={this.state.isAddAbuseReportDialogOpen}\n            contactEmail={contactEmail}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nif (enableWatermark) {\n  let watermark_txt;\n  if (loginUser) {\n    watermark_txt = siteName + ' ' + loginUser;\n  } else if (sharedBy) {\n    watermark_txt = siteName + ' ' + sharedBy;\n  } else {\n    watermark_txt = gettext('Anonymous User');\n  }\n  watermark.init({\n    watermark_txt: watermark_txt,\n    watermark_alpha: 0.075\n  });\n}\n\nSharedFileView.propTypes = propTypes;\n\nexport default SharedFileView;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/file-history-old/history-item.js",["4098","4099"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, filePath, historyRepoID } from '../../utils/constants';\nimport URLDecorator from '../../utils/url-decorator';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\n\nmoment.locale(window.app.config.lang);\n\nconst propTypes = {\n  item: PropTypes.object.isRequired,\n  index: PropTypes.number.isRequired,\n  canDownload: PropTypes.bool.isRequired,\n  canCompare: PropTypes.bool.isRequired,\n  onItemRestore: PropTypes.func.isRequired,\n  snapshotURL: PropTypes.string.isRequired,\n};\n\nclass HistoryItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      active: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      active: true\n    });\n  };\n\n  onMouseLeave = () => {\n    this.setState({\n      active: false\n    });\n  };\n\n  onItemRestore = (e) => {\n    e.preventDefault();\n    this.props.onItemRestore(this.props.item);\n  };\n\n  render() {\n    let item = this.props.item;\n    let downloadUrl = URLDecorator.getUrl({type: 'download_historic_file', filePath: filePath, objID: item.rev_file_id});\n    let userProfileURL = `${siteRoot}profile/${encodeURIComponent(item.creator_email)}/`;\n    let viewUrl = `${siteRoot}repo/${historyRepoID}/history/files/?obj_id=${item.rev_file_id}&commit_id=${item.commit_id}&p=${Utils.encodePath(filePath)}`;\n    let diffUrl = `${siteRoot}repo/text_diff/${historyRepoID}/?commit=${item.commit_id}&p=${Utils.encodePath(filePath)}`;\n    const snapshotURL = `${siteRoot}repo/${historyRepoID}/snapshot/?commit_id=${item.commit_id}`;\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} className={this.state.active ? 'tr-highlight' : ''}>\n          <td>\n            <span>{moment(item.ctime).format('YYYY-MM-DD HH:mm:ss')}</span>\n            {this.props.index === 0 && <span className=\"ml-1\">{gettext('(current version)')}</span>}\n          </td>\n          <td>\n            <img className=\"avatar\" src={item.creator_avatar_url} alt=''></img>{' '}\n            <a href={userProfileURL} target='_blank' className=\"username\" rel=\"noreferrer\">{item.creator_name}</a>\n          </td>\n          <td>{Utils.bytesToSize(item.size)}</td>\n          <td>\n            {this.state.active &&\n              <MoreMenu\n                index={this.props.index}\n                downloadUrl={downloadUrl}\n                viewUrl={viewUrl}\n                diffUrl={diffUrl}\n                snapshotURL={snapshotURL}\n                onItemRestore={this.onItemRestore}\n                canDownload={this.props.canDownload}\n                canCompare={this.props.canCompare}\n              />\n            }\n          </td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\nHistoryItem.propTypes = propTypes;\n\n\nconst MoreMenuPropTypes = {\n  index: PropTypes.number.isRequired,\n  downloadUrl: PropTypes.string.isRequired,\n  viewUrl: PropTypes.string.isRequired,\n  diffUrl: PropTypes.string.isRequired,\n  onItemRestore: PropTypes.func.isRequired,\n  canDownload: PropTypes.bool.isRequired,\n  canCompare: PropTypes.bool.isRequired,\n  snapshotURL: PropTypes.string.isRequired,\n};\n\nclass MoreMenu extends React.PureComponent {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      dropdownOpen: false\n    };\n  }\n\n  dropdownToggle = () => {\n    this.setState({ dropdownOpen: !this.state.dropdownOpen });\n  };\n\n  render() {\n    const { index, downloadUrl, viewUrl, snapshotURL, onItemRestore, canDownload } = this.props;\n    return (\n      <Dropdown isOpen={this.state.dropdownOpen} toggle={this.dropdownToggle} direction=\"down\" className=\"mx-1 old-history-more-operation\">\n        <DropdownToggle\n          tag='i'\n          className='fa fa-ellipsis-v'\n          title={gettext('More operations')}\n          aria-label={gettext('More operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.dropdownOpen}\n        >\n        </DropdownToggle>\n        <DropdownMenu className=\"drop-list\" right={true}>\n          {index !== 0 && <a href=\"#\" onClick={onItemRestore}><DropdownItem>{gettext('Restore')}</DropdownItem></a>}\n          {canDownload && <a href={downloadUrl}><DropdownItem>{gettext('Download')}</DropdownItem></a>}\n          <a href={viewUrl}><DropdownItem>{gettext('View')}</DropdownItem></a>\n          {/*canCompare && <a href={diffUrl}><DropdownItem>{gettext('Diff')}</DropdownItem></a>*/}\n          {index != 0 && <DropdownItem tag=\"a\" href={snapshotURL} target=\"_blank\">{gettext('View Related Snapshot')}</DropdownItem>}\n        </DropdownMenu>\n      </Dropdown>\n    );\n  }\n}\n\nMoreMenu.propTypes = MoreMenuPropTypes;\n\nexport default HistoryItem;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/markdown-editor/index.js",["4100"],[],"import React, { Fragment } from 'react';\nimport io from 'socket.io-client';\nimport {\n  EXTERNAL_EVENTS,\n  EventBus,\n  MarkdownEditor as SeafileMarkdownEditor,\n  MarkdownViewer as SeafileMarkdownViewer,\n} from '@seafile/seafile-editor';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, mediaUrl } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport InsertFileDialog from '../../components/dialog/insert-file-dialog';\nimport HeaderToolbar from './header-toolbar';\nimport editorApi from './editor-api';\nimport DetailListView from './detail-list-view';\n\nimport './css/markdown-editor.css';\n\nconst CryptoJS = require('crypto-js');\nconst URL = require('url-parse');\n\nconst { repoID, filePath, fileName, isLocked, lockedByMe } = window.app.pageOptions;\nconst { siteRoot, serviceUrl, seafileCollabServer } = window.app.config;\nconst userInfo = window.app.userInfo;\nconst IMAGE_SUFFIXES = ['png', 'PNG', 'jpg', 'JPG', 'jpeg', 'JPEG', 'gif', 'GIF'];\n\nclass MarkdownEditor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      markdownContent: '',\n      loading: true,\n      mode: 'editor',\n      fileInfo: {\n        repoID: repoID,\n        name: fileName,\n        path: filePath,\n        mtime: null,\n        size: 0,\n        starred: false,\n        permission: '',\n        lastModifier: '',\n        id: '',\n      },\n      editorMode: 'rich',\n      collabServer: seafileCollabServer ? seafileCollabServer : null,\n      showMarkdownEditorDialog: false,\n      showShareLinkDialog: false,\n      showInsertFileDialog: false,\n      collabUsers: userInfo ?\n        [{user: userInfo, is_editing: false}] : [],\n      value: null,\n      isShowHistory: false,\n      readOnly: true,\n      contentChanged: false,\n      saving: false,\n      isLocked: isLocked,\n      lockedByMe: lockedByMe,\n      fileTagList: [],\n      participants: [],\n    };\n\n    this.timer = null;\n\n    if (this.state.collabServer) {\n      const socket = io(this.state.collabServer);\n      this.socket = socket;\n      socket.on('presence', (data) => this.receivePresenceData(data));\n      socket.on('repo_update', (data) => this.receiveUpdateData(data));\n      socket.on('connect', () => {\n        this.socket_id = socket.id;\n      });\n    }\n    this.editorRef = React.createRef();\n    this.isParticipant = false;\n    this.editorSelection = null;\n  }\n\n  toggleLockFile = () => {\n    const { repoID, path } = this.state.fileInfo;\n    if (this.state.isLocked) {\n      seafileAPI.unlockfile(repoID, path).then((res) => {\n        this.setState({ isLocked: false, lockedByMe: false });\n      });\n    } else {\n      seafileAPI.lockfile(repoID, path).then((res) => {\n        this.setState({ isLocked: true, lockedByMe: true });\n      });\n    }\n  };\n\n  emitSwitchEditor = (is_editing=false) => {\n    if (userInfo && this.state.collabServer) {\n      const { repoID, path } = this.state.fileInfo;\n      this.socket.emit('presence', {\n        request: 'editing',\n        doc_id: CryptoJS.MD5(repoID+path).toString(),\n        user: userInfo,\n        is_editing,\n      });\n    }\n  };\n\n  receiveUpdateData (data) {\n    let currentTime = new Date();\n    if ((parseFloat(currentTime - this.lastModifyTime)/1000) <= 5) {\n      return;\n    }\n    editorApi.fileMetaData().then((res) => {\n      if (res.data.id !== this.state.fileInfo.id) {\n        toaster.notify(\n          <span>\n            {gettext('This file has been updated.')}\n            <a href='' >{' '}{gettext('Refresh')}</a>\n          </span>,\n          {id: 'repo_updated', duration: 3600});\n      }\n    });\n  }\n\n\n  receivePresenceData(data) {\n    let collabUsers = [];\n    let editingUsers = [];\n    switch(data.response) {\n      case 'user_join':\n        toaster.notify(`user ${data.user.name} joined`, {\n          duration: 3\n        });\n        return;\n\n      case 'user_left':\n        toaster.notify(`user ${data.user.name} left`, {\n          duration: 3\n        });\n        return;\n      case 'update_users':\n        for (var prop in data.users) {\n          if (Object.prototype.hasOwnProperty.call(data.users, prop)) {\n            if (prop === this.socket_id) {\n              data.users[prop]['myself'] = true;\n              break;\n            }\n          }\n        }\n        collabUsers = Object.values(data.users);\n        editingUsers = collabUsers.filter(ele => ele.is_editing === true && ele.myself === undefined);\n        if (editingUsers.length > 0) {\n          const message = gettext('Another user is editing this file!');\n          toaster.danger(message, {duration: 3});\n        }\n        this.setState({ collabUsers });\n        return;\n      case 'user_editing':\n        toaster.danger(`user ${data.user.name} is editing this file!`, {\n          duration: 3\n        });\n        return;\n      default:\n        // eslint-disable-next-line\n        console.log('unknown response type: ' + data.response);\n        return;\n    }\n  }\n\n  toggleCancel = () => {\n    this.setState({\n      showMarkdownEditorDialog: false,\n      showShareLinkDialog: false,\n      showInsertFileDialog: false,\n    });\n  };\n\n  setEditorMode = (editorMode) => { // rich | plain\n    const { origin, pathname } = window.location;\n    window.location.href = origin + pathname + '?mode=plain';\n  };\n\n  clearTimer = () => {\n    clearTimeout(this.timer);\n    this.timer = null;\n  };\n\n  openDialogs = (option) => {\n    switch (option) {\n      case 'share_link':\n        this.setState({\n          showMarkdownEditorDialog: true,\n          showShareLinkDialog: true,\n        });\n        break;\n      case 'insert_file':\n        this.setState({\n          showMarkdownEditorDialog: true,\n          showInsertFileDialog: true,\n        });\n        break;\n      default:\n        return;\n    }\n  };\n\n  async componentDidMount() {\n\n    const fileIcon = Utils.getFileIconUrl(fileName, 192);\n    document.getElementById('favicon').href = fileIcon;\n\n    // get file info\n    const fileInfoRes = await seafileAPI.getFileInfo(repoID, filePath);\n    const { mtime, size, starred, permission, last_modifier_name, id } = fileInfoRes.data;\n    const lastModifier = last_modifier_name;\n\n    // get file download url\n    const fileDownloadUrlRes = await seafileAPI.getFileDownloadLink(repoID, filePath);\n    const downloadUrl = fileDownloadUrlRes.data;\n\n    // get file content\n    const fileContentRes = await seafileAPI.getFileContent(downloadUrl);\n    const markdownContent = fileContentRes.data;\n\n    // init permission\n    let hasPermission = permission === 'rw' || permission === 'cloud-edit';\n\n    // get custom permission\n    if (permission.startsWith('custom-')) {\n      const permissionID = permission.split('-')[1];\n      const customPermissionRes = await seafileAPI.getCustomPermission(repoID, permissionID);\n      const customPermission = customPermissionRes.data.permission;\n      const { modify: canModify } = customPermission.permission;\n      hasPermission = canModify ? true : hasPermission;\n    }\n\n    // Goto rich edit page\n    // First, the user has the relevant permissions, otherwise he can only enter the viewer interface or cannot access\n    const { fileInfo } = this.state;\n    this.setState({\n      loading: false,\n      fileInfo: {...fileInfo, mtime, size, starred, permission, lastModifier, id},\n      markdownContent,\n      value: '',\n      readOnly: !hasPermission,\n    });\n\n    if (userInfo && this.socket) {\n      const { repoID, path } = this.state.fileInfo;\n      this.socket.emit('presence', {\n        request: 'join_room',\n        doc_id: CryptoJS.MD5(repoID+path).toString(),\n        user: userInfo\n      });\n\n      this.socket.emit('repo_update', {\n        request: 'watch_update',\n        repo_id: editorApi.repoID,\n        user: {\n          name: editorApi.name,\n          username: editorApi.username,\n          contact_email: editorApi.contact_email,\n        },\n      });\n    }\n    this.listFileTags();\n\n    this.listFileParticipants();\n    window.showParticipants = true;\n    setTimeout(() => {\n      let url = new URL(window.location.href);\n      if (url.hash) {\n        window.location.href = url;\n      }\n    }, 100);\n    window.addEventListener('beforeunload', this.onUnload);\n    const eventBus = EventBus.getInstance();\n    this.unsubscribeInsertSeafileImage = eventBus.subscribe(EXTERNAL_EVENTS.ON_INSERT_IMAGE, this.onInsertImageToggle);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('beforeunload', this.onUnload);\n    this.unsubscribeInsertSeafileImage();\n    if (!this.socket) return;\n    this.socket.emit('repo_update', {\n      request: 'unwatch_update',\n      repo_id: editorApi.repoID,\n      user: {\n        name: editorApi.name,\n        username: editorApi.username,\n        contact_email: editorApi.contact_email,\n      },\n    });\n  }\n\n  onUnload = (event) => {\n    const { contentChanged } = this.state;\n    if (!contentChanged) return;\n    this.clearTimer();\n\n    const confirmationMessage = gettext('Leave this page? The system may not save your changes.');\n    event.returnValue = confirmationMessage;\n    return confirmationMessage;\n  };\n\n  listFileTags = () => {\n    seafileAPI.listFileTags(repoID, filePath).then(res => {\n      let fileTagList = res.data.file_tags;\n      for (let i = 0; i < fileTagList.length; i++) {\n        fileTagList[i].id = fileTagList[i].file_tag_id;\n      }\n      this.setState({ fileTagList: fileTagList });\n    });\n  };\n\n  onFileTagChanged = () => {\n    this.listFileTags();\n  };\n\n  listFileParticipants = () => {\n    editorApi.listFileParticipant().then((res) => {\n      this.setState({ participants: res.data.participant_list });\n    });\n  };\n\n  onParticipantsChange = () => {\n    this.listFileParticipants();\n  };\n\n  setFileInfoMtime = (fileInfo) => {\n    const { fileInfo: oldFileInfo } = this.state;\n    const newFileInfo = Object.assign({}, oldFileInfo, { mtime: fileInfo.mtime, id: fileInfo.id, lastModifier: fileInfo.last_modifier_name });\n    this.setState({fileInfo: newFileInfo});\n  };\n\n  toggleStar = () => {\n    const { fileInfo } = this.state;\n    const { starred } = fileInfo;\n    const newFileInfo = Object.assign({}, fileInfo, {starred: !starred});\n    if (starred) {\n      editorApi.unstarItem().then((response) => {\n        this.setState({fileInfo: newFileInfo});\n      });\n      return;\n    }\n\n    editorApi.starItem().then((response) => {\n      this.setState({fileInfo: newFileInfo});\n    });\n  };\n\n  toggleShareLinkDialog = () => {\n    this.openDialogs('share_link');\n  };\n\n  onInsertImageToggle = (selection) => {\n    this.editorSelection = selection;\n    this.openDialogs('insert_file');\n  };\n\n  toggleHistory = () => {\n    window.location.href = siteRoot + 'repo/file_revisions/' + repoID + '/?p=' + Utils.encodePath(filePath);\n  };\n\n  getInsertLink = (repoID, filePath) => {\n    const selection = this.editorSelection;\n    const fileName = Utils.getFileName(filePath);\n    const suffix = fileName.slice(fileName.indexOf('.') + 1);\n    const eventBus = EventBus.getInstance();\n    if (IMAGE_SUFFIXES.includes(suffix)) {\n      let innerURL = serviceUrl + '/lib/' + repoID + '/file' + Utils.encodePath(filePath) + '?raw=1';\n      eventBus.dispatch(EXTERNAL_EVENTS.INSERT_IMAGE, { title: fileName, url: innerURL, isImage: true, selection });\n      return;\n    }\n    let innerURL = serviceUrl + '/lib/' + repoID + '/file' + Utils.encodePath(filePath);\n    eventBus.dispatch(EXTERNAL_EVENTS.INSERT_IMAGE, { title: fileName, url: innerURL, selection});\n  };\n\n  addParticipants = () => {\n    if (this.isParticipant || !window.showParticipants) return;\n    const { userName } = editorApi;\n    const { participants } = this.state;\n    if (participants && participants.length !== 0) {\n      const isParticipant = participants.some((participant) => {\n        return participant.email === userName;\n      });\n      if (isParticipant) return;\n    }\n\n    const emails = [userName];\n    editorApi.addFileParticipants(emails).then((res) => {\n      this.isParticipant = true;\n      this.listFileParticipants();\n    });\n  };\n\n  onContentChanged = () => {\n    this.setState({ contentChanged: true });\n  };\n\n  onSaveEditorContent = () => {\n    this.setState({ saving: true });\n    const content = this.editorRef.current.getValue();\n    editorApi.saveContent(content).then(() => {\n      this.setState({\n        saving: false,\n        contentChanged: false,\n      });\n\n      this.lastModifyTime = new Date();\n      const message = gettext('Successfully saved');\n      toaster.success(message, {duration: 2,});\n\n      editorApi.getFileInfo().then((res) => {\n        this.setFileInfoMtime(res.data);\n      });\n\n      this.addParticipants();\n    }, () => {\n      this.setState({ saving: false });\n      const message = gettext('Failed to save');\n      toaster.danger(message, {duration: 2});\n    });\n  };\n\n  getFileName = (fileName) => {\n    return fileName.substring(0, fileName.lastIndexOf('.'));\n  };\n\n  render() {\n    const { loading, markdownContent, fileInfo, fileTagList, isLocked } = this.state;\n\n    return (\n      <Fragment>\n        <HeaderToolbar\n          editorApi={editorApi}\n          collabUsers={this.state.collabUsers}\n          fileInfo={this.state.fileInfo}\n          toggleStar={this.toggleStar}\n          openDialogs={this.openDialogs}\n          toggleShareLinkDialog={this.toggleShareLinkDialog}\n          onEdit={this.setEditorMode}\n          showFileHistory={this.state.isShowHistory ? false : true }\n          toggleHistory={this.toggleHistory}\n          readOnly={this.state.readOnly}\n          editorMode={this.state.editorMode}\n          contentChanged={this.state.contentChanged}\n          saving={this.state.saving}\n          onSaveEditorContent={this.onSaveEditorContent}\n          isLocked={this.state.isLocked}\n          lockedByMe={this.state.lockedByMe}\n          toggleLockFile={this.toggleLockFile}\n        />\n        <div className='sf-md-viewer-content'>\n          {!isLocked && (\n            <SeafileMarkdownEditor\n              ref={this.editorRef}\n              isFetching={loading}\n              initValue={this.getFileName(fileName)}\n              value={markdownContent}\n              editorApi={editorApi}\n              onSave={this.onSaveEditorContent}\n              onContentChanged={this.onContentChanged}\n              mathJaxSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n              isSupportInsertSeafileImage={true}\n            >\n              <DetailListView fileInfo={fileInfo} fileTagList={fileTagList} onFileTagChanged={this.onFileTagChanged}/>\n            </SeafileMarkdownEditor>\n          )}\n          {isLocked && (\n            <SeafileMarkdownViewer\n              isFetching={loading}\n              value={markdownContent}\n              mathJaxSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n              isSupportInsertSeafileImage={true}\n              isShowOutline={true}\n            >\n            </SeafileMarkdownViewer>\n          )}\n        </div>\n        {this.state.showMarkdownEditorDialog && (\n          <React.Fragment>\n            {this.state.showInsertFileDialog &&\n              <InsertFileDialog\n                repoID={repoID}\n                filePath={filePath}\n                toggleCancel={this.toggleCancel}\n                getInsertLink={this.getInsertLink}\n              />\n            }\n            {this.state.showShareLinkDialog &&\n              <ShareDialog\n                itemType=\"file\"\n                itemName={this.state.fileInfo.name}\n                itemPath={filePath}\n                repoID={repoID}\n                toggleDialog={this.toggleCancel}\n                isGroupOwnedRepo={false}\n                repoEncrypted={false}\n              />\n            }\n          </React.Fragment>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nexport default  MarkdownEditor;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/file-history/side-panel.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/audio-player.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/upload-link/file-uploader.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toast/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/pdf-viewer.js",["4101"],[],"import React from 'react';\nimport { gettext } from '../utils/constants';\n\nclass PDFViewer extends React.Component {\n\n  componentDidMount() {\n    const el = document.createElement('div');\n    el.id = 'printContainer';\n    document.body.append(el);\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <div id=\"outerContainer\">\n\n          <div id=\"sidebarContainer\">\n            <div id=\"toolbarSidebar\">\n              <div id=\"thumbnails-header\" className=\"p-4 d-flex justify-content-between\">\n                <h3 className=\"m-0 title font-weight-normal\">{gettext('Thumbnail')}</h3>\n                <button id=\"close-thumbnail-panel\" className=\"close-thumbnail-panel sf2-icon-x3 border-0 bg-transparent\" aria-controls=\"sidebarContainer\"></button>\n              </div>\n              <div id=\"toolbarSidebarLeft\" className=\"sf-hide\">\n                <div id=\"sidebarViewButtons\" className=\"splitToolbarButton toggled\" role=\"radiogroup\">\n                  <button id=\"viewThumbnail\" className=\"toolbarButton toggled\" title=\"Show Thumbnails\" tabIndex=\"2\" data-l10n-id=\"thumbs\" role=\"radio\" aria-checked=\"true\" aria-controls=\"thumbnailView\">\n                    <span data-l10n-id=\"thumbs_label\">Thumbnails</span>\n                  </button>\n                  <button id=\"viewOutline\" className=\"toolbarButton\" title=\"Show Document Outline (double-click to expand/collapse all items)\" tabIndex=\"3\" data-l10n-id=\"document_outline\" role=\"radio\" aria-checked=\"false\" aria-controls=\"outlineView\">\n                    <span data-l10n-id=\"document_outline_label\">Document Outline</span>\n                  </button>\n                  <button id=\"viewAttachments\" className=\"toolbarButton\" title=\"Show Attachments\" tabIndex=\"4\" data-l10n-id=\"attachments\" role=\"radio\" aria-checked=\"false\" aria-controls=\"attachmentsView\">\n                    <span data-l10n-id=\"attachments_label\">Attachments</span>\n                  </button>\n                  <button id=\"viewLayers\" className=\"toolbarButton\" title=\"Show Layers (double-click to reset all layers to the default state)\" tabIndex=\"5\" data-l10n-id=\"layers\" role=\"radio\" aria-checked=\"false\" aria-controls=\"layersView\">\n                    <span data-l10n-id=\"layers_label\">Layers</span>\n                  </button>\n                </div>\n              </div>\n\n              <div id=\"toolbarSidebarRight\">\n                <div id=\"outlineOptionsContainer\" className=\"hidden\">\n                  <div className=\"verticalToolbarSeparator\"></div>\n\n                  <button id=\"currentOutlineItem\" className=\"toolbarButton\" disabled=\"disabled\" title=\"Find Current Outline Item\" tabIndex=\"6\" data-l10n-id=\"current_outline_item\">\n                    <span data-l10n-id=\"current_outline_item_label\">Current Outline Item</span>\n                  </button>\n                </div>\n              </div>\n            </div>\n            <div id=\"sidebarContent\">\n              <div id=\"thumbnailView\">\n              </div>\n              <div id=\"outlineView\" className=\"hidden\">\n              </div>\n              <div id=\"attachmentsView\" className=\"hidden\">\n              </div>\n              <div id=\"layersView\" className=\"hidden\">\n              </div>\n            </div>\n            <div id=\"sidebarResizer\"></div>\n          </div>\n          {/*<!-- sidebarContainer -->*/}\n\n          <div id=\"mainContainer\">\n            <div className=\"findbar hidden doorHanger\" id=\"findbar\">\n              <div id=\"findbarInputContainer\">\n                <input id=\"findInput\" className=\"toolbarField\" title=\"Find\" placeholder=\"Find in document\" tabIndex=\"91\" data-l10n-id=\"find_input\" aria-invalid=\"false\" />\n                <div className=\"splitToolbarButton\">\n                  <button id=\"findPrevious\" className=\"toolbarButton\" title=\"Find the previous occurrence of the phrase\" tabIndex=\"92\" data-l10n-id=\"find_previous\">\n                    <span data-l10n-id=\"find_previous_label\">Previous</span>\n                  </button>\n                  <div className=\"splitToolbarButtonSeparator\"></div>\n                  <button id=\"findNext\" className=\"toolbarButton\" title=\"Find the next occurrence of the phrase\" tabIndex=\"93\" data-l10n-id=\"find_next\">\n                    <span data-l10n-id=\"find_next_label\">Next</span>\n                  </button>\n                </div>\n              </div>\n\n              <div id=\"findbarOptionsOneContainer\">\n                <input type=\"checkbox\" id=\"findHighlightAll\" className=\"toolbarField\" tabIndex=\"94\" />\n                <label htmlFor=\"findHighlightAll\" className=\"toolbarLabel\" data-l10n-id=\"find_highlight\">Highlight All</label>\n                <input type=\"checkbox\" id=\"findMatchCase\" className=\"toolbarField\" tabIndex=\"95\" />\n                <label htmlFor=\"findMatchCase\" className=\"toolbarLabel\" data-l10n-id=\"find_match_case_label\">Match Case</label>\n              </div>\n              <div id=\"findbarOptionsTwoContainer\">\n                <input type=\"checkbox\" id=\"findMatchDiacritics\" className=\"toolbarField\" tabIndex=\"96\" />\n                <label htmlFor=\"findMatchDiacritics\" className=\"toolbarLabel\" data-l10n-id=\"find_match_diacritics_label\">Match Diacritics</label>\n                <input type=\"checkbox\" id=\"findEntireWord\" className=\"toolbarField\" tabIndex=\"97\" />\n                <label htmlFor=\"findEntireWord\" className=\"toolbarLabel\" data-l10n-id=\"find_entire_word_label\">Whole Words</label>\n              </div>\n\n              <div id=\"findbarMessageContainer\" aria-live=\"polite\">\n                <span id=\"findResultsCount\" className=\"toolbarLabel\"></span>\n                <span id=\"findMsg\" className=\"toolbarLabel\"></span>\n              </div>\n            </div>\n            {/*<!-- findbar -->*/}\n\n            <div className=\"editorParamsToolbar hidden doorHangerRight\" id=\"editorFreeTextParamsToolbar\">\n              <div className=\"editorParamsToolbarContainer\">\n                <div className=\"editorParamsSetter\">\n                  <label htmlFor=\"editorFreeTextColor\" className=\"editorParamsLabel\" data-l10n-id=\"editor_free_text_color\">Color</label>\n                  <input type=\"color\" id=\"editorFreeTextColor\" className=\"editorParamsColor\" tabIndex=\"100\" />\n                </div>\n                <div className=\"editorParamsSetter\">\n                  <label htmlFor=\"editorFreeTextFontSize\" className=\"editorParamsLabel\" data-l10n-id=\"editor_free_text_size\">Size</label>\n                  <input type=\"range\" id=\"editorFreeTextFontSize\" className=\"editorParamsSlider\" defaultValue=\"10\" min=\"5\" max=\"100\" step=\"1\" tabIndex=\"101\" />\n                </div>\n              </div>\n            </div>\n\n            <div className=\"editorParamsToolbar hidden doorHangerRight\" id=\"editorInkParamsToolbar\">\n              <div className=\"editorParamsToolbarContainer\">\n                <div className=\"editorParamsSetter\">\n                  <label htmlFor=\"editorInkColor\" className=\"editorParamsLabel\" data-l10n-id=\"editor_ink_color\">Color</label>\n                  <input type=\"color\" id=\"editorInkColor\" className=\"editorParamsColor\" tabIndex=\"102\" />\n                </div>\n                <div className=\"editorParamsSetter\">\n                  <label htmlFor=\"editorInkThickness\" className=\"editorParamsLabel\" data-l10n-id=\"editor_ink_thickness\">Thickness</label>\n                  <input type=\"range\" id=\"editorInkThickness\" className=\"editorParamsSlider\" defaultValue=\"1\" min=\"1\" max=\"20\" step=\"1\" tabIndex=\"103\" />\n                </div>\n                <div className=\"editorParamsSetter\">\n                  <label htmlFor=\"editorInkOpacity\" className=\"editorParamsLabel\" data-l10n-id=\"editor_ink_opacity\">Opacity</label>\n                  <input type=\"range\" id=\"editorInkOpacity\" className=\"editorParamsSlider\" defaultValue=\"100\" min=\"1\" max=\"100\" step=\"1\" tabIndex=\"104\" />\n                </div>\n              </div>\n            </div>\n\n            <div id=\"secondaryToolbar\" className=\"secondaryToolbar hidden doorHangerRight\">\n              <div id=\"secondaryToolbarButtonContainer\">\n                <button id=\"secondaryOpenFile\" className=\"secondaryToolbarButton visibleLargeView\" title=\"Open File\" tabIndex=\"51\" data-l10n-id=\"open_file\">\n                  <span data-l10n-id=\"open_file_label\">Open</span>\n                </button>\n\n                <button id=\"secondaryPrint\" className=\"secondaryToolbarButton visibleMediumView\" title=\"Print\" tabIndex=\"52\" data-l10n-id=\"print\">\n                  <span data-l10n-id=\"print_label\">Print</span>\n                </button>\n\n                <button id=\"secondaryDownload\" className=\"secondaryToolbarButton visibleMediumView\" title=\"Save\" tabIndex=\"53\" data-l10n-id=\"save\">\n                  <span data-l10n-id=\"save_label\">Save</span>\n                </button>\n\n                <div className=\"horizontalToolbarSeparator visibleLargeView\"></div>\n\n                <button id=\"presentationMode\" className=\"secondaryToolbarButton\" title=\"Switch to Presentation Mode\" tabIndex=\"54\" data-l10n-id=\"presentation_mode\">\n                  <span data-l10n-id=\"presentation_mode_label\">Presentation Mode</span>\n                </button>\n\n                <a href=\"#\" id=\"viewBookmark\" className=\"secondaryToolbarButton\" title=\"Current Page (View URL from Current Page)\" tabIndex=\"55\" data-l10n-id=\"bookmark1\">\n                  <span data-l10n-id=\"bookmark1_label\">Current Page</span>\n                </a>\n\n                <div id=\"viewBookmarkSeparator\" className=\"horizontalToolbarSeparator\"></div>\n                {/*\n                <button id=\"firstPage\" className=\"secondaryToolbarButton\" title=\"Go to First Page\" tabIndex=\"56\" data-l10n-id=\"first_page\">\n                  <span data-l10n-id=\"first_page_label\">Go to First Page</span>\n                </button>\n                <button id=\"lastPage\" className=\"secondaryToolbarButton\" title=\"Go to Last Page\" tabIndex=\"57\" data-l10n-id=\"last_page\">\n                  <span data-l10n-id=\"last_page_label\">Go to Last Page</span>\n                </button>\n                */}\n\n                <div className=\"horizontalToolbarSeparator\"></div>\n\n                <button id=\"pageRotateCw\" className=\"secondaryToolbarButton\" title=\"Rotate Clockwise\" tabIndex=\"58\" data-l10n-id=\"page_rotate_cw\">\n                  <span data-l10n-id=\"page_rotate_cw_label\">Rotate Clockwise</span>\n                </button>\n                <button id=\"pageRotateCcw\" className=\"secondaryToolbarButton\" title=\"Rotate Counterclockwise\" tabIndex=\"59\" data-l10n-id=\"page_rotate_ccw\">\n                  <span data-l10n-id=\"page_rotate_ccw_label\">Rotate Counterclockwise</span>\n                </button>\n\n                <div className=\"horizontalToolbarSeparator\"></div>\n\n                <div id=\"cursorToolButtons\" role=\"radiogroup\">\n                  <button id=\"cursorSelectTool\" className=\"secondaryToolbarButton toggled\" title=\"Enable Text Selection Tool\" tabIndex=\"60\" data-l10n-id=\"cursor_text_select_tool\" role=\"radio\" aria-checked=\"true\">\n                    <span data-l10n-id=\"cursor_text_select_tool_label\">Text Selection Tool</span>\n                  </button>\n                  <button id=\"cursorHandTool\" className=\"secondaryToolbarButton\" title=\"Enable Hand Tool\" tabIndex=\"61\" data-l10n-id=\"cursor_hand_tool\" role=\"radio\" aria-checked=\"false\">\n                    <span data-l10n-id=\"cursor_hand_tool_label\">Hand Tool</span>\n                  </button>\n                </div>\n\n                <div className=\"horizontalToolbarSeparator\"></div>\n\n                <div id=\"scrollModeButtons\" role=\"radiogroup\">\n                  <button id=\"scrollPage\" className=\"secondaryToolbarButton\" title=\"Use Page Scrolling\" tabIndex=\"62\" data-l10n-id=\"scroll_page\" role=\"radio\" aria-checked=\"false\">\n                    <span data-l10n-id=\"scroll_page_label\">Page Scrolling</span>\n                  </button>\n                  <button id=\"scrollVertical\" className=\"secondaryToolbarButton toggled\" title=\"Use Vertical Scrolling\" tabIndex=\"63\" data-l10n-id=\"scroll_vertical\" role=\"radio\" aria-checked=\"true\">\n                    <span data-l10n-id=\"scroll_vertical_label\" >Vertical Scrolling</span>\n                  </button>\n                  <button id=\"scrollHorizontal\" className=\"secondaryToolbarButton\" title=\"Use Horizontal Scrolling\" tabIndex=\"64\" data-l10n-id=\"scroll_horizontal\" role=\"radio\" aria-checked=\"false\">\n                    <span data-l10n-id=\"scroll_horizontal_label\">Horizontal Scrolling</span>\n                  </button>\n                  <button id=\"scrollWrapped\" className=\"secondaryToolbarButton\" title=\"Use Wrapped Scrolling\" tabIndex=\"65\" data-l10n-id=\"scroll_wrapped\" role=\"radio\" aria-checked=\"false\">\n                    <span data-l10n-id=\"scroll_wrapped_label\">Wrapped Scrolling</span>\n                  </button>\n                </div>\n\n                <div className=\"horizontalToolbarSeparator\"></div>\n\n                <div id=\"spreadModeButtons\" role=\"radiogroup\">\n                  <button id=\"spreadNone\" className=\"secondaryToolbarButton toggled\" title=\"Do not join page spreads\" tabIndex=\"66\" data-l10n-id=\"spread_none\" role=\"radio\" aria-checked=\"true\">\n                    <span data-l10n-id=\"spread_none_label\">No Spreads</span>\n                  </button>\n                  <button id=\"spreadOdd\" className=\"secondaryToolbarButton\" title=\"Join page spreads starting with odd-numbered pages\" tabIndex=\"67\" data-l10n-id=\"spread_odd\" role=\"radio\" aria-checked=\"false\">\n                    <span data-l10n-id=\"spread_odd_label\">Odd Spreads</span>\n                  </button>\n                  <button id=\"spreadEven\" className=\"secondaryToolbarButton\" title=\"Join page spreads starting with even-numbered pages\" tabIndex=\"68\" data-l10n-id=\"spread_even\" role=\"radio\" aria-checked=\"false\">\n                    <span data-l10n-id=\"spread_even_label\">Even Spreads</span>\n                  </button>\n                </div>\n\n                <div className=\"horizontalToolbarSeparator\"></div>\n\n                <button id=\"documentProperties\" className=\"secondaryToolbarButton\" title=\"Document Properties\" tabIndex=\"69\" data-l10n-id=\"document_properties\" aria-controls=\"documentPropertiesDialog\">\n                  <span data-l10n-id=\"document_properties_label\">Document Properties</span>\n                </button>\n              </div>\n            </div>\n            {/*<!-- secondaryToolbar -->*/}\n\n            <div className=\"toolbar\">\n              <div id=\"toolbarContainer\">\n                <div id=\"toolbarViewer\">\n                  <div id=\"toolbarViewerLeft\">\n                    <button id=\"sidebarToggle\" className=\"toolbarButton\" title=\"Toggle Sidebar\" tabIndex=\"11\" data-l10n-id=\"toggle_sidebar\" aria-expanded=\"false\" aria-controls=\"sidebarContainer\">\n                      <span data-l10n-id=\"toggle_sidebar_label\">Toggle Sidebar</span>\n                    </button>\n                    <div className=\"toolbarButtonSpacer d-none\"></div>\n                    <button id=\"viewFind\" className=\"toolbarButton d-none\" title=\"Find in Document\" tabIndex=\"12\" data-l10n-id=\"findbar\" aria-expanded=\"false\" aria-controls=\"findbar\">\n                      <span data-l10n-id=\"findbar_label\">Find</span>\n                    </button>\n                    <div className=\"splitToolbarButton hiddenSmallView ml-2 d-flex align-items-center\">\n                      <div className=\"splitToolbarButtonSeparator mr-2\"></div>\n                      <button id=\"firstPage\" className=\"toolbarButton\" title=\"Go to First Page\" tabIndex=\"56\" data-l10n-id=\"first_page\">\n                        <span data-l10n-id=\"first_page_label\">Go to First Page</span>\n                      </button>\n                      <button className=\"toolbarButton\" title=\"Previous Page\" id=\"previous\" tabIndex=\"13\" data-l10n-id=\"previous\">\n                        <span data-l10n-id=\"previous_label\">Previous</span>\n                      </button>\n                      <input type=\"number\" id=\"pageNumber\" className=\"toolbarField\" title=\"Page\" defaultValue=\"1\" min=\"1\" tabIndex=\"15\" data-l10n-id=\"page\" autoComplete=\"off\" />\n                      <span id=\"numPages\" className=\"toolbarLabel\"></span>\n                      <button className=\"toolbarButton\" title=\"Next Page\" id=\"next\" tabIndex=\"14\" data-l10n-id=\"next\">\n                        <span data-l10n-id=\"next_label\">Next</span>\n                      </button>\n                      <button id=\"lastPage\" className=\"toolbarButton\" title=\"Go to Last Page\" tabIndex=\"57\" data-l10n-id=\"last_page\">\n                        <span data-l10n-id=\"last_page_label\">Go to Last Page</span>\n                      </button>\n                    </div>\n                  </div>\n                  <div id=\"toolbarViewerRight\" className=\"sf-hide\">\n                    <button id=\"openFile\" className=\"toolbarButton hiddenLargeView\" title=\"Open File\" tabIndex=\"31\" data-l10n-id=\"open_file\">\n                      <span data-l10n-id=\"open_file_label\">Open</span>\n                    </button>\n\n                    <button id=\"print\" className=\"toolbarButton hiddenMediumView\" title=\"Print\" tabIndex=\"32\" data-l10n-id=\"print\">\n                      <span data-l10n-id=\"print_label\">Print</span>\n                    </button>\n\n                    <button id=\"download\" className=\"toolbarButton hiddenMediumView\" title=\"Save\" tabIndex=\"33\" data-l10n-id=\"save\">\n                      <span data-l10n-id=\"save_label\">Save</span>\n                    </button>\n\n                    <div className=\"verticalToolbarSeparator hiddenMediumView\"></div>\n\n                    <div id=\"editorModeButtons\" className=\"splitToolbarButton toggled\" role=\"radiogroup\">\n                      <button id=\"editorFreeText\" className=\"toolbarButton\" disabled=\"disabled\" title=\"Text\" role=\"radio\" aria-checked=\"false\" aria-controls=\"editorFreeTextParamsToolbar\" tabIndex=\"34\" data-l10n-id=\"editor_free_text2\">\n                        <span data-l10n-id=\"editor_free_text2_label\">Text</span>\n                      </button>\n                      <button id=\"editorInk\" className=\"toolbarButton\" disabled=\"disabled\" title=\"Draw\" role=\"radio\" aria-checked=\"false\" aria-controls=\"editorInkParamsToolbar\" tabIndex=\"35\" data-l10n-id=\"editor_ink2\">\n                        <span data-l10n-id=\"editor_ink2_label\">Draw</span>\n                      </button>\n                    </div>\n\n                    <div id=\"editorModeSeparator\" className=\"verticalToolbarSeparator\"></div>\n\n                    <button id=\"secondaryToolbarToggle\" className=\"toolbarButton\" title=\"Tools\" tabIndex=\"48\" data-l10n-id=\"tools\" aria-expanded=\"false\" aria-controls=\"secondaryToolbar\">\n                      <span data-l10n-id=\"tools_label\">Tools</span>\n                    </button>\n                  </div>\n                  <div id=\"toolbarViewerMiddle\" className=\"d-flex align-items-center\">\n                    <div className=\"splitToolbarButton float-none\">\n                      <button id=\"zoomOut\" className=\"toolbarButton\" title=\"Zoom Out\" tabIndex=\"21\" data-l10n-id=\"zoom_out\">\n                        <span data-l10n-id=\"zoom_out_label\">Zoom Out</span>\n                      </button>\n                      <div className=\"splitToolbarButtonSeparator d-none\"></div>\n                    </div>\n                    <div id=\"scaleSelectContainer\" className=\"dropdownToolbarButton my-0 mx-1 float-none\">\n                      <select id=\"scaleSelect\" title=\"Zoom\" tabIndex=\"23\" data-l10n-id=\"zoom\" defaultValue=\"auto\" className=\"bg-white border rounded py-0 px-1\">\n                        <option id=\"pageAutoOption\" title=\"\" value=\"auto\" data-l10n-id=\"page_scale_auto\">Automatic Zoom</option>\n                        <option id=\"pageActualOption\" title=\"\" value=\"page-actual\" data-l10n-id=\"page_scale_actual\">Actual Size</option>\n                        <option id=\"pageFitOption\" title=\"\" value=\"page-fit\" data-l10n-id=\"page_scale_fit\">Page Fit</option>\n                        <option id=\"pageWidthOption\" title=\"\" value=\"page-width\" data-l10n-id=\"page_scale_width\">Page Width</option>\n                        <option id=\"customScaleOption\" title=\"\" value=\"custom\" disabled=\"disabled\" hidden={true}></option>\n                        <option title=\"\" value=\"0.5\" data-l10n-id=\"page_scale_percent\" data-l10n-args='{ \"scale\": 50 }'>50%</option>\n                        <option title=\"\" value=\"0.75\" data-l10n-id=\"page_scale_percent\" data-l10n-args='{ \"scale\": 75 }'>75%</option>\n                        <option title=\"\" value=\"1\" data-l10n-id=\"page_scale_percent\" data-l10n-args='{ \"scale\": 100 }'>100%</option>\n                        <option title=\"\" value=\"1.25\" data-l10n-id=\"page_scale_percent\" data-l10n-args='{ \"scale\": 125 }'>125%</option>\n                        <option title=\"\" value=\"1.5\" data-l10n-id=\"page_scale_percent\" data-l10n-args='{ \"scale\": 150 }'>150%</option>\n                        <option title=\"\" value=\"2\" data-l10n-id=\"page_scale_percent\" data-l10n-args='{ \"scale\": 200 }'>200%</option>\n                        <option title=\"\" value=\"3\" data-l10n-id=\"page_scale_percent\" data-l10n-args='{ \"scale\": 300 }'>300%</option>\n                        <option title=\"\" value=\"4\" data-l10n-id=\"page_scale_percent\" data-l10n-args='{ \"scale\": 400 }'>400%</option>\n                      </select>\n                    </div>\n                    <div className=\"splitToolbarButton float-none\">\n                      <button id=\"zoomIn\" className=\"toolbarButton\" title=\"Zoom In\" tabIndex=\"22\" data-l10n-id=\"zoom_in\">\n                        <span data-l10n-id=\"zoom_in_label\">Zoom In</span>\n                      </button>\n                    </div>\n\n                  </div>\n                </div>\n                <div id=\"loadingBar\">\n                  <span className=\"loading-icon loading-tip\"></span>\n                  {/*<div className=\"progress\">\n                    <div className=\"glimmer\">\n                    </div>\n                  </div>*/}\n                </div>\n              </div>\n            </div>\n\n            <div id=\"viewerContainer\" tabIndex=\"0\">\n              <div id=\"viewer\" className=\"pdfViewer\"></div>\n            </div>\n          </div>\n          {/*<!-- mainContainer -->*/}\n\n          <div id=\"dialogContainer\">\n            <dialog id=\"passwordDialog\">\n              <div className=\"row\">\n                <label htmlFor=\"password\" id=\"passwordText\" data-l10n-id=\"password_label\">Enter the password to open this PDF file:</label>\n              </div>\n              <div className=\"row\">\n                <input type=\"password\" id=\"password\" className=\"toolbarField\" />\n              </div>\n              <div className=\"buttonRow\">\n                <button id=\"passwordCancel\" className=\"dialogButton\"><span data-l10n-id=\"password_cancel\">Cancel</span></button>\n                <button id=\"passwordSubmit\" className=\"dialogButton\"><span data-l10n-id=\"password_ok\">OK</span></button>\n              </div>\n            </dialog>\n            <dialog id=\"documentPropertiesDialog\">\n              <div className=\"row\">\n                <span id=\"fileNameLabel\" data-l10n-id=\"document_properties_file_name\">File name:</span>\n                <p id=\"fileNameField\" aria-labelledby=\"fileNameLabel\">-</p>\n              </div>\n              <div className=\"row\">\n                <span id=\"fileSizeLabel\" data-l10n-id=\"document_properties_file_size\">File size:</span>\n                <p id=\"fileSizeField\" aria-labelledby=\"fileSizeLabel\">-</p>\n              </div>\n              <div className=\"separator\"></div>\n              <div className=\"row\">\n                <span id=\"titleLabel\" data-l10n-id=\"document_properties_title\">Title:</span>\n                <p id=\"titleField\" aria-labelledby=\"titleLabel\">-</p>\n              </div>\n              <div className=\"row\">\n                <span id=\"authorLabel\" data-l10n-id=\"document_properties_author\">Author:</span>\n                <p id=\"authorField\" aria-labelledby=\"authorLabel\">-</p>\n              </div>\n              <div className=\"row\">\n                <span id=\"subjectLabel\" data-l10n-id=\"document_properties_subject\">Subject:</span>\n                <p id=\"subjectField\" aria-labelledby=\"subjectLabel\">-</p>\n              </div>\n              <div className=\"row\">\n                <span id=\"keywordsLabel\" data-l10n-id=\"document_properties_keywords\">Keywords:</span>\n                <p id=\"keywordsField\" aria-labelledby=\"keywordsLabel\">-</p>\n              </div>\n              <div className=\"row\">\n                <span id=\"creationDateLabel\" data-l10n-id=\"document_properties_creation_date\">Creation Date:</span>\n                <p id=\"creationDateField\" aria-labelledby=\"creationDateLabel\">-</p>\n              </div>\n              <div className=\"row\">\n                <span id=\"modificationDateLabel\" data-l10n-id=\"document_properties_modification_date\">Modification Date:</span>\n                <p id=\"modificationDateField\" aria-labelledby=\"modificationDateLabel\">-</p>\n              </div>\n              <div className=\"row\">\n                <span id=\"creatorLabel\" data-l10n-id=\"document_properties_creator\">Creator:</span>\n                <p id=\"creatorField\" aria-labelledby=\"creatorLabel\">-</p>\n              </div>\n              <div className=\"separator\"></div>\n              <div className=\"row\">\n                <span id=\"producerLabel\" data-l10n-id=\"document_properties_producer\">PDF Producer:</span>\n                <p id=\"producerField\" aria-labelledby=\"producerLabel\">-</p>\n              </div>\n              <div className=\"row\">\n                <span id=\"versionLabel\" data-l10n-id=\"document_properties_version\">PDF Version:</span>\n                <p id=\"versionField\" aria-labelledby=\"versionLabel\">-</p>\n              </div>\n              <div className=\"row\">\n                <span id=\"pageCountLabel\" data-l10n-id=\"document_properties_page_count\">Page Count:</span>\n                <p id=\"pageCountField\" aria-labelledby=\"pageCountLabel\">-</p>\n              </div>\n              <div className=\"row\">\n                <span id=\"pageSizeLabel\" data-l10n-id=\"document_properties_page_size\">Page Size:</span>\n                <p id=\"pageSizeField\" aria-labelledby=\"pageSizeLabel\">-</p>\n              </div>\n              <div className=\"separator\"></div>\n              <div className=\"row\">\n                <span id=\"linearizedLabel\" data-l10n-id=\"document_properties_linearized\">Fast Web View:</span>\n                <p id=\"linearizedField\" aria-labelledby=\"linearizedLabel\">-</p>\n              </div>\n              <div className=\"buttonRow\">\n                <button id=\"documentPropertiesClose\" className=\"dialogButton\"><span data-l10n-id=\"document_properties_close\">Close</span></button>\n              </div>\n            </dialog>\n            <dialog id=\"printServiceDialog\" style={{minWidth: '200px'}}>\n              <div className=\"row\">\n                <span data-l10n-id=\"print_progress_message\">Preparing document for printing</span>\n              </div>\n              <div className=\"row\">\n                <progress value=\"0\" max=\"100\"></progress>\n                <span data-l10n-id=\"print_progress_percent\" data-l10n-args='{ \"progress\": 0 }' className=\"relative-progress\">0%</span>\n              </div>\n              <div className=\"buttonRow\">\n                <button id=\"printCancel\" className=\"dialogButton\"><span data-l10n-id=\"print_progress_close\">Cancel</span></button>\n              </div>\n            </dialog>\n          </div>\n          {/*<!-- dialogContainer -->*/}\n\n        </div>\n        {/*<!-- outerContainer -->*/}\n        {/*<div id=\"printContainer\"></div>*/}\n        <input type=\"file\" id=\"fileInput\" className=\"hidden\" />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default PDFViewer;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/side-panel.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/wiki/index.js",[],["4102"],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/_i18n/i18n-sdoc-editor.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/main-content-wrapper.js",["4103"],[],"import React, { Fragment } from 'react';\nimport GeneralToolBar from './toolbar/general-toolbar';\n\nconst MainContentWrapper = (WrapperedComponent) => {\n  return class Wrapper extends React.Component {\n\n    constructor(props) {\n      super(props);\n    }\n\n    render() {\n      return (\n        <Fragment>\n          <GeneralToolBar {...this.props} />\n          <WrapperedComponent {...this.props} />\n        </Fragment>\n      );\n    }\n  };\n};\n\nexport default MainContentWrapper;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/main-panel.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/system-notification.js",["4104"],[],"import React from 'react';\nimport { curNoteMsg, curNoteID, siteRoot, gettext } from '../utils/constants';\n\nimport '../css/system-notification.css';\n\nclass SystemNotification extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isClosed: false\n    };\n  }\n\n  close = () => {\n    this.setState({isClosed: true});\n\n    if (navigator.cookieEnabled) {\n      let date = new Date(),\n        cookies = document.cookie.split('; '),\n        infoIDExist = false,\n        newInfoID = curNoteID + '_';\n      date.setTime(date.getTime() + 14*24*60*60*1000);\n      newInfoID += '; expires=' + date.toGMTString() + '; path=' + siteRoot;\n      for (var i = 0, len = cookies.length; i < len; i++) {\n        if (cookies[i].split('=')[0] == 'info_id') {\n          infoIDExist = true;\n          document.cookie = 'info_id=' + cookies[i].split('=')[1] + newInfoID;\n          break;\n        }\n      }\n      if (!infoIDExist) {\n        document.cookie = 'info_id=' + newInfoID;\n      }\n    }\n  };\n\n  render() {\n    if (!curNoteMsg || this.state.isClosed) {\n      return null;\n    }\n\n    return (\n      <div id=\"info-bar\" className=\"d-flex justify-content-between\">\n        <p id=\"info-bar-info\" className=\"m-0\" dangerouslySetInnerHTML={{__html: curNoteMsg}}></p>\n        <button className=\"close sf2-icon-x1\" title={gettext('Close')} aria-label={gettext('Close')} onClick={this.close}></button>\n      </div>\n    );\n  }\n}\n\nexport default SystemNotification;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/video-player.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/dashboard/my-file-activities.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/dashboard/files-activities.js",["4105","4106","4107","4108","4109","4110"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, username } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport Activity from '../../models/activity';\nimport FileActivitiesContent from './content';\nimport UserSelector from './user-selector';\n\nimport '../../css/files-activities.css';\n\nmoment.locale(window.app.config.lang);\n\nconst propTypes = {\n  onlyMine: PropTypes.bool\n};\n\nclass FilesActivities extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      isFirstLoading: true,\n      isLoadingMore: false, // only for 'scroll down to the bottom'\n      currentPage: 1,\n      hasMore: true,\n      allItems: [],\n      items: [],\n      availableUsers: [],\n      targetUsers: []\n    };\n    this.avatarSize = 72;\n    this.curPathList = [];\n    this.oldPathList = [];\n    this.availableUserEmails = new Set();\n  }\n\n  componentDidMount() {\n    let { currentPage, availableUsers } = this.state;\n    seafileAPI.listActivities(currentPage, this.avatarSize).then(res => {\n      // {\"events\":[...]}\n      let events = this.mergePublishEvents(res.data.events);\n      events = this.mergeFileCreateEvents(events);\n      events.forEach(item => {\n        if (!this.availableUserEmails.has(item.author_email)) {\n          this.availableUserEmails.add(item.author_email);\n          availableUsers.push({\n            email: item.author_email,\n            name: item.author_name,\n            contact_email: item.author_contact_email,\n            avatar_url: item.avatar_url,\n            isSelected: false\n          });\n        }\n      });\n\n      const curItems = this.filterEvents(events);\n      this.setState({\n        allItems: events,\n        items: curItems,\n        availableUsers: availableUsers,\n        currentPage: currentPage + 1,\n        isFirstLoading: curItems.length == 0,\n        hasMore: true,\n      });\n      if (this.state.items.length < 25) {\n        this.getMore();\n      }\n    }).catch(error => {\n      this.setState({\n        isFirstLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  mergePublishEvents = (events) => {\n    events.forEach((item) => {\n      if (item.op_type === 'publish') {\n        this.curPathList.push(item.path);\n        this.oldPathList.push(item.old_path);\n      }\n    });\n    let actuallyEvents = [];\n    for (var i = 0; i < events.length; i++) {\n      if (events[i].obj_type === 'file') {\n        if (events[i].op_type === 'delete' && this.oldPathList.includes(events[i].path)) {\n          this.oldPathList.splice(this.oldPathList.indexOf(events[i].path), 1);\n        } else if (events[i].op_type === 'edit' && this.curPathList.includes(events[i].path)) {\n          this.curPathList.splice(this.curPathList.indexOf(events[i].path), 1);\n        } else if (events[i].op_type === 'rename' && this.oldPathList.includes(events[i].old_path)) {\n          this.oldPathList.splice(this.oldPathList.indexOf(events[i].old_path), 1);\n        } else {\n          actuallyEvents.push(events[i]);\n        }\n      } else {\n        actuallyEvents.push(events[i]);\n      }\n    }\n    return actuallyEvents;\n  };\n\n  mergeFileCreateEvents = (events) => {\n    let actuallyEvents = [];\n    let multiFilesActivity = null;\n    for (var i = 0; i < events.length; i++) {\n      let isFulfilCondition = events[i].obj_type === 'file' &&\n                              events[i].op_type === 'create' &&\n                              events[i + 1] &&\n                              events[i + 1].obj_type === 'file' &&\n                              events[i + 1].op_type === 'create' &&\n                              events[i + 1].repo_name === events[i].repo_name &&\n                              events[i + 1].author_email === events[i].author_email;\n      if (multiFilesActivity != null) {\n        multiFilesActivity.createdFilesCount++;\n        multiFilesActivity.createdFilesList.push(events[i]);\n        if (isFulfilCondition) {\n          continue;\n        } else {\n          actuallyEvents.push(multiFilesActivity);\n          multiFilesActivity = null;\n        }\n      } else {\n        if (isFulfilCondition) {\n          multiFilesActivity = new Activity(events[i]);\n          multiFilesActivity.obj_type = 'files';\n          multiFilesActivity.createdFilesCount++;\n          multiFilesActivity.createdFilesList.push(events[i]);\n        } else {\n          actuallyEvents.push(events[i]);\n        }\n      }\n    }\n    return actuallyEvents;\n  };\n\n  getMore() {\n    const { currentPage, availableUsers, targetUsers } = this.state;\n    seafileAPI.listActivities(currentPage, this.avatarSize).then(res => {\n      // {\"events\":[...]}\n      let events = this.mergePublishEvents(res.data.events);\n      events = this.mergeFileCreateEvents(events);\n      events.forEach(item => {\n        if (!this.availableUserEmails.has(item.author_email)) {\n          this.availableUserEmails.add(item.author_email);\n          availableUsers.push({\n            email: item.author_email,\n            name: item.author_name,\n            contact_email: item.author_contact_email,\n            avatar_url: item.avatar_url,\n            isSelected: false\n          });\n        }\n      });\n      const filteredEvents = this.filterEvents(events);\n      const curItems = [...this.state.items, ...filteredEvents];\n      this.setState({\n        allItems: [...this.state.allItems, ...events],\n        items: curItems,\n        availableUsers: availableUsers,\n        currentPage: currentPage + 1,\n        isFirstLoading: curItems.length == 0,\n        isLoadingMore: false,\n        hasMore: res.data.events.length === 0 ? false : true\n      });\n      if (this.state.items.length < 25 && this.state.hasMore) {\n        if (!(targetUsers.length && currentPage == 100)) {\n          this.getMore();\n        }\n      }\n    }).catch(error => {\n      this.setState({\n        isFirstLoading: false,\n        isLoadingMore: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  filterEvents = (events) => {\n    const { onlyMine } = this.props;\n    const { targetUsers } = this.state;\n\n    if (onlyMine) {\n      return events.filter(item => item.author_email == username);\n    } else if (targetUsers.length) {\n      return events.filter(item => targetUsers.map(item => item.email).indexOf(item.author_email) != -1);\n    } else {\n      return events;\n    }\n  };\n\n  setTargetUsers = (selectedUsers) => {\n    this.setState({\n      targetUsers: selectedUsers\n    }, () => {\n      const items = this.filterEvents(this.state.allItems);\n      this.setState({\n        items: items\n      }, () => {\n        if (items.length < 25 && this.state.hasMore) {\n          this.getMore();\n        }\n      });\n    });\n  };\n\n  toggleSelectUser = (user) => {\n    const { availableUsers } = this.state;\n    this.setState({\n      availableUsers: availableUsers.map(item => {\n        if (item.email == user.email) {\n          item.isSelected = !user.isSelected;\n        }\n        return item;\n      })\n    });\n  };\n\n  handleScroll = (event) => {\n    if (!this.state.isLoadingMore && this.state.hasMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.getMore();\n        });\n      }\n    }\n  };\n\n  render() {\n    const { onlyMine } = this.props;\n    const { targetUsers, availableUsers } = this.state;\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"activities\">\n          <div className=\"cur-view-path\">\n            <ul className=\"nav\">\n              <li className=\"nav-item\">\n                <Link to={`${siteRoot}dashboard/`} className={`nav-link${onlyMine ? '' : ' active'}`}>{gettext('All Activities')}</Link>\n              </li>\n              <li className=\"nav-item\">\n                <Link to={`${siteRoot}my-activities/`} className={`nav-link${onlyMine ? ' active': ''}`}>{gettext('My Activities')}</Link>\n              </li>\n            </ul>\n          </div>\n          <div className=\"cur-view-content d-block\" onScroll={this.handleScroll}>\n            {this.state.isFirstLoading && <Loading />}\n            {(!this.state.isFirstLoading && this.state.errorMsg) &&\n              <p className=\"error text-center\">{this.state.errorMsg}</p>\n            }\n            {!this.state.isFirstLoading && (\n              <Fragment>\n                {!onlyMine && (\n                  <UserSelector\n                    availableUsers={availableUsers}\n                    currentSelectedUsers={targetUsers}\n                    setTargetUsers={this.setTargetUsers}\n                    toggleSelectUser={this.toggleSelectUser}\n                  />\n                )}\n                <FileActivitiesContent items={this.state.items} isLoadingMore={this.state.isLoadingMore} />\n              </Fragment>\n            )\n            }\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nFilesActivities.propTypes = propTypes;\n\nexport default FilesActivities;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/linked-devices/linked-devices.js",["4111","4112"],[],"import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport ConfirmUnlinkDeviceDialog from '../../components/dialog/confirm-unlink-device';\nimport { Utils } from '../../utils/utils';\n\nclass Content extends Component {\n\n  render() {\n    const {loading, errorMsg, items} = this.props.data;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No linked devices')}</h2>\n          <p>{gettext('You have not accessed your files with any client (desktop or mobile) yet. Configure clients on your devices to access your data more comfortably.')}</p>\n        </EmptyTip>\n      );\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"13%\">{gettext('Platform')}</th>\n            <th width=\"30%\">{gettext('Device Name')}</th>\n            <th width=\"30%\">{gettext('IP')}</th>\n            <th width=\"17%\">{gettext('Last Access')}</th>\n            <th width=\"10%\"></th>\n          </tr>\n        </thead>\n      );\n      const mobileThead = (\n        <thead>\n          <tr>\n            <th width=\"92%\"></th>\n            <th width=\"8%\"></th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      return items.length ? (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? desktopThead : mobileThead}\n          <tbody>\n            {items.map((item, index) => {\n              return <Item key={index} data={item} isDesktop={isDesktop} />;\n            })}\n          </tbody>\n        </table>\n      ): emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  data: PropTypes.object.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpMenuOpen: false, // for mobile\n      isOpIconShown: false,\n      unlinked: false,\n      isConfirmUnlinkDialogOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  };\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  };\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  };\n\n  toggleDialog = () => {\n    this.setState({\n      isConfirmUnlinkDialogOpen: !this.state.isConfirmUnlinkDialogOpen\n    });\n  };\n\n  handleClick = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n    if (data.is_desktop_client) {\n      this.toggleDialog();\n    } else {\n      const wipeDevice = true;\n      this.unlinkDevice(wipeDevice);\n    }\n  };\n\n  unlinkDevice = (wipeDevice) => {\n    const data = this.props.data;\n    seafileAPI.unlinkDevice(data.platform, data.device_id, wipeDevice).then((res) => {\n      this.setState({\n        unlinked: true\n      });\n      let msg = gettext('Successfully unlinked %(name)s.');\n      msg = msg.replace('%(name)s', data.device_name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    if (this.state.unlinked) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    let opClasses = 'sf2-icon-delete unlink-device action-icon';\n    opClasses += this.state.isOpIconShown ? '' : ' invisible';\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td>{data.platform}</td>\n        <td>{data.device_name}</td>\n        <td>{data.last_login_ip}</td>\n        <td>{moment(data.last_accessed).fromNow()}</td>\n        <td>\n          <a href=\"#\" className={opClasses} title={gettext('Unlink')} role=\"button\" aria-label={gettext('Unlink')} onClick={this.handleClick}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td>\n          {data.device_name}<br />\n          <span className=\"item-meta-info\">{data.last_login_ip}</span>\n          <span className=\"item-meta-info\">{moment(data.last_accessed).fromNow()}</span>\n          <span className=\"item-meta-info\">{data.platform}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More operations')}\n              aria-label={gettext('More operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.handleClick}>{gettext('Unlink')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <React.Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {this.state.isConfirmUnlinkDialogOpen &&\n        <ConfirmUnlinkDeviceDialog\n          executeOperation={this.unlinkDevice}\n          toggleDialog={this.toggleDialog}\n        />\n        }\n      </React.Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  isDesktop: PropTypes.bool.isRequired,\n  data: PropTypes.object.isRequired,\n};\n\nclass LinkedDevices extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listLinkedDevices().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"linked-devices\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Linked Devices')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content data={this.state} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LinkedDevices;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/starred/starred.js",["4113","4114","4115"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, enableVideoThumbnail } from '../../utils/constants';\nimport EmptyTip from '../../components/empty-tip';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\n\nclass Content extends Component {\n\n  render() {\n    const {loading, errorMsg, items} = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No favorites')}</h2>\n          <p>{gettext('You have not added any libraries, folders or files to your favorites yet. A favorite gives you quick access to your most frequently used objects. You can add a library, folder or file to your favorites by clicking the star to the left of its name.')}</p>\n        </EmptyTip>\n      );\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"40%\">{gettext('Name')}</th>\n            <th width=\"32%\">{gettext('Library')}</th>\n            <th width=\"18%\">{gettext('Last Update')}</th>\n            <th width=\"6%\"></th>\n          </tr>\n        </thead>\n      );\n      const mobileThead = (\n        <thead>\n          <tr>\n            <th width=\"12%\"></th>\n            <th width=\"80%\"></th>\n            <th width=\"8%\"></th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      return items.length ? (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? desktopThead : mobileThead}\n          <TableBody items={items} />\n        </table>\n      ) : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  data: PropTypes.object,\n  items: PropTypes.array,\n};\n\nclass TableBody extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      items: this.props.items\n    };\n  }\n\n  componentDidMount() {\n    this.getThumbnails();\n  }\n\n  getThumbnails() {\n    let items = this.state.items.filter((item) => {\n      return (Utils.imageCheck(item.obj_name) || (enableVideoThumbnail && Utils.videoCheck(item.obj_name))) && !item.repo_encrypted && !item.encoded_thumbnail_src && !item.deleted;\n    });\n    if (items.length == 0) {\n      return ;\n    }\n\n    const len = items.length;\n    const thumbnailSize = 48;\n    const _this = this;\n    let getThumbnail = function(i) {\n      const curItem = items[i];\n      seafileAPI.createThumbnail(curItem.repo_id, curItem.path, thumbnailSize).then((res) => {\n        curItem.encoded_thumbnail_src = res.data.encoded_thumbnail_src;\n      }).catch((error) => {\n        // do nothing\n      }).then(() => {\n        if (i < len - 1) {\n          getThumbnail(++i);\n        } else {\n          // when done, `setState()`\n          _this.setState({\n            items: _this.state.items\n          });\n        }\n      });\n    };\n    getThumbnail(0);\n  }\n\n  render() {\n\n    let listItems = this.state.items.map(function(item, index) {\n\n      if (item.path === '/') {\n        item.item_icon_url = Utils.getDefaultLibIconUrl(false);\n      } else {\n        item.item_icon_url = item.is_dir ? Utils.getFolderIconUrl(false) : Utils.getFileIconUrl(item.obj_name);\n      }\n\n      item.encoded_path = Utils.encodePath(item.path);\n\n      item.thumbnail_url = item.encoded_thumbnail_src ? `${siteRoot}${item.encoded_thumbnail_src}` : '';\n      item.dirent_view_url = item.is_dir ? `${siteRoot}library/${item.repo_id}/${item.repo_name}${item.encoded_path}` : `${siteRoot}lib/${item.repo_id}/file${item.encoded_path}`;\n      // item is folder or file\n      if (item.encoded_path !== '/') {\n        item.dirent_view_url = item.dirent_view_url.replace(/\\/+$/, '');\n      }\n\n      item.mtime_relative = moment(item.mtime).fromNow();\n\n\n      return <Item key={index} data={item} />;\n    }, this);\n\n    return (\n      <tbody>{listItems}</tbody>\n    );\n  }\n}\n\nTableBody.propTypes = {\n  data: PropTypes.object,\n  items: PropTypes.array,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showOpIcon: false,\n      unstarred: false,\n      isOpMenuOpen: false // for mobile\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  };\n\n  handleMouseOver = () => {\n    this.setState({\n      showOpIcon: true\n    });\n  };\n\n  handleMouseOut = () => {\n    this.setState({\n      showOpIcon: false\n    });\n  };\n\n  unstar = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n    seafileAPI.unstarItem(data.repo_id, data.path).then((res) => {\n      this.setState({unstarred: true});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  visitItem = () => {\n    const data = this.props.data;\n    if (data.is_dir) {\n      navigate(data.dirent_view_url);\n    } else {\n      window.open(data.dirent_view_url);\n    }\n  };\n\n  render() {\n\n    if (this.state.unstarred) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    let opClasses = 'sf2-icon-x3 unstar action-icon';\n    opClasses += this.state.showOpIcon ? '' : ' invisible';\n    const linkUrl = data.dirent_view_url;\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td className=\"text-center\">\n          {\n            data.thumbnail_url ?\n              <img className=\"thumbnail\" src={data.thumbnail_url} alt=\"\" /> :\n              <img src={data.item_icon_url} alt={gettext('icon')} width=\"24\" />\n          }\n        </td>\n        <Fragment>\n          {data.deleted ?\n            <td>\n              {data.obj_name}{' '}<span style={{color:'red'}}>{gettext('deleted')}</span>\n            </td> :\n            <td>\n              { data.is_dir ?\n                <Link to={linkUrl}>{data.obj_name}</Link> :\n                <a className=\"normal\" href={linkUrl} target=\"_blank\" rel=\"noreferrer\">{data.obj_name}</a>\n              }\n            </td>\n          }\n        </Fragment>\n        <td>{data.repo_name}</td>\n        <td dangerouslySetInnerHTML={{__html:data.mtime_relative}}></td>\n        <td>\n          <a href=\"#\" role=\"button\" className={opClasses} title={gettext('Unstar')} aria-label={gettext('Unstar')} onClick={this.unstar}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td className=\"text-center\" onClick={this.visitItem}>\n          {\n            data.thumbnail_url ?\n              <img className=\"thumbnail\" src={data.thumbnail_url} alt=\"\" /> :\n              <img src={data.item_icon_url} alt={gettext('icon')} width=\"24\" />\n          }\n        </td>\n        <td onClick={this.visitItem}>\n          { data.is_dir ?\n            <Link to={linkUrl}>{data.obj_name}</Link> :\n            <a className=\"normal\" href={data.dirent_view_url} target=\"_blank\" rel=\"noreferrer\">{data.obj_name}</a>\n          }\n          <br />\n          <span className=\"item-meta-info\">{data.repo_name}</span>\n          <span className=\"item-meta-info\" dangerouslySetInnerHTML={{__html:data.mtime_relative}}></span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.unstar}>{gettext('Unstar')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return Utils.isDesktop() ? desktopItem : mobileItem;\n  }\n}\n\nItem.propTypes = {\n  data: PropTypes.object,\n  items: PropTypes.array,\n};\n\nclass Starred extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listStarredItems().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.starred_item_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"starred\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Favorites')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content data={this.state} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Starred;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/share-admin/libraries.js",["4116","4117","4118","4119","4120","4121","4122","4123","4124","4125","4126","4127","4128","4129","4130","4131","4132"],[],"import React, { Fragment, Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport SharePermissionEditor from '../../components/select-editor/share-permission-editor';\nimport SharedRepoInfo from '../../models/shared-repo-info';\nimport PermSelect from '../../components/dialog/perm-select';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries shared')}</h2>\n          <p>{gettext('You have not shared any libraries with other users yet. You can share a library with other users by clicking the share icon to the right of a library\\'s name in \"My Libraries\".')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"30%\">{gettext('Share To')}</th>\n                <th width=\"24%\">{gettext('Permission')}</th>\n                <th width=\"8%\"></th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item\n                key={index}\n                isDesktop={isDesktop}\n                item={item}\n              />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n\n    let item = this.props.item;\n    this.state = {\n      share_permission: item.share_permission,\n      share_permission_name: item.share_permission_name,\n      is_admin: item.is_admin,\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      unshared: false,\n      isShowPermEditor: false,\n    };\n    let permissions = ['rw', 'r'];\n    this.permissions = permissions;\n    this.showAdmin = isPro && (item.share_type !== 'public');\n    if (this.showAdmin) {\n      permissions.push('admin');\n    }\n    if (isPro) {\n      permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  };\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  };\n\n  onMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  };\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const share_type = item.share_type;\n    let options = {\n      'share_type': share_type,\n      'permission': permission\n    };\n    if (share_type == 'personal') {\n      options.user = item.user_email;\n    } else if (share_type == 'group') {\n      options.group_id = item.group_id;\n    }\n\n    seafileAPI.updateRepoSharePerm(item.repo_id, options).then(() => {\n      this.setState({\n        share_permission: permission == 'admin' ? 'rw' : permission,\n        is_admin: permission == 'admin',\n      });\n      toaster.success(gettext('Successfully modified permission.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  unshare = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    const share_type = item.share_type;\n    let options = {\n      'share_type': share_type\n    };\n    if (share_type == 'personal') {\n      options.user = item.user_email;\n    } else if (share_type == 'group') {\n      options.group_id = item.group_id;\n    }\n\n    seafileAPI.unshareRepo(item.repo_id, options).then((res) => {\n      this.setState({\n        unshared: true\n      });\n      let message = gettext('Successfully unshared {name}').replace('{name}', item.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster(errMessage);\n    });\n  };\n\n  onEditPermission = (event) => {\n    event.nativeEvent.stopImmediatePropagation();\n    this.setState({isShowPermEditor: true});\n  };\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    let { share_permission, share_permission_name, is_admin, isOpIconShown, isPermSelectDialogOpen, isShowPermEditor } = this.state;\n    let item = this.props.item;\n    Object.assign(item, {\n      share_permission: share_permission,\n      is_admin: is_admin\n    });\n\n    let iconUrl = Utils.getLibIconUrl(item);\n    let iconTitle = Utils.getLibIconTitle(item);\n    let repoUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}/`;\n\n\n    let shareTo;\n    const shareType = item.share_type;\n    if (shareType == 'personal') {\n      shareTo = item.user_name;\n    } else if (shareType == 'group') {\n      shareTo = item.group_name;\n    } else if (shareType == 'public') {\n      shareTo = gettext('all members');\n    }\n\n    if (this.showAdmin && is_admin) {\n      share_permission = 'admin';\n    }\n\n    // custom defined permission\n    if (share_permission.startsWith('custom-')) {\n      share_permission = share_permission.slice(7);\n    }\n\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td><Link to={repoUrl}>{item.repo_name}</Link></td>\n        <td>\n          {item.share_type == 'personal' ? <span title={item.contact_email}>{shareTo}</span> : shareTo}\n        </td>\n        <td>\n          {!isShowPermEditor && (\n            <div>\n              <span>{Utils.sharePerms(share_permission) || share_permission_name}</span>\n              {isOpIconShown && (\n                <a href=\"#\"\n                  role=\"button\"\n                  aria-label={gettext('Edit')}\n                  title={gettext('Edit')}\n                  className=\"fa fa-pencil-alt attr-action-icon\"\n                  onClick={this.onEditPermission}>\n                </a>\n              )}\n            </div>\n          )}\n          {isShowPermEditor && (\n            <SharePermissionEditor\n              repoID={item.repo_id}\n              isTextMode={true}\n              isEditing={true}\n              autoFocus={true}\n              isEditIconShow={this.state.isOpIconShown}\n              currentPermission={share_permission}\n              permissions={this.permissions}\n              onPermissionChanged={this.changePerm}\n            />\n          )}\n        </td>\n        <td><a href=\"#\" role=\"button\" aria-label={gettext('Unshare')} className={`action-icon sf2-icon-x3 ${isOpIconShown ? '': 'invisible'}`} title={gettext('Unshare')} onClick={this.unshare}></a></td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            <Link to={repoUrl}>{item.repo_name}</Link>\n            <span className=\"item-meta-info-highlighted\">{Utils.sharePerms(share_permission)}</span>\n            <br />\n            <span className=\"item-meta-info\">{`${gettext('Share To:')} ${shareTo}`}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More operations')}\n                aria-label={gettext('More operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.unshare}>{gettext('Unshare')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen && (\n          <PermSelect\n            repoID={item.repo_id}\n            currentPerm={share_permission}\n            permissions={this.permissions}\n            changePerm={this.changePerm}\n            toggleDialog={this.togglePermSelectDialog}\n          />\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  isDesktop: PropTypes.bool.isRequired,\n};\n\nclass ShareAdminLibraries extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name', // 'name' or 'time'\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listSharedRepos().then((res) => {\n      let items = res.data.map(item => {\n        return new SharedRepoInfo(item);\n      });\n      this.setState({\n        loading: false,\n        items: Utils.sortRepos(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortRepos(this.state.items, sortBy, sortOrder)\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"share-admin-libs\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Libraries')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              errorMsg={this.state.errorMsg}\n              loading={this.state.loading}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminLibraries;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/shared-libs/shared-libs.js",["4133","4134","4135","4136","4137","4138","4139","4140","4141","4142","4143","4144","4145","4146","4147","4148","4149","4150"],[],"import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport cookie from 'react-cookies';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Repo from '../../models/repo';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport LibsMobileThead from '../../components/libs-mobile-thead';\nimport ModalPotal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport RepoMonitoredIcon from '../../components/repo-monitored-icon';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  freezeItem = (freezed) => {\n    this.setState({\n      isItemFreezed: freezed\n    });\n  };\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No shared libraries')}</h2>\n        <p>{gettext('No libraries have been shared directly with you. A shared library can be shared with full or restricted permission. If you need access to a library owned by another user, ask the user to share the library with you.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortByTime = sortBy == 'time';\n      const sortBySize = sortBy == 'size';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n            <th width=\"10%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width=\"14%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n            <th width=\"18%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n            <th width=\"16%\">{gettext('Owner')}</th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={isDesktop ? '' : 'table-thead-hidden'}>\n          {isDesktop ? desktopThead : <LibsMobileThead />}\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                data={item}\n                isDesktop={isDesktop}\n                isItemFreezed={this.state.isItemFreezed}\n                freezeItem={this.freezeItem}\n                onMonitorRepo={this.props.onMonitorRepo}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onMonitorRepo: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      showOpIcon: false,\n      unshared: false,\n      isShowSharedDialog: false,\n      isStarred: this.props.data.starred,\n      isOpMenuOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    }, () => {\n      this.props.freezeItem(this.state.isOpMenuOpen);\n    });\n  };\n\n  handleMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        showOpIcon: true\n      });\n    }\n  };\n\n  handleMouseOut = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        showOpIcon: false\n      });\n    }\n  };\n\n  share = (e) => {\n    e.preventDefault();\n    this.setState({isShowSharedDialog: true});\n  };\n\n  leaveShare = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n\n    let request;\n    if (data.owner_email.indexOf('@seafile_group') == -1) {\n      let options = {\n        'share_type': 'personal',\n        'from': data.owner_email\n      };\n      request = seafileAPI.leaveShareRepo(data.repo_id, options);\n    } else {\n      request = seafileAPI.leaveShareGroupOwnedRepo(data.repo_id);\n    }\n\n    request.then((res) => {\n      this.setState({unshared: true});\n      let message = gettext('Successfully unshared {name}').replace('{name}', data.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to unshare {name}').replace('{name}', data.repo_name);\n      }\n      toaster(errMessage);\n    });\n  };\n\n  toggleShareDialog = () => {\n    this.setState({isShowSharedDialog: false});\n  };\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const repoName = this.props.data.repo_name;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.data.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.data.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  visitRepo = () => {\n    navigate(this.repoURL);\n  };\n\n  watchFileChanges = () => {\n    const { data: repo } = this.props;\n    seafileAPI.monitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  unwatchFileChanges = () => {\n    const { data: repo } = this.props;\n    seafileAPI.unMonitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    data.icon_url = Utils.getLibIconUrl(data);\n    data.icon_title = Utils.getLibIconTitle(data);\n\n    let iconVisibility = this.state.showOpIcon ? '' : ' invisible';\n    let shareIconClassName = 'op-icon sf2-icon-share repo-share-btn' + iconVisibility;\n    let leaveShareIconClassName = 'op-icon sf2-icon-x3' + iconVisibility;\n    let shareRepoUrl = this.repoURL = `${siteRoot}library/${data.repo_id}/${Utils.encodePath(data.repo_name)}/`;\n\n    // at present, only repo shared with 'r', 'rw' can be monitored.(Fri Feb 10 16:24:49 CST 2023)\n    const enableMonitorRepo = isPro && (data.permission == 'r' || data.permission == 'rw');\n\n    const desktopItem = (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n          <td className=\"text-center\">\n            <a href=\"#\" role=\"button\" aria-label={this.state.isStarred ? gettext('Unstar') : gettext('Star')} onClick={this.onToggleStarRepo}>\n              <i className={`fa-star ${this.state.isStarred ? 'fas' : 'far star-empty'}`}></i>\n            </a>\n          </td>\n          <td><img src={data.icon_url} title={data.icon_title} alt={data.icon_title} width=\"24\" /></td>\n          <td>\n            <Fragment>\n              <Link to={shareRepoUrl}>{data.repo_name}</Link>\n              {data.monitored && <RepoMonitoredIcon repoID={data.repo_id} />}\n            </Fragment>\n          </td>\n          <td>\n            {(isPro && data.is_admin) &&\n              <a href=\"#\" className={shareIconClassName} title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.share}></a>\n            }\n            <a href=\"#\" className={leaveShareIconClassName} title={gettext('Leave Share')} role=\"button\" aria-label={gettext('Leave Share')} onClick={this.leaveShare}></a>\n            {enableMonitorRepo &&\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                role=\"button\"\n                tabIndex=\"0\"\n                className={`sf-dropdown-toggle sf2-icon-caret-down${iconVisibility}`}\n                title={gettext('More operations')}\n                aria-label={gettext('More operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <DropdownMenu>\n                <DropdownItem onClick={data.monitored ? this.unwatchFileChanges : this.watchFileChanges}>{data.monitored ? gettext('Unwatch File Changes') : gettext('Watch File Changes')}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n            }\n          </td>\n          <td>{data.size}</td>\n          <td title={moment(data.last_modified).format('llll')}>{moment(data.last_modified).fromNow()}</td>\n          <td title={data.owner_contact_email}>{data.owner_name}</td>\n        </tr>\n        {this.state.isShowSharedDialog && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={data.repo_name}\n              itemPath={'/'}\n              repoID={data.repo_id}\n              repoEncrypted={data.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={data.permission}\n              isAdmin={true}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          <td onClick={this.visitRepo}><img src={data.icon_url} title={data.icon_title} alt={data.icon_title} width=\"24\" /></td>\n          <td onClick={this.visitRepo}>\n            <Link to={shareRepoUrl}>{data.repo_name}</Link>\n            {data.monitored && <RepoMonitoredIcon repoID={data.repo_id} />}\n            <br />\n            <span className=\"item-meta-info\" title={data.owner_contact_email}>{data.owner_name}</span>\n            <span className=\"item-meta-info\">{data.size}</span>\n            <span className=\"item-meta-info\" title={moment(data.last_modified).format('llll')}>{moment(data.last_modified).fromNow()}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.onToggleStarRepo}>{this.state.isStarred ? gettext('Unstar') : gettext('Star')}</DropdownItem>\n                  {(isPro && data.is_admin) && <DropdownItem className=\"mobile-menu-item\" onClick={this.share}>{gettext('Share')}</DropdownItem>}\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.leaveShare}>{gettext('Leave Share')}</DropdownItem>\n                  {enableMonitorRepo && <DropdownItem className=\"mobile-menu-item\" onClick={data.monitored ? this.unwatchFileChanges : this.watchFileChanges}>{data.monitored ? gettext('Unwatch File Changes') : gettext('Watch File Changes')}</DropdownItem>}\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {this.state.isShowSharedDialog && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={data.repo_name}\n              itemPath={'/'}\n              repoID={data.repo_id}\n              repoEncrypted={data.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={data.permission}\n              isAdmin={true}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nItem.propTypes = {\n  isDesktop: PropTypes.bool.isRequired,\n  data: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  onMonitorRepo: PropTypes.func.isRequired\n};\n\nclass SharedLibraries extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type:'shared'}).then((res) => {\n      let repoList = res.data.repos.map((item) => {\n        return new Repo(item);\n      });\n      this.setState({\n        loading: false,\n        items: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortRepos(this.state.items, sortBy, sortOrder)\n    });\n  };\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  };\n\n  onMonitorRepo = (repo, monitored) => {\n    let items = this.state.items.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.monitored = monitored;\n      }\n      return item;\n    });\n    this.setState({items: items});\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared with me')}</h3>\n              {(!Utils.isDesktop() && this.state.items.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortItems={this.sortItems}\n                onMonitorRepo={this.onMonitorRepo}\n              />\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortItems={this.sortItems}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default SharedLibraries;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/share-with-ocm/shared-with-ocm.js",["4151","4152","4153"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\n\nclass Content extends Component {\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries have been shared with you')}</h2>\n        <p>{gettext('No libraries have been shared with you from other servers.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const table = (\n        <table>\n          <thead>\n            <tr>\n              <th width=\"4%\"></th>\n              <th width=\"20%\">{gettext('Name')}</th>\n              <th width=\"20%\">{gettext('Shared by')}</th>\n              <th width=\"26%\">{gettext('At server')}</th>\n              <th width=\"20%\">{gettext('Time')}</th>\n              <th width=\"10%\">{/* operations */}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                item={item}\n                leaveShare={this.props.leaveShare}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  leaveShare: PropTypes.func.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  };\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  };\n\n  leaveShare = (e) => {\n    e.preventDefault();\n    this.props.leaveShare(this.props.item);\n  };\n\n  render() {\n    const item = this.props.item;\n    const { isOpIconShown } = this.state;\n\n    item.icon_url = Utils.getLibIconUrl(item);\n    item.icon_title = Utils.getLibIconTitle(item);\n\n    let shareRepoUrl =`${siteRoot}remote-library/${this.props.item.provider_id}/${this.props.item.repo_id}/${Utils.encodePath(this.props.item.repo_name)}/`;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td><img src={item.icon_url} title={item.icon_title} alt={item.icon_title} width=\"24\" /></td>\n        <td><Link to={shareRepoUrl}>{item.repo_name}</Link></td>\n        <td>{item.from_user}</td>\n        <td>{item.from_server_url}</td>\n        <td title={moment(item.last_modified).format('llll')}>{moment(item.ctime).fromNow()}</td>\n        <td>\n          <a href=\"#\" role=\"button\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Leave Share')} aria-label={gettext('Leave Share')} onClick={this.leaveShare}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  leaveShare: PropTypes.func.isRequired,\n};\n\nclass SharedWithOCM extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listOCMSharesReceived().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.ocm_share_received_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  leaveShare = (item) => {\n    const { id, repo_name } = item;\n    seafileAPI.deleteOCMShareReceived(id).then((res) => {\n      let items = this.state.items.filter(item => {\n        return item.id != id;\n      });\n      this.setState({items: items});\n      toaster.success(gettext('Successfully unshared {name}').replace('{name}', repo_name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared from other servers')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                leaveShare={this.leaveShare}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SharedWithOCM;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/share-admin/share-links.js",["4154","4155","4156","4157","4158","4159","4160","4161","4162","4163","4164","4165","4166","4167"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownItem, Button } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { isPro, gettext, siteRoot, canGenerateUploadLink } from '../../utils/constants';\nimport ShareLink from '../../models/share-link';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport ShareLinkPermissionSelect from '../../components/dialog/share-link-permission-select';\nimport ShareAdminLinkEnhanced from '../../services/share-admin-link-enhanced';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport CommonOperationConfirmationDialog from '../../components/dialog/common-operation-confirmation-dialog';\nimport TopToolbar from '../../components/toolbar/top-toolbar';\nimport Selector from '../../components/single-selector';\n\nconst contentPropTypes = {\n  loading: PropTypes.bool.isRequired,\n  isLoadingMore: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onRemoveLink: PropTypes.func.isRequired\n};\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({ isItemFreezed: isFreezed });\n  };\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No share links')}</h2>\n          <p>{gettext('You have not created any share links yet. A share link can be used to share files and folders with anyone. You can create a share link for a file or folder by clicking the share icon to the right of its name.')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortByTime = sortBy == 'time';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      // only for some columns\n      const columnWidths = isPro ? ['14%', '7%', '14%'] : ['21%', '14%', '20%'];\n      const table = (\n        <table className={`${isDesktop ? '' : 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"31%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width={columnWidths[0]}>{gettext('Library')}</th>\n                {isPro && <th width=\"20%\">{gettext('Permission')}</th>}\n                <th width={columnWidths[1]}>{gettext('Visits')}</th>\n                <th width={columnWidths[2]}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Expiration')} {sortByTime && sortIcon}</a></th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item\n                key={index}\n                isDesktop={isDesktop}\n                item={item}\n                onRemoveLink={this.props.onRemoveLink}\n                isItemFreezed={this.state.isItemFreezed}\n                toggleItemFreezed={this.toggleItemFreezed}\n              />\n              );\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? (\n        <>\n          {table}\n          {this.props.isLoadingMore && <div className=\"flex-shrink-0\"><Loading /></div>}\n        </>\n      ) : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = contentPropTypes;\n\nconst itemPropTypes = {\n  item: PropTypes.object.isRequired,\n  isDesktop: PropTypes.bool.isRequired,\n  onRemoveLink: PropTypes.func.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      highlight: false,\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      isLinkDialogOpen: false,\n      permissionOptions: [],\n      currentPermission: '',\n    };\n  }\n\n  componentDidMount() {\n    if (isPro) {\n      this.updatePermissionOptions();\n    }\n  }\n\n  updatePermissionOptions = () => {\n    const item = this.props.item;\n    let itemType = item.is_dir ? (item.path === '/' ? 'library' : 'dir') : 'file';\n    let permission = item.repo_folder_permission;\n    let permissionOptions = Utils.getShareLinkPermissionList(itemType, permission, item.path, item.can_edit);\n    let currentPermission = Utils.getShareLinkPermissionStr(this.props.item.permissions);\n    this.setState({\n      permissionOptions: permissionOptions,\n      currentPermission: currentPermission\n    });\n  };\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  };\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  };\n\n  toggleLinkDialog = () => {\n    this.setState({\n      isLinkDialogOpen: !this.state.isLinkDialogOpen\n    });\n  };\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  };\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  };\n\n  viewLink = (e) => {\n    e.preventDefault();\n    this.toggleLinkDialog();\n  };\n\n  removeLink = (e) => {\n    e.preventDefault();\n    this.props.onRemoveLink(this.props.item);\n  };\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  };\n\n  // for 'selector' in desktop\n  changePermission = (permOption) => {\n    this.changePerm(permOption.value);\n  };\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const permissionDetails = Utils.getShareLinkPermissionObject(permission).permissionDetails;\n    seafileAPI.updateShareLink(item.token, JSON.stringify(permissionDetails)).then(() => {\n      this.setState({\n        currentPermission: permission\n      });\n      let message = gettext('Successfully modified permission.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const item = this.props.item;\n    const { currentPermission, permissionOptions, isOpIconShown, isPermSelectDialogOpen, isLinkDialogOpen } = this.state;\n    this.permOptions = permissionOptions.map(item => {\n      return {\n        value: item,\n        text: Utils.getShareLinkPermissionObject(item).text,\n        isSelected: item == currentPermission\n      };\n    });\n    const currentSelectedPermOption = this.permOptions.filter(item => item.isSelected)[0] || {};\n\n    let iconUrl, objUrl;\n    if (item.is_dir) {\n      let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n      iconUrl = Utils.getFolderIconUrl(false);\n      objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n    } else {\n      iconUrl = Utils.getFileIconUrl(item.obj_name);\n      objUrl = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n    }\n\n    const deletedTip = item.obj_id === '' ? <span style={{ color: 'red' }}>{gettext('(deleted)')}</span> : null;\n    const desktopItem = (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave} onFocus={this.handleMouseEnter}>\n        <td><img src={iconUrl} width=\"24\" alt=\"\" /></td>\n        <td>\n          {item.is_dir ?\n            <Link to={objUrl}>{item.obj_name}</Link> :\n            <a href={objUrl} target=\"_blank\" rel=\"noreferrer\">{item.obj_name}</a>\n          }\n          {deletedTip}\n        </td>\n        <td><Link to={`${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}/`}>{item.repo_name}</Link></td>\n        {isPro &&\n          <td>\n            <Selector\n              isDropdownToggleShown={isOpIconShown && !item.is_expired}\n              currentSelectedOption={currentSelectedPermOption}\n              options={this.permOptions}\n              selectOption={this.changePermission}\n              toggleItemFreezed={this.props.toggleItemFreezed}\n            />\n          </td>\n        }\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          {!item.is_expired && <a href=\"#\" className={`sf2-icon-link action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('View')} aria-label={gettext('View')} role=\"button\" onClick={this.viewLink}></a>}\n          <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Remove')} aria-label={gettext('Remove')} role=\"button\" onClick={this.removeLink}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n          <td>\n            {item.is_dir ?\n              <Link to={objUrl}>{item.obj_name}</Link> :\n              <a href={objUrl} target=\"_blank\" rel=\"noreferrer\">{item.obj_name}</a>\n            }\n            {isPro && <span className=\"item-meta-info-highlighted\">{Utils.getShareLinkPermissionObject(currentPermission).text}</span>}\n            <br />\n            <span>{item.repo_name}</span><br />\n            <span className=\"item-meta-info\">{gettext('Visits')}: {item.view_cnt}</span>\n            <span className=\"item-meta-info\">{gettext('Expiration')}: {this.renderExpiration()}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More operations')}\n                aria-label={gettext('More operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  {(isPro && !item.is_expired) && <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>}\n                  {!item.is_expired && <DropdownItem className=\"mobile-menu-item\" onClick={this.viewLink}>{gettext('View')}</DropdownItem>}\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.removeLink}>{gettext('Remove')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen &&\n          <ShareLinkPermissionSelect\n            currentPerm={currentPermission}\n            permissions={permissionOptions}\n            changePerm={this.changePerm}\n            toggleDialog={this.togglePermSelectDialog}\n          />\n        }\n      </Fragment>\n    );\n\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isLinkDialogOpen &&\n          <ShareAdminLinkEnhanced\n            link={item.link}\n            password={item.password}\n            viewCount={item.view_cnt}\n            isShareLink={true}\n            toggleDialog={this.toggleLinkDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired\n};\n\nconst PER_PAGE = 25;\n\nclass ShareAdminShareLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCleanInvalidShareLinksDialogOpen: false,\n      loading: true,\n      hasMore: false,\n      isLoadingMore: false,\n      page: 1,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name', // 'name' or 'time'\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n\n    // for mobile\n    this.sortOptions = [\n      { value: 'name-asc', text: gettext('By name ascending') },\n      { value: 'name-desc', text: gettext('By name descending') },\n      { value: 'time-asc', text: gettext('By expiration ascending') },\n      { value: 'time-desc', text: gettext('By expiration descending') }\n    ];\n  }\n\n  _sortItems = (items, sortBy, sortOrder) => {\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function (a, b) {\n          var result = Utils.compareTwoWord(a.obj_name, b.obj_name);\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function (a, b) {\n          var result = Utils.compareTwoWord(a.obj_name, b.obj_name);\n          return -result;\n        };\n        break;\n      case 'time-asc':\n        comparator = function (a, b) {\n          return a.expire_date < b.expire_date ? -1 : 1;\n        };\n        break;\n      case 'time-desc':\n        comparator = function (a, b) {\n          return a.expire_date < b.expire_date ? 1 : -1;\n        };\n        break;\n\n      // no default\n    }\n\n    items.sort((a, b) => {\n      if (a.is_dir && !b.is_dir) {\n        return -1;\n      } else if (!a.is_dir && b.is_dir) {\n        return 1;\n      } else {\n        return comparator(a, b);\n      }\n    });\n    return items;\n  };\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: this._sortItems(this.state.items, sortBy, sortOrder)\n    });\n  };\n\n  componentDidMount() {\n    this.listUserShareLinks();\n  }\n\n  listUserShareLinks() {\n    const { page } = this.state;\n    seafileAPI.listShareLinks({ page }).then((res) => {\n      let items = res.data.map(item => {\n        return new ShareLink(item);\n      });\n      this.setState({\n        loading: false,\n        hasMore: res.data.length == PER_PAGE,\n        items: this._sortItems(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  handleScroll = (event) => {\n    if (!this.state.isLoadingMore && this.state.hasMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({ isLoadingMore: true }, () => {\n          this.getMore();\n        });\n      }\n    }\n  };\n\n  getMore = () => {\n    const { page } = this.state;\n    seafileAPI.listShareLinks({ page: page + 1 }).then((res) => {\n      let moreItems = res.data.map(item => {\n        return new ShareLink(item);\n      });\n      this.setState({\n        isLoadingMore: false,\n        hasMore: res.data.length == PER_PAGE,\n        page: page + 1,\n        items: this._sortItems(this.state.items.concat(moreItems), this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoadingMore: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  onRemoveLink = (item) => {\n    seafileAPI.deleteShareLink(item.token).then(() => {\n      let items = this.state.items.filter(uploadItem => {\n        return uploadItem.token !== item.token;\n      });\n      this.setState({ items: items });\n      let message = gettext('Successfully deleted 1 item.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  };\n\n  toggleCleanInvalidShareLinksDialog = () => {\n    this.setState({ isCleanInvalidShareLinksDialogOpen: !this.state.isCleanInvalidShareLinksDialogOpen });\n  };\n\n  cleanInvalidShareLinks = () => {\n    seafileAPI.cleanInvalidShareLinks().then(res => {\n      const newItems = this.state.items.filter(item => item.obj_id !== '').filter(item => !item.is_expired);\n      this.setState({ items: newItems });\n      toaster.success(gettext('Successfully cleaned invalid share links.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <TopToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n        >\n\n          <Button className=\"operation-item d-none d-md-block\" onClick={this.toggleCleanInvalidShareLinksDialog}>{gettext('Clean invalid share links')}</Button>\n        </TopToolbar>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path share-upload-nav\">\n              <ul className=\"nav\">\n                <li className=\"nav-item\">\n                  <Link to={`${siteRoot}share-admin-share-links/`} className=\"nav-link active\">{gettext('Share Links')}</Link>\n                </li>\n                {canGenerateUploadLink && (\n                  <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-upload-links/`} className=\"nav-link\">{gettext('Upload Links')}</Link></li>\n                )}\n              </ul>\n              {(!Utils.isDesktop() && this.state.items.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\" onScroll={this.handleScroll}>\n              <Content\n                loading={this.state.loading}\n                isLoadingMore={this.state.isLoadingMore}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortItems={this.sortItems}\n                onRemoveLink={this.onRemoveLink}\n              />\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n          <SortOptionsDialog\n            toggleDialog={this.toggleSortOptionsDialog}\n            sortBy={this.state.sortBy}\n            sortOrder={this.state.sortOrder}\n            sortOptions={this.sortOptions}\n            sortItems={this.sortItems}\n          />\n        }\n        {this.state.isCleanInvalidShareLinksDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Clean invalid share links')}\n            message={gettext('Are you sure you want to clean invalid share links?')}\n            executeOperation={this.cleanInvalidShareLinks}\n            confirmBtnText={gettext('Clean')}\n            toggleDialog={this.toggleCleanInvalidShareLinksDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nShareAdminShareLinks.propTypes = propTypes;\n\nexport default ShareAdminShareLinks;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/my-libs/my-libs.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/share-admin/upload-links.js",["4168","4169","4170","4171"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownItem, Button } from 'reactstrap';\nimport { gettext, siteRoot, canGenerateShareLink } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport UploadLink from '../../models/upload-link';\nimport ShareAdminLinkEnhanced from '../../services/share-admin-link-enhanced';\nimport CommonOperationConfirmationDialog from '../../components/dialog/common-operation-confirmation-dialog';\nimport TopToolbar from '../../components/toolbar/top-toolbar';\n\nconst contentPropTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  onRemoveLink: PropTypes.func.isRequired\n};\n\nclass Content extends Component {\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n    if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    }\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No upload links')}</h2>\n        <p>{gettext('You have not created any upload links yet. An upload link allows anyone to upload files to a folder or library. You can create an upload link for a folder or library by clicking the share icon to the right of its name.')}</p>\n      </EmptyTip>\n    );\n\n    const isDesktop = Utils.isDesktop();\n    const table = (\n      <table className={`table-hover ${isDesktop ? '' : 'table-thead-hidden'}`}>\n        <thead>\n          {isDesktop ? (\n            <tr>\n              <th width=\"4%\">{/*icon*/}</th>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"24%\">{gettext('Library')}</th>\n              <th width=\"16%\">{gettext('Visits')}</th>\n              <th width=\"16%\">{gettext('Expiration')}</th>\n              <th width=\"10%\">{/*Operations*/}</th>\n            </tr>\n          ) : (\n            <tr>\n              <th width=\"12%\"></th>\n              <th width=\"80%\"></th>\n              <th width=\"8%\"></th>\n            </tr>\n          )}\n        </thead>\n        <tbody>\n          {items.map((item, index) => {\n            return (<Item key={index} isDesktop={isDesktop} item={item} onRemoveLink={this.props.onRemoveLink} />);\n          })}\n        </tbody>\n      </table>\n    );\n\n    return items.length ? table : emptyTip;\n  }\n}\n\nContent.propTypes = contentPropTypes;\n\nconst itemPropTypes = {\n  isDesktop: PropTypes.bool.isRequired,\n  item: PropTypes.object.isRequired,\n  onRemoveLink: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isLinkDialogOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  };\n\n  toggleLinkDialog = () => {\n    this.setState({\n      isLinkDialogOpen: !this.state.isLinkDialogOpen\n    });\n  };\n\n  handleMouseOver = () => {\n    this.setState({ isOpIconShown: true });\n  };\n\n  handleMouseOut = () => {\n    this.setState({ isOpIconShown: false });\n  };\n\n  viewLink = (e) => {\n    e.preventDefault();\n    this.toggleLinkDialog();\n  };\n\n  removeLink = (e) => {\n    e.preventDefault();\n    this.props.onRemoveLink(this.props.item);\n  };\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  };\n\n  render() {\n    let item = this.props.item;\n    const { isOpIconShown, isLinkDialogOpen } = this.state;\n\n    const iconUrl = Utils.getFolderIconUrl(false);\n    const repoUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}`;\n    const objUrl = `${repoUrl}${Utils.encodePath(item.path)}`;\n\n    const deletedTip = item.obj_id === '' ? <span style={{ color: 'red' }}>{gettext('(deleted)')}</span> : null;\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n        <td><Link to={objUrl}>{item.obj_name}</Link>{deletedTip}</td>\n        <td><Link to={repoUrl}>{item.repo_name}</Link></td>\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          {!item.is_expired && <a href=\"#\" className={`sf2-icon-link action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('View')} aria-label={gettext('View')} role=\"button\" onClick={this.viewLink}></a>}\n          <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Remove')} aria-label={gettext('Remove')} role=\"button\" onClick={this.removeLink}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n        <td>\n          <Link to={objUrl}>{item.obj_name}</Link>\n          <br />\n          <span>{item.repo_name}</span><br />\n          <span className=\"item-meta-info\">{gettext('Visits')}: {item.view_cnt}</span>\n          <span className=\"item-meta-info\">{gettext('Expiration')}: {this.renderExpiration()}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More operations')}\n              aria-label={gettext('More operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {!item.is_expired && <DropdownItem className=\"mobile-menu-item\" onClick={this.viewLink}>{gettext('View')}</DropdownItem>}\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.removeLink}>{gettext('Remove')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isLinkDialogOpen &&\n          <ShareAdminLinkEnhanced\n            link={item.link}\n            password={item.password}\n            viewCount={item.view_cnt}\n            toggleDialog={this.toggleLinkDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired\n};\n\nclass ShareAdminUploadLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCleanInvalidUploadLinksDialogOpen: false,\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    this.listUserUploadLinks();\n  }\n\n  listUserUploadLinks() {\n    seafileAPI.listUserUploadLinks().then((res) => {\n      let items = res.data.map(item => {\n        return new UploadLink(item);\n      });\n      this.setState({\n        loading: false,\n        items: items\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onRemoveLink = (item) => {\n    seafileAPI.deleteUploadLink(item.token).then(() => {\n      let items = this.state.items.filter(uploadItem => {\n        return uploadItem.token !== item.token;\n      });\n      this.setState({ items: items });\n      const message = gettext('Successfully deleted 1 item.');\n      toaster.success(message);\n    }).catch((error) => {\n      const errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  toggleCleanInvalidUploadLinksDialog = () => {\n    this.setState({ isCleanInvalidUploadLinksDialogOpen: !this.state.isCleanInvalidUploadLinksDialogOpen });\n  };\n\n  cleanInvalidUploadLinks = () => {\n    seafileAPI.cleanInvalidUploadLinks().then(res => {\n      const newItems = this.state.items.filter(item => item.obj_id !== '').filter(item => !item.is_expired);\n      this.setState({ items: newItems });\n      toaster.success(gettext('Successfully cleaned invalid upload links.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <TopToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n        >\n          <Button className=\"operation-item d-none d-md-block\" onClick={this.toggleCleanInvalidUploadLinksDialog}>{gettext('Clean invalid upload links')}</Button>\n        </TopToolbar>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path share-upload-nav\">\n              <ul className=\"nav\">\n                {canGenerateShareLink && (\n                  <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-share-links/`} className=\"nav-link\">{gettext('Share Links')}</Link></li>\n                )}\n                <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-upload-links/`} className=\"nav-link active\">{gettext('Upload Links')}</Link></li>\n              </ul>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                onRemoveLink={this.onRemoveLink}\n              />\n            </div>\n          </div>\n        </div>\n        {this.state.isCleanInvalidUploadLinksDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Clean invalid upload links')}\n            message={gettext('Are you sure you want to clean invalid upload links?')}\n            executeOperation={this.cleanInvalidUploadLinks}\n            confirmBtnText={gettext('Clean')}\n            toggleDialog={this.toggleCleanInvalidUploadLinksDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nShareAdminUploadLinks.propTypes = propTypes;\n\nexport default ShareAdminUploadLinks;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/share-admin/folders.js",["4172","4173","4174","4175","4176","4177","4178","4179","4180","4181","4182","4183","4184","4185"],[],"import React, { Fragment, Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport toaster from '../../components/toast';\nimport SharePermissionEditor from '../../components/select-editor/share-permission-editor';\nimport SharedFolderInfo from '../../models/shared-folder-info';\nimport PermSelect from '../../components/dialog/perm-select';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No folders shared')}</h2>\n          <p>{gettext('You have not shared any folders with other users yet. You can share a folder with other users by clicking the share icon to the right of a folder\\'s name.')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"30%\">{gettext('Share To')}</th>\n                <th width=\"24%\">{gettext('Permission')}</th>\n                <th width=\"8%\"></th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item key={index} isDesktop={isDesktop} item={item} />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      share_permission: this.props.item.share_permission,\n      share_permission_name: this.props.item.share_permission_name,\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      unshared: false,\n      isShowPermEditor: false,\n    };\n\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      this.permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  };\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  };\n\n  onMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  };\n\n  unshare = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    let options = {\n      'p': item.path\n    };\n    if (item.share_type == 'personal') {\n      Object.assign(options, {\n        'share_type': 'user',\n        'username': item.user_email\n      });\n    } else {\n      Object.assign(options, {\n        'share_type': item.share_type, // 'group'\n        'group_id': item.group_id\n      });\n    }\n\n    seafileAPI.unshareFolder(item.repo_id, options).then((res) => {\n      this.setState({\n        unshared: true\n      });\n      let message = gettext('Successfully unshared {name}').replace('{name}', item.folder_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster(errMessage);\n    });\n  };\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const postData = {\n      'permission': permission\n    };\n    let options = {\n      'p': item.path\n    };\n    if (item.share_type == 'personal') {\n      Object.assign(options, {\n        'share_type': 'user',\n        'username': item.user_email\n      });\n    } else {\n      Object.assign(options, {\n        'share_type': item.share_type, // 'group'\n        'group_id': item.group_id\n      });\n    }\n\n    seafileAPI.updateFolderSharePerm(item.repo_id, postData, options).then((res) => {\n      this.setState({share_permission: permission});\n      toaster.success(gettext('Successfully modified permission.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onEditPermission = (event) => {\n    event.nativeEvent.stopImmediatePropagation();\n    this.setState({isShowPermEditor: true});\n  };\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    const item = this.props.item;\n    let { share_permission, share_permission_name, isOpIconShown, isPermSelectDialogOpen, isShowPermEditor } = this.state;\n\n    let is_readonly = false;\n    if (share_permission == 'r' || share_permission == 'preview') {\n      is_readonly = true;\n    }\n    let iconUrl = Utils.getFolderIconUrl(is_readonly);\n    let iconTitle = Utils.getFolderIconTitle({\n      'permission': share_permission\n    });\n    let folderUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(item.path)}`;\n\n    // custom defined permission\n    if (share_permission.startsWith('custom-')) {\n      share_permission = share_permission.slice(7);\n    }\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td><Link to={folderUrl}>{item.folder_name}</Link></td>\n        <td>\n          {item.share_type == 'personal' ?\n            <span title={item.contact_email}>{item.user_name}</span> : item.group_name}\n        </td>\n        <td>\n          {!isShowPermEditor && (\n            <div>\n              <span>{Utils.sharePerms(share_permission) || share_permission_name}</span>\n              {isOpIconShown && (\n                <a href=\"#\"\n                  role=\"button\"\n                  aria-label={gettext('Edit')}\n                  title={gettext('Edit')}\n                  className=\"fa fa-pencil-alt attr-action-icon\"\n                  onClick={this.onEditPermission}>\n                </a>\n              )}\n            </div>\n          )}\n          {isShowPermEditor && (\n            <SharePermissionEditor\n              repoID={item.repo_id}\n              isTextMode={true}\n              isEditIconShow={isOpIconShown}\n              isEditing={true}\n              autoFocus={true}\n              currentPermission={share_permission}\n              permissions={this.permissions}\n              onPermissionChanged={this.changePerm}\n            />\n          )}\n        </td>\n        <td><a href=\"#\" role=\"button\" aria-label={gettext('Unshare')} className={`action-icon sf2-icon-x3 ${isOpIconShown ? '': 'invisible'}`} title={gettext('Unshare')} onClick={this.unshare}></a></td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            <Link to={folderUrl}>{item.folder_name}</Link>\n            <span className=\"item-meta-info-highlighted\">{Utils.sharePerms(share_permission)}</span>\n            <br />\n            <span className=\"item-meta-info\">{`${gettext('Share To:')} ${item.share_type == 'personal' ? item.user_name : item.group_name}`}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More operations')}\n                aria-label={gettext('More operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.unshare}>{gettext('Unshare')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen &&(\n          <PermSelect\n            repoID={item.repo_id}\n            currentPerm={share_permission}\n            permissions={this.permissions}\n            changePerm={this.changePerm}\n            toggleDialog={this.togglePermSelectDialog}\n          />\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  isDesktop: PropTypes.bool.isRequired,\n};\n\nclass ShareAdminFolders extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name',\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  _sortItems = (items, sortBy, sortOrder) => {\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.folder_name, b.folder_name);\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.folder_name, b.folder_name);\n          return -result;\n        };\n        break;\n    }\n\n    items.sort(comparator);\n    return items;\n  };\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: this._sortItems(this.state.items, sortBy, sortOrder)\n    });\n  };\n\n  componentDidMount() {\n    seafileAPI.listSharedFolders().then((res) => {\n      let items = res.data.map(item => {\n        return new SharedFolderInfo(item);\n      });\n      this.setState({\n        loading: false,\n        items: this._sortItems(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"share-admin-libs\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Folders')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              errorMsg={this.state.errorMsg}\n              loading={this.state.loading}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminFolders;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/shared-with-all/public-shared-view.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/my-libs/my-libs-deleted.js",["4186","4187"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { gettext, siteRoot, lang, trashReposExpireDays } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\n\nmoment.locale(lang);\n\nclass MyLibsDeleted extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      deletedRepoList: [],\n      isLoading: true,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listDeletedRepo().then(res => {\n      this.setState({\n        deletedRepoList: res.data,\n        isLoading: false,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  refreshDeletedRepoList = (repoID) => {\n    let deletedRepoList = this.state.deletedRepoList.filter(item => {\n      return item.repo_id !== repoID;\n    });\n    this.setState({deletedRepoList: deletedRepoList});\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north\">\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <div className=\"path-container\">\n                <Link to={ siteRoot + 'my-libs/' }>{gettext('My Libraries')}</Link>\n                <span className=\"path-split\">/</span>\n                <span>{gettext('Deleted Libraries')}</span>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && this.state.deletedRepoList.length === 0) &&\n              <EmptyTip>\n                <h2>{gettext('No deleted libraries')}</h2>\n                <p>{gettext('You have not deleted any libraries in the last {placeholder} days. A deleted library will be cleaned automatically after this period.').replace('{placeholder}', trashReposExpireDays)}</p>\n              </EmptyTip>\n              }\n              {this.state.deletedRepoList.length !== 0 &&\n                <div>\n                  <p className=\"tip mt-2\">{gettext('Tip: libraries deleted {placeholder} days ago will be cleaned automatically.').replace('{placeholder}', trashReposExpireDays)}</p>\n                  <DeletedRepoTable\n                    deletedRepoList={this.state.deletedRepoList}\n                    refreshDeletedRepoList={this.refreshDeletedRepoList}\n                  />\n                </div>\n              }\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nclass DeletedRepoTable extends Component {\n\n  render() {\n    let deletedRepos = this.props.deletedRepoList;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th style={{width: '4%'}}>{/*img*/}</th>\n            <th style={{width: '52%'}}>{gettext('Name')}</th>\n            <th style={{width: '30%'}}>{gettext('Deleted Time')}</th>\n            <th style={{width: '14%'}}></th>\n          </tr>\n        </thead>\n        <tbody>\n          {deletedRepos && deletedRepos.map((item) => {\n            return (\n              <DeletedRepoItem\n                key={item.repo_id}\n                repo={item}\n                refreshDeletedRepoList={this.props.refreshDeletedRepoList}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nDeletedRepoTable.propTypes = {\n  deletedRepoList: PropTypes.array.isRequired,\n  refreshDeletedRepoList: PropTypes.func.isRequired,\n};\n\nclass DeletedRepoItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hideRestoreMenu: true,\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      hideRestoreMenu: false,\n      highlight: true,\n    });\n  };\n\n  onMouseLeave = () => {\n    this.setState({\n      hideRestoreMenu: true,\n      highlight: false,\n    });\n  };\n\n  restoreDeletedRepo = (e) => {\n    e.preventDefault();\n    let repoID = this.props.repo.repo_id;\n    let repoName = this.props.repo.repo_name;\n    seafileAPI.restoreDeletedRepo(repoID).then(res => {\n      let message = gettext('Successfully restored the library.') + '  ' + repoName;\n      toaster.success(message);\n      this.props.refreshDeletedRepoList(repoID);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed. Please check the network.');\n      }\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    let localTime = moment.utc(this.props.repo.del_time).toDate();\n    localTime = moment(localTime).fromNow();\n    let iconUrl = Utils.getLibIconUrl(this.props.repo);\n\n    return (\n      <tr\n        className={this.state.highlight ? 'tr-highlight' : ''}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n        tabIndex=\"0\"\n        onFocus={this.onMouseEnter}\n      >\n        <td className=\"text-center\"><img src={iconUrl} alt='' width=\"24\" /></td>\n        <td className=\"name\">{this.props.repo.repo_name}</td>\n        <td className=\"update\">{localTime}</td>\n        <td>\n          <a href=\"#\" onClick={this.restoreDeletedRepo} title={gettext('Restore')}\n            role=\"button\" aria-label={gettext('Restore')}\n            className={`sf2-icon-reply action-icon ${this.state.highlight ? '' : 'vh'}`}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nDeletedRepoItem.propTypes = {\n  repo: PropTypes.object.isRequired,\n  refreshDeletedRepoList: PropTypes.func.isRequired,\n};\n\nMyLibsDeleted.propTypes = {\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nexport default MyLibsDeleted;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/share-with-ocm/remote-dir-view.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/groups/group-view.js",["4188","4189","4190","4191","4192","4193","4194","4195","4196","4197","4198","4199","4200"],[],"import React,{ Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport { gettext, siteRoot, username, canAddRepo } from '../../utils/constants';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport ModalPortal from '../../components/modal-portal';\nimport Group from '../../models/group';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport OpIcon from '../../components/op-icon';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport CreateRepoDialog from '../../components/dialog/create-repo-dialog';\nimport DismissGroupDialog from '../../components/dialog/dismiss-group-dialog';\nimport RenameGroupDialog from '../../components/dialog/rename-group-dialog';\nimport TransferGroupDialog from '../../components/dialog/transfer-group-dialog';\nimport ImportMembersDialog from '../../components/dialog/import-members-dialog';\nimport ManageMembersDialog from '../../components/dialog/manage-members-dialog';\nimport LeaveGroupDialog from '../../components/dialog/leave-group-dialog';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\n\nimport '../../css/group-view.css';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  groupID: PropTypes.string,\n};\n\nclass GroupView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true, // first loading\n      isLoadingMore: false,\n      errMessage: '',\n      emptyTip: null,\n      currentGroup: null,\n      currentRepo: null,\n      isStaff: false,\n      isOwner: false,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false,\n      repoList: [],\n      currentPage: 1,\n      perPage: 300,\n      hasNextPage: false,\n      libraryType: 'group',\n      isCreateRepoDialogShow: false,\n      isDepartmentGroup: false,\n      showGroupDropdown: false,\n      showGroupMembersPopover: false,\n      showRenameGroupDialog: false,\n      showDismissGroupDialog: false,\n      showTransferGroupDialog: false,\n      showImportMembersDialog: false,\n      showManageMembersDialog: false,\n      groupMembers: [],\n      isShowDetails: false,\n      isLeaveGroupDialogOpen: false,\n    };\n  }\n\n  componentDidMount() {\n    let groupID = this.props.groupID;\n    this.loadGroup(groupID);\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.groupID !== this.props.groupID) {\n      this.loadGroup(nextProps.groupID);\n    }\n  }\n\n  loadGroup = (groupID) => {\n    seafileAPI.getGroup(groupID).then((res) => {\n      let currentGroup = new Group(res.data);\n      let emptyTip = this.getEmptyTip(currentGroup);\n      let isStaff  = currentGroup.admins.indexOf(username) > -1;  //for item operations\n      let isOwner = currentGroup.owner === username ? true : false;\n      let isDepartmentGroup = currentGroup.parent_group_id !== 0;\n      this.setState({\n        emptyTip: emptyTip,\n        currentGroup: currentGroup,\n        isStaff: isStaff,\n        isDepartmentGroup: isDepartmentGroup,\n        isOwner: isOwner,\n        currentPage: 1,\n        repoList: []  // empty it for the current group\n      }, () => {\n        this.loadRepos(this.state.currentPage);\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errMessage: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  loadRepos = (page) => {\n    const { perPage } = this.state;\n    seafileAPI.listGroupRepos(this.props.groupID, page, perPage).then((res) => {\n      let hasNextPage = true;\n      if (res.data.length < perPage) {\n        hasNextPage = false;\n      }\n      let repoList = this.state.repoList;\n      let newRepoList = res.data.map(item => {\n        let repo = new Repo(item);\n        return repo;\n      });\n      if (newRepoList.length) {\n        repoList = repoList.concat(newRepoList);\n      }\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        currentPage: page,\n        hasNextPage: hasNextPage,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        errMessage: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  getEmptyTip = (currentGroup) => {\n    let emptyTip = null;\n    if (currentGroup) {\n      if (currentGroup.parent_group_id === 0) {\n        emptyTip = (\n          <EmptyTip>\n            <h2>{gettext('No libraries shared with this group')}</h2>\n            <p>{gettext('No libraries have been shared with this group yet. A library shared with a group can be accessed by all group members. You can share a library with a group in \"My Libraries\". You can also create a new library to be shared with this group by clicking the \"New Library\" button in the menu bar.')}</p>\n          </EmptyTip>\n        );\n      } else {\n        if (currentGroup.admins.indexOf(username) == -1) {  // is a member of this group\n          emptyTip = (\n            <EmptyTip>\n              <h2>{gettext('No libraries')}</h2>\n            </EmptyTip>\n          );\n        } else {\n          emptyTip = (\n            <EmptyTip>\n              <h2>{gettext('No libraries')}</h2>\n              <p>{gettext('You can create libraries by clicking the \"New Library\" button above.')}</p>\n            </EmptyTip>\n          );\n        }\n      }\n    }\n    return emptyTip;\n  };\n\n  onCreateRepoToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  };\n\n  onCreateRepo = (repo, groupOwnerType) => {\n    let groupId = this.props.groupID;\n    if (groupOwnerType && groupOwnerType === 'department') {\n      seafileAPI.createGroupOwnedLibrary(groupId, repo).then(res => { //need modify endpoint api\n        let object = {\n          repo_id: res.data.id,\n          repo_name: res.data.name,\n          owner_name: res.data.group_name,\n          owner_email: res.data.owner,\n          permission: res.data.permission,\n          mtime: res.data.mtime,\n          size: res.data.size,\n          encrypted: res.data.encrypted,\n        };\n        let repo = new Repo(object);\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n\n    } else {\n      seafileAPI.createGroupRepo(groupId, repo).then(res => {\n        let repo = new Repo(res.data);\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n    this.onCreateRepoToggle();\n  };\n\n  onItemDelete = (repo) => {\n    let groupID = this.props.groupID;\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n    this.loadGroup(groupID);\n  };\n\n  addRepoItem = (repo) => {\n    let newRepoList = this.state.repoList.map(item => {return item;});\n    newRepoList.unshift(repo);\n    return newRepoList;\n  };\n\n  onItemUnshare = (repo) => {\n    let group = this.state.currentGroup;\n    seafileAPI.unshareRepoToGroup(repo.repo_id, group.id).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n      this.loadGroup(group.id);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onItemRename = (repo, newName) => {\n    seafileAPI.renameGroupOwnedLibrary(this.props.groupID, repo.repo_id, newName).then(res => {\n      let repoList = this.state.repoList.map(item => {\n        if (item.repo_id === repo.repo_id) {\n          item.repo_name = newName;\n        }\n        return item;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onMonitorRepo = (repo, monitored) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.monitored = monitored;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  };\n\n  onTabNavClick = (tabName) => {\n    this.props.onTabNavClick(tabName);\n  };\n\n  toggleGroupDropdown = () => {\n    this.setState({\n      showGroupDropdown: !this.state.showGroupDropdown\n    });\n  };\n\n  toggleDismissGroupDialog = () => {\n    this.setState({\n      showDismissGroupDialog: !this.state.showDismissGroupDialog,\n      showGroupDropdown: false,\n    });\n  };\n\n  toggleRenameGroupDialog = () => {\n    this.setState({\n      showRenameGroupDialog: !this.state.showRenameGroupDialog,\n      showGroupDropdown: false,\n    });\n  };\n\n  toggleTransferGroupDialog = () => {\n    this.setState({\n      showTransferGroupDialog: !this.state.showTransferGroupDialog,\n      showGroupDropdown: false,\n    });\n  };\n\n  toggleImportMembersDialog= () => {\n    this.setState({\n      showImportMembersDialog: !this.state.showImportMembersDialog\n    });\n  };\n\n  importMembersInBatch= (file) => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    seafileAPI.importGroupMembersViaFile(this.state.currentGroup.id, file).then((res) => {\n      res.data.failed.forEach(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  };\n\n  toggleManageMembersDialog = () => {\n    this.setState({\n      showManageMembersDialog: !this.state.showManageMembersDialog,\n      showGroupDropdown: false,\n    });\n  };\n\n  toggleLeaveGroupDialog = () => {\n    this.setState({\n      isLeaveGroupDialogOpen: !this.state.isLeaveGroupDialogOpen,\n      showGroupDropdown: false,\n    });\n  };\n\n  listGroupMembers = () => {\n    seafileAPI.listGroupMembers(this.props.groupID).then((res) => {\n      this.setState({\n        groupMembers: res.data\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  toggleGroupMembersPopover = (state) => {\n    if (state === 'open') {\n      this.listGroupMembers();\n      this.setState({\n        showGroupMembersPopover: true\n      });\n    } else {\n      this.setState({\n        showGroupMembersPopover: false\n      });\n    }\n  };\n\n  onItemDetails = (repo) => {\n    this.setState({\n      isShowDetails: true,\n      currentRepo: repo,\n    });\n  };\n\n  closeDetails = () => {\n    this.setState({isShowDetails: false});\n  };\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  };\n\n  translateRole = (role) => {\n    if (role === 'Admin') {\n      return gettext('Admin');\n    }\n    else if (role === 'Member') {\n      return gettext('Member');\n    }\n    else if (role === 'Owner') {\n      return gettext('Owner');\n    }\n  };\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  };\n\n  handleScroll = (event) => {\n    // isLoadingMore: to avoid repeated request\n    const { currentPage, hasNextPage, isLoadingMore } = this.state;\n    if (hasNextPage && !isLoadingMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.loadRepos(currentPage + 1);\n        });\n      }\n    }\n  };\n\n  render() {\n    let { errMessage, emptyTip, currentGroup, isDepartmentGroup, isStaff } = this.state;\n    let isShowSettingIcon = false;\n    if (currentGroup) { // group message is loaded\n      if (currentGroup.parent_group_id === 0) {\n        isShowSettingIcon = true;\n      } else {\n        if (currentGroup.admins.indexOf(username) > -1) {\n          isShowSettingIcon = true;\n        }\n      }\n    }\n    let useRate = 0;\n    if (isDepartmentGroup && currentGroup.group_quota) {\n      useRate = currentGroup.group_quota_usage / currentGroup.group_quota * 100 + '%';\n    }\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n            <div className=\"operation\">\n              {((!isDepartmentGroup && canAddRepo) || (isDepartmentGroup && isStaff)) && (\n                Utils.isDesktop() ? (\n                  <button className=\"btn btn-secondary operation-item\" title={gettext('New Library')} onClick={this.onCreateRepoToggle}>\n                    <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n                  </button>\n                ) : (\n                  <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Library')} onClick={this.onCreateRepoToggle}></span>\n                )\n              )}\n            </div>\n          </div>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              {currentGroup && (\n                <Fragment>\n                  <div className=\"path-container\">\n                    <Link to={`${siteRoot}groups/`} onClick={() => this.onTabNavClick('groups')}>{gettext('Groups')}</Link>\n                    <span className=\"path-split\">/</span>\n                    <span>{currentGroup.name}</span>\n                    {isDepartmentGroup && (\n                      <Fragment>\n                        <span className=\"department-group-icon fas fa-building\" title={gettext('This is a special group representing a department.')}></span>\n                        {currentGroup.group_quota > 0 &&\n                          <span className=\"department-usage-container\">\n                            <div className=\"department-usage\">\n                              <span id=\"quota-bar\" className=\"department-quota-bar\"><span id=\"quota-usage\" className=\"usage\" style={{width: useRate}}></span></span>\n                              <span className=\"department-quota-info\">{Utils.bytesToSize(currentGroup.group_quota_usage)} / {Utils.bytesToSize(currentGroup.group_quota)}</span>\n                            </div>\n                          </span>\n                        }\n                      </Fragment>\n                    )}\n                  </div>\n                  <div className=\"path-tool\">\n                    { isShowSettingIcon &&\n                    <React.Fragment>\n                      <OpIcon\n                        className=\"sf2-icon-cog1 action-icon group-top-action-icon\"\n                        title={gettext('Settings')}\n                        op={this.toggleGroupDropdown}\n                      />\n                      {this.state.showGroupDropdown &&\n                        <div className=\"sf-popover\" id=\"group-setting-popover\">\n                          <div className=\"sf-popover-hd sf-popover-title\">\n                            <span>{gettext('Settings')}</span>\n                            <a href=\"#\" className=\"sf-popover-close js-close sf2-icon-x1 action-icon\"\n                              role=\"button\"\n                              aria-label={gettext('Close')}\n                              onClick={this.toggleGroupDropdown}></a>\n                          </div>\n                          <div className=\"sf-popover-con\">\n                            {(this.state.isStaff || this.state.isOwner) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleRenameGroupDialog}>{gettext('Rename')}</a></li>\n                              {\n                                this.state.isOwner &&\n                                <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleTransferGroupDialog} >{gettext('Transfer')}</a></li>\n                              }\n                            </ul>\n                            }\n                            {(this.state.isStaff || this.state.isOwner) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleImportMembersDialog} >{gettext('Import Members')}</a></li>\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleManageMembersDialog} >{gettext('Manage Members')}</a></li>\n                            </ul>\n                            }\n                            {\n                              this.state.isOwner &&\n                              <ul className=\"sf-popover-list\">\n                                <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleDismissGroupDialog}>{gettext('Delete Group')}</a></li>\n                              </ul>\n                            }\n                            {/* gourp owner only can dissmiss group, admin could not quit, department member could not quit */}\n                            {(!this.state.isOwner && !isDepartmentGroup) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleLeaveGroupDialog}>{gettext('Leave Group')}</a></li>\n                            </ul>\n                            }\n                          </div>\n                        </div>}\n                    </React.Fragment>\n                    }\n                    <a href=\"#\"\n                      className=\"sf2-icon-user2 action-icon group-top-action-icon\"\n                      title={gettext('Members')} id=\"groupMembers\"\n                      onClick={() => this.toggleGroupMembersPopover('open')}>\n                    </a>\n                    {this.state.showGroupMembersPopover &&\n                    <div className=\"sf-popover\" id=\"group-members-popover\">\n                      <div className=\"sf-popover-hd sf-popover-title group-member-list-header\">\n                        <span>{gettext('Members')}</span>\n                        <a href=\"#\" className=\"sf-popover-close js-close sf2-icon-x1 action-icon\"\n                          onClick={this.toggleGroupMembersPopover}></a>\n                      </div>\n                      <div className=\"sf-popover-con\">\n                        <ul className=\"sf-popover-list group-member-list\">\n                          {this.state.groupMembers.map((item, index) => {\n                            return (\n                              <li key={index}>\n                                <a href=\"#\" className=\"sf-popover-item user-item d-flex\">\n                                  <img src={item.avatar_url} alt=\"\" className=\"group-member-avatar avatar\"/>\n                                  <span className=\"txt-item ellipsis d-flex\">\n                                    <span className=\"group-member-name ellipsis\">{item.name}</span>\n                                    <span className=\"group-member-admin\">{this.translateRole(item.role)}</span>\n                                  </span>\n                                </a>\n                              </li>\n                            );\n                          })}\n                        </ul>\n                      </div>\n                    </div>}\n                    {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n                    {this.state.isSortOptionsDialogOpen &&\n                    <SortOptionsDialog\n                      toggleDialog={this.toggleSortOptionsDialog}\n                      sortBy={this.state.sortBy}\n                      sortOrder={this.state.sortOrder}\n                      sortItems={this.sortItems}\n                    />\n                    }\n                  </div>\n                </Fragment>\n              )}\n            </div>\n            <div className=\"cur-view-content d-block\" onScroll={this.handleScroll}>\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && errMessage) && <div className=\"error text-center mt-2\">{errMessage}</div>}\n              {(!this.state.isLoading && this.state.repoList.length === 0) && emptyTip}\n              {(!this.state.isLoading && this.state.repoList.length > 0) &&\n                <SharedRepoListView\n                  repoList={this.state.repoList}\n                  hasNextPage={this.state.hasNextPage}\n                  currentGroup={this.state.currentGroup}\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  sortItems={this.sortItems}\n                  onItemUnshare={this.onItemUnshare}\n                  onItemDelete={this.onItemDelete}\n                  onItemDetails={this.onItemDetails}\n                  onItemRename={this.onItemRename}\n                  onMonitorRepo={this.onMonitorRepo}\n                />\n              }\n            </div>\n          </div>\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail currentRepo={this.state.currentRepo} closeDetails={this.closeDetails}/>\n            </div>\n          )}\n        </div>\n        {this.state.isCreateRepoDialogShow && !this.state.isDepartmentGroup && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.state.libraryType}\n              onCreateToggle={this.onCreateRepoToggle}\n              onCreateRepo={this.onCreateRepo}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateRepoDialogShow && this.state.isDepartmentGroup &&\n          <CreateRepoDialog\n            isAdmin={this.state.isAdmin}\n            onCreateToggle={this.onCreateRepoToggle}\n            onCreateRepo={this.onCreateRepo}\n            libraryType='department'\n          />\n        }\n        {this.state.showRenameGroupDialog &&\n          <RenameGroupDialog\n            showRenameGroupDialog={this.state.showRenameGroupDialog}\n            toggleRenameGroupDialog={this.toggleRenameGroupDialog}\n            loadGroup={this.loadGroup}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n            currentGroupName={currentGroup.name}\n          />\n        }\n        {this.state.showDismissGroupDialog &&\n          <DismissGroupDialog\n            showDismissGroupDialog={this.state.showDismissGroupDialog}\n            toggleDismissGroupDialog={this.toggleDismissGroupDialog}\n            loadGroup={this.loadGroup}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n        {this.state.showTransferGroupDialog &&\n          <TransferGroupDialog\n            toggleTransferGroupDialog={this.toggleTransferGroupDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n        { this.state.showImportMembersDialog &&\n          <ImportMembersDialog\n            toggleImportMembersDialog={this.toggleImportMembersDialog}\n            importMembersInBatch={this.importMembersInBatch}\n          />\n        }\n        {this.state.showManageMembersDialog &&\n          <ManageMembersDialog\n            toggleManageMembersDialog={this.toggleManageMembersDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n            isOwner={this.state.isOwner}\n          />\n        }\n        {this.state.isLeaveGroupDialogOpen &&\n          <LeaveGroupDialog\n            toggleLeaveGroupDialog={this.toggleLeaveGroupDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nGroupView.propTypes = propTypes;\n\nexport default GroupView;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/ocm-via-webdav/ocm-via-webdav.js",["4201","4202","4203","4204","4205","4206","4207","4208","4209"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\n\nclass OCMViaWebdav extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      shareID: '',\n      path: '',\n      items: [],\n      errorMsg: '',\n    };\n  }\n\n  componentDidMount() {\n    this.getAllReceivedShares();\n  }\n\n  getAllReceivedShares = () => {\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/';\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        shareID: '',\n        path: '',\n        items: res.data.received_share_list,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  leaveShare = (item) => {\n    const { id, name } = item;\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + id + '/';\n    seafileAPI.req.delete(url).then((res) => {\n      let items = this.state.items.filter(item => {\n        return item.id != id;\n      });\n      this.setState({items: items});\n      toaster.success(gettext('Successfully unshared {name}').replace('{name}', name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  openFolder = (item) => {\n\n    this.setState({\n      loading: true,\n    });\n\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + item.id + '/?path=' + item.path;\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        shareID: item.id,\n        path: res.data.parent_dir,\n        items: res.data.received_share_list,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onPathClick = (path) => {\n\n    this.setState({\n      loading: true,\n    });\n\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + this.state.shareID + '/?path=' + path;\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.received_share_list,\n        path: res.data.parent_dir,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path align-items-center\">\n              <DirPath\n                shareID={this.state.shareID}\n                currentPath={this.state.path}\n                onPathClick={this.onPathClick}\n                getAllReceivedShares={this.getAllReceivedShares}\n              />\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                path={this.state.path}\n                leaveShare={this.leaveShare}\n                openFolder={this.openFolder}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\n\nclass Content extends Component {\n\n  static propTypes = {\n    loading: PropTypes.bool.isRequired,\n    errorMsg: PropTypes.string.isRequired,\n    items: PropTypes.array.isRequired,\n    path: PropTypes.string.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items, path } = this.props;\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries have been shared with you')}</h2>\n        <p>{gettext('No libraries have been shared with you from other servers.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const table = (\n        <table>\n          <thead>\n            <tr>\n              <th width=\"5%\"></th>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"35%\">{gettext('Shared By')}</th>\n              <th width=\"20%\">{gettext('Time')}</th>\n              <th width=\"5%\">{/* operations */}</th>\n              <th width=\"5%\">{/* operations */}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                item={item}\n                path={path}\n                leaveShare={this.props.leaveShare}\n                openFolder={this.props.openFolder}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  data: PropTypes.object.isRequired,\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  path: PropTypes.string.isRequired,\n  leaveShare: PropTypes.func.isRequired,\n  openFolder: PropTypes.func.isRequired,\n};\n\nclass Item extends Component {\n\n  static propTypes = {\n    item: PropTypes.object.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  };\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  };\n\n  downloadFile = () => {\n    let downloadUrl = siteRoot + 'ocm-via-webdav/download-received-file/?share_id=' + this.props.item.id + '&path=' + this.props.item.path;\n    window.location.href = downloadUrl;\n  };\n\n  leaveShare = (e) => {\n    e.preventDefault();\n    this.props.leaveShare(this.props.item);\n  };\n\n  openFolder = (e) => {\n    e.preventDefault();\n    this.props.openFolder(this.props.item);\n  };\n\n  render() {\n    const item = this.props.item;\n    const { isOpIconShown } = this.state;\n\n    if (item.is_dir) {\n      item.icon_url = Utils.getFolderIconUrl();\n    } else {\n      item.icon_url = Utils.getFileIconUrl(item.name);\n    }\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><img src={item.icon_url} width=\"24\" alt=\"\" /></td>\n        <td>\n          {item.is_dir ? <a href=\"#\" onClick={this.openFolder}>{item.name}</a> : item.name}\n        </td>\n        <td>{item.shared_by}</td>\n        <td title={moment(item.last_modified).format('llll')}>{moment(item.ctime).fromNow()}</td>\n        <td>{item.is_dir ? '' : <a href=\"#\" className={`action-icon sf2-icon-download ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Download')} onClick={this.downloadFile}></a>}\n        </td>\n        <td>{this.props.path ? '' : <a href=\"#\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Leave Share')} onClick={this.leaveShare}></a>}\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  path: PropTypes.string.isRequired,\n  leaveShare: PropTypes.func.isRequired,\n  openFolder: PropTypes.func.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  static propTypes = {\n    currentPath: PropTypes.string.isRequired,\n    onPathClick: PropTypes.func.isRequired,\n    getAllReceivedShares: PropTypes.func.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n    };\n  }\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  };\n\n  turnPathToLink = (path) => {\n    path = path.slice(1, path.length - 1);\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        if (index === 0) {\n          nodePath = '/';\n        } else {\n          nodePath += item + '/';\n        }\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  };\n\n  render() {\n    let pathElem = this.turnPathToLink(this.props.currentPath);\n    return (\n      <div className=\"path-container\">\n        <a href=\"#\" onClick={this.props.getAllReceivedShares}>{gettext('All')}</a>\n        {pathElem}\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = {\n  shareID: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  getAllReceivedShares: PropTypes.func.isRequired,\n};\n\nexport default OCMViaWebdav;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/groups/groups-view.js",["4210"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, siteRoot, canAddGroup } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport Group from '../../models/group';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport GroupsToolbar from '../../components/toolbar/groups-toolbar';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport CreateGroupDialog from '../../components/dialog/create-group-dialog';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport EmptyTip from '../../components/empty-tip';\n\nimport '../../css/groups.css';\n\nconst propTypes = {\n  group: PropTypes.object.isRequired,\n  onItemDetails: PropTypes.func.isRequired,\n};\n\n\nclass RepoListViewPanel extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoList: [],\n    };\n  }\n\n  componentDidMount() {\n    let group = this.props.group;\n    let repoList = group.repos.map(item => {\n      let repo = new Repo(item);\n      return repo;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onItemUnshare = (repo) => {\n    let group = this.props.group;\n    seafileAPI.unshareRepoToGroup(repo.repo_id, group.id).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onItemDelete = (repo) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n  };\n\n  onItemRename = (repo, newName) => {\n    let group = this.props.group;\n    seafileAPI.renameGroupOwnedLibrary(group.id, repo.repo_id, newName).then(res => {\n      let repoList = this.state.repoList.map(item => {\n        if (item.repo_id === repo.repo_id) {\n          item.repo_name = newName;\n        }\n        return item;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onMonitorRepo = (repo, monitored) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.monitored = monitored;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  };\n\n  render() {\n    let group = this.props.group;\n    const emptyTip = <p className=\"group-item-empty-tip\">{gettext('No libraries')}</p>;\n    return (\n      <div className=\"group-list-panel\">\n        <h4 className=\"group-item-heading ellipsis\">\n          <a href={`${siteRoot}group/${group.id}/`} title={group.name}>{group.name}</a>\n        </h4>\n        {this.state.repoList.length === 0 ?\n          emptyTip :\n          <SharedRepoListView\n            isShowTableThread={false}\n            isShowRepoOwner={false}\n            currentGroup={this.props.group}\n            repoList={this.state.repoList}\n            onItemUnshare={this.onItemUnshare}\n            onItemDelete={this.onItemDelete}\n            onItemDetails={this.props.onItemDetails}\n            onItemRename={this.onItemRename}\n            onMonitorRepo={this.onMonitorRepo}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nRepoListViewPanel.propTypes = propTypes;\n\nclass GroupsView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      groupList: [],\n      showAddGroupModal: false,\n      isShowDetails: false,\n      currentRepo: null,\n    };\n  }\n\n  listGroups = () => {\n    seafileAPI.listGroups(true).then((res) => {\n      // `{'with_repos': 1}`: list repos of every group\n      let groupList = res.data.map(item => {\n        let group = new Group(item);\n        return group;\n      });\n      this.setState({\n        isLoading: false,\n        groupList: groupList.sort((a, b) => {\n          return a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n        })\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  toggleAddGroupModal = () => {\n    this.setState({\n      showAddGroupModal: !this.state.showAddGroupModal\n    });\n  };\n\n  onCreateGroup = () => {\n    this.setState({\n      showAddGroupModal: false,\n      isLoading: true,\n      groupList: [],\n    });\n    this.listGroups();\n  };\n\n  componentDidMount() {\n    this.listGroups();\n  }\n\n  onItemDetails = (repo) => {\n    this.setState({\n      isShowDetails: true,\n      currentRepo: repo,\n    });\n  };\n\n  closeDetails = () => {\n    this.setState({isShowDetails: false});\n  };\n\n  render() {\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No groups')}</h2>\n        {canAddGroup ?\n          <p>{gettext('You are not in any groups. Groups allow multiple people to collaborate on libraries. You can create a group by clicking the \"New Group\" button in the menu bar.')}</p> :\n          <p>{gettext('You are not in any groups. Groups allow multiple people to collaborate on libraries. Groups you join will be listed here.')}</p>\n        }\n      </EmptyTip>\n    );\n\n    return (\n      <Fragment>\n        <GroupsToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n          toggleAddGroupModal={this.toggleAddGroupModal}\n        />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('My Groups')}</h3>\n            </div>\n            <div className=\"cur-view-content cur-view-content-groups\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && this.state.errorMsg) && <div className=\"error text-center mt-2\">{this.state.errorMsg}</div>}\n              {(!this.state.isLoading && !this.state.errorMsg && this.state.groupList.length == 0) && emptyTip}\n              {!this.state.isLoading && this.state.groupList.map((group, index) => {\n                return (\n                  <RepoListViewPanel\n                    key={index}\n                    group={group}\n                    onItemDetails={this.onItemDetails}\n                  />\n                );\n              })}\n            </div>\n          </div>\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail currentRepo={this.state.currentRepo} closeDetails={this.closeDetails}/>\n            </div>\n          )}\n        </div>\n        { this.state.showAddGroupModal &&\n          <CreateGroupDialog\n            toggleAddGroupModal={this.toggleAddGroupModal}\n            onCreateGroup={this.onCreateGroup}\n            showAddGroupModal={this.state.showAddGroupModal}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst GroupsViewPropTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nGroupsView.propTypes = GroupsViewPropTypes;\n\nexport default GroupsView;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/lib-content-view/lib-content-view.js",["4211","4212","4213","4214","4215","4216","4217","4218","4219"],["4220"],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport moment from 'moment';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot, username, enableVideoThumbnail } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport collabServer from '../../utils/collab-server';\nimport Dirent from '../../models/dirent';\nimport FileTag from '../../models/file-tag';\nimport RepoTag from '../../models/repo-tag';\nimport RepoInfo from '../../models/repo-info';\nimport TreeNode from '../../components/tree-view/tree-node';\nimport treeHelper from '../../components/tree-view/tree-helper';\nimport toaster from '../../components/toast';\nimport ModalPortal from '../../components/modal-portal';\nimport LibDecryptDialog from '../../components/dialog/lib-decrypt-dialog';\nimport LibContentToolbar from './lib-content-toolbar';\nimport LibContentContainer from './lib-content-container';\nimport FileUploader from '../../components/file-uploader/file-uploader';\nimport CopyMoveDirentProgressDialog from '../../components/dialog/copy-move-dirent-progress-dialog';\nimport DeleteFolderDialog from '../../components/dialog/delete-folder-dialog';\n\nconst propTypes = {\n  pathPrefix: PropTypes.array.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  onMenuClick: PropTypes.func.isRequired,\n  repoID: PropTypes.string,\n};\n\nclass LibContentView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentMode: cookie.load('seafile_view_mode') || 'list',\n      path: '',\n      pathExist: true,\n      isViewFile: false,\n      hash: '',\n      currentRepoInfo: null,\n      repoName: '',\n      repoEncrypted: false,\n      libNeedDecrypt: false,\n      isGroupOwnedRepo: false,\n      userPerm: '',\n      selectedDirentList: [],\n      fileTags: [],\n      repoTags: [],\n      usedRepoTags: [],\n      isTreeDataLoading: true,\n      treeData: treeHelper.buildTree(),\n      currentNode: null,\n      isFileLoading: true,\n      isFileLoadedErr: false,\n      filePermission: '',\n      content: '',\n      lastModified: '',\n      latestContributor: '',\n      isDirentListLoading: true,\n      direntList: [],\n      isDirentSelected: false,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isAllDirentSelected: false,\n      dirID: '',  // for update dir list\n      errorMsg: '',\n      isDirentDetailShow: false,\n      direntDetailPanelTab: '',\n      updateDetail: false,\n      itemsShowLength: 100,\n      isSessionExpired: false,\n      isCopyMoveProgressDialogShow: false,\n      isDeleteFolderDialogOpen: false,\n      asyncCopyMoveTaskId: '',\n      asyncOperationType: 'move',\n      asyncOperationProgress: 0,\n      asyncOperatedFilesLength: 0,\n    };\n\n    this.oldonpopstate = window.onpopstate;\n    window.onpopstate = this.onpopstate;\n    this.lastModifyTime = new Date();\n    this.isNeedUpdateHistoryState = true; // Load, refresh page, switch mode for the first time, no need to set historyState\n    this.currentMoveItemName = '';\n    this.currentMoveItemPath = '';\n  }\n\n  showDirentDetail = (direntDetailPanelTab) => {\n    if (direntDetailPanelTab) {\n      this.setState({ direntDetailPanelTab: direntDetailPanelTab }, () => {\n        this.setState({ isDirentDetailShow: true });\n      });\n    } else {\n      this.setState({\n        direntDetailPanelTab: '',\n        isDirentDetailShow: true\n      });\n    }\n  };\n\n  toggleDirentDetail = () => {\n    this.setState({\n      direntDetailPanelTab: '',\n      isDirentDetailShow: !this.state.isDirentDetailShow\n    });\n  };\n\n  closeDirentDetail = () => {\n    this.setState({\n      isDirentDetailShow: false,\n      direntDetailPanelTab: '',\n    });\n  };\n\n  UNSAFE_componentWillMount() {\n    const hash = window.location.hash;\n    if (hash.slice(0, 1) === '#') {\n      this.setState({hash: hash});\n    }\n  }\n\n  async componentDidMount() {\n    // eg: http://127.0.0.1:8000/library/repo_id/repo_name/**/**/\\\n    let repoID = this.props.repoID;\n    let location = window.location.href.split('?')[0]; // '?': to remove the effect of '?notifications=all', which is added to the URL when the 'view all notifications' dialog is open.\n    location = decodeURIComponent(location);\n    let path = location.slice(location.indexOf(repoID) + repoID.length + 1); // get the string after repoID\n    path = path.slice(path.indexOf('/')); // get current path\n    // If the path isn't a root path and ends with '/', delete the ending '/'\n    if (path.length > 1 && path[path.length - 1] === '/') {\n      path = path.slice(0, path.length - 1);\n    }\n\n    try {\n      const repoRes = await seafileAPI.getRepoInfo(repoID);\n      const repoInfo = new RepoInfo(repoRes.data);\n      const isGroupOwnedRepo = repoInfo.owner_email.indexOf('@seafile_group') > -1;\n\n      this.setState({\n        currentRepoInfo: repoInfo,\n      });\n\n      if (repoInfo.permission.startsWith('custom-')) {\n        const permissionID = repoInfo.permission.split('-')[1];\n        const permissionRes = await seafileAPI.getCustomPermission(repoID, permissionID);\n        window.custom_permission = permissionRes.data.permission;\n      }\n\n      this.isNeedUpdateHistoryState = false;\n      this.setState({\n        repoName: repoInfo.repo_name,\n        libNeedDecrypt: repoInfo.lib_need_decrypt,\n        repoEncrypted: repoInfo.encrypted,\n        isGroupOwnedRepo: isGroupOwnedRepo,\n        path: path\n      });\n\n      if (!repoInfo.lib_need_decrypt) {\n        this.loadDirData(path);\n      }\n    } catch (error) {\n      if (error.response) {\n        if (error.response.status == 403) {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Permission denied')\n          });\n\n          let errorMsg = gettext('Permission denied');\n          toaster.danger(errorMsg);\n        } else if (error.response.status == 404) {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Library share permission not found.')\n          });\n        } else {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Error')\n          });\n        }\n      } else {\n        this.setState({\n          isDirentListLoading: false,\n          errorMsg: gettext('Please check the network.')\n        });\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    window.onpopstate = this.oldonpopstate;\n    collabServer.unwatchRepo(this.props.repoID, this.onRepoUpdateEvent);\n  }\n\n  componentDidUpdate() {\n    this.lastModifyTime = new Date();\n  }\n\n  onpopstate = (event) => {\n    if (event.state && event.state.key) { // root path\n      if (this.state.path === '/') {\n        return;\n      } else {\n        let path = '/';\n        this.loadDirentList(path);\n        this.setState({\n          path: path,\n          isViewFile: false\n        });\n      }\n    } else if (event.state && event.state.path) { // file path\n      let path = event.state.path;\n      if (this.state.currentMode === 'column') {\n        if (Utils.isMarkdownFile(path)) { // Judging not strict\n          this.showFile(path);\n          return;\n        }\n      }\n      this.loadDirentList(path);\n      this.setState({\n        path: path,\n        isViewFile: false\n      });\n    }\n  };\n\n  onRepoUpdateEvent = () => {\n    let currentTime = new Date();\n    if ((parseFloat(currentTime - this.lastModifyTime)/1000) <= 5) {\n      return;\n    }\n    let repoID = this.props.repoID;\n    let { path, dirID } = this.state;\n\n    if (this.state.currentMode === 'column') {\n      if (this.state.isViewFile) {\n        this.updateColumnMarkdownData(path);\n      } else {\n        seafileAPI.dirMetaData(repoID, path).then((res) => {\n          if (res.data.id !== dirID) {\n            this.loadDirentList(path);\n          }\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    } else {\n      seafileAPI.dirMetaData(repoID, path).then((res) => {\n        if (res.data.id !== dirID) {\n          this.loadDirentList(path);\n        }\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  updateUsedRepoTags = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let repoTags = [];\n      let usedRepoTags = [];\n      res.data.repo_tags.forEach(item => {\n        const repoTag = new RepoTag(item);\n        repoTags.push(repoTag);\n        if (repoTag.fileCount > 0) {\n          usedRepoTags.push(repoTag);\n        }\n      });\n      this.setState({\n        repoTags: repoTags,\n        usedRepoTags: usedRepoTags\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  updateColumnMarkdownData = (filePath) => {\n    let repoID = this.props.repoID;\n    // update state\n    this.setState({\n      path: filePath,\n      isViewFile: true\n    });\n\n    // update data\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      let { mtime, permission, last_modifier_name } = res.data;\n      seafileAPI.getFileDownloadLink(repoID, filePath).then((res) => {\n        seafileAPI.getFileContent(res.data).then((res) => {\n          if (this.state.content !== res.data) {\n            this.setState({isFileLoading: true});\n          }\n          this.setState({\n            content: res.data,\n            filePermission: permission,\n            latestContributor: last_modifier_name,\n            lastModified: moment.unix(mtime).fromNow(),\n            isFileLoading: false,\n            isFileLoadedErr: false,\n          });\n        });\n      });\n    }).catch(() => {\n      this.setState({\n        isFileLoading: false,\n        isFileLoadedErr: true,\n      });\n    });\n  };\n\n  // load data\n  loadDirData = (path) => {\n    let repoID = this.props.repoID;\n\n    // listen current repo\n    collabServer.watchRepo(repoID, this.onRepoUpdateEvent);\n\n    // list used FileTags\n    this.updateUsedRepoTags();\n\n    if (Utils.isMarkdownFile(path)) {\n      seafileAPI.getFileInfo(this.props.repoID, path).then(() => {\n        if (this.state.currentMode !== 'column') {\n          cookie.save('seafile_view_mode', 'column');\n          this.setState({currentMode: 'column'});\n        }\n        this.loadSidePanel(path);\n        this.showFile(path);\n      }).catch(() => {\n        if (this.state.currentMode === 'column') { // After an error occurs, follow dir\n          this.loadSidePanel(path);\n          this.showDir(path);\n        } else {\n          this.showDir(path);\n        }\n      });\n    } else {\n      if (this.state.currentMode === 'column') {\n        this.loadSidePanel(path);\n        this.showDir(path);\n      } else {\n        this.showDir(path);\n      }\n    }\n  };\n\n  loadSidePanel = (path) => {\n    let repoID = this.props.repoID;\n    if (path === '/') {\n      seafileAPI.listDir(repoID, '/').then(res => {\n        const { dirent_list, user_perm } = res.data;\n        let tree = this.state.treeData;\n        this.addResponseListToNode(dirent_list, tree.root);\n        this.setState({\n          isTreeDataLoading: false,\n          treeData: tree,\n          userPerm: user_perm,\n        });\n      }).catch(() => {\n        this.setState({isTreeDataLoading: false});\n      });\n    } else {\n      this.loadNodeAndParentsByPath(path);\n    }\n  };\n\n  showDir = (path) => {\n    let repoID = this.props.repoID;\n\n    if (!this.state.isSessionExpired) {\n      // update stste\n      this.setState({\n        isDirentListLoading: true,\n        isViewFile: false,\n        selectedDirentList: [],\n      });\n    }\n\n    // update data\n    this.loadDirentList(path);\n    this.resetShowLength();\n\n    if (!this.isNeedUpdateHistoryState) {\n      this.isNeedUpdateHistoryState = true;\n      return;\n    }\n    // update location\n    let repoInfo = this.state.currentRepoInfo;\n    let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(path);\n    window.history.pushState({url: url, path: path}, path, url);\n  };\n\n  showFile = (filePath) => {\n    let repoID = this.props.repoID;\n\n    if (this.state.currentMode === 'column') {\n      seafileAPI.listFileTags(repoID, filePath).then(res => {\n        let fileTags = res.data.file_tags.map(item => {\n          return new FileTag(item);\n        });\n        this.setState({fileTags: fileTags});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n\n    // update state\n    this.setState({\n      isFileLoading: true,\n      path: filePath,\n      isViewFile: true\n    });\n\n    // update data\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      let { mtime, permission, last_modifier_name } = res.data;\n      seafileAPI.getFileDownloadLink(repoID, filePath).then((res) => {\n        seafileAPI.getFileContent(res.data).then((res) => {\n          this.setState({\n            content: res.data,\n            filePermission: permission,\n            latestContributor: last_modifier_name,\n            lastModified: moment.unix(mtime).fromNow(),\n            isFileLoading: false,\n            isFileLoadedErr: false,\n          });\n        });\n      });\n    }).catch((err) => {\n      let errMsg = Utils.getErrorMsg(err, true);\n      if (!err.response || err.response.status !== 403) {\n        toaster.danger(errMsg);\n      }\n      this.setState({\n        isFileLoading: false,\n        isFileLoadedErr: true,\n      });\n    });\n\n    // update location\n    let repoInfo = this.state.currentRepoInfo;\n    let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(filePath);\n    window.history.pushState({url: url, path: filePath}, filePath, url);\n  };\n\n  loadDirentList = (path) => {\n    let repoID = this.props.repoID;\n    seafileAPI.listDir(repoID, path, {'with_thumbnail': true}).then(res => {\n      let direntList = [];\n      res.data.dirent_list.forEach(item => {\n        let dirent = new Dirent(item);\n        direntList.push(dirent);\n      });\n\n      this.setState({\n        pathExist: true,\n        userPerm: res.data.user_perm,\n        isDirentListLoading: false,\n        direntList: Utils.sortDirents(direntList, this.state.sortBy, this.state.sortOrder),\n        dirID: res.data.dir_id,\n        path: path,\n        isSessionExpired: false,\n      });\n\n      if (!this.state.repoEncrypted && direntList.length) {\n        this.getThumbnails(repoID, path, this.state.direntList);\n      }\n\n      if (this.state.currentRepoInfo.is_admin) {\n        if (this.foldersSharedOut) {\n          this.identifyFoldersSharedOut();\n        } else {\n          this.foldersSharedOut = [];\n          seafileAPI.getAllRepoFolderShareInfo(repoID).then(res => {\n            res.data.share_info_list.forEach(item => {\n              if (this.foldersSharedOut.indexOf(item.path) === -1) {\n                this.foldersSharedOut.push(item.path);\n              }\n            });\n            this.identifyFoldersSharedOut();\n          });\n        }\n      }\n    }).catch((err) => {\n      Utils.getErrorMsg(err, true);\n      if (err.response && err.response.status === 403) {\n        this.setState({isDirentListLoading: false});\n        return;\n      }\n      this.setState({\n        isDirentListLoading: false,\n        pathExist: false,\n      });\n    });\n  };\n\n  identifyFoldersSharedOut = () => {\n    const { path, direntList } = this.state;\n    if (this.foldersSharedOut.length == 0) {\n      return;\n    }\n    direntList.forEach(dirent => {\n      if (dirent.type == 'dir' && this.foldersSharedOut.indexOf(Utils.joinPath(path, dirent.name) + '/') !== -1) {\n        dirent.has_been_shared_out = true;\n      }\n    });\n    this.setState({\n      direntList: direntList\n    });\n  };\n\n  onListContainerScroll = () => {\n    let itemsShowLength = this.state.itemsShowLength + 100;\n    this.setState({itemsShowLength: itemsShowLength});\n  };\n\n  resetShowLength = () => {\n    this.setState({itemsShowLength: 100});\n  };\n\n  getThumbnails = (repoID, path, direntList) => {\n    let items = direntList.filter((item) => {\n      return (Utils.imageCheck(item.name) || (enableVideoThumbnail && Utils.videoCheck(item.name))) && !item.encoded_thumbnail_src;\n    });\n    if (items.length == 0) {\n      return ;\n    }\n\n    const _this = this;\n    const len = items.length;\n    const thumbnailSize = 48;\n    let getThumbnail = (i) => {\n      const curItem = items[i];\n      const curItemPath = [path, curItem.name].join('/');\n      seafileAPI.createThumbnail(repoID, curItemPath, thumbnailSize).then((res) => {\n        curItem.encoded_thumbnail_src = res.data.encoded_thumbnail_src;\n      }).catch((error) => {\n        // do nothing\n      }).then(() => {\n        if (i < len - 1) {\n          getThumbnail(++i);\n        } else {\n          _this.setState({\n            direntList: direntList\n          });\n        }\n      });\n    };\n    getThumbnail(0);\n  };\n\n  updateMoveCopyTreeNode = (path) => {\n    let repoID = this.props.repoID;\n\n    let tree = this.state.treeData.clone();\n    let node = tree.getNodeByPath(path);\n\n    // for node not loaded, such as a deep folder '/vv/aa'\n    if (!node) { // node: null\n      return false;\n    }\n\n    let nodeChildren = node.children.map(item => item.object);\n    let nodeChildrenNames = nodeChildren.map(item => item.name);\n\n    seafileAPI.listDir(repoID, path).then(res => {\n      let newDirentList = res.data.dirent_list;\n      let newAddedDirents = newDirentList.filter(item => {\n        return !nodeChildrenNames.includes(item.name);\n      });\n      newAddedDirents.forEach(item => {\n        this.addNodeToTree(item.name, path, item.type);\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  async getAsyncCopyMoveProgress() {\n    let { asyncOperationType, asyncCopyMoveTaskId } = this.state;\n    try {\n      let res = await seafileAPI.queryAsyncOperationProgress(asyncCopyMoveTaskId);\n      let data = res.data;\n      if (data.failed) {\n        let message = gettext('Failed to move files to another library.');\n        if (asyncOperationType === 'copy') {\n          message = gettext('Failed to copy files to another library.');\n        }\n        toaster.danger(message);\n        this.setState({\n          asyncOperationProgress: 0,\n          isCopyMoveProgressDialogShow: false,\n        });\n        return;\n      }\n\n      if (data.successful) {\n        if (asyncOperationType === 'move') {\n          if (this.currentMoveItemName && this.currentMoveItemPath) {\n            if (this.state.currentMode === 'column') {\n              this.deleteTreeNode(this.currentMoveItemPath);\n            }\n            this.moveDirent(this.currentMoveItemName);\n            this.currentMoveItemName = '';\n            this.currentMoveItemPath = '';\n          } else {\n            if (this.state.currentMode === 'column') {\n              let direntPaths = this.getSelectedDirentPaths();\n              this.deleteTreeNodes(direntPaths);\n            }\n            let direntNames = this.getSelectedDirentNames();\n            this.moveDirents(direntNames);\n          }\n        }\n\n        this.setState({isCopyMoveProgressDialogShow: false});\n        let message = gettext('Successfully moved files to another library.');\n        if (asyncOperationType === 'copy') {\n          message = gettext('Successfully copied files to another library.');\n        }\n        toaster.success(message);\n        return;\n      }\n      // init state: total is 0\n      let asyncOperationProgress = !data.total ? 0 : parseInt((data.done/data.total * 100).toFixed(2));\n\n      this.getAsyncCopyMoveProgress();\n      this.setState({asyncOperationProgress: asyncOperationProgress});\n    } catch (error) {\n      this.setState({\n        asyncOperationProgress: 0,\n        isCopyMoveProgressDialogShow: false,\n      });\n    }\n  }\n\n  cancelCopyMoveDirent = () => {\n    let taskId = this.state.asyncCopyMoveTaskId;\n    seafileAPI.cancelCopyMoveOperation(taskId);\n\n    this.currentMoveItemName = '';\n    this.currentMoveItemPath = '';\n    let direntList = this.state.direntList;\n    this.setState({direntList: direntList.slice(0)});\n  };\n\n  onMoveProgressDialogToggle = () => {\n    let { asyncOperationProgress } = this.state;\n    if (asyncOperationProgress !== 100) {\n      this.cancelCopyMoveDirent();\n    }\n\n    this.setState({\n      asyncOperationProgress: 0,\n      isCopyMoveProgressDialogShow: false,\n    });\n  };\n\n  // toolbar operations\n  onMoveItems = (destRepo, destDirentPath) => {\n    let repoID = this.props.repoID;\n    let selectedDirentList = this.state.selectedDirentList;\n\n    let dirNames = this.getSelectedDirentNames();\n    let direntPaths = this.getSelectedDirentPaths();\n    seafileAPI.moveDir(repoID, destRepo.repo_id, destDirentPath, this.state.path, dirNames).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n          asyncOperatedFilesLength: selectedDirentList.length,\n          asyncOperationProgress: 0,\n          asyncOperationType: 'move',\n          isCopyMoveProgressDialogShow: true\n        }, () => {\n          // After moving successfully, delete related files\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.deleteTreeNodes(direntPaths);\n        }\n\n        this.moveDirents(dirNames);\n\n        // 2. tow columns mode need update left tree\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(destDirentPath);\n        }\n\n        // show tip message if move to current repo\n        let message =  Utils.getMoveSuccessMessage(dirNames);\n        toaster.success(message);\n      }\n\n    }).catch((error) => {\n      if (!error.response.data.lib_need_decrypt) {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          errMessage = Utils.getCopyFailedMessage(dirNames);\n        }\n        toaster.danger(errMessage);\n      } else {\n        this.setState({\n          libNeedDecryptWhenMove: true,\n          destRepoWhenCopyMove: destRepo,\n          destDirentPathWhenCopyMove: destDirentPath,\n        });\n      }\n    });\n  };\n\n  onCopyItems = (destRepo, destDirentPath) => {\n    let repoID = this.props.repoID;\n    let selectedDirentList = this.state.selectedDirentList;\n\n    let dirNames = this.getSelectedDirentNames();\n    seafileAPI.copyDir(repoID, destRepo.repo_id, destDirentPath, this.state.path, dirNames).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n          asyncOperatedFilesLength: selectedDirentList.length,\n          asyncOperationProgress: 0,\n          asyncOperationType: 'copy',\n          isCopyMoveProgressDialogShow: true\n        }, () => {\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(destDirentPath);\n        }\n\n        if (destDirentPath === this.state.path) {\n          this.loadDirentList(this.state.path);\n        }\n\n        // show tip message if copy to current repo\n        let message =  Utils.getCopySuccessfulMessage(dirNames);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      if (!error.response.data.lib_need_decrypt) {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          errMessage = Utils.getCopyFailedMessage(dirNames);\n        }\n        toaster.danger(errMessage);\n      } else {\n        this.setState({\n          libNeedDecryptWhenCopy: true,\n          destRepoWhenCopyMove: destRepo,\n          destDirentPathWhenCopyMove: destDirentPath,\n        });\n      }\n    });\n  };\n\n  restoreDeletedDirents = (commitID, paths, e) => {\n    const { repoID } = this.props;\n    e.preventDefault();\n    toaster.closeAll();\n    seafileAPI.restoreDirents(repoID, commitID, paths).then(res => {\n      const { success, failed } = res.data;\n      success.forEach(dirent => {\n        let name = Utils.getFileName(dirent.path);\n        let parentPath = Utils.getDirName(dirent.path);\n        if (!dirent.is_dir) {\n          if (this.state.currentMode === 'column') {\n            this.addNodeToTree(name, parentPath, 'file');\n          }\n          if (parentPath === this.state.path && !this.state.isViewFile) {\n            this.addDirent(name, 'file');\n          }\n        } else {\n          if (this.state.currentMode === 'column') {\n            this.addNodeToTree(name, parentPath, 'dir');\n          }\n          if (parentPath === this.state.path && !this.state.isViewFile) {\n            this.addDirent(name, 'dir');\n          }\n        }\n      });\n\n      if (success.length) {\n        let msg = success.length > 1 ? gettext('Restored {name} and {n} other items') :\n          gettext('Restored {name}');\n        msg = msg.replace('{name}', success[0].path.split('/').pop())\n          .replace('{n}', success.length - 1);\n        toaster.success(msg);\n      }\n\n      if (failed.length) {\n        let msg = failed.length > 1 ? gettext('Failed to restore {name} and {n} other items') :\n          gettext('Failed to restore {name}');\n        msg = msg.replace('{name}', failed[0].path.split('/').pop())\n          .replace('{n}', failed.length - 1);\n        toaster.danger(msg);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onDeleteItems = () => {\n    let repoID = this.props.repoID;\n    let direntPaths = this.getSelectedDirentPaths();\n    let dirNames = this.getSelectedDirentNames();\n\n    this.setState({updateDetail: !this.state.updateDetail});\n    seafileAPI.deleteMutipleDirents(repoID, this.state.path, dirNames).then(res => {\n      if (this.state.currentMode === 'column') {\n        this.deleteTreeNodes(direntPaths);\n      }\n\n      this.deleteDirents(dirNames);\n\n      let msg = '';\n      if (direntPaths.length > 1) {\n        msg = gettext('Successfully deleted {name} and {n} other items.');\n        msg = msg.replace('{name}', dirNames[0]);\n        msg = msg.replace('{n}', dirNames.length - 1);\n      } else {\n        msg = gettext('Successfully deleted {name}.');\n        msg = msg.replace('{name}', dirNames[0]);\n      }\n      const successTipWithUndo = (\n        <>\n          <span>{msg}</span>\n          <a className=\"action-link p-0 ml-1\" href=\"#\" onClick={this.restoreDeletedDirents.bind(this, res.data.commit_id, direntPaths)}>{gettext('Undo')}</a>\n        </>\n      );\n      toaster.success(successTipWithUndo, {duration: 5});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to delete {name} and {n} other items.');\n        errMessage = errMessage.replace('{name}', dirNames[0]);\n        errMessage = errMessage.replace('{n}', dirNames.length - 1);\n      }\n      toaster.danger(errMessage);\n    });\n  };\n\n  onAddFolder = (dirPath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.createDir(repoID, dirPath).then(() => {\n      let name = Utils.getFileName(dirPath);\n      let parentPath = Utils.getDirName(dirPath);\n\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(name, parentPath, 'dir');\n      }\n\n      if (parentPath === this.state.path && !this.state.isViewFile) {\n        this.addDirent(name, 'dir');\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onAddFile = (filePath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.createFile(repoID, filePath).then(res => {\n      let name = Utils.getFileName(filePath);\n      let parentPath = Utils.getDirName(filePath);\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(name, parentPath, 'file');\n      }\n      if (parentPath === this.state.path && !this.state.isViewFile) {\n        this.addDirent(name, 'file', res.data.size);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  switchViewMode = (mode) => {\n    if (mode === this.state.currentMode) {\n      return;\n    }\n    if (mode === 'detail') {\n      this.toggleDirentDetail();\n      return;\n    }\n    cookie.save('seafile_view_mode', mode);\n    let path = this.state.path;\n    if (this.state.currentMode === 'column' && this.state.isViewFile) {\n      path = Utils.getDirName(path);\n      this.setState({\n        path: path,\n        isViewFile: false,\n      });\n      let repoInfo = this.state.currentRepoInfo;\n\n      let url = siteRoot + 'library/' + repoInfo.repo_id + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(path);\n      window.history.pushState({url: url, path: path}, path, url);\n    }\n\n    if (mode === 'column') {\n      this.loadSidePanel(this.state.path);\n    }\n    this.isNeedUpdateHistoryState = false;\n    this.setState({currentMode: mode});\n    this.showDir(path);\n  };\n\n  onSearchedClick = (item) => {\n    let path = item.is_dir ? item.path.slice(0, item.path.length - 1) : item.path;\n    if (this.state.currentPath === path) {\n      return;\n    }\n    if (this.state.currentMode === 'column') {\n      // load sidePanel\n      let index = -1;\n      let paths = Utils.getPaths(path);\n      for (let i = 0; i < paths.length; i++) {\n        // eslint-disable-next-line\n        let node = this.state.treeData.getNodeByPath(node);\n        if (!node) {\n          index = i;\n          break;\n        }\n      }\n      if (index === -1) { // all the data has been loaded already.\n        let node = this.state.treeData.getNodeByPath(path);\n        this.setState({currentNode: node});\n      } else {\n        this.loadNodeAndParentsByPath(path);\n      }\n\n      // load mainPanel\n      if (item.is_dir) {\n        this.showDir(path);\n      } else {\n        if (Utils.isMarkdownFile(path)) {\n          this.showFile(path);\n        } else {\n          let url = siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(path);\n          let isWeChat = Utils.isWeChat();\n          if (!isWeChat) {\n            let newWindow = window.open('about:blank');\n            newWindow.location.href = url;\n          } else {\n            location.href = url;\n          }\n        }\n      }\n    } else {\n      if (item.is_dir) {\n        this.showDir(path);\n      } else {\n        let url = siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(path);\n        let isWeChat = Utils.isWeChat();\n        if (!isWeChat) {\n          let newWindow = window.open('about:blank');\n          newWindow.location.href = url;\n        } else {\n          location.href = url;\n        }\n      }\n    }\n  };\n\n  onMainNavBarClick = (nodePath) => {\n    //just for dir\n    this.resetSelected();\n    if (this.state.currentMode === 'column') {\n      let tree = this.state.treeData.clone();\n      let node = tree.getNodeByPath(nodePath);\n      tree.expandNode(node);\n      this.setState({treeData: tree, currentNode: node});\n    }\n\n    this.showDir(nodePath);\n  };\n\n  onLinkClick = (link) => {\n    const url = link;\n    let repoID = this.props.repoID;\n    if (Utils.isInternalMarkdownLink(url, repoID)) {\n      let path = Utils.getPathFromInternalMarkdownLink(url, repoID);\n      this.showFile(path);\n    } else if (Utils.isInternalDirLink(url, repoID)) {\n      let path = Utils.getPathFromInternalDirLink(url, repoID);\n      this.showDir(path);\n    } else {\n      window.open(url);\n    }\n  };\n\n  // list&tree operations\n  onMainPanelItemRename = (dirent, newName) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    this.renameItem(path, dirent.isDir(), newName);\n  };\n\n  onMainPanelItemDelete = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    this.deleteItem(path, dirent.isDir());\n  };\n\n  onRenameTreeNode = (node, newName) => {\n    this.renameItem(node.path, node.object.isDir(), newName);\n  };\n\n  onDeleteTreeNode = (node) => {\n    this.deleteItem(node.path, node.object.isDir());\n  };\n\n  renameItem = (path, isDir, newName) => {\n    let repoID = this.props.repoID;\n    if (isDir) {\n      seafileAPI.renameDir(repoID, path, newName).then(() => {\n        this.renameItemAjaxCallback(path, newName);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Renaming {name} failed').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.renameFile(repoID, path, newName).then(() => {\n        this.renameItemAjaxCallback(path, newName);\n      }).catch((error) => {\n        let errMessage = '';\n        if (error.response.status == 403 && error.response.data && error.response.data['error_msg']) {\n          errMessage = error.response.data['error_msg'];\n        } else {\n          errMessage = Utils.getErrorMsg(error);\n        }\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Renaming {name} failed').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  renameItemAjaxCallback(path, newName) {\n    if (this.state.currentMode === 'column') {\n      this.renameTreeNode(path, newName);\n    }\n    this.renameDirent(path, newName);\n  }\n\n  toggleDeleteFolderDialog = () => {\n    this.setState({isDeleteFolderDialogOpen: !this.state.isDeleteFolderDialogOpen});\n  };\n\n  deleteFolder = () => {\n    const { repoID } = this.props;\n    const { folderToDelete: path } = this.state;\n    seafileAPI.deleteDir(repoID, path).then((res) => {\n      this.deleteItemAjaxCallback(path, true);\n      let name = Utils.getFileName(path);\n      var msg = gettext('Successfully deleted {name}').replace('{name}', name);\n      const successTipWithUndo = (\n        <>\n          <span>{msg}</span>\n          <a className=\"action-link p-0 ml-1\" href=\"#\" onClick={this.restoreDeletedDirents.bind(this, res.data.commit_id, [path])}>{gettext('Undo')}</a>\n        </>\n      );\n      toaster.success(successTipWithUndo, {duration: 5});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = Utils.getFileName(path);\n        errMessage = gettext('Failed to delete {name}').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n    });\n  };\n\n  deleteItem(path, isDir) {\n    let repoID = this.props.repoID;\n    if (isDir) {\n      this.setState({ folderToDelete: path }, () => {\n        this.toggleDeleteFolderDialog();\n      });\n    } else {\n      seafileAPI.deleteFile(repoID, path).then((res) => {\n        this.deleteItemAjaxCallback(path, isDir);\n        let name = Utils.getFileName(path);\n        var msg = gettext('Successfully deleted {name}').replace('{name}', name);\n        const successTipWithUndo = (\n          <>\n            <span>{msg}</span>\n            <a className=\"action-link p-0 ml-1\" href=\"#\" onClick={this.restoreDeletedDirents.bind(this, res.data.commit_id, [path])}>{gettext('Undo')}</a>\n          </>\n        );\n        toaster.success(successTipWithUndo, {duration: 5});\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Failed to delete {name}').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  deleteItemAjaxCallback(path) {\n    if (this.state.currentMode === 'column') {\n      this.deleteTreeNode(path);\n    }\n    this.deleteDirent(path);\n  }\n\n  // list operations\n  onMoveItem = (destRepo, dirent, moveToDirentPath, nodeParentPath) => {\n    let repoID = this.props.repoID;\n    //just for view list state\n    let dirName = dirent.name;\n    if (!nodeParentPath) {\n      nodeParentPath = this.state.path;\n    }\n    let direntPath = Utils.joinPath(nodeParentPath, dirName);\n\n    seafileAPI.moveDir(repoID, destRepo.repo_id, moveToDirentPath, nodeParentPath, dirName).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n          asyncOperatedFilesLength: 1,\n          asyncOperationProgress: 0,\n          asyncOperationType: 'move',\n          isCopyMoveProgressDialogShow: true,\n        }, () => {\n          this.currentMoveItemName = dirName;\n          this.currentMoveItemPath = direntPath;\n          this.getAsyncCopyMoveProgress(dirName, direntPath);\n        });\n      }\n\n      if (this.state.currentMode === 'column') {\n        this.deleteTreeNode(direntPath);\n      }\n\n      // 1. move to current repo\n      // 2. tow columns mode need update left tree\n      if (repoID === destRepo.repo_id && this.state.currentMode === 'column') {\n        this.updateMoveCopyTreeNode(moveToDirentPath);\n      }\n\n      this.moveDirent(direntPath, moveToDirentPath);\n\n      // show tip message if move to current repo\n      if (repoID === destRepo.repo_id) {\n        let message = gettext('Successfully moved {name}.');\n        message = message.replace('{name}', dirName);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      if (!error.response.data.lib_need_decrypt) {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          errMessage = gettext('Failed to move {name}.');\n          errMessage = errMessage.replace('{name}', dirName);\n        }\n        toaster.danger(errMessage);\n      } else {\n        this.setState({\n          libNeedDecryptWhenMove: true,\n          destRepoWhenCopyMove: destRepo,\n          destDirentPathWhenCopyMove: moveToDirentPath,\n          copyMoveSingleItem: true,\n          srcDirentWhenCopyMove: dirent,\n          srcNodeParentPathWhenCopyMove: nodeParentPath,\n        });\n      }\n    });\n  };\n\n  onCopyItem = (destRepo, dirent, copyToDirentPath, nodeParentPath) => {\n    let repoID = this.props.repoID;\n    //just for view list state\n    let dirName = dirent.name;\n    if (!nodeParentPath) {\n      nodeParentPath = this.state.path;\n    }\n\n    seafileAPI.copyDir(repoID, destRepo.repo_id, copyToDirentPath, nodeParentPath, dirName).then(res => {\n\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n          asyncOperatedFilesLength: 1,\n          asyncOperationProgress: 0,\n          asyncOperationType: 'copy',\n          isCopyMoveProgressDialogShow: true\n        }, () => {\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(copyToDirentPath);\n        }\n\n        if (copyToDirentPath === nodeParentPath) {\n          this.loadDirentList(this.state.path);\n        }\n\n        let message = gettext('Successfully copied %(name)s.');\n        message = message.replace('%(name)s', dirName);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      if (!error.response.data.lib_need_decrypt) {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          errMessage = gettext('Failed to copy %(name)s');\n          errMessage = errMessage.replace('%(name)s', dirName);\n        }\n        toaster.danger(errMessage);\n      } else {\n        this.setState({\n          libNeedDecryptWhenCopy: true,\n          destRepoWhenCopyMove: destRepo,\n          destDirentPathWhenCopyMove: copyToDirentPath,\n          copyMoveSingleItem: true,\n          srcDirentWhenCopyMove: dirent,\n          srcNodeParentPathWhenCopyMove: nodeParentPath,\n        });\n      }\n    });\n  };\n\n  onConvertItem = (dirent, dstType) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    let repoID = this.props.repoID;\n    toaster.notifyInProgress(gettext('Converting, please wait...'), {'id': 'conversion'});\n    seafileAPI.convertFile(repoID, path, dstType).then((res) => {\n      let newFileName = res.data.obj_name;\n      let parentDir = res.data.parent_dir;\n      let new_path = parentDir + '/' + newFileName;\n      let parentPath = Utils.getDirName(new_path);\n\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(newFileName, parentPath, 'file');\n      }\n\n      this.addDirent(newFileName, 'file', res.data.size);\n      let message = gettext('Successfully converted the file.');\n      toaster.success(message, {'id': 'conversion'});\n\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = Utils.getFileName(path);\n        errMessage = gettext('Failed to convert {name}.').replace('{name}', name);\n      }\n      toaster.danger(errMessage, {'id': 'conversion'});\n    });\n\n  };\n\n  onDirentClick = (dirent) => {\n    let direntList = this.state.direntList.map(dirent => {\n      dirent.isSelected = false;\n      return dirent;\n    });\n    if (dirent) {\n      // dirent.isSelected = true;\n      this.setState({\n        direntList: direntList,\n        isDirentSelected: true,\n        selectedDirentList: [dirent],\n      });\n    } else {\n      this.setState({\n        direntList: direntList,\n        isDirentSelected: false,\n        selectedDirentList: [],\n      });\n    }\n  };\n\n  onItemClick = (dirent) => {\n    this.resetSelected();\n    let repoID = this.props.repoID;\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (dirent.isDir()) {  // is dir\n      if (this.state.currentMode === 'column') {\n        this.loadTreeNodeByPath(direntPath);\n      }\n      this.showDir(direntPath);\n    } else {  // is file\n      if (this.state.currentMode === 'column' && Utils.isMarkdownFile(direntPath)) {\n        this.showColumnMarkdownFile(direntPath);\n      } else {\n        let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(direntPath);\n        if (dirent.is_sdoc_revision && dirent.revision_id) {\n          url = siteRoot + 'lib/' + repoID + '/revisions/' + dirent.revision_id + '/';\n        }\n\n        let isWeChat = Utils.isWeChat();\n        if (!isWeChat) {\n          window.open(url);\n        } else {\n          location.href = url;\n        }\n      }\n    }\n  };\n\n  onDirentSelected = (dirent) => {\n    let direntList = this.state.direntList.map(item => {\n      if (item.name === dirent.name) {\n        item.isSelected = !item.isSelected;\n      }\n      return item;\n    });\n    let selectedDirentList = direntList.filter(item => {\n      return item.isSelected;\n    });\n\n    if (selectedDirentList.length) {\n      this.setState({isDirentSelected: true});\n      if (selectedDirentList.length === direntList.length) {\n        this.setState({\n          isAllDirentSelected: true,\n          direntList: direntList,\n          selectedDirentList: selectedDirentList,\n        });\n      } else {\n        this.setState({\n          isAllDirentSelected: false,\n          direntList: direntList,\n          selectedDirentList: selectedDirentList\n        });\n      }\n    } else {\n      this.setState({\n        isDirentSelected: false,\n        isAllDirentSelected: false,\n        direntList: direntList,\n        selectedDirentList: []\n      });\n    }\n  };\n\n  onAllDirentSelected = () => {\n    if (this.state.isAllDirentSelected) {\n      let direntList = this.state.direntList.map(item => {\n        item.isSelected = false;\n        return item;\n      });\n      this.setState({\n        isDirentSelected: false,\n        isAllDirentSelected: false,\n        direntList: direntList,\n        selectedDirentList: [],\n      });\n    } else {\n      let direntList = this.state.direntList.map(item => {\n        item.isSelected = true;\n        return item;\n      });\n      this.setState({\n        isDirentSelected: true,\n        isAllDirentSelected: true,\n        direntList: direntList,\n        selectedDirentList: direntList,\n      });\n    }\n  };\n\n  onFileTagChanged = (dirent, direntPath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.listFileTags(repoID, direntPath).then(res => {\n      let fileTags = res.data.file_tags.map(item => {\n        return new FileTag(item);\n      });\n\n      if (this.state.isViewFile) {\n        this.setState({fileTags: fileTags});\n      } else {\n        this.updateDirent(dirent, 'file_tags', fileTags);\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n\n    this.updateUsedRepoTags();\n  };\n\n  onFileUploadSuccess = (direntObject) => {\n    let isExist = this.state.direntList.some(item => {\n      return item.name === direntObject.name && item.type === direntObject.type;\n    });\n    if (isExist) {\n      let direntList = this.state.direntList;\n      for (let i = 0; i < direntList.length; i++) {\n        let dirent = direntList[i];\n        if (dirent.name === direntObject.name && dirent.type === direntObject.type) {\n          let mtime = moment.unix(direntObject.mtime).fromNow();\n          this.updateDirent(dirent, 'mtime', mtime);  // todo file size is need update too, api is not return;\n          break;\n        }\n      }\n    } else {\n      // use current dirent parent's permission as it's permission\n      direntObject.permission = this.state.userPerm;\n      let dirent = new Dirent(direntObject);\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(dirent.name, this.state.path, dirent.type);\n      }\n      if (direntObject.type === 'dir') {\n        this.setState({direntList: [dirent, ...this.state.direntList]});\n      } else {\n        this.setState({direntList: [...this.state.direntList, dirent]});\n      }\n    }\n  };\n\n  addDirent = (name, type, size) => {\n    let item = this.createDirent(name, type, size);\n    let direntList = this.state.direntList;\n    if (type === 'dir') {\n      direntList.unshift(item);\n    } else {\n      // there will be there conditions;\n      // first: direntList.length === 0;\n      // second: all the direntList's items are dir;\n      // third: direntList has dir and file;\n      let length = direntList.length;\n      if (length === 0 || direntList[length - 1].type === 'dir') {\n        direntList.push(item);\n      } else {\n        let index = 0;\n        for (let i = 0; i <= length; i++) {\n          if (direntList[i].type === 'file') {\n            index = i;\n            break;\n          }\n        }\n        direntList.splice(index, 0, item);\n      }\n    }\n    this.setState({direntList: direntList});\n  };\n\n  renameDirent = (direntPath, newName) => {\n    let repoID = this.props.repoID;\n    let parentPath = Utils.getDirName(direntPath);\n    let newDirentPath = Utils.joinPath(parentPath, newName);\n    if (direntPath === this.state.path) {\n      // the renamed item is current viewed item\n      // example: direntPath = /A/B/C, state.path = /A/B/C\n\n      this.setState({ path: newDirentPath });\n      let repoInfo = this.state.currentRepoInfo;\n      let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + newDirentPath;\n      window.history.replaceState({ url: url, path: newDirentPath}, newDirentPath, url);\n    } else if (Utils.isChildPath(direntPath, this.state.path)) {\n      // example: direntPath = /A/B/C/D, state.path = /A/B/C\n      let oldName = Utils.getFileName(direntPath);\n      let direntList = this.state.direntList.map(item => {\n        if (item.name === oldName) {\n          item.name = newName;\n        }\n        return item;\n      });\n      this.setState({ direntList: direntList });\n    } else if (Utils.isAncestorPath(direntPath, this.state.path)) {\n      // example: direntPath = /A/B, state.path = /A/B/C\n      let newPath = Utils.renameAncestorPath(this.state.path, direntPath, newDirentPath);\n      this.setState({ path: newPath });\n\n      let repoInfo = this.state.currentRepoInfo;\n      let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + newPath;\n      window.history.replaceState({ url: url, path: newPath}, newPath, url);\n    }\n  };\n\n  deleteDirent(direntPath) {\n    if (direntPath === this.state.path) {\n      // The deleted item is current item\n      let parentPath = Utils.getDirName(direntPath);\n      this.showDir(parentPath);\n    } else if (Utils.isChildPath(direntPath, this.state.path)) {\n      // The deleted item is inside current path\n      let name = Utils.getFileName(direntPath);\n      let direntList = this.state.direntList.filter(item => {\n        return item.name !== name;\n      });\n\n      // Recalculate the state of the selection\n      this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n      this.setState({direntList: direntList});\n    } else if (Utils.isAncestorPath(direntPath, this.state.path)) {\n      // the deleted item is ancester of the current item\n      let parentPath = Utils.getDirName(direntPath);\n      this.showDir(parentPath);\n    }\n    // else do nothing\n  }\n\n  // only one scence: The deleted items are inside current path\n  deleteDirents = (direntNames) => {\n    let direntList = this.state.direntList.filter(item => {\n      return direntNames.indexOf(item.name) === -1;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n  };\n\n  moveDirent = (direntPath, moveToDirentPath = null) => {\n    let name = Utils.getFileName(direntPath);\n    if (moveToDirentPath === this.state.path) {\n      this.loadDirentList(this.state.path);\n      return;\n    }\n    let direntList = this.state.direntList.filter(item => {\n      return item.name !== name;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n  };\n\n  // only one scence: The moved items are inside current path\n  moveDirents = (direntNames) => {\n    let direntList = this.state.direntList.filter(item => {\n      return direntNames.indexOf(item.name) === -1;\n    });\n\n    // Recalculate the state of the selection\n    //this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({\n      direntList: direntList,\n      selectedDirentList: [],\n      isDirentSelected: false,\n      isAllDirentSelected: false,\n    });\n  };\n\n  updateDirent = (dirent, paramKey, paramValue) => {\n    let newDirentList = this.state.direntList.map(item => {\n      if (item.name === dirent.name) {\n        item[paramKey] = paramValue;\n      }\n      return item;\n    });\n    this.setState({direntList: newDirentList});\n  };\n\n  // tree operations\n  loadTreeNodeByPath = (path) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    let node = tree.getNodeByPath(path);\n    if (!node.isLoaded) {\n      seafileAPI.listDir(repoID, node.path).then(res => {\n        this.addResponseListToNode(res.data.dirent_list, node);\n        let parentNode = tree.getNodeByPath(node.parentNode.path);\n        parentNode.isExpanded = true;\n        this.setState({\n          treeData: tree,\n          currentNode: node\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let parentNode = tree.getNodeByPath(node.parentNode.path);\n      parentNode.isExpanded = true;\n      this.setState({treeData: tree, currentNode: node}); //tree\n    }\n  };\n\n  loadNodeAndParentsByPath = (path) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    if (Utils.isMarkdownFile(path)) {\n      path = Utils.getDirName(path);\n    }\n    seafileAPI.listDir(repoID, path, {with_parents: true}).then(res => {\n      const { dirent_list: direntList, user_perm } = res.data;\n      let results = {};\n      for (let i = 0; i < direntList.length; i++) {\n        let object = direntList[i];\n        let parentDir = object.parent_dir;\n        let key = parentDir === '/' ?  '/' : parentDir.slice(0, parentDir.length - 1);\n        if (!results[key]) {\n          results[key] = [];\n        }\n        results[key].push(object);\n      }\n      for (let key in results) {\n        let node = tree.getNodeByPath(key);\n        if (!node.isLoaded) {\n          this.addResponseListToNode(results[key], node);\n        }\n      }\n      this.setState({\n        isTreeDataLoading: false,\n        treeData: tree,\n        userPerm: user_perm,\n      });\n    }).catch(() => {\n      this.setState({isLoadFailed: true});\n    });\n  };\n\n  onTreeNodeClick = (node) => {\n    this.resetSelected();\n    let repoID = this.props.repoID;\n    if (!this.state.pathExist) {\n      this.setState({pathExist: true});\n    }\n\n    if (node.object.isDir()) {\n      let isLoaded = node.isLoaded;\n      if (!node.isLoaded) {\n        let tree = this.state.treeData.clone();\n        node = tree.getNodeByPath(node.path);\n        seafileAPI.listDir(repoID, node.path).then(res => {\n          this.addResponseListToNode(res.data.dirent_list, node);\n          tree.collapseNode(node);\n          this.setState({treeData: tree});\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n      if (isLoaded && node.path === this.state.path) {\n        if (node.isExpanded) {\n          let tree = treeHelper.collapseNode(this.state.treeData, node);\n          this.setState({treeData: tree});\n        } else {\n          let tree = this.state.treeData.clone();\n          node = tree.getNodeByPath(node.path);\n          tree.expandNode(node);\n          this.setState({treeData: tree});\n        }\n      }\n    }\n\n    if (node.path === this.state.path ) {\n      return;\n    }\n\n    if (node.object.isDir()) {  // isDir\n      this.showDir(node.path);\n    } else {\n      if (Utils.isMarkdownFile(node.path)) {\n        if (node.path !== this.state.path) {\n          this.showColumnMarkdownFile(node.path);\n        }\n      } else {\n        let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(node.path);\n        let dirent = node.object;\n        if (dirent.is_sdoc_revision && dirent.revision_id) {\n          url = siteRoot + 'lib/' + repoID + '/revisions/' + dirent.revision_id + '/';\n        }\n        window.open(url);\n      }\n    }\n  };\n\n  showColumnMarkdownFile = (filePath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      if (res.data.size === 0) {\n        // loading of asynchronously obtained data may be blocked\n        const w = window.open('about:blank');\n        const url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(filePath);\n        w.location.href = url;\n      } else {\n        this.showFile(filePath);\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onTreeNodeCollapse = (node) => {\n    let tree = treeHelper.collapseNode(this.state.treeData, node);\n    this.setState({treeData: tree});\n  };\n\n  onTreeNodeExpanded = (node) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    node = tree.getNodeByPath(node.path);\n    if (!node.isLoaded) {\n      seafileAPI.listDir(repoID, node.path).then(res => {\n        this.addResponseListToNode(res.data.dirent_list, node);\n        this.setState({treeData: tree});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      tree.expandNode(node);\n      this.setState({treeData: tree});\n    }\n  };\n\n  addNodeToTree = (name, parentPath, type) => {\n    let node = this.createTreeNode(name, type);\n    let tree = treeHelper.addNodeToParentByPath(this.state.treeData, node, parentPath);\n    this.setState({treeData: tree});\n  };\n\n  renameTreeNode = (path, newName) => {\n    let tree = treeHelper.renameNodeByPath(this.state.treeData, path, newName);\n    this.setState({treeData: tree});\n  };\n\n  deleteTreeNode = (path) => {\n    let tree = treeHelper.deleteNodeByPath(this.state.treeData, path);\n    this.setState({treeData: tree});\n  };\n\n  deleteTreeNodes = (paths) => {\n    let tree = treeHelper.deleteNodeListByPaths(this.state.treeData, paths);\n    this.setState({treeData: tree});\n  };\n\n  moveTreeNode = (nodePath, moveToPath, moveToRepo, nodeName) => {\n    let repoID = this.props.repoID;\n    if (repoID !== moveToRepo.repo_id) {\n      let tree = treeHelper.deleteNodeByPath(this.state.treeData, nodePath);\n      this.setState({treeData: tree});\n      return;\n    }\n    let tree = treeHelper.moveNodeByPath(this.state.treeData, nodePath, moveToPath, nodeName);\n    this.setState({treeData: tree});\n  };\n\n  copyTreeNode = (nodePath, copyToPath, destRepo, nodeName) => {\n    let repoID = this.props.repoID;\n    if (repoID !== destRepo.repo_id) {\n      return;\n    }\n    let tree = treeHelper.copyNodeByPath(this.state.treeData, nodePath, copyToPath, nodeName);\n    this.setState({treeData: tree});\n  };\n\n  createTreeNode(name, type) {\n    let object = this.createDirent(name, type);\n    return new TreeNode({object});\n  }\n\n  createDirent(name, type, size) {\n    // use current dirent parent's permission as it's permission\n    const { userPerm: permission } = this.state;\n    const mtime = new Date().getTime()/1000;\n    const obj = { name, type, mtime, size, permission };\n    const dirent = new Dirent(obj);\n    return dirent;\n  }\n\n  addResponseListToNode = (list, node) => {\n    node.isLoaded = true;\n    node.isExpanded = true;\n    let direntList = list.map(item => {\n      return new Dirent(item);\n    });\n    direntList = Utils.sortDirents(direntList, 'name', 'asc');\n\n    let nodeList = direntList.map(object => {\n      return new TreeNode({object});\n    });\n    node.addChildren(nodeList);\n  };\n\n  getSelectedDirentPaths = () => {\n    let paths = [];\n    this.state.selectedDirentList.forEach(selectedDirent => {\n      paths.push(Utils.joinPath(this.state.path, selectedDirent.name));\n    });\n    return paths;\n  };\n\n  getSelectedDirentNames = () => {\n    let names = [];\n    this.state.selectedDirentList.forEach(selectedDirent => {\n      names.push(selectedDirent.name);\n    });\n    return names;\n  };\n\n  resetSelected = () => {\n    this.setState({\n      isDirentSelected: false,\n      isAllDirentSelected: false,\n    });\n  };\n\n  recaculateSelectedStateAfterDirentDeleted = (name, newDirentList) => {\n    let selectedDirentList = this.state.selectedDirentList.slice(0);\n    if (selectedDirentList.length > 0) {\n      selectedDirentList = selectedDirentList.filter(item => {\n        return item.name !== name;\n      });\n    }\n    this.setState({\n      selectedDirentList: selectedDirentList,\n      isDirentSelected: selectedDirentList.length > 0,\n      isAllDirentSelected: selectedDirentList.length === newDirentList.length,\n    });\n  };\n\n  onLibDecryptDialog = () => {\n    this.setState({libNeedDecrypt: false});\n    this.loadDirData(this.state.path);\n  };\n\n  onLibDecryptWhenCopyMove = () => {\n    if (this.state.libNeedDecryptWhenCopy) {\n      if (this.state.copyMoveSingleItem) {\n        this.onCopyItem(this.state.destRepoWhenCopyMove, this.state.srcDirentWhenCopyMove, this.state.destDirentPathWhenCopyMove,this.state.srcNodeParentPathWhenCopyMove);\n      } else {\n        this.onCopyItems(this.state.destRepoWhenCopyMove, this.state.destDirentPathWhenCopyMove);\n      }\n      this.setState({\n        libNeedDecryptWhenCopy: false,\n        copyMoveSingleItem: false,\n      });\n    }\n    if (this.state.libNeedDecryptWhenMove) {\n      if (this.state.copyMoveSingleItem) {\n        this.onMoveItem(this.state.destRepoWhenCopyMove, this.state.srcDirentWhenCopyMove, this.state.destDirentPathWhenCopyMove, this.state.srcNodeParentPathWhenCopyMove);\n      } else {\n        this.onMoveItems(this.state.destRepoWhenCopyMove, this.state.destDirentPathWhenCopyMove);\n      }\n      this.setState({\n        libNeedDecryptWhenMove: false,\n        copyMoveSingleItem: false,\n      });\n    }\n  };\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortDirents(this.state.direntList, sortBy, sortOrder)\n    });\n  };\n\n  onUploadFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.uploader.onFileUpload();\n  };\n\n  onUploadFolder = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.uploader.onFolderUpload();\n  };\n\n  onToolbarFileTagChanged = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.state.path;\n    seafileAPI.listFileTags(repoID, filePath).then(res => {\n      let fileTags = res.data.file_tags.map(item => {\n        return new FileTag(item);\n      });\n\n      this.setState({fileTags: fileTags});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  unSelectDirent = () => {\n    this.setState({\n      isDirentSelected: false,\n      selectedDirentList: []\n    });\n    const dirent = {};\n    this.onDirentSelected(dirent);\n  };\n\n  onDeleteRepoTag = (deletedTagID) => {\n    let direntList = this.state.direntList.map(dirent => {\n      if (dirent.file_tags) {\n        let fileTags = dirent.file_tags.filter(item => {\n          return item.repo_tag_id !== deletedTagID;\n        });\n        dirent.file_tags = fileTags;\n      }\n      return dirent;\n    });\n    this.setState({direntList: direntList});\n    this.updateUsedRepoTags();\n  };\n\n\n  handleSubmit = (e) => {\n    let options = {\n      'share_type': 'personal',\n      'from': this.state.currentRepoInfo.owner_email\n    };\n    seafileAPI.leaveShareRepo(this.props.repoID, options).then(res => {\n      navigate(siteRoot + 'shared-libs/');\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error, true);\n      toaster.danger(errorMsg);\n    });\n\n    e.preventDefault();\n  };\n\n  render() {\n    if (this.state.libNeedDecrypt) {\n      return (\n        <ModalPortal>\n          <LibDecryptDialog\n            repoID={this.props.repoID}\n            onLibDecryptDialog={this.onLibDecryptDialog}\n          />\n        </ModalPortal>\n      );\n    }\n\n    if (this.state.libNeedDecryptWhenCopy || this.state.libNeedDecryptWhenMove) {\n      return (\n        <ModalPortal>\n          <LibDecryptDialog\n            repoID={this.state.destRepoWhenCopyMove.repo_id}\n            onLibDecryptDialog={this.onLibDecryptWhenCopyMove}\n          />\n        </ModalPortal>\n      );\n    }\n\n    if (this.state.errorMsg) {\n      return (\n        <Fragment>\n          <p className=\"error mt-6 text-center\">{this.state.errorMsg}</p>\n          <button type=\"submit\" className=\"btn btn-primary submit\" onClick={this.handleSubmit}>{gettext('Leave Share')}</button>\n        </Fragment>\n      );\n    }\n\n    if (!this.state.currentRepoInfo) {\n      return '';\n    }\n\n    let enableDirPrivateShare = false;\n    let { currentRepoInfo, userPerm, isCopyMoveProgressDialogShow, isDeleteFolderDialogOpen } = this.state;\n    let showShareBtn = Utils.isHasPermissionToShare(currentRepoInfo, userPerm);\n    let isRepoOwner = currentRepoInfo.owner_email === username;\n    let isVirtual = currentRepoInfo.is_virtual;\n    let isAdmin = currentRepoInfo.is_admin;\n    if (!isVirtual && (isRepoOwner || isAdmin)) {\n      enableDirPrivateShare = true;\n    }\n    let direntItemsList = this.state.direntList.filter((item, index) => {\n      return index < this.state.itemsShowLength;\n    });\n\n    let canUpload = true;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { upload } = customPermission.permission;\n      canUpload = upload;\n    }\n\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <LibContentToolbar\n            isViewFile={this.state.isViewFile}\n            filePermission={this.state.filePermission}\n            fileTags={this.state.fileTags}\n            onFileTagChanged={this.onToolbarFileTagChanged}\n            onSideNavMenuClick={this.props.onMenuClick}\n            repoID={this.props.repoID}\n            path={this.state.path}\n            isDirentSelected={this.state.isDirentSelected}\n            selectedDirentList={this.state.selectedDirentList}\n            onItemsMove={this.onMoveItems}\n            onItemsCopy={this.onCopyItems}\n            onItemsDelete={this.onDeleteItems}\n            onItemRename={this.onMainPanelItemRename}\n            direntList={this.state.direntList}\n            repoName={this.state.repoName}\n            repoEncrypted={this.state.repoEncrypted}\n            isGroupOwnedRepo={this.state.isGroupOwnedRepo}\n            userPerm={this.state.userPerm}\n            showShareBtn={showShareBtn}\n            enableDirPrivateShare={enableDirPrivateShare}\n            onAddFile={this.onAddFile}\n            onAddFolder={this.onAddFolder}\n            onUploadFile={this.onUploadFile}\n            onUploadFolder={this.onUploadFolder}\n            currentMode={this.state.currentMode}\n            switchViewMode={this.switchViewMode}\n            onSearchedClick={this.onSearchedClick}\n            isRepoOwner={isRepoOwner}\n            currentRepoInfo={this.state.currentRepoInfo}\n            updateDirent={this.updateDirent}\n            onDirentSelected={this.onDirentSelected}\n            showDirentDetail={this.showDirentDetail}\n            unSelectDirent={this.unSelectDirent}\n            onFilesTagChanged={this.onFileTagChanged}\n            repoTags={this.state.repoTags}\n          />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <LibContentContainer\n            pathPrefix={this.props.pathPrefix}\n            currentMode={this.state.currentMode}\n            path={this.state.path}\n            pathExist={this.state.pathExist}\n            currentRepoInfo={this.state.currentRepoInfo}\n            repoID={this.props.repoID}\n            enableDirPrivateShare={enableDirPrivateShare}\n            userPerm={userPerm}\n            isGroupOwnedRepo={this.state.isGroupOwnedRepo}\n            onTabNavClick={this.props.onTabNavClick}\n            onMainNavBarClick={this.onMainNavBarClick}\n            isViewFile={this.state.isViewFile}\n            hash={this.state.hash}\n            fileTags={this.state.fileTags}\n            isFileLoading={this.state.isFileLoading}\n            isFileLoadedErr={this.state.isFileLoadedErr}\n            filePermission={this.state.filePermission}\n            content={this.state.content}\n            lastModified={this.state.lastModified}\n            latestContributor={this.state.latestContributor}\n            onLinkClick={this.onLinkClick}\n            isTreeDataLoading={this.state.isTreeDataLoading}\n            treeData={this.state.treeData}\n            currentNode={this.state.currentNode}\n            onNodeClick={this.onTreeNodeClick}\n            onNodeCollapse={this.onTreeNodeCollapse}\n            onNodeExpanded={this.onTreeNodeExpanded}\n            onAddFolderNode={this.onAddFolder}\n            onAddFileNode={this.onAddFile}\n            onRenameNode={this.onRenameTreeNode}\n            onDeleteNode={this.onDeleteTreeNode}\n            repoTags={this.state.repoTags}\n            usedRepoTags={this.state.usedRepoTags}\n            updateUsedRepoTags={this.updateUsedRepoTags}\n            isDirentListLoading={this.state.isDirentListLoading}\n            direntList={direntItemsList}\n            fullDirentList={this.state.direntList}\n            sortBy={this.state.sortBy}\n            sortOrder={this.state.sortOrder}\n            sortItems={this.sortItems}\n            updateDirent={this.updateDirent}\n            onDirentClick={this.onDirentClick}\n            onItemClick={this.onItemClick}\n            onItemSelected={this.onDirentSelected}\n            onItemDelete={this.onMainPanelItemDelete}\n            onItemRename={this.onMainPanelItemRename}\n            onItemMove={this.onMoveItem}\n            onItemCopy={this.onCopyItem}\n            onItemConvert={this.onConvertItem}\n            onAddFolder={this.onAddFolder}\n            onAddFile={this.onAddFile}\n            onFileTagChanged={this.onFileTagChanged}\n            isDirentSelected={this.state.isDirentSelected}\n            isAllDirentSelected={this.state.isAllDirentSelected}\n            onAllDirentSelected={this.onAllDirentSelected}\n            isDirentDetailShow={this.state.isDirentDetailShow}\n            selectedDirent={this.state.selectedDirentList && this.state.selectedDirentList[0]}\n            selectedDirentList={this.state.selectedDirentList}\n            onItemsMove={this.onMoveItems}\n            onItemsCopy={this.onCopyItems}\n            onItemsDelete={this.onDeleteItems}\n            closeDirentDetail={this.closeDirentDetail}\n            showDirentDetail={this.showDirentDetail}\n            direntDetailPanelTab={this.state.direntDetailPanelTab}\n            onDeleteRepoTag={this.onDeleteRepoTag}\n            onToolbarFileTagChanged={this.onToolbarFileTagChanged}\n            updateDetail={this.state.updateDetail}\n            onListContainerScroll={this.onListContainerScroll}\n            loadDirentList={this.loadDirentList}\n          />\n          {canUpload && this.state.pathExist && !this.state.isViewFile && (\n            <FileUploader\n              ref={uploader => this.uploader = uploader}\n              dragAndDrop={true}\n              path={this.state.path}\n              repoID={this.props.repoID}\n              direntList={this.state.direntList}\n              onFileUploadSuccess={this.onFileUploadSuccess}\n              isCustomPermission={isCustomPermission}\n            />\n          )}\n        </div>\n        {isCopyMoveProgressDialogShow && (\n          <CopyMoveDirentProgressDialog\n            type={this.state.asyncOperationType}\n            asyncOperatedFilesLength={this.state.asyncOperatedFilesLength}\n            asyncOperationProgress={this.state.asyncOperationProgress}\n            toggleDialog={this.onMoveProgressDialogToggle}\n          />\n        )}\n        {isDeleteFolderDialogOpen && (\n          <DeleteFolderDialog\n            repoID={this.props.repoID}\n            path={this.state.folderToDelete}\n            deleteFolder={this.deleteFolder}\n            toggleDialog={this.toggleDeleteFolderDialog}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nLibContentView.propTypes = propTypes;\n\nexport default LibContentView;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/wikis/wikis.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/invitations/invitations-view.js",["4221","4222","4223"],[],"import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport InvitationsToolbar from '../../components/toolbar/invitations-toolbar';\nimport InvitePeopleDialog from '../../components/dialog/invite-people-dialog';\nimport InvitationRevokeDialog from '../../components/dialog/invitation-revoke-dialog';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\n\nimport '../../css/invitations.css';\n\nclass Item extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isRevokeDialogOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  };\n\n  onMouseEnter = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  };\n\n  onMouseLeave = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  };\n\n  deleteItem = (e) => {\n    e.preventDefault();\n    // make the icon avoid being clicked repeatedly\n    this.setState({\n      isOpIconShown: false\n    });\n    const token = this.props.invitation.token;\n    seafileAPI.deleteInvitation(token).then((res) => {\n      this.setState({deleted: true});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.setState({\n        isOpIconShown: true\n      });\n    });\n  };\n\n  revokeItem = () => {\n    this.setState({deleted: true});\n  };\n\n  toggleRevokeDialog = (e) => {\n    e.preventDefault();\n    this.setState({\n      isRevokeDialogOpen: !this.state.isRevokeDialogOpen\n    });\n  };\n\n  render() {\n    const { isOpIconShown, deleted, isRevokeDialogOpen } = this.state;\n\n    if (deleted) {\n      return null;\n    }\n\n    const item = this.props.invitation;\n\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter} tabIndex=\"0\">\n        <td>{item.accepter}</td>\n        <td>{moment(item.invite_time).format('YYYY-MM-DD')}</td>\n        <td>{moment(item.expire_time).format('YYYY-MM-DD')}</td>\n        <td>{item.accept_time && <i className=\"sf2-icon-tick invite-accept-icon\"></i>}</td>\n        <td>\n          {isOpIconShown && (\n            item.accept_time ?\n              <a href=\"#\"\n                role=\"button\"\n                className=\"action-icon sf3-font sf3-font-cancel-invitation\"\n                title={gettext('Revoke Access')}\n                aria-label={gettext('Revoke Access')}\n                onClick={this.toggleRevokeDialog}>\n              </a> :\n              <a href=\"#\"\n                role=\"button\"\n                className=\"action-icon sf2-icon-x3\"\n                title={gettext('Delete')}\n                aria-label={gettext('Delete')}\n                onClick={this.deleteItem}>\n              </a>\n          )}\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td>\n          {item.accepter}<br />\n          <span className=\"item-meta-info\">{moment(item.invite_time).format('YYYY-MM-DD')}<span className=\"small\">({gettext('Invite Time')})</span></span>\n          <span className=\"item-meta-info\">{moment(item.expire_time).format('YYYY-MM-DD')}<span className=\"small\">({gettext('Expiration')})</span></span>\n          <span className=\"item-meta-info\">{item.accept_time && gettext('Accepted')}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More operations')}\n              aria-label={gettext('More operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {item.accept_time ?\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.toggleRevokeDialog}>{gettext('Revoke Access')}</DropdownItem> :\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.deleteItem}>{gettext('Delete')}</DropdownItem>\n                }\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isRevokeDialogOpen &&\n        <InvitationRevokeDialog\n          accepter={item.accepter}\n          token={item.token}\n          revokeInvitation={this.revokeItem}\n          toggleDialog={this.toggleRevokeDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst ItemPropTypes = {\n  data: PropTypes.object.isRequired,\n  invitation: PropTypes.object.isRequired,\n  isDesktop: PropTypes.bool.isRequired,\n};\n\nItem.propTypes = ItemPropTypes;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const {\n      loading, errorMsg, invitationsList\n    } = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-2\">{errorMsg}</p>;\n    }\n\n    if (!invitationsList.length) {\n      return (\n        <EmptyTip>\n          <h2>{gettext('No guest invitations')}</h2>\n          <p>{gettext('You have not invited any guests yet. A guest can access shared libraries through the web interface allowing more efficient ways to collaborate than through links. You can invite a guest by clicking the \"Invite Guest\" button in the menu bar.')}</p>\n        </EmptyTip>\n      );\n    }\n\n    const isDesktop = Utils.isDesktop();\n    return (\n      <table className={`table-hover${isDesktop ? '': ' table-thead-hidden'}`}>\n        <thead>\n          {isDesktop ?\n            <tr>\n              <th width=\"25%\">{gettext('Email')}</th>\n              <th width=\"20%\">{gettext('Invite Time')}</th>\n              <th width=\"20%\">{gettext('Expiration')}</th>\n              <th width=\"18%\">{gettext('Accepted')}</th>\n              <th width=\"7%\"></th>\n            </tr>\n            :\n            <tr>\n              <th width=\"92%\"></th>\n              <th width=\"8%\"></th>\n            </tr>\n          }\n        </thead>\n        <tbody>\n          {invitationsList.map((invitation, index) => {\n            return (\n              <Item\n                key={index}\n                isDesktop={isDesktop}\n                invitation={invitation}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nclass InvitationsView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      invitationsList: [],\n      isInvitePeopleDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listInvitations().then((res) => {\n      this.setState({\n        invitationsList: res.data,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onInvitePeople = (invitationsArray) => {\n    invitationsArray.push.apply(invitationsArray, this.state.invitationsList);\n    this.setState({\n      invitationsList: invitationsArray,\n    });\n  };\n\n  toggleInvitePeopleDialog = () => {\n    this.setState({\n      isInvitePeopleDialogOpen: !this.state.isInvitePeopleDialogOpen\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <InvitationsToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n          toggleInvitePeopleDialog={this.toggleInvitePeopleDialog}\n        />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Invite Guest')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content data={this.state} />\n            </div>\n          </div>\n        </div>\n        {this.state.isInvitePeopleDialogOpen &&\n        <InvitePeopleDialog\n          onInvitePeople={this.onInvitePeople}\n          toggleDialog={this.toggleInvitePeopleDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nContent.propTypes = {\n  data: PropTypes.object.isRequired,\n};\n\nconst InvitationsViewPropTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nInvitationsView.propTypes = InvitationsViewPropTypes;\n\nexport default InvitationsView;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-content-view/svg.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-view/file-view-tip.js",["4224"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nconst { err } = window.app.pageOptions;\n\nconst propTypes = {\n  errorMsg: PropTypes.string\n};\n\nclass FileViewTip extends React.Component {\n\n  render() {\n    let errorMsg;\n    if (err == 'File preview unsupported') {\n      errorMsg = <p>{gettext('Online view is not applicable to this file format')}</p>;\n    } else {\n      errorMsg = <p className=\"error\">{err || this.props.errorMsg}</p>;\n    }\n\n    return (\n      <div className=\"file-view-content flex-1 o-auto\">\n        <div className=\"file-view-tip\">\n          {errorMsg}\n          <a href=\"?dl=1\" className=\"btn btn-secondary\">{gettext('Download')}</a>\n        </div>\n      </div>\n    );\n  }\n}\nFileViewTip.propTypes = propTypes;\n\nexport default FileViewTip;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-content-view/image.js",["4225","4226"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot } from '../../utils/constants';\n\nimport '../../css/image-file-view.css';\n\nconst {\n  repoID, repoEncrypted,\n  fileExt, filePath, fileName,\n  thumbnailSizeForOriginal,\n  previousImage, nextImage, rawPath,\n  xmindImageSrc // for xmind file\n} = window.app.pageOptions;\n\nlet previousImageUrl, nextImageUrl;\nif (previousImage) {\n  previousImageUrl = `${siteRoot}lib/${repoID}/file${Utils.encodePath(previousImage)}`;\n}\nif (nextImage) {\n  nextImageUrl = `${siteRoot}lib/${repoID}/file${Utils.encodePath(nextImage)}`;\n}\n\nclass FileContent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loadFailed: false\n    };\n  }\n\n  componentDidMount() {\n    document.addEventListener('keydown', (e) => {\n      if (previousImage && e.keyCode == 37) { // press '<-'\n        location.href = previousImageUrl;\n      }\n      if (nextImage && e.keyCode == 39) { // press '->'\n        location.href = nextImageUrl;\n      }\n    });\n  }\n\n  handleLoadFailure = () => {\n    this.setState({\n      loadFailed: true\n    });\n  };\n\n  render() {\n    if (this.state.loadFailed) {\n      return this.props.tip;\n    }\n\n    // request thumbnails for some files\n    // only for 'file view'. not for 'history/trash file view'\n    let thumbnailURL = '';\n    const fileExtList = ['tif', 'tiff', 'psd'];\n    if (!repoEncrypted && fileExtList.includes(fileExt)) {\n      thumbnailURL = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${Utils.encodePath(filePath)}`;\n    }\n\n    // for xmind file\n    const xmindSrc = xmindImageSrc ? `${siteRoot}${xmindImageSrc}` : '';\n\n    return (\n      <div className=\"file-view-content flex-1 image-file-view\">\n        {previousImage && (\n          <a href={previousImageUrl} id=\"img-prev\" title={gettext('you can also press  ')}><span className=\"fas fa-chevron-left\"></span></a>\n        )}\n        {nextImage && (\n          <a href={nextImageUrl} id=\"img-next\" title={gettext('you can also press ')}><span className=\"fas fa-chevron-right\"></span></a>\n        )}\n        <img src={xmindSrc || thumbnailURL || rawPath} alt={fileName} id=\"image-view\" onError={this.handleLoadFailure} />\n      </div>\n    );\n  }\n}\n\nFileContent.propTypes = {\n  tip: PropTypes.string.isRequired,\n};\n\nexport default FileContent;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-view/file-view.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sdoc/sdoc-file-history/side-panel.js",["4227"],[],"import React, { Component, Fragment } from 'react';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport Loading from '../../../components/loading';\nimport { gettext, historyRepoID, PER_PAGE } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport editUtilities from '../../../utils/editor-utilities';\nimport toaster from '../../../components/toast';\nimport HistoryVersion from './history-version';\nimport Switch from '../../../components/common/switch';\nimport { getCurrentAndLastVersion, getLastVersion } from './helper';\n\nmoment.locale(window.app.config.lang);\n\nconst { docUuid } = window.fileHistory.pageOptions;\n\nclass SidePanel extends Component {\n\n  constructor(props) {\n    super(props);\n    const { sidePanelInitData } = props;\n    this.state = {\n      isLoading: sidePanelInitData.isLoading ?? true,\n      historyGroups: sidePanelInitData.historyGroups || [],\n      errorMessage: sidePanelInitData.errorMessage || '',\n      hasMore: sidePanelInitData.hasMore || false,\n      isReloadingData: false,\n    };\n    this.currentPage = 1;\n  }\n\n  formatHistories(histories) {\n    const oldHistoryGroups = this.state.historyGroups;\n    if (!Array.isArray(histories) || histories.length === 0) return oldHistoryGroups;\n    const newHistoryGroups = oldHistoryGroups.slice(0);\n    histories.forEach(history => {\n      const { date } = history;\n      const momentDate = moment(date);\n      const month = momentDate.format('YYYY-MM');\n      const monthItem = newHistoryGroups.find(item => item.month === month);\n      if (monthItem) {\n        monthItem.children.push({ day: momentDate.format('YYYY-MM-DD'), showDaily: false, children: [history] });\n      } else {\n        newHistoryGroups.push({\n          month,\n          children: [\n            { day: momentDate.format('YYYY-MM-DD'), showDaily: false, children: [history] }\n          ]\n        });\n      }\n    });\n    return newHistoryGroups;\n  }\n\n  updateResultState(result) {\n    const resultCount = result.histories.length;\n    this.setState({\n      historyGroups: this.formatHistories(result.histories),\n      hasMore: resultCount >= PER_PAGE,\n      isLoading: false,\n    });\n  }\n\n  loadMore = () => {\n    if (!this.state.isReloadingData) {\n      this.currentPage = this.currentPage + 1;\n      this.setState({ isReloadingData: true }, () => {\n        seafileAPI.listSdocHistory(docUuid, this.currentPage, PER_PAGE).then(res => {\n          this.updateResultState(res.data);\n          this.setState({ isReloadingData: false });\n        });\n      });\n    }\n  };\n\n  renameHistoryVersion = (objID, newName) => {\n    seafileAPI.renameSdocHistory(docUuid, objID, newName).then((res) => {\n      this.setState({\n        historyGroups: this.state.historyGroups.map(item => {\n          if (item.obj_id == objID) {\n            item.name = newName;\n          }\n          return item;\n        })\n      });\n    }).catch(error => {\n      const errorMessage = Utils.getErrorMsg(error, true);\n      this.setState({ isLoading: false, errorMessage: errorMessage });\n    });\n  };\n\n  onScrollHandler = (event) => {\n    const clientHeight = event.target.clientHeight;\n    const scrollHeight = event.target.scrollHeight;\n    const scrollTop = event.target.scrollTop;\n    const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n    if (isBottom && this.state.hasMore) {\n      this.loadMore();\n    }\n  };\n\n  restoreVersion = (currentItem) => {\n    const { commit_id, path } = currentItem;\n    editUtilities.revertFile(path, commit_id).then(res => {\n      if (res.data.success) {\n        this.setState({ isLoading: true }, () => {\n          this.firstLoadSdocHistory();\n        });\n      }\n      let message = gettext('Successfully restored.');\n      toaster.success(message);\n    }).catch(error => {\n      const errorMessage = Utils.getErrorMsg(error, true);\n      toaster.danger(gettext(errorMessage));\n    });\n  };\n\n  onSelectHistoryVersion = (path) => {\n    const { historyGroups } = this.state;\n    const { isShowChanges } = this.props;\n    this.props.onSelectHistoryVersion(...getCurrentAndLastVersion(path, historyGroups, isShowChanges));\n  };\n\n  copyHistoryFile = (historyVersion) => {\n    const { path, obj_id, ctime_format } = historyVersion;\n    seafileAPI.sdocCopyHistoryFile(historyRepoID, path, obj_id, ctime_format).then(res => {\n      let message = gettext('Successfully copied %(name)s.');\n      let filename = res.data.file_name;\n      message = message.replace('%(name)s', filename);\n      toaster.success(message);\n    }).catch(error => {\n      const errorMessage = Utils.getErrorMsg(error, true);\n      toaster.danger(gettext(errorMessage));\n    });\n  };\n\n  showDailyHistory = (path, callback) => {\n    const { historyGroups } = this.state;\n    const newHistoryGroups = historyGroups.slice(0);\n    const dayHistoryGroup = newHistoryGroups[path[0]].children[path[1]];\n    if (dayHistoryGroup.showDaily) {\n      dayHistoryGroup.showDaily = false;\n      this.setState({ historyGroups: newHistoryGroups }, () => {\n        callback && callback();\n      });\n      return;\n    }\n    if (dayHistoryGroup.children.length > 1) {\n      dayHistoryGroup.showDaily = true;\n      this.setState({ historyGroups: newHistoryGroups }, () => {\n        callback && callback();\n      });\n      return;\n    }\n\n    seafileAPI.listSdocDailyHistoryDetail(docUuid, dayHistoryGroup.children[0].ctime).then(res => {\n      const histories = res.data.histories;\n      dayHistoryGroup.children.push(...histories);\n      dayHistoryGroup.showDaily = true;\n      this.setState({ historyGroups: newHistoryGroups }, () => {\n        callback && callback();\n      });\n    }).catch(error => {\n      const errorMessage = Utils.getErrorMsg(error, true);\n      toaster.danger(gettext(errorMessage));\n    });\n  };\n\n  renderHistoryVersions = () => {\n    const { isLoading, historyGroups, errorMessage } = this.state;\n    if (historyGroups.length === 0) {\n      if (isLoading) {\n        return (\n          <div className=\"h-100 w-100 d-flex align-items-center justify-content-center\">\n            <Loading />\n          </div>\n        );\n      }\n      if (errorMessage) {\n        return (\n          <div className=\"h-100 w-100 d-flex align-items-center justify-content-center error-message\">\n            {gettext(errorMessage)}\n          </div>\n        );\n      }\n      return (\n        <div className=\"h-100 w-100 d-flex align-items-center justify-content-center empty-tip-color\">\n          {gettext('No version history')}\n        </div>\n      );\n    }\n\n    return (\n      <>\n        {historyGroups.map((monthHistoryGroup, historyGroupIndex) => {\n          return (\n            <Fragment key={monthHistoryGroup.month}>\n              <div className=\"history-list-item history-month-title\" key={monthHistoryGroup.month}>{monthHistoryGroup.month}</div>\n              {monthHistoryGroup.children.map((dayHistoryGroup, dayHistoryGroupIndex) => {\n                const { children, showDaily } = dayHistoryGroup;\n                const displayHistories = showDaily ? children : children.slice(0, 1);\n                return displayHistories.map((history, index) => {\n                  return (\n                    <HistoryVersion\n                      key={history.commit_id}\n                      path={[historyGroupIndex, dayHistoryGroupIndex, index]}\n                      showDaily={index === 0 && showDaily}\n                      currentVersion={this.props.currentVersion}\n                      historyVersion={history}\n                      onSelectHistoryVersion={this.onSelectHistoryVersion}\n                      onRestore={this.restoreVersion}\n                      onCopy={this.copyHistoryFile}\n                      renameHistoryVersion={this.renameHistoryVersion}\n                      showDailyHistory={this.showDailyHistory}\n                    />\n                  );\n                });\n              }).flat()}\n            </Fragment>\n          );\n        })}\n        {isLoading && (\n          <div className=\"loading-more d-flex align-items-center justify-content-center w-100\">\n            <Loading />\n          </div>\n        )}\n      </>\n    );\n  };\n\n  onShowChanges = () => {\n    const { isShowChanges, currentVersion } = this.props;\n    const { historyGroups } = this.state;\n    const nextShowChanges = !isShowChanges;\n    let lastVersion;\n    if (nextShowChanges) {\n      const { date } = currentVersion;\n      const momentDate = moment(date);\n      const month = momentDate.format('YYYY-MM');\n      const day = momentDate.format('YYYY-MM-DD');\n      const monthIndex = historyGroups.findIndex(item => item.month === month);\n      const dayIndex = historyGroups[monthIndex].children.findIndex(item => item.day === day);\n      const dailyIndex = historyGroups[monthIndex].children[dayIndex].children.findIndex(item => item.date === date);\n      const path = [monthIndex, dayIndex, dailyIndex];\n      lastVersion = getLastVersion(path, nextShowChanges, this.state.historyGroups);\n    }\n    this.props.onShowChanges(nextShowChanges, lastVersion);\n  };\n\n  render() {\n    const { historyGroups } = this.state;\n\n    return (\n      <div className=\"sdoc-file-history-panel d-flex flex-column\">\n        <div className=\"sdoc-file-history-select-range\">\n          <div className=\"sdoc-file-history-select-range-title\">\n            {gettext('History Versions')}\n          </div>\n          <div className='sdoc-side-panel-close'>\n            <i className=\"sf3-font sf3-font-close\" onClick={this.props.onClose}></i>\n          </div>\n        </div>\n        <div\n          className={classnames('sdoc-file-history-versions', { 'o-hidden': historyGroups.length === 0 })}\n          onScroll={this.onScrollHandler}\n        >\n          {this.renderHistoryVersions()}\n        </div>\n        <div className=\"sdoc-file-history-diff-switch d-flex align-items-center\">\n          <Switch\n            checked={this.props.isShowChanges}\n            placeholder={gettext('Show changes')}\n            className=\"sdoc-history-show-changes w-100\"\n            size=\"small\"\n            onChange={this.onShowChanges}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nSidePanel.propTypes = {\n  isShowChanges: PropTypes.bool,\n  currentVersion: PropTypes.object,\n  onSelectHistoryVersion: PropTypes.func,\n  onShowChanges: PropTypes.func,\n  sidePanelInitData: PropTypes.shape({\n    isLoading: PropTypes.bool,\n    historyGroups: PropTypes.array,\n    hasMore: PropTypes.bool,\n    errorMessage: PropTypes.string,\n  }),\n  onClose: PropTypes.func,\n};\n\nexport default SidePanel;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sdoc/sdoc-file-history/helper.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-content-view/video.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-content-view/pdf.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-content-view/audio.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/side-nav.js",["4228"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass SideNav extends React.Component {\n  render() {\n    return (\n      <ul className=\"nav flex-column user-setting-nav\">\n        {this.props.data.map((item, index) => {\n          return item.show ?\n            <li key={index} className={`nav-item${this.props.curItemID == item.href.substr(1) ? ' active' : ''}`}><a className=\"nav-link\" href={item.href}>{item.text}</a></li> : null;\n        })}\n      </ul>\n    );\n  }\n}\n\nSideNav.propTypes = {\n  curItemID: PropTypes.string.isRequired,\n  data: PropTypes.array.isRequired,\n};\n\nexport default SideNav;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/user-avatar-form.js",["4229","4230","4231","4232"],[],"import React from 'react';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\nimport { Utils } from '../../utils/utils';\n\nconst { avatarURL, csrfToken } = window.app.pageOptions;\n\nclass UserAvatarForm extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      avatarSrc: avatarURL,\n      isEditShown: false\n    };\n    this.fileInput = React.createRef();\n    this.form = React.createRef();\n  }\n\n  fileInputChange = () => {\n\n    // no file selected\n    if (!this.fileInput.current.files.length) {\n      return;\n    }\n\n    const file = this.fileInput.current.files[0];\n    const fileName = file.name;\n\n    // no file extension\n    if (fileName.lastIndexOf('.') == -1) {\n      toaster.danger(gettext('Please choose an image file.'), {\n        duration: 5\n      });\n      return false;\n    }\n\n    const fileExt = fileName.substr((fileName.lastIndexOf('.') + 1)).toLowerCase();\n    const allowedExt = ['jpg','jpeg', 'png', 'gif'];\n    if (allowedExt.indexOf(fileExt) == -1) {\n      const errorMsg = gettext('File extensions can only be {placeholder}.')\n        .replace('{placeholder}', allowedExt.join(', '));\n      toaster.danger(errorMsg, {duration: 5});\n      return false;\n    }\n\n    // file size should be less than 1MB\n    if (file.size > 1024*1024) {\n      const errorMsg = gettext('The file is too large. Allowed maximum size is 1MB.');\n      toaster.danger(errorMsg, {duration: 5});\n      return false;\n    }\n\n    //this.form.current.submit();\n    seafileAPI.updateUserAvatar(file, 160).then((res) => {\n      this.setState({\n        avatarSrc: res.data.avatar_url\n      });\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n    });\n  };\n\n  openFileInput = () => {\n    this.fileInput.current.click();\n  };\n\n  handleMouseOver = () => {\n    this.setState({\n      isEditShown: true\n    });\n  };\n\n  handleMouseOut = () => {\n    this.setState({\n      isEditShown: false\n    });\n  };\n\n  onEditIconKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      e.target.click();\n    }\n  };\n\n  render() {\n    return (\n      <form ref={this.form} className=\"form-group row\" encType=\"multipart/form-data\" method=\"post\" action={`${siteRoot}avatar/add/`}>\n        <input type=\"hidden\" name=\"csrfmiddlewaretoken\" value={csrfToken} />\n        <label className=\"col-sm-1 col-form-label\">{gettext('Avatar:')}</label>\n        <div className=\"col-auto position-relative\" onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver} tabIndex=\"0\">\n          <img src={this.state.avatarSrc} width=\"80\" height=\"80\" alt=\"\" className=\"user-avatar\" />\n          <input type=\"file\" name=\"avatar\" className=\"d-none\" onChange={this.fileInputChange} ref={this.fileInput} />\n          <span className={`avatar-edit fas fa-edit ${!this.state.isEditShown && 'd-none'}`} onClick={this.openFileInput} role=\"button\" aria-label={gettext('Edit')} tabIndex=\"0\" onKeyDown={this.onEditIconKeyDown}></span>\n        </div>\n      </form>\n    );\n  }\n}\n\nexport default UserAvatarForm;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/webdav-password.js",["4233","4234"],[],"import React from 'react';\nimport ModalPortal from '../modal-portal';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport SetWebdavPassword from '../dialog/set-webdav-password';\nimport ResetWebdavPassword from '../dialog/reset-webdav-password';\nimport RemoveWebdavPassword from '../dialog/remove-webdav-password';\n\nconst { username, webdavUrl, webdavPasswordSetted } = window.app.pageOptions;\n\nclass WebdavPassword extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isWebdavPasswordSetted: webdavPasswordSetted,\n      isSetPasserdDialogOpen: false,\n      isResetPasserdDialogOpen: false,\n      isRemovePasserdDialogOpen: false,\n    };\n  }\n\n  toggleSetPasswordDialog = () => {\n    this.setState({\n      isSetPasserdDialogOpen: !this.state.isSetPasserdDialogOpen,\n    });\n  };\n\n  setPassword = (password) => {\n    seafileAPI.updateWebdavSecret(password).then((res) => {\n      this.toggleSetPasswordDialog();\n      this.setState({\n        isWebdavPasswordSetted: !this.state.isWebdavPasswordSetted,\n      });\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.toggleSetPasswordDialog();\n      toaster.danger(errorMsg);\n    });\n  };\n\n  toggleResetPasswordDialog = () => {\n    this.setState({\n      isResetPasswordDialogOpen: !this.state.isResetPasswordDialogOpen,\n    });\n  };\n\n  resetPassword = (password) => {\n    seafileAPI.updateWebdavSecret(password).then((res) => {\n      this.toggleResetPasswordDialog();\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.toggleResetPasswordDialog();\n      toaster.danger(errorMsg);\n    });\n  };\n\n  toggleRemovePasswordDialog = () => {\n    this.setState({\n      isRemovePasswordDialogOpen: !this.state.isRemovePasswordDialogOpen,\n    });\n  };\n\n  removePassword = () => {\n    seafileAPI.updateWebdavSecret().then((res) => {\n      this.toggleRemovePasswordDialog();\n      this.setState({\n        isWebdavPasswordSetted: !this.state.isWebdavPasswordSetted,\n      });\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.toggleRemovePasswordDialog();\n      toaster.danger(errorMsg);\n    });\n  };\n\n  onIconKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      e.target.click();\n    }\n  };\n\n  render() {\n    const { isWebdavPasswordSetted } = this.state;\n    return (\n      <React.Fragment>\n        <div id=\"update-webdav-passwd\" className=\"setting-item\">\n          <h3 className=\"setting-item-heading\">{gettext('WebDAV Password')}</h3>\n          <p>WebDAV URL: <a href={webdavUrl}>{webdavUrl}</a></p>\n          <p>{gettext('WebDAV username:')} {username}</p>\n          {!isWebdavPasswordSetted ?\n            <React.Fragment>\n              <p>{gettext('WebDAV password:')} {gettext('not set')}</p>\n              <button className=\"btn btn-outline-primary\" onClick={this.toggleSetPasswordDialog}>{gettext('Set Password')}</button>\n            </React.Fragment>\n            :\n            <React.Fragment>\n              <p>{gettext('WebDAV password:')} ***</p>\n              <button className=\"btn btn-outline-primary mr-2\" onClick={this.toggleResetPasswordDialog}>{gettext('Reset Password')}</button>\n              <button className=\"btn btn-outline-primary\" onClick={this.toggleRemovePasswordDialog}>{gettext('Delete Password')}</button>\n            </React.Fragment>\n          }\n        </div>\n        {this.state.isSetPasserdDialogOpen && (\n          <ModalPortal>\n            <SetWebdavPassword\n              setPassword={this.setPassword}\n              toggle={this.toggleSetPasswordDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isResetPasswordDialogOpen && (\n          <ModalPortal>\n            <ResetWebdavPassword\n              resetPassword={this.resetPassword}\n              toggle={this.toggleResetPasswordDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isRemovePasswordDialogOpen && (\n          <ModalPortal>\n            <RemoveWebdavPassword\n              removePassword={this.removePassword}\n              toggle={this.toggleRemovePasswordDialog}\n            />\n          </ModalPortal>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default WebdavPassword;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/user-basic-info-form.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/two-factor-auth.js",["4235","4236"],[],"import React from 'react';\nimport { gettext, siteRoot } from '../../utils/constants';\n\nconst {\n  defaultDevice,\n  backupTokens\n} = window.app.pageOptions;\n\nclass TwoFactorAuthentication extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  renderEnabled = () => {\n    return (\n      <React.Fragment>\n        <p className=\"mb-2\">{gettext('Status: enabled')}</p>\n        <a className=\"btn btn-outline-primary mb-4\" href={`${siteRoot}profile/two_factor_authentication/disable/`}>\n          {gettext('Disable Two-Factor Authentication')}</a>\n        <p className=\"mb-2\">\n          {gettext('If you don\\'t have any device with you, you can access your account using backup codes.')}\n          {backupTokens == 1 ? gettext('You have only one backup code remaining.') :\n            gettext('You have {num} backup codes remaining.').replace('{num}', backupTokens)}\n        </p>\n        <a href={`${siteRoot}profile/two_factor_authentication/backup/tokens/`}\n          className=\"btn btn-outline-primary\">{gettext('Show Codes')}</a>\n      </React.Fragment>\n    );\n  };\n\n  renderDisabled = () => {\n    return (\n      <React.Fragment>\n        <p className=\"mb-2\">{gettext('Two-factor authentication is not enabled for your account. Enable two-factor authentication for enhanced account security.')}</p>\n        <a href={`${siteRoot}profile/two_factor_authentication/setup/`} className=\"btn btn-outline-primary\">\n          {gettext('Enable Two-Factor Authentication')}</a>\n      </React.Fragment>\n    );\n  };\n\n  render() {\n    return (\n      <div className=\"setting-item\" id=\"two-factor-auth\">\n        <h3 className=\"setting-item-heading\">{gettext('Two-Factor Authentication')}</h3>\n        {defaultDevice ? this.renderEnabled() : this.renderDisabled()}\n      </div>\n    );\n  }\n}\n\nexport default TwoFactorAuthentication;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/social-login.js",["4237"],[],"import React from 'react';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport ConfirmDisconnectWechat from '../dialog/confirm-disconnect-wechat';\n\nconst {\n  csrfToken,\n  langCode,\n  socialConnected,\n  socialNextPage\n} = window.app.pageOptions;\n\nclass SocialLogin extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isConfirmDialogOpen: false\n    };\n  }\n\n  confirmDisconnect = () => {\n    this.setState({\n      isConfirmDialogOpen: true\n    });\n  };\n\n  toggleDialog = () => {\n    this.setState({\n      isConfirmDialogOpen: !this.state.isConfirmDialogOpen\n    });\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <div className=\"setting-item\" id=\"social-auth\">\n          <h3 className=\"setting-item-heading\">{gettext('Social Login')}</h3>\n          <p className=\"mb-2\">{langCode == 'zh-cn' ? '': 'WeChat Work'}</p>\n          {socialConnected ?\n            <button className=\"btn btn-outline-primary\" onClick={this.confirmDisconnect}>{gettext('Disconnect')}</button> :\n            <a href={`${siteRoot}work-weixin/oauth-connect/?next=${encodeURIComponent(socialNextPage)}`} className=\"btn btn-outline-primary\">{gettext('Connect')}</a>\n          }\n        </div>\n        {this.state.isConfirmDialogOpen && (\n          <ModalPortal>\n            <ConfirmDisconnectWechat\n              formActionURL={`${siteRoot}work-weixin/oauth-disconnect/?next=${encodeURIComponent(socialNextPage)}`}\n              csrfToken={csrfToken}\n              toggle={this.toggleDialog}\n            />\n          </ModalPortal>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default SocialLogin;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/list-in-address-book.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/social-login-saml.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/delete-account.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/web-api-auth-token.js",["4238","4239"],[],"import React from 'react';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass WebAPIAuthToken extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      authToken: '',\n      isAuthTokenVisible: false,\n    };\n  }\n\n  componentDidMount() {\n    this.getAuthToken();\n  }\n\n  getAuthToken = () => {\n    seafileAPI.getAuthTokenBySession().then((res) => {\n      this.setState({\n        authToken: res.data.token\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  createAuthToken = () => {\n    seafileAPI.createAuthTokenBySession().then((res) => {\n      this.setState({\n        authToken: res.data.token,\n        isAuthTokenVisible: false\n      });\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n    });\n  };\n\n  deleteAuthToken = () => {\n    seafileAPI.deleteAuthTokenBySession().then((res) => {\n      this.setState({\n        authToken: '',\n        isAuthTokenVisible: false\n      });\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n    });\n  };\n\n  toggleAuthTokenVisible = () => {\n    this.setState({\n      isAuthTokenVisible: !this.state.isAuthTokenVisible\n    });\n  };\n\n  onIconKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      e.target.click();\n    }\n  };\n\n  render() {\n    const { authToken, isAuthTokenVisible } = this.state;\n    return (\n      <React.Fragment>\n        <div id=\"get-auth-token\" className=\"setting-item\">\n          <h3 className=\"setting-item-heading\">{gettext('Web API Auth Token')}</h3>\n          {authToken ? (\n            <React.Fragment>\n              <div className=\"d-flex align-items-center\">\n                <label className=\"m-0 mr-2\" htmlFor=\"token\">{gettext('Token:')}</label>\n                <input id=\"token\" className=\"border-0 mr-1\" type=\"text\" value={isAuthTokenVisible ? authToken : '****************************************'} readOnly={true} size={Math.max(authToken.length, 10)} />\n                <span tabIndex=\"0\" role=\"button\" aria-label={isAuthTokenVisible ? gettext('Hide') : gettext('Show')} onKeyDown={this.onIconKeyDown} onClick={this.toggleAuthTokenVisible} className={`eye-icon fas ${this.state.isAuthTokenVisible ? 'fa-eye': 'fa-eye-slash'}`}></span>\n              </div>\n              <button className=\"btn btn-outline-primary mt-2\" onClick={this.deleteAuthToken}>{gettext('Delete')}</button>\n            </React.Fragment>\n          ) : (\n            <button className=\"btn btn-outline-primary\" onClick={this.createAuthToken}>{gettext('Generate')}</button>\n          )}\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default WebAPIAuthToken;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/email-notice.js",["4240","4241"],[],"import React from 'react';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst {\n  fileUpdatesEmailInterval,\n  collaborateEmailInterval\n} = window.app.pageOptions;\n\nclass EmailNotice extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    // interval: in seconds\n    this.fileUpdatesOptions = [\n      {interval: 0, text: gettext('Don\\'t send emails')},\n      {interval: 3600, text: gettext('Per hour')},\n      {interval: 14400, text: gettext('Per 4 hours')},\n      {interval: 86400, text: gettext('Per day')},\n      {interval: 604800, text: gettext('Per week')}\n    ];\n\n    this.collaborateOptions = [\n      {interval: 0, text: gettext('Don\\'t send emails')},\n      {interval: 3600, text: gettext('Per hour') + ' (' + gettext('If notifications have not been read within one hour, they will be sent to your mailbox.') + ')'}\n    ];\n\n    this.state = {\n      fileUpdatesEmailInterval: fileUpdatesEmailInterval,\n      collaborateEmailInterval: collaborateEmailInterval\n    };\n  }\n\n  inputFileUpdatesEmailIntervalChange = (e) => {\n    if (e.target.checked) {\n      this.setState({\n        fileUpdatesEmailInterval: parseInt(e.target.value)\n      });\n    }\n  };\n\n  inputCollaborateEmailIntervalChange = (e) => {\n    if (e.target.checked) {\n      this.setState({\n        collaborateEmailInterval: parseInt(e.target.value)\n      });\n    }\n  };\n\n  formSubmit = (e) => {\n    e.preventDefault();\n    let { fileUpdatesEmailInterval, collaborateEmailInterval } = this.state;\n    seafileAPI.updateEmailNotificationInterval(fileUpdatesEmailInterval, collaborateEmailInterval).then((res) => {\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n    });\n  };\n\n  render() {\n    const { fileUpdatesEmailInterval, collaborateEmailInterval } = this.state;\n    return (\n      <div className=\"setting-item\" id=\"email-notice\">\n        <h3 className=\"setting-item-heading\">{gettext('Email Notification')}</h3>\n        <h6 className=\"\">{gettext('Notifications of file changes')}</h6>\n        <p className=\"mb-1\">{gettext('The list of added, deleted and modified files will be sent to your mailbox.')}</p>\n        <form method=\"post\" action=\"\" id=\"set-email-notice-interval-form\" onSubmit={this.formSubmit}>\n          {this.fileUpdatesOptions.map((item, index) => {\n            return (\n              <React.Fragment key={`file-updates-${index}`}>\n                <input type=\"radio\" name=\"interval\" value={item.interval} className=\"align-middle\" id={`file-updates-interval-option${index + 1}`} checked={fileUpdatesEmailInterval == item.interval} onChange={this.inputFileUpdatesEmailIntervalChange} />\n                <label className=\"align-middle m-0 ml-2\" htmlFor={`interval-option${index + 1}`}>{item.text}</label>\n                <br />\n              </React.Fragment>\n            );\n          })}\n        </form>\n\n        <h6 className=\"mt-4\">{gettext('Notifications of collaboration')}</h6>\n        <p className=\"mb-1\">{gettext('Whether the notifications of collaboration such as sharing library or joining group should be sent to your mailbox.')}</p>\n        <form method=\"post\" action=\"\" id=\"set-email-notice-interval-form\" onSubmit={this.formSubmit}>\n          {this.collaborateOptions.map((item, index) => {\n            return (\n              <React.Fragment key={`collaborate-${index}`}>\n                <input type=\"radio\" name=\"interval\" value={item.interval} className=\"align-middle\" id={`collaborate-interval-option${index + 1}`} checked={collaborateEmailInterval == item.interval} onChange={this.inputCollaborateEmailIntervalChange} />\n                <label className=\"align-middle m-0 ml-2\" htmlFor={`interval-option${index + 1}`}>{item.text}</label>\n                <br />\n              </React.Fragment>\n            );\n          })}\n        </form>\n        <button type=\"submit\" className=\"btn btn-outline-primary mt-2\" onClick={this.formSubmit}>{gettext('Submit')}</button>\n      </div>\n    );\n  }\n}\n\nexport default EmailNotice;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/social-login-dingtalk.js",["4242"],[],"import React from 'react';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport ConfirmDisconnectDingtalk from '../dialog/confirm-disconnect-dingtalk';\n\nconst {\n  csrfToken,\n  langCode,\n  socialConnectedDingtalk,\n  socialNextPage\n} = window.app.pageOptions;\n\nclass SocialLoginDintalk extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isConfirmDialogOpen: false\n    };\n  }\n\n  confirmDisconnect = () => {\n    this.setState({\n      isConfirmDialogOpen: true\n    });\n  };\n\n  toggleDialog = () => {\n    this.setState({\n      isConfirmDialogOpen: !this.state.isConfirmDialogOpen\n    });\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <div className=\"setting-item\" id=\"social-auth\">\n          <h3 className=\"setting-item-heading\">{gettext('Social Login')}</h3>\n          <p className=\"mb-2\">{langCode == 'zh-cn' ? '': 'Dingtalk'}</p>\n          {socialConnectedDingtalk ?\n            <button className=\"btn btn-outline-primary\" onClick={this.confirmDisconnect}>{gettext('Disconnect')}</button> :\n            <a href={`${siteRoot}dingtalk/connect/?next=${encodeURIComponent(socialNextPage)}`} className=\"btn btn-outline-primary\">{gettext('Connect')}</a>\n          }\n        </div>\n        {this.state.isConfirmDialogOpen && (\n          <ModalPortal>\n            <ConfirmDisconnectDingtalk\n              formActionURL={`${siteRoot}dingtalk/disconnect/?next=${encodeURIComponent(socialNextPage)}`}\n              csrfToken={csrfToken}\n              toggle={this.toggleDialog}\n            />\n          </ModalPortal>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default SocialLoginDintalk;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/edit-repo-commit-labels.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-content-view/text.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-content-view/markdown.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-content-view/sdoc.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/seafile-codemirror/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/history-trash-file-view/file-view.js",["4243"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport watermark from 'watermark-dom';\nimport { gettext, siteName } from '../../utils/constants';\nimport Download from './download';\n\nimport '../../css/file-view.css';\n\nconst propTypes = {\n  content: PropTypes.object.isRequired\n};\n\nconst {\n  fromTrash,\n  fileName, commitTime,\n  canDownloadFile,\n  enableWatermark, userNickName\n} = window.app.pageOptions;\n\n\nclass FileView extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <div className=\"h-100 d-flex flex-column flex-1 mw-100\">\n        <div className=\"file-view-header d-flex justify-content-between align-items-center\">\n          <div className=\"text-truncate mr-4\">\n            <h2 className=\"file-title text-truncate\" title={fileName}>{fileName}</h2>\n            <p className=\"meta-info m-0\">{fromTrash ? `${gettext('Current Path: ')}${gettext('Trash')}`: commitTime}</p>\n          </div>\n          {canDownloadFile && <Download />}\n        </div>\n        <div className=\"file-view-body flex-auto d-flex o-hidden\">\n          {this.props.content}\n        </div>\n      </div>\n    );\n  }\n}\n\nif (enableWatermark) {\n  watermark.init({\n    watermark_txt: `${siteName} ${userNickName}`,\n    watermark_alpha: 0.075\n  });\n}\n\nFileView.propTypes = propTypes;\n\nexport default FileView;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/history-trash-file-view/file-view-tip.js",["4244","4245"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport Download from './download';\n\nconst propTypes = {\n  err: PropTypes.string\n};\nconst { canDownloadFile, err } = window.app.pageOptions;\nconst UNSUPPORTED = 'File preview unsupported';\n\nclass FileViewTip extends React.Component {\n\n  render() {\n    let errorMsg;\n    if (err == UNSUPPORTED || this.props.err == UNSUPPORTED) {\n      errorMsg = <p>{gettext('Online view is not applicable to this file format')}</p>;\n    } else {\n      errorMsg = <p className=\"error\">{err}</p>;\n    }\n\n    return (\n      <div className=\"file-view-content flex-1 o-auto\">\n        <div className=\"file-view-tip\">\n          {errorMsg}\n          {canDownloadFile && <Download />}\n        </div>\n      </div>\n    );\n  }\n}\nFileViewTip.propTypes = propTypes;\n\nexport default FileViewTip;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/commit-details.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/paginator.js",["4246"],[],"import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { gettext } from '../utils/constants';\n\nimport '../css/pagination.css';\n\nconst propTypes = {\n  currentPage: PropTypes.number.isRequired,\n  gotoPreviousPage: PropTypes.func.isRequired,\n  gotoNextPage: PropTypes.func.isRequired,\n  hasNextPage: PropTypes.bool.isRequired,\n  resetPerPage: PropTypes.func.isRequired,\n  curPerPage: PropTypes.number.isRequired\n};\n\nclass Paginator extends Component {\n\n  resetPerPage = (e) => {\n    const perPage = parseInt(e.target.value);\n    this.updateURL(1, perPage);\n    this.props.resetPerPage(perPage);\n  };\n\n  goToPrevious = () => {\n    const { currentPage, curPerPage } = this.props;\n    this.updateURL(currentPage - 1, curPerPage);\n    this.props.gotoPreviousPage();\n  };\n\n  goToNext = () => {\n    const { currentPage, curPerPage } = this.props;\n    this.updateURL(currentPage + 1, curPerPage);\n    this.props.gotoNextPage();\n  };\n\n  updateURL = (page, perPage) => {\n    let url = new URL(location.href);\n    let searchParams = new URLSearchParams(url.search);\n    searchParams.set('page', page);\n    searchParams.set('per_page', perPage);\n    url.search = searchParams.toString();\n    navigate(url.toString());\n  };\n\n  getPerPageText = (perPage) => {\n    return gettext('{number_placeholder} / Page').replace('{number_placeholder}', perPage);\n  };\n\n  render() {\n    const { curPerPage, currentPage } = this.props;\n    return (\n      <div className=\"my-6 paginator d-flex align-items-center justify-content-center\">\n        <button\n          className=\"btn btn-secondary\"\n          disabled={currentPage == 1}\n          onClick={this.goToPrevious}\n        >\n          <span className=\"fas fa-chevron-left\"></span>\n        </button>\n        <span className=\"btn btn-primary mx-4\">{currentPage}</span>\n        <button\n          className=\"btn btn-secondary\"\n          disabled={!this.props.hasNextPage}\n          onClick={this.goToNext}\n        >\n          <span className=\"fas fa-chevron-right\"></span>\n        </button>\n\n        <select\n          className=\"form-control d-inline-block w-auto ml-6\"\n          value={curPerPage}\n          onChange={this.resetPerPage}\n        >\n          <option value=\"25\">{this.getPerPageText(25)}</option>\n          <option value=\"50\">{this.getPerPageText(50)}</option>\n          <option value=\"100\">{this.getPerPageText(100)}</option>\n        </select>\n      </div>\n    );\n  }\n}\n\nPaginator.propTypes = propTypes;\n\nexport default Paginator;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/clean-trash.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/plain-markdown-editor/code-mirror.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/side-panel.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/confirm-restore-repo.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/go-back/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/notification.js",["4247"],[],"import React from 'react';\nimport NotificationPopover from './notification-popover';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport NoticeItem from './notice-item';\nimport UserNotificationsDialog from '../../user-notifications';\nimport { Utils } from '../../utils/utils';\nimport '../../css/notification.css';\n\nclass Notification extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showNotice: false,\n      unseenCount: 0,\n      noticeList: [],\n      isShowNotificationDialog: this.getInitDialogState(),\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getUnseenNotificationCount().then(res => {\n      this.setState({unseenCount: res.data.unseen_count});\n    });\n  }\n\n  onClick = (e) => {\n    e.preventDefault();\n    if (this.state.showNotice) {\n      seafileAPI.updateNotifications();\n      this.setState({\n        showNotice: false,\n        unseenCount: 0\n      });\n    } else {\n      this.loadNotices();\n      this.setState({showNotice: true});\n    }\n  };\n\n  loadNotices = () => {\n    let page = 1;\n    let perPage = 5;\n    seafileAPI.listNotifications(page, perPage).then(res => {\n      let noticeList = res.data.notification_list;\n      this.setState({noticeList: noticeList});\n    });\n  };\n\n  onNoticeItemClick = (noticeItem) => {\n    let noticeList = this.state.noticeList.map(item => {\n      if (item.id === noticeItem.id) {\n        item.seen = true;\n      }\n      return item;\n    });\n    seafileAPI.markNoticeAsRead(noticeItem.id);\n    let unseenCount = this.state.unseenCount === 0 ? 0 : this.state.unseenCount - 1;\n    this.setState({\n      noticeList: noticeList,\n      unseenCount: unseenCount,\n    });\n\n  };\n\n  getInitDialogState = () => {\n    const searchParams = Utils.getUrlSearches();\n    return searchParams.notifications === 'all';\n  };\n\n  onNotificationDialogToggle = () => {\n    let newSearch = this.state.isShowNotificationDialog ? null : 'all';\n    Utils.updateSearchParameter('notifications', newSearch);\n    this.setState({isShowNotificationDialog: !this.state.isShowNotificationDialog});\n  };\n\n  onNotificationListToggle = () => {\n    this.setState({showNotice: false});\n  };\n\n  onMarkAllNotifications = () => {\n    seafileAPI.updateNotifications().then(() => {\n      this.setState({\n        unseenCount: 0,\n      });\n    }).catch((error) => {\n      this.setState({\n        errorMsg: Utils.getErrorMsg(error, true)\n      });\n    });\n  };\n\n  render() {\n    const { unseenCount } = this.state;\n    return (\n      <div id=\"notifications\">\n        <a href=\"#\" onClick={this.onClick} className=\"no-deco\" id=\"notice-icon\" title={gettext('Notifications')} aria-label={gettext('Notifications')}>\n          <span className=\"sf2-icon-bell\" id=\"notification-popover\"></span>\n          <span className={`num ${unseenCount ? '' : 'hide'}`}>{unseenCount}</span>\n        </a>\n        {this.state.showNotice &&\n          <NotificationPopover\n            headerText={gettext('Notification')}\n            bodyText={gettext('Mark all as read')}\n            footerText={gettext('View all notifications')}\n            onNotificationListToggle={this.onNotificationListToggle}\n            onNotificationDialogToggle={this.onNotificationDialogToggle}\n            onMarkAllNotifications={this.onMarkAllNotifications}\n          >\n            <ul className=\"notice-list list-unstyled\" id=\"notice-popover\">\n              {this.state.noticeList.map(item => {\n                return (<NoticeItem key={item.id} noticeItem={item} onNoticeItemClick={this.onNoticeItemClick}/>);\n              })}\n            </ul>\n          </NotificationPopover>\n        }\n        {this.state.isShowNotificationDialog &&\n          <UserNotificationsDialog onNotificationDialogToggle={this.onNotificationDialogToggle} />\n        }\n      </div>\n    );\n  }\n}\n\nexport default Notification;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/markdown-editor/editor-api.js",[],["4248","4249"],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/search/main-panel.js",[],["4250","4251","4252","4253"],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/plain-markdown-editor/helper.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/subscription.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/language-setting.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/markdown-editor/header-toolbar/header-toolbar.js",["4254","4255"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, canGenerateShareLink, isPro, mediaUrl, canLockUnlockFile } from '../../../utils/constants';\nimport ButtonGroup from './button-group';\nimport ButtonItem from './button-item';\nimport CollabUsersButton from './collab-users-button';\nimport MoreMenu from './more-menu';\nimport FileInfo from './file-info';\n\nimport '../css/header-toolbar.css';\n\nconst { seafileCollabServer } = window.app.config;\nconst { canDownloadFile } = window.app.pageOptions;\n\nconst propTypes = {\n  editorApi: PropTypes.object.isRequired,\n  collabUsers: PropTypes.array.isRequired,\n  fileInfo: PropTypes.object.isRequired,\n  toggleShareLinkDialog: PropTypes.func.isRequired,\n  onEdit: PropTypes.func.isRequired,\n  toggleStar: PropTypes.func.isRequired,\n  openDialogs: PropTypes.func.isRequired,\n  showFileHistory: PropTypes.bool.isRequired,\n  toggleHistory: PropTypes.func.isRequired,\n  editorMode: PropTypes.string.isRequired,\n  readOnly: PropTypes.bool.isRequired,\n  contentChanged: PropTypes.bool.isRequired,\n  saving: PropTypes.bool.isRequired,\n  onSaveEditorContent: PropTypes.func.isRequired,\n  isLocked: PropTypes.bool.isRequired,\n  lockedByMe: PropTypes.bool.isRequired,\n  toggleLockFile: PropTypes.func.isRequired,\n};\n\nclass HeaderToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  downloadFile = () => {\n    location.href = '?dl=1';\n  };\n\n  openFileViaClient = () => {\n    const { repoID, path } = this.props.fileInfo;\n    location.href = `seafile://openfile?repo_id=${encodeURIComponent(repoID)}&path=${encodeURIComponent(path)}`;\n  };\n\n  openParentDirectory = () => {\n    const { editorApi } = this.props;\n    window.location.href = editorApi.getParentDictionaryUrl();\n  };\n\n  render() {\n    let { contentChanged, saving, isLocked, lockedByMe } = this.props;\n\n    if (this.props.editorMode === 'rich') {\n      return (\n        <div className=\"sf-md-viewer-topbar\">\n          <div className=\"sf-md-viewer-topbar-first d-flex justify-content-between mw-100\">\n            <FileInfo\n              toggleStar={this.props.toggleStar}\n              editorApi={this.props.editorApi}\n              fileInfo={this.props.fileInfo}\n              isLocked={isLocked}\n              isPro={isPro}\n              mediaUrl={mediaUrl}\n              isStarred={this.props.fileInfo.isStarred}\n            />\n            <div className=\"topbar-btn-container\">\n              {(seafileCollabServer && this.props.collabUsers.length > 0) &&\n                <CollabUsersButton\n                  className=\"collab-users-dropdown\"\n                  users={this.props.collabUsers}\n                  id=\"usersButton\"\n                />\n              }\n              <ButtonGroup>\n                <ButtonItem\n                  text={gettext('Open parent directory')}\n                  id={'parentDirectory'}\n                  icon={'fa fa-folder-open'}\n                  onMouseDown={this.openParentDirectory}\n                />\n                {(canLockUnlockFile && !isLocked) && (\n                  <ButtonItem\n                    id=\"lock-unlock-file\"\n                    icon='fa fa-lock'\n                    text={gettext('Lock')}\n                    onMouseDown={this.props.toggleLockFile}\n                  />\n                )}\n                {(canLockUnlockFile && lockedByMe) && (\n                  <ButtonItem\n                    id=\"lock-unlock-file\"\n                    icon='fa fa-unlock'\n                    text={gettext('Unlock')}\n                    onMouseDown={this.props.toggleLockFile}\n                  />\n                )}\n                {canGenerateShareLink && (\n                  <ButtonItem\n                    id={'shareBtn'}\n                    text={gettext('Share')}\n                    icon={'fa fa-share-alt'}\n                    onMouseDown={this.props.toggleShareLinkDialog}\n                  />\n                )}\n                {saving ?\n                  <button type={'button'} aria-label={gettext('Saving...')} className={'btn btn-icon btn-secondary btn-active'}>\n                    <i className={'fa fa-spin fa-spinner'}/>\n                  </button>\n                  :\n                  <ButtonItem text={gettext('Save')} id={'saveButton'} icon={'fa fa-save'} disabled={!contentChanged}\n                    onMouseDown={this.props.onSaveEditorContent} isActive={contentChanged}/>\n                }\n                {canDownloadFile && (\n                  <ButtonItem\n                    id=\"download-file\"\n                    icon=\"fa fa-download\"\n                    text={gettext('Download')}\n                    onClick={this.downloadFile}\n                  />\n                )}\n                {this.props.fileInfo.permission == 'rw' && (\n                  <ButtonItem\n                    id=\"open-via-client\"\n                    icon=\"sf3-font sf3-font-desktop\"\n                    text={gettext('Open via Client')}\n                    onClick={this.openFileViaClient}\n                  />\n                )}\n              </ButtonGroup>\n              <MoreMenu\n                readOnly={this.props.readOnly}\n                openDialogs={this.props.openDialogs}\n                editorMode={this.props.editorMode}\n                onEdit={this.props.onEdit}\n                showFileHistory={this.props.showFileHistory}\n                toggleHistory={this.props.toggleHistory}\n                isSmallScreen={false}\n              />\n            </div>\n          </div>\n          <div className=\"sf-md-viewer-topbar-first-narrow d-flex justify-content-between\">\n            <FileInfo\n              toggleStar={this.props.toggleStar}\n              editorApi={this.props.editorApi}\n              fileInfo={this.props.fileInfo}\n            />\n            <div className=\"topbar-btn-container\">\n              <ButtonGroup>\n                {saving ?\n                  <button type={'button'} aria-label={gettext('Saving...')} className={'btn btn-icon btn-secondary btn-active'}>\n                    <i className={'fa fa-spin fa-spinner'}/></button>\n                  :\n                  <ButtonItem text={gettext('Save')} id={'saveButton'} icon={'fa fa-save'}  disabled={!contentChanged}\n                    onMouseDown={this.props.onSaveEditorContent} isActive={contentChanged}/>\n                }\n              </ButtonGroup>\n              <MoreMenu\n                readOnly={this.props.readOnly}\n                openDialogs={this.props.openDialogs}\n                editorMode={this.props.editorMode}\n                onEdit={this.props.onEdit}\n                toggleShareLinkDialog={this.props.toggleShareLinkDialog}\n                openParentDirectory={this.openParentDirectory}\n                showFileHistory={this.props.showFileHistory}\n                toggleHistory={this.props.toggleHistory}\n                isSmallScreen={true}\n              />\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    if (this.props.editorMode === 'plain') {\n      return (\n        <div className=\"sf-md-viewer-topbar\">\n          <div className=\"sf-md-viewer-topbar-first d-flex justify-content-between\">\n            <FileInfo toggleStar={this.props.toggleStar} editorApi={this.props.editorApi}\n              fileInfo={this.props.fileInfo}/>\n            <div className=\"topbar-btn-container\">\n              {(seafileCollabServer && this.props.collabUsers.length > 0) &&\n                <CollabUsersButton\n                  className=\"collab-users-dropdown\"\n                  users={this.props.collabUsers}\n                  id=\"usersButton\"\n                />\n              }\n              <ButtonGroup>\n                {saving ?\n                  <button type={'button'} className={'btn btn-icon btn-secondary btn-active'}>\n                    <i className={'fa fa-spin fa-spinner'}/>\n                  </button>\n                  :\n                  <ButtonItem id={'saveButton'} text={gettext('Save')} icon={'fa fa-save'} onMouseDown={this.props.onSaveEditorContent} disabled={!contentChanged} isActive={contentChanged} />\n                }\n              </ButtonGroup>\n              <MoreMenu\n                readOnly={this.props.readOnly}\n                openDialogs={this.props.openDialogs}\n                editorMode={this.props.editorMode}\n                onEdit={this.props.onEdit}\n                isSmallScreen={false}\n              />\n            </div>\n          </div>\n          <div className=\"sf-md-viewer-topbar-first-narrow d-flex justify-content-between\">\n            <FileInfo toggleStar={this.props.toggleStar} editorApi={this.props.editorApi}\n              fileInfo={this.props.fileInfo}/>\n            <div className=\"topbar-btn-container\">\n              <ButtonGroup>\n                {saving ?\n                  <button type={'button'} className={'btn btn-icon btn-secondary btn-active'}>\n                    <i className={'fa fa-spin fa-spinner'}/></button>\n                  :\n                  <ButtonItem\n                    id={'saveButton'}\n                    text={gettext('Save')}\n                    icon={'fa fa-save'}\n                    onMouseDown={this.props.onSaveEditorContent}\n                    disabled={!contentChanged}\n                    isActive={contentChanged}\n                  />\n                }\n              </ButtonGroup>\n              <MoreMenu\n                readOnly={this.props.readOnly}\n                openDialogs={this.props.openDialogs}\n                editorMode={this.props.editorMode}\n                onEdit={this.props.onEdit}\n                isSmallScreen={false}\n              />\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return null;\n  }\n}\n\nHeaderToolbar.propTypes = propTypes;\n\nexport default HeaderToolbar;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/main-panel.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/main-panel-topbar.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/code-mirror-loading/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/org-user.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-users-list.js",["4256","4257","4258","4259","4260","4261","4262","4263"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport UserItem from './org-user-item';\n\nconst propTypes = {\n  initOrgUsersData: PropTypes.func.isRequired,\n  toggleDelete: PropTypes.func.isRequired,\n  changeStatus: PropTypes.func.isRequired,\n  orgUsers: PropTypes.array.isRequired,\n  page: PropTypes.number.isRequired,\n  pageNext: PropTypes.bool.isRequired,\n  sortByQuotaUsage: PropTypes.func.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortBy: PropTypes.string.isRequired,\n};\n\nclass OrgUsersList extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({ isItemFreezed: isFreezed });\n  };\n\n  onChangePageNum = (e, num) => {\n    e.preventDefault();\n    let page = this.props.page;\n\n    if (num == 1) {\n      page = page + 1;\n    } else {\n      page = page - 1;\n    }\n\n    this.props.initOrgUsersData(page);\n  };\n\n  sortByQuotaUsage = (e) => {\n    e.preventDefault();\n    this.props.sortByQuotaUsage();\n  };\n\n  render() {\n    const { sortBy, sortOrder } = this.props;\n    let sortIcon;\n    if (sortBy == '') {\n      // initial sort icon\n      sortIcon = <span className=\"fas fa-sort\"></span>;\n    } else {\n      sortIcon = <span className={`fas ${sortOrder == 'asc' ? 'fa-caret-up' : 'fa-caret-down'}`}></span>;\n    }\n    let { orgUsers, page, pageNext } = this.props;\n    return (\n      <div className=\"cur-view-content\">\n        <table>\n          <thead>\n            <tr>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"15%\">{gettext('Status')}</th>\n              <th width=\"20%\">\n                <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortByQuotaUsage}>{gettext('Space Used')} {sortIcon}</a> / {gettext('Quota')}\n              </th>\n              <th width=\"25%\">{gettext('Created At')} / {gettext('Last Login')}</th>\n              <th width=\"10%\">{/*Operations*/}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {orgUsers.map((item, index) => {\n              return (\n                <UserItem\n                  key={index}\n                  user={item}\n                  currentTab=\"users\"\n                  isItemFreezed={this.state.isItemFreezed}\n                  toggleDelete={this.props.toggleDelete}\n                  changeStatus={this.props.changeStatus}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  toggleItemFreezed={this.toggleItemFreezed}\n                />\n              );})}\n          </tbody>\n        </table>\n        <div className=\"paginator\">\n          {page !=1 && <a href=\"#\" onClick={(e) => this.onChangePageNum(e, -1)}>{gettext('Previous')}</a>}\n          {(page != 1 && pageNext) && <span> | </span>}\n          {pageNext && <a href=\"#\" onClick={(e) => this.onChangePageNum(e, 1)}>{gettext('Next')}</a>}\n        </div>\n      </div>\n    );\n  }\n}\n\nOrgUsersList.propTypes = propTypes;\n\nexport default OrgUsersList;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/login/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/icon.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-admin-invite-user-dialog.js",["4264"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, Input, ModalHeader, ModalBody, ModalFooter, Label, Form, FormGroup } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  handleSubmit: PropTypes.func.isRequired,\n};\n\nclass OrgAdminInviteUserDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: '',\n      errMessage: '',\n      isAddingUser: false,\n    };\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateInputParams();\n    if (isValid) {\n      let { email } = this.state;\n      this.setState({isAddingUser: true});\n      this.props.handleSubmit(email.trim());\n    }\n  };\n\n  handleKeyPress = (e) => {\n    e.preventDefault();\n    if (e.key == 'Enter') {\n      this.handleSubmit(e);\n    }\n  };\n\n  inputEmail = (e) => {\n    let email = e.target.value.trim();\n    this.setState({email: email});\n  };\n\n  toggle = () => {\n    this.props.toggle();\n  };\n\n  validateInputParams() {\n    let errMessage;\n    let email = this.state.email.trim();\n    if (!email.length) {\n      errMessage = gettext('email is required');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    return true;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Invite users')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('You can enter multiple emails. An invitation link will be sent to each of them.')}</p>\n          <Form>\n            <FormGroup>\n              <Label for=\"emails\">{gettext('Emails')}</Label>\n              <Input\n                type=\"text\"\n                id=\"emails\"\n                placeholder={gettext('Emails, separated by \\',\\'')}\n                value={this.state.email || ''}\n                onChange={this.inputEmail}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Label className=\"err-message\">{this.state.errMessage}</Label>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" disabled={this.state.isAddingUser} onClick={this.handleSubmit} className={this.state.isAddingUser ? 'btn-loading' : ''}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nOrgAdminInviteUserDialog.propTypes = propTypes;\n\nexport default OrgAdminInviteUserDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sdoc/sdoc-editor/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-admin-invite-user-via-weixin-dialog.js",["4265"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../toast';\nimport copy from '../copy-to-clipboard';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  invitationLink: PropTypes.string.isRequired\n};\n\nclass OrgAdminInviteUserViaWeiXinDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  copyLink = () => {\n    copy(this.props.invitationLink);\n    this.props.toggle();\n    const message = gettext('Internal link has been copied to clipboard');\n    toaster.success(message, {\n      duration: 2\n    });\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggle}>{''}</ModalHeader>\n        <ModalBody>\n          <p>{''}</p>\n          <p>{this.props.invitationLink}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.copyLink}>{gettext('Copy')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nOrgAdminInviteUserViaWeiXinDialog.propTypes = propTypes;\n\nexport default OrgAdminInviteUserViaWeiXinDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-users-nav.js",["4266"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'all', urlPart: 'useradmin', text: gettext('All')},\n      {name: 'admins', urlPart: 'useradmin/admins', text: gettext('Admin')}\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}org/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-add-user-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/org-admin-user-nav.js",["4267","4268","4269"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../utils/constants';\n\nconst propTypes = {\n  email: PropTypes.string.isRequired,\n  currentItem: PropTypes.string.isRequired\n};\n\nclass OrgAdminUserNav extends React.Component {\n\n  render() {\n    const { email, currentItem } = this.props;\n    const urlBase = `${siteRoot}org/useradmin/info/${encodeURIComponent(email)}/`;\n    return (\n      <div className=\"cur-view-path org-admin-user-nav\">\n        <ul className=\"nav\">\n          <li className=\"nav-item\">\n            <Link to={urlBase} className={`nav-link${currentItem == 'profile' ? ' active' : ''}`}>{gettext('Profile')}</Link>\n          </li>\n          <li className=\"nav-item\">\n            <Link to={`${urlBase}repos/`} className={`nav-link${currentItem == 'owned-repos' ? ' active' : ''}`}>{gettext('Owned Libraries')}</Link>\n          </li>\n          <li className=\"nav-item\">\n            <Link to={`${urlBase}shared-repos/`} className={`nav-link${currentItem == 'shared-repos' ? ' active' : ''}`}>{gettext('Shared Libraries')}</Link>\n          </li>\n        </ul>\n      </div>\n    );\n  }\n}\n\nOrgAdminUserNav.propTypes = propTypes;\n\nexport default OrgAdminUserNav;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/set-org-user-name.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-add-admin-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/set-org-user-quota.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/set-org-user-contact-email.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-admin-list.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/org-admin-group-nav.js",["4270","4271","4272"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../utils/constants';\n\nconst propTypes = {\n  groupID: PropTypes.string,\n  currentItem: PropTypes.string.isRequired\n};\n\nclass OrgAdminGroupNav extends React.Component {\n\n  render() {\n    const { groupID, currentItem } = this.props;\n    const urlBase = `${siteRoot}org/groupadmin/${groupID}/`;\n    return (\n      <div className=\"cur-view-path org-admin-user-nav\">\n        <ul className=\"nav\">\n          <li className=\"nav-item\">\n            <Link to={urlBase} className={`nav-link${currentItem == 'info' ? ' active' : ''}`}>{gettext('Group Info')}</Link>\n          </li>\n          <li className=\"nav-item\">\n            <Link to={`${urlBase}repos/`} className={`nav-link${currentItem == 'repos' ? ' active' : ''}`}>{gettext('Libraries')}</Link>\n          </li>\n          <li className=\"nav-item\">\n            <Link to={`${urlBase}members/`} className={`nav-link${currentItem == 'members' ? ' active' : ''}`}>{gettext('Members')}</Link>\n          </li>\n        </ul>\n      </div>\n    );\n  }\n}\n\nOrgAdminGroupNav.propTypes = propTypes;\n\nexport default OrgAdminGroupNav;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/delete-repo-dialog.js",["4273"],[],"import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  isRepoDeleted: PropTypes.bool.isRequired,\n  toggle: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n};\n\nclass DeleteRepoDialog extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isRequestSended: false,\n      sharedToUserCount: 0,\n      sharedToGroupCount: 0,\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (!nextProps.isRepoDeleted) {\n      this.setState({isRequestSended: false});\n    }\n  }\n\n  componentDidMount() {\n    seafileAPI.getRepoFolderShareInfo(this.props.repo.repo_id).then((res) => {\n      this.setState({\n        sharedToUserCount: res.data['shared_user_emails'].length,\n        sharedToGroupCount: res.data['shared_group_ids'].length,\n      });\n    });\n  }\n\n  onDeleteRepo = () => {\n    this.setState({isRequestSended: true}, () => {\n      this.props.onDeleteRepo(this.props.repo);\n    });\n  };\n\n  render() {\n\n    const { isRequestSended } = this.state;\n    const repo = this.props.repo;\n    const repoName = '<span class=\"op-target\">' + Utils.HTMLescape(repo.repo_name || repo.name) + '</span>';\n    let message = gettext('Are you sure you want to delete %s ?');\n    message = message.replace('%s', repoName);\n\n    let alert_message = '';\n    if (this.state.sharedToUserCount > 0 || this.state.sharedToGroupCount > 0) {\n      alert_message = gettext('This library has been shared to {user_amount} user(s) and {group_amount} group(s).');\n      alert_message = alert_message.replace('{user_amount}', this.state.sharedToUserCount);\n      alert_message = alert_message.replace('{group_amount}', this.state.sharedToGroupCount);\n    }\n\n    const { toggle: toggleDialog } = this.props;\n\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Delete Library')}</ModalHeader>\n        <ModalBody>\n          <p dangerouslySetInnerHTML={{__html: message}}></p>\n          { alert_message != '' && <p className=\"error\" dangerouslySetInnerHTML={{__html: alert_message}}></p>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" disabled={isRequestSended} onClick={this.onDeleteRepo}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nDeleteRepoDialog.propTypes = propTypes;\n\nexport default DeleteRepoDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-add-department-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/org-group.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/op-menu.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/org-logs-perm-audit.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-set-group-quota-dialog.js",["4274","4275"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, InputGroupAddon, InputGroup } from 'reactstrap';\nimport { gettext, orgID } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  groupID: PropTypes.number.isRequired,\n  onDepartChanged: PropTypes.func.isRequired,\n};\n\nclass SetGroupQuotaDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      quota: '',\n      errMessage: '',\n    };\n  }\n\n  setGroupQuota = () => {\n    const myReg = /^[1-9]\\d*$/im;\n    let quota = this.state.quota;\n    if ((quota.length && myReg.test(quota)) || quota == -2) {\n      this.setState({ errMessage: '' });\n      let newQuota = this.state.quota == -2 ? this.state.quota : this.state.quota * 1000000;\n      seafileAPI.orgAdminSetGroupQuota(orgID, this.props.groupID, newQuota).then((res) => {\n        this.props.toggle();\n        this.props.onDepartChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      const err = gettext('Quota is invalid.');\n      this.setState({ errMessage: err });\n    }\n  };\n\n  handleChange = (e) => {\n    const quota = e.target.value.trim();\n    this.setState({ quota: quota });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.setGroupQuota();\n      e.preventDefault();\n    }\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Set Quota')}</ModalHeader>\n        <ModalBody>\n          <InputGroup>\n            <Input\n              onKeyDown={this.handleKeyDown}\n              value={this.state.quota}\n              onChange={this.handleChange}\n              autoFocus={true}\n            />\n            <InputGroupAddon addonType=\"append\">{'MB'}</InputGroupAddon>\n          </InputGroup>\n          <p className=\"tip\">\n            <br/><span>{gettext('An integer that is greater than 0 or equal to -2.')}</span><br/>\n            <span>{gettext('Tip: -2 means no limit.')}</span>\n          </p>\n          { this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p> }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.setGroupQuota}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSetGroupQuotaDialog.propTypes = propTypes;\n\nexport default SetGroupQuotaDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-delete-department-dialog.js",["4276"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext, orgID } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\n\nconst propTypes = {\n  groupName: PropTypes.string,\n  groupID: PropTypes.number.isRequired,\n  toggle: PropTypes.func.isRequired,\n  onDepartChanged: PropTypes.func.isRequired\n};\n\nclass DeleteDepartDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  deleteDepart = () => {\n    this.props.toggle();\n    seafileAPI.orgAdminDeleteDepartGroup(orgID, this.props.groupID).then((res) => {\n      this.props.onDepartChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    let subtitle = gettext('Are you sure you want to delete {placeholder} ?');\n    subtitle = subtitle.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.groupName) + '</span>');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Delete Department')}</ModalHeader>\n        <ModalBody>\n          <p dangerouslySetInnerHTML={{__html: subtitle}}></p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.deleteDepart}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nDeleteDepartDialog.propTypes = propTypes;\n\nexport default DeleteDepartDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-rename-department-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/org-logs-file-audit.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-logs-file-update-detail.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/org-logs-file-update.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/services/share-admin-link-enhanced.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/input-item.js",["4277","4278"],[],"import React, { Component, Fragment } from 'react';\nimport { Input, InputGroup, InputGroupAddon, Button, Row, Col, Label } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  value: PropTypes.string,\n  domainVerified: PropTypes.bool,\n  isCertificate: PropTypes.bool,\n  changeType: PropTypes.string.isRequired,\n  changeValue: PropTypes.func.isRequired,\n  displayName: PropTypes.string.isRequired,\n};\n\nclass OrgSamlConfigInput extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isBtnsShown: false,\n      value: this.props.value,\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    this.setState({value: nextProps.value,});\n  }\n\n  toggleBtns = () => {\n    this.setState({isBtnsShown: !this.state.isBtnsShown});\n  };\n\n  hideBtns = () => {\n    if (!this.state.isBtnsShown) {\n      return;\n    }\n    if (this.props.value != this.state.value) {\n      this.setState({value: this.props.value});\n    }\n    this.toggleBtns();\n  };\n\n  onInputChange = (e) => {\n    this.setState({ value: e.target.value });\n  };\n\n  onSubmit = () => {\n    const changeType = this.props.changeType;\n    const value = this.state.value.trim();\n    if (value != this.props.value) {\n      this.props.changeValue(changeType, value);\n    }\n    this.toggleBtns();\n  };\n\n  render() {\n    const { isBtnsShown, value } = this.state;\n    const { displayName } = this.props;\n    let inputType = this.props.isCertificate ? 'textarea' : 'text';\n\n    return (\n      <Fragment>\n        <Row className=\"my-4\">\n          <Col md=\"3\">\n            <Label className=\"web-setting-label\">{displayName}</Label>\n          </Col>\n          <Col md=\"5\">\n            <InputGroup>\n              <Input type={inputType} value={value} onChange={this.onInputChange} onFocus={this.toggleBtns} onBlur={this.hideBtns}/>\n              {this.props.domainVerified &&\n                <InputGroupAddon addonType=\"append\">\n                  <Button color=\"success\" className=\"border-0\">{gettext('Verified')}</Button>\n                </InputGroupAddon>\n              }\n            </InputGroup>\n            {this.props.isCertificate &&\n              <p className=\"small text-secondary mt-1\">\n                {gettext('Copy the IdP\\'s certificate and paste it here. The certificate format is as follows:')}\n                <br/>\n                -----BEGIN CERTIFICATE-----\n                <br/>\n                xxxxxxxxxxxxxxxxxxxx\n                <br/>\n                -----END CERTIFICATE-----\n              </p>\n            }\n          </Col>\n          <Col md=\"4\">\n            {isBtnsShown &&\n              <Fragment>\n                <Button className=\"sf2-icon-tick web-setting-icon-btn web-setting-icon-btn-submit\" onMouseDown={this.onSubmit} title={gettext('Submit')}></Button>\n                <Button className=\"ml-1 sf2-icon-x2 web-setting-icon-btn web-setting-icon-btn-cancel\" title={gettext('Cancel')}></Button>\n              </Fragment>\n            }\n          </Col>\n        </Row>\n      </Fragment>\n    );\n  }\n}\n\nOrgSamlConfigInput.propTypes = propTypes;\n\nexport default OrgSamlConfigInput;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/statistic/statistic-nav.js",["4279"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'fileStatistic', urlPart: 'statistics-admin/file', text: gettext('File')},\n      {name: 'storageStatistic', urlPart: 'statistics-admin/total-storage', text: gettext('Storage')},\n      {name: 'usersStatistic', urlPart: 'statistics-admin/active-users', text: gettext('Users')},\n      {name: 'trafficStatistic', urlPart: 'statistics-admin/traffic', text: gettext('Traffic')},\n      {name: 'reportsStatistic', urlPart: 'statistics-admin/reports', text: gettext('Reports')},\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}org/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-user-item.js",["4280","4281","4282","4283"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { gettext, siteRoot, orgID, username } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Selector from '../../components/single-selector';\nimport CommonOperationConfirmationDialog from '../../components/dialog/common-operation-confirmation-dialog';\n\nconst propTypes = {\n  user: PropTypes.object,\n  currentTab: PropTypes.string,\n  toggleRevokeAdmin: PropTypes.func,\n  isItemFreezed: PropTypes.bool.isRequired,\n  toggleDelete: PropTypes.func.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n  changeStatus: PropTypes.func.isRequired,\n};\n\nclass UserItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      showMenu: false,\n      isItemMenuShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        showMenu: true,\n        highlight: true,\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        showMenu: false,\n        highlight: false\n      });\n    }\n  };\n\n  toggleDelete = () => {\n    const email = this.props.user.email;\n    const username = this.props.user.name;\n    this.props.toggleDelete(email, username);\n  };\n\n  toggleResetPW = () => {\n    const { email, name } = this.props.user;\n    toaster.success(gettext('Resetting user\\'s password, please wait for a moment.'));\n    seafileAPI.orgAdminResetOrgUserPassword(orgID, email).then(res => {\n      let msg;\n      msg = gettext('Successfully reset password to %(passwd)s for user %(user)s.');\n      msg = msg.replace('%(passwd)s', res.data.new_password);\n      msg = msg.replace('%(user)s', name);\n      toaster.success(msg, {\n        duration: 15\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  toggleRevokeAdmin = () => {\n    const email = this.props.user.email;\n    this.props.toggleRevokeAdmin(email);\n  };\n\n  changeStatus = (statusOption) => {\n    const isActive = statusOption.value == 'active';\n    if (isActive) {\n      toaster.notify(gettext('It may take some time, please wait.'));\n    }\n    this.props.changeStatus(this.props.user.email, isActive);\n  };\n\n  setUserInactive = () => {\n    const isActive = false;\n    this.props.changeStatus(this.props.user.email, isActive);\n  };\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    this.toggleOperationMenu(e);\n  };\n\n  toggleOperationMenu = (e) => {\n    e.stopPropagation();\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow }, () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.setState({\n            highlight: false,\n            showMenu: false,\n          });\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  };\n\n  getQuotaTotal = (data) => {\n    switch (data) {\n      case -1: // failed to fetch quota\n        return gettext('Failed');\n      case -2:\n        return '--';\n      default: // data > 0\n        return Utils.formatSize({bytes: data});\n    }\n  };\n\n  translateStatus = (status) => {\n    switch (status) {\n      case 'active':\n        return gettext('Active');\n      case 'inactive':\n        return gettext('Inactive');\n    }\n  };\n\n  toggleConfirmInactiveDialog= () => {\n    this.setState({isConfirmInactiveDialogOpen: !this.state.isConfirmInactiveDialogOpen});\n  };\n\n  render() {\n    const { highlight, isConfirmInactiveDialogOpen } = this.state;\n    let { user, currentTab } = this.props;\n    let href = siteRoot + 'org/useradmin/info/' + encodeURIComponent(user.email) + '/';\n    let isOperationMenuShow = (user.email !== username)  && this.state.showMenu;\n\n    // for 'user status'\n    const curStatus = user.is_active ? 'active' : 'inactive';\n    this.statusOptions = ['active', 'inactive'].map(item => {\n      return {\n        value: item,\n        text: this.translateStatus(item),\n        isSelected: item == curStatus\n      };\n    });\n    const currentSelectedStatusOption = this.statusOptions.filter(item => item.isSelected)[0];\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(user.name) + '</span>';\n    const confirmSetUserInactiveMsg = gettext('Are you sure you want to set {user_placeholder} inactive?').replace('{user_placeholder}', itemName);\n\n    return (\n      <>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n          <td>\n            <a href={href}>{user.name}</a>\n          </td>\n          <td>\n            <Selector\n              isDropdownToggleShown={highlight}\n              currentSelectedOption={currentSelectedStatusOption}\n              options={this.statusOptions}\n              selectOption={this.changeStatus}\n              toggleItemFreezed={this.props.toggleItemFreezed}\n              operationBeforeSelect={user.is_active ? this.toggleConfirmInactiveDialog : undefined}\n            />\n          </td>\n          <td>{`${Utils.formatSize({bytes: user.quota_usage})} / ${this.getQuotaTotal(user.quota_total)}`}</td>\n          <td>\n            {user.ctime} /\n            <br />\n            {user.last_login ? user.last_login : '--'}\n          </td>\n          <td className=\"text-center cursor-pointer\">\n            {isOperationMenuShow && (\n              <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n                <DropdownToggle\n                  tag=\"a\"\n                  className=\"attr-action-icon fas fa-ellipsis-v\"\n                  title={gettext('More operations')}\n                  aria-label={gettext('More operations')}\n                  data-toggle=\"dropdown\"\n                  aria-expanded={this.state.isItemMenuShow}\n                  onClick={this.onDropdownToggleClick}\n                />\n                <DropdownMenu>\n                  <DropdownItem onClick={this.toggleDelete}>{gettext('Delete')}</DropdownItem>\n                  <DropdownItem onClick={this.toggleResetPW}>{gettext('ResetPwd')}</DropdownItem>\n                  {currentTab == 'admins' && <DropdownItem onClick={this.toggleRevokeAdmin}>{gettext('Revoke Admin')}</DropdownItem>}\n                </DropdownMenu>\n              </Dropdown>\n            )}\n          </td>\n        </tr>\n        {isConfirmInactiveDialogOpen &&\n        <CommonOperationConfirmationDialog\n          title={gettext('Set user inactive')}\n          message={confirmSetUserInactiveMsg}\n          executeOperation={this.setUserInactive}\n          confirmBtnText={gettext('Set')}\n          toggleDialog={this.toggleConfirmInactiveDialog}\n        />\n        }\n      </>\n    );\n  }\n}\n\nUserItem.propTypes = propTypes;\n\nexport default UserItem;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/section.js",["4284"],[],"import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  headingText: PropTypes.string.isRequired,\n  children: PropTypes.object.isRequired\n};\n\nclass Section extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { headingText, children} = this.props;\n    return (\n      <div className=\"mb-4\">\n        <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{headingText}</h4>\n        {children}\n      </div>\n    );\n  }\n}\n\nSection.propTypes = propTypes;\n\nexport default Section;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/statistic/statistic-chart.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/statistic/statistic-common-tool.js",["4285"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { gettext } from '../../../utils/constants';\nimport Picker from './picker';\n\nconst propTypes = {\n  getActiviesFiles: PropTypes.func.isRequired,\n  children: PropTypes.object,\n};\n\nclass StatisticCommonTool extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      statisticType: 'oneWeek',\n      startValue: null,\n      endValue: null,\n    };\n  }\n\n  componentDidMount() {\n    let today = moment().format('YYYY-MM-DD 00:00:00');\n    let endTime = today;\n    let startTime = moment().subtract(6,'d').format('YYYY-MM-DD 00:00:00');\n    let group_by = 'day';\n    this.props.getActiviesFiles(startTime, endTime, group_by);\n  }\n\n  changeActive = (statisticTypeName) => {\n    let { statisticType } = this.state;\n    if (statisticType === statisticTypeName) {\n      return;\n    }\n    let today = moment().format('YYYY-MM-DD 00:00:00');\n    let endTime = today;\n    let startTime;\n    switch(statisticTypeName) {\n      case 'oneWeek' :\n        startTime = moment().subtract(6,'d').format('YYYY-MM-DD 00:00:00');\n        break;\n      case 'oneMonth' :\n        startTime = moment().subtract(29,'d').format('YYYY-MM-DD 00:00:00');\n        break;\n      case 'oneYear' :\n        startTime = moment().subtract(364,'d').format('YYYY-MM-DD 00:00:00');\n        break;\n    }\n    this.setState({\n      statisticType: statisticTypeName,\n    });\n    let group_by = 'day';\n    this.props.getActiviesFiles(startTime, endTime, group_by);\n  };\n\n  disabledStartDate = (startValue) => {\n    if (!startValue) {\n      return false;\n    }\n    let today = moment().format();\n\n    const endValue = this.state.endValue;\n    if (!endValue) {\n      let startTime = moment(startValue).format();\n      return today < startTime;\n    }\n    return endValue.isBefore(startValue) || moment(startValue).format() > today;\n  };\n\n  disabledEndDate = (endValue) => {\n    if (!endValue) {\n      return false;\n    }\n    let today = moment().format();\n    const startValue = this.state.startValue;\n    if (!startValue) {\n      let endTime = moment(endValue).format();\n      return today < endTime;\n    }\n    return endValue.isBefore(startValue) || moment(endValue).format() > today;\n  };\n\n  onChange = (field, value) => {\n    this.setState({\n      [field]: value,\n    });\n  };\n\n  onSubmit = () => {\n    let { startValue, endValue } = this.state;\n    if(!startValue || !endValue) {\n      return;\n    }\n    this.setState({\n      statisticType: 'itemButton',\n    });\n    let startTime = moment(startValue).format('YYYY-MM-DD 00:00:00');\n    let endTime = moment(endValue).format('YYYY-MM-DD 00:00:00');\n    let group_by = 'day';\n    this.props.getActiviesFiles(startTime, endTime, group_by);\n  };\n\n  render() {\n    let { statisticType, endValue, startValue } = this.state;\n    return(\n      <Fragment>\n        {this.props.children}\n        <div className=\"system-statistic-time-range\">\n          <div className=\"sys-stat-tool\">\n            <div className={`system-statistic-item border-right-0 rounded-left ${statisticType === 'oneWeek' ? 'item-active' : ''}`} onClick={this.changeActive.bind(this, 'oneWeek')}>{gettext('7 Days')}</div>\n            <div className={`system-statistic-item border-right-0 ${statisticType === 'oneMonth' ? 'item-active' : ''}`}  onClick={this.changeActive.bind(this, 'oneMonth')}>{gettext('30 Days')}</div>\n            <div className={`system-statistic-item rounded-right ${statisticType === 'oneYear' ? 'item-active' : ''}`}  onClick={this.changeActive.bind(this, 'oneYear')}>{gettext('1 Year')}</div>\n          </div>\n          <div className=\"system-statistic-input-container\">\n            <Picker\n              disabledDate={this.disabledStartDate}\n              value={startValue}\n              onChange={this.onChange.bind(this, 'startValue')}\n            />\n            <span className=\"system-statistic-connect\">-</span>\n            <Picker\n              disabledDate={this.disabledEndDate}\n              value={endValue}\n              onChange={this.onChange.bind(this, 'endValue')}\n            />\n            <Button className=\"operation-item system-statistic-button\" onClick={this.onSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nStatisticCommonTool.propTypes = propTypes;\n\nexport default StatisticCommonTool;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/single-selector.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-add-repo-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/devices/devices-nav.js",["4286"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'desktop', urlPart:'desktop-devices', text: gettext('Desktop')},\n      {name: 'mobile', urlPart:'mobile-devices', text: gettext('Mobile')},\n      {name: 'errors', urlPart:'devices-errors', text: gettext('Errors')}\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}org/deviceadmin/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-add-member-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-delete-member-dialog.js",["4287"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext, orgID } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  member: PropTypes.object.isRequired,\n  groupID: PropTypes.string,\n  toggle: PropTypes.func.isRequired,\n  onMemberChanged: PropTypes.func.isRequired\n};\n\nclass DeleteMemberDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  deleteMember = () => {\n    const userEmail = this.props.member.email;\n    seafileAPI.orgAdminDeleteGroupMember(orgID, this.props.groupID, userEmail).then((res) => {\n      if (res.data.success) {\n        this.props.onMemberChanged();\n        this.props.toggle();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    let subtitle = gettext('Are you sure you want to delete {placeholder} ?');\n    subtitle = subtitle.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.member.name) + '</span>');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Delete Member')}</ModalHeader>\n        <ModalBody>\n          <div dangerouslySetInnerHTML={{__html: subtitle}}></div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.deleteMember}>{gettext('Delete')}</Button>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nDeleteMemberDialog.propTypes = propTypes;\n\nexport default DeleteMemberDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/statistic/statistic-traffic-users.js",["4288","4289"],[],"import React, { Fragment } from 'react';\nimport { Input } from 'reactstrap';\nimport TrafficTable from './traffic-table';\nimport TrafficTableBody from './traffic-table-body';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport Paginator from '../../../components/paginator';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport { gettext, orgID } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nclass UsersTraffic extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      userTrafficList: [],\n      hasNextPage: false,\n      perPage: 25,\n      currentPage: 1,\n      month: moment().format('YYYYMM'),\n      isLoading: false,\n      errorMessage: '',\n      sortBy: 'link_file_download',\n      sortOrder: 'desc'\n    };\n    this.initPage = 1;\n    this.initMonth = moment().format('YYYYMM');\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getTrafficList(this.initMonth, this.state.currentPage);\n    });\n  }\n\n  getPreviousPage = () => {\n    this.getTrafficList(this.state.month, this.state.currentPage - 1);\n  };\n\n  getNextPage = () => {\n    this.getTrafficList(this.state.month, this.state.currentPage + 1);\n  };\n\n  handleChange = (e) => {\n    let month = e.target.value;\n    this.setState({\n      month: month\n    });\n  };\n\n  handleKeyPress = (e) => {\n    let { month } = this.state;\n    if (e.key === 'Enter') {\n      let pattern = /^([012]\\d{3})(0[1-9]|1[012])$/;\n      if (!pattern.test(month)) {\n        let errorMessage = gettext('Invalid month, should be yyyymm.');\n        this.setState({\n          errorMessage: errorMessage\n        });\n        return;\n      }\n      this.getTrafficList(month, this.initPage);\n      e.target.blur();\n      e.preventDefault();\n    }\n  };\n\n  getTrafficList = (month, page) => {\n    const { perPage, sortBy, sortOrder } = this.state;\n    const orderBy = sortOrder == 'asc' ? sortBy : `${sortBy}_${sortOrder}`;\n    this.setState({\n      isLoading: true,\n      errorMessage: ''\n    });\n    seafileAPI.orgAdminListUserTraffic(orgID, month, page, perPage, orderBy).then(res => {\n      let userTrafficList = res.data.user_monthly_traffic_list.slice(0);\n      this.setState({\n        month: month,\n        currentPage: page,\n        userTrafficList: userTrafficList,\n        hasNextPage: res.data.has_next_page,\n        isLoading: false\n      });\n    }).catch(err => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  };\n\n  sortItems = (sortBy) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: this.state.sortOrder == 'asc' ? 'desc' : 'asc'\n    }, () => {\n      const { month, currentPage } = this.state;\n      this.getTrafficList(month, currentPage);\n    });\n  };\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getTrafficList(this.initMonth, this.initPage));\n  };\n\n  render() {\n    const {\n      isLoading, errorMessage, userTrafficList,\n      currentPage, hasNextPage, perPage,\n      sortBy, sortOrder\n    } = this.state;\n    return (\n      <Fragment>\n        <div className=\"d-flex align-items-center mt-4\">\n          <span className=\"statistic-reports-tip\">{gettext('Month:')}</span>\n          <Input\n            className=\"statistic-reports-input\"\n            defaultValue={moment().format('YYYYMM')}\n            onChange={this.handleChange}\n            onKeyPress={this.handleKeyPress}\n          />\n          {errorMessage && <div className=\"error\">{errorMessage}</div>}\n        </div>\n        {isLoading && <Loading />}\n        {!isLoading &&\n          <TrafficTable type={'user'} sortItems={this.sortItems} sortBy={sortBy} sortOrder={sortOrder}>\n            {userTrafficList.length > 0 && userTrafficList.map((item, index) => {\n              return(\n                <TrafficTableBody\n                  key={index}\n                  userTrafficItem={item}\n                  type={'user'}\n                />\n              );\n            })}\n          </TrafficTable>\n        }\n        <Paginator\n          gotoPreviousPage={this.getPreviousPage}\n          gotoNextPage={this.getNextPage}\n          currentPage={currentPage}\n          hasNextPage={hasNextPage}\n          curPerPage={perPage}\n          resetPerPage={this.resetPerPage}\n        />\n      </Fragment>\n    );\n  }\n}\n\nexport default UsersTraffic;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/devices/devices-by-platform.js",["4290","4291","4292"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { orgID, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport SysAdminUnlinkDevice from '../../../components/dialog/sysadmin-dialog/sysadmin-unlink-device-dialog';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPageDevicesList = () => {\n    this.props.getDevicesListByPage(this.props.pageInfo.current_page - 1);\n  };\n\n  getNextPageDevicesList = () => {\n    this.props.getDevicesListByPage(this.props.pageInfo.current_page + 1);\n  };\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No connected devices')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"19%\">{gettext('User')}</th>\n                <th width=\"19%\">{gettext('Platform')}{' / '}{gettext('Version')}</th>\n                <th width=\"19%\">{gettext('Device Name')}</th>\n                <th width=\"19%\">{gettext('IP')}</th>\n                <th width=\"19%\">{gettext('Last Access')}</th>\n                <th width=\"5%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item key={index} item={item} />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPageDevicesList}\n            gotoNextPage={this.getNextPageDevicesList}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  getDeviceErrorsListByPage: PropTypes.func.isRequired,\n  resetPerPage: PropTypes.func.isRequired,\n  curPerPage: PropTypes.number.isRequired,\n  pageInfo: PropTypes.object,\n  getDevicesListByPage: PropTypes.func.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      unlinked: false,\n      isOpIconShown: false,\n      isUnlinkDeviceDialogOpen: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  };\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  };\n\n  handleUnlink = (e) => {\n    e.preventDefault();\n    if (this.props.item.is_desktop_client) {\n      this.toggleUnlinkDeviceDialog();\n    } else {\n      this.unlinkDevice(true);\n    }\n  };\n\n  toggleUnlinkDeviceDialog = () => {\n    this.setState({isUnlinkDeviceDialogOpen: !this.state.isUnlinkDeviceDialogOpen});\n  };\n\n  unlinkDevice = (deleteFiles) => {\n    const { platform, device_id, user } = this.props.item;\n    seafileAPI.orgAdminUnlinkDevice(orgID, platform, device_id, user, deleteFiles).then((res) => {\n      this.setState({unlinked: true});\n      let message = gettext('Successfully unlinked the device.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const item = this.props.item;\n    const { unlinked, isUnlinkDeviceDialogOpen, isOpIconShown } = this.state;\n\n    if (unlinked) {\n      return null;\n    }\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td>{item.user_name}</td>\n          <td>{item.platform}{' / '}{item.client_version}</td>\n          <td>{item.device_name}</td>\n          <td>{item.last_login_ip}</td>\n          <td>\n            <span title={moment(item.last_accessed).format('llll')}>{moment(item.last_accessed).fromNow()}</span>\n          </td>\n          <td>\n            <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Unlink')} onClick={this.handleUnlink}></a>\n          </td>\n        </tr>\n        {isUnlinkDeviceDialogOpen &&\n          <SysAdminUnlinkDevice\n            unlinkDevice={this.unlinkDevice}\n            toggleDialog={this.toggleUnlinkDeviceDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n};\n\nclass DevicesByPlatform extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      devicesData: [],\n      pageInfo: {},\n      perPage: 25\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage = 1, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getDevicesListByPage(this.state.currentPage);\n    });\n  }\n\n  getDevicesListByPage = (page) => {\n    let platform = this.props.devicesPlatform;\n    let per_page = this.state.perPage;\n    seafileAPI.orgAdminListDevices(orgID, platform, page, per_page).then((res) => {\n      this.setState({\n        devicesData: res.data.devices,\n        pageInfo: res.data.page_info,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getDevicesListByPage(1);\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"cur-view-content\">\n        <Content\n          loading={this.state.loading}\n          errorMsg={this.state.errorMsg}\n          items={this.state.devicesData}\n          getDevicesListByPage={this.getDevicesListByPage}\n          curPerPage={this.state.perPage}\n          resetPerPage={this.resetPerPage}\n          pageInfo={this.state.pageInfo}\n        />\n      </div>\n    );\n  }\n}\n\nDevicesByPlatform.propTypes = {\n  devicesPlatform: PropTypes.string.isRequired,\n};\n\nexport default DevicesByPlatform;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-delete-repo-dialog.js",["4293"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext, orgID } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass DeleteRepoDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  deleteRepo = () => {\n    seafileAPI.orgAdminDeleteDepartmentRepo(orgID, this.props.groupID, this.props.repo.repo_id).then((res) => {\n      if (res.data.success) {\n        this.props.onRepoChanged();\n        this.props.toggle();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    let subtitle = gettext('Are you sure you want to delete {placeholder} ?');\n    subtitle = subtitle.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.repo.name) + '</span>');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Delete Library')}</ModalHeader>\n        <ModalBody>\n          <div dangerouslySetInnerHTML={{__html: subtitle}}></div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.deleteRepo}>{gettext('Delete')}</Button>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  toggle: PropTypes.func.isRequired,\n  groupID: PropTypes.string,\n  onRepoChanged: PropTypes.func.isRequired\n};\n\nDeleteRepoDialog.propTypes = propTypes;\n\nexport default DeleteRepoDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/text-translation.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/main-panel-topbar.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/permission-denied-tip.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/empty-tip.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/user-link.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/compare-two-string.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/libraries/org-repo-nav.js",["4294"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'all', urlPart: 'repoadmin', text: gettext('All')},\n      {name: 'trash', urlPart: 'repoadmin-trash', text: gettext('Trash')}\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}org/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/statistic/statistic-chart.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/statistic/statistic-common-tool.js",["4295"],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/statistic/statistic-nav.js",["4296"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'fileStatistic', urlPart: 'statistics/file', text: gettext('File')},\n      {name: 'storageStatistic', urlPart: 'statistics/storage', text: gettext('Storage')},\n      {name: 'usersStatistic', urlPart: 'statistics/user', text: gettext('Users')},\n      {name: 'trafficStatistic', urlPart: 'statistics/traffic', text: gettext('Traffic')},\n      {name: 'reportsStatistic', urlPart: 'statistics/reports', text: gettext('Reports')},\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/web-settings/section.js",["4297"],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/web-settings/file-item.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/devices/devices-nav.js",["4298"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext, isPro } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'desktop', urlPart:'desktop-devices', text: gettext('Desktop')},\n      {name: 'mobile', urlPart:'mobile-devices', text: gettext('Mobile')}\n    ];\n    if (isPro) {\n      this.navItems.push({name: 'errors', urlPart:'device-errors', text: gettext('Errors')});\n    }\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/common-operation-confirmation-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/web-settings/input-item.js",["4299","4300","4301","4302"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Input, Button } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport SettingItemBase from './setting-item-base';\n\nconst propTypes = {\n  inputType: PropTypes.string,\n  saveSetting: PropTypes.func.isRequired,\n  keyText: PropTypes.string.isRequired,\n  value: PropTypes.oneOfType([PropTypes.string,PropTypes.number]),\n  helpTip: PropTypes.string.isRequired,\n  displayName: PropTypes.string.isRequired,\n  disabled: PropTypes.bool.isRequired,\n};\n\nclass WebSettingInput extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isBtnsShown: false,\n      value: this.props.value\n    };\n  }\n\n  toggleBtns = () => {\n    this.setState({isBtnsShown: !this.state.isBtnsShown});\n  };\n\n  hideBtns = (e) => {\n    if (!this.state.isBtnsShown) {\n      return;\n    }\n    if (this.props.value != this.state.value) {\n      this.setState({value: this.props.value});\n    }\n    this.toggleBtns();\n  };\n\n  onInputChange = (e) => {\n    this.setState({ value: e.target.value });\n  };\n\n  onSubmit = (e) => {\n    const value = this.state.value.trim();\n    if (value != this.props.value) {\n      this.props.saveSetting(this.props.keyText, value);\n    }\n    this.toggleBtns();\n  };\n\n  render() {\n    const { isBtnsShown, value } = this.state;\n    const { helpTip, displayName, inputType, disabled } = this.props;\n    return (\n      <SettingItemBase\n        displayName={displayName}\n        helpTip={helpTip}\n        mainContent={\n          disabled ?\n            <Input type={inputType || 'text'} className={inputType == 'textarea' ? 'web-setting-textarea' : ''} value={value} disabled /> :\n            <Input type={inputType || 'text'} className={inputType == 'textarea' ? 'web-setting-textarea' : ''} onChange={this.onInputChange} onFocus={this.toggleBtns} onBlur={this.hideBtns} value={value} />\n        }\n        extraContent={\n          isBtnsShown ?\n            <Fragment>\n              <Button className=\"sf2-icon-tick web-setting-icon-btn web-setting-icon-btn-submit\" onMouseDown={this.onSubmit} title={gettext('Submit')}></Button>\n              <Button className=\"ml-1 sf2-icon-x2 web-setting-icon-btn web-setting-icon-btn-cancel\" title={gettext('Cancel')}></Button>\n            </Fragment> : null\n        }\n      />\n    );\n  }\n}\n\nWebSettingInput.propTypes = propTypes;\n\nexport default WebSettingInput;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/devices/devices-by-platform.js",["4303","4304","4305"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport SysAdminUnlinkDevice from '../../../components/dialog/sysadmin-dialog/sysadmin-unlink-device-dialog';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPageDevicesList = () => {\n    this.props.getDevicesListByPage(this.props.pageInfo.current_page - 1);\n  };\n\n  getNextPageDevicesList = () => {\n    this.props.getDevicesListByPage(this.props.pageInfo.current_page + 1);\n  };\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No connected devices')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"19%\">{gettext('User')}</th>\n                <th width=\"19%\">{gettext('Platform')}{' / '}{gettext('Version')}</th>\n                <th width=\"19%\">{gettext('Device Name')}</th>\n                <th width=\"19%\">{gettext('IP')}</th>\n                <th width=\"19%\">{gettext('Last Access')}</th>\n                <th width=\"5%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item key={index} item={item} />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPageDevicesList}\n            gotoNextPage={this.getNextPageDevicesList}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  getLogsByPage: PropTypes.func,\n  resetPerPage: PropTypes.func,\n  currentPage: PropTypes.number,\n  perPage: PropTypes.number,\n  pageInfo: PropTypes.object,\n  hasNextPage: PropTypes.bool,\n  getDevicesListByPage: PropTypes.func.isRequired,\n  curPerPage: PropTypes.number,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      unlinked: false,\n      isOpIconShown: false,\n      isUnlinkDeviceDialogOpen: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  };\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  };\n\n  handleUnlink = (e) => {\n    e.preventDefault();\n    if (this.props.item.is_desktop_client) {\n      this.toggleUnlinkDeviceDialog();\n    } else {\n      this.unlinkDevice(true);\n    }\n  };\n\n  toggleUnlinkDeviceDialog = () => {\n    this.setState({isUnlinkDeviceDialogOpen: !this.state.isUnlinkDeviceDialogOpen});\n  };\n\n  unlinkDevice = (deleteFiles) => {\n    const { platform, device_id, user } = this.props.item;\n    seafileAPI.sysAdminUnlinkDevice(platform, device_id, user, deleteFiles).then((res) => {\n      this.setState({unlinked: true});\n      let message = gettext('Successfully unlinked the device.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const item = this.props.item;\n    const { unlinked, isUnlinkDeviceDialogOpen, isOpIconShown } = this.state;\n\n    if (unlinked) {\n      return null;\n    }\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td>{item.user_name}</td>\n          <td>{item.platform}{' / '}{item.client_version}</td>\n          <td>{item.device_name}</td>\n          <td>{item.last_login_ip}</td>\n          <td>\n            <span title={moment(item.last_accessed).format('llll')}>{moment(item.last_accessed).fromNow()}</span>\n          </td>\n          <td>\n            <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Unlink')} onClick={this.handleUnlink}></a>\n          </td>\n        </tr>\n        {isUnlinkDeviceDialogOpen &&\n          <SysAdminUnlinkDevice\n            unlinkDevice={this.unlinkDevice}\n            toggleDialog={this.toggleUnlinkDeviceDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n};\n\nclass DevicesByPlatform extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      devicesData: [],\n      pageInfo: {},\n      perPage: 25\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage = 1, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getDevicesListByPage(this.state.currentPage);\n    });\n  }\n\n  getDevicesListByPage = (page) => {\n    let platform = this.props.devicesPlatform;\n    let per_page = this.state.perPage;\n    seafileAPI.sysAdminListDevices(platform, page, per_page).then((res) => {\n      this.setState({\n        devicesData: res.data.devices,\n        pageInfo: res.data.page_info,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getDevicesListByPage(1);\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"cur-view-content\">\n        <Content\n          loading={this.state.loading}\n          errorMsg={this.state.errorMsg}\n          items={this.state.devicesData}\n          getDevicesListByPage={this.getDevicesListByPage}\n          curPerPage={this.state.perPage}\n          resetPerPage={this.resetPerPage}\n          pageInfo={this.state.pageInfo}\n        />\n      </div>\n    );\n  }\n}\n\nDevicesByPlatform.propTypes = {\n  devicesPlatform: PropTypes.string.isRequired,\n};\n\nexport default DevicesByPlatform;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/org-admin-repo.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/statistic/statistic-traffic-users.js",["4306","4307"],[],"import React, { Fragment } from 'react';\nimport { Input } from 'reactstrap';\nimport TrafficTable from './traffic-table';\nimport TrafficTableBody from './traffic-table-body';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport Paginator from '../../../components/paginator';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nclass UsersTraffic extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      userTrafficList: [],\n      hasNextPage: false,\n      perPage: 25,\n      currentPage: 1,\n      month: moment().format('YYYYMM'),\n      isLoading: false,\n      errorMessage: '',\n      sortBy: 'link_file_download',\n      sortOrder: 'desc'\n    };\n    this.initPage = 1;\n    this.initMonth = moment().format('YYYYMM');\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getTrafficList(this.initMonth, this.state.currentPage);\n    });\n  }\n\n  getPreviousPage = () => {\n    this.getTrafficList(this.state.month, this.state.currentPage - 1);\n  };\n\n  getNextPage = () => {\n    this.getTrafficList(this.state.month, this.state.currentPage + 1);\n  };\n\n  handleChange = (e) => {\n    let month = e.target.value;\n    this.setState({\n      month: month\n    });\n  };\n\n  handleKeyPress = (e) => {\n    let { month } = this.state;\n    if (e.key === 'Enter') {\n      let pattern = /^([012]\\d{3})(0[1-9]|1[012])$/;\n      if (!pattern.test(month)) {\n        let errorMessage = gettext('Invalid month, should be yyyymm.');\n        this.setState({\n          errorMessage: errorMessage\n        });\n        return;\n      }\n      this.getTrafficList(month, this.initPage);\n      e.target.blur();\n      e.preventDefault();\n    }\n  };\n\n  getTrafficList = (month, page) => {\n    const { perPage, sortBy, sortOrder } = this.state;\n    const orderBy = sortOrder == 'asc' ? sortBy : `${sortBy}_${sortOrder}`;\n    this.setState({\n      isLoading: true,\n      errorMessage: ''\n    });\n    seafileAPI.sysAdminListUserTraffic(month, page, perPage, orderBy).then(res => {\n      let userTrafficList = res.data.user_monthly_traffic_list.slice(0);\n      this.setState({\n        month: month,\n        currentPage: page,\n        userTrafficList: userTrafficList,\n        hasNextPage: res.data.has_next_page,\n        isLoading: false\n      });\n    }).catch(err => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  };\n\n  sortItems = (sortBy) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: this.state.sortOrder == 'asc' ? 'desc' : 'asc'\n    }, () => {\n      const { month, currentPage } = this.state;\n      this.getTrafficList(month, currentPage);\n    });\n  };\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getTrafficList(this.initMonth, this.initPage));\n  };\n\n  render() {\n    const {\n      isLoading, errorMessage, userTrafficList,\n      currentPage, hasNextPage, perPage,\n      sortBy, sortOrder\n    } = this.state;\n    return (\n      <Fragment>\n        <div className=\"d-flex align-items-center mt-4\">\n          <span className=\"statistic-reports-tip\">{gettext('Month:')}</span>\n          <Input\n            className=\"statistic-reports-input\"\n            defaultValue={moment().format('YYYYMM')}\n            onChange={this.handleChange}\n            onKeyPress={this.handleKeyPress}\n          />\n          {errorMessage && <div className=\"error\">{errorMessage}</div>}\n        </div>\n        {isLoading && <Loading />}\n        {!isLoading &&\n          <TrafficTable type={'user'} sortItems={this.sortItems} sortBy={sortBy} sortOrder={sortOrder}>\n            {userTrafficList.length > 0 && userTrafficList.map((item, index) => {\n              return(\n                <TrafficTableBody\n                  key={index}\n                  userTrafficItem={item}\n                  type={'user'}\n                />\n              );\n            })}\n          </TrafficTable>\n        }\n        <Paginator\n          gotoPreviousPage={this.getPreviousPage}\n          gotoNextPage={this.getNextPage}\n          currentPage={currentPage}\n          hasNextPage={hasNextPage}\n          curPerPage={perPage}\n          resetPerPage={this.resetPerPage}\n        />\n      </Fragment>\n    );\n  }\n}\n\nexport default UsersTraffic;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/transfer-dialog.js",["4308"],[],"import React, {Fragment} from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Button,\n  Modal,\n  ModalHeader,\n  ModalBody,\n  ModalFooter,\n  Nav,\n  NavItem,\n  NavLink,\n  TabContent,\n  TabPane\n} from 'reactstrap';\nimport makeAnimated from 'react-select/animated';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport {gettext, isPro, orgID} from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport UserSelect from '../user-select';\nimport { SeahubSelect } from '../common/select';\nimport '../../css/transfer-dialog.css';\n\nconst propTypes = {\n  itemName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  submit: PropTypes.func.isRequired,\n  canTransferToDept: PropTypes.bool,\n  isOrgAdmin: PropTypes.bool,\n  isSysAdmin: PropTypes.bool,\n\n};\n\nclass TransferDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errorMsg: [],\n      transferToUser: true,\n      transferToGroup: false,\n      activeTab: 'transUser'\n    };\n    this.options = [];\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({ selectedOption: option });\n  };\n\n  submit = () => {\n    let user = this.state.selectedOption;\n    this.props.submit(user);\n\n  };\n\n  componentDidMount() {\n    if (this.props.isOrgAdmin) {\n      seafileAPI.orgAdminListDepartments(orgID).then((res) => {\n        for (let i = 0; i < res.data.length; i++) {\n          let obj = {};\n          obj.value = res.data[i].name;\n          obj.email = res.data[i].email;\n          obj.label = res.data[i].name;\n          this.options.push(obj);\n        }\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n    else if (this.props.isSysAdmin) {\n      seafileAPI.sysAdminListDepartments().then((res) => {\n        for (let i = 0; i < res.data.length; i++) {\n          let obj = {};\n          obj.value = res.data[i].name;\n          obj.email = res.data[i].email;\n          obj.label = res.data[i].name;\n          this.options.push(obj);\n        }\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n    else{\n      seafileAPI.listDepartments().then((res) => {\n        for (let i = 0; i < res.data.length; i++) {\n          let obj = {};\n          obj.value = res.data[i].name;\n          obj.email = res.data[i].email;\n          obj.label = res.data[i].name;\n          this.options.push(obj);\n        }\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  onClick = () => {\n    this.setState({\n      transferToUser: !this.state.transferToUser,\n\n    });\n  };\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({ activeTab: tab });\n    }\n  };\n\n  renderTransContent = () => {\n    let activeTab = this.state.activeTab;\n    let canTransferToDept = true;\n    if (this.props.canTransferToDept != undefined) {\n      canTransferToDept = this.props.canTransferToDept;\n    }\n    return (\n      <Fragment>\n        <div className=\"transfer-dialog-side\">\n          <Nav pills>\n            <NavItem role=\"tab\" aria-selected={activeTab === 'transUser'} aria-controls=\"transfer-user-panel\">\n              <NavLink className={activeTab === 'transUser' ? 'active' : ''} onClick={(this.toggle.bind(this, 'transUser'))} tabIndex=\"0\" onKeyDown={this.onTabKeyDown}>\n                {gettext('Transfer to user')}\n              </NavLink>\n            </NavItem>\n            {isPro &&\n            <NavItem role=\"tab\" aria-selected={activeTab === 'transDepart'} aria-controls=\"transfer-depart-panel\">\n              <NavLink className={activeTab === 'transDepart' ? 'active' : ''} onClick={this.toggle.bind(this, 'transDepart')} tabIndex=\"0\" onKeyDown={this.onTabKeyDown}>\n                {gettext('Transfer to department')}\n              </NavLink>\n            </NavItem>}\n          </Nav>\n        </div>\n        <div className=\"transfer-dialog-main\">\n          <TabContent activeTab={this.state.activeTab}>\n            <Fragment>\n              <TabPane tabId=\"transUser\" role=\"tabpanel\" id=\"transfer-user-panel\">\n                <UserSelect\n                  ref=\"userSelect\"\n                  isMulti={false}\n                  className=\"reviewer-select\"\n                  placeholder={gettext('Select a user')}\n                  onSelectChange={this.handleSelectChange}\n                />\n              </TabPane>\n              {isPro && canTransferToDept &&\n              <TabPane tabId=\"transDepart\" role=\"tabpanel\" id=\"transfer-depart-panel\">\n                <SeahubSelect\n                  isClearable\n                  maxMenuHeight={200}\n                  hideSelectedOptions={true}\n                  components={makeAnimated()}\n                  placeholder={gettext('Select a department')}\n                  options={this.options}\n                  onChange={this.handleSelectChange}\n                  value={this.state.selectedOption}\n                />\n              </TabPane>}\n            </Fragment>\n          </TabContent>\n        </div>\n      </Fragment>\n    );\n  };\n  render() {\n\n\n    const { itemName: repoName } = this.props;\n    let title = gettext('Transfer Library {library_name}');\n    title = title.replace('{library_name}', '<span class=\"op-target text-truncate mx-1\">' + Utils.HTMLescape(repoName) + '</span>');\n\n\n    return (\n      <Modal isOpen={true} style={{maxWidth: '720px'}} toggle={this.props.toggleDialog} className=\"transfer-dialog\">\n        <ModalHeader toggle={this.props.toggleDialog}>\n          <span dangerouslySetInnerHTML={{ __html: title }} className=\"d-flex mw-100\"></span>\n        </ModalHeader>\n        <ModalBody className=\"transfer-dialog-content\" role=\"tablist\">\n          {this.renderTransContent()}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nTransferDialog.propTypes = propTypes;\n\nexport default TransferDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/users/users-nav.js",["4309"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext, haveLDAP, isDefaultAdmin } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'database', urlPart: 'users', text: gettext('Database')}\n    ];\n    if (haveLDAP) {\n      this.navItems.push(\n        {name: 'ldap', urlPart: 'users/ldap', text: gettext('LDAP')},\n        {name: 'ldap-imported', urlPart: 'users/ldap-imported', text: gettext('LDAP(imported)')}\n      );\n    }\n    if (isDefaultAdmin) {\n      this.navItems.push(\n        {name: 'admin', urlPart: 'users/admins', text: gettext('Admin')}\n      );\n    }\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/statistic/statistic-traffic-orgs.js",["4310","4311"],[],"import React, { Fragment } from 'react';\nimport { Input } from 'reactstrap';\nimport moment from 'moment';\nimport { gettext } from '../../../utils/constants';\nimport TrafficTable from './traffic-table';\nimport TrafficTableBody from './traffic-table-body';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport Paginator from '../../../components/paginator';\nimport Loading from '../../../components/loading';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nclass OrgsTraffic extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      orgTrafficList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      month: moment().format('YYYYMM'),\n      isLoading: false,\n      errorMessage: '',\n      sortBy: 'link_file_download',\n      sortOrder: 'desc'\n    };\n    this.initPage = 1;\n    this.initMonth = moment().format('YYYYMM');\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getTrafficList(this.initMonth, this.state.currentPage);\n    });\n  }\n\n  getPreviousPage = () => {\n    this.getTrafficList(this.state.month, this.state.currentPage - 1);\n  };\n\n  getNextPage = () => {\n    this.getTrafficList(this.state.month, this.state.currentPage + 1);\n  };\n\n  handleChange = (e) => {\n    let month = e.target.value;\n    this.setState({\n      month: month\n    });\n  };\n\n  handleKeyPress = (e) => {\n    let { month } = this.state;\n    if (e.key === 'Enter') {\n      let pattern = /^([012]\\d{3})(0[1-9]|1[012])$/;\n      if (!pattern.test(month)) {\n        let errorMessage = gettext('Invalid month, should be yyyymm.');\n        this.setState({\n          errorMessage: errorMessage\n        });\n        return;\n      }\n      this.getTrafficList(month, this.initPage);\n      e.target.blur();\n      e.preventDefault();\n    }\n  };\n\n  getTrafficList = (month, page) => {\n    const { perPage, sortBy, sortOrder } = this.state;\n    const orderBy = sortOrder == 'asc' ? sortBy : `${sortBy}_${sortOrder}`;\n    this.setState({isLoading: true, errorMessage: ''});\n    seafileAPI.sysAdminListOrgTraffic(month, page, perPage, orderBy).then(res => {\n      let orgTrafficList = res.data.org_monthly_traffic_list.slice(0);\n      this.setState({\n        month: month,\n        currentPage: page,\n        orgTrafficList: orgTrafficList,\n        hasNextPage: res.data.has_next_page,\n        isLoading: false\n      });\n    }).catch(err => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  };\n\n  sortItems = (sortBy) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: this.state.sortOrder == 'asc' ? 'desc' : 'asc'\n    }, () => {\n      const { month, currentPage } = this.state;\n      this.getTrafficList(month, currentPage);\n    });\n  };\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getTrafficList(this.initPage, this.initMonth));\n  };\n\n  render() {\n    const {\n      isLoading, errorMessage, orgTrafficList,\n      currentPage, hasNextPage, perPage,\n      sortBy, sortOrder\n    } = this.state;\n    return (\n      <Fragment>\n        <div className=\"d-flex align-items-center mt-4\">\n          <span className=\"statistic-reports-tip\">{gettext('Month:')}</span>\n          <Input\n            className=\"statistic-reports-input\"\n            defaultValue={moment().format('YYYYMM')}\n            onChange={this.handleChange}\n            onKeyPress={this.handleKeyPress}\n          />\n          {errorMessage && <div className=\"error\">{errorMessage}</div>}\n        </div>\n        {isLoading && <Loading />}\n        {!isLoading &&\n          <TrafficTable type={'org'} sortItems={this.sortItems} sortBy={sortBy} sortOrder={sortOrder}>\n            {orgTrafficList.length > 0 && orgTrafficList.map((item, index) => {\n              return(\n                <TrafficTableBody\n                  key={index}\n                  userTrafficItem={item}\n                  type={'org'}\n                />\n              );\n            })}\n          </TrafficTable>\n        }\n        <Paginator\n          gotoPreviousPage={this.getPreviousPage}\n          gotoNextPage={this.getNextPage}\n          currentPage={currentPage}\n          hasNextPage={hasNextPage}\n          curPerPage={perPage}\n          resetPerPage={this.resetPerPage}\n        />\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgsTraffic;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/user-link.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/users/user-nav.js",["4312"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  email: PropTypes.string,\n  userName: PropTypes.string.isRequired,\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'info', urlPart: '', text: gettext('Info')},\n      {name: 'owned-repos', urlPart: 'owned-libraries', text: gettext('Owned Libraries')},\n      {name: 'shared-repos', urlPart: 'shared-libraries', text: gettext('Shared Libraries')},\n      {name: 'links', urlPart: 'shared-links', text: gettext('Shared Links')},\n      {name: 'groups', urlPart: 'groups', text: gettext('Groups')}\n    ];\n  }\n\n  render() {\n    const { currentItem, email, userName } = this.props;\n    return (\n      <div>\n        <div className=\"cur-view-path\">\n          <h3 className=\"sf-heading\"><Link to={`${siteRoot}sys/users/`}>{gettext('Users')}</Link> / {userName}</h3>\n        </div>\n        <ul className=\"nav border-bottom mx-4\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item mr-2\" key={index}>\n                <Link to={`${siteRoot}sys/users/${encodeURIComponent(email)}/${item.urlPart}`} className={`nav-link ${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/sysadmin-admin-user.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/sysadmin-user.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/search.js",["4313"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  placeholder: PropTypes.string.isRequired,\n  submit: PropTypes.func.isRequired\n};\n\nclass Search extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: ''\n    };\n  }\n\n  handleInputChange = (e) => {\n    this.setState({\n      value: e.target.value\n    });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      e.preventDefault();\n      this.handleSubmit();\n    }\n  };\n\n  handleSubmit = () => {\n    const value = this.state.value.trim();\n    if (!value) {\n      return false;\n    }\n    this.props.submit(value);\n  };\n\n  render() {\n    return (\n      <div className=\"input-icon\">\n        <i className=\"d-flex input-icon-addon fas fa-search\"></i>\n        <input\n          type=\"text\"\n          className=\"form-control search-input h-6 mr-1\"\n          style={{width: '17rem'}}\n          placeholder={this.props.placeholder}\n          value={this.state.value}\n          onChange={this.handleInputChange}\n          onKeyDown={this.handleKeyDown}\n          autoComplete=\"off\"\n        />\n      </div>\n    );\n  }\n}\n\nSearch.propTypes = propTypes;\n\nexport default Search;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/users/users-content.js",["4314","4315","4316","4317","4318","4319","4320","4321","4322","4323","4324","4325","4326"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { isPro, username, gettext, multiInstitution, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport Selector from '../../../components/single-selector';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport SysAdminUserSetQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport UserLink from '../user-link';\n\nconst { availableRoles, availableAdminRoles, institutions } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({ isItemFreezed: isFreezed });\n  };\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.currentPage - 1);\n  };\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.currentPage + 1);\n  };\n\n  sortByQuotaUsage = (e) => {\n    e.preventDefault();\n    this.props.sortByQuotaUsage();\n  };\n\n  render() {\n    const {\n      isAdmin, loading, errorMsg, items, isAllUsersSelected,\n      curPerPage, hasNextPage, currentPage,\n      sortBy, sortOrder\n    } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No users')}</h2>\n        </EmptyTip>\n      );\n\n\n      let columns = [];\n\n      let sortIcon;\n      if (sortBy == '') {\n        // initial sort icon\n        sortIcon = <span className=\"fas fa-sort\"></span>;\n      } else {\n        sortIcon = <span className={`fas ${sortOrder == 'asc' ? 'fa-caret-up' : 'fa-caret-down'}`}></span>;\n      }\n      const spaceText = gettext('Space Used');\n      const spaceEl =\n        sortBy != undefined ? // only offer 'sort' for 'DB' & 'LDAPImported' users\n          <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortByQuotaUsage}>{spaceText} {sortIcon}</a> :\n          spaceText;\n      const colSpaceText = <Fragment>{spaceEl}{` / ${gettext('Quota')}`}</Fragment>;\n\n      const colNameText = `${gettext('Name')} / ${gettext('Contact Email')}`;\n      const colCreatedText = `${gettext('Created At')} / ${gettext('Last Login')} / ${gettext('Last Access')}`;\n      if (isPro) {\n        columns.push(\n          {width: '20%', text: colNameText},\n          {width: '15%', text: gettext('Status')},\n          {width: '15%', text: gettext('Role')}\n        );\n      } else {\n        columns.push(\n          {width: '30%', text: colNameText},\n          {width: '20%', text: gettext('Status')}\n        );\n      }\n      if (multiInstitution && !isAdmin) {\n        columns.push(\n          {width: '14%', text: colSpaceText},\n          {width: '14%', text: gettext('Institution')},\n          {width: '14%', text: colCreatedText},\n          {width: '5%', text: ''}\n        );\n      } else {\n        columns.push(\n          {width: '20%', text: colSpaceText},\n          {width: '22%', text: colCreatedText},\n          {width: '5%', text: ''}\n        );\n      }\n\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"3%\" className=\"pl-2\">\n                  <input type=\"checkbox\" className=\"vam\" onChange={this.props.toggleSelectAllUsers} checked={isAllUsersSelected} />\n                </th>\n                {columns.map((item, index) => {\n                  return <th width={item.width} key={index}>{item.text}</th>;\n                })}\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  toggleItemFreezed={this.toggleItemFreezed}\n                  updateUser={this.props.updateUser}\n                  deleteUser={this.props.deleteUser}\n                  updateAdminRole={this.props.updateAdminRole}\n                  revokeAdmin={this.props.revokeAdmin}\n                  onUserSelected={this.props.onUserSelected}\n                  isAdmin={this.props.isAdmin}\n                  isLDAPImported={this.props.isLDAPImported}\n                />);\n              })}\n            </tbody>\n          </table>\n          {(!this.props.isAdmin && !this.props.isSearchResult) &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool,\n  errorMsg: PropTypes.string,\n  items: PropTypes.array,\n  deleteItem: PropTypes.func,\n  isAdmin: PropTypes.bool,\n  isLDAPImported: PropTypes.bool,\n  isSearchResult: PropTypes.bool,\n  sortBy: PropTypes.string,\n  sortByQuotaUsage: PropTypes.func,\n  getListByPage: PropTypes.func,\n  currentPage: PropTypes.number,\n  toggleSelectAllUsers: PropTypes.func,\n  isAllUsersSelected: PropTypes.bool,\n  resetPerPage: PropTypes.func,\n  updateUser: PropTypes.func,\n  deleteUser: PropTypes.func,\n  updateAdminRole: PropTypes.func,\n  revokeAdmin: PropTypes.func,\n  onUserSelected: PropTypes.func,\n  curPerPage: PropTypes.number,\n  hasNextPage: PropTypes.bool,\n  sortOrder: PropTypes.string,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isSetQuotaDialogOpen: false,\n      isDeleteUserDialogOpen: false,\n      isResetUserPasswordDialogOpen: false,\n      isRevokeAdminDialogOpen: false,\n      isConfirmInactiveDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  };\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  toggleSetQuotaDialog = () => {\n    this.setState({isSetQuotaDialogOpen: !this.state.isSetQuotaDialogOpen});\n  };\n\n  toggleDeleteUserDialog = () => {\n    this.setState({isDeleteUserDialogOpen: !this.state.isDeleteUserDialogOpen});\n  };\n\n  toggleResetUserPasswordDialog = () => {\n    this.setState({isResetUserPasswordDialogOpen: !this.state.isResetUserPasswordDialogOpen});\n  };\n\n  toggleRevokeAdminDialog = () => {\n    this.setState({isRevokeAdminDialogOpen: !this.state.isRevokeAdminDialogOpen});\n  };\n\n  toggleConfirmInactiveDialog= () => {\n    this.setState({isConfirmInactiveDialogOpen: !this.state.isConfirmInactiveDialogOpen});\n  };\n\n  onUserSelected = () => {\n    this.props.onUserSelected(this.props.item);\n  };\n\n  updateStatus= (roleOption) => {\n    const isActive = roleOption.value == 'active';\n    if (isActive) {\n      toaster.notify(gettext('It may take some time, please wait.'));\n    }\n    this.props.updateUser(this.props.item.email, 'is_active', isActive);\n  };\n\n  setUserInactive = () => {\n    this.props.updateUser(this.props.item.email, 'is_active', false);\n  };\n\n  updateRole = (roleOption) => {\n    this.props.updateUser(this.props.item.email, 'role', roleOption.value);\n  };\n\n  updateAdminRole = (roleOption) => {\n    this.props.updateAdminRole(this.props.item.email, roleOption.value);\n  };\n\n  translateRole = (role) => {\n    switch (role) {\n      case 'default':\n        return gettext('Default');\n      case 'guest':\n        return gettext('Guest');\n      default:\n        return role;\n    }\n  };\n\n  translateAdminRole = (role) => {\n    switch (role) {\n      case 'default_admin':\n        return gettext('Default Admin');\n      case 'system_admin':\n        return gettext('System Admin');\n      case 'daily_admin':\n        return gettext('Daily Admin');\n      case 'audit_admin':\n        return gettext('Audit Admin');\n      default:\n        return role;\n    }\n  };\n\n  translateStatus = (status) => {\n    switch (status) {\n      case 'active':\n        return gettext('Active');\n      case 'inactive':\n        return gettext('Inactive');\n    }\n  };\n\n  updateInstitution = (instOption) => {\n    this.props.updateUser(this.props.item.email, 'institution', instOption.value);\n  };\n\n  updateQuota = (value) => {\n    this.props.updateUser(this.props.item.email, 'quota_total', value);\n  };\n\n  deleteUser = () => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    this.props.deleteUser(this.props.item.email, this.props.item.name);\n  };\n\n  resetPassword = () => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    seafileAPI.sysAdminResetUserPassword(this.props.item.email).then(res => {\n      toaster.success(res.data.reset_tip);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  revokeAdmin = () => {\n    const { item } = this.props;\n    this.props.revokeAdmin(item.email, item.name);\n  };\n\n  getMenuOperations = () => {\n    const {\n      isAdmin, isLDAPImported,\n      isSearchResult, item\n    } = this.props;\n    let list = ['Delete'];\n    if (!isLDAPImported ||\n      (isSearchResult && item.source == 'db')) {\n      list.push('Reset Password');\n    }\n    if (isAdmin) {\n      list = ['Revoke Admin'];\n    }\n    return list;\n  };\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch (item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n      case 'Revoke Admin':\n        translateResult = gettext('Revoke Admin');\n        break;\n    }\n\n    return translateResult;\n  };\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Delete':\n        this.toggleDeleteUserDialog();\n        break;\n      case 'Reset Password':\n        this.toggleResetUserPasswordDialog();\n        break;\n      case 'Revoke Admin':\n        this.toggleRevokeAdminDialog();\n        break;\n      default:\n        break;\n    }\n  };\n\n  render() {\n    const { item, isAdmin } = this.props;\n    const {\n      highlight,\n      isOpIconShown,\n      isSetQuotaDialogOpen,\n      isDeleteUserDialogOpen,\n      isResetUserPasswordDialogOpen,\n      isRevokeAdminDialogOpen,\n      isConfirmInactiveDialogOpen\n    } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    const deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n    const resetPasswordDialogMsg = gettext('Are you sure you want to reset the password of {placeholder} ?').replace('{placeholder}', itemName);\n    const revokeAdminDialogMsg = gettext('Are you sure you want to revoke the admin permission of {placeholder} ?').replace('{placeholder}', itemName);\n    const confirmSetUserInactiveMsg = gettext('Are you sure you want to set {user_placeholder} inactive?').replace('{user_placeholder}', itemName);\n\n    // for 'user status'\n    const curStatus = item.is_active ? 'active' : 'inactive';\n    this.statusOptions = ['active', 'inactive'].map(item => {\n      return {\n        value: item,\n        text: this.translateStatus(item),\n        isSelected: item == curStatus\n      };\n    });\n    const currentSelectedStatusOption = this.statusOptions.filter(item => item.isSelected)[0];\n\n    let currentSelectedAdminRoleOption;\n    let currentSelectedRoleOption;\n    if (isAdmin) {\n      const { admin_role: curAdminRole } = item;\n      this.adminRoleOptions = availableAdminRoles.map(item => {\n        return {\n          value: item,\n          text: this.translateAdminRole(item),\n          isSelected: item == curAdminRole\n        };\n      });\n      currentSelectedAdminRoleOption = this.adminRoleOptions.filter(item => item.isSelected)[0];\n    } else {\n      const { role: curRole } = item;\n      this.roleOptions = availableRoles.map(item => {\n        return {\n          value: item,\n          text: this.translateRole(item),\n          isSelected: item == curRole\n        };\n      });\n      currentSelectedRoleOption = this.roleOptions.filter(item => item.isSelected)[0] || { // `|| {...}`: to be compatible with old data(roles not in the present `availableRoles`\n        value: curRole,\n        text: this.translateRole(curRole),\n        isSelected: true\n      };\n    }\n\n    let currentSelectedInstOption;\n    if (multiInstitution && !isAdmin) {\n      const { institution: curInstitution } = item;\n      this.instOptions = institutions.map(item => {\n        return {\n          value: item,\n          text: item,\n          isSelected: item == curInstitution\n        };\n      });\n      currentSelectedInstOption = this.instOptions.filter(item => item.isSelected)[0];\n    }\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td className=\"pl-2\">\n            <input type=\"checkbox\" className=\"vam\" onChange={this.onUserSelected} checked={item.isSelected} />\n          </td>\n          <td>\n            <UserLink email={item.email} name={item.name} />\n            {item.contact_email &&\n              <Fragment>\n                <br />\n                {item.contact_email}\n              </Fragment>}\n            {item.org_id &&\n              <Fragment>\n                <br />\n                <Link to={`${siteRoot}sys/organizations/${item.org_id}/info/`}>({item.org_name})</Link>\n              </Fragment>\n            }\n          </td>\n          <td>\n            <Selector\n              isDropdownToggleShown={highlight}\n              currentSelectedOption={currentSelectedStatusOption}\n              options={this.statusOptions}\n              selectOption={this.updateStatus}\n              toggleItemFreezed={this.props.toggleItemFreezed}\n              operationBeforeSelect={item.is_active ? this.toggleConfirmInactiveDialog : undefined}\n            />\n          </td>\n          {isPro &&\n          <td>\n            {isAdmin ?\n              <Selector\n                isDropdownToggleShown={highlight}\n                currentSelectedOption={currentSelectedAdminRoleOption}\n                options={this.adminRoleOptions}\n                selectOption={this.updateAdminRole}\n                toggleItemFreezed={this.props.toggleItemFreezed}\n              />\n              :\n              <Selector\n                isDropdownToggleShown={highlight}\n                currentSelectedOption={currentSelectedRoleOption}\n                options={this.roleOptions}\n                selectOption={this.updateRole}\n                toggleItemFreezed={this.props.toggleItemFreezed}\n              />\n            }\n          </td>\n          }\n          <td>\n            {`${Utils.bytesToSize(item.quota_usage)} / ${item.quota_total > 0 ? Utils.bytesToSize(item.quota_total) : '--'}`}\n            <span\n              title={gettext('Edit')}\n              className={`fa fa-pencil-alt attr-action-icon ${isOpIconShown ? '' : 'invisible'}`}\n              onClick={this.toggleSetQuotaDialog}>\n            </span>\n          </td>\n          {(multiInstitution && !isAdmin) &&\n            <td>\n              <Selector\n                isDropdownToggleShown={highlight && institutions.length > 0}\n                currentSelectedOption={currentSelectedInstOption}\n                options={this.instOptions}\n                selectOption={this.updateInstitution}\n                toggleItemFreezed={this.props.toggleItemFreezed}\n              />\n            </td>\n          }\n          <td>\n            {`${item.create_time ? moment(item.create_time).format('YYYY-MM-DD HH:mm') : '--'} /`}\n            <br />\n            {`${item.last_login ? moment(item.last_login).fromNow() : '--'}`}\n            <br />\n            {`${item.last_access_time ? moment(item.last_access_time).fromNow() : '--'}`}\n          </td>\n          <td>\n            {(item.email != username && isOpIconShown) &&\n            <OpMenu\n              operations={this.getMenuOperations()}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isSetQuotaDialogOpen &&\n          <SysAdminUserSetQuotaDialog\n            toggle={this.toggleSetQuotaDialog}\n            updateQuota={this.updateQuota}\n          />\n        }\n        {isDeleteUserDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete User')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteUser}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteUserDialog}\n          />\n        }\n        {isResetUserPasswordDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Reset Password')}\n            message={resetPasswordDialogMsg}\n            executeOperation={this.resetPassword}\n            confirmBtnText={gettext('Reset')}\n            toggleDialog={this.toggleResetUserPasswordDialog}\n          />\n        }\n        {isRevokeAdminDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Revoke Admin')}\n            message={revokeAdminDialogMsg}\n            executeOperation={this.revokeAdmin}\n            confirmBtnText={gettext('Revoke')}\n            toggleDialog={this.toggleRevokeAdminDialog}\n          />\n        }\n        {isConfirmInactiveDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Set user inactive')}\n            message={confirmSetUserInactiveMsg}\n            executeOperation={this.setUserInactive}\n            confirmBtnText={gettext('Set')}\n            toggleDialog={this.toggleConfirmInactiveDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object,\n  isItemFreezed: PropTypes.bool,\n  isAdmin: PropTypes.bool,\n  isLDAPImported: PropTypes.bool,\n  onFreezedItem: PropTypes.func,\n  onUnfreezedItem: PropTypes.func,\n  toggleItemFreezed: PropTypes.func.isRequired,\n  updateUser: PropTypes.func,\n  deleteUser: PropTypes.func,\n  updateAdminRole: PropTypes.func,\n  revokeAdmin: PropTypes.func,\n  onUserSelected: PropTypes.func,\n  isSearchResult: PropTypes.bool,\n};\n\nexport default Content;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/share-admin-link.js",["4327"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport copy from '../copy-to-clipboard';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\n\nconst propTypes = {\n  link: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ShareAdminLink extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  copyToClipboard = () => {\n    copy(this.props.link);\n    this.props.toggleDialog();\n    toaster.success(gettext('The link is copied to the clipboard.'), {duration: 2});\n  };\n\n  render() {\n    const { link, toggleDialog } = this.props;\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Link')}</ModalHeader>\n        <ModalBody>\n          <a href={link}>{link}</a>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.copyToClipboard}>{gettext('Copy')}</Button>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nShareAdminLink.propTypes = propTypes;\n\nexport default ShareAdminLink;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-import-user-dialog.js",["4328"],[],"\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, siteRoot } from '../../../utils/constants';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  importUserInBatch: PropTypes.func.isRequired,\n};\n\nclass SysAdminImportUserDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: ''\n    };\n    this.fileInputRef = React.createRef();\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  };\n\n  openFileInput = () => {\n    this.fileInputRef.current.click();\n  };\n\n  uploadFile = (e) => {\n    // no file selected\n    if (!this.fileInputRef.current.files.length) {\n      return;\n    }\n    // check file extension\n    let fileName = this.fileInputRef.current.files[0].name;\n    if(fileName.substr(fileName.lastIndexOf('.') + 1) != 'xlsx') {\n      this.setState({\n        errorMsg: gettext('Please choose a .xlsx file.')\n      });\n      return;\n    }\n    const file = this.fileInputRef.current.files[0];\n    this.props.importUserInBatch(file);\n    this.toggle();\n  };\n\n  render() {\n    let { errorMsg } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Import users from a .xlsx file')}</ModalHeader>\n        <ModalBody>\n          <p><a className=\"text-secondary small\" href={`${siteRoot}useradmin/batchadduser/example/`}>{gettext('Download an example file')}</a></p>\n          <button className=\"btn btn-outline-primary\" onClick={this.openFileInput}>{gettext('Upload file')}</button>\n          <input className=\"d-none\" type=\"file\" onChange={this.uploadFile} ref={this.fileInputRef} />\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminImportUserDialog.propTypes = propTypes;\n\nexport default SysAdminImportUserDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-batch-add-admin-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/set-quota.js",["4329","4330"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  updateQuota: PropTypes.func.isRequired\n};\n\nclass SetQuotaDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      quota: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  };\n\n  handleQuotaChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      quota: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  };\n\n  handleSubmit = () => {\n    this.props.updateQuota(this.state.quota.trim());\n    this.toggle();\n  };\n\n  render() {\n    const { quota, isSubmitBtnActive } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Set Quota')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <InputGroup>\n                <Input\n                  type=\"text\"\n                  className=\"form-control\"\n                  value={quota}\n                  onKeyDown={this.handleKeyDown}\n                  onChange={this.handleQuotaChange}\n                />\n                <InputGroupAddon addonType=\"append\">\n                  <InputGroupText>MB</InputGroupText>\n                </InputGroupAddon>\n              </InputGroup>\n              <p className=\"small text-secondary mt-2 mb-2\">\n                {gettext('An integer that is greater than or equal to 0.')}\n                <br />\n                {gettext('Tip: 0 means default limit')}\n              </p>\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSetQuotaDialog.propTypes = propTypes;\n\nexport default SetQuotaDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/update-user.js",["4331"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Input } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  value: PropTypes.string.isRequired,\n  dialogTitle: PropTypes.string.isRequired,\n  updateValue: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass UpdateUser extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: this.props.value,\n      isSubmitBtnActive: false\n    };\n  }\n\n  handleInputChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      value: value\n    });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  };\n\n  handleSubmit = () => {\n    this.props.updateValue(this.state.value.trim());\n    this.props.toggleDialog();\n  };\n\n  render() {\n    const  { toggleDialog } = this.props;\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{this.props.dialogTitle}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Input\n                type=\"text\"\n                value={this.state.value}\n                onKeyDown={this.handleKeyDown}\n                onChange={this.handleInputChange}\n              />\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nUpdateUser.propTypes = propTypes;\n\nexport default UpdateUser;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/groups/groups-content.js",["4332","4333","4334","4335"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\nimport EmptyTip from '../../../components/empty-tip';\nimport Paginator from '../../../components/paginator';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport SysAdminTransferGroupDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-group-transfer-dialog';\nimport UserLink from '../user-link';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page - 1);\n  };\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page + 1);\n  };\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No groups')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"35%\">{gettext('Name')}</th>\n                <th width=\"40%\">{gettext('Owner')}</th>\n                <th width=\"20%\">{gettext('Created At')}</th>\n                <th width=\"5%\">{/* operation */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  deleteGroup={this.props.deleteGroup}\n                  transferGroup={this.props.transferGroup}\n                />);\n              })}\n            </tbody>\n          </table>\n          {pageInfo &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  getDeviceErrorsListByPage: PropTypes.func,\n  resetPerPage: PropTypes.func,\n  curPerPage: PropTypes.number,\n  pageInfo: PropTypes.object,\n  getListByPage: PropTypes.func.isRequired,\n  deleteGroup: PropTypes.func.isRequired,\n  transferGroup: PropTypes.func.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isDeleteDialogOpen: false,\n      isTransferDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  };\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n      case 'Transfer':\n        this.toggleTransferDialog();\n        break;\n      default:\n        break;\n    }\n  };\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  };\n\n  toggleTransferDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isTransferDialogOpen: !this.state.isTransferDialogOpen});\n  };\n\n  deleteGroup = () => {\n    this.props.deleteGroup(this.props.item.id);\n  };\n\n  transferGroup = (receiver) => {\n    this.props.transferGroup(this.props.item.id, receiver);\n  };\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Transfer':\n        translateResult = gettext('Transfer');\n        break;\n    }\n\n    return translateResult;\n  };\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen, isTransferDialogOpen } = this.state;\n\n    let groupName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    let deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', groupName);\n\n    const groupUrl = item.parent_group_id == 0 ?\n      `${siteRoot}sys/groups/${item.id}/libraries/` :\n      `${siteRoot}sys/departments/${item.id}/`;\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><Link to={groupUrl}>{item.name}</Link></td>\n          <td>\n            {item.owner == 'system admin' ?\n              '--' :\n              <UserLink email={item.owner} name={item.owner_name} />\n            }\n          </td>\n          <td>\n            <span title={moment(item.created_at).format('llll')}>{moment(item.created_at).fromNow()}</span>\n          </td>\n          <td>\n            {(isOpIconShown && item.owner != 'system admin') &&\n            <OpMenu\n              operations={['Delete', 'Transfer']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Group')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteGroup}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n        {isTransferDialogOpen &&\n          <SysAdminTransferGroupDialog\n            groupName={item.name}\n            transferGroup={this.transferGroup}\n            toggleDialog={this.toggleTransferDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  deleteGroup: PropTypes.func.isRequired,\n  transferGroup: PropTypes.func.isRequired,\n};\n\nexport default Content;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-add-user-dialog.js",["4336"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Label, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport SysAdminUserRoleEditor from '../../../components/select-editor/sysadmin-user-role-editor';\n\nconst propTypes = {\n  availableRoles: PropTypes.array.isRequired,\n  dialogTitle: PropTypes.string.isRequired,\n  showRole: PropTypes.bool.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  addUser: PropTypes.func.isRequired\n};\n\nclass SysAdminAddUserDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      isPasswordVisible: false,\n      password: '',\n      passwordAgain: '',\n      email: '',\n      name: '',\n      role: 'default',\n      isSubmitBtnActive: false\n    };\n  }\n\n  checkSubmitBtnActive = () => {\n    const { email, password, passwordAgain } = this.state;\n    let btnActive = true;\n    if (email.trim() &&\n      password.trim() &&\n      passwordAgain.trim()) {\n      btnActive = true;\n    } else {\n      btnActive = false;\n    }\n    this.setState({\n      isSubmitBtnActive: btnActive\n    });\n  };\n\n  toggle = () => {\n    this.props.toggleDialog();\n  };\n\n  togglePasswordVisible = () => {\n    this.setState({isPasswordVisible: !this.state.isPasswordVisible});\n  };\n\n  inputPassword = (e) => {\n    let passwd = e.target.value;\n    this.setState({\n      password: passwd,\n      errorMsg: ''\n    }, this.checkSubmitBtnActive);\n  };\n\n  inputPasswordAgain = (e) => {\n    let passwd = e.target.value;\n    this.setState({\n      passwordAgain: passwd,\n      errorMsg: ''\n    }, this.checkSubmitBtnActive);\n  };\n\n  generatePassword = () => {\n    let val = Utils.generatePassword(8);\n    this.setState({\n      password: val,\n      passwordAgain: val\n    }, this.checkSubmitBtnActive);\n  };\n\n  inputEmail = (e) => {\n    let email = e.target.value;\n    this.setState({\n      email: email\n    }, this.checkSubmitBtnActive);\n  };\n\n  inputName = (e) => {\n    let name = e.target.value;\n    this.setState({\n      name: name\n    });\n  };\n\n  updateRole = (role) => {\n    this.setState({\n      role: role\n    });\n  };\n\n  handleSubmit = () => {\n    const { email, password, passwordAgain, name, role } = this.state;\n    if (password != passwordAgain) {\n      this.setState({errorMsg: gettext('Passwords do not match.')});\n      return;\n    }\n    let data = {\n      email: email.trim(),\n      name: name.trim(),\n      password: password.trim()\n    };\n    if (this.props.showRole) {\n      data.role = role;\n    }\n    this.props.addUser(data);\n    this.toggle();\n  };\n\n  render() {\n    const { dialogTitle, showRole } = this.props;\n    const {\n      errorMsg, isPasswordVisible,\n      email, name, role, password, passwordAgain,\n      isSubmitBtnActive\n    } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{dialogTitle || gettext('Add Member')}</ModalHeader>\n        <ModalBody>\n          <Form autoComplete=\"off\">\n            <FormGroup>\n              <Label>{gettext('Email')}</Label>\n              <Input value={email} onChange={this.inputEmail} />\n            </FormGroup>\n            <FormGroup>\n              <Label>{gettext('Name(optional)')}</Label>\n              <Input type=\"text\" value={name} onChange={this.inputName} />\n            </FormGroup>\n            {showRole &&\n            <FormGroup>\n              <Label>\n                {gettext('Role')}\n                <span className=\"small text-secondary ml-1 fas fa-question-circle\" title={gettext('You can also add a user as a guest, who will not be allowed to create libraries and groups.')}></span>\n              </Label>\n              <SysAdminUserRoleEditor\n                isTextMode={false}\n                isEditIconShow={false}\n                currentRole={role}\n                roleOptions={this.props.availableRoles}\n                onRoleChanged={this.updateRole}\n              />\n            </FormGroup>\n            }\n            <FormGroup>\n              <Label>{gettext('Password')}</Label>\n              <InputGroup>\n                <Input autoComplete=\"new-password\" type={isPasswordVisible ? 'text' : 'password'} value={password || ''} onChange={this.inputPassword} />\n                <InputGroupAddon addonType=\"append\">\n                  <Button className=\"mt-0\" onClick={this.togglePasswordVisible}><i className={`link-operation-icon fas ${this.state.isPasswordVisible ? 'fa-eye': 'fa-eye-slash'}`}></i></Button>\n                  <Button className=\"mt-0\" onClick={this.generatePassword}><i className=\"link-operation-icon fas fa-magic\"></i></Button>\n                </InputGroupAddon>\n              </InputGroup>\n            </FormGroup>\n            <FormGroup>\n              <Label>{gettext('Password again')}</Label>\n              <Input type={isPasswordVisible ? 'text' : 'password'} value={passwordAgain || ''} onChange={this.inputPasswordAgain} />\n            </FormGroup>\n          </Form>\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminAddUserDialog.propTypes = propTypes;\n\nexport default SysAdminAddUserDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/repos/repos-nav.js",["4337"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'all', urlPart: 'all-libraries', text: gettext('All')},\n      {name: 'system', urlPart: 'system-library', text: gettext('System')},\n      {name: 'trash', urlPart: 'trash-libraries', text: gettext('Trash')}\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/create-folder-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/repos/dir-content.js",["4338","4339","4340","4341"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport Loading from '../../../components/loading';\n\nclass DirentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  };\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  };\n\n  openFolder = () => {\n    this.props.openFolder(this.props.dirent);\n  };\n\n  deleteDirent = (e) => {\n    e.preventDefault();\n    this.props.deleteDirent(this.props.dirent);\n  };\n\n  downloadDirent = (e) => {\n    e.preventDefault();\n    this.props.downloadDirent(this.props.dirent);\n  };\n\n  render () {\n    let { isOpIconShown } = this.state;\n    let { dirent, fromSystemRepo } = this.props;\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n          <td>\n            {dirent.is_file ?\n              dirent.name :\n              <Link to=\"#\" onClick={this.openFolder}>{dirent.name}</Link>\n            }\n          </td>\n          <td>\n            {isOpIconShown && fromSystemRepo &&\n              <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} onClick={this.deleteDirent}></a>\n            }\n            {isOpIconShown && dirent.is_file &&\n            <a href=\"#\" className=\"op-icon sf2-icon-download\" title={gettext('Download')} onClick={this.downloadDirent}></a>\n            }\n          </td>\n          <td>{dirent.size}</td>\n          <td>{moment(dirent.mtime).fromNow()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\nDirentItem.propTypes = {\n  dirent: PropTypes.object.isRequired,\n  fromSystemRepo: PropTypes.bool.isRequired,\n  deleteDirent: PropTypes.func.isRequired,\n  openFolder: PropTypes.func.isRequired,\n  downloadDirent: PropTypes.func.isRequired,\n};\n\nclass DirContent extends React.Component {\n\n  render() {\n    let { loading, errorMsg, direntList } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    }\n\n    return (\n      <Fragment>\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"5%\">{/*icon*/}</th>\n              <th width=\"55%\">{gettext('Name')}</th>\n              <th width=\"10%\">{/*operation*/}</th>\n              <th width=\"15%\">{gettext('Size')}</th>\n              <th width=\"15%\">{gettext('Last Update')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return <DirentItem\n                key={index}\n                dirent={dirent}\n                openFolder={this.props.openFolder}\n                deleteDirent={this.props.deleteDirent}\n                downloadDirent={this.props.downloadDirent}\n                fromSystemRepo={this.props.fromSystemRepo}\n              />;\n            })}\n          </tbody>\n        </table>\n      </Fragment>\n    );\n  }\n}\n\nDirContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  openFolder: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  fromSystemRepo: PropTypes.bool.isRequired,\n  deleteDirent: PropTypes.func.isRequired,\n  downloadDirent: PropTypes.func.isRequired,\n};\n\nexport default DirContent;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/system-admin/dirent.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/repos/repos.js",["4342","4343","4344","4345","4346","4347","4348"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot, isPro } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport ModalPortal from '../../../components/modal-portal';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport TransferDialog from '../../../components/dialog/transfer-dialog';\nimport DeleteRepoDialog from '../../../components/dialog/delete-repo-dialog';\nimport SysAdminShareDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-share-dialog';\nimport SysAdminLibHistorySettingDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-lib-history-setting-dialog';\nimport UserLink from '../user-link';\n\nconst { enableSysAdminViewRepo } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  getPreviousPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page - 1);\n  };\n\n  getNextPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page + 1);\n  };\n\n  sortByFileCount = (e) => {\n    e.preventDefault();\n    this.props.sortItems('file_count');\n  };\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    this.props.sortItems('size');\n  };\n\n  render() {\n    // offer 'sort' only for 'all repos'\n    const { loading, errorMsg, items, pageInfo, curPerPage, sortBy } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries')}</h2>\n        </EmptyTip>\n      );\n      const initialSortIcon = <span className=\"fas fa-sort\"></span>;\n      const sortIcon = <span className=\"fas fa-caret-down\"></span>;\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"5%\">{/*icon*/}</th>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"15%\">\n                  {sortBy != undefined ?\n                    <Fragment>\n                      <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortByFileCount}>{gettext('Files')} {sortBy == 'file_count' ? sortIcon : initialSortIcon}</a>{' / '}\n                      <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBy == 'size' ? sortIcon : initialSortIcon}</a>\n                    </Fragment> :\n                    gettext('Files') / gettext('Size')\n                  }\n                </th>\n                <th width=\"32%\">ID</th>\n                <th width=\"18%\">{gettext('Owner')}</th>\n                <th width=\"5%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  repo={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  onDeleteRepo={this.props.onDeleteRepo}\n                  onTransferRepo={this.props.onTransferRepo}\n                />);\n              })}\n            </tbody>\n          </table>\n          {pageInfo &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPageList}\n            gotoNextPage={this.getNextPageList}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  deleteItem: PropTypes.func,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onRestoreRepo: PropTypes.func,\n  getListByPage: PropTypes.func.isRequired,\n  resetPerPage: PropTypes.func,\n  pageInfo: PropTypes.object,\n  curPerPage: PropTypes.number,\n  sortItems: PropTypes.func,\n  sortBy: PropTypes.string,\n  onTransferRepo: PropTypes.func.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isShareDialogOpen: false,\n      isDeleteDialogOpen: false,\n      isTransferDialogOpen: false,\n      isHistorySettingDialogOpen: false,\n      isRepoDeleted: false,\n    };\n  }\n\n  onDeleteRepo = (repo) => {\n    seafileAPI.sysAdminDeleteRepo(repo.id).then((res) => {\n      this.props.onDeleteRepo(repo);\n      this.setState({\n        isDeleteDialogOpen: false,\n        isRepoDeleted: true,\n      });\n      const msg = gettext('Successfully deleted {name}.').replace('{name}', repo.name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n\n      this.setState({isRepoDeleted: false});\n    });\n  };\n\n  onTransferRepo = (owner) => {\n    seafileAPI.sysAdminTransferRepo(this.props.repo.id, owner.email).then((res) => {\n      this.props.onTransferRepo(res.data);\n      let message = gettext('Successfully transferred the library.');\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n    this.toggleTransferDialog();\n  };\n\n  handleMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  };\n\n  handleMouseOut = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Share':\n        this.toggleShareDialog();\n        break;\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n      case 'Transfer':\n        this.toggleTransferDialog();\n        break;\n      case 'History Setting':\n        this.toggleHistorySettingDialog();\n        break;\n      default:\n        break;\n    }\n  };\n\n  toggleShareDialog = () => {\n    this.setState({isShareDialogOpen: !this.state.isShareDialogOpen});\n  };\n\n  toggleDeleteDialog = () => {\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  };\n\n  toggleTransferDialog = () => {\n    this.setState({isTransferDialogOpen: !this.state.isTransferDialogOpen});\n  };\n\n  toggleHistorySettingDialog = () => {\n    this.setState({isHistorySettingDialogOpen: !this.state.isHistorySettingDialogOpen});\n  };\n\n  renderRepoName = () => {\n    const { repo } = this.props;\n    if (repo.name) {\n      if (isPro && enableSysAdminViewRepo && !repo.encrypted) {\n        return <Link to={`${siteRoot}sys/libraries/${repo.id}/`}>{repo.name}</Link>;\n      } else {\n        return repo.name;\n      }\n    } else {\n      return '--';\n    }\n  };\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Share':\n        translateResult = gettext('Share');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Transfer':\n        translateResult = gettext('Transfer');\n        break;\n      case 'History Setting':\n        translateResult = gettext('History Setting');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  };\n\n  getOperations = () => {\n    const { repo } = this.props;\n    let operations = ['Delete', 'Transfer'];\n    const index = repo.owner_email.indexOf('@seafile_group');\n    let isGroupOwnedRepo = index != -1;\n    if (isGroupOwnedRepo) {\n      operations = ['Transfer'];\n      return operations;\n    }\n    if (!repo.encrypted) {\n      operations.push('Share');\n    }\n    operations.push('History Setting');\n    return operations;\n  };\n\n  render () {\n    const { repo } = this.props;\n    const {\n      isOpIconShown,\n      isShareDialogOpen,\n      isDeleteDialogOpen,\n      isTransferDialogOpen,\n      isHistorySettingDialogOpen\n    } = this.state;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    const index = repo.owner_email.indexOf('@seafile_group');\n    let isGroupOwnedRepo = index != -1;\n    let departmentID;\n    if (isGroupOwnedRepo) {\n      departmentID = repo.owner_email.substring(0, index);\n    }\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{this.renderRepoName()}</td>\n          <td>{`${repo.file_count} / ${Utils.bytesToSize(repo.size)}`}</td>\n          <td>{repo.id}</td>\n          <td>\n            {isGroupOwnedRepo ?\n              <Link to={`${siteRoot}sys/departments/${departmentID}/`}>{repo.owner_name}</Link> :\n              <UserLink email={repo.owner_email} name={repo.owner_name} />\n            }\n          </td>\n          <td>\n            {(isOpIconShown) &&\n            <OpMenu\n              operations={this.getOperations()}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isShareDialogOpen &&\n          <ModalPortal>\n            <SysAdminShareDialog\n              itemName={repo.name}\n              itemPath={'/'}\n              repoID={repo.id}\n              isGroupOwnedRepo={isGroupOwnedRepo}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPortal>\n        }\n        {isDeleteDialogOpen &&\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onDeleteRepo}\n              toggle={this.toggleDeleteDialog}\n            />\n          </ModalPortal>\n        }\n        {isTransferDialogOpen &&\n          <ModalPortal>\n            <TransferDialog\n              itemName={repo.name}\n              submit={this.onTransferRepo}\n              toggleDialog={this.toggleTransferDialog}\n              isSysAdmin={true}\n            />\n          </ModalPortal>\n        }\n        {isHistorySettingDialogOpen &&\n          <ModalPortal>\n            <SysAdminLibHistorySettingDialog\n              repoID={repo.id}\n              itemName={repo.name}\n              toggleDialog={this.toggleHistorySettingDialog}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onTransferRepo: PropTypes.func.isRequired,\n};\n\nexport default Content;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/set-upload-download-rate-limit.js",["4349","4350","4351"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  uploadOrDownload: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired,\n  updateUploadDownloadRateLimit: PropTypes.func.isRequired\n};\n\nclass SysAdminSetUploadDownloadRateLimitDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      rateLimit: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  };\n\n  handleRateLimitChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      rateLimit: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  };\n\n  handleSubmit = () => {\n    this.props.updateUploadDownloadRateLimit(this.props.uploadOrDownload, this.state.rateLimit.trim());\n    this.toggle();\n  };\n\n  render() {\n    const { rateLimit, isSubmitBtnActive } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{this.props.uploadOrDownload == 'upload' ? gettext('Set Upload Rate Limit') : gettext('Set Download Rate Limit')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <InputGroup>\n                <Input\n                  type=\"text\"\n                  className=\"form-control\"\n                  value={rateLimit}\n                  onKeyDown={this.handleKeyDown}\n                  onChange={this.handleRateLimitChange}\n                />\n                <InputGroupAddon addonType=\"append\">\n                  <InputGroupText>kB/s</InputGroupText>\n                </InputGroupAddon>\n              </InputGroup>\n              <p className=\"small text-secondary mt-2 mb-2\">\n                {gettext('An integer that is greater than or equal to 0.')}\n                <br />\n                {gettext('Tip: 0 means default limit')}\n              </p>\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminSetUploadDownloadRateLimitDialog.propTypes = propTypes;\n\nexport default SysAdminSetUploadDownloadRateLimitDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/repos/dir-path-bar.js",["4352","4353"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  isSystemRepo: PropTypes.bool.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  };\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return null;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  };\n\n  render() {\n    let { isSystemRepo, currentPath, repoName } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    return (\n      <div className=\"path-container\">\n        {isSystemRepo ?\n          <a href={`${siteRoot}sys/system-library/`}>{gettext('System')}</a> :\n          <a href={`${siteRoot}sys/all-libraries/`}>{gettext('All')}</a>\n        }\n        <span className=\"path-split\">/</span>\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-create-repo-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-group-add-member-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/groups/group-nav.js",["4354"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired,\n  groupName: PropTypes.string.isRequired,\n  groupID: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'repos', urlPart: 'groups/' + this.props.groupID + '/libraries', text: gettext('Libraries')},\n      {name: 'members', urlPart: 'groups/' + this.props.groupID + '/members', text: gettext('Members')}\n    ];\n  }\n\n  render() {\n    const { groupName, currentItem } = this.props;\n    return (\n      <div>\n        <div className=\"cur-view-path\">\n          <h3 className=\"sf-heading\"><Link to={`${siteRoot}sys/groups/`}>{gettext('Groups')}</Link> / {groupName}</h3>\n        </div>\n        <ul className=\"nav border-bottom mx-4\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item mr-2\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link ${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/departments/group-item.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/departments/member-item.js",["4355"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport RoleSelector from '../../../components/single-selector';\nimport UserLink from '../user-link';\n\nconst MemberItemPropTypes = {\n  groupID: PropTypes.string,\n  member: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onMemberChanged: PropTypes.func.isRequired,\n  showDeleteMemberDialog: PropTypes.func.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n};\n\nclass MemberItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false\n    };\n    this.roleOptions = [\n      { value: 'Admin', text: gettext('Admin'), isSelected: false },\n      { value: 'Member', text: gettext('Member'), isSelected: false }\n    ];\n  }\n\n  onMouseEnter = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({ highlight: true });\n  };\n\n  onMouseLeave = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({ highlight: false });\n  };\n\n  onChangeUserRole = (roleOption) => {\n    let isAdmin = roleOption.value === 'Admin' ? true : false;\n    seafileAPI.sysAdminUpdateGroupMemberRole(this.props.groupID, this.props.member.email, isAdmin).then((res) => {\n      this.props.onMemberChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n    this.setState({\n      highlight: false\n    });\n  };\n\n  render() {\n    const member = this.props.member;\n    const highlight = this.state.highlight;\n    if (member.role === 'Owner') return null;\n    this.roleOptions = this.roleOptions.map(item => {\n      item.isSelected = item.value == member.role;\n      return item;\n    });\n    const currentSelectedOption = this.roleOptions.filter(item => item.isSelected)[0];\n    return (\n      <tr className={highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={member.avatar_url} alt=\"member-header\" width=\"24\" className=\"avatar\"/></td>\n        <td><UserLink email={member.email} name={member.name} /></td>\n        <td>\n          <RoleSelector\n            isDropdownToggleShown={highlight}\n            currentSelectedOption={currentSelectedOption}\n            options={this.roleOptions}\n            selectOption={this.onChangeUserRole}\n            toggleItemFreezed={this.props.toggleItemFreezed}\n          />\n        </td>\n        <td className=\"cursor-pointer text-center\" onClick={this.props.showDeleteMemberDialog.bind(this, member)}>\n          <span className={`sf2-icon-x3 action-icon ${highlight ? '' : 'vh'}`} title=\"Delete\"></span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nMemberItem.propTypes = MemberItemPropTypes;\n\nexport default MemberItem;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-create-group-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-delete-repo-dialog.js",["4356"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\n\nclass DeleteRepoDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  deleteRepo = () => {\n    seafileAPI.sysAdminDeleteRepoInDepartment(this.props.groupID, this.props.repo.repo_id).then((res) => {\n      if (res.data.success) {\n        this.props.onRepoChanged();\n        this.props.toggle();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { repo } = this.props;\n    let tipMessage = gettext('Are you sure you want to delete {placeholder} ?');\n    tipMessage = tipMessage.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(repo.name || repo.repo_name) + '</span>');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Delete Library')}</ModalHeader>\n        <ModalBody>\n          <div dangerouslySetInnerHTML={{__html: tipMessage}}></div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.deleteRepo}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  toggle: PropTypes.func.isRequired,\n  groupID: PropTypes.string,\n  onRepoChanged: PropTypes.func.isRequired\n};\n\nDeleteRepoDialog.propTypes = propTypes;\n\nexport default DeleteRepoDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-add-department-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/departments/repo-item.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-delete-member-dialog.js",["4357"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\n\nconst propTypes = {\n  member: PropTypes.object.isRequired,\n  groupID: PropTypes.string,\n  toggle: PropTypes.func.isRequired,\n  onMemberChanged: PropTypes.func.isRequired\n};\n\nclass DeleteMemberDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  deleteMember = () => {\n    const userEmail = this.props.member.email;\n    seafileAPI.sysAdminDeleteGroupMember(this.props.groupID, userEmail).then((res) => {\n      if (res.data.success) {\n        this.props.onMemberChanged();\n        this.props.toggle();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    let tipMessage = gettext('Are you sure you want to delete {placeholder} ?');\n    tipMessage = tipMessage.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.member.name) + '</span>');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Delete Member')}</ModalHeader>\n        <ModalBody>\n          <div dangerouslySetInnerHTML={{__html: tipMessage}}></div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.deleteMember}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nDeleteMemberDialog.propTypes = propTypes;\n\nexport default DeleteMemberDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-add-org-dialog.js",["4358","4359","4360","4361","4362"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Label, Input } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  addOrg: PropTypes.func.isRequired\n};\n\nclass SysAdminAddOrgDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      email: '',\n      password: '',\n      passwordAgain: '',\n      errorMsg: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  checkSubmitBtnActive = () => {\n    const { name, email, password, passwordAgain } = this.state;\n    let btnActive = true;\n    if (name.trim() !='' &&\n      email.trim() != '' &&\n      password.trim() != '' &&\n      passwordAgain.trim() != '') {\n      btnActive = true;\n    } else {\n      btnActive = false;\n    }\n    this.setState({\n      isSubmitBtnActive: btnActive\n    });\n  };\n\n  toggle = () => {\n    this.props.toggleDialog();\n  };\n\n  inputPassword = (e) => {\n    let passwd = e.target.value;\n    this.setState({\n      password: passwd\n    }, this.checkSubmitBtnActive);\n  };\n\n  inputPasswordAgain = (e) => {\n    let passwd = e.target.value;\n    this.setState({\n      passwordAgain: passwd\n    }, this.checkSubmitBtnActive);\n  };\n\n  inputEmail = (e) => {\n    let email = e.target.value;\n    this.setState({\n      email: email\n    }, this.checkSubmitBtnActive);\n  };\n\n  inputName = (e) => {\n    let name = e.target.value;\n    this.setState({\n      name: name\n    }, this.checkSubmitBtnActive);\n  };\n\n  handleSubmit = () => {\n    let { name, email, password, passwordAgain } = this.state;\n    if (password != passwordAgain) {\n      this.setState({errorMsg: gettext('Passwords do not match.')});\n      return;\n    }\n    const data = {\n      orgName: name.trim(),\n      ownerEmail: email.trim(),\n      password: password.trim()\n    };\n    this.props.addOrg(data);\n    this.toggle();\n  };\n\n  render() {\n    const { errorMsg, password, passwordAgain, email, name, isSubmitBtnActive } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Add Organization')}</ModalHeader>\n        <ModalBody>\n          <Form autoComplete=\"off\">\n            <FormGroup>\n              <Label>{gettext('Name')}</Label>\n              <Input value={name} onChange={this.inputName} />\n            </FormGroup>\n            <FormGroup>\n              <Label>\n                {gettext('Owner')}\n                <span className=\"small text-secondary ml-1 fas fa-question-circle\" title={gettext('Owner can use admin panel in an organization, must be a new account.')}></span>\n              </Label>\n              <Input value={email} onChange={this.inputEmail} />\n            </FormGroup>\n            <FormGroup>\n              <Label>{gettext('Password')}</Label>\n              <Input type=\"password\" value={password} onChange={this.inputPassword} />\n            </FormGroup>\n            <FormGroup>\n              <Label>{gettext('Password again')}</Label>\n              <Input type=\"password\" value={passwordAgain} onChange={this.inputPasswordAgain} />\n            </FormGroup>\n          </Form>\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminAddOrgDialog.propTypes = propTypes;\n\nexport default SysAdminAddOrgDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/links/links-nav.js",["4363"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'shareLinks', urlPart:'share-links', text: gettext('Share Links')},\n      {name: 'uploadLinks', urlPart:'upload-links', text: gettext('Upload Links')},\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/import-dingtalk-department-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-set-org-max-user-number-dialog.js",["4364","4365"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Input } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  value: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired,\n  updateValue: PropTypes.func.isRequired\n};\n\nclass SysAdminSetOrgMaxUserNumberDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: this.props.value,\n      isSubmitBtnActive: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  };\n\n  handleInputChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      value: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  };\n\n  handleSubmit = () => {\n    this.props.updateValue(this.state.value.trim());\n    this.toggle();\n  };\n\n  render() {\n    const { value, isSubmitBtnActive } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Set max number of members')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Input\n                type=\"text\"\n                className=\"form-control\"\n                value={value}\n                onKeyDown={this.handleKeyDown}\n                onChange={this.handleInputChange}\n              />\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminSetOrgMaxUserNumberDialog.propTypes = propTypes;\n\nexport default SysAdminSetOrgMaxUserNumberDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/orgs/orgs-content.js",["4366","4367","4368"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport RoleSelector from '../../../components/single-selector';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport UserLink from '../user-link';\nimport toaster from '../../../components/toast';\n\nconst { availableRoles } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({ isItemFreezed: isFreezed });\n  };\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.currentPage - 1);\n  };\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.currentPage + 1);\n  };\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No organizations')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"20%\">{gettext('Name')}</th>\n                <th width=\"20%\">{gettext('Creator')}</th>\n                <th width=\"20%\">{gettext('Role')}</th>\n                <th width=\"15%\">{gettext('Space Used')}</th>\n                <th width=\"20%\">{gettext('Created At')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  updateRole={this.props.updateRole}\n                  deleteOrg={this.props.deleteOrg}\n                  isItemFreezed={this.state.isItemFreezed}\n                  toggleItemFreezed={this.toggleItemFreezed}\n                />);\n              })}\n            </tbody>\n          </table>\n          {this.props.currentPage &&\n          <Paginator\n            currentPage={this.props.currentPage}\n            hasNextPage={this.props.hasNextPage}\n            curPerPage={this.props.curPerPage}\n            resetPerPage={this.props.resetPerPage}\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n          />\n          }\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  getListByPage: PropTypes.func.isRequired,\n  currentPage: PropTypes.number,\n  items: PropTypes.array.isRequired,\n  updateRole: PropTypes.func.isRequired,\n  deleteOrg: PropTypes.func.isRequired,\n  hasNextPage: PropTypes.bool,\n  resetPerPage: PropTypes.func,\n  curPerPage: PropTypes.number,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlighted: false,\n      isDeleteDialogOpen: false,\n      deleteDialogMsg: '',\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({highlighted: true});\n  };\n\n  handleMouseLeave = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({highlighted: false});\n  };\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen}, () => {\n      if (this.state.isDeleteDialogOpen) {\n        seafileAPI.sysAdminGetOrg(this.props.item.org_id).then((res) => {\n          let orgName = '<span class=\"op-target\">' + Utils.HTMLescape(res.data.org_name) + '</span>';\n          let userCount = '<span class=\"op-target\">' + Utils.HTMLescape(res.data.users_count) + '</span>';\n          let repoCount = '<span class=\"op-target\">' + Utils.HTMLescape(res.data.repos_count) + '</span>';\n          let deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?')\n            .replace('{placeholder}', orgName) + '<br/>' +\n            gettext('{userCount} user(s) and {repoCount} libraries of this organization will also be deleted.')\n              .replace('{userCount}', userCount)\n              .replace('{repoCount}', repoCount);\n          this.setState({deleteDialogMsg: deleteDialogMsg});\n        }).catch(error => {\n          let errorMsg = Utils.getErrorMsg(error);\n          toaster.danger(errorMsg);\n        });\n      }\n    });\n  };\n\n  translateRole = (role) => {\n    switch (role) {\n      case 'default':\n        return gettext('Default');\n      case 'guest':\n        return gettext('Guest');\n      default:\n        return role;\n    }\n  };\n\n  updateRole = (roleOption) => {\n    this.props.updateRole(this.props.item.org_id, roleOption.value);\n  };\n\n  deleteOrg = () => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    this.props.deleteOrg(this.props.item.org_id);\n  };\n\n  render() {\n    const { item } = this.props;\n    const { highlighted, isDeleteDialogOpen, deleteDialogMsg } = this.state;\n\n    const { role: curRole } = item;\n    this.roleOptions = availableRoles.map(item => {\n      return {\n        value: item,\n        text: this.translateRole(item),\n        isSelected: item == curRole\n      };\n    });\n    const currentSelectedOption = this.roleOptions.filter(item => item.isSelected)[0];\n\n    return (\n      <Fragment>\n        <tr className={highlighted ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><Link to={`${siteRoot}sys/organizations/${item.org_id}/info/`}>{item.org_name}</Link></td>\n          <td>\n            <UserLink email={item.creator_email} name={item.creator_name} />\n          </td>\n          <td>\n            <RoleSelector\n              isDropdownToggleShown={highlighted}\n              currentSelectedOption={currentSelectedOption}\n              options={this.roleOptions}\n              selectOption={this.updateRole}\n              toggleItemFreezed={this.props.toggleItemFreezed}\n            />\n          </td>\n          <td>{`${Utils.bytesToSize(item.quota_usage)} / ${item.quota > 0 ? Utils.bytesToSize(item.quota) : '--'}`}</td>\n          <td>{moment(item.ctime).format('YYYY-MM-DD HH:mm:ss')}</td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-delete ${highlighted ? '' : 'invisible'}`} title={gettext('Delete')} onClick={this.toggleDeleteDialog}></a>\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Organization')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteOrg}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  updateRole: PropTypes.func.isRequired,\n  deleteOrg: PropTypes.func.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired\n};\n\nexport default Content;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/import-work-weixin-department-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/departments/department.js",["4369","4370","4371","4372"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport ModalPortal from '../../../components/modal-portal';\nimport AddDepartmentDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-department-dialog';\nimport RenameDepartmentDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-rename-department-dialog';\nimport AddMemberDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-member-dialog';\nimport AddRepoDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-repo-dialog';\nimport { siteRoot, gettext, lang } from '../../../utils/constants';\n\nimport '../../../css/org-department-item.css';\n\nmoment.locale(lang);\n\nconst DepartmentDetailPropTypes = {\n  groupID: PropTypes.string,\n  currentItem: PropTypes.string.isRequired,\n  onAddNewDepartment: PropTypes.func,\n  onAddNewMembers: PropTypes.func,\n  onAddNewRepo: PropTypes.func,\n  children: PropTypes.object\n};\n\nclass Department extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupName: '',\n      ancestorGroups: [],\n      isShowAddDepartmentDialog: false,\n      isShowAddMemberDialog: false,\n      isShowRenameDepartmentDialog: false,\n      isShowAddRepoDialog: false\n    };\n\n    this.navItems = [\n      {name: 'subDepartments', urlPart: '/', text: gettext('Sub-departments')},\n      {name: 'members', urlPart: '/members/', text: gettext('Members')},\n      {name: 'repos', urlPart: '/libraries/', text: gettext('Libraries')}\n    ];\n  }\n\n  componentDidMount() {\n    const groupID = this.props.groupID;\n    this.getDepartmentInfo(groupID);\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (this.props.groupID !== nextProps.groupID) {\n      this.getDepartmentInfo(nextProps.groupID);\n    }\n  }\n\n  getDepartmentInfo = (groupID) => {\n    seafileAPI.sysAdminGetDepartmentInfo(groupID, true).then(res => {\n      this.setState({\n        ancestorGroups: res.data.ancestor_groups,\n        groupName: res.data.name,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onDepartmentNameChanged = (dept) => {\n    this.setState({\n      groupName: dept.name\n    });\n  };\n\n  toggleRenameDepartmentDialog = () => {\n    this.setState({ isShowRenameDepartmentDialog: !this.state.isShowRenameDepartmentDialog });\n  };\n\n  toggleAddRepoDialog = () => {\n    this.setState({ isShowAddRepoDialog: !this.state.isShowAddRepoDialog });\n  };\n\n  toggleAddMemberDialog = () => {\n    this.setState({ isShowAddMemberDialog: !this.state.isShowAddMemberDialog });\n  };\n\n  toggleAddDepartmentDialog = () => {\n    this.setState({ isShowAddDepartmentDialog: !this.state.isShowAddDepartmentDialog});\n  };\n\n  render() {\n    const { groupID, currentItem } = this.props;\n    const { groupName } = this.state;\n\n    const topBtn = 'btn btn-secondary operation-item';\n    const topbarChildren = (\n      <Fragment>\n        {groupID &&\n          <Fragment>\n            <button className={topBtn} title={gettext('Rename Department')} onClick={this.toggleRenameDepartmentDialog}>{gettext('Rename Department')}</button>\n            {currentItem == 'subDepartments' && <button className={topBtn} title={gettext('New Sub-department')} onClick={this.toggleAddDepartmentDialog}>{gettext('New Sub-department')}</button>}\n            {currentItem == 'members' && <button className={topBtn} title={gettext('Add Member')} onClick={this.toggleAddMemberDialog}>{gettext('Add Member')}</button>}\n            {currentItem == 'repos' && <button className={topBtn} onClick={this.toggleAddRepoDialog} title={gettext('New Library')}>{gettext('New Library')}</button>}\n          </Fragment>\n        }\n        {this.state.isShowRenameDepartmentDialog && (\n          <ModalPortal>\n            <RenameDepartmentDialog\n              groupID={groupID}\n              name={groupName}\n              toggle={this.toggleRenameDepartmentDialog}\n              onDepartmentNameChanged={this.onDepartmentNameChanged}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowAddMemberDialog && (\n          <ModalPortal>\n            <AddMemberDialog\n              toggle={this.toggleAddMemberDialog}\n              onAddNewMembers={this.props.onAddNewMembers}\n              groupID={groupID}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowAddRepoDialog && (\n          <ModalPortal>\n            <AddRepoDialog\n              toggle={this.toggleAddRepoDialog}\n              onAddNewRepo={this.props.onAddNewRepo}\n              groupID={groupID}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowAddDepartmentDialog && (\n          <ModalPortal>\n            <AddDepartmentDialog\n              onAddNewDepartment={this.props.onAddNewDepartment}\n              parentGroupID={groupID}\n              toggle={this.toggleAddDepartmentDialog}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          {topbarChildren}\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row h-100\">\n          <div className=\"cur-view-container o-auto\">\n            <div className=\"cur-view-path\">\n              <div className=\"fleft\">\n                <h3 className=\"sf-heading\">\n                  {groupID ?\n                    <Link to={siteRoot + 'sys/departments/'}>{gettext('Departments')}</Link>\n                    : <span>{gettext('Departments')}</span>\n                  }\n                  {this.state.ancestorGroups.map(ancestor => {\n                    let newHref = siteRoot + 'sys/departments/' + ancestor.id + '/';\n                    return <span key={ancestor.id}>{' / '}<Link to={newHref}>{ancestor.name}</Link></span>;\n                  })}\n                  {groupID && <span>{' / '}{groupName}</span>}\n                </h3>\n              </div>\n            </div>\n\n            <ul className=\"nav border-bottom mx-4\">\n              {this.navItems.map((item, index) => {\n                return (\n                  <li className=\"nav-item mr-2\" key={index}>\n                    <Link to={`${siteRoot}sys/departments/${groupID}${item.urlPart}`} className={`nav-link ${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n                  </li>\n                );\n              })}\n            </ul>\n            {this.props.children}\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nDepartment.propTypes = DepartmentDetailPropTypes;\n\nexport default Department;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/orgs/org-nav.js",["4373"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  orgID: PropTypes.string,\n  orgName: PropTypes.string,\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'info', urlPart: 'info', text: gettext('Info')},\n      {name: 'users', urlPart: 'users', text: gettext('Members')},\n      {name: 'groups', urlPart: 'groups', text: gettext('Groups')},\n      {name: 'repos', urlPart: 'libraries', text: gettext('Libraries')},\n      //{name: 'traffic', urlPart: 'traffic', text: gettext('traffic')},\n      //{name: 'settings', urlPart: 'settings', text: gettext('Settings')}\n    ];\n  }\n\n  render() {\n    const { currentItem, orgID, orgName } = this.props;\n    return (\n      <div>\n        <div className=\"cur-view-path\">\n          <h3 className=\"sf-heading\"><Link to={`${siteRoot}sys/organizations/`}>{gettext('Organizations')}</Link> / {orgName}</h3>\n        </div>\n        <ul className=\"nav border-bottom mx-4\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item mr-2\" key={index}>\n                <Link to={`${siteRoot}sys/organizations/${orgID}/${item.urlPart}/`} className={`nav-link ${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-set-org-name-dialog.js",["4374","4375"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Input } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  name: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired,\n  updateName: PropTypes.func.isRequired\n};\n\nclass SysAdminSetOrgNameDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: this.props.name,\n      isSubmitBtnActive: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  };\n\n  handleInputChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      name: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  };\n\n  handleSubmit = () => {\n    this.props.updateName(this.state.name.trim());\n    this.toggle();\n  };\n\n  render() {\n    const { name, isSubmitBtnActive } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Set Name')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Input\n                type=\"text\"\n                value={name}\n                onKeyDown={this.handleKeyDown}\n                onChange={this.handleInputChange}\n              />\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminSetOrgNameDialog.propTypes = propTypes;\n\nexport default SysAdminSetOrgNameDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/logs-page/file-access-item-menu.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-add-institution-dialog.js",["4376"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Input } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  addInstitution: PropTypes.func.isRequired\n};\n\nclass SysAdminAddInstitutionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  handleChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      value: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  };\n\n  handleSubmit = () => {\n    this.toggle();\n    this.props.addInstitution(this.state.value.trim());\n  };\n\n  toggle = () => {\n    this.props.toggle();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Add institution')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <p>{gettext('Name')}</p>\n            <FormGroup>\n              <Input\n                value={this.state.value}\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminAddInstitutionDialog.propTypes = propTypes;\n\nexport default SysAdminAddInstitutionDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/logs-page/logs-nav.js",["4377"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'loginLogs', urlPart:'logs/login', text: gettext('Login')},\n      {name: 'fileAccessLogs', urlPart:'logs/file-access', text: gettext('File Access')},\n      {name: 'fileUpdateLogs', urlPart:'logs/file-update', text: gettext('File Update')},\n      {name: 'sharePermissionLogs', urlPart:'logs/share-permission', text: gettext('Permission')},\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/institutions/institution-nav.js",["4378"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  institutionID: PropTypes.string,\n  institutionName: PropTypes.string.isRequired,\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'info', urlPart: 'info', text: gettext('Info')},\n      {name: 'members', urlPart: 'members', text: gettext('Members')},\n      {name: 'admins', urlPart: 'admins', text: gettext('Admins')},\n    ];\n  }\n\n  render() {\n    const { currentItem, institutionID, institutionName } = this.props;\n    return (\n      <div>\n        <div className=\"cur-view-path\">\n          <h3 className=\"sf-heading\"><Link to={`${siteRoot}sys/institutions/`}>{gettext('Institutions')}</Link> / {institutionName}</h3>\n        </div>\n        <ul className=\"nav border-bottom mx-4\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item mr-2\" key={index}>\n                <Link to={`${siteRoot}sys/institutions/${institutionID}/${item.urlPart}/`} className={`nav-link ${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-add-institution-member-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-logs-export-excel-dialog.js",["4379"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport moment from 'moment';\n\nclass LogsExportExcelDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      startDateStr: '',\n      endDateStr: '',\n      errMsg: '',\n    };\n  }\n\n  downloadExcel = () => {\n    if (!this.isValidDateStr()) {\n      return;\n    }\n    let { startDateStr, endDateStr } = this.state;\n    let url = siteRoot;\n\n    switch (this.props.logType) {\n      case 'login':\n        url += 'sys/loginadmin/export-excel/';\n        break;\n      case 'fileAccess':\n        url += 'sys/log/fileaudit/export-excel/';\n        break;\n      case 'fileUpdate':\n        url += 'sys/log/fileupdate/export-excel/';\n        break;\n      case 'sharePermission':\n        url += 'sys/log/permaudit/export-excel/';\n        break;\n    }\n    location.href = url + '?start=' + startDateStr + '&end=' + endDateStr;\n    this.props.toggle();\n  };\n\n  isValidDateStr = () => {\n    let { startDateStr, endDateStr } = this.state;\n    if (moment(startDateStr, 'YYYY-MM-DD', true).isValid() &&\n      moment(endDateStr, 'YYYY-MM-DD', true).isValid() &&\n      moment(startDateStr).isBefore(endDateStr)\n    ) {\n      return true;\n    } else {\n      this.setState({\n        errMsg: gettext('Date Invalid.')\n      });\n      return false;\n    }\n  };\n\n  handleStartChange = (e) => {\n    const startDateStr = e.target.value.trim();\n    this.setState({\n      startDateStr: startDateStr,\n      errMsg: ''\n    });\n  };\n\n  handleEndChange = (e) => {\n    const endDateStr = e.target.value.trim();\n    this.setState({\n      endDateStr: endDateStr,\n      errMsg: '',\n    });\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Choose date')}</ModalHeader>\n        <ModalBody>\n          <FormGroup>\n            <Label>{gettext('Start date')}</Label>\n            <Input\n              value={this.state.startDateStr}\n              onChange={this.handleStartChange}\n              placeholder='yyyy-mm-dd'\n              autoFocus={true}\n            />\n          </FormGroup>\n          <FormGroup>\n            <Label>{gettext('End date')}</Label>\n            <Input\n              value={this.state.endDateStr}\n              onChange={this.handleEndChange}\n              placeholder='yyyy-mm-dd'\n            />\n          </FormGroup>\n          {this.state.errMsg &&\n            <Alert className=\"mt-2\" color=\"danger\">\n              {gettext(this.state.errMsg)}\n            </Alert>\n          }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.downloadExcel}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  logType: PropTypes.string.isRequired,\n};\n\nLogsExportExcelDialog.propTypes = propTypes;\n\nexport default LogsExportExcelDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/logs-page/file-access-toggle-filter.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/work-weixin/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/dingtalk/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/web-settings/section.js",["4380"],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/web-settings/input-item.js",["4381","4382","4383"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Input, Button } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport SettingItemBase from './setting-item-base';\n\nconst propTypes = {\n  inputType: PropTypes.string,\n  saveSetting: PropTypes.func.isRequired,\n  keyText: PropTypes.string.isRequired,\n  value: PropTypes.oneOfType([PropTypes.string,PropTypes.number]),\n  helpTip: PropTypes.string.isRequired,\n  displayName: PropTypes.string.isRequired\n};\n\nclass WebSettingInput extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isBtnsShown: false,\n      value: this.props.value\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    this.setState({value: nextProps.value});\n  }\n\n  toggleBtns = () => {\n    this.setState({isBtnsShown: !this.state.isBtnsShown});\n  };\n\n  hideBtns = (e) => {\n    if (!this.state.isBtnsShown) {\n      return;\n    }\n    if (this.props.value != this.state.value) {\n      this.setState({value: this.props.value});\n    }\n    this.toggleBtns();\n  };\n\n  onInputChange = (e) => {\n    this.setState({ value: e.target.value });\n  };\n\n  onSubmit = (e) => {\n    const value = this.state.value.trim();\n    if (value != this.props.value) {\n      this.props.saveSetting(this.props.keyText, value);\n    }\n    this.toggleBtns();\n  };\n\n  render() {\n    const { isBtnsShown, value } = this.state;\n    const { helpTip, displayName, inputType } = this.props;\n    return (\n      <SettingItemBase\n        displayName={displayName}\n        helpTip={helpTip}\n        mainContent={\n          <Input type={inputType || 'text'} className={inputType == 'textarea' ? 'web-setting-textarea' : ''} onChange={this.onInputChange} onFocus={this.toggleBtns} onBlur={this.hideBtns} value={value} />\n        }\n        extraContent={\n          isBtnsShown ?\n            <Fragment>\n              <Button className=\"sf2-icon-tick web-setting-icon-btn web-setting-icon-btn-submit\" onMouseDown={this.onSubmit} title={gettext('Submit')}></Button>\n              <Button className=\"ml-1 sf2-icon-x2 web-setting-icon-btn web-setting-icon-btn-cancel\" title={gettext('Cancel')}></Button>\n            </Fragment> : null\n        }\n      />\n    );\n  }\n}\n\nWebSettingInput.propTypes = propTypes;\n\nexport default WebSettingInput;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/virus-scan/nav.js",["4384"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'all', urlPart: 'all', text: gettext('All')},\n      {name: 'unhandled', urlPart: 'unhandled', text: gettext('Unhandled')}\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/virus-files/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/web-settings/file-item.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/admin-logs/logs-nav.js",["4385"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass LogsNav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'adminOperationLogs', urlPart:'admin-logs/operation', text: gettext('Admin Operation Logs')},\n      {name: 'adminLoginLogs', urlPart:'admin-logs/login', text: gettext('Admin Login Logs')},\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nLogsNav.propTypes = propTypes;\n\nexport default LogsNav;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-add-or-update-term-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/terms-and-conditions/content.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/services/footer-upgrade.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-add-sys-notification-dialog.js",["4386"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Input } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  addNotification: PropTypes.func.isRequired\n};\n\nclass SysAdminAddSysNotificationDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  handleChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      value: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  };\n\n  handleSubmit = () => {\n    this.toggle();\n    this.props.addNotification(this.state.value.trim());\n  };\n\n  toggle = () => {\n    this.props.toggle();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Add new notification')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Input\n                type=\"textarea\"\n                value={this.state.value}\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminAddSysNotificationDialog.propTypes = propTypes;\n\nexport default SysAdminAddSysNotificationDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/list-taggedfiles-dialog.js",["4387","4388","4389"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport moment from 'moment';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  currentTag: PropTypes.object.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  updateUsedRepoTags: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass ListTaggedFilesDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      taggedFileList: [],\n    };\n  }\n\n  onFileTagChanged = (TaggedFile) => {\n    const path = TaggedFile.parent_path;\n    const dirent = {name: TaggedFile.filename};\n    let direntPath = path === '/' ? path + TaggedFile.filename : path + '/' + TaggedFile.filename;\n    this.props.onFileTagChanged(dirent, direntPath);\n  };\n\n  onDeleteTaggedFile = (taggedFile) => {\n    let repoID = this.props.repoID;\n    let fileTagID = taggedFile.file_tag_id;\n    seafileAPI.deleteFileTag(repoID, fileTagID).then(res => {\n      this.getTaggedFiles();\n      this.props.updateUsedRepoTags();\n      if ((this.props.onFileTagChanged) && !taggedFile.file_deleted) this.onFileTagChanged(taggedFile);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  componentDidMount() {\n    this.getTaggedFiles();\n  }\n\n  getTaggedFiles = () => {\n    let { repoID, currentTag, shareLinkToken } = this.props;\n    let request = shareLinkToken ?\n      seafileAPI.getShareLinkTaggedFiles(shareLinkToken, currentTag.id) :\n      seafileAPI.listTaggedFiles(repoID, currentTag.id);\n    request.then(res => {\n      let taggedFileList = [];\n      res.data.tagged_files !== undefined &&\n      res.data.tagged_files.forEach(file => {\n        let taggedFile = file;\n        taggedFileList.push(taggedFile);\n      });\n      this.setState({\n        taggedFileList: taggedFileList,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    let taggedFileList = this.state.taggedFileList;\n    return (\n      <Modal isOpen={true} style={{maxWidth: '678px'}}>\n        <ModalHeader toggle={this.props.onClose}>{gettext('Tagged Files')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='50%' className=\"ellipsis\">{gettext('Name')}</th>\n                <th width='20%'>{gettext('Size')}</th>\n                <th width='22%'>{gettext('Last Update')}</th>\n                <th width='8%'></th>\n              </tr>\n            </thead>\n            <tbody>\n              {taggedFileList.map((taggedFile, index) => {\n                return (\n                  <TaggedFile\n                    key={index}\n                    repoID={this.props.repoID}\n                    taggedFile={taggedFile}\n                    onDeleteTaggedFile={this.onDeleteTaggedFile}\n                    shareLinkToken={this.props.shareLinkToken}\n                    enableFileDownload={this.props.enableFileDownload}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListTaggedFilesDialog.propTypes = propTypes;\n\nexport default ListTaggedFilesDialog;\n\nconst TaggedFilePropTypes = {\n  repoID: PropTypes.string.isRequired,\n  taggedFile: PropTypes.object,\n  onDeleteTaggedFile: PropTypes.func.isRequired,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass TaggedFile extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = ({\n      active: false,\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      active: true\n    });\n  };\n\n  onMouseLeave = () => {\n    this.setState({\n      active: false\n    });\n  };\n\n  deleteFile = (e) => {\n    e.preventDefault();\n    this.props.onDeleteTaggedFile(this.props.taggedFile);\n  };\n\n  render() {\n    const { taggedFile, shareLinkToken, enableFileDownload } = this.props;\n\n    let path = taggedFile.parent_path ? Utils.joinPath(taggedFile.parent_path, taggedFile.filename) : '';\n    let href = shareLinkToken ?\n      siteRoot + 'd/' + shareLinkToken + '/files/?p=' + Utils.encodePath(path) :\n      siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(path);\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        {taggedFile.file_deleted ?\n          <Fragment>\n            <td colSpan='3' className=\"name\">{taggedFile.filename}{' '}\n              <span style={{color:'red'}}>{gettext('deleted')}</span>\n            </td>\n          </Fragment>\n          :\n          <Fragment>\n            <td><a href={href} target='_blank' className=\"d-inline-block w-100 ellipsis\" title={taggedFile.filename} rel=\"noreferrer\">{taggedFile.filename}</a></td>\n            <td>{Utils.bytesToSize(taggedFile.size)}</td>\n            <td>{moment.unix(taggedFile.mtime).fromNow()}</td>\n          </Fragment>\n        }\n        <td>\n          {!shareLinkToken &&\n            <a href=\"#\" role=\"button\" aria-label={gettext('Delete')} title={gettext('Delete')} className={`action-icon sf2-icon-x3${this.state.active ? '' : ' invisible'}`} onClick={this.deleteFile}></a>\n          }\n          {(shareLinkToken && enableFileDownload) &&\n            <a className={`action-icon sf2-icon-download${this.state.active ? '' : ' invisible'}`} href={`${href}&dl=1`} title={gettext('Download')} aria-label={gettext('Download')}></a>\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nTaggedFile.propTypes = TaggedFilePropTypes;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/shared-link-file-uploader/upload-progress-dialog.js",["4390"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport UploadListItem from './upload-list-item';\nimport ForbidUploadListItem from './forbid-upload-list-item';\n\nconst propTypes = {\n  uploadBitrate: PropTypes.number.isRequired,\n  totalProgress: PropTypes.number.isRequired,\n  retryFileList: PropTypes.array.isRequired,\n  uploadFileList: PropTypes.array.isRequired,\n  forbidUploadFileList: PropTypes.array.isRequired,\n  onCloseUploadDialog: PropTypes.func.isRequired,\n  onCancelAllUploading: PropTypes.func.isRequired,\n  onUploadCancel: PropTypes.func.isRequired,\n  onUploadRetry: PropTypes.func.isRequired,\n  onUploadRetryAll: PropTypes.func.isRequired,\n  isUploading : PropTypes.bool.isRequired\n};\n\nclass UploadProgressDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMinimized: false\n    };\n  }\n\n  onCancelAllUploading = () => {\n    this.props.onCancelAllUploading();\n  };\n\n  onMinimizeUpload = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({isMinimized: !this.state.isMinimized});\n  };\n\n  onCloseUpload = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.onCloseUploadDialog();\n  };\n\n  render() {\n    const { totalProgress, retryFileList, uploadBitrate, uploadFileList, forbidUploadFileList, isUploading } = this.props;\n\n    const filesUploadedMsg = gettext('{uploaded_files_num}/{all_files_num} Files')\n      .replace('{uploaded_files_num}', uploadFileList.filter(file => file.isSaved).length)\n      .replace('{all_files_num}', uploadFileList.length);\n\n    let filesFailedMsg;\n    if (!isUploading) {\n      const failedNum = uploadFileList.filter(file => file.error).length + forbidUploadFileList.length;\n      if (failedNum > 0) {\n        filesFailedMsg = gettext('{failed_files_num} file(s) failed to upload')\n          .replace('{failed_files_num}', failedNum);\n      }\n    }\n\n    return (\n      <div className=\"uploader-list-view mw-100\" style={{height: this.state.isMinimized ? document.querySelector('.uploader-list-header').offsetHeight : '20rem'}}>\n        <div className=\"uploader-list-header flex-shrink-0\">\n          <div>\n            {isUploading ? (\n              <>\n                <span>{gettext('File Uploading...')}</span>\n                <span className=\"ml-2\">{`${totalProgress}% (${Utils.formatBitRate(uploadBitrate)})`}</span>\n                <div className=\"progress\">\n                  <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${totalProgress}%`}} aria-valuenow={totalProgress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                </div>\n              </>\n            ) : (\n              <>\n                {filesFailedMsg ?\n                  <p className=\"m-0 error\">{filesFailedMsg}</p> :\n                  <p className=\"m-0\">{gettext('All files uploaded')}</p>\n                }\n              </>\n            )}\n          </div>\n          <div className=\"upload-dialog-op-container\">\n            <span className=\"sf2-icon-minus upload-dialog-op\" onClick={this.onMinimizeUpload}></span>\n            {!isUploading && <span className=\"sf2-icon-x1 upload-dialog-op\" onClick={this.onCloseUpload}></span>}\n          </div>\n        </div>\n        <div className=\"uploader-list-content\">\n          <div className=\"d-flex justify-content-between align-items-center border-bottom\">\n            {uploadFileList.length > 0 && <span>{filesUploadedMsg}</span>}\n            <div className=\"ml-auto\">\n              <button\n                className=\"btn btn-lg border-0 background-transparent px-0\"\n                onClick={this.props.onUploadRetryAll}\n                disabled={retryFileList.length == 0}\n              >\n                {gettext('Retry All')}\n              </button>\n              <button\n                className=\"btn btn-lg border-0 background-transparent px-0 ml-3\"\n                onClick={this.props.onCancelAllUploading}\n                disabled={!isUploading}\n              >\n                {gettext('Cancel All')}\n              </button>\n            </div>\n          </div>\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr>\n                <th width=\"40%\">{gettext('name')}</th>\n                <th width=\"15%\">{gettext('size')}</th>\n                <th width=\"30%\">{gettext('progress')}</th>\n                <th width=\"15%\">{gettext('state')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                this.props.forbidUploadFileList.map((file, index) => {\n                  return (<ForbidUploadListItem key={index} file={file} />);\n                })\n              }\n              {\n                this.props.uploadFileList.map((resumableFile, index) => {\n                  return (\n                    <UploadListItem\n                      key={index}\n                      resumableFile={resumableFile}\n                      onUploadCancel={this.props.onUploadCancel}\n                      onUploadRetry={this.props.onUploadRetry}\n                    />\n                  );\n                })\n              }\n            </tbody>\n          </table>\n        </div>\n      </div>\n    );\n  }\n}\n\nUploadProgressDialog.propTypes = propTypes;\n\nexport default UploadProgressDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/web-settings/checkbox-item.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/url-decorator.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/logout.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/insert-file-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/add-abuse-report-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/save-shared-file-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/search/ai-search.js",["4391","4392","4393"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport isHotkey from 'is-hotkey';\nimport classnames from 'classnames';\nimport MediaQuery from 'react-responsive';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport Icon from '../icon';\nimport { gettext, siteRoot, username } from '../../utils/constants';\nimport SearchResultItem from './search-result-item';\nimport { Utils } from '../../utils/utils';\nimport { isMac } from '../../utils/extra-attributes';\nimport toaster from '../toast';\nimport Switch from '../common/switch';\nimport { SEARCH_DELAY_TIME, getValueLength } from './constant';\nimport AISearchAsk from './ai-search-ask';\nimport AISearchRobot from './ai-search-widgets/ai-search-robot';\n\nconst INDEX_STATE = {\n  RUNNING: 'running',\n  UNCREATED: 'uncreated',\n  FINISHED: 'finished'\n};\n\nconst SEARCH_MODE = {\n  QA: 'question-answering',\n  COMBINED: 'combined-search',\n};\n\nconst PER_PAGE = 10;\nconst controlKey = isMac() ? '' : 'Ctrl';\n\nexport default class AISearch extends Component {\n\n  static propTypes = {\n    repoID: PropTypes.string,\n    placeholder: PropTypes.string,\n    onSearchedClick: PropTypes.func.isRequired,\n    repoName: PropTypes.string,\n    currentRepoInfo: PropTypes.object,\n  };\n\n  constructor(props) {\n    super(props);\n    this.baseSearchPageURL = `${siteRoot}search/`;\n    this.state = {\n      width: 'default',\n      value: '',\n      resultItems: [],\n      highlightIndex: 0,\n      page: 0,\n      isLoading: false,\n      hasMore: true,\n      isMaskShow: false,\n      showRecent: true,\n      isResultGetted: false,\n      isCloseShow: false,\n      isSettingsShown: false,\n      isSearchInputShow: false, // for mobile\n      searchPageUrl: this.baseSearchPageURL,\n      indexState: '',\n      searchMode: SEARCH_MODE.COMBINED,\n    };\n    this.inputValue = '';\n    this.highlightRef = null;\n    this.source = null; // used to cancel request;\n    this.inputRef = React.createRef();\n    this.searchContainer = React.createRef();\n    this.searchResultListRef = React.createRef();\n    this.indexStateTimer = null;\n    this.timer = null;\n    this.isChineseInput = false;\n    this.isRepoOwner = props.currentRepoInfo.owner_email === username;\n    this.isAdmin = props.currentRepoInfo.is_admin;\n  }\n\n  componentDidMount() {\n    document.addEventListener('keydown', this.onDocumentKeydown);\n    document.addEventListener('compositionstart', this.onCompositionStart);\n    document.addEventListener('compositionend', this.onCompositionEnd);\n    document.addEventListener('click', this.handleOutsideClick);\n    this.queryLibraryIndexState();\n  }\n\n  queryLibraryIndexState() {\n    seafileAPI.queryLibraryIndexState(this.props.repoID).then(res => {\n      const { state: indexState, task_id: taskId } = res.data;\n      this.setState({ indexState }, () => {\n        if (indexState === INDEX_STATE.RUNNING) {\n          this.queryIndexTaskStatus(taskId);\n        }\n      });\n    }).catch(error => {\n      this.setState({ indexState: INDEX_STATE.UNCREATED });\n    });\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.onDocumentKeydown);\n    document.removeEventListener('compositionstart', this.onCompositionStart);\n    document.removeEventListener('compositionend', this.onCompositionEnd);\n    document.removeEventListener('click', this.handleOutsideClick);\n    this.isChineseInput = false;\n    this.clearTimer();\n    if (this.indexStateTimer) {\n      clearInterval(this.indexStateTimer);\n      this.indexStateTimer = null;\n    }\n  }\n\n  clearTimer = () => {\n    if (this.timer) {\n      clearTimeout(this.timer);\n      this.timer = null;\n    }\n  };\n\n  onCompositionStart = () => {\n    this.isChineseInput = true;\n    this.clearTimer();\n  };\n\n  onCompositionEnd = () => {\n    this.isChineseInput = false;\n    // chromecompositionstart -> onChange -> compositionend\n    // not chromecompositionstart -> compositionend -> onChange\n    // The onChange event will setState and change input value, then setTimeout to initiate the search\n    this.clearTimer();\n    this.timer = setTimeout(() => {\n      this.onSearch();\n    }, SEARCH_DELAY_TIME);\n  };\n\n  onDocumentKeydown = (e) => {\n    if (isHotkey('mod+f')(e)) {\n      e.preventDefault();\n      this.onFocusHandler();\n      if (this.inputRef && this.inputRef.current) {\n        this.inputRef.current.focus();\n      }\n    } else if (isHotkey('esc', e)) {\n      e.preventDefault();\n      this.inputRef && this.inputRef.current && this.inputRef.current.blur();\n      this.resetToDefault();\n    } else if (isHotkey('enter', e)) {\n      this.onEnter(e);\n    } else if (isHotkey('up', e)) {\n      this.onUp(e);\n    } else if (isHotkey('down', e)) {\n      this.onDown(e);\n    }\n  };\n\n  onFocusHandler = () => {\n    this.setState({ width: '570px', isMaskShow: true, isCloseShow: true });\n  };\n\n  onCloseHandler = () => {\n    this.resetToDefault();\n  };\n\n  onUp = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const { highlightIndex } = this.state;\n    if (highlightIndex > 0) {\n      this.setState({ highlightIndex: highlightIndex - 1 }, () => {\n        if (this.highlightRef) {\n          const { top, height } = this.highlightRef.getBoundingClientRect();\n          if (top - height < 0) {\n            this.searchContainer.current.scrollTop -= height;\n          }\n        }\n      });\n    }\n  };\n\n  onDown = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const { highlightIndex, resultItems } = this.state;\n    if (highlightIndex < resultItems.length - 1) {\n      this.setState({ highlightIndex: highlightIndex + 1 }, () => {\n        if (this.highlightRef) {\n          const { top, height } = this.highlightRef.getBoundingClientRect();\n          const outerHeight = 300;\n          if (top > outerHeight) {\n            this.searchContainer.current.scrollTop += height;\n          }\n        }\n      });\n    }\n  };\n\n  onEnter = (e) => {\n    e.preventDefault();\n    let item = this.state.resultItems[this.state.highlightIndex];\n    if (item) {\n      if (document.activeElement) {\n        document.activeElement.blur();\n      }\n      this.onItemClickHandler(item);\n    }\n  };\n\n  onItemClickHandler = (item) => {\n    this.resetToDefault();\n    this.keepVisitedItem(item);\n    this.props.onSearchedClick(item);\n  };\n\n  keepVisitedItem = (targetItem) => {\n    const { repoID } = this.props;\n    let targetIndex;\n    let storeKey = 'sfVisitedAISearchItems';\n    if (repoID) {\n      storeKey += repoID;\n    }\n    const items = JSON.parse(localStorage.getItem(storeKey)) || [];\n    for (let i = 0, len = items.length; i < len; i++) {\n      const { repo_id, path } = items[i];\n      const { repo_id: targetRepoID, path: targetPath } = targetItem;\n      if (repo_id == targetRepoID && path == targetPath) {\n        targetIndex = i;\n        break;\n      }\n    }\n    if (targetIndex != undefined) {\n      items.splice(targetIndex, 1);\n    }\n    items.unshift(targetItem);\n    if (items.length > 50) { // keep 50 items at most\n      items.pop();\n    }\n    localStorage.setItem(storeKey, JSON.stringify(items));\n  };\n\n  onChangeHandler = (event) => {\n    if (this.state.showRecent) {\n      this.setState({ showRecent: false });\n    }\n    const newValue = event.target.value;\n    this.setState({ value: newValue }, () => {\n      if (this.inputValue === newValue.trim()) return;\n      this.inputValue = newValue.trim();\n      if (!this.isChineseInput) {\n        this.clearTimer();\n        this.timer = setTimeout(() => {\n          this.onSearch();\n        }, SEARCH_DELAY_TIME);\n      }\n    });\n  };\n\n  onKeydownHandler = (event) => {\n    if (isHotkey('enter', event)) {\n      this.onSearch();\n    }\n  };\n\n  onSearch = () => {\n    const { value } = this.state;\n    const { repoID } = this.props;\n    if (this.inputValue === '' || getValueLength(this.inputValue) < 3) {\n      this.setState({\n        highlightIndex: 0,\n        resultItems: [],\n        isResultGetted: false\n      });\n      return;\n    }\n    const queryData = {\n      q: value,\n      search_repo: repoID ? repoID : 'all',\n      search_ftypes: 'all',\n    };\n    this.getSearchResult(queryData);\n  };\n\n  getSearchResult = (queryData) => {\n    if (this.source) {\n      this.source.cancel('prev request is cancelled');\n    }\n    this.setState({\n      isResultGetted: false,\n      resultItems: [],\n      highlightIndex: 0,\n    });\n    this.source = seafileAPI.getSource();\n    this.sendRequest(queryData, this.source.token, 1);\n  };\n\n  sendRequest = (queryData, cancelToken, page) => {\n    this.queryData = queryData;\n    this.updateSearchPageURL(queryData);\n    queryData['per_page'] = PER_PAGE;\n    queryData['page'] = page;\n    this.onAiSearch(queryData, cancelToken, page);\n  };\n\n  onAiSearch = (queryData, cancelToken, page) => {\n    let results = [];\n    seafileAPI.aiSearchFiles(queryData, cancelToken).then(res => {\n      results = [...results, ...this.formatResultItems(res.data.results)];\n      this.setState({\n        resultItems: results,\n        isResultGetted: true,\n        isLoading: false,\n        page: page + 1,\n        hasMore: false,\n      });\n    }).catch(error => {\n      /* eslint-disable */\n      console.log(error);\n      this.setState({ isLoading: false });\n    });\n  };\n\n  onResultListScroll = (e) => {\n    // Load less than 100 results\n    if (!this.state.hasMore || this.state.isLoading || this.state.resultItems.length > 100) {\n      return;\n    }\n    const listPadding = 20;\n    if (e.target.scrollTop + e.target.clientHeight + listPadding > this.searchResultListRef.current.clientHeight - 10) {\n      this.setState({isLoading: true}, () => {\n        this.source = seafileAPI.getSource();\n        this.sendRequest(this.queryData, this.source.token, this.state.page);\n      });\n    }\n  };\n\n  updateSearchPageURL(queryData) {\n    let params = '';\n    for (let key in queryData) {\n      params += key + '=' + encodeURIComponent(queryData[key]) + '&';\n    }\n    this.setState({searchPageUrl: `${this.baseSearchPageURL}?${params.substring(0, params.length - 1)}`});\n  }\n\n  formatResultItems(data) {\n    let items = [];\n    for (let i = 0; i < data.length; i++) {\n      items[i] = {};\n      let name = data[i].is_dir ? data[i].name : data[i].fullpath.split('/').pop();\n      items[i]['index'] = [i];\n      items[i]['name'] = name;\n      items[i]['path'] = data[i].fullpath;\n      items[i]['repo_id'] = data[i].repo_id;\n      items[i]['repo_name'] = data[i].repo_name;\n      items[i]['is_dir'] = data[i].is_dir;\n      items[i]['content'] = data[i].content;\n      items[i]['link_content'] = decodeURI(data[i].fullpath).substring(1);\n    }\n    return items;\n  }\n\n  resetToDefault() {\n    this.inputValue = '';\n    this.setState({\n      width: '',\n      value: '',\n      isMaskShow: false,\n      isCloseShow: false,\n      isSettingsShown: false,\n      isResultGetted: false,\n      resultItems: [],\n      highlightIndex: 0,\n      isSearchInputShow: false,\n      showRecent: true,\n    });\n  }\n\n  openAsk = () => {\n    this.clearTimer();\n    this.setState({ searchMode: SEARCH_MODE.QA });\n  }\n\n  closeAsk = () => {\n    this.clearTimer();\n    this.setState({ searchMode: SEARCH_MODE.COMBINED });\n  }\n\n  renderVisitedItems = (items) => {\n    const { highlightIndex } = this.state;\n    const results = (\n      <>\n        <h4 className=\"visited-search-results-title\">{gettext('Search results visited recently')}</h4>\n        <ul className=\"search-result-list\" ref={this.searchResultListRef}>\n          {items.map((item, index) => {\n            const isHighlight = index === highlightIndex;\n            return (\n              <SearchResultItem\n              key={index}\n              item={item}\n              onItemClickHandler={this.onItemClickHandler}\n              isHighlight={isHighlight}\n              setRef={isHighlight ? (ref) => {this.highlightRef = ref;} : () => {}}\n              />\n            );\n          })}\n        </ul>\n      </>\n    );\n\n    return (\n      <>\n        <MediaQuery query=\"(min-width: 768px)\">\n          <div className=\"search-result-list-container\">{results}</div>\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {results}\n        </MediaQuery>\n      </>\n    );\n  }\n\n  renderSearchResult() {\n    const { resultItems, highlightIndex, width, isResultGetted } = this.state;\n    if (!width || width === 'default') return null;\n\n    if (this.state.showRecent) {\n      const { repoID } = this.props;\n      let storeKey = 'sfVisitedAISearchItems';\n      if (repoID) {\n        storeKey += repoID;\n      }\n      const visitedItems = JSON.parse(localStorage.getItem(storeKey)) || [];\n      if (visitedItems.length) {\n        return this.renderVisitedItems(visitedItems);\n      }\n    }\n\n    const searchStrLength = getValueLength(this.inputValue);\n\n    if (searchStrLength === 0) {\n      return <div className=\"search-result-none\">{gettext('Type characters to start search')}</div>;\n    }\n    else if (searchStrLength < 3) {\n      return <div className=\"search-result-none\">{gettext('Type more characters to start search')}</div>;\n    }\n    else if (!isResultGetted) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    }\n    else if (!resultItems.length) {\n      return (\n        <>\n          <li className='search-result-item align-items-center' onClick={this.openAsk}>\n            <AISearchRobot />\n            <div className=\"item-content\">\n              <div className=\"item-name ellipsis\">{gettext('Ask AI')}{': '}{this.state.value.trim()}</div>\n            </div>\n          </li>\n          <div className=\"search-result-none\">{gettext('No results matching')}</div>\n        </>\n      );\n    }\n\n    const results = (\n      <ul className=\"search-result-list\" ref={this.searchResultListRef}>\n        <li\n          className={classnames('search-result-item align-items-center py-3', {'search-result-item-highlight': highlightIndex === 0 })}\n          onClick={this.openAsk}\n        >\n          <AISearchRobot style={{width: 36}}/>\n          <div className=\"item-content\">\n            <div className=\"item-name ellipsis\">\n            {gettext('Ask AI')}{': '}{this.state.value.trim()}\n            </div>\n          </div>\n        </li>\n        {resultItems.map((item, index) => {\n          const isHighlight = (index + 1) === highlightIndex;\n          return (\n            <SearchResultItem\n              key={index}\n              item={item}\n              onItemClickHandler={this.onItemClickHandler}\n              isHighlight={isHighlight}\n              setRef={isHighlight ? (ref) => {this.highlightRef = ref;} : () => {}}\n            />\n          );\n        })}\n      </ul>\n    );\n\n    return (\n      <>\n        <MediaQuery query=\"(min-width: 768px)\">\n          <div className=\"search-result-list-container\">{results}</div>\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {results}\n        </MediaQuery>\n      </>\n    );\n  }\n\n  onSearchToggle = () => {\n    this.setState({\n      isSearchInputShow: !this.state.isSearchInputShow,\n      isMaskShow: !this.state.isMaskShow,\n    });\n  };\n\n  queryIndexTaskStatus = (taskId) => {\n    if (!taskId) return;\n    this.indexStateTimer = setInterval(() => {\n      seafileAPI.queryIndexTaskStatus(taskId).then(res => {\n        const isFinished = res.data.is_finished;\n        if (isFinished) {\n          this.setState({ indexState: INDEX_STATE.FINISHED });\n          this.indexStateTimer && clearInterval(this.indexStateTimer);\n          this.indexStateTimer = null;\n        }\n      }).catch(error => {\n        this.indexStateTimer && clearInterval(this.indexStateTimer);\n        this.indexStateTimer = null;\n        const errorMsg = Utils.getErrorMsg(error);\n        toaster.danger(errorMsg);\n        this.setState({ indexState: INDEX_STATE.UNCREATED });\n      });\n    }, 3000);\n  };\n\n  onCreateIndex = () => {\n    this.setState({ indexState: INDEX_STATE.RUNNING });\n    seafileAPI.createLibraryIndex(this.props.repoID).then(res => {\n      const taskId = res.data.task_id;\n      toaster.notify(gettext('Indexing the library. Semantic search will be available within a few minutes.'));\n      this.queryIndexTaskStatus(taskId);\n    }).catch(error => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.setState({ indexState: INDEX_STATE.UNCREATED });\n    });\n  };\n\n  onDeleteIndex = () => {\n    seafileAPI.deleteLibraryIndex(this.props.repoID).then(res => {\n      toaster.notify(gettext('Successfully turned it off'));\n      this.setState({ indexState: INDEX_STATE.UNCREATED });\n    }).catch(error => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n    });\n  };\n\n  setSettingsContainerRef = (ref) => {\n    this.settingsContainer = ref;\n  }\n\n  renderSwitch = () => {\n    const { indexState } = this.state;\n    if (indexState === INDEX_STATE.RUNNING) {\n      return (\n        <Switch\n          checked={true}\n          placeholder={gettext('Turn on semantic search for this library')}\n          className=\"position-absolute p-4 bg-white border rounded shadow-sm search-settings\"\n          size=\"small\"\n          textPosition='right'\n          disabled={true}\n          setRef={this.setSettingsContainerRef}\n        />\n      );\n    } else if (indexState === INDEX_STATE.FINISHED) {\n      return (\n        <Switch\n          checked={true}\n          placeholder={gettext('Turn off semantic search for this library')}\n          className=\"position-absolute p-4 bg-white border rounded shadow-sm search-settings\"\n          size=\"small\"\n          onChange={this.onDeleteIndex}\n          textPosition='right'\n          setRef={this.setSettingsContainerRef}\n        />\n      );\n    } else if (indexState === '' || indexState === INDEX_STATE.UNCREATED) {\n      return (\n        <Switch\n          checked={false}\n          placeholder={gettext('Turn on semantic search for this library')}\n          className=\"position-absolute p-4 bg-white border rounded shadow-sm search-settings\"\n          size=\"small\"\n          onChange={this.onCreateIndex}\n          textPosition='right'\n          setRef={this.setSettingsContainerRef}\n        />\n      );\n    }\n    return null;\n  }\n\n  renderSearchIcon = () => {\n    const { indexState } = this.state;\n    if (indexState === INDEX_STATE.RUNNING || indexState === INDEX_STATE.FINISHED) {\n      return <Icon symbol='AI-search' className='input-icon-addon' />;\n    } else {\n      return <Icon symbol='search' className='input-icon-addon' />;\n    }\n  }\n\n  toggleSettingsShown = () => {\n    this.setState({\n      isSettingsShown: !this.state.isSettingsShown\n    });\n  }\n\n  handleOutsideClick = (e) => {\n    const { isSettingsShown } = this.state;\n    if (isSettingsShown &&\n      !this.settingsContainer.contains(e.target) &&\n      !this.settingIcon.contains(e.target)) {\n      this.toggleSettingsShown();\n    }\n  };\n\n  render() {\n    let width = this.state.width !== 'default' ? this.state.width : '';\n    let style = {'width': width};\n    const { isMaskShow, searchMode } = this.state;\n    const placeholder = `${this.props.placeholder}${isMaskShow ? '' : ` (${controlKey} + f )`}`;\n\n    if (searchMode === SEARCH_MODE.QA) {\n      return (\n        <AISearchAsk\n          token={this.source ? this.source.token : null}\n          indexState={this.state.indexState}\n          repoID={this.props.repoID}\n          value={this.state.value.trim()}\n          closeAsk={this.closeAsk}\n          onItemClickHandler={this.onItemClickHandler}\n        />\n      );\n    }\n\n    return (\n      <Fragment>\n        <MediaQuery query=\"(min-width: 768px)\">\n          <div className=\"search\">\n            <div className={`search-mask ${isMaskShow ? 'show' : 'hide'}`} onClick={this.onCloseHandler}></div>\n            <div className={`search-container ${isMaskShow ? 'show' : ''}`}>\n              <div className={`input-icon ${isMaskShow ? 'mb-1' : ''}`}>\n                {this.renderSearchIcon()}\n                <input\n                  type=\"text\"\n                  className=\"form-control search-input\"\n                  name=\"query\"\n                  placeholder={placeholder}\n                  style={style}\n                  value={this.state.value}\n                  onFocus={this.onFocusHandler}\n                  onChange={this.onChangeHandler}\n                  autoComplete=\"off\"\n                  ref={this.inputRef}\n                  onKeyDown={this.onKeydownHandler}\n                />\n                {this.state.isCloseShow &&\n                  <>\n                  {(this.isRepoOwner || this.isAdmin) &&\n                    <button type=\"button\" className=\"search-icon-right input-icon-addon sf3-font-set-up sf3-font border-0 bg-transparent mr-3\" onClick={this.toggleSettingsShown} aria-label={gettext('Settings')} ref={ref => this.settingIcon = ref}></button>\n                  }\n                  <button type=\"button\" className=\"search-icon-right input-icon-addon fas fa-times border-0 bg-transparent mr-4\" onClick={this.onCloseHandler} aria-label={gettext('Close')}></button>\n                  </>\n                }\n              </div>\n              {this.state.isSettingsShown && this.renderSwitch()}\n              <div\n                className=\"search-result-container dropdown-search-result-container\"\n                onScroll={this.onResultListScroll}\n                ref={this.searchContainer}\n              >\n                {this.renderSearchResult()}\n              </div>\n            </div>\n          </div>\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          <div className=\"search-icon-container\" onClick={this.onSearchToggle}>\n            {this.renderSearchIcon()}\n          </div>\n          {this.state.isSearchInputShow &&\n            <div className=\"search\">\n              <div className={`search-mask ${isMaskShow ? '' : 'hide'}`} onClick={this.onCloseHandler}></div>\n              <div className=\"search-container\">\n                <div className=\"input-icon\">\n                  {this.renderSearchIcon()}\n                  <input\n                    type=\"text\"\n                    className=\"form-control search-input\"\n                    name=\"query\"\n                    placeholder={placeholder}\n                    style={style}\n                    value={this.state.value}\n                    onFocus={this.onFocusHandler}\n                    onChange={this.onChangeHandler}\n                    autoComplete=\"off\"\n                  />\n                  {this.state.isCloseShow &&\n                    <button type=\"button\" className=\"search-icon-right input-icon-addon fas fa-times border-0 bg-transparent\" onClick={this.onCloseHandler} aria-label={gettext('Close')}></button>\n                  }\n                </div>\n                <div className=\"search-result-container dropdown-search-result-container\" onScroll={this.onResultListScroll}>\n                  {this.renderSearchResult()}\n                </div>\n              </div>\n            </div>\n          }\n        </MediaQuery>\n      </Fragment>\n    );\n  }\n}\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/share-dialog.js",["4394","4395","4396","4397","4398","4399","4400","4401","4402","4403"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, TabContent, TabPane, Nav, NavItem, NavLink } from 'reactstrap';\nimport { gettext, username, canGenerateShareLink, canGenerateUploadLink, canInvitePeople, additionalShareDialogNote, enableOCM, isPro, canShareRepo } from '../../utils/constants';\nimport ShareLinkPanel from '../share-link-panel';\nimport GenerateUploadLink from './generate-upload-link';\nimport ShareToUser from './share-to-user';\nimport ShareToGroup from './share-to-group';\nimport ShareToInvitePeople from './share-to-invite-people';\nimport ShareToOtherServer from './share-to-other-server';\nimport InternalLink from './internal-link';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\nimport toaster from '../toast';\nimport CustomPermissionManager from './custom-permission/custom-permission-manager';\n\nimport '../../css/share-link-dialog.css';\nimport { InternalAd } from '../../services/ad';\n\nconst propTypes = {\n  isGroupOwnedRepo: PropTypes.bool,\n  itemType: PropTypes.string.isRequired, // there will be three choose: ['library', 'dir', 'file']\n  itemName: PropTypes.string.isRequired,\n  itemPath: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool,\n  userPerm: PropTypes.string,\n  enableDirPrivateShare: PropTypes.bool,\n};\n\nclass ShareDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTab: this.getInitialActiveTab(),\n      isRepoJudgemented: false,\n      isRepoOwner: false,\n    };\n  }\n\n  componentDidMount() {\n    let repoID = this.props.repoID;\n    seafileAPI.getRepoInfo(repoID).then(res => {\n      let isRepoOwner = res.data.owner_email === username;\n      this.setState({\n        isRepoJudgemented: true,\n        isRepoOwner: isRepoOwner,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  getInitialActiveTab = () => {\n    let { repoEncrypted, userPerm, enableDirPrivateShare, itemType } = this.props;\n    const enableShareLink = !repoEncrypted && canGenerateShareLink;\n    const enableUploadLink = !repoEncrypted && canGenerateUploadLink && (userPerm == 'rw' || userPerm == 'admin');\n\n    // for encrypted repo, 'dir private share' is only enabled for the repo itself,\n    // not for the folders in it.\n    if (repoEncrypted) {\n      enableDirPrivateShare = itemType == 'library';\n    }\n\n    if (enableShareLink) {\n      return 'shareLink';\n    } else if (enableUploadLink) {\n      return 'uploadLink';\n    } else if (itemType == 'file' || itemType == 'dir') {\n      return 'internalLink';\n    } else if (enableDirPrivateShare) {\n      return 'shareToUser';\n    }\n  };\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({ activeTab: tab });\n    }\n  };\n\n  onAddCustomPermissionToggle = () => {\n    this.toggle('customSharePermission');\n  };\n\n  renderDirContent = () => {\n\n    if (!this.state.isRepoJudgemented) {\n      return <Loading />;\n    }\n\n    let activeTab = this.state.activeTab;\n    let { repoEncrypted, userPerm, enableDirPrivateShare, itemType } = this.props;\n    const enableShareLink = !repoEncrypted && canGenerateShareLink;\n    const enableUploadLink = !repoEncrypted && canGenerateUploadLink && (userPerm == 'rw' || userPerm == 'admin');\n\n    // for encrypted repo, 'dir private share' is only enabled for the repo itself,\n    // not for the folders in it.\n    if (repoEncrypted) {\n      enableDirPrivateShare = itemType == 'library';\n    }\n\n    const { isCustomPermission } = Utils.getUserPermission(userPerm);\n\n    return (\n      <Fragment>\n        <div className=\"share-dialog-side\">\n          <Nav pills>\n            {enableShareLink &&\n              <NavItem role=\"tab\" aria-selected={activeTab === 'shareLink'} aria-controls=\"share-link-panel\">\n                <NavLink className={activeTab === 'shareLink' ? 'active' : ''} onClick={(this.toggle.bind(this, 'shareLink'))} tabIndex=\"0\" onKeyDown={this.onTabKeyDown}>\n                  {gettext('Share Link')}\n                </NavLink>\n              </NavItem>\n            }\n            {enableUploadLink &&\n              <NavItem role=\"tab\" aria-selected={activeTab === 'uploadLink'} aria-controls=\"upload-link-panel\">\n                <NavLink className={activeTab === 'uploadLink' ? 'active' : ''} onClick={this.toggle.bind(this, 'uploadLink')} tabIndex=\"0\" onKeyDown={this.onTabKeyDown}>\n                  {gettext('Upload Link')}\n                </NavLink>\n              </NavItem>\n            }\n            {itemType === 'dir' &&\n              <NavItem role=\"tab\" aria-selected={activeTab === 'internalLink'} aria-controls=\"internal-link-panel\">\n                <NavLink className={activeTab === 'internalLink' ? 'active' : ''} onClick={this.toggle.bind(this, 'internalLink')} tabIndex=\"0\" onKeyDown={this.onTabKeyDown}>\n                  {gettext('Internal Link')}\n                </NavLink>\n              </NavItem>\n            }\n            {enableDirPrivateShare &&\n              <Fragment>\n                {canShareRepo && (\n                  <NavItem role=\"tab\" aria-selected={activeTab === 'shareToUser'} aria-controls=\"share-to-user-panel\">\n                    <NavLink className={activeTab === 'shareToUser' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareToUser')} tabIndex=\"0\" onKeyDown={this.onTabKeyDown}>\n                      {gettext('Share to user')}\n                    </NavLink>\n                  </NavItem>\n                )}\n                {canShareRepo && (\n                  <NavItem role=\"tab\" aria-selected={activeTab === 'shareToGroup'} aria-controls=\"share-to-group-panel\">\n                    <NavLink className={activeTab === 'shareToGroup' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareToGroup')} tabIndex=\"0\" onKeyDown={this.onTabKeyDown}>\n                      {gettext('Share to group')}\n                    </NavLink>\n                  </NavItem>\n                )}\n                {isPro && !isCustomPermission && canShareRepo && (\n                  <NavItem role=\"tab\" aria-selected={activeTab === 'customSharePermission'} aria-controls=\"custom-share-perm-panel\">\n                    <NavLink className={activeTab === 'customSharePermission' ? 'active' : ''} onClick={this.toggle.bind(this, 'customSharePermission')} tabIndex=\"0\" onKeyDown={this.onTabKeyDown}>\n                      {gettext('Custom sharing permissions')}\n                    </NavLink>\n                  </NavItem>\n                )}\n                {canInvitePeople &&\n                  <NavItem role=\"tab\" aria-selected={activeTab === 'invitePeople'} aria-controls=\"invite-people-panel\">\n                    <NavLink className={activeTab === 'invitePeople' ? 'active' : ''} onClick={this.toggle.bind(this, 'invitePeople')} tabIndex=\"0\" onKeyDown={this.onTabKeyDown}>\n                      {gettext('Invite Guest')}\n                    </NavLink>\n                  </NavItem>\n                }\n              </Fragment>\n            }\n            {enableOCM && itemType === 'library' && this.state.isRepoOwner &&\n              <NavItem role=\"tab\" aria-selected={activeTab === 'shareToOtherServer'} aria-controls=\"share-to-other-server-panel\">\n                <NavLink className={activeTab === 'shareToOtherServer' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareToOtherServer')} tabIndex=\"0\" onKeyDown={this.onTabKeyDown}>\n                  {gettext('Share to other server')}\n                </NavLink>\n              </NavItem>\n            }\n          </Nav>\n        </div>\n        <div className=\"share-dialog-main\">\n          <TabContent activeTab={this.state.activeTab}>\n            <InternalAd />\n            {(enableShareLink && activeTab === 'shareLink') &&\n              <TabPane tabId=\"shareLink\" role=\"tabpanel\" id=\"share-link-panel\">\n                <ShareLinkPanel\n                  itemPath={this.props.itemPath}\n                  repoID={this.props.repoID}\n                  closeShareDialog={this.props.toggleDialog}\n                  itemType={itemType}\n                  userPerm={userPerm}\n                />\n              </TabPane>\n            }\n            {(enableUploadLink && activeTab === 'uploadLink') &&\n              <TabPane tabId=\"uploadLink\" role=\"tabpanel\" id=\"upload-link-panel\">\n                <GenerateUploadLink\n                  itemPath={this.props.itemPath}\n                  repoID={this.props.repoID}\n                  closeShareDialog={this.props.toggleDialog}\n                />\n              </TabPane>\n            }\n            {(itemType === 'dir' && activeTab === 'internalLink') &&\n              <TabPane tabId=\"internalLink\" role=\"tabpanel\" id=\"internal-link-panel\">\n                <InternalLink\n                  path={this.props.itemPath}\n                  repoID={this.props.repoID}\n                  direntType={itemType}\n                />\n              </TabPane>\n            }\n            {enableDirPrivateShare &&\n              <Fragment>\n                {activeTab === 'shareToUser' &&\n                  <TabPane tabId=\"shareToUser\" role=\"tabpanel\" id=\"share-to-user-panel\">\n                    <ShareToUser\n                      itemType={this.props.itemType}\n                      isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                      itemPath={this.props.itemPath}\n                      repoID={this.props.repoID}\n                      isRepoOwner={this.state.isRepoOwner}\n                      onAddCustomPermissionToggle={this.onAddCustomPermissionToggle}\n                    />\n                  </TabPane>\n                }\n                {activeTab === 'shareToGroup' &&\n                  <TabPane tabId=\"shareToGroup\" role=\"tabpanel\" id=\"share-to-group-panel\">\n                    <ShareToGroup\n                      itemType={this.props.itemType}\n                      isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                      itemPath={this.props.itemPath}\n                      repoID={this.props.repoID}\n                      isRepoOwner={this.state.isRepoOwner}\n                      onAddCustomPermissionToggle={this.onAddCustomPermissionToggle}\n                    />\n                  </TabPane>\n                }\n                {isPro && activeTab === 'customSharePermission' && (\n                  <TabPane tabId=\"customSharePermission\" role=\"tabpanel\" id=\"custom-share-perm-panel\">\n                    <CustomPermissionManager repoID={this.props.repoID} />\n                  </TabPane>\n                )}\n                {(canInvitePeople && activeTab === 'invitePeople') &&\n                  <TabPane tabId=\"invitePeople\" role=\"tabpanel\" id=\"invite-people-panel\">\n                    <ShareToInvitePeople itemPath={this.props.itemPath} repoID={this.props.repoID} />\n                  </TabPane>\n                }\n              </Fragment>\n            }\n            {enableOCM && itemType === 'library' && activeTab === 'shareToOtherServer' &&\n              <TabPane tabId=\"shareToOtherServer\" role=\"tabpanel\" id=\"share-to-other-server-panel\">\n                <ShareToOtherServer itemType={this.props.itemType} isGroupOwnedRepo={this.props.isGroupOwnedRepo} itemPath={this.props.itemPath} repoID={this.props.repoID} isRepoOwner={this.state.isRepoOwner} />\n              </TabPane>\n            }\n          </TabContent>\n        </div>\n      </Fragment>\n    );\n  };\n\n  onTabKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      e.target.click();\n    }\n  };\n\n  renderFileContent = () => {\n    let activeTab = this.state.activeTab;\n    const { itemType, repoEncrypted, userPerm } = this.props;\n    const enableShareLink = !repoEncrypted && canGenerateShareLink;\n\n    return (\n      <Fragment>\n        <div className=\"share-dialog-side\">\n          <Nav pills>\n            {enableShareLink &&\n              <NavItem role=\"tab\" aria-selected={activeTab === 'shareLink'} aria-controls=\"share-link-panel\">\n                <NavLink className={activeTab === 'shareLink' ? 'active' : ''} onClick={(this.toggle.bind(this, 'shareLink'))} tabIndex=\"0\" onKeyDown={this.onTabKeyDown}>\n                  {gettext('Share Link')}\n                </NavLink>\n              </NavItem>\n            }\n            <NavItem role=\"tab\" aria-selected={activeTab === 'internalLink'} aria-controls=\"internal-link-panel\">\n              <NavLink className={activeTab === 'internalLink' ? 'active' : ''} onClick={this.toggle.bind(this, 'internalLink')} tabIndex=\"0\" onKeyDown={this.onTabKeyDown}>\n                {gettext('Internal Link')}\n              </NavLink>\n            </NavItem>\n          </Nav>\n        </div>\n        <div className=\"share-dialog-main\">\n          <TabContent activeTab={this.state.activeTab}>\n            <InternalAd />\n            {enableShareLink && activeTab === 'shareLink' &&\n              <TabPane tabId=\"shareLink\" role=\"tabpanel\" id=\"share-link-panel\">\n                <ShareLinkPanel\n                  itemPath={this.props.itemPath}\n                  repoID={this.props.repoID}\n                  closeShareDialog={this.props.toggleDialog}\n                  itemType={itemType}\n                  userPerm={userPerm}\n                />\n              </TabPane>\n            }\n            {activeTab === 'internalLink' &&\n              <TabPane tabId=\"internalLink\" role=\"tabpanel\" id=\"internal-link-panel\">\n                <InternalLink\n                  path={this.props.itemPath}\n                  repoID={this.props.repoID}\n                />\n              </TabPane>\n            }\n          </TabContent>\n        </div>\n      </Fragment>\n    );\n  };\n\n  renderExternalShareMessage = () => {\n    if (additionalShareDialogNote && (typeof additionalShareDialogNote) === 'object') {\n      return (\n        <div className=\"external-share-message mt-2\">\n          <h6>{additionalShareDialogNote.title}</h6>\n          <p style={{ fontSize: '14px', color: '#666' }} className=\"text-wrap m-0\">{additionalShareDialogNote.content}</p>\n        </div>\n      );\n    }\n    return null;\n  };\n\n  render() {\n    const { itemType, itemName } = this.props;\n    return (\n      <div>\n        <Modal isOpen={true} style={{ maxWidth: '760px' }} className=\"share-dialog\" toggle={this.props.toggleDialog}>\n          <ModalHeader toggle={this.props.toggleDialog} tag=\"div\">\n            <h5 className=\"text-truncate\">{gettext('Share')} <span className=\"op-target\" title={itemName}>{itemName}</span></h5>\n            {this.renderExternalShareMessage()}\n          </ModalHeader>\n          <ModalBody className=\"share-dialog-content\" role=\"tablist\">\n            {(itemType === 'library' || itemType === 'dir') && this.renderDirContent()}\n            {itemType === 'file' && this.renderFileContent()}\n          </ModalBody>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nShareDialog.propTypes = propTypes;\n\nexport default ShareDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/search/search-by-name.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/search/search.js",["4404","4405","4406"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport isHotkey from 'is-hotkey';\nimport MediaQuery from 'react-responsive';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { enableSeafileAI, gettext, siteRoot } from '../../utils/constants';\nimport SearchResultItem from './search-result-item';\nimport { Utils } from '../../utils/utils';\nimport { isMac } from '../../utils/extra-attributes';\nimport toaster from '../toast';\nimport { SEARCH_DELAY_TIME, getValueLength } from './constant';\nimport Icon from '../icon';\n\nconst propTypes = {\n  repoID: PropTypes.string,\n  placeholder: PropTypes.string,\n  onSearchedClick: PropTypes.func.isRequired,\n  isPublic: PropTypes.bool,\n};\n\nconst PER_PAGE = 20;\nconst controlKey = isMac() ? '' : 'Ctrl';\n\nclass Search extends Component {\n\n  constructor(props) {\n    super(props);\n    this.baseSearchPageURL = `${siteRoot}search/`;\n    this.state = {\n      width: 'default',\n      value: '',\n      resultItems: [],\n      highlightIndex: 0,\n      page: 0,\n      isLoading: false,\n      hasMore: false,\n      isMaskShow: false,\n      showRecent: true,\n      isResultGetted: false,\n      isCloseShow: false,\n      isSearchInputShow: false, // for mobile\n      searchPageUrl: this.baseSearchPageURL,\n    };\n    this.inputValue = '';\n    this.highlightRef = null;\n    this.source = null; // used to cancel request;\n    this.inputRef = React.createRef();\n    this.searchContainer = React.createRef();\n    this.searchResultListRef = React.createRef();\n    this.timer = null;\n    this.isChineseInput = false;\n  }\n\n  componentDidMount() {\n    document.addEventListener('keydown', this.onDocumentKeydown);\n    document.addEventListener('compositionstart', this.onCompositionStart);\n    document.addEventListener('compositionend', this.onCompositionEnd);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.onDocumentKeydown);\n    document.removeEventListener('compositionstart', this.onCompositionStart);\n    document.removeEventListener('compositionend', this.onCompositionEnd);\n    if (this.timer) {\n      clearTimeout(this.timer);\n      this.timer = null;\n    }\n    this.isChineseInput = false;\n  }\n\n  onCompositionStart = () => {\n    this.isChineseInput = true;\n    if (this.timer) {\n      clearTimeout(this.timer);\n      this.timer = null;\n    }\n  };\n\n  onCompositionEnd = () => {\n    this.isChineseInput = false;\n    // chromecompositionstart -> onChange -> compositionend\n    // not chromecompositionstart -> compositionend -> onChange\n    // The onChange event will setState and change input value, then setTimeout to initiate the search\n    if (this.timer) {\n      clearTimeout(this.timer);\n      this.timer = null;\n    }\n    this.timer = setTimeout(() => {\n      this.onSearch();\n    }, SEARCH_DELAY_TIME);\n  };\n\n  onDocumentKeydown = (e) => {\n    if (isHotkey('mod+f')(e)) {\n      e.preventDefault();\n      this.onFocusHandler();\n      if (this.inputRef && this.inputRef.current) {\n        this.inputRef.current.focus();\n      }\n    } else if (isHotkey('esc', e)) {\n      e.preventDefault();\n      this.inputRef && this.inputRef.current && this.inputRef.current.blur();\n      this.resetToDefault();\n    } else if (isHotkey('enter', e)) {\n      this.onEnter(e);\n    } else if (isHotkey('up', e)) {\n      this.onUp(e);\n    } else if (isHotkey('down', e)) {\n      this.onDown(e);\n    }\n  };\n\n  onFocusHandler = () => {\n    this.setState({ width: '570px', isMaskShow: true, isCloseShow: true });\n  };\n\n  onCloseHandler = () => {\n    this.resetToDefault();\n  };\n\n  onUp = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const { highlightIndex } = this.state;\n    if (highlightIndex > 0) {\n      this.setState({ highlightIndex: highlightIndex - 1 }, () => {\n        if (this.highlightRef) {\n          const { top, height } = this.highlightRef.getBoundingClientRect();\n          if (top - height < 0) {\n            this.searchContainer.current.scrollTop -= height;\n          }\n        }\n      });\n    }\n  };\n\n  onDown = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const { highlightIndex, resultItems } = this.state;\n    if (highlightIndex < resultItems.length - 1) {\n      this.setState({ highlightIndex: highlightIndex + 1 }, () => {\n        if (this.highlightRef) {\n          const { top, height } = this.highlightRef.getBoundingClientRect();\n          const outerHeight = 300;\n          if (top > outerHeight) {\n            this.searchContainer.current.scrollTop += height;\n          }\n        }\n      });\n    }\n  };\n\n  onEnter = (e) => {\n    e.preventDefault();\n    let item = this.state.resultItems[this.state.highlightIndex];\n    if (item) {\n      if (document.activeElement) {\n        document.activeElement.blur();\n      }\n      this.onItemClickHandler(item);\n    }\n  };\n\n  onItemClickHandler = (item) => {\n    this.resetToDefault();\n    this.keepVisitedItem(item);\n    this.props.onSearchedClick(item);\n  };\n\n  keepVisitedItem = (targetItem) => {\n    const { repoID } = this.props;\n    let targetIndex;\n    let storeKey = 'sfVisitedSearchItems';\n    if (repoID) {\n      storeKey += repoID;\n    }\n    const items = JSON.parse(localStorage.getItem(storeKey)) || [];\n    for (let i = 0, len = items.length; i < len; i++) {\n      const { repo_id, path } = items[i];\n      const { repo_id: targetRepoID, path: targetPath } = targetItem;\n      if (repo_id == targetRepoID && path == targetPath) {\n        targetIndex = i;\n        break;\n      }\n    }\n    if (targetIndex != undefined) {\n      items.splice(targetIndex, 1);\n    }\n    items.unshift(targetItem);\n    if (items.length > 50) { // keep 50 items at most\n      items.pop();\n    }\n    localStorage.setItem(storeKey, JSON.stringify(items));\n  };\n\n  onChangeHandler = (event) => {\n    if (this.state.showRecent) {\n      this.setState({ showRecent: false });\n    }\n    const newValue = event.target.value;\n    this.setState({ value: newValue }, () => {\n      if (this.inputValue === newValue.trim()) return;\n      this.inputValue = newValue.trim();\n      if (!this.isChineseInput) {\n        if (this.timer) {\n          clearTimeout(this.timer);\n          this.timer = null;\n        }\n        this.timer = setTimeout(() => {\n          this.onSearch();\n        }, SEARCH_DELAY_TIME);\n      }\n    });\n  };\n\n  onKeydownHandler = (event) => {\n    if (isHotkey('enter', event)) {\n      this.onSearch();\n    }\n  };\n\n  onSearch = () => {\n    const { value } = this.state;\n    const { repoID } = this.props;\n    if (this.inputValue === '' || getValueLength(this.inputValue) < 3) {\n      this.setState({\n        highlightIndex: 0,\n        resultItems: [],\n        isResultGetted: false\n      });\n      return;\n    }\n    const queryData = {\n      q: value,\n      search_repo: repoID ? repoID : 'all',\n      search_ftypes: 'all',\n    };\n    this.getSearchResult(queryData);\n  };\n\n  getSearchResult = (queryData) => {\n    if (this.source) {\n      this.source.cancel('prev request is cancelled');\n    }\n    this.setState({\n      isResultGetted: false,\n      resultItems: [],\n      highlightIndex: 0,\n    });\n    this.source = seafileAPI.getSource();\n    this.sendRequest(queryData, this.source.token, 1);\n  };\n\n  sendRequest = (queryData, cancelToken, page) => {\n    let isPublic = this.props.isPublic;\n    this.queryData = queryData;\n\n    if (isPublic) {\n      seafileAPI.searchFilesInPublishedRepo(queryData.search_repo, queryData.q, page, PER_PAGE).then(res => {\n        this.source = null;\n        if (res.data.total > 0) {\n          this.setState({\n            resultItems: [...this.state.resultItems, ...this.formatResultItems(res.data.results)],\n            isResultGetted: true,\n            page: page + 1,\n            isLoading: false,\n            hasMore: res.data.has_more,\n          });\n        } else {\n          this.setState({\n            highlightIndex: 0,\n            resultItems: [],\n            isLoading: false,\n            isResultGetted: true,\n            hasMore: res.data.has_more,\n          });\n        }\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n        this.setState({ isLoading: false });\n      });\n    } else {\n      if (enableSeafileAI) {\n        this.onAiSearch(queryData, cancelToken);\n      } else {\n        this.onNormalSearch(queryData, cancelToken, page);\n      }\n    }\n  };\n\n  onNormalSearch = (queryData, cancelToken, page) => {\n    this.updateSearchPageURL(queryData);\n    queryData['per_page'] = PER_PAGE;\n    queryData['page'] = page;\n    seafileAPI.searchFiles(queryData, cancelToken).then(res => {\n      this.source = null;\n      if (res.data.total > 0) {\n        this.setState({\n          resultItems: [...this.state.resultItems, ...this.formatResultItems(res.data.results)],\n          isResultGetted: true,\n          isLoading: false,\n          page: page + 1,\n          hasMore: res.data.has_more,\n        });\n        return;\n      }\n      this.setState({\n        highlightIndex: 0,\n        resultItems: [],\n        isLoading: false,\n        isResultGetted: true,\n        hasMore: res.data.has_more,\n      });\n    }).catch(error => {\n      /* eslint-disable */\n      console.log(error);\n      this.setState({ isLoading: false });\n    });\n  }\n\n  onAiSearch = (params, cancelToken) => {\n    let results = [];\n    seafileAPI.aiSearchFiles(params, cancelToken).then(res => {\n      results = [...results, ...this.formatResultItems(res.data.results)];\n      this.setState({\n          resultItems: results,\n          isResultGetted: true,\n          isLoading: false,\n          hasMore: false,\n        });\n    }).catch(error => {\n      /* eslint-disable */\n      console.log(error);\n      this.setState({ isLoading: false });\n    });\n  };\n\n  updateSearchPageURL(queryData) {\n    let params = '';\n    for (let key in queryData) {\n      params += key + '=' + encodeURIComponent(queryData[key]) + '&';\n    }\n    this.setState({searchPageUrl: `${this.baseSearchPageURL}?${params.substring(0, params.length - 1)}`});\n  }\n\n  formatResultItems(data) {\n    let items = [];\n    for (let i = 0; i < data.length; i++) {\n      items[i] = {};\n      let name = data[i].is_dir ? data[i].name : data[i].fullpath.split('/').pop();\n      items[i]['index'] = [i];\n      items[i]['name'] = name;\n      items[i]['path'] = data[i].fullpath;\n      items[i]['repo_id'] = data[i].repo_id;\n      items[i]['repo_name'] = data[i].repo_name;\n      items[i]['is_dir'] = data[i].is_dir;\n      items[i]['link_content'] = decodeURI(data[i].fullpath).substring(1);\n      items[i]['content'] = data[i].content_highlight;\n      items[i]['thumbnail_url'] = data[i].thumbnail_url;\n    }\n    return items;\n  }\n\n  resetToDefault() {\n    this.inputValue = '';\n    this.setState({\n      width: '',\n      value: '',\n      isMaskShow: false,\n      isCloseShow: false,\n      isResultGetted: false,\n      resultItems: [],\n      highlightIndex: 0,\n      isSearchInputShow: false,\n      showRecent: true,\n    });\n  }\n\n  renderSearchResult() {\n    const { resultItems, width, showRecent, isResultGetted } = this.state;\n    if (!width || width === 'default') return null;\n\n    if (showRecent) {\n      const { repoID } = this.props;\n      let storeKey = 'sfVisitedSearchItems';\n      if (repoID) {\n        storeKey += repoID;\n      }\n      const visitedItems = JSON.parse(localStorage.getItem(storeKey)) || [];\n      if (visitedItems.length > 0) {\n        return this.renderResults(visitedItems, true);\n      }\n    }\n\n    const searchStrLength = getValueLength(this.inputValue);\n\n    if (searchStrLength === 0) {\n      return <div className=\"search-result-none\">{gettext('Type characters to start search')}</div>;\n    }\n    else if (searchStrLength < 3) {\n      return <div className=\"search-result-none\">{gettext('Type more characters to start search')}</div>;\n    }\n    else if (!isResultGetted) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    }\n    else if (resultItems.length > 0) {\n      return this.renderResults(resultItems);\n    }\n    else {\n      return <div className=\"search-result-none\">{gettext('No results matching')}</div>;\n    }\n  }\n\n  renderResults = (resultItems, isVisited) => {\n    const { highlightIndex, hasMore, searchPageUrl } = this.state;\n\n    const results = (\n      <>\n      {isVisited && <h4 className=\"visited-search-results-title\">{gettext('Search results visited recently')}</h4>}\n      <ul className=\"search-result-list\" ref={this.searchResultListRef}>\n        {resultItems.map((item, index) => {\n          const isHighlight = index === highlightIndex;\n          return (\n            <SearchResultItem\n              key={index}\n              item={item}\n              onItemClickHandler={this.onItemClickHandler}\n              isHighlight={isHighlight}\n              setRef={isHighlight ? (ref) => {this.highlightRef = ref;} : () => {}}\n            />\n          );\n        })}\n      </ul>\n      {(!this.props.isPublic && hasMore) &&\n        <div className=\"more-search-result mb-1 pl-2 d-flex align-items-center\">\n          <Icon symbol=\"more-level\" className=\"more-search-result-icon\" />\n          <a href={searchPageUrl} className=\"more-search-result-text ml-1\">{gettext('More')}</a>\n        </div>\n      }\n      </>\n    );\n\n    return (\n      <>\n        <MediaQuery query=\"(min-width: 768px)\">\n          <div className=\"search-result-list-container\">{results}</div>\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {results}\n        </MediaQuery>\n      </>\n    );\n  }\n\n  onSearchToggle = () => {\n    this.setState({\n      isSearchInputShow: !this.state.isSearchInputShow,\n      isMaskShow: !this.state.isMaskShow,\n    });\n  };\n\n  render() {\n    let width = this.state.width !== 'default' ? this.state.width : '';\n    let style = {'width': width};\n    const { isMaskShow } = this.state;\n    const placeholder = `${this.props.placeholder}${isMaskShow ? '' : ` (${controlKey} + f )`}`;\n    return (\n      <Fragment>\n        <MediaQuery query=\"(min-width: 768px)\">\n          <div className=\"search\">\n            <div className={`search-mask ${isMaskShow ? 'show' : 'hide'}`} onClick={this.onCloseHandler}></div>\n            <div className={`search-container ${isMaskShow ? 'show' : ''}`}>\n              <div className={`input-icon ${isMaskShow ? 'mb-1' : ''}`}>\n                <i className=\"search-icon-left input-icon-addon fas fa-search\"></i>\n                <input\n                  type=\"text\"\n                  className=\"form-control search-input\"\n                  name=\"query\"\n                  placeholder={placeholder}\n                  style={style}\n                  value={this.state.value}\n                  onFocus={this.onFocusHandler}\n                  onChange={this.onChangeHandler}\n                  autoComplete=\"off\"\n                  ref={this.inputRef}\n                  onKeyDown={this.onKeydownHandler}\n                />\n                {this.state.isCloseShow &&\n                  <button type=\"button\" className=\"search-icon-right input-icon-addon fas fa-times border-0 bg-transparent mr-4\" onClick={this.onCloseHandler} aria-label={gettext('Close')}></button>\n                }\n              </div>\n              <div\n                className=\"search-result-container dropdown-search-result-container\"\n                ref={this.searchContainer}\n              >\n                {this.renderSearchResult()}\n              </div>\n            </div>\n          </div>\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          <div className=\"search-icon-container\">\n            <i className=\"search-icon fas fa-search\" onClick={this.onSearchToggle}></i>\n          </div>\n          {this.state.isSearchInputShow &&\n            <div className=\"search\">\n              <div className={`search-mask ${isMaskShow ? '' : 'hide'}`} onClick={this.onCloseHandler}></div>\n              <div className=\"search-container\">\n                <div className=\"input-icon\">\n                  <i className=\"search-icon-left input-icon-addon fas fa-search\"></i>\n                  <input\n                    type=\"text\"\n                    className=\"form-control search-input\"\n                    name=\"query\"\n                    placeholder={placeholder}\n                    style={style}\n                    value={this.state.value}\n                    onFocus={this.onFocusHandler}\n                    onChange={this.onChangeHandler}\n                    autoComplete=\"off\"\n                  />\n                  {this.state.isCloseShow &&\n                    <button type=\"button\" className=\"search-icon-right input-icon-addon fas fa-times border-0 bg-transparent\" onClick={this.onCloseHandler} aria-label={gettext('Close')}></button>\n                  }\n                </div>\n                <div className=\"search-result-container dropdown-search-result-container\">\n                  {this.renderSearchResult()}\n                </div>\n              </div>\n            </div>\n          }\n        </MediaQuery>\n      </Fragment>\n    );\n  }\n}\n\nSearch.propTypes = propTypes;\n\nexport default Search;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/dirent.js",["4407"],[],"import moment from 'moment';\nimport { Utils } from '../utils/utils';\nimport FileTag from './file-tag';\n\nclass Dirent {\n  constructor(json) {\n    this.id = json.id || '0000000000000000';\n    this.name = json.name;\n    this.type = json.type;\n    this.mtime = json.mtime;\n    if (json.mtime == 0) {\n      this.mtime_relative = '';\n    } else {\n      this.mtime_relative = moment.unix(json.mtime).fromNow();\n    }\n    this.permission = json.permission || 'rw';\n    this.isSelected = false; // is check or not\n    this.starred = json.starred || false;\n    if (json.type === 'dir') {\n      this.has_been_shared_out = false;\n    }\n    if (json.type === 'file') {\n      this.size_original = json.size;\n      this.size = Utils.bytesToSize(json.size);\n      this.is_locked = json.is_locked || false;\n      this.is_freezed = json.is_freezed || false;\n      this.lock_time = json.lock_time || '';\n      this.lock_owner= json.lock_owner || null;\n      this.lock_owner_name= json.lock_owner_name || null;\n      this.locked_by_me = json.locked_by_me || false;\n      this.modifier_name = json.modifier_name || '';\n      this.modifier_email = json.modifier_email || '';\n      this.modifier_contact_email = json.modifier_contact_email || '';\n      let file_tags = [];\n      if (json.file_tags) {\n        file_tags = json.file_tags.map(item => {\n          return new FileTag(item);\n        });\n      }\n      this.file_tags = file_tags;\n      if (json.encoded_thumbnail_src) {\n        this.encoded_thumbnail_src = json.encoded_thumbnail_src;\n      }\n      if (Utils.isSdocFile(json.name)) {\n        this.is_sdoc_revision = json.is_sdoc_revision || false;\n        this.revision_id = json.revision_id || null;\n      }\n    }\n  }\n\n  clone() {\n    return new Dirent(this);\n  }\n\n  isDir() {\n    return this.type !== 'file';\n  }\n\n}\n\nexport default Dirent;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/side-nav-footer.js",["4408"],[],"import React, { Fragment } from 'react';\nimport { gettext, siteRoot, enableTC, sideNavFooterCustomHtml, additionalAppBottomLinks } from '../utils/constants';\nimport ModalPortal from './modal-portal';\nimport AboutDialog from './dialog/about-dialog';\nimport RenderRole from '../services/footer-upgrade';\n\nclass SideNavFooter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isAboutDialogShow: false,\n    };\n  }\n\n  onAboutDialogToggle = (e) => {\n    e.preventDefault();\n    this.setState({ isAboutDialogShow: !this.state.isAboutDialogShow });\n  };\n\n  renderExternalAppLinks = () => {\n    if (additionalAppBottomLinks && (typeof additionalAppBottomLinks) === 'object') {\n      let keys = Object.keys(additionalAppBottomLinks);\n      return keys.map((key, index) => {\n        return <a key={index} className=\"item\" href={additionalAppBottomLinks[key]}>{key}</a>;\n      });\n    }\n    return null;\n  };\n\n  render() {\n\n    if (sideNavFooterCustomHtml) {\n      return (<div className='side-nav-footer' dangerouslySetInnerHTML={{ __html: sideNavFooterCustomHtml }}></div>);\n    }\n    return (\n      <Fragment>\n        <div className=\"side-nav-footer flex-wrap\">\n          <a href={siteRoot + 'help/'} target=\"_blank\" rel=\"noopener noreferrer\" className=\"item\">{gettext('Help')}</a>\n          <a href=\"#\" className=\"item\" onClick={this.onAboutDialogToggle}>{gettext('About')}</a>\n          <RenderRole inSidebar={true} />\n          {enableTC && <a href={`${siteRoot}terms/`} className=\"item\">{gettext('Terms')}</a>}\n          {this.renderExternalAppLinks()}\n          <a href={siteRoot + 'download_client_program/'} target=\"_blank\" className={`item ${additionalAppBottomLinks ? '' : 'last-item'}`} rel=\"noreferrer\">\n            <span aria-hidden=\"true\" className=\"sf2-icon-monitor vam\"></span>{' '}\n            <span className=\"vam\">{gettext('Clients')}</span>\n          </a>\n        </div>\n        {this.state.isAboutDialogShow && (\n          <ModalPortal>\n            <AboutDialog onCloseAboutDialog={this.onAboutDialogToggle} />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nexport default SideNavFooter;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/main-side-nav.js",["4409","4410"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot, canAddRepo, canShareRepo, canGenerateShareLink, canGenerateUploadLink, canInvitePeople, enableOCM, enableOCMViaWebdav } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport { Utils } from '../utils/utils';\nimport toaster from './toast';\nimport Group from '../models/group';\nimport InsertAd from '../services/ad';\n\nimport { canViewOrg, isDocs, isPro, isDBSqlite3, customNavItems } from '../utils/constants';\n\nconst propTypes = {\n  currentTab: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  tabItemClick: PropTypes.func.isRequired,\n};\n\nclass MainSideNav extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupsExtended: false,\n      sharedExtended: false,\n      closeSideBar: false,\n      groupItems: [],\n    };\n\n    this.listHeight = 24; //for caculate tabheight\n    this.groupsHeight = 0;\n    this.adminHeight = 0;\n  }\n\n  grpsExtend = () => {\n    this.setState({\n      groupsExtended: !this.state.groupsExtended,\n    });\n    this.loadGroups();\n  };\n\n  shExtend = () => {\n    this.setState({\n      sharedExtended: !this.state.sharedExtended,\n    });\n  };\n\n  loadGroups = () => {\n    let _this = this;\n    seafileAPI.listGroups().then(res => {\n      let groupList = res.data.map(item => {\n        let group = new Group(item);\n        return group;\n      });\n\n      this.groupsHeight = (groupList.length + 1) * _this.listHeight;\n      _this.setState({\n        groupItems: groupList.sort((a, b) => {\n          return a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n        })\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  tabItemClick = (e, param, id) => {\n    if (window.uploader &&\n      window.uploader.isUploadProgressDialogShow &&\n      window.uploader.totalProgress !== 100) {\n      if (!window.confirm(gettext('A file is being uploaded. Are you sure you want to leave this page?'))) {\n        e.preventDefault();\n        return false;\n      }\n      window.uploader.isUploadProgressDialogShow = false;\n    }\n    this.props.tabItemClick(param, id);\n  };\n\n  getActiveClass = (tab) => {\n    return this.props.currentTab === tab ? 'active' : '';\n  };\n\n  renderSharedGroups() {\n    let style = { height: 0 };\n    if (this.state.groupsExtended) {\n      style = { height: this.groupsHeight };\n    }\n    return (\n      <ul className={`nav sub-nav nav-pills flex-column grp-list ${this.state.groupsExtended ? 'side-panel-slide' : 'side-panel-slide-up'}`} style={style}>\n        <li className=\"nav-item\">\n          <Link to={siteRoot + 'groups/'} className={`nav-link ellipsis ${this.getActiveClass('groups')}`} onClick={(e) => this.tabItemClick(e, 'groups')}>\n            <span className=\"sharp\" aria-hidden=\"true\">#</span>\n            <span className=\"nav-text\">{gettext('All Groups')}</span>\n          </Link>\n        </li>\n        {this.state.groupItems.map(item => {\n          return (\n            <li key={item.id} className=\"nav-item\">\n              <Link to={siteRoot + 'group/' + item.id + '/'} className={`nav-link ellipsis ${this.getActiveClass(item.name)}`} onClick={(e) => this.tabItemClick(e, item.name, item.id)}>\n                <span className=\"sharp\" aria-hidden=\"true\">#</span>\n                <span className=\"nav-text\">{item.name}</span>\n              </Link>\n            </li>\n          );\n        })}\n      </ul>\n    );\n  }\n\n  renderSharedAdmin() {\n    let height = 0;\n    if (this.state.sharedExtended) {\n      if (!this.adminHeight) {\n        this.adminHeight = 3 * this.listHeight;\n      }\n      height = this.adminHeight;\n    }\n    let style = { height: height };\n\n    let linksNavItem = null;\n    if (canGenerateShareLink) {\n      linksNavItem = (\n        <li className=\"nav-item\">\n          <Link to={siteRoot + 'share-admin-share-links/'} className={`nav-link ellipsis ${this.getActiveClass('share-admin-share-links')}`} title={gettext('Links')} onClick={(e) => this.tabItemClick(e, 'share-admin-share-links')}>\n            <span aria-hidden=\"true\" className=\"sharp\">#</span>\n            <span className=\"nav-text\">{gettext('Links')}</span>\n          </Link>\n        </li>\n      );\n    } else if (canGenerateUploadLink) {\n      linksNavItem = (\n        <li className=\"nav-item\">\n          <Link to={siteRoot + 'share-admin-upload-links/'} className={`nav-link ellipsis ${this.getActiveClass('share-admin-upload-links')}`} title={gettext('Links')} onClick={(e) => this.tabItemClick(e, 'share-admin-upload-links')}>\n            <span aria-hidden=\"true\" className=\"sharp\">#</span>\n            <span className=\"nav-text\">{gettext('Links')}</span>\n          </Link>\n        </li>\n      );\n    }\n    return (\n      <ul className={`nav sub-nav nav-pills flex-column ${this.state.sharedExtended ? 'side-panel-slide' : 'side-panel-slide-up'}`} style={style} >\n        {canAddRepo && canShareRepo && (\n          <li className=\"nav-item\">\n            <Link to={siteRoot + 'share-admin-libs/'} className={`nav-link ellipsis ${this.getActiveClass('share-admin-libs')}`} title={gettext('Libraries')} onClick={(e) => this.tabItemClick(e, 'share-admin-libs')}>\n              <span aria-hidden=\"true\" className=\"sharp\">#</span>\n              <span className=\"nav-text\">{gettext('Libraries')}</span>\n            </Link>\n          </li>\n        )}\n        {canShareRepo && (\n          <li className=\"nav-item\">\n            <Link to={siteRoot + 'share-admin-folders/'} className={`nav-link ellipsis ${this.getActiveClass('share-admin-folders')}`} title={gettext('Folders')} onClick={(e) => this.tabItemClick(e, 'share-admin-folders')}>\n              <span aria-hidden=\"true\" className=\"sharp\">#</span>\n              <span className=\"nav-text\">{gettext('Folders')}</span>\n            </Link>\n          </li>\n        )}\n        {linksNavItem}\n      </ul>\n    );\n  }\n\n  renderCustomNavItems() {\n    return (\n      customNavItems.map((item, idx) => {\n        if (item.link === \"/manage-users/\" && window.app.pageOptions?.userRole === \"default\") return null\n        return (\n          <li key={idx} className=\"nav-item\">\n            <a href={item.link} className=\"nav-link ellipsis\" title={item.desc}>\n              <span className={item.icon} aria-hidden=\"true\"></span>\n              <span className=\"nav-text\">{item.desc}</span>\n            </a>\n          </li>\n        );\n      })\n    );\n  }\n\n  render() {\n    let showActivity = isDocs || isPro || !isDBSqlite3;\n    return (\n      <div className=\"side-nav\">\n        <div className=\"side-nav-con\">\n          <h3 className=\"sf-heading\">{gettext('Files')}</h3>\n          <ul className=\"nav nav-pills flex-column nav-container\">\n            {canAddRepo && (\n              <li className=\"nav-item\">\n                <Link to={siteRoot + 'my-libs/'} className={`nav-link ellipsis ${this.getActiveClass('my-libs') || this.getActiveClass('deleted')}`} title={gettext('My Libraries')} onClick={(e) => this.tabItemClick(e, 'my-libs')}>\n                  <span className=\"sf2-icon-user\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('My Libraries')}</span>\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item\">\n              <Link to={siteRoot + 'shared-libs/'} className={`nav-link ellipsis ${this.getActiveClass('shared-libs')}`} title={gettext('Shared with me')} onClick={(e) => this.tabItemClick(e, 'shared-libs')}>\n                <span className=\"sf2-icon-share\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Shared with me')}</span>\n              </Link>\n            </li>\n            {canViewOrg &&\n              <li className=\"nav-item\" onClick={(e) => this.tabItemClick(e, 'org')}>\n                <Link to={siteRoot + 'org/'} className={`nav-link ellipsis ${this.getActiveClass('org')}`} title={gettext('Shared with all')}>\n                  <span className=\"sf2-icon-organization\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Shared with all')}</span>\n                </Link>\n              </li>\n            }\n            <li className=\"nav-item flex-column\" id=\"group-nav\">\n              <a className=\"nav-link ellipsis\" title={gettext('Shared with groups')} onClick={this.grpsExtend}>\n                <span className=\"sf2-icon-group\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Shared with groups')}</span>\n                <span className={`toggle-icon fas ${this.state.groupsExtended ? 'fa-caret-down' : 'fa-caret-left'}`} aria-hidden=\"true\"></span>\n              </a>\n              {this.renderSharedGroups()}\n            </li>\n            {enableOCM &&\n              <li className=\"nav-item\">\n                <Link to={siteRoot + 'shared-with-ocm/'} className={`nav-link ellipsis ${this.getActiveClass('shared-with-ocm')}`} title={gettext('Shared from other servers')} onClick={(e) => this.tabItemClick(e, 'shared-with-ocm')}>\n                  <span className=\"sf3-font-share-from-other-servers sf3-font\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Shared from other servers')}</span>\n                </Link>\n              </li>\n            }\n            {enableOCMViaWebdav &&\n              <li className=\"nav-item\">\n                <Link to={siteRoot + 'ocm-via-webdav/'} className={`nav-link ellipsis ${this.getActiveClass('ocm-via-webdav')}`} title={gettext('Shared from other servers')} onClick={(e) => this.tabItemClick(e, 'ocm-via-webdav')}>\n                  <span className=\"sf3-font-share-from-other-servers sf3-font\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Shared from other servers')}</span>\n                </Link>\n              </li>\n            }\n          </ul>\n\n\n          <h3 className=\"sf-heading\">{gettext('Tools')}</h3>\n          <ul className=\"nav nav-pills flex-column nav-container\">\n            <li className=\"nav-item\">\n              <Link className={`nav-link ellipsis ${this.getActiveClass('starred')}`} to={siteRoot + 'starred/'} title={gettext('Favorites')} onClick={(e) => this.tabItemClick(e, 'starred')}>\n                <span className=\"sf2-icon-star\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Favorites')}</span>\n              </Link>\n            </li>\n            {showActivity &&\n              <li className=\"nav-item\">\n                <Link className={`nav-link ellipsis ${this.getActiveClass('dashboard')}`} to={siteRoot + 'dashboard/'} title={gettext('Activities')} onClick={(e) => this.tabItemClick(e, 'dashboard')}>\n                  <span className=\"sf2-icon-clock\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Activities')}</span>\n                </Link>\n              </li>\n            }\n            <li className=\"nav-item\">\n              <Link className={`nav-link ellipsis ${this.getActiveClass('published')}`} to={siteRoot + 'published/'} title={gettext('Published Libraries')} onClick={(e) => this.tabItemClick(e, 'published')}>\n                <span className=\"sf2-icon-wiki-view\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Published Libraries')}</span>\n              </Link>\n            </li>\n            <li className=\"nav-item\">\n              <Link className={`nav-link ellipsis ${this.getActiveClass('linked-devices')}`} to={siteRoot + 'linked-devices/'} title={gettext('Linked Devices')} onClick={(e) => this.tabItemClick(e, 'linked-devices')}>\n                <span className=\"sf2-icon-monitor\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Linked Devices')}</span>\n              </Link>\n            </li>\n            {canInvitePeople &&\n              <li className=\"nav-item\">\n                <Link className={`nav-link ellipsis ${this.getActiveClass('invitations')}`} to={siteRoot + 'invitations/'} title={gettext('Invite Guest')} onClick={(e) => this.tabItemClick(e, 'invitations')}>\n                  <span className=\"sf2-icon-invite\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Invite Guest')}</span>\n                </Link>\n              </li>\n            }\n            <li className=\"nav-item flex-column\" id=\"share-admin-nav\">\n              <a className=\"nav-link ellipsis\" title={gettext('Share Admin')} onClick={this.shExtend}>\n                <span className=\"sf2-icon-wrench\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Share Admin')}</span>\n                <span className={`toggle-icon fas ${this.state.sharedExtended ? 'fa-caret-down' : 'fa-caret-left'}`} aria-hidden=\"true\"></span>\n              </a>\n              {this.renderSharedAdmin()}\n            </li>\n            {customNavItems && this.renderCustomNavItems()}\n          </ul>\n          <InsertAd zone='main-side-nav' />\n        </div>\n      </div>\n    );\n  }\n}\n\nMainSideNav.propTypes = propTypes;\n\nexport default MainSideNav;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-chooser/file-chooser.js",["4411"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Input } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, isPro } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport RepoInfo from '../../models/repo-info';\nimport RepoListView from './repo-list-view';\nimport Loading from '../loading';\nimport SearchedListView from './searched-list-view';\n\nimport '../../css/file-chooser.css';\n\nconst propTypes = {\n  isShowFile: PropTypes.bool,\n  repoID: PropTypes.string,\n  onDirentItemClick: PropTypes.func,\n  onRepoItemClick: PropTypes.func,\n  mode: PropTypes.oneOf(['current_repo_and_other_repos', 'only_all_repos', 'only_current_library']),\n  fileSuffixes: PropTypes.array,\n  currentPath: PropTypes.string,\n};\n\nclass FileChooser extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasRequest: false,\n      isCurrentRepoShow: true,\n      isOtherRepoShow: false,\n      repoList: [],\n      currentRepoInfo: null,\n      selectedRepo: null,\n      selectedPath: this.props.currentPath || '/',\n      isSearching: false,\n      isResultGot: false,\n      searchInfo: '',\n      searchResults: [],\n      selectedItemInfo: {},\n    };\n    this.inputValue = '';\n    this.timer = null;\n    this.source = null;\n  }\n\n  componentDidMount() {\n    if (this.props.repoID) {  // current_repo_and_other_repos, only_current_library\n      let repoID = this.props.repoID;\n      seafileAPI.getRepoInfo(repoID).then(res => {\n        // need to optimized\n        let repoInfo = new RepoInfo(res.data);\n        this.setState({\n          currentRepoInfo: repoInfo,\n          selectedRepo: repoInfo\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else { // only_all_repos\n      seafileAPI.listRepos().then(res => {\n        let repos = res.data.repos;\n        let repoList = [];\n        let repoIdList = [];\n        for(let i = 0; i < repos.length; i++) {\n          if (repos[i].permission !== 'rw') {\n            continue;\n          }\n          if (repoIdList.indexOf(repos[i].repo_id) > -1) {\n            continue;\n          }\n          repoList.push(repos[i]);\n          repoIdList.push(repos[i].repo_id);\n        }\n        repoList = Utils.sortRepos(repoList, 'name', 'asc');\n        this.setState({repoList: repoList});\n      });\n    }\n  }\n\n  onOtherRepoToggle = () => {\n    if (!this.state.hasRequest) {\n      let that = this;\n      seafileAPI.listRepos().then(res => {\n        // todo optimized code\n        let repos = res.data.repos;\n        let repoList = [];\n        let repoIdList = [];\n        for(let i = 0; i < repos.length; i++) {\n          if (repos[i].permission !== 'rw') {\n            continue;\n          }\n          if (that.props.repoID && (repos[i].repo_name === that.state.currentRepoInfo.repo_name)) {\n            continue;\n          }\n          if (repoIdList.indexOf(repos[i].repo_id) > -1) {\n            continue;\n          }\n          repoList.push(repos[i]);\n          repoIdList.push(repos[i].repo_id);\n        }\n        repoList = Utils.sortRepos(repoList, 'name', 'asc');\n        this.setState({\n          repoList: repoList,\n          isOtherRepoShow: !this.state.isOtherRepoShow,\n          selectedItemInfo: {}\n        });\n      });\n    }\n    else {\n      this.setState({isOtherRepoShow: !this.state.isOtherRepoShow});\n    }\n  };\n\n  onCurrentRepoToggle = () => {\n    this.setState({isCurrentRepoShow: !this.state.isCurrentRepoShow});\n  };\n\n  onDirentItemClick = (repo, filePath, dirent) => {\n    this.props.onDirentItemClick(repo, filePath, dirent);\n    this.setState({\n      selectedRepo: repo,\n      selectedPath: filePath\n    });\n  };\n\n  onRepoItemClick = (repo) => {\n    if (this.props.onRepoItemClick) {\n      this.props.onRepoItemClick(repo);\n    }\n    this.setState({\n      selectedRepo: repo,\n      selectedPath: '/',\n    });\n  };\n\n  onCloseSearching = () => {\n    this.setState({\n      isSearching: false,\n      isResultGot: false,\n      searchInfo: '',\n      searchResults: [],\n    });\n    this.inputValue = '';\n    this.timer = null;\n    this.source = null;\n  };\n\n  onSearchInfoChanged = (event) => {\n    let searchInfo = event.target.value.trim();\n\n    this.setState({searchInfo: searchInfo});\n\n    if (this.inputValue === searchInfo) {\n      return false;\n    }\n\n    this.inputValue = searchInfo;\n\n    if (searchInfo.length === 0) {\n      this.setState({\n        isSearching: false,\n        searchResults: [],\n      });\n      return false;\n    }\n\n    if (!this.state.searchResults.length && searchInfo.length > 0) {\n      this.setState({\n        isSearching: true,\n        isResultGot: false,\n      });\n    }\n\n    if (this.inputValue === '' || this.getValueLength(this.inputValue) < 3) {\n      this.setState({isResultGot: false});\n      return false;\n    }\n\n    let repoID = this.props.repoID;\n    let isShowFile = this.props.isShowFile;\n    let mode = this.props.mode;\n    let searchRepo = mode === 'only_current_library' ? repoID : 'all';\n\n    let queryData = {\n      q: searchInfo,\n      search_repo: searchRepo,\n      search_ftypes: 'all',\n      obj_type: isShowFile ? 'file' : 'dir',\n    };\n\n    if (this.timer) {\n      clearTimeout(this.timer);\n    }\n\n    this.timer = setTimeout(this.getSearchResult(queryData), 500);\n  };\n\n  getSearchResult = (queryData) => {\n    if (this.source) {\n      this.cancelRequest();\n    }\n\n    this.setState({isResultGot: false});\n\n    this.source = seafileAPI.getSource();\n    this.sendRequest(queryData, this.source.token);\n  };\n\n  sendRequest = (queryData, cancelToken) => {\n    seafileAPI.searchFiles(queryData, cancelToken).then(res => {\n      if (!res.data.total) {\n        this.setState({\n          searchResults: [],\n          isResultGot: true\n        });\n        this.source = null;\n        return;\n      }\n\n      let items = this.formatResultItems(res.data.results);\n      this.setState({\n        searchResults: items,\n        isResultGot: true\n      });\n      this.source = null;\n    });\n  };\n\n  cancelRequest = () => {\n    this.source.cancel('prev request is cancelled');\n  };\n\n  getValueLength = (str) => {\n    var i = 0, code, len = 0;\n    for (; i < str.length; i++) {\n      code = str.charCodeAt(i);\n      if (code == 10) { //solve enter problem\n        len += 2;\n      } else if (code < 0x007f) {\n        len += 1;\n      } else if (code >= 0x0080 && code <= 0x07ff) {\n        len += 2;\n      } else if (code >= 0x0800 && code <= 0xffff) {\n        len += 3;\n      }\n    }\n    return len;\n  };\n\n  formatResultItems = (data) => {\n    let items = [];\n    let length = data.length > 10 ? 10 : data.length;\n    for (let i = 0; i < length; i++) {\n      items[i] = {};\n      items[i]['index'] = [i];\n      items[i]['name'] = data[i].name;\n      items[i]['path'] = data[i].fullpath;\n      items[i]['repo_id'] = data[i].repo_id;\n      items[i]['repo_name'] = data[i].repo_name;\n      items[i]['is_dir'] = data[i].is_dir;\n      items[i]['link_content'] = decodeURI(data[i].fullpath).substring(1);\n      items[i]['content'] = data[i].content_highlight;\n    }\n    return items;\n  };\n\n  onSearchedItemClick = (item) => {\n    item['type'] = item.is_dir ? 'dir' : 'file';\n    let repo = new RepoInfo(item);\n    this.props.onDirentItemClick(repo, item.path, item);\n  };\n\n  renderSearchedView = () => {\n    if (this.getValueLength(this.inputValue) < 3) {\n      return '';\n    }\n\n    if (!this.state.isResultGot) {\n      return (<Loading />);\n    }\n\n    if (this.state.isResultGot && this.state.searchResults.length === 0) {\n      return (<div className=\"search-result-none text-center\">{gettext('No results matching')}</div>);\n    }\n\n    if (this.state.isResultGot && this.state.searchResults.length > 0) {\n      return (\n        <SearchedListView\n          searchResults={this.state.searchResults}\n          onItemClick={this.onSearchedItemClick}\n          onSearchedItemDoubleClick={this.onSearchedItemDoubleClick}\n        />);\n    }\n  };\n\n  onSearchedItemDoubleClick = (item) => {\n    if (item.type !== 'dir') {\n      return;\n    }\n\n    let selectedItemInfo = {\n      repoID: item.repo_id,\n      filePath: item.path,\n    };\n\n    this.setState({\n      selectedItemInfo: selectedItemInfo\n    });\n\n    if (this.props.repoID && item.repo_id === this.props.repoID) {\n      seafileAPI.getRepoInfo(this.props.repoID).then(res => {\n        // need to optimized\n        let repoInfo = new RepoInfo(res.data);\n        let path = item.path.substring(0, (item.path.length - 1));\n\n        this.setState({\n          selectedRepo: repoInfo,\n          selectedPath: path,\n          isCurrentRepoShow: true,\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      if (!this.state.hasRequest) {\n        let that = this;\n        seafileAPI.listRepos().then(res => {\n          // todo optimized code\n          let repos = res.data.repos;\n          let repoList = [];\n          let repoIdList = [];\n          for (let i = 0; i < repos.length; i++) {\n            if (repos[i].permission !== 'rw') {\n              continue;\n            }\n            if (that.props.repoID && (repos[i].repo_name === that.state.currentRepoInfo.repo_name)) {\n              continue;\n            }\n            if (repoIdList.indexOf(repos[i].repo_id) > -1) {\n              continue;\n            }\n            repoList.push(repos[i]);\n            repoIdList.push(repos[i].repo_id);\n          }\n          repoList = Utils.sortRepos(repoList, 'name', 'asc');\n          let repo = repoList.filter(repoItem => repoItem.repo_id === item.repo_id);\n          let path = item.path.substring(0, (item.path.length - 1));\n\n          let selectRepo = repo[0];\n          this.setState({\n            repoList: repoList,\n            isOtherRepoShow: true,\n            selectedPath: path,\n            selectedRepo: selectRepo,\n          });\n        });\n      }\n      else {\n        this.setState({isOtherRepoShow: !this.state.isOtherRepoShow});\n      }\n    }\n    this.onCloseSearching();\n  };\n\n  onScroll = (event) => {\n    event.stopPropagation();\n  };\n\n  renderRepoListView = () => {\n\n    return (\n      <div className=\"file-chooser-container user-select-none\" onScroll={this.onScroll}>\n        {this.props.mode === 'current_repo_and_other_repos' && (\n          <Fragment>\n            <div className=\"list-view\">\n              <div className=\"list-view-header\">\n                <span className={`item-toggle fa ${this.state.isCurrentRepoShow ? 'fa-caret-down' : 'fa-caret-right'}`} onClick={this.onCurrentRepoToggle}></span>\n                <span className=\"library\">{gettext('Current Library')}</span>\n              </div>\n              {\n                this.state.isCurrentRepoShow && this.state.currentRepoInfo &&\n                <RepoListView\n                  initToShowChildren={true}\n                  currentRepoInfo={this.state.currentRepoInfo}\n                  currentPath={this.props.currentPath}\n                  selectedRepo={this.state.selectedRepo}\n                  selectedPath={this.state.selectedPath}\n                  onRepoItemClick={this.onRepoItemClick}\n                  onDirentItemClick={this.onDirentItemClick}\n                  isShowFile={this.props.isShowFile}\n                  fileSuffixes={this.props.fileSuffixes}\n                  selectedItemInfo={this.state.selectedItemInfo}\n                />\n              }\n            </div>\n            <div className=\"list-view\">\n              <div className=\"list-view-header\">\n                <span className={`item-toggle fa ${this.state.isOtherRepoShow ? 'fa-caret-down' : 'fa-caret-right'}`} onClick={this.onOtherRepoToggle}></span>\n                <span className=\"library\">{gettext('Other Libraries')}</span>\n              </div>\n              {\n                this.state.isOtherRepoShow &&\n                <RepoListView\n                  initToShowChildren={false}\n                  repoList={this.state.repoList}\n                  selectedRepo={this.state.selectedRepo}\n                  selectedPath={this.state.selectedPath}\n                  onRepoItemClick={this.onRepoItemClick}\n                  onDirentItemClick={this.onDirentItemClick}\n                  isShowFile={this.props.isShowFile}\n                  fileSuffixes={this.props.fileSuffixes}\n                  selectedItemInfo={this.state.selectedItemInfo}\n                />\n              }\n            </div>\n          </Fragment>\n        )}\n        {this.props.mode === 'only_current_library' && (\n          <div className=\"list-view\">\n            <div className=\"list-view-header\">\n              <span className={`item-toggle fa ${this.state.isCurrentRepoShow ? 'fa-caret-down' : 'fa-caret-right'}`} onClick={this.onCurrentRepoToggle}></span>\n              <span className=\"library\">{gettext('Current Library')}</span>\n            </div>\n            {\n              this.state.isCurrentRepoShow && this.state.currentRepoInfo &&\n              <RepoListView\n                initToShowChildren={true}\n                currentRepoInfo={this.state.currentRepoInfo}\n                currentPath={this.props.currentPath}\n                selectedRepo={this.state.selectedRepo}\n                selectedPath={this.state.selectedPath}\n                onRepoItemClick={this.onRepoItemClick}\n                onDirentItemClick={this.onDirentItemClick}\n                isShowFile={this.props.isShowFile}\n                fileSuffixes={this.props.fileSuffixes}\n                selectedItemInfo={this.state.selectedItemInfo}\n              />\n            }\n          </div>\n        )}\n        {this.props.mode === 'only_all_repos' && (\n          <div className=\"file-chooser-container\">\n            <div className=\"list-view\">\n              <div className=\"list-view-header\">\n                <span className=\"item-toggle fa fa-caret-down\"></span>\n                <span className=\"library\">{gettext('Libraries')}</span>\n              </div>\n              <RepoListView\n                initToShowChildren={false}\n                repoList={this.state.repoList}\n                selectedRepo={this.state.selectedRepo}\n                selectedPath={this.state.selectedPath}\n                onRepoItemClick={this.onRepoItemClick}\n                onDirentItemClick={this.onDirentItemClick}\n                isShowFile={this.props.isShowFile}\n                fileSuffixes={this.props.fileSuffixes}\n                selectedItemInfo={this.state.selectedItemInfo}\n              />\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  render() {\n    if (!this.state.selectedRepo && this.props.repoID) {\n      return '';\n    }\n\n    return (\n      <Fragment>\n        {isPro && (\n          <div className=\"file-chooser-search-input\">\n            <Input className=\"search-input mb-2\" placeholder={gettext('Search')} type='text' value={this.state.searchInfo} onChange={this.onSearchInfoChanged}></Input>\n            {this.state.searchInfo.length !== 0 && (\n              <span className=\"search-control attr-action-icon fas fa-times\" onClick={this.onCloseSearching}></span>\n            )}\n          </div>\n        )}\n        {this.state.isSearching && (\n          <div className=\"file-chooser-search-container\">\n            {this.renderSearchedView()}\n          </div>\n        )}\n        {!this.state.isSearching && this.renderRepoListView()}\n      </Fragment>\n    );\n  }\n}\n\nFileChooser.propTypes = propTypes;\n\nexport default FileChooser;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toast/toaster.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toolbar/general-toolbar.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/history-list-view/history-list-view.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/upload-link/upload-progress-dialog.js",["4412","4413","4414","4415"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ButtonDropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport UploadListItem from './upload-list-item';\nimport ForbidUploadListItem from './forbid-upload-list-item';\n\nconst propTypes = {\n  totalProgress: PropTypes.number.isRequired,\n  uploadBitrate: PropTypes.number.isRequired,\n  uploadFileList: PropTypes.array.isRequired,\n  forbidUploadFileList: PropTypes.array.isRequired,\n  onCancelAllUploading: PropTypes.func.isRequired,\n  onUploadCancel: PropTypes.func.isRequired,\n  onUploadRetry: PropTypes.func.isRequired,\n  onFileUpload: PropTypes.func.isRequired,\n  onFolderUpload: PropTypes.func.isRequired,\n  isUploading : PropTypes.bool.isRequired\n};\n\nclass UploadProgressDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      dropdownOpen: false\n    };\n  }\n\n  toggleDropdown = () => {\n    this.setState({\n      dropdownOpen: !this.state.dropdownOpen\n    });\n  };\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.toggleDropdown();\n    }\n  };\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      e.target.click();\n    }\n  };\n\n  render() {\n    const { totalProgress, uploadBitrate, uploadFileList, forbidUploadFileList, isUploading } = this.props;\n    const filesUploadedMsg = gettext('{uploaded_files_num}/{all_files_num} Files')\n      .replace('{uploaded_files_num}', uploadFileList.filter(file => file.isSaved).length)\n      .replace('{all_files_num}', uploadFileList.length);\n    let filesFailedMsg;\n    if (!isUploading) {\n      const failedNum = uploadFileList.filter(file => file.error).length + forbidUploadFileList.length;\n      if (failedNum > 0) {\n        filesFailedMsg = gettext('{failed_files_num} file(s) failed to upload')\n          .replace('{failed_files_num}', failedNum);\n      }\n    }\n    return (\n      <Fragment>\n        <div className=\"text-center\">\n          <ButtonDropdown isOpen={this.state.dropdownOpen} toggle={this.toggleDropdown}>\n            <DropdownToggle color=\"primary\" caret onKeyDown={this.onDropdownToggleKeyDown}>{gettext('Upload')}</DropdownToggle>\n            <DropdownMenu>\n              <DropdownItem onClick={this.props.onFileUpload} onKeyDown={this.onMenuItemKeyDown}>{gettext('Upload Files')}</DropdownItem>\n              <DropdownItem onClick={this.props.onFolderUpload} onKeyDown={this.onMenuItemKeyDown}>{gettext('Upload Folder')}</DropdownItem>\n            </DropdownMenu>\n          </ButtonDropdown>\n          <Button color=\"primary\" outline={true} className=\"ml-4\"\n            onClick={this.props.onCancelAllUploading}\n            disabled={!isUploading}>\n            {gettext('Cancel All')}\n          </Button>\n        </div>\n        {totalProgress > 0 && (\n          <div id=\"upload-link-total-progress-container\" className={`${!isUploading ? 'd-flex align-items-center' : ''} px-6 py-2`}>\n            <div className=\"d-flex align-items-center flex-fill\">\n              {isUploading ? (\n                <>\n                  <span>{gettext('File Uploading...')}</span>\n                  <span className=\"ml-2\">{`${totalProgress}% (${Utils.formatBitRate(uploadBitrate)})`}</span>\n                </>\n              ) : (\n                <>\n                  {filesFailedMsg ?\n                    <p className=\"m-0 error\">{filesFailedMsg}</p> :\n                    <p className=\"m-0\">{gettext('All files uploaded')}</p>\n                  }\n                </>\n              )}\n              {uploadFileList.length > 0 && <span className=\"ml-auto\">{filesUploadedMsg}</span>}\n            </div>\n            {isUploading && (\n              <div className=\"progress\">\n                <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${totalProgress}%`}} aria-valuenow={totalProgress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n              </div>\n            )}\n          </div>\n        )}\n        <div className=\"mh-2\">\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr>\n                <th width=\"40%\" scope=\"col\">{gettext('name')}</th>\n                <th width=\"15%\" scope=\"col\">{gettext('size')}</th>\n                <th width=\"30%\" scope=\"col\">{gettext('progress')}</th>\n                <th width=\"15%\" scope=\"col\">{gettext('state')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.props.forbidUploadFileList.map((file, index) => {\n                return (<ForbidUploadListItem key={index} file={file} />);\n              })}\n              {this.props.uploadFileList.map((resumableFile, index) => {\n                return (\n                  <UploadListItem\n                    key={index}\n                    resumableFile={resumableFile}\n                    onUploadCancel={this.props.onUploadCancel}\n                    onUploadRetry={this.props.onUploadRetry}\n                  />\n                );\n              }).reverse()\n              }\n            </tbody>\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nUploadProgressDialog.propTypes = propTypes;\n\nexport default UploadProgressDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/wiki/side-panel.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/activity.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/wiki/main-panel.js",["4416","4417"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, repoID, siteRoot, username, isPro } from '../../utils/constants';\nimport SeafileMarkdownViewer from '../../components/seafile-markdown-viewer';\nimport WikiDirListView from '../../components/wiki-dir-list-view/wiki-dir-list-view';\nimport Loading from '../../components/loading';\nimport { Utils } from '../../utils/utils';\nimport Search from '../../components/search/search';\nimport Notification from '../../components/common/notification';\nimport Account from '../../components/common/account';\nimport SdocWikiPageViewer from '../../components/sdoc-wiki-page-viewer';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  pathExist: PropTypes.bool.isRequired,\n  isViewFile: PropTypes.bool.isRequired,\n  isDataLoading: PropTypes.bool.isRequired,\n  content: PropTypes.string,\n  permission: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  direntList: PropTypes.array.isRequired,\n  onMenuClick: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  onMainNavBarClick: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  onLinkClick: PropTypes.func.isRequired,\n};\n\nclass MainPanel extends Component {\n\n  onMenuClick = () => {\n    this.props.onMenuClick();\n  };\n\n  onEditClick = (e) => {\n    e.preventDefault();\n    let url = siteRoot + 'lib/' + repoID + '/file' + this.props.path + '?mode=edit';\n    window.open(url);\n  };\n\n  onMainNavBarClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onMainNavBarClick(path);\n  };\n\n  renderNavPath = () => {\n    let paths = this.props.path.split('/');\n    let nodePath = '';\n    let pathElem = paths.map((item, index) => {\n      if (item === '') {\n        return null;\n      }\n      if (index === (paths.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a\n              className=\"path-link\"\n              data-path={nodePath}\n              onClick={this.onMainNavBarClick}>\n              {item}\n            </a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  };\n\n\n  render() {\n    let { onSearchedClick } = this.props;\n    const errMessage = (<div className=\"message err-tip\">{gettext('Folder does not exist.')}</div>);\n    const isViewingFile = this.props.pathExist && !this.props.isDataLoading && this.props.isViewFile;\n    return (\n      <div className=\"main-panel wiki-main-panel\">\n        <div className=\"main-panel-hide hide\">{this.props.content}</div>\n        <div className={`main-panel-north panel-top ${this.props.permission === 'rw' ? 'border-left-show' : ''}`}>\n          {!username &&\n            <Fragment>\n              <div className=\"cur-view-toolbar\">\n                <span className=\"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle\" title=\"Side Nav Menu\" onClick={this.onMenuClick}></span>\n              </div>\n              <div className=\"common-toolbar\">\n                {isPro && (\n                  <Search isPublic={true} repoID={repoID} onSearchedClick={onSearchedClick} placeholder={gettext('Search files')}/>\n                )}\n              </div>\n            </Fragment>\n          }\n          {username && (\n            <Fragment>\n              <div className=\"cur-view-toolbar\">\n                <span className=\"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle\" title=\"Side Nav Menu\" onClick={this.onMenuClick}></span>\n                {this.props.permission == 'rw' && (\n                  Utils.isDesktop() ?\n                    <button className=\"btn btn-secondary operation-item\" title={gettext('Edit')} onClick={this.onEditClick}>{gettext('Edit')}</button> :\n                    <span className=\"fa fa-pencil-alt mobile-toolbar-icon\" title={gettext('Edit')} onClick={this.onEditClick} style={{'fontSize': '1.1rem'}}></span>\n                )}\n              </div>\n              <div className=\"common-toolbar\">\n                {isPro && (\n                  <Search isPublic={true} repoID={repoID} onSearchedClick={onSearchedClick} placeholder={gettext('Search files')}/>\n                )}\n                <Notification />\n                <Account />\n              </div>\n            </Fragment>\n          )}\n        </div>\n        <div className=\"main-panel-center\">\n          <div className={`cur-view-content ${isViewingFile ? 'o-hidden' : ''}`}>\n            {!this.props.pathExist && errMessage}\n            {this.props.pathExist && this.props.isDataLoading && <Loading />}\n            {isViewingFile && Utils.isMarkdownFile(this.props.path) && (\n              <SeafileMarkdownViewer\n                isWiki={true}\n                path={this.props.path}\n                repoID={repoID}\n                markdownContent={this.props.content}\n                isFileLoading={this.props.isDataLoading}\n                lastModified = {this.props.lastModified}\n                latestContributor={this.props.latestContributor}\n                onLinkClick={this.props.onLinkClick}\n              />\n            )}\n            {isViewingFile && Utils.isSdocFile(this.props.path) && (\n              <SdocWikiPageViewer\n                isWiki={true}\n                path={this.props.path}\n                repoID={repoID}\n                markdownContent={this.props.content}\n                isFileLoading={this.props.isDataLoading}\n                lastModified = {this.props.lastModified}\n                latestContributor={this.props.latestContributor}\n                onLinkClick={this.props.onLinkClick}\n              />\n            )}\n            {(!this.props.isDataLoading && !this.props.isViewFile) && (\n              <WikiDirListView\n                path={this.props.path}\n                direntList={this.props.direntList}\n                onDirentClick={this.props.onDirentClick}\n              />\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nMainPanel.propTypes = propTypes;\n\nexport default MainPanel;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/dashboard/content.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/dashboard/user-selector.js",["4418","4419"],[],"import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nimport '../../css/files-activities.css';\n\nconst propTypes = {\n  availableUsers: PropTypes.array.isRequired,\n  currentSelectedUsers: PropTypes.array.isRequired,\n  setTargetUsers: PropTypes.func.isRequired,\n  toggleSelectUser: PropTypes.func.isRequired\n};\n\nclass UserSelector extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isPopoverOpen: false,\n      query: ''\n    };\n  }\n\n  componentDidMount() {\n    document.addEventListener('click', this.handleOutsideClick);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.handleOutsideClick);\n  }\n\n  handleOutsideClick = (e) => {\n    const { isPopoverOpen } = this.state;\n    if (isPopoverOpen && !this.userSelector.contains(e.target)) {\n      this.togglePopover();\n    }\n  };\n\n  togglePopover = () => {\n    this.setState({\n      isPopoverOpen: !this.state.isPopoverOpen\n    }, () => {\n      if (!this.state.isPopoverOpen) {\n        const { availableUsers } = this.props;\n        const selectedUsers = availableUsers.filter(item => item.isSelected);\n        this.props.setTargetUsers(selectedUsers);\n      }\n    });\n  };\n\n  onToggleClick = (e) => {\n    e.stopPropagation();\n    this.togglePopover();\n  };\n\n  onQueryChange = (e) => {\n    this.setState({\n      query: e.target.value\n    });\n  };\n\n  toggleSelectItem = (e, targetItem) => {\n    e.stopPropagation();\n    this.props.toggleSelectUser(targetItem);\n  };\n\n  render() {\n    const { isPopoverOpen, query } = this.state;\n    const { currentSelectedUsers, availableUsers } = this.props;\n    const selectedUsers = availableUsers.filter(item => item.isSelected);\n    const filteredAvailableUsers = query.trim() ? availableUsers.filter(item => item.contact_email.indexOf(query.trim()) != -1 || item.name.indexOf(query.trim()) != -1) : availableUsers;\n    return (\n      <div className=\"mt-4 position-relative\">\n        <span className=\"cur-activity-modifiers d-inline-block p-2 rounded\" onClick={this.onToggleClick}>\n          {currentSelectedUsers.length > 0 ? (\n            <>\n              <span>{gettext('Modified by:')}</span>\n              <span className=\"d-inline-block ml-1\">{currentSelectedUsers.map(item => item.name).join(', ')}</span>\n            </>\n          ) : gettext('Modified by')}\n          <i className=\"fas fa-caret-down ml-2 toggle-icon\"></i>\n        </span>\n        {isPopoverOpen && (\n          <div className=\"position-absolute activity-modifier-selector-container rounded shadow\" ref={ref => this.userSelector = ref}>\n            <ul className=\"activity-selected-modifiers px-3 py-1 list-unstyled\">\n              {selectedUsers.map((item, index) => {\n                return (\n                  <li key={index} className=\"activity-selected-modifier\">\n                    <img src={item.avatar_url} className=\"avatar w-5 h-5\" alt=\"\" />\n                    <span className=\"activity-user-name ml-2\">{item.name}</span>\n                    <i className=\"sf2-icon-close unselect-activity-user ml-2\" onClick={(e) => {this.toggleSelectItem(e, item);}}></i>\n                  </li>\n                );\n              })}\n            </ul>\n            <div className=\"px-3 pt-3\">\n              <Input\n                type=\"text\"\n                placeholder={gettext('Find modifiers')}\n                value={query}\n                onChange={this.onQueryChange}\n              />\n            </div>\n            <ul className=\"activity-user-list list-unstyled p-3 o-auto\">\n              {filteredAvailableUsers.map((item, index) => {\n                return (\n                  <li key={index} className=\"activity-user-item h-6 p-1 rounded d-flex justify-content-between align-items-center\" onClick={(e) => {this.toggleSelectItem(e, item);}}>\n                    <div>\n                      <img src={item.avatar_url} className=\"avatar w-5 h-5\" alt=\"\" />\n                      <span className=\"activity-user-name ml-2\">{item.name}</span>\n                    </div>\n                    {item.isSelected && <i className=\"sf2-icon-tick text-gray font-weight-bold\"></i>}\n                  </li>\n                );\n              })}\n            </ul>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nUserSelector.propTypes = propTypes;\n\nexport default UserSelector;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/tree-view/tree-node.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/shared-repo-info.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/confirm-unlink-device.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/repo.js",["4420"],[],"import { Utils } from '../utils/utils';\n\nclass Repo {\n  constructor(object) {\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.permission = object.permission;\n    this.size_original = object.size;\n    this.size = Utils.bytesToSize(object.size);\n    this.owner_name = object.owner_name;\n    this.owner_email = object.owner_email;\n    this.owner_contact_email = object.owner_contact_email;\n    this.encrypted = object.encrypted;\n    this.last_modified = object.last_modified;\n    this.modifier_contact_email = object.modifier_contact_email;\n    this.modifier_email = object.modifier_email;\n    this.modifier_name = object.modifier_name;\n    this.type = object.type;\n    this.starred = object.starred;\n    this.monitored = object.monitored;\n    this.status = object.status;\n    this.storage_name = object.storage_name;\n    if (object.is_admin != undefined) {\n      this.is_admin = object.is_admin;\n    }\n  }\n}\n\nexport default Repo;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sort-options.js",["4421"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortOptions: PropTypes.array,\n  sortItems: PropTypes.func.isRequired\n};\n\nclass SortOptions extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.sortOptions = this.props.sortOptions || [\n      {value: 'name-asc', text: gettext('By name ascending')},\n      {value: 'name-desc', text: gettext('By name descending')},\n      {value: 'size-asc', text: gettext('By size ascending')},\n      {value: 'size-desc', text: gettext('By size descending')},\n      {value: 'time-asc', text: gettext('By time ascending')},\n      {value: 'time-desc', text: gettext('By time descending')}\n    ];\n    const { sortBy, sortOrder } = this.props;\n    this.state = {\n      currentOption: `${sortBy}-${sortOrder}`\n    };\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    this.setState({\n      currentOption: e.target.value\n    });\n\n    const [sortBy, sortOrder] = e.target.value.split('-');\n    this.props.sortItems(sortBy, sortOrder);\n    this.props.toggleDialog();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody>\n          {this.sortOptions.map((item, index) => {\n            return (\n              <Fragment key={index}>\n                <input id={`option-${index}`} className=\"align-middle\" type=\"radio\" name=\"sort-option\" value={item.value} checked={this.state.currentOption == item.value} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"align-middle m-2\">{item.text}</label><br />\n              </Fragment>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nSortOptions.propTypes = propTypes;\n\nexport default SortOptions;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/libs-mobile-thead.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/repo-monitored-icon.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/share-link-permission-select.js",["4422"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  currentPerm: PropTypes.string.isRequired,\n  permissions: PropTypes.array.isRequired,\n  changePerm: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ShareLinkPermissionSelect extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentOption: this.props.currentPerm\n    };\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    const currentOption = e.target.value;\n    this.setState({\n      currentOption: currentOption\n    });\n\n    this.props.changePerm(currentOption);\n    this.props.toggleDialog();\n  };\n\n  render() {\n    const options = this.props.permissions;\n    const { currentOption } = this.state;\n\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody>\n          {options.map((item, index) => {\n            return (\n              <div className=\"d-flex\" key={index}>\n                <input id={`option-${index}`} className=\"mt-1\" type=\"radio\" name=\"permission\" value={item} checked={currentOption == item} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"ml-2\">\n                  {Utils.getShareLinkPermissionObject(item).text}\n                </label>\n              </div>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nShareLinkPermissionSelect.propTypes = propTypes;\n\nexport default ShareLinkPermissionSelect;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/upload-link.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toolbar/top-toolbar.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/share-link.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toolbar/repo-view-toobar.js",["4423","4424","4425","4426"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport CreateRepoDialog from '../dialog/create-repo-dialog';\nimport { DropdownToggle, Dropdown, DropdownMenu, DropdownItem } from 'reactstrap';\n\nconst propTypes = {\n  libraryType: PropTypes.string.isRequired,\n  onCreateRepo: PropTypes.func.isRequired,\n  onShowSidePanel: PropTypes.func.isRequired,\n};\n\nclass RepoViewToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCreateRepoDialogShow: false,\n      isOpen: false,\n    };\n  }\n\n  onCreateRepo = (repo) => {\n    this.props.onCreateRepo(repo);\n    this.onCreateToggle();\n  };\n\n  onCreateToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  };\n\n  toggleMore = () => {\n    this.setState({ isOpen: !this.state.isOpen });\n  };\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.toggleMore();\n    }\n  };\n\n  visitDeletedviaKey = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      navigate(`${siteRoot}my-libs/deleted/`);\n    }\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n          {Utils.isDesktop() ? (\n            <div className=\"operation\">\n              <button className=\"btn btn-secondary operation-item\" title={gettext('New Library')} onClick={this.onCreateToggle}>\n                <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n              </button>\n              <Dropdown isOpen={this.state.isOpen} toggle={this.toggleMore}>\n                <DropdownToggle className='btn btn-secondary operation-item' onKeyDown={this.onDropdownToggleKeyDown}>\n                  {gettext('More')}\n                </DropdownToggle>\n                <DropdownMenu>\n                  <DropdownItem className=\"link-dropdown-container\" onKeyDown={this.visitDeletedviaKey}>\n                    <Link className=\"link-dropdown-item\" to={siteRoot + 'my-libs/deleted/'}>{gettext('Deleted Libraries')}</Link>\n                  </DropdownItem>\n                </DropdownMenu>\n              </Dropdown>\n            </div>\n          ) : (\n            <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Library')} onClick={this.onCreateToggle}></span>\n          )}\n        </div>\n        {this.state.isCreateRepoDialogShow && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.props.libraryType}\n              onCreateRepo={this.onCreateRepo}\n              onCreateToggle={this.onCreateToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nRepoViewToolbar.propTypes = propTypes;\n\nexport default RepoViewToolbar;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/guide-for-new-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/my-libs/mylib-repo-list-view.js",["4427","4428","4429","4430","4431","4432"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport { gettext, storages } from '../../utils/constants';\nimport MylibRepoListItem from './mylib-repo-list-item';\nimport LibsMobileThead from '../../components/libs-mobile-thead';\n\nconst propTypes = {\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  repoList: PropTypes.array.isRequired,\n  sortRepoList: PropTypes.func.isRequired,\n  onRenameRepo: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onTransferRepo: PropTypes.func.isRequired,\n  onRepoClick: PropTypes.func.isRequired,\n  onMonitorRepo: PropTypes.func.isRequired,\n};\n\nclass MylibRepoListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  };\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  };\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  };\n\n  renderRepoListView = () => {\n    return (\n      <Fragment>\n        {this.props.repoList.map(item => {\n          return (\n            <MylibRepoListItem\n              key={item.repo_id}\n              repo={item}\n              isItemFreezed={this.state.isItemFreezed}\n              onFreezedItem={this.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n              onRenameRepo={this.props.onRenameRepo}\n              onDeleteRepo={this.props.onDeleteRepo}\n              onTransferRepo={this.props.onTransferRepo}\n              onMonitorRepo={this.props.onMonitorRepo}\n              onRepoClick={this.props.onRepoClick}\n            />\n          );\n        })}\n      </Fragment>\n    );\n  };\n\n  renderPCUI = () => {\n    const showStorageBackend = storages.length > 0;\n    const sortIcon = this.props.sortOrder === 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width={showStorageBackend ? '33%' : '38%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {this.props.sortBy === 'name' && sortIcon}</a></th>\n            <th width=\"14%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width={showStorageBackend ? '15%' : '20%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {this.props.sortBy === 'size' && sortIcon}</a></th>\n            {showStorageBackend ? <th width=\"15%\">{gettext('Storage Backend')}</th> : null}\n            <th width={showStorageBackend ? '15%' : '20%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {this.props.sortBy === 'time' && sortIcon}</a></th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  };\n\n  renderMobileUI = () => {\n    return (\n      <table className=\"table-thead-hidden\">\n        <LibsMobileThead />\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <MediaQuery query=\"(min-width: 768px)\">\n          {this.renderPCUI()}\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {this.renderMobileUI()}\n        </MediaQuery>\n      </Fragment>\n    );\n  }\n}\n\nMylibRepoListView.propTypes = propTypes;\n\nexport default MylibRepoListView;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/shared-folder-info.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/select-editor/share-permission-editor.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/markdown-editor/header-toolbar/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dirent-detail/lib-details.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/share-repo-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/create-repo-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/tree-view/tree-helper.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/share-with-ocm/remote-dir-topbar.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/group.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/rename-group-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/transfer-group-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/dismiss-group-dialog.js",["4433"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass DismissGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  dismissGroup = () => {\n    let that = this;\n    seafileAPI.deleteGroup(this.props.groupID).then((res)=> {\n      that.props.onGroupChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showDismissGroupDialog} toggle={this.props.toggleDismissGroupDialog}>\n        <ModalHeader>{gettext('Delete Group')}</ModalHeader>\n        <ModalBody>\n          <span>{gettext('Really want to delete this group?')}</span>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDismissGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.dismissGroup}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst DismissGroupDialogPropTypes = {\n  showDismissGroupDialog: PropTypes.bool.isRequired,\n  toggleDismissGroupDialog: PropTypes.func.isRequired,\n  loadGroup: PropTypes.func.isRequired,\n  groupID: PropTypes.string,\n  onGroupChanged: PropTypes.func.isRequired,\n};\n\nDismissGroupDialog.propTypes = DismissGroupDialogPropTypes;\n\nexport default DismissGroupDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/share-with-ocm/remote-dir-content.js",["4434","4435","4436"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\n\nclass DirentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  };\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  };\n\n  openFolder = () => {\n    this.props.openFolder(this.props.dirent);\n  };\n\n  downloadDirent = (e) => {\n    e.preventDefault();\n    this.props.downloadDirent(this.props.dirent);\n  };\n\n  render () {\n    let { isOpIconShown } = this.state;\n    let { dirent } = this.props;\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n          <td>\n            {dirent.is_file ?\n              dirent.name :\n              <Link to=\"#\" onClick={this.openFolder}>{dirent.name}</Link>\n            }\n          </td>\n          <td>\n            {isOpIconShown && dirent.is_file &&\n            <a href=\"#\" className=\"op-icon sf2-icon-download\" title={gettext('Download')} onClick={this.downloadDirent}></a>\n            }\n          </td>\n          <td>{Utils.bytesToSize(dirent.size)}</td>\n          <td>{moment(dirent.mtime).fromNow()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\nDirentItem.propTypes = {\n  dirent: PropTypes.object.isRequired,\n  openFolder: PropTypes.func.isRequired,\n  deleteDirent: PropTypes.func.isRequired,\n  downloadDirent: PropTypes.func.isRequired,\n};\n\nclass DirContent extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { loading, errorMsg, direntList } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    }\n\n    return (\n      <Fragment>\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"5%\">{/*icon*/}</th>\n              <th width=\"55%\">{gettext('Name')}</th>\n              <th width=\"10%\">{/*operation*/}</th>\n              <th width=\"15%\">{gettext('Size')}</th>\n              <th width=\"15%\">{gettext('Last Update')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return <DirentItem\n                key={index}\n                dirent={dirent}\n                openFolder={this.props.openFolder}\n                deleteDirent={this.props.deleteDirent}\n                downloadDirent={this.props.downloadDirent}\n              />;\n            })}\n          </tbody>\n        </table>\n      </Fragment>\n    );\n  }\n}\n\nDirContent.propTypes =  {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  direntList: PropTypes.array.isRequired,\n  openFolder: PropTypes.func.isRequired,\n  deleteDirent: PropTypes.func.isRequired,\n  downloadDirent: PropTypes.func.isRequired,\n};\n\nexport default DirContent;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/leave-group-dialog.js",["4437"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, username } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass LeaveGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  leaveGroup = () => {\n    seafileAPI.quitGroup(this.props.groupID, username).then((res)=> {\n      this.props.onGroupChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    return(\n      <Modal isOpen={true} toggle={this.props.toggleLeaveGroupDialog}>\n        <ModalHeader toggle={this.props.toggleLeaveGroupDialog}>{gettext('Leave Group')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Really want to leave this group?')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleLeaveGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.leaveGroup}>{gettext('Leave')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst LeaveGroupDialogPropTypes = {\n  toggleLeaveGroupDialog: PropTypes.func.isRequired,\n  groupID: PropTypes.string,\n  onGroupChanged: PropTypes.func.isRequired,\n};\n\nLeaveGroupDialog.propTypes = LeaveGroupDialogPropTypes;\n\nexport default LeaveGroupDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/create-group-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/manage-members-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/markdown-editor/detail-list-view/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/import-members-dialog.js",["4438"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, siteRoot, groupImportMembersExtraMsg } from '../../utils/constants';\n\nconst propTypes = {\n  toggleImportMembersDialog: PropTypes.func.isRequired,\n  importMembersInBatch: PropTypes.func.isRequired,\n};\n\nclass ImportMembersDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: ''\n    };\n    this.fileInputRef = React.createRef();\n  }\n\n  toggle = () => {\n    this.props.toggleImportMembersDialog();\n  };\n\n  openFileInput = () => {\n    this.fileInputRef.current.click();\n  };\n\n  uploadFile = (e) => {\n    // no file selected\n    if (!this.fileInputRef.current.files.length) {\n      return;\n    }\n    // check file extension\n    let fileName = this.fileInputRef.current.files[0].name;\n    if(fileName.substr(fileName.lastIndexOf('.') + 1) != 'xlsx') {\n      this.setState({\n        errorMsg: gettext('Please choose a .xlsx file.')\n      });\n      return;\n    }\n    const file = this.fileInputRef.current.files[0];\n    this.props.importMembersInBatch(file);\n    this.toggle();\n  };\n\n  render() {\n    let { errorMsg } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Import members from a .xlsx file')}</ModalHeader>\n\n        <ModalBody>\n          <p>{groupImportMembersExtraMsg}</p>\n          <p><a className=\"text-secondary small\" href={`${siteRoot}api/v2.1/group-members-import-example/`}>{gettext('Download an example file')}</a></p>\n          <button className=\"btn btn-outline-primary\" onClick={this.openFileInput}>{gettext('Upload file')}</button>\n          <input className=\"d-none\" type=\"file\" onChange={this.uploadFile} ref={this.fileInputRef} />\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nImportMembersDialog.propTypes = propTypes;\n\nexport default ImportMembersDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/shared-repo-list-view/shared-repo-list-view.js",["4439","4440","4441","4442","4443","4444","4445","4446","4447","4448"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport SharedRepoListItem from './shared-repo-list-item';\nimport toaster from '../toast';\nimport LibsMobileThead from '../libs-mobile-thead';\nimport Loading from '../loading';\n\nconst propTypes = {\n  libraryType: PropTypes.string,\n  currentGroup: PropTypes.object,\n  isShowTableThread: PropTypes.bool,\n  sortBy: PropTypes.string,\n  sortOrder: PropTypes.string,\n  sortItems: PropTypes.func,\n  repoList: PropTypes.array.isRequired,\n  onItemUnshare: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func,\n  onItemDetails: PropTypes.func,\n  onItemRename: PropTypes.func,\n  hasNextPage: PropTypes.bool,\n  onMonitorRepo: PropTypes.func,\n};\n\nclass SharedRepoListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  getSortMetaData = () => {\n    return {\n      sortByName: this.props.sortBy == 'name',\n      sortByTime: this.props.sortBy == 'time',\n      sortBySize: this.props.sortBy == 'size',\n      sortIcon: this.props.sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>\n    };\n  };\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  onItemRename = (repo, newName) => {\n    let isDuplicated = this.props.repoList.some(item => {\n      return item.name === newName;\n    });\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      toaster.danger(errMessage);\n      return false;\n    }\n    this.props.onItemRename(repo, newName);\n  };\n\n  renderRepoListView = () => {\n    return (\n      <Fragment>\n        {this.props.repoList.map(repo => {\n          return (\n            <SharedRepoListItem\n              key={repo.repo_id}\n              repo={repo}\n              libraryType={this.props.libraryType}\n              currentGroup={this.props.currentGroup}\n              isItemFreezed={this.state.isItemFreezed}\n              onFreezedItem={this.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n              onItemUnshare={this.props.onItemUnshare}\n              onItemDelete={this.props.onItemDelete}\n              onItemDetails={this.props.onItemDetails}\n              onItemRename={this.props.onItemRename}\n              onMonitorRepo={this.props.onMonitorRepo}\n            />\n          );\n        })}\n      </Fragment>\n    );\n  };\n\n  renderPCUI = () => {\n    let isShowTableThread = this.props.isShowTableThread !== undefined ? this.props.isShowTableThread : true;\n\n    const { sortByName, sortByTime, sortBySize, sortIcon } = this.getSortMetaData();\n\n    return (\n      <table className={isShowTableThread ? '' : 'table-thead-hidden'}>\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width=\"36%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n            <th width=\"12%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width={'14%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n            <th width={'14%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n            <th width=\"16%\">{gettext('Owner')}</th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  };\n\n  renderMobileUI = () => {\n    return (\n      <table className=\"table-thead-hidden\">\n        <LibsMobileThead />\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  };\n\n  render() {\n    const table = Utils.isDesktop() ? this.renderPCUI() : this.renderMobileUI();\n    if (this.props.hasNextPage) {\n      return (\n        <Fragment>\n          {table}\n          <Loading />\n        </Fragment>\n      );\n    } else {\n      return table;\n    }\n  }\n}\n\nSharedRepoListView.propTypes = propTypes;\n\nexport default SharedRepoListView;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/share-with-ocm/remote-dir-path.js",["4449","4450"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  };\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return null;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  };\n\n  render() {\n    let { currentPath, repoName } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    return (\n      <div className=\"path-container\">\n        <Link to={siteRoot + 'shared-with-ocm/'} className=\"normal\" onClick={(e) => this.props.onTabNavClick('shared-with-ocm')}>{gettext('All')}</Link>\n        <span className=\"path-split\">/</span>\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toolbar/groups-toolbar.js",["4451"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport CommonToolbar from './common-toolbar';\nimport { Button } from 'reactstrap';\nimport { gettext, canAddGroup } from '../../utils/constants';\n\nconst propTypes = {\n  searchPlaceholder: PropTypes.string,\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  toggleAddGroupModal: PropTypes.func.isRequired,\n};\n\nclass GroupsToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\"></span>\n          {canAddGroup && (\n            <div className=\"operation\">\n              <MediaQuery query=\"(min-width: 768px)\">\n                <Button color=\"btn btn-secondary operation-item\" onClick={this.props.toggleAddGroupModal}>\n                  <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Group')}\n                </Button>\n              </MediaQuery>\n              <MediaQuery query=\"(max-width: 767.8px)\">\n                <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Group')} onClick={this.props.toggleAddGroupModal}></span>\n              </MediaQuery>\n            </div>\n          )}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick}/>\n      </div>\n    );\n  }\n}\n\nGroupsToolbar.propTypes = propTypes;\n\nexport default GroupsToolbar;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/perm-select.js",["4452"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\nimport CustomPermission from '../../models/custom-permission';\nimport Loading from '../loading';\nimport toaster from '../toast';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nconst propTypes = {\n  repoID: PropTypes.string,\n  currentPerm: PropTypes.string.isRequired,\n  permissions: PropTypes.array.isRequired,\n  changePerm: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass PermSelect extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLoading: true,\n      currentOption: this.props.currentPerm,\n      customPermissions: []\n    };\n\n    this.customPermissions = null;\n  }\n\n  componentDidMount() {\n    if (this.props.repoID) {\n      this.listCustomPermissions();\n    } else {\n      this.setState({isLoading: false});\n    }\n  }\n\n  listCustomPermissions = () => {\n    const { repoID } = this.props;\n    seafileAPI.listCustomPermissions(repoID).then(res => {\n      const { permission_list: permissions } = res.data;\n      const customPermissions = permissions.map(item => new CustomPermission(item));\n      this.setState({\n        isLoading: false,\n        customPermissions: customPermissions\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n      this.setState({isLoading: false});\n    });\n  };\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    const currentOption = e.target.value;\n    this.setState({\n      currentOption: currentOption\n    });\n\n    this.props.changePerm(currentOption);\n    this.props.toggleDialog();\n  };\n\n  translatePermission = (permission) => {\n    let value = Utils.sharePerms(permission);\n    if (!value) {\n      const { customPermissions } = this.state;\n      const item = customPermissions.find(item => item.id + '' === permission);\n      value = item && item.name;\n    }\n    return value;\n  };\n\n  translateExplanation = (explanation) => {\n    let value = Utils.sharePermsExplanation(explanation);\n    if (!value) {\n      const { customPermissions } = this.state;\n      const item = customPermissions.find(item => item.id + '' === explanation);\n      value = item && item.description;\n    }\n    return value;\n  };\n\n  getPermissions = () => {\n    const { permissions } = this.props;\n    let newPermissions = permissions.slice();\n    const { customPermissions } = this.state;\n    if (!this.customPermissions) {\n      if (customPermissions.length > 0) {\n        customPermissions.forEach(item => {\n          newPermissions.push(item.id + '');\n        });\n      }\n      this.customPermissions = newPermissions;\n    }\n    return this.customPermissions;\n  };\n\n\n  render() {\n    const { isLoading, currentOption } = this.state;\n    let permissions = [];\n    if (!isLoading) {\n      permissions = this.getPermissions();\n    }\n\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody style={{maxHeight: '400px', overflow: 'auto'}}>\n          {isLoading && <Loading />}\n          {!isLoading && permissions.map((item, index) => {\n            return (\n              <div className=\"d-flex\" key={index}>\n                <input id={`option-${index}`} className=\"mt-1\" type=\"radio\" name=\"permission\" value={item} checked={currentOption == item} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"ml-2\">\n                  {this.translatePermission(item)}\n                  <p className=\"text-secondary small m-0\">\n                    {this.translateExplanation(item)}\n                  </p>\n                </label>\n              </div>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nPermSelect.propTypes = propTypes;\n\nexport default PermSelect;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/file-tag.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/lib-content-view/lib-content-toolbar.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/repo-info.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/lib-decrypt-dialog.js",["4453"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody, Form } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nimport '../../css/lib-decrypt.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  onLibDecryptDialog: PropTypes.func.isRequired\n};\n\n\nclass LibDecryptDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      password: '',\n      showError: false,\n    };\n  }\n\n  handleSubmit = (e) => {\n    let repoID = this.props.repoID;\n    let password = this.state.password;\n    seafileAPI.setRepoDecryptPassword(repoID, password).then(res => {\n      this.props.onLibDecryptDialog();\n    }).catch(res => {\n      this.setState({\n        showError: true\n      });\n    });\n\n    e.preventDefault();\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit(e);\n    }\n  };\n\n  handleChange = (e) => {\n    this.setState({\n      password: e.target.value,\n      showError: false\n    });\n  };\n\n  toggle = () => {\n    window.location.href = siteRoot;\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalBody>\n          <button type=\"button\" className=\"close\" onClick={this.toggle}><span aria-hidden=\"true\"></span></button>\n          <Form className=\"lib-decrypt-form text-center\">\n            <img src={`${mediaUrl}img/lock.png`} alt=\"\" aria-hidden=\"true\" />\n            <p className=\"intro\">{gettext('This library is password protected')}</p>\n            {this.state.showError &&\n              <p className=\"error\">{gettext('Wrong password')}</p>\n            }\n            <input type=\"password\" name=\"password\" className=\"form-control password-input\" autoComplete=\"off\" onKeyDown={this.handleKeyDown} placeholder={gettext('Password')} onChange={this.handleChange} />\n            <button type=\"submit\" className=\"btn btn-primary submit\" onClick={this.handleSubmit}>{gettext('Submit')}</button>\n            <p className=\"tip\">{'* '}{gettext('The password will be kept in the server for only 1 hour.')}</p>\n          </Form>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nLibDecryptDialog.propTypes = propTypes;\n\nexport default LibDecryptDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/collab-server.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/new-wiki-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/delete-folder-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/wiki-select-dialog.js",["4454","4455"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport moment from 'moment';\nimport Repo from '../../models/repo';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  addWiki: PropTypes.func.isRequired\n};\n\nclass WikiSelectDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repos: [],\n      repoID: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos().then(res => {\n      let repoList = res.data.repos\n        .filter(item => {\n          switch (item.type) {\n            case 'mine': // my libraries\n              return !item.encrypted;\n            case 'shared': // libraries shared with me\n              // 'is_admin': the library is shared with 'admin' permission\n              return !item.encrypted && item.is_admin;\n            case 'group':\n            default:\n              return !item.encrypted && !res.data.repos.some(repo => {\n                // just remove the duplicated libraries\n                return repo.type != item.type && repo.repo_id == item.repo_id;\n              });\n          }\n        })\n        .map(item => {\n          let repo = new Repo(item);\n          return repo;\n        });\n      repoList = Utils.sortRepos(repoList, 'name', 'asc');\n      this.setState({repos: repoList});\n    });\n  }\n\n  onChange = (repo) => {\n    this.setState({\n      repoID: repo.repo_id,\n    });\n  };\n\n  handleSubmit = () => {\n    let { repoID } = this.state;\n    this.props.addWiki(repoID);\n    this.props.toggleCancel();\n  };\n\n  toggle = () => {\n    this.props.toggleCancel();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Publish a Library')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='6%'>{/* select */}</th>\n                <th width='9%'>{/* icon */}</th>\n                <th width='55%'>{gettext('Name')}</th>\n                <th width='30%'>{gettext('Last Update')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.repos.map((repo, index) => {\n                return (\n                  <tr key={index}>\n                    <td className=\"text-center\"><input type=\"radio\" className=\"vam\" name=\"repo\" value={repo.repo_id} onChange={this.onChange.bind(this, repo)} /></td>\n                    <td className=\"text-center\"><img src={Utils.getLibIconUrl(repo, false)} width=\"24\" title={Utils.getLibIconTitle(repo)} alt={Utils.getLibIconTitle(repo)} /></td>\n                    <td>{repo.repo_name}</td>\n                    <td>{moment(repo.last_modified).fromNow()}</td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          {this.state.repoID ?\n            <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>:\n            <Button color=\"primary\" disabled>{gettext('Submit')}</Button>\n          }\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nWikiSelectDialog.propTypes = propTypes;\n\nexport default WikiSelectDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/op-icon.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/lib-content-view/lib-content-container.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toolbar/invitations-toolbar.js",["4456"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\nimport { Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  toggleInvitePeopleDialog: PropTypes.func.isRequired,\n  searchPlaceholder: PropTypes.string.isRequired,\n};\n\nclass InvitationsToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { onShowSidePanel, onSearchedClick, toggleInvitePeopleDialog } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\">\n          </span>\n          {Utils.isDesktop() ? (\n            <div className=\"operation\">\n              <Button color=\"btn btn-secondary operation-item\" onClick={toggleInvitePeopleDialog}>\n                <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Invite Guest')}\n              </Button>\n            </div>\n          ) : (\n            <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('Invite Guest')} onClick={toggleInvitePeopleDialog}></span>\n          )}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick}/>\n      </div>\n    );\n  }\n}\n\nInvitationsToolbar.propTypes = propTypes;\n\nexport default InvitationsToolbar;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/invite-people-dialog.js",["4457"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport toaster from '../toast';\nimport Loading from '../loading';\n\nconst InvitePeopleDialogPropTypes = {\n  onInvitePeople: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass InvitePeopleDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      emails: '',\n      errorMsg: '',\n      isSubmitting: false\n    };\n  }\n\n  handleInputChange = (e) => {\n    let emails = e.target.value;\n    this.setState({\n      emails: emails\n    });\n    if (this.state.errorMsg) {\n      this.setState({\n        errorMsg: ''\n      });\n    }\n  };\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      e.preventDefault();\n      this.handleSubmitInvite();\n    }\n  };\n\n  handleSubmitInvite = () => {\n    let emails = this.state.emails.trim();\n    if (!emails) {\n      this.setState({\n        errorMsg: gettext('It is required.')\n      });\n      return false;\n    }\n\n    let emailsArray = [];\n    emails = emails.split(',');\n    for (let i = 0, len = emails.length; i < len; i++) {\n      let email = emails[i].trim();\n      if (email) {\n        emailsArray.push(email);\n      }\n    }\n\n    if (!emailsArray.length) {\n      this.setState({\n        errorMsg: gettext('Email is invalid.')\n      });\n      return false;\n    }\n\n    this.setState({\n      isSubmitting: true\n    });\n    seafileAPI.invitePeople(emailsArray).then((res) => {\n      this.props.toggleDialog();\n      const success = res.data.success;\n      if (success.length) {\n        let successMsg = '';\n        if (success.length == 1) {\n          successMsg = gettext('Successfully invited %(email).')\n            .replace('%(email)', success[0].accepter);\n        } else {\n          successMsg = gettext('Successfully invited %(email) and %(num) other people.')\n            .replace('%(email)', success[0].accepter)\n            .replace('%(num)', success.length - 1);\n        }\n        toaster.success(successMsg);\n        this.props.onInvitePeople(success);\n      }\n      const failed = res.data.failed;\n      if (failed.length) {\n        for (let i = 0, len = failed.length; i < len; i++) {\n          let failedMsg = failed[i].email + ': ' + failed[i].error_msg;\n          toaster.danger(failedMsg);\n        }\n      }\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.props.toggleDialog();\n    });\n  };\n\n  render() {\n    const { isSubmitting } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>{gettext('Invite Guest')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"emails\">{gettext('Emails')}</label>\n          <Input\n            type=\"text\"\n            id=\"emails\"\n            placeholder={gettext('Emails, separated by \\',\\'')}\n            value={this.state.emails}\n            onChange={this.handleInputChange}\n            onKeyDown={this.handleKeyDown}\n          />\n          <p className=\"error mt-2\">{this.state.errorMsg}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button className=\"submit-btn\" color=\"primary\" onClick={this.handleSubmitInvite} disabled={isSubmitting}>{isSubmitting ? <Loading /> : gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nInvitePeopleDialog.propTypes = InvitePeopleDialogPropTypes;\n\nexport default InvitePeopleDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/invitation-revoke-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-uploader/file-uploader.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dirent-detail/file-details.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-view/file-info.js",["4458","4459"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { isPro, gettext, mediaUrl, siteRoot } from '../../utils/constants';\nimport { InternalLinkOperation } from '../operations';\n\nconst propTypes = {\n  toggleStar: PropTypes.func.isRequired,\n  isLocked: PropTypes.bool.isRequired,\n  isStarred: PropTypes.bool.isRequired\n};\n\nconst { fileName, repoID, filePath,\n  latestContributor, latestContributorName, lastModificationTime\n} = window.app.pageOptions;\n\nclass FileInfo extends React.PureComponent {\n\n  constructor(props) {\n    super(props);\n  }\n\n  toggleStar = (e) => {\n    e.preventDefault();\n    this.props.toggleStar();\n  };\n\n  render() {\n    const { isStarred, isLocked } = this.props;\n    const starredText = isStarred ? gettext('starred') : gettext('unstarred');\n    const lockedText = gettext('locked');\n    return (\n      <div className=\"text-truncate\">\n        <h2 className=\"file-title d-flex align-items-center\">\n          <span className=\"file-name text-truncate\" title={fileName}>{fileName}</span>\n          <a className={`file-star ${isStarred ? 'fa' : 'far'} fa-star`}\n            href=\"#\"\n            title={starredText}\n            role=\"button\"\n            aria-label={isStarred ? gettext('Unstar') : gettext('Star')}\n            onClick={this.toggleStar}>\n          </a>\n          <InternalLinkOperation repoID={repoID} path={filePath} />\n          {(isPro && isLocked) &&\n            <img className=\"file-locked-icon\" width=\"16\"\n              src={`${mediaUrl}img/file-locked-32.png`}\n              alt={lockedText}\n              title={lockedText}\n              aria-label={lockedText}\n            />\n          }\n        </h2>\n        <div className=\"meta-info\">\n          <a href={`${siteRoot}profile/${encodeURIComponent(latestContributor)}/`}>{latestContributorName}</a>\n          <span className=\"ml-2\">{moment(lastModificationTime * 1000).format('YYYY-MM-DD HH:mm')}</span>\n        </div>\n      </div>\n    );\n  }\n}\n\nFileInfo.propTypes = propTypes;\n\nexport default FileInfo;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-view/file-toolbar.js",["4460","4461","4462","4463","4464","4465","4466","4467"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { ButtonGroup, ButtonDropdown, Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport IconButton from '../icon-button';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport ModalPortal from '../modal-portal';\nimport ShareDialog from '../dialog/share-dialog';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\n\nconst propTypes = {\n  isLocked: PropTypes.bool.isRequired,\n  lockedByMe: PropTypes.bool.isRequired,\n  onSave: PropTypes.func,\n  isSaving: PropTypes.bool,\n  needSave: PropTypes.bool,\n  toggleLockFile: PropTypes.func.isRequired,\n  toggleDetailsPanel: PropTypes.func.isRequired\n};\n\nconst {\n  canLockUnlockFile,\n  repoID, repoName, repoEncrypted, parentDir, filePerm, filePath,\n  fileType,\n  fileName,\n  canEditFile, err,\n  // fileEnc, // for 'edit', not undefined only for some kinds of files (e.g. text file)\n  canDownloadFile,\n} = window.app.pageOptions;\n\nclass FileToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      dropdownOpen: false,\n      moreDropdownOpen: false,\n      isShareDialogOpen: false,\n    };\n  }\n\n  async componentDidMount() {\n    if (filePerm && filePerm.startsWith('custom-')) {\n      this.isCustomPermission = true;\n      const permissionID = filePerm.split('-')[1];\n      try {\n        const permissionRes = await seafileAPI.getCustomPermission(repoID, permissionID);\n        this.customPermission = permissionRes.data.permission;\n        // share dialog need a global custom_permission\n        window.custom_permission = this.customPermission;\n        this.setState({isLoading: false});\n      } catch(error) {\n        let errorMsg = Utils.getErrorMsg(error);\n        toaster.danger(errorMsg);\n        this.setState({isLoading: false});\n      }\n    } else {\n      this.setState({isLoading: false});\n    }\n  }\n\n  toggleShareDialog = () => {\n    this.setState({isShareDialogOpen: !this.state.isShareDialogOpen});\n  };\n\n  toggleMoreOpMenu = () => {\n    this.setState({\n      moreDropdownOpen: !this.state.moreDropdownOpen\n    });\n  };\n\n  toggle = () => {\n    this.setState({\n      dropdownOpen: !this.state.dropdownOpen\n    });\n  };\n\n  render() {\n    if (this.state.isLoading) {\n      return null;\n    }\n\n    const { isLocked, lockedByMe } = this.props;\n    const { moreDropdownOpen } = this.state;\n    let showLockUnlockBtn = false;\n    let lockUnlockText, lockUnlockIcon;\n    if (canLockUnlockFile) {\n      if (!isLocked) {\n        showLockUnlockBtn = true;\n        lockUnlockText = gettext('Lock');\n        lockUnlockIcon = 'fa fa-lock';\n      } else if (lockedByMe) {\n        showLockUnlockBtn = true;\n        lockUnlockText = gettext('Unlock');\n        lockUnlockIcon = 'fa fa-unlock';\n      }\n    }\n\n    let showShareBtn = false;\n    if (repoEncrypted) {\n      showShareBtn = true; // for internal link\n    } else if (filePerm == 'rw' || filePerm == 'r') {\n      showShareBtn = true;\n    }\n\n    const { isCustomPermission, customPermission } = this;\n    if (isCustomPermission) {\n      const { download_external_link } = customPermission.permission;\n      showShareBtn = download_external_link;\n    }\n\n    return (\n      <Fragment>\n        <ButtonGroup className=\"d-none d-md-block flex-shrink-0 ml-4\">\n          {fileType == 'PDF' && (\n            <IconButton\n              id=\"seafile-pdf-print\"\n              icon=\"fa fa-print\"\n              text={gettext('Print')}\n            />\n          )}\n          <IconButton\n            id=\"open-parent-folder\"\n            icon=\"fa fa-folder-open\"\n            text={gettext('Open parent folder')}\n            tag=\"a\"\n            href={`${siteRoot}library/${repoID}/${Utils.encodePath(repoName + parentDir)}`}\n          />\n          {showLockUnlockBtn && (\n            <IconButton\n              id=\"lock-unlock-file\"\n              icon={lockUnlockIcon}\n              text={lockUnlockText}\n              onClick={this.props.toggleLockFile}\n            />\n          )}\n          {showShareBtn && (\n            <IconButton\n              id=\"share-file\"\n              icon='fa fa-share-alt'\n              text={gettext('Share')}\n              onClick={this.toggleShareDialog}\n            />\n          )}\n\n          {(canEditFile && fileType != 'SDoc' && !err) &&\n            ( this.props.isSaving ?\n              <button type={'button'} aria-label={gettext('Saving...')} className={'btn btn-icon btn-secondary btn-active'}>\n                <i className={'fa fa-spin fa-spinner'}/></button> :\n              (\n                this.props.needSave ?\n                  <IconButton\n                    text={gettext('Save')}\n                    id={'saveButton'}\n                    icon={'fa fa-save'}\n                    // button imported in this file does not have functionalities of\n                    // isActive as button imported in markdowneditor has\n                    //isActive={!isContentChanged}\n                    onClick={this.props.onSave}\n                  /> :\n                  <button type={'button'} className={'btn btn-icon btn-secondary btn-active'} disabled>\n                    <i className={'fa fa-save'}/></button>\n              )\n            )}\n          {canDownloadFile && (\n            <IconButton\n              id=\"download-file\"\n              icon=\"fa fa-download\"\n              text={gettext('Download')}\n              tag=\"a\"\n              href=\"?dl=1\"\n            />\n          )}\n          <IconButton\n            id=\"file-details\"\n            icon='fas fa-info'\n            text={gettext('Details')}\n            onClick={this.props.toggleDetailsPanel}\n          />\n          {filePerm == 'rw' && (\n            <IconButton\n              id=\"open-via-client\"\n              icon=\"sf3-font sf3-font-desktop\"\n              text={gettext('Open via Client')}\n              tag=\"a\"\n              href={`seafile://openfile?repo_id=${encodeURIComponent(repoID)}&path=${encodeURIComponent(filePath)}`}\n            />\n          )}\n          <ButtonDropdown isOpen={moreDropdownOpen} toggle={this.toggleMoreOpMenu}>\n            <DropdownToggle aria-label={gettext('More operations')}>\n              <span className=\"fas fa-ellipsis-v\"></span>\n            </DropdownToggle>\n            <DropdownMenu right={true}>\n              {filePerm == 'rw' && (\n                <a href={`${siteRoot}repo/file_revisions/${repoID}/?p=${encodeURIComponent(filePath)}&referer=${encodeURIComponent(location.href)}`} className=\"dropdown-item\">\n                  {gettext('History')}\n                </a>\n              )}\n            </DropdownMenu>\n          </ButtonDropdown>\n        </ButtonGroup>\n\n        <Dropdown isOpen={this.state.dropdownOpen} toggle={this.toggle} className=\"d-block d-md-none flex-shrink-0 ml-4\">\n          <ButtonGroup >\n            {(canEditFile && fileType != 'SDoc' && !err) &&\n                (this.props.isSaving ?\n                  <button type={'button'} aria-label={gettext('Saving...')} className={'btn btn-icon btn-secondary btn-active'}>\n                    <i className={'fa fa-spin fa-spinner'}/></button> :\n                  (\n                    this.props.needSave ?\n                      <IconButton\n                        text={gettext('Save')}\n                        id={'saveButton'}\n                        icon={'fa fa-save'}\n                        // button imported in this file does not have functionalities of\n                        // isActive as button imported in markdowneditor has\n                        //isActive={!isContentChanged}\n                        onClick={this.props.onSave}\n                      /> :\n                      <button type={'button'} className={'btn btn-icon btn-secondary btn-active'} disabled>\n                        <i className={'fa fa-save'}/></button>\n                  )\n                )}\n          </ButtonGroup>\n\n          <DropdownToggle className=\"sf2-icon-more mx-1\" aria-label={gettext('More operations')}></DropdownToggle>\n          <DropdownMenu right={true}>\n            <DropdownItem>\n              <a href={`${siteRoot}library/${repoID}/${Utils.encodePath(repoName + parentDir)}`} className=\"text-inherit\">\n                {gettext('Open parent folder')}\n              </a>\n            </DropdownItem>\n            {showLockUnlockBtn && (\n              <DropdownItem onClick={this.props.toggleLockFile}>\n                {lockUnlockText}\n              </DropdownItem>\n            )}\n            {showShareBtn && (\n              <DropdownItem onClick={this.toggleShareDialog}>\n                {gettext('Share')}\n              </DropdownItem>\n            )}\n            {filePerm == 'rw' && (\n              <DropdownItem>\n                <a href={`${siteRoot}repo/file_revisions/${repoID}/?p=${encodeURIComponent(filePath)}&referer=${encodeURIComponent(location.href)}`} className=\"text-inherit\">\n                  {gettext('History')}\n                </a>\n              </DropdownItem>\n            )}\n            {canDownloadFile && (\n              <DropdownItem>\n                <a href=\"?dl=1\" className=\"text-inherit\">\n                  {gettext('Download')}\n                </a>\n              </DropdownItem>\n            )}\n            <DropdownItem onClick={this.props.toggleDetailsPanel}>{gettext('Details')}</DropdownItem>\n          </DropdownMenu>\n        </Dropdown>\n\n        {this.state.isShareDialogOpen && (\n          <ModalPortal>\n            <ShareDialog\n              itemType='file'\n              itemName={fileName}\n              itemPath={filePath}\n              userPerm={filePerm}\n              repoID={repoID}\n              repoEncrypted={repoEncrypted}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nFileToolbar.propTypes = propTypes;\n\nexport default FileToolbar;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/wiki-list-view/wiki-list-view.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sdoc/sdoc-file-history/history-version.js",["4468","4469"],[],"import moment from 'moment';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem, Modal, ModalBody } from 'reactstrap';\nimport classnames from 'classnames';\nimport { gettext, filePath } from '../../../utils/constants';\nimport URLDecorator from '../../../utils/url-decorator';\nimport Rename from '../../../components/rename';\nimport { isMobile } from '../../../utils/utils';\n\nimport '../../../css/history-record-item.css';\n\nmoment.locale(window.app.config.lang);\n\nclass HistoryVersion extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isShowOperationIcon: false,\n      isMenuShow: false,\n      isRenameShow: false,\n    };\n    this.isMobile = isMobile;\n  }\n\n  onMouseEnter = () => {\n    const { currentVersion, historyVersion } = this.props;\n    if (currentVersion.commit_id === historyVersion.commit_id) return;\n    this.setState({ isShowOperationIcon: true });\n  };\n\n  onMouseLeave = () => {\n    const { currentVersion, historyVersion } = this.props;\n    if (currentVersion.commit_id === historyVersion.commit_id) return;\n    this.setState({ isShowOperationIcon: false });\n  };\n\n  onToggleClick = (e) => {\n    this.setState({ isMenuShow: !this.state.isMenuShow });\n  };\n\n  onClick = () => {\n    this.setState({ isShowOperationIcon: false });\n    const { currentVersion, historyVersion, path } = this.props;\n    if (currentVersion.commit_id === historyVersion.commit_id) return;\n    this.props.onSelectHistoryVersion(path);\n  };\n\n  onRestore = () => {\n    const { historyVersion } = this.props;\n    this.props.onRestore(historyVersion);\n  };\n\n  onItemDownload = () => {\n    // nothing todo\n  };\n\n  onItemCopy = () => {\n    const { historyVersion } = this.props;\n    historyVersion.ctime_format = moment(historyVersion.ctime).format('YYYY-MM-DD HH:mm');\n    this.props.onCopy(historyVersion);\n  };\n\n  toggleRename = () => {\n    this.isMobile && this.setState({ isMenuShow: false });\n    this.setState({ isRenameShow: !this.state.isRenameShow });\n  };\n\n  onRenameConfirm = (newName) => {\n    const { obj_id } = this.props.historyVersion;\n    this.props.renameHistoryVersion(obj_id, newName);\n    this.toggleRename();\n  };\n\n  onRenameCancel = () => {\n    this.toggleRename();\n  };\n\n  showDailyHistory = (event) => {\n    event.stopPropagation();\n    event.nativeEvent.stopImmediatePropagation();\n    const { path } = this.props;\n    this.props.showDailyHistory(path, () => {\n      this.props.onSelectHistoryVersion(path);\n    });\n  };\n\n  render() {\n    const { currentVersion, historyVersion, path, showDaily } = this.props;\n    if (!currentVersion || !historyVersion) return null;\n    const { ctime, commit_id, creator_name, obj_id, name, count } = historyVersion;\n    const isHighlightItem = commit_id === currentVersion.commit_id;\n    const url = URLDecorator.getUrl({ type: 'download_historic_file', filePath: filePath, objID: obj_id });\n    return (\n      <li\n        className={`history-list-item ${isHighlightItem ? 'item-active' : ''} ${path[2] > 0 ? 'daily-history-detail' : ''}`}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n        onClick={this.onClick}\n      >\n        {path[2] === 0 && (\n          <div className=\"daily-history-detail-toggle-container\">\n            {count > 1 && (\n              <div className={classnames('daily-history-detail-toggle', { 'daily-history-detail-show': showDaily })} onClick={this.showDailyHistory}>\n                <i className=\"dropdown-toggle\"></i>\n              </div>\n            )}\n          </div>\n        )}\n        {path[2] > 0 && (<div className=\"daily-history-detail-no-more\"></div>)}\n        <div className=\"history-info\">\n          {this.state.isRenameShow ?\n            <Rename name={name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel}/>\n            :<div className=\"name\">{name}</div>\n          }\n          <div className=\"time\">{moment(ctime).format('YYYY-MM-DD HH:mm')}</div>\n          <div className=\"owner\">\n            <span className=\"squire-icon\"></span>\n            <span>{creator_name}</span>\n          </div>\n        </div>\n        <div className=\"history-operation\">\n          {this.isMobile\n            ? (\n              <>\n                <a\n                  className={`fas fa-ellipsis-v ${(this.state.isShowOperationIcon || isHighlightItem) ? '' : 'invisible'}`}\n                  title={gettext('More operations')}\n                  aria-label={gettext('More operations')}\n                  aria-expanded={this.state.isMenuShow}\n                  onClick={this.onToggleClick}\n                />\n                <Modal\n                  className='sdoc-mobile-history-options-modal'\n                  isOpen={this.state.isMenuShow}\n                  toggle={this.onToggleClick}\n                >\n                  <ModalBody className='sdoc-operation-mobile-modal-body'>\n                    <div className='option-item'>\n                      <i className='mr-3 sf3-font sf3-font-download'></i>\n                      <a href={url} onClick={this.onItemDownLoad}>{gettext('Download')}</a>\n                    </div>\n                    {(path[0] !== 0 && path[1] !== 0 && path[2] !== 0) && (\n                      <div className='option-item'>\n                        <i className='mr-3 sf3-font sf3-font-copy'></i>\n                        <span href={url} onClick={this.onItemCopy}>{gettext('Copy')}</span>\n                      </div>\n                    )}\n                    <div className='option-item' onClick={this.toggleRename}>\n                      <i className='mr-3 sf3-font sf3-font-rename'></i>\n                      <span>{gettext('Rename')}</span>\n                    </div>\n                  </ModalBody>\n                </Modal>\n              </>\n            )\n            : (<Dropdown isOpen={this.state.isMenuShow} toggle={this.onToggleClick}>\n              <DropdownToggle\n                tag='a'\n                className={`fas fa-ellipsis-v ${(this.state.isShowOperationIcon || isHighlightItem) ? '' : 'invisible'}`}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isMenuShow}\n                title={gettext('More operations')}\n                aria-label={gettext('More operations')}\n              />\n              <DropdownMenu>\n                {/* {(this.props.index !== 0) && <DropdownItem onClick={this.onItemRestore}>{gettext('Restore')}</DropdownItem>} */}\n                <DropdownItem tag='a' href={url} onClick={this.onItemDownLoad}>{gettext('Download')}</DropdownItem>\n                {(path[0] !== 0 && path[1] !== 0 && path[2] !== 0) && <DropdownItem onClick={this.onItemCopy}>{gettext('Copy')}</DropdownItem>}\n                <DropdownItem onClick={this.toggleRename}>{gettext('Rename')}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n            )}\n        </div>\n      </li>\n    );\n  }\n}\n\nHistoryVersion.propTypes = {\n  showDaily: PropTypes.bool,\n  path: PropTypes.array,\n  currentVersion: PropTypes.object.isRequired,\n  historyVersion: PropTypes.object,\n  onSelectHistoryVersion: PropTypes.func.isRequired,\n  onRestore: PropTypes.func.isRequired,\n  onCopy: PropTypes.func.isRequired,\n  renameHistoryVersion: PropTypes.func.isRequired,\n  showDailyHistory: PropTypes.func.isRequired,\n};\n\nexport default HistoryVersion;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/set-webdav-password.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/remove-webdav-password.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/reset-webdav-password.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/switch/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/confirm-delete-account.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/history-trash-file-view/download.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/confirm-disconnect-dingtalk.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/confirm-disconnect-wechat.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/subscription-api.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/notice-item.js",["4470","4471","4472","4473","4474","4475","4476","4477"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  noticeItem: PropTypes.object.isRequired,\n  tr: PropTypes.any,\n  onNoticeItemClick: PropTypes.func\n};\n\nconst MSG_TYPE_ADD_USER_TO_GROUP = 'add_user_to_group';\nconst MSG_TYPE_REPO_SHARE = 'repo_share';\nconst MSG_TYPE_REPO_SHARE_TO_GROUP = 'repo_share_to_group';\nconst MSG_TYPE_REPO_TRANSFER = 'repo_transfer';\nconst MSG_TYPE_FILE_UPLOADED = 'file_uploaded';\nconst MSG_TYPE_FOLDER_UPLOADED = 'folder_uploaded';\n// const MSG_TYPE_GUEST_INVITATION_ACCEPTED = 'guest_invitation_accepted';\nconst MSG_TYPE_REPO_MONITOR = 'repo_monitor';\nconst MSG_TYPE_DELETED_FILES = 'deleted_files';\nconst MSG_TYPE_SAML_SSO_FAILED = 'saml_sso_failed';\nconst MSG_TYPE_REPO_SHARE_PERM_CHANGE = 'repo_share_perm_change';\nconst MSG_TYPE_REPO_SHARE_PERM_DELETE = 'repo_share_perm_delete';\n\nclass NoticeItem extends React.Component {\n\n  generatorNoticeInfo () {\n    let noticeItem = this.props.noticeItem;\n    let noticeType = noticeItem.type;\n    let detail = noticeItem.detail;\n\n    if (noticeType === MSG_TYPE_ADD_USER_TO_GROUP) {\n\n      let avatar_url = detail.group_staff_avatar_url;\n\n      let groupStaff = detail.group_staff_name;\n\n      // group name does not support special characters\n      let userHref = siteRoot + 'profile/' + detail.group_staff_email + '/';\n      let groupHref = siteRoot + 'group/' + detail.group_id + '/';\n      let groupName = detail.group_name;\n\n      let notice = gettext('User {user_link} has added you to {group_link}');\n      let userLink = '<a href=' + userHref + '>' + groupStaff + '</a>';\n      let groupLink = '<a href=' + groupHref + '>' + groupName + '</a>';\n\n      notice = notice.replace('{user_link}', userLink);\n      notice = notice.replace('{group_link}', groupLink);\n\n      return {avatar_url, notice};\n    }\n\n    if (noticeType === MSG_TYPE_REPO_SHARE) {\n\n      let avatar_url = detail.share_from_user_avatar_url;\n\n      let shareFrom = detail.share_from_user_name;\n\n      let repoName = detail.repo_name;\n      let repoUrl = siteRoot + 'library/' + detail.repo_id + '/' +  repoName + '/';\n\n      let path = detail.path;\n      let notice = '';\n      // 1. handle translate\n      if (path === '/') { // share repo\n        notice = gettext('{share_from} has shared a library named {repo_link} to you.');\n      } else { // share folder\n        notice = gettext('{share_from} has shared a folder named {repo_link} to you.');\n      }\n\n      // 2. handle xss(cross-site scripting)\n      notice = notice.replace('{share_from}', shareFrom);\n      notice = notice.replace('{repo_link}', `{tagA}${repoName}{/tagA}`);\n      notice = Utils.HTMLescape(notice);\n\n      // 3. add jump link\n      notice = notice.replace('{tagA}', `<a href='${Utils.encodePath(repoUrl)}'>`);\n      notice = notice.replace('{/tagA}', '</a>');\n\n      return {avatar_url, notice};\n    }\n\n    if (noticeType === MSG_TYPE_REPO_SHARE_PERM_CHANGE) {\n\n      let avatar_url = detail.share_from_user_avatar_url;\n      let shareFrom = detail.share_from_user_name;\n      let permission = detail.permission;\n      let repoName = detail.repo_name;\n      let repoUrl = siteRoot + 'library/' + detail.repo_id + '/' +  repoName + '/';\n      let path = detail.path;\n      let notice = '';\n      // 1. handle translate\n      if (path === '/') { // share repo\n        notice = gettext('{share_from} has changed the permission of library {repo_link} to {permission}.');\n      } else { // share folder\n        notice = gettext('{share_from} has changed the permission of folder {repo_link} to {permission}.');\n      }\n\n      // 2. handle xss(cross-site scripting)\n      notice = notice.replace('{share_from}', shareFrom);\n      notice = notice.replace('{repo_link}', `{tagA}${repoName}{/tagA}`);\n      notice = notice.replace('{permission}', permission);\n      notice = Utils.HTMLescape(notice);\n\n      // 3. add jump link\n      notice = notice.replace('{tagA}', `<a href='${Utils.encodePath(repoUrl)}'>`);\n      notice = notice.replace('{/tagA}', '</a>');\n\n      return {avatar_url, notice};\n    }\n\n    if (noticeType === MSG_TYPE_REPO_SHARE_PERM_DELETE) {\n\n      let avatar_url = detail.share_from_user_avatar_url;\n      let shareFrom = detail.share_from_user_name;\n      let repoName = detail.repo_name;\n      let path = detail.path;\n      let notice = '';\n      // 1. handle translate\n      if (path === '/') { // share repo\n        notice = gettext('{share_from} has cancelled the sharing of library {repo_name}.');\n      } else { // share folder\n        notice = gettext('{share_from} has cancelled the sharing of folder {repo_name}.');\n      }\n\n      // 2. handle xss(cross-site scripting)\n      notice = notice.replace('{share_from}', shareFrom);\n      notice = notice.replace('{repo_name}', repoName);\n      notice = Utils.HTMLescape(notice);\n      return {avatar_url, notice};\n    }\n\n    if (noticeType === MSG_TYPE_REPO_SHARE_TO_GROUP) {\n\n      let avatar_url = detail.share_from_user_avatar_url;\n\n      let shareFrom = detail.share_from_user_name;\n\n      let repoName = detail.repo_name;\n      let repoUrl = siteRoot + 'library/' + detail.repo_id + '/' + repoName + '/';\n\n      let groupUrl = siteRoot + 'group/' + detail.group_id + '/';\n      let groupName = detail.group_name;\n\n      let path = detail.path;\n      let notice = '';\n      // 1. handle translate\n      if (path === '/') {\n        notice =  gettext('{share_from} has shared a library named {repo_link} to group {group_link}.');\n      } else {\n        notice =  gettext('{share_from} has shared a folder named {repo_link} to group {group_link}.');\n      }\n\n      // 2. handle xss(cross-site scripting)\n      notice = notice.replace('{share_from}', shareFrom);\n      notice = notice.replace('{repo_link}', `{tagA}${repoName}{/tagA}`);\n      notice = notice.replace('{group_link}', `{tagB}${groupName}{/tagB}`);\n      notice = Utils.HTMLescape(notice);\n\n      // 3. add jump link\n      notice = notice.replace('{tagA}', `<a href='${Utils.encodePath(repoUrl)}'>`);\n      notice = notice.replace('{/tagA}', '</a>');\n      notice = notice.replace('{tagB}', `<a href='${Utils.encodePath(groupUrl)}'>`);\n      notice = notice.replace('{/tagB}', '</a>');\n      return {avatar_url, notice};\n    }\n\n    if (noticeType === MSG_TYPE_REPO_TRANSFER) {\n\n      let avatar_url = detail.transfer_from_user_avatar_url;\n\n      let repoOwner = detail.transfer_from_user_name;\n\n      let repoName = detail.repo_name;\n      let repoUrl = siteRoot + 'library/' + detail.repo_id + '/' + repoName + '/';\n      // 1. handle translate\n      let notice = gettext('{user} has transfered a library named {repo_link} to you.');\n\n      // 2. handle xss(cross-site scripting)\n      notice = notice.replace('{user}', repoOwner);\n      notice = notice.replace('{repo_link}', `{tagA}${repoName}{/tagA}`);\n      notice = Utils.HTMLescape(notice);\n\n      // 3. add jump link\n      notice = notice.replace('{tagA}', `<a href=${Utils.encodePath(repoUrl)}>`);\n      notice = notice.replace('{/tagA}', '</a>');\n      return {avatar_url, notice};\n    }\n\n    if (noticeType === MSG_TYPE_FILE_UPLOADED) {\n      let avatar_url = detail.uploaded_user_avatar_url;\n      let fileName = detail.file_name;\n      let fileLink = siteRoot + 'lib/' + detail.repo_id + '/' + 'file' + detail.file_path;\n\n      let folderName = detail.folder_name;\n      let folderLink = siteRoot + 'library/' + detail.repo_id + '/' + detail.repo_name + detail.folder_path;\n      let notice = '';\n      if (detail.repo_id) { // todo is repo exist ?\n        // 1. handle translate\n        notice = gettext('A file named {upload_file_link} is uploaded to {uploaded_link}.');\n\n        // 2. handle xss(cross-site scripting)\n        notice = notice.replace('{upload_file_link}', `{tagA}${fileName}{/tagA}`);\n        notice = notice.replace('{uploaded_link}', `{tagB}${folderName}{/tagB}`);\n        notice = Utils.HTMLescape(notice);\n\n        // 3. add jump link\n        notice = notice.replace('{tagA}', `<a href=${Utils.encodePath(fileLink)}>`);\n        notice = notice.replace('{/tagA}', '</a>');\n        notice = notice.replace('{tagB}', `<a href=${Utils.encodePath(folderLink)}>`);\n        notice = notice.replace('{/tagB}', '</a>');\n      } else {\n        // 1. handle translate\n        notice = gettext('A file named {upload_file_link} is uploaded.');\n\n        // 2. handle xss(cross-site scripting)\n        notice = notice.replace('{upload_file_link}', `${fileName}`);\n        notice = Utils.HTMLescape(notice);\n      }\n      return {avatar_url, notice};\n    }\n\n    if (noticeType === MSG_TYPE_FOLDER_UPLOADED) {\n      let avatar_url = detail.uploaded_user_avatar_url;\n      let folderName = detail.folder_name;\n      let folderLink = siteRoot + 'library/' + detail.repo_id + '/' + detail.repo_name + detail.folder_path;\n\n      let parentDirName = detail.parent_dir_name;\n      let parentDirLink = siteRoot + 'library/' + detail.repo_id + '/' + detail.repo_name + detail.parent_dir_path;\n      let notice = '';\n      if (detail.repo_id) { // todo is repo exist ?\n        // 1. handle translate\n        notice = gettext('A folder named {upload_folder_link} is uploaded to {uploaded_link}.');\n\n        // 2. handle xss(cross-site scripting)\n        notice = notice.replace('{upload_folder_link}', `{tagA}${folderName}{/tagA}`);\n        notice = notice.replace('{uploaded_link}', `{tagB}${parentDirName}{/tagB}`);\n        notice = Utils.HTMLescape(notice);\n\n        // 3. add jump link\n        notice = notice.replace('{tagA}', `<a href=${Utils.encodePath(folderLink)}>`);\n        notice = notice.replace('{/tagA}', '</a>');\n        notice = notice.replace('{tagB}', `<a href=${Utils.encodePath(parentDirLink)}>`);\n        notice = notice.replace('{/tagB}', '</a>');\n      } else {\n        // 1. handle translate\n        notice = gettext('A folder named {upload_folder_link} is uploaded.');\n\n        // 2. handle xss(cross-site scripting)\n        notice = notice.replace('{upload_folder_link}', `${folderName}`);\n        notice = Utils.HTMLescape(notice);\n      }\n      return {avatar_url, notice};\n    }\n\n    if (noticeType === MSG_TYPE_REPO_MONITOR) {\n      const {\n        op_user_avatar_url: avatar_url,\n        op_user_email,\n        op_user_name,\n        op_type,\n        repo_id, repo_name,\n        obj_type,\n        obj_path_list,\n        old_obj_path_list\n      } = detail;\n\n      const userProfileURL = `${siteRoot}profile/${encodeURIComponent(op_user_email)}`;\n      const userLink = `<a href=${userProfileURL} target=\"_blank\">${Utils.HTMLescape(op_user_name)}</a>`;\n\n      const repoURL = `${siteRoot}library/${repo_id}/${encodeURIComponent(repo_name)}/`;\n      const repoLink = `<a href=${repoURL} target=\"_blank\">${Utils.HTMLescape(repo_name)}</a>`;\n\n      let notice = '';\n      if (obj_type == 'file') {\n        const fileName = Utils.getFileName(obj_path_list[0]);\n        const fileURL = `${siteRoot}lib/${repo_id}/file${Utils.encodePath(obj_path_list[0])}`;\n        const fileLink = `<a href=${fileURL} target=\"_blank\">${Utils.HTMLescape(fileName)}</a>`;\n        switch (op_type) {\n          case 'create':\n            notice = obj_path_list.length == 1 ? gettext('{user} created file {fileName} in library {libraryName}.') : gettext('{user} created file {fileName} and {fileCount} other file(s) in library {libraryName}.');\n            break;\n          case 'delete':\n            notice = obj_path_list.length == 1 ? gettext('{user} deleted file {fileName} in library {libraryName}.') : gettext('{user} deleted file {fileName} and {fileCount} other file(s) in library {libraryName}.');\n            notice = notice.replace('{fileName}', fileName);\n            break;\n          case 'recover':\n            notice = gettext('{user} restored file {fileName} in library {libraryName}.');\n            break;\n          case 'rename':\n            notice = gettext('{user} renamed file {oldFileName} {fileName} in library {libraryName}.');\n            notice = notice.replace('{oldFileName}', Utils.getFileName(old_obj_path_list[0]));\n            break;\n          case 'move':\n            notice = obj_path_list.length == 1 ? gettext('{user} moved file {fileName} in library {libraryName}.') : gettext('{user} moved file {fileName} and {fileCount} other file(s) in library {libraryName}.');\n            break;\n          case 'edit':\n            notice = gettext('{user} updated file {fileName} in library {libraryName}.');\n            break;\n          // no default\n        }\n        notice = notice.replace('{fileName}', fileLink);\n        notice = notice.replace('{fileCount}', obj_path_list.length - 1);\n      } else { // dir\n        const folderName = Utils.getFolderName(obj_path_list[0]);\n        const folderURL = `${siteRoot}library/${repo_id}/${encodeURIComponent(repo_name)}${Utils.encodePath(obj_path_list[0])}`;\n        const folderLink = `<a href=${folderURL} target=\"_blank\">${Utils.HTMLescape(folderName)}</a>`;\n        switch (detail.op_type) {\n          case 'create':\n            notice = obj_path_list.length == 1 ? gettext('{user} created folder {folderName} in library {libraryName}.') : gettext('{user} created folder {folderName} and {folderCount} other folder(s) in library {libraryName}.');\n            break;\n          case 'delete':\n            notice = obj_path_list.length == 1 ? gettext('{user} deleted folder {folderName} in library {libraryName}.') : gettext('{user} deleted folder {folderName} and {folderCount} other folder(s) in library {libraryName}.');\n            notice = notice.replace('{folderName}', folderName);\n            break;\n          case 'recover':\n            notice = gettext('{user} restored folder {folderName} in library {libraryName}.');\n            break;\n          case 'rename':\n            notice = gettext('{user} renamed folder {oldFolderName} {folderName} in library {libraryName}.');\n            notice = notice.replace('{oldFolderName}', Utils.getFolderName(old_obj_path_list[0]));\n            break;\n          case 'move':\n            notice = obj_path_list.length == 1 ? gettext('{user} moved folder {folderName} in library {libraryName}.') : gettext('{user} moved folder {folderName} and {folderCount} other folder(s) in library {libraryName}.');\n            break;\n          // no default\n        }\n        notice = notice.replace('{folderName}', folderLink);\n        notice = notice.replace('{folderCount}', obj_path_list.length - 1);\n      }\n\n      notice = notice.replace('{user}', userLink);\n      notice = notice.replace('{libraryName}', repoLink);\n\n      return { avatar_url, notice };\n    }\n\n    if (noticeType === MSG_TYPE_DELETED_FILES) {\n      const {\n        repo_id,\n        repo_name,\n      } = detail;\n\n      const repoURL = `${siteRoot}library/${repo_id}/${encodeURIComponent(repo_name)}/`;\n      const repoLink = `<a href=${repoURL} target=\"_blank\">${Utils.HTMLescape(repo_name)}</a>`;\n\n      let notice = gettext('Your library {libraryName} has recently deleted a large number of files.');\n      notice = notice.replace('{libraryName}', repoLink);\n\n      return { avatar_url : null, notice };\n    }\n\n    if (noticeType === MSG_TYPE_SAML_SSO_FAILED) {\n      const { error_msg } = detail;\n      let notice = gettext(error_msg);\n\n      return { avatar_url : null, notice };\n    }\n\n    // if (noticeType === MSG_TYPE_GUEST_INVITATION_ACCEPTED) {\n\n    // }\n\n    return {avatar_url : null, notice : null};\n  }\n\n  onNoticeItemClick = () => {\n    let item = this.props.noticeItem;\n    if (item.seen === true) {\n      return;\n    }\n    this.props.onNoticeItemClick(item);\n  };\n\n  render() {\n    let noticeItem = this.props.noticeItem;\n    let { avatar_url, notice } = this.generatorNoticeInfo();\n\n    if (!avatar_url && !notice) {\n      return '';\n    }\n\n    return this.props.tr ? (\n      <tr className={noticeItem.seen ? 'read' : 'unread font-weight-bold'}>\n        <td className=\"text-center\">\n          <img src={avatar_url} width=\"32\" height=\"32\" className=\"avatar\" alt=\"\" />\n        </td>\n        <td className=\"pr-1 pr-md-8\">\n          <p className=\"m-0\" dangerouslySetInnerHTML={{__html: notice}}></p>\n        </td>\n        <td>\n          {moment(noticeItem.time).fromNow()}\n        </td>\n      </tr>\n    ) : (\n      <li onClick={this.onNoticeItemClick} className={noticeItem.seen ? 'read' : 'unread'}>\n        <div className=\"notice-item\">\n          <div className=\"main-info\">\n            <img src={avatar_url} width=\"32\" height=\"32\" className=\"avatar\" alt=\"\"/>\n            <p className=\"brief\" dangerouslySetInnerHTML={{__html: notice}}></p>\n          </div>\n          <p className=\"time\">{moment(noticeItem.time).fromNow()}</p>\n        </div>\n      </li>\n    );\n  }\n}\n\nNoticeItem.propTypes = propTypes;\n\nexport default NoticeItem;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/user-notifications.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/search/advanced-search.js",["4478","4479"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport moment from 'moment';\nimport { Button, Col, Collapse, CustomInput, FormGroup, Input, Label, Row, InputGroupAddon, InputGroup } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport DateTimePicker from '../../components/date-and-time-picker';\n\nconst { repo_name, search_repo } = window.search.pageOptions;\n\nclass AdvancedSearch extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getFileTypesList = (fileTypes) => {\n    const fileTypeItems = [gettext('Text'), gettext('Document'), gettext('Image'), gettext('Video'), gettext('Audio'), 'PDF', 'Markdown'];\n    let ftype = [];\n    for (let i = 0, len = fileTypes.length; i < len; i++) {\n      if (fileTypes[i]) {\n        ftype.push(fileTypeItems[i]);\n      }\n    }\n    return ftype;\n  };\n\n  disabledStartDate = (startValue) => {\n    if (!startValue) {\n      return false;\n    }\n\n    const isAfterToday = startValue.isAfter(moment(), 'day');\n    const { time_to } = this.props.stateAndValues;\n    const endValue = time_to;\n    if (!endValue) {\n      return isAfterToday;\n    }\n    return startValue.isAfter(endValue) || isAfterToday;\n  };\n\n  disabledEndDate = (endValue) => {\n    if (!endValue) {\n      return false;\n    }\n\n    const isAfterToday = endValue.isAfter(moment(), 'day');\n    const { time_from } = this.props.stateAndValues;\n    const startValue = time_from;\n    if (!startValue) {\n      return isAfterToday;\n    }\n    return endValue.isBefore(startValue) || isAfterToday;\n  };\n\n  render() {\n    const { stateAndValues } = this.props;\n    const { errorDateMsg, errorSizeMsg } = stateAndValues;\n\n    if (stateAndValues.isShowSearchFilter) {\n      const { size_from, size_to, time_from, time_to, search_repo, fileTypeItemsStatus } = stateAndValues;\n      const fileTypes = this.getFileTypesList(fileTypeItemsStatus);\n      const typesLength = fileTypes.length;\n      return (\n        <div className=\"search-filters\">\n          {search_repo && <span className=\"mr-4\">{gettext('Libraries')}{': '}{search_repo == 'all'? gettext('All') : repo_name}</span>}\n          {typesLength > 0 &&\n            <span className=\"mr-4\">{gettext('File Types')}{': '}\n              {fileTypes.map((type, index) => {\n                return <span key={index}>{type}{index !== (typesLength - 1) && ','}{' '}</span>;\n              })}\n            </span>\n          }\n          {(time_from && time_to ) &&\n            <span className=\"mr-4\">{gettext('Last Update')}{': '}{time_from.format('YYYY-MM-DD')}{' '}{gettext('to')}{' '}{time_to.format('YYYY-MM-DD')}</span>\n          }\n          {(size_from && size_to) &&\n            <span className=\"mr-4\">{gettext('Size')}{': '}{size_from}{'MB - '}{size_to}{'MB'}</span>\n          }\n        </div>\n      );\n    }\n    else {\n      return (\n        <div className=\"advanced-search\">\n          <Collapse isOpen={stateAndValues.isCollapseOpen}>\n\n            {search_repo !== 'all' &&\n              <div className='search-repo search-catalog'>\n                <Row>\n                  <Col md=\"2\" lg=\"2\">{gettext('Libraries')}{': '}</Col>\n                  <Col md=\"4\" lg=\"4\">\n                    <FormGroup check>\n                      <Label check>\n                        <Input\n                          type=\"radio\" name=\"repo\"\n                          checked={stateAndValues.isAllRepoCheck}\n                          onChange={() => this.props.handlerRepo(true)}\n                        />{gettext('In all libraries')}\n                      </Label>\n                    </FormGroup>\n                  </Col>\n                  <Col md=\"4\" lg=\"4\">\n                    <FormGroup check>\n                      <Label check>\n                        <Input\n                          type=\"radio\" name=\"repo\"\n                          checked={!stateAndValues.isAllRepoCheck}\n                          onChange={() => this.props.handlerRepo(false)}\n                        />{repo_name}\n                      </Label>\n                    </FormGroup>\n                  </Col>\n                </Row>\n              </div>\n            }\n\n            <div className='search-file-types search-catalog'>\n              <Row>\n                <Col md=\"2\" lg=\"2\">{gettext('File Types')}{': '}</Col>\n                <Col md=\"4\" lg=\"4\">\n                  <FormGroup check>\n                    <Label check>\n                      <Input\n                        type=\"radio\" name=\"types\"\n                        checked={!stateAndValues.isFileTypeCollapseOpen}\n                        onChange={this.props.closeFileTypeCollapse}\n                      />{gettext('All file types')}\n                    </Label>\n                  </FormGroup>\n                </Col>\n                <Col md=\"4\" lg=\"4\">\n                  <FormGroup check>\n                    <Label check>\n                      <Input\n                        type=\"radio\" name=\"types\"\n                        checked={stateAndValues.isFileTypeCollapseOpen}\n                        onChange={this.props.openFileTypeCollapse}\n                      />{gettext('Custom file types')}\n                    </Label>\n                  </FormGroup>\n                </Col>\n              </Row>\n\n              <Row>\n                <Col md=\"2\" lg=\"2\"></Col>\n                <Col md=\"10\" lg=\"10\">\n                  <Collapse isOpen={stateAndValues.isFileTypeCollapseOpen}>\n                    <FormGroup className=\"search-file-types-form\">\n                      <Fragment>\n                        <CustomInput\n                          type=\"checkbox\" id=\"checkTextFiles\" label={gettext('Text files')} inline\n                          onChange={() => this.props.handlerFileTypes(0)}\n                          checked={stateAndValues.fileTypeItemsStatus[0]}/>\n                        <CustomInput\n                          type=\"checkbox\" id=\"checkDocuments\" label={gettext('Documents')} inline\n                          onChange={() => this.props.handlerFileTypes(1)}\n                          checked={stateAndValues.fileTypeItemsStatus[1]}/>\n                        <CustomInput\n                          type=\"checkbox\" id=\"checkImages\" label={gettext('Images')} inline\n                          onChange={() => this.props.handlerFileTypes(2)}\n                          checked={stateAndValues.fileTypeItemsStatus[2]}/>\n                        <CustomInput\n                          type=\"checkbox\" id=\"checkVideo\" label={gettext('Video')} inline\n                          onChange={() => this.props.handlerFileTypes(3)}\n                          checked={stateAndValues.fileTypeItemsStatus[3]}/>\n                        <CustomInput\n                          type=\"checkbox\" id=\"checkAudio\" label={gettext('Audio')} inline\n                          onChange={() => this.props.handlerFileTypes(4)}\n                          checked={stateAndValues.fileTypeItemsStatus[4]}/>\n                        <CustomInput\n                          type=\"checkbox\" id=\"checkPdf\" label=\"PDF\" inline\n                          onChange={() => this.props.handlerFileTypes(5)}\n                          checked={stateAndValues.fileTypeItemsStatus[5]}/>\n                        <CustomInput\n                          type=\"checkbox\" id=\"checkMarkdown\" label=\"Markdown\" inline\n                          onChange={() => this.props.handlerFileTypes(6)}\n                          checked={stateAndValues.fileTypeItemsStatus[6]}/>\n                      </Fragment>\n                    </FormGroup>\n                    <input\n                      type=\"text\"\n                      className=\"form-control search-input\"\n                      name=\"query\"\n                      autoComplete=\"off\"\n                      placeholder={gettext('Input file extensions here, separate with \\',\\'')}\n                      onChange={this.props.handlerFileTypesInput}\n                      value={stateAndValues.input_fexts}\n                      onKeyDown={this.props.handleKeyDown}\n                    />\n                  </Collapse>\n                </Col>\n              </Row>\n            </div>\n\n            <div className='search-date search-catalog'>\n              <Row>\n                <Col md=\"2\" lg=\"2\" className=\"mt-2\">{gettext('Last Update')}{': '}</Col>\n                <Col md=\"4\" lg=\"4\" sm=\"4\" xs=\"5\" className=\"position-relative\">\n                  <DateTimePicker\n                    inputWidth={'100%'}\n                    disabledDate={this.disabledStartDate}\n                    value={stateAndValues.time_from}\n                    onChange={this.props.handleTimeFromInput}\n                    showHourAndMinute={false}\n                  />\n                  <span className=\"select-data-icon\"><i className=\"fa fa-calendar-alt\"></i></span>\n                </Col>\n                <div className=\"mt-2\">-</div>\n                <Col md=\"4\" lg=\"4\" sm=\"4\" xs=\"5\" className=\"position-relative\">\n                  <DateTimePicker\n                    inputWidth={'100%'}\n                    disabledDate={this.disabledEndDate}\n                    value={stateAndValues.time_to}\n                    onChange={this.props.handleTimeToInput}\n                    showHourAndMinute={false}\n                  />\n                  <span className=\"select-data-icon\"><i className=\"fa fa-calendar-alt\"></i></span>\n                </Col>\n              </Row>\n              {errorDateMsg && <Row><Col md=\"2\" lg=\"2\"></Col><Col md=\"8\" className=\"error mt-2\">{errorDateMsg}</Col></Row>}\n            </div>\n\n            <div className='search-size search-catalog'>\n              <Row>\n                <Col md=\"2\" lg=\"2\" className=\"mt-2\">{gettext('Size')}{': '}</Col>\n                <Col md=\"4\" lg=\"4\" sm=\"4\" xs=\"5\">\n                  <FormGroup>\n                    <InputGroup>\n                      <Input\n                        type=\"tel\" name=\"size_from\"\n                        onKeyDown={this.props.handleKeyDown}\n                        onChange={this.props.handleSizeFromInput}\n                        value={stateAndValues.size_from}\n                      />\n                      <InputGroupAddon addonType=\"append\">{'MB'}</InputGroupAddon>\n                    </InputGroup>\n                  </FormGroup>\n                  <MediaQuery query=\"(min-width: 768px)\">\n                    {errorSizeMsg && <div className=\"error mb-4\">{errorSizeMsg}</div>}\n                    <Button color=\"primary\" onClick={this.props.handleSubmit}>{gettext('Submit')}</Button>\n                    <Button className=\"ml-2\" onClick={this.props.handleReset}>{gettext('Reset')}</Button>\n                  </MediaQuery>\n                </Col>\n                <div className=\"mt-2\">-</div>\n                <Col md=\"4\" lg=\"4\" sm=\"4\" xs=\"5\">\n                  <FormGroup>\n                    <InputGroup>\n                      <Input\n                        type=\"tel\" name=\"size_to\"\n                        onKeyDown={this.props.handleKeyDown}\n                        onChange={this.props.handleSizeToInput}\n                        value={stateAndValues.size_to}\n                      />\n                      <InputGroupAddon addonType=\"append\">{'MB'}</InputGroupAddon>\n                    </InputGroup>\n                  </FormGroup>\n                </Col>\n              </Row>\n            </div>\n            <MediaQuery query=\"(max-width: 767.8px)\">\n              {errorSizeMsg && <div className=\"error mb-4\">{errorSizeMsg}</div>}\n              <Button color=\"primary\" onClick={this.props.handleSubmit}>{gettext('Submit')}</Button>\n              <Button className=\"ml-2\" onClick={this.props.handleReset}>{gettext('Reset')}</Button>\n            </MediaQuery>\n          </Collapse>\n        </div>\n      );\n    }\n  }\n}\n\nconst advancedSearchPropTypes = {\n  openFileTypeCollapse: PropTypes.func.isRequired,\n  closeFileTypeCollapse: PropTypes.func.isRequired,\n  handlerFileTypes: PropTypes.func.isRequired,\n  handlerFileTypesInput: PropTypes.func.isRequired,\n  handleSubmit: PropTypes.func.isRequired,\n  handleReset: PropTypes.func.isRequired,\n  handlerRepo: PropTypes.func.isRequired,\n  handleKeyDown: PropTypes.func.isRequired,\n  handleTimeFromInput: PropTypes.func.isRequired,\n  handleTimeToInput: PropTypes.func.isRequired,\n  handleSizeFromInput: PropTypes.func.isRequired,\n  handleSizeToInput: PropTypes.func.isRequired,\n  stateAndValues: PropTypes.object.isRequired,\n};\n\nAdvancedSearch.propTypes = advancedSearchPropTypes;\n\nexport default AdvancedSearch;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/search/search-results.js",["4480","4481"],[],"import React from 'react';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { siteRoot, gettext } from '../../utils/constants';\n\nclass ResultsItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  handlerFileURL= (item) => {\n    return item.is_dir ? siteRoot + 'library/' + item.repo_id + '/' + item.repo_name + item.fullpath :\n      siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(item.fullpath);\n  };\n\n  handlerParentDirPath= (item) => {\n    let index = item.is_dir ? item.fullpath.length - item.name.length - 1 : item.fullpath.length - item.name.length;\n    return item.fullpath.substring(0, index);\n  };\n\n  handlerParentDirURL= (item) => {\n    return siteRoot + 'library/' + item.repo_id + '/' + item.repo_name + this.handlerParentDirPath(item);\n  };\n\n  render() {\n    let item = this.props.item;\n    let linkContent = decodeURI(item.fullpath).substring(1);\n    let folderIconUrl = linkContent ? Utils.getFolderIconUrl(false, 192) : Utils.getDefaultLibIconUrl(true);\n    let fileIconUrl = item.is_dir ? folderIconUrl : Utils.getFileIconUrl(item.name, 192);\n\n    if (item.thumbnail_url !== '') {\n      fileIconUrl = item.thumbnail_url;\n    }\n\n    return (\n      <li className=\"search-result-item\">\n        <img className={linkContent ? 'item-img' : 'lib-item-img'} src={fileIconUrl} alt=\"\"/>\n        <div className=\"item-content\">\n          <div className=\"item-name ellipsis\">\n            <a href={this.handlerFileURL(item)} target=\"_blank\" title={item.name} rel=\"noreferrer\">{item.name}</a>\n          </div>\n          <div className=\"item-link ellipsis\">\n            <a href={this.handlerParentDirURL(item)} target=\"_blank\" rel=\"noreferrer\" >{item.repo_name}{this.handlerParentDirPath(item)}</a>\n          </div>\n          <div className=\"item-link ellipsis\">\n            {Utils.bytesToSize(item.size) + ' ' + moment(item.last_modified * 1000).format('YYYY-MM-DD')}\n          </div>\n          <div className=\"item-text ellipsis\" dangerouslySetInnerHTML={{__html: item.content_highlight}}></div>\n        </div>\n      </li>\n    );\n  }\n}\n\nconst resultsItemPropTypes = {\n  item: PropTypes.object.isRequired,\n};\n\nResultsItem.propTypes = resultsItemPropTypes;\n\nclass SearchResults extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { resultItems, total } = this.props;\n    return (\n      <div className=\"search-result-container position-static\">\n        <p className=\"tip\">{total > 0 ? (total + ' ' + (total === 1 ? gettext('result') : gettext('results'))) : gettext('No result')}</p>\n        <ul className=\"search-result-list\">\n          {resultItems.map((item, index) => {\n            return <ResultsItem key={index} item={item}/>;\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nconst searchResultsPropTypes = {\n  resultItems: PropTypes.array.isRequired,\n  total: PropTypes.number.isRequired\n};\n\nSearchResults.propTypes = searchResultsPropTypes;\n\nexport default SearchResults;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/markdown-editor/header-toolbar/button-item.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/markdown-editor/header-toolbar/more-menu.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/markdown-editor/header-toolbar/button-group.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/user-content/user-repos.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/markdown-editor/header-toolbar/collab-users-button.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/markdown-editor/header-toolbar/file-info.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/copy-to-clipboard.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/user-content/user-groups.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-select.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/user-content/user-info.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sdoc/sdoc-editor/external-operations.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/statistic/picker.js",["4482","4483"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport Calendar from '@seafile/seafile-calendar';\nimport DatePicker from '@seafile/seafile-calendar/lib/Picker';\nimport { translateCalendar } from '../../../utils/date-format-utils';\n\nimport '@seafile/seafile-calendar/assets/index.css';\n\nconst FORMAT = 'YYYY-MM-DD';\n\nclass Picker extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.defaultCalendarValue = null;\n  }\n\n  componentDidMount() {\n    let lang = window.app.config.lang;\n    this.defaultCalendarValue = moment().locale(lang).clone();\n  }\n\n  render() {\n    const props = this.props;\n    const calendar = (<Calendar\n      defaultValue={this.defaultCalendarValue}\n      disabledDate={props.disabledDate}\n      format={FORMAT}\n      locale={translateCalendar()}\n    />);\n    return (\n      <DatePicker\n        calendar={calendar}\n        value={props.value}\n        onChange={props.onChange}\n      >\n        {\n          ({value}) => {\n            return (\n              <span>\n                <input\n                  placeholder=\"yyyy-mm-dd\"\n                  tabIndex=\"-1\"\n                  readOnly\n                  value={value && value.format(FORMAT) || ''}\n                  className=\"form-control system-statistic-input\"\n                />\n              </span>\n            );\n          }\n        }\n      </DatePicker>\n    );\n  }\n}\n\nPicker.propTypes = {\n  disabledDate: PropTypes.func.isRequired,\n  value: PropTypes.object,\n  onChange: PropTypes.func.isRequired,\n};\n\nexport default Picker;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/services/links.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/user-content/index.js",["4484"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot } from '../../../utils/constants';\n\nconst NAV_ITEMS = [\n  {name: 'info', urlPart: '', text: gettext('Info')},\n  {name: 'owned-repos', urlPart: 'owned-libraries', text: gettext('Owned Libraries')},\n  {name: 'groups', urlPart: 'groups', text: gettext('Groups')}\n];\n\nconst UserContent = ({ children, ...rest }) => {\n  const nav = rest['*'];\n  const username = rest.email;\n  return (\n    <>\n      <ul className=\"nav border-bottom mx-4\">\n        {NAV_ITEMS.map((item, index) => {\n          return (\n            <li className=\"nav-item mr-2\" key={index}>\n              <Link to={`${siteRoot}inst/useradmin/${encodeURIComponent(username)}/${item.urlPart}`} className={`nav-link ${nav == item.urlPart ? ' active' : ''}`}>{item.text}</Link>\n            </li>\n          );\n        })}\n      </ul>\n      <div className=\"cur-view-content\">\n        {children}\n      </div>\n    </>\n  );\n};\n\nUserContent.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.array, PropTypes.object]),\n};\n\nexport default UserContent;","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-unlink-device-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/notification-popover/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/statistic/traffic-table-body.js",["4485"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../../utils/utils';\nimport { siteRoot } from '../../../utils/constants';\n\nconst propTypes = {\n  type: PropTypes.string.isRequired,\n  userTrafficItem: PropTypes.object.isRequired,\n};\n\nclass TrafficTableBody extends React.Component {\n\n  trafficName = () => {\n    let { userTrafficItem, type } = this.props;\n    switch(type) {\n      case 'user':\n        if (userTrafficItem.name) {\n          return (\n            <a href={siteRoot + 'org/useradmin/info/' + userTrafficItem.email + '/'}>{userTrafficItem.name}</a>\n          );\n        }\n        return(<span>{'--'}</span>);\n      case 'org':\n        return(<span>{userTrafficItem.org_name}</span>);\n    }\n  };\n\n  render() {\n    let { userTrafficItem } = this.props;\n\n    let syncUploadSize = Utils.bytesToSize(userTrafficItem.sync_file_upload);\n    let syncDownloadSize = Utils.bytesToSize(userTrafficItem.sync_file_download);\n    let webUploadSize = Utils.bytesToSize(userTrafficItem.web_file_upload);\n    let webDownloadSize = Utils.bytesToSize(userTrafficItem.web_file_download);\n    let linkUploadSize = Utils.bytesToSize(userTrafficItem.link_file_upload);\n    let linkDownloadSize = Utils.bytesToSize(userTrafficItem.link_file_download);\n\n    return(\n      <tr>\n        <td>{this.trafficName()}</td>\n        <td>{syncUploadSize}</td>\n        <td>{syncDownloadSize}</td>\n        <td>{webUploadSize}</td>\n        <td>{webDownloadSize}</td>\n        <td>{linkUploadSize}</td>\n        <td>{linkDownloadSize}</td>\n      </tr>\n    );\n  }\n}\n\nTrafficTableBody.propTypes = propTypes;\n\nexport default TrafficTableBody;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/statistic/picker.js",["4486","4487"],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/statistic/traffic-table.js",["4488","4489","4490"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  type: PropTypes.string.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  children: PropTypes.oneOfType([PropTypes.bool, PropTypes.array]),\n};\n\nclass TrafficTable extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { type, sortBy, sortOrder } = this.props;\n    const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n    return (\n      <table className=\"table-hover\">\n        <thead>\n          <tr>\n            <th width=\"16%\">{type == 'user' ? gettext('User') : gettext('Organization')}</th>\n            <th width=\"11%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'sync_file_upload')}>{gettext('Sync Upload')} {sortBy === 'sync_file_upload' && sortIcon}</div></th>\n            <th width=\"14%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'sync_file_download')}>{gettext('Sync Download')} {sortBy === 'sync_file_download' && sortIcon}</div></th>\n            <th width=\"11%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'web_file_upload')}>{gettext('Web Upload')} {sortBy === 'web_file_upload' && sortIcon}</div></th>\n            <th width=\"14%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'web_file_download')}>{gettext('Web Download')} {sortBy === 'web_file_download' && sortIcon}</div></th>\n            <th width=\"17%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'link_file_upload')}>{gettext('Share link upload')} {sortBy === 'link_file_upload' && sortIcon}</div></th>\n            <th width=\"17%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'link_file_download')}>{gettext('Share link download')} {sortBy === 'link_file_download' && sortIcon}</div></th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.props.children}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nTrafficTable.propTypes = propTypes;\n\nexport default TrafficTable;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/web-settings/setting-item-base.js",["4491"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Row, Col, Label } from 'reactstrap';\n\nconst propTypes = {\n  displayName: PropTypes.string.isRequired,\n  helpTip: PropTypes.string,\n  mainContent: PropTypes.object.isRequired,\n  extraContent: PropTypes.object\n};\n\nclass SettingItemBase extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { helpTip, displayName, mainContent, extraContent } = this.props;\n    return (\n      <Fragment>\n        <Row className=\"my-4\">\n          <Col md=\"3\">\n            <Label className=\"web-setting-label\">{displayName}</Label>\n          </Col>\n          <Col md=\"5\">\n            {mainContent}\n            {helpTip && <p className=\"small text-secondary mt-1\">{helpTip}</p>}\n          </Col>\n          <Col md=\"4\">\n            {extraContent}\n          </Col>\n        </Row>\n      </Fragment>\n    );\n  }\n}\n\nSettingItemBase.propTypes = propTypes;\n\nexport default SettingItemBase;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/user-list/index.js",[],["4492"],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/select/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/user-list-search/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/users-nav/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/statistic/traffic-table-body.js",["4493"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../../utils/utils';\nimport { siteRoot } from '../../../utils/constants';\n\nconst propTypes = {\n  type: PropTypes.string.isRequired,\n  userTrafficItem: PropTypes.object.isRequired,\n};\n\nclass TrafficTableBody extends React.Component {\n\n  trafficName = () => {\n    let { userTrafficItem, type } = this.props;\n    switch(type) {\n      case 'user':\n        if (userTrafficItem.name) {\n          return (\n            <a href={siteRoot + 'sys/users/' + userTrafficItem.email + '/'}>{userTrafficItem.name}</a>\n          );\n        }\n        return(<span>{'--'}</span>);\n      case 'org':\n        return(<span>{userTrafficItem.org_name}</span>);\n    }\n  };\n\n  render() {\n    let { userTrafficItem } = this.props;\n\n    let syncUploadSize = Utils.bytesToSize(userTrafficItem.sync_file_upload);\n    let syncDownloadSize = Utils.bytesToSize(userTrafficItem.sync_file_download);\n    let webUploadSize = Utils.bytesToSize(userTrafficItem.web_file_upload);\n    let webDownloadSize = Utils.bytesToSize(userTrafficItem.web_file_download);\n    let linkUploadSize = Utils.bytesToSize(userTrafficItem.link_file_upload);\n    let linkDownloadSize = Utils.bytesToSize(userTrafficItem.link_file_download);\n\n    return(\n      <tr>\n        <td>{this.trafficName()}</td>\n        <td>{syncUploadSize}</td>\n        <td>{syncDownloadSize}</td>\n        <td>{webUploadSize}</td>\n        <td>{webDownloadSize}</td>\n        <td>{linkUploadSize}</td>\n        <td>{linkDownloadSize}</td>\n      </tr>\n    );\n  }\n}\n\nTrafficTableBody.propTypes = propTypes;\n\nexport default TrafficTableBody;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/statistic/traffic-table.js",["4494","4495","4496"],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-lib-history-setting-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-group-transfer-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-set-group-quota-dialog.js",["4497","4498"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, InputGroupAddon, InputGroup } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  groupID: PropTypes.number.isRequired,\n  onSetQuota: PropTypes.func.isRequired,\n};\n\nclass SetGroupQuotaDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      quota: '',\n      errMessage: '',\n    };\n  }\n\n  setGroupQuota = () => {\n    const numberReg = /^[1-9]\\d*$/im;\n    let quota = this.state.quota;\n    if ((quota.length && numberReg.test(quota)) || quota == -2) {\n      this.setState({ errMessage: '' });\n      let newQuota = this.state.quota == -2 ? this.state.quota : this.state.quota * 1000000;\n      seafileAPI.sysAdminUpdateDepartmentQuota(this.props.groupID, newQuota).then((res) => {\n        this.props.toggle();\n        this.props.onSetQuota(res.data);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      const err = gettext('Quota is invalid.');\n      this.setState({ errMessage: err });\n    }\n  };\n\n  handleChange = (e) => {\n    const quota = e.target.value.trim();\n    this.setState({ quota: quota });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.setGroupQuota();\n      e.preventDefault();\n    }\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Set Quota')}</ModalHeader>\n        <ModalBody>\n          <InputGroup>\n            <Input\n              onKeyDown={this.handleKeyDown}\n              value={this.state.quota}\n              onChange={this.handleChange}\n              autoFocus={true}\n            />\n            <InputGroupAddon addonType=\"append\">{'MB'}</InputGroupAddon>\n          </InputGroup>\n          <p className=\"tip\">\n            <br/><span>{gettext('An integer that is greater than 0 or equal to -2.')}</span><br/>\n            <span>{gettext('Tip: -2 means no limit.')}</span>\n          </p>\n          {this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.setGroupQuota}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSetGroupQuotaDialog.propTypes = propTypes;\n\nexport default SetGroupQuotaDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-rename-department-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-delete-department-dialog.js",["4499"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nconst propTypes = {\n  group: PropTypes.object.isRequired,\n  toggle: PropTypes.func.isRequired,\n  onDeleteDepartment: PropTypes.func.isRequired\n};\n\nclass DeleteDepartmentDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  deleteDepart = () => {\n    this.props.toggle();\n    const { group } = this.props;\n    seafileAPI.sysAdminDeleteDepartment(group.id).then((res) => {\n      this.props.onDeleteDepartment(group.id);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { group } = this.props;\n\n    let tipMessage = gettext('Are you sure you want to delete {placeholder} ?');\n    tipMessage = tipMessage.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(group.name) + '</span>');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Delete Department')}</ModalHeader>\n        <ModalBody>\n          <p dangerouslySetInnerHTML={{__html: tipMessage}}></p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.deleteDepart}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nDeleteDepartmentDialog.propTypes = propTypes;\n\nexport default DeleteDepartmentDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-share-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-add-member-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-add-repo-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/work-weixin/work-weixin-department-members-list.js",["4500"],[],"import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Table } from 'reactstrap';\nimport { siteRoot } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\n\nconst WorkWeixinDepartmentMembersListPropTypes = {\n  isMembersListLoading: PropTypes.bool.isRequired,\n  membersList: PropTypes.array.isRequired,\n  newUsersTempObj: PropTypes.object.isRequired,\n  checkedDepartmentId: PropTypes.number.isRequired,\n  onUserChecked: PropTypes.func.isRequired,\n  onAllUsersChecked: PropTypes.func.isRequired,\n  isCheckedAll: PropTypes.bool.isRequired,\n  canCheckUserIds: PropTypes.array.isRequired,\n};\n\nclass WorkWeixinDepartmentMembersList extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { newUsersTempObj, checkedDepartmentId, isMembersListLoading, canCheckUserIds } = this.props;\n    const membersList = this.props.membersList.map((member, index) => {\n      let avatar = member.avatar;\n      if (member.avatar && member.avatar.length > 0) {\n        avatar = member.avatar.substring(0, member.avatar.length - 1) + '100';// get smaller avatar\n      } else {\n        avatar = siteRoot + 'media/avatars/default.png';\n      }\n      return (\n        <tr key={checkedDepartmentId.toString() + member.userid}>\n          <td>\n            {!member.email &&\n              <input type=\"checkbox\" className=\"vam\" onChange={() => this.props.onUserChecked(member)}\n                checked={(member.userid in newUsersTempObj) ? 'checked' : ''}></input>}\n          </td>\n          <td><img className=\"avatar\" src={avatar} alt=\"\"></img></td>\n          <td>{member.name}</td>\n          <td>{member.mobile}</td>\n          <td>{member.contact_email}</td>\n          <td>{member.email && <i className=\"sf2-icon-tick\"></i>}</td>\n        </tr>\n      );\n    });\n\n    return (\n      <div className=\"dir-content-main\">\n        {isMembersListLoading && <Loading/>}\n        {!isMembersListLoading && this.props.membersList.length > 0 &&\n          <Table hover>\n            <thead>\n              <tr>\n                <th width=\"5%\">\n                  {canCheckUserIds.length > 0 &&\n                    <input type=\"checkbox\" className=\"vam\" checked={this.props.isCheckedAll}\n                      onChange={() => this.props.onAllUsersChecked()}></input>}\n                </th>\n                <th width=\"10%\"></th>\n                <th width=\"20%\">{''}</th>\n                <th width=\"20%\">{''}</th>\n                <th width=\"30%\">{''}</th>\n                <th width=\"15%\">{''}</th>\n              </tr>\n            </thead>\n            <tbody>{membersList}</tbody>\n          </Table>\n        }\n        {!isMembersListLoading && this.props.membersList.length === 0 &&\n          <div className=\"message empty-tip text-center\">\n            <img src={`${siteRoot}media/img/member-list-empty-2x.png`} alt=\"\"/>\n            <h4>{''}</h4>\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nWorkWeixinDepartmentMembersList.propTypes = WorkWeixinDepartmentMembersListPropTypes;\n\nexport default WorkWeixinDepartmentMembersList;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/select-editor/sysadmin-user-role-editor.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/dingtalk/dingtalk-departments-tree-node.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/dingtalk/dingtalk-department-members-list.js",["4501"],[],"import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Table } from 'reactstrap';\nimport { siteRoot } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\n\nconst DingtalkDepartmentMembersListPropTypes = {\n  isMembersListLoading: PropTypes.bool.isRequired,\n  membersList: PropTypes.array.isRequired,\n  newUsersTempObj: PropTypes.object.isRequired,\n  checkedDepartmentId: PropTypes.number.isRequired,\n  onUserChecked: PropTypes.func.isRequired,\n  onAllUsersChecked: PropTypes.func.isRequired,\n  isCheckedAll: PropTypes.bool.isRequired,\n  canCheckUserIds: PropTypes.array.isRequired,\n};\n\nclass DingtalkDepartmentMembersList extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { newUsersTempObj, checkedDepartmentId, isMembersListLoading, canCheckUserIds } = this.props;\n    const membersList = this.props.membersList.map((member, index) => {\n      let avatar = member.avatar;\n      if (member.avatar && member.avatar.length > 0) {\n        avatar = member.avatar;\n      } else {\n        avatar = siteRoot + 'media/avatars/default.png';\n      }\n      return (\n        <tr key={checkedDepartmentId.toString() + member.userid}>\n          <td>\n            {!member.email &&\n              <input type=\"checkbox\" className=\"vam\" onChange={() => this.props.onUserChecked(member)}\n                checked={(member.userid in newUsersTempObj) ? 'checked' : ''}></input>}\n          </td>\n          <td><img className=\"avatar\" src={avatar} alt=\"\"></img></td>\n          <td>{member.name}</td>\n          <td>{member.mobile}</td>\n          <td>{member.contact_email}</td>\n          <td>{member.email && <i className=\"sf2-icon-tick\"></i>}</td>\n        </tr>\n      );\n    });\n\n    return (\n      <div className=\"dir-content-main\">\n        {isMembersListLoading && <Loading/>}\n        {!isMembersListLoading && this.props.membersList.length > 0 &&\n          <Table hover>\n            <thead>\n              <tr>\n                <th width=\"5%\">\n                  {canCheckUserIds.length > 0 &&\n                    <input type=\"checkbox\" className=\"vam\" checked={this.props.isCheckedAll}\n                      onChange={() => this.props.onAllUsersChecked()}></input>}\n                </th>\n                <th width=\"10%\"></th>\n                <th width=\"20%\">{''}</th>\n                <th width=\"20%\">{''}</th>\n                <th width=\"30%\">{''}</th>\n                <th width=\"15%\">{''}</th>\n              </tr>\n            </thead>\n            <tbody>{membersList}</tbody>\n          </Table>\n        }\n        {!isMembersListLoading && this.props.membersList.length === 0 &&\n          <div className=\"message empty-tip text-center\">\n            <img src={`${siteRoot}media/img/member-list-empty-2x.png`} alt=\"\"/>\n            <h4>{''}</h4>\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nDingtalkDepartmentMembersList.propTypes = DingtalkDepartmentMembersListPropTypes;\n\nexport default DingtalkDepartmentMembersList;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/work-weixin/work-weixin-departments-tree-node.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/dingtalk/dingtalk-departments-tree-panel.js",["4502"],[],"import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Loading from '../../../components/loading';\nimport DingtalkDepartmentsTreeNode from './dingtalk-departments-tree-node';\n\nconst DingtalkDepartmentsTreePanelPropTypes = {\n  isTreeLoading: PropTypes.bool.isRequired,\n  departmentsTree: PropTypes.array.isRequired,\n  onChangeDepartment: PropTypes.func.isRequired,\n  checkedDepartmentId: PropTypes.number.isRequired,\n  importDepartmentDialogToggle: PropTypes.func.isRequired,\n};\n\nclass DingtalkDepartmentsTreePanel extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { departmentsTree } = this.props;\n    return (\n      <div className=\"dir-content-nav\">\n        <div className=\"tree-view tree\">\n          {this.props.isTreeLoading ?\n            <Loading/> :\n            <div className=\"tree-node\">\n              {departmentsTree.length > 0 && departmentsTree.map((department, index) => {\n                return (\n                  <DingtalkDepartmentsTreeNode\n                    key={department.id}\n                    index={index}\n                    department={department}\n                    isChildrenShow={true}\n                    onChangeDepartment={this.props.onChangeDepartment}\n                    checkedDepartmentId={this.props.checkedDepartmentId}\n                    importDepartmentDialogToggle={this.props.importDepartmentDialogToggle}\n                  />\n                );\n              })}\n            </div>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nDingtalkDepartmentsTreePanel.propTypes = DingtalkDepartmentsTreePanelPropTypes;\n\nexport default DingtalkDepartmentsTreePanel;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/work-weixin/work-weixin-departments-tree-panel.js",["4503"],[],"import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Loading from '../../../components/loading';\nimport WorkWeixinDepartmentsTreeNode from './work-weixin-departments-tree-node';\n\nconst WorkWeixinDepartmentsTreePanelPropTypes = {\n  isTreeLoading: PropTypes.bool.isRequired,\n  departmentsTree: PropTypes.array.isRequired,\n  onChangeDepartment: PropTypes.func.isRequired,\n  checkedDepartmentId: PropTypes.number.isRequired,\n  importDepartmentDialogToggle: PropTypes.func.isRequired,\n};\n\nclass WorkWeixinDepartmentsTreePanel extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { departmentsTree } = this.props;\n    return (\n      <div className=\"dir-content-nav\">\n        <div className=\"tree-view tree\">\n          {this.props.isTreeLoading ?\n            <Loading/> :\n            <div className=\"tree-node\">\n              {departmentsTree.length > 0 && departmentsTree.map((department, index) => {\n                return (\n                  <WorkWeixinDepartmentsTreeNode\n                    key={department.id}\n                    index={index}\n                    department={department}\n                    isChildrenShow={true}\n                    onChangeDepartment={this.props.onChangeDepartment}\n                    checkedDepartmentId={this.props.checkedDepartmentId}\n                    importDepartmentDialogToggle={this.props.importDepartmentDialogToggle}\n                  />\n                );\n              })}\n            </div>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nWorkWeixinDepartmentsTreePanel.propTypes = WorkWeixinDepartmentsTreePanelPropTypes;\n\nexport default WorkWeixinDepartmentsTreePanel;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/terms-editor-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/web-settings/setting-item-base.js",["4504"],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/services/chat.js",[],["4505","4506","4507","4508","4509","4510","4511"],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/shared-link-file-uploader/forbid-upload-list-item.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/shared-link-file-uploader/upload-list-item.js",["4512","4513","4514"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  resumableFile: PropTypes.object.isRequired,\n  onUploadCancel: PropTypes.func.isRequired,\n  onUploadRetry: PropTypes.func.isRequired,\n};\n\nconst UPLOAD_UPLOADING = 'uploading';\nconst UPLOAD_ERROR = 'error';\nconst UPLOAD_ISSAVING = 'isSaving';\nconst UPLOAD_UPLOADED = 'uploaded';\n\nclass UploadListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      uploadState: UPLOAD_UPLOADING\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    let { resumableFile } = nextProps;\n    let uploadState = UPLOAD_UPLOADING;\n\n    if (resumableFile.error) {\n      uploadState = UPLOAD_ERROR;\n    } else {\n      if (resumableFile.remainingTime === 0 && !resumableFile.isSaved) {\n        uploadState = UPLOAD_ISSAVING;\n      }\n\n      if (resumableFile.isSaved) {\n        uploadState = UPLOAD_UPLOADED;\n      }\n    }\n\n    this.setState({uploadState: uploadState});\n  }\n\n  onUploadCancel = (e) => {\n    e.preventDefault();\n    this.props.onUploadCancel(this.props.resumableFile);\n  };\n\n  onUploadRetry = (e) => {\n    e.preventDefault();\n    this.props.onUploadRetry(this.props.resumableFile);\n  };\n\n  formatFileSize = (size) => {\n    if (typeof size !== 'number') {\n      return '';\n    }\n    if (size >= 1000 * 1000 * 1000) {\n      return (size / (1000 * 1000 * 1000)).toFixed(1) + ' G';\n    }\n    if (size >= 1000 * 1000) {\n      return (size / (1000 * 1000)).toFixed(1) + ' M';\n    }\n    if (size >= 1000) {\n      return (size / 1000).toFixed(1) + ' K';\n    }\n    return size.toFixed(1) + ' B';\n  };\n\n  render() {\n    let { resumableFile } = this.props;\n    let progress = Math.round(resumableFile.progress() * 100);\n    let error = resumableFile.error;\n\n    return (\n      <tr className=\"file-upload-item\">\n        <td className=\"upload-name\">\n          <div className=\"ellipsis\">{resumableFile.newFileName}</div>\n        </td>\n        <td>\n          <span className=\"file-size\">{this.formatFileSize(resumableFile.size)}</span>\n        </td>\n        <td className=\"upload-progress\">\n          {(this.state.uploadState === UPLOAD_UPLOADING || this.state.uploadState === UPLOAD_ISSAVING) &&\n            <Fragment>\n              {resumableFile.size >= (100 * 1000 * 1000) &&\n                <Fragment>\n                  {resumableFile.isUploading() && (\n                    <div className=\"progress-container\">\n                      <div className=\"progress\">\n                        <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                      </div>\n                      {(resumableFile.remainingTime === -1) && <div className=\"progress-text\">{gettext('Preparing to upload...')}</div>}\n                      {(resumableFile.remainingTime > 0) && <div className=\"progress-text\">{gettext('Remaining')}{' '}{Utils.formatTime(resumableFile.remainingTime)}</div>}\n                      {(resumableFile.remainingTime === 0) && <div className=\"progress-text\">{gettext('Saving...')}</div>}\n                    </div>\n                  )}\n                  {!resumableFile.isUploading() && (\n                    <div className=\"progress-container d-flex align-items-center\">\n                      <div className=\"progress\">\n                        <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                      </div>\n                    </div>\n                  )}\n                </Fragment>\n              }\n              {(resumableFile.size < (100 * 1000 * 1000)) && (\n                <>\n                  <div className=\"progress-container d-flex align-items-center\">\n                    <div className=\"progress\">\n                      <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                    </div>\n                  </div>\n                  {this.state.uploadState === UPLOAD_UPLOADING && (\n                    <>\n                      {progress == 0 && <p className=\"progress-text mb-0\">{gettext('Waiting...')}</p>}\n                      {progress > 0 && <p className=\"progress-text mb-0\">{`${gettext('Uploading...')} ${progress}%`}</p>}\n                    </>\n                  )}\n                  {this.state.uploadState === UPLOAD_ISSAVING && (\n                    <p className=\"progress-text mb-0\">{gettext('Saving...')}</p>\n                  )}\n                </>\n              )}\n            </Fragment>\n          }\n          {this.state.uploadState === UPLOAD_UPLOADED && (\n            <div className=\"d-flex align-items-center\">\n              <span className=\"upload-success-icon sf2-icon-tick mr-2\"></span>\n              <span className=\"upload-success-msg\">{gettext('Uploaded')}</span>\n            </div>\n          )}\n          {this.state.uploadState === UPLOAD_ERROR && (\n            <div className=\"d-flex align-items-center\">\n              <span className=\"upload-failure-icon fas fa-exclamation mr-2\"></span>\n              <span className=\"upload-failure-msg\" dangerouslySetInnerHTML={{__html: error}}></span>\n            </div>\n          )}\n        </td>\n        <td className=\"upload-operation\">\n          <Fragment>\n            {this.state.uploadState === UPLOAD_UPLOADING && (\n              <a href=\"#\" onClick={this.onUploadCancel} role=\"button\">{gettext('Cancel')}</a>\n            )}\n            {this.state.uploadState === UPLOAD_ERROR && (\n              <a href=\"#\" onClick={this.onUploadRetry} role=\"button\">{gettext('Retry')}</a>\n            )}\n          </Fragment>\n        </td>\n      </tr>\n    );\n  }\n}\n\nUploadListItem.propTypes = propTypes;\n\nexport default UploadListItem;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/terms-and-conditions/item.js",["4515","4516"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { processor } from '@seafile/seafile-editor';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport getPreviewContent from '../../../utils/markdown-utils';\nimport AddOrUpdateTermDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-or-update-term-dialog';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport TermsPerviewDialog from '../../../components/dialog/terms-preview-dialog';\nimport ModalPortal from '../../../components/modal-portal';\nimport OpMenu from '../../../components/dialog/op-menu';\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      itemContent: '...',\n      isOpIconShown: false,\n      isUpdateDialogOpen: false,\n      isDeleteDialogOpen: false,\n      isTermsPerviewDialogOpen: false,\n    };\n  }\n\n  componentDidMount() {\n    let mdFile = this.props.item.text;\n    processor.process(mdFile).then((result) => {\n      let innerHtml = String(result);\n      this.setState({itemContent: innerHtml});\n    });\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.item.text !== this.props.item.text) {\n      let mdFile = nextProps.item.text;\n      processor.process(mdFile).then((result) => {\n        let innerHtml = String(result);\n        this.setState({itemContent: innerHtml});\n      });\n    }\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  };\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  };\n\n  toggleUpdateDialog = (e) => {\n    this.setState({isUpdateDialogOpen: !this.state.isUpdateDialogOpen});\n  };\n\n  toggleDeleteDialog = (e) => {\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  };\n\n  toggleTermsContentDialog = (e) => {\n    this.setState({isTermsPerviewDialogOpen: !this.state.isTermsPerviewDialogOpen});\n  };\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Update':\n        this.toggleUpdateDialog();\n        break;\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n    }\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  deleteTerm = () => {\n    this.props.deleteTerm(this.props.item.id);\n    this.toggleDeleteDialog();\n  };\n\n  updateTerm = (name, versionNumber, text, isActive) => {\n    this.props.updateTerm(this.props.item.id, name, versionNumber, text, isActive);\n    this.toggleUpdateDialog();\n  };\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Update':\n        translateResult = gettext('Update');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  };\n\n  render() {\n    let { item } = this.props;\n    let { isDeleteDialogOpen, isUpdateDialogOpen, isTermsPerviewDialogOpen } = this.state;\n    let previewContent = getPreviewContent(item.text);\n    let itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    let deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td>{item.name}</td>\n          <td>{item.version_number}</td>\n          <td className=\"ellipsis\">\n            <a href='#' onClick={this.toggleTermsContentDialog}>{previewContent.previewText}</a>\n          </td>\n          <td>{moment(item.ctime).fromNow()}</td>\n          <td>{item.activate_time ? moment(item.activate_time).fromNow() : '--'}</td>\n          <td>\n            {this.state.isOpIconShown &&\n              <OpMenu\n                operations={['Update', 'Delete']}\n                translateOperations={this.translateOperations}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <ModalPortal>\n            <CommonOperationConfirmationDialog\n              title={gettext('Delete T&C')}\n              message={deleteDialogMsg}\n              toggleDialog={this.toggleDeleteDialog}\n              executeOperation={this.deleteTerm}\n              confirmBtnText={gettext('Delete')}\n            />\n          </ModalPortal>\n        }\n        {isUpdateDialogOpen &&\n          <ModalPortal>\n            <AddOrUpdateTermDialog\n              updateTerm={this.updateTerm}\n              toggle={this.toggleUpdateDialog}\n              isUpdate={true}\n              oldTermObj={item}\n            />\n          </ModalPortal>\n        }\n        {isTermsPerviewDialogOpen &&\n          <ModalPortal>\n            <TermsPerviewDialog\n              content={item.text}\n              onClosePreviewDialog={this.toggleTermsContentDialog}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  deleteTerm: PropTypes.func.isRequired,\n  updateTerm: PropTypes.func.isRequired,\n};\n\nexport default Item;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/extra-attributes.js",["4517","4518","4519","4520"],["4521"],"import moment from 'moment';\nimport { EXTRA_ATTRIBUTES_NOT_DISPLAY_COLUMN_KEY, DEFAULT_NUMBER_FORMAT, DISPLAY_INTERNAL_ERRORS, DURATION_FORMATS_MAP,\n  DURATION_FORMATS, DURATION_ZERO_DISPLAY, DURATION_DECIMAL_DIGITS, EXTRA_ATTRIBUTES_NOT_DISPLAY_COLUMN_NAME } from '../constants';\nimport NP from './number-precision';\n\nNP.enableBoundaryChecking(false);\n\nexport const getValidColumns = (columns, editableColumns = [], isEmptyFile = false) => {\n  if (!Array.isArray(columns) || columns.length === 0) return [];\n  return columns\n    .map(column => {\n      let validColumn = column;\n      const canEdit = isEmptyFile ? false : editableColumns.includes(column.name);\n      if (column.type === 'single-select') {\n        if (!(column.data && column.data.options)) {\n          validColumn.data = { options: [] };\n        }\n      }\n      validColumn.editable = canEdit;\n      return validColumn;\n    })\n    .filter(column => !EXTRA_ATTRIBUTES_NOT_DISPLAY_COLUMN_KEY.includes(column.key))\n    .filter(column => !EXTRA_ATTRIBUTES_NOT_DISPLAY_COLUMN_NAME.includes(column.name));\n};\n\nexport const getDateDisplayString = (value, format) => {\n  if (value === '' || !value || typeof value !== 'string') {\n    return '';\n  }\n  // Compatible with older versions: if format is null, use defaultFormat\n  const validValue = value.replace(/-/g, '/').replace('T', ' ').replace('Z', '');\n  const date = moment(validValue);\n\n  if (!date.isValid()) return value;\n  switch(format) {\n    case 'D/M/YYYY':\n    case 'DD/MM/YYYY': {\n      const formatValue = date.format('YYYY-MM-DD');\n      const formatValueList = formatValue.split('-');\n      return `${formatValueList[2]}/${formatValueList[1]}/${formatValueList[0]}`;\n    }\n    case 'D/M/YYYY HH:mm':\n    case 'DD/MM/YYYY HH:mm': {\n      const formatValues = date.format('YYYY-MM-DD HH:mm');\n      const formatValuesList = formatValues.split(' ');\n      const formatDateList = formatValuesList[0].split('-');\n      return `${formatDateList[2]}/${formatDateList[1]}/${formatDateList[0]} ${formatValuesList[1]}`;\n    }\n    case 'M/D/YYYY':\n      return date.format('M/D/YYYY');\n    case 'M/D/YYYY HH:mm':\n      return date.format('M/D/YYYY HH:mm');\n    case 'YYYY-MM-DD':\n      return date.format('YYYY-MM-DD');\n    case 'YYYY-MM-DD HH:mm':\n      return date.format('YYYY-MM-DD HH:mm');\n    case 'YYYY-MM-DD HH:mm:ss': {\n      return date.format('YYYY-MM-DD HH:mm:ss');\n    }\n    case 'DD.MM.YYYY':\n      return date.format('DD.MM.YYYY');\n    case 'DD.MM.YYYY HH:mm':\n      return date.format('DD.MM.YYYY HH:mm');\n    default:\n      return date.format('YYYY-MM-DD');\n  }\n};\n\nexport const getSelectColumnOptions = (column) => {\n  if (!column || !column.data || !Array.isArray(column.data.options)) {\n    return [];\n  }\n  return column.data.options;\n};\n\nconst _getMathRoundedDuration = (num, duration_format) => {\n  const decimalDigits = DURATION_DECIMAL_DIGITS[duration_format];\n  if (decimalDigits < 1) {\n    return num;\n  }\n  const ratio = Math.pow(10, decimalDigits);\n  return Math.round(num * ratio) / ratio;\n};\n\nconst _getDurationDecimalSuffix = (duration_format, decimal) => {\n  if (duration_format === DURATION_FORMATS_MAP.H_MM_SS_S) {\n    return decimal === 0 ? '.0' : '';\n  } else if (duration_format === DURATION_FORMATS_MAP.H_MM_SS_SS) {\n    if (decimal === 0) {\n      return '.00';\n    } else if (decimal < 10) {\n      return '0';\n    }\n  } else if (duration_format === DURATION_FORMATS_MAP.H_MM_SS_SSS) {\n    if (decimal === 0) {\n      return '.000';\n    } else if (decimal < 10) {\n      return '00';\n    } else if (decimal < 100) {\n      return '0';\n    }\n  }\n  return '';\n};\n\nexport const getDurationDisplayString = (value, data) => {\n  if (!value && value !== 0) return '';\n  let { duration_format } = data || {};\n  duration_format = duration_format || DURATION_FORMATS_MAP.H_MM;\n  if (DURATION_FORMATS.findIndex((format) => format.type === duration_format) < 0) {\n    return '';\n  }\n  if (value === 0) {\n    return DURATION_ZERO_DISPLAY[duration_format];\n  }\n  const includeDecimal = duration_format.indexOf('.') > -1;\n  let positiveValue = Math.abs(value);\n  if (!includeDecimal) {\n    positiveValue = Math.round(positiveValue);\n  }\n\n  positiveValue = _getMathRoundedDuration(positiveValue, duration_format);\n  const decimalParts = (positiveValue + '').split('.');\n  const decimalPartsLen = decimalParts.length;\n  let decimal = 0;\n  if (decimalPartsLen > 1) {\n    decimal = decimalParts[decimalPartsLen - 1];\n    decimal = decimal ? decimal - 0 : 0;\n  }\n  const decimalDigits = DURATION_DECIMAL_DIGITS[duration_format];\n  const decimalSuffix = _getDurationDecimalSuffix(duration_format, decimal);\n  let displayString = value < 0 ? '-' : '';\n  let hours = parseInt(positiveValue / 3600);\n  let minutes = parseInt((positiveValue - hours * 3600) / 60);\n  if (duration_format === DURATION_FORMATS_MAP.H_MM) {\n    displayString += `${hours}:${minutes > 9 ? minutes : '0' + minutes}`;\n    return displayString;\n  }\n  let seconds = Number.parseFloat((positiveValue - hours * 3600 - minutes * 60).toFixed(decimalDigits));\n  minutes = minutes > 9 ? minutes : `0${minutes}`;\n  seconds = seconds > 9 ? seconds : `0${seconds}`;\n  displayString += `${hours}:${minutes}:${seconds}${decimalSuffix}`;\n  return displayString;\n};\n\nconst _separatorMap = {\n  'comma': ',',\n  'dot': '.',\n  'no': '',\n  'space': ' ',\n};\n\nconst _toThousands = (num, isCurrency, formatData) => {\n  let { decimal = 'dot', thousands = 'no', precision = 2, enable_precision = false } = formatData || {};\n  const decimalString = _separatorMap[decimal];\n  const thousandsString = _separatorMap[thousands];\n  if ((num + '').indexOf('e') > -1) {\n    if (num < 1 && num > -1) {\n      // 1.convert to non-scientific number\n      let numericString = num.toFixed(enable_precision ? precision : 8);\n\n      // 2.remove 0 from end of the number which not set precision. e.g. 0.100000\n      if (!enable_precision) {\n        numericString = removeZerosFromEnd(numericString);\n      }\n\n      // 3.remove minus from number which equal to 0. e.g. '-0.00'\n      if (parseFloat(numericString) === 0) {\n        return numericString.startsWith('-') ? numericString.substring(1) : numericString;\n      }\n      return numericString;\n    }\n    return num;\n  }\n  const decimalDigits = enable_precision ? precision : _getDecimalDigits(num);\n  let value = parseFloat(num.toFixed(decimalDigits));\n  const isMinus = value < 0;\n  let integer = Math.trunc(value);\n  // format decimal value\n  let decimalValue = String(Math.abs(NP.minus(value, integer)).toFixed(decimalDigits)).slice(1);\n  if (!enable_precision) {\n    decimalValue = removeZerosFromEnd(decimalValue);\n  }\n  if (isCurrency) {\n    if (!enable_precision) {\n      if (decimalValue.length === 2) {\n        decimalValue = decimalValue.padEnd(3, '0');\n      } else {\n        decimalValue = (decimalValue.substring(0, 3) || '.').padEnd(3, '0');\n      }\n    }\n  }\n  decimalValue = decimalValue.replace(/./, decimalString);\n  // format integer value\n  let result = [], counter = 0;\n  integer = Math.abs(integer).toString();\n  for (var i = integer.length - 1; i >= 0; i--) {\n    counter++;\n    result.unshift(integer[i]);\n    if (!(counter % 3) && i !== 0) {\n      result.unshift(thousandsString);\n    }\n  }\n  return (isMinus ? '-' : '') + result.join('') + decimalValue;\n};\n\nconst _getDecimalDigits = (num) => {\n  if (Number.isInteger(num)) {\n    return 0;\n  }\n  let valueArr = (num + '').split('.');\n  let digitsLength = valueArr[1] ? valueArr[1].length : 8;\n  return digitsLength > 8 ? 8 : digitsLength;\n};\n\n/**\n * @param {string} value\n * e.g. removeZerosFromEnd('0.0100') // '0.01'\n */\nconst removeZerosFromEnd = (value) => {\n  if (value.endsWith('0')) {\n    return value.replace(/(?:\\.0*|(\\.\\d+?)0+)$/, '$1');\n  }\n  return value;\n};\n\nexport const getPrecisionNumber = (num, formatData) => {\n  let { precision = 2, enable_precision = false } = formatData || {};\n  let type = Object.prototype.toString.call(num);\n  if (type !== '[object Number]') {\n    if (type === '[object String]' && DISPLAY_INTERNAL_ERRORS.includes(num)) {\n      return num;\n    }\n    return null;\n  }\n  let decimalDigits = enable_precision ? precision : _getDecimalDigits(num);\n  return num.toFixed(decimalDigits);\n};\n\nexport const getNumberDisplayString = (value, formatData) => {\n  // formatData: old version maybe 'null'\n  const type = Object.prototype.toString.call(value);\n  if (type !== '[object Number]') {\n    // return formula internal errors directly.\n    if (type === '[object String]' && value.startsWith('#')) {\n      return value;\n    }\n    return '';\n  }\n  if (isNaN(value) || value === Infinity || value === -Infinity) return value + '';\n  const { format = DEFAULT_NUMBER_FORMAT } = formatData || {};\n  switch(format) {\n    case 'number': {\n      return _toThousands(value, false, formatData);\n    }\n    case 'percent': {\n      return `${_toThousands(Number.parseFloat((value * 100).toFixed(8)), false, formatData)}%`;\n    }\n    case 'yuan': {\n      return `${_toThousands(value, true, formatData)}`;\n    }\n    case 'dollar': {\n      return `$${_toThousands(value, true, formatData)}`;\n    }\n    case 'euro': {\n      return `${_toThousands(value, true, formatData)}`;\n    }\n    case 'duration': {\n      return getDurationDisplayString(value, formatData);\n    }\n    case 'custom_currency': {\n      if (formatData.currency_symbol_position === 'after') {\n        return `${_toThousands(value, true, formatData)}${formatData.currency_symbol || ''}`;\n      } else {\n        return `${formatData.currency_symbol || ''}${_toThousands(value, true, formatData)}`;\n      }\n    }\n    default:\n      return '' + value;\n  }\n};\n\nexport const replaceNumberNotAllowInput = (value, format = DEFAULT_NUMBER_FORMAT, currency_symbol = null) => {\n  if (!value) {\n    return '';\n  }\n  value = value.replace(//g, '.');\n  switch(format) {\n    case 'number': {\n      return value.replace(/[^.-\\d,]/g,'');\n    }\n    case 'percent': {\n      return value.replace(/[^.-\\d,%]/g, '');\n    }\n    case 'yuan': {\n      return value.replace(/[^.-\\d,]/g, '');\n    }\n    case 'dollar': {\n      return value.replace(/[^.-\\d$,]/g, '');\n    }\n    case 'euro': {\n      return value.replace(/[^.-\\d,]/g, '');\n    }\n    case 'custom_currency': {\n      // eslint-disable-next-line\n      const reg = new RegExp('[^.-\\d' + currency_symbol + ',]', 'g');\n      return value.replace(reg, '');\n    }\n    default:\n      return value.replace(/[^.-\\d,]/g, '');\n  }\n};\n\nexport const getFloatNumber = (data, format) =>  {\n  if (!data && data !== 0) {\n    return null;\n  }\n  let newData = parseFloat(data.replace(/[^.-\\d]/g, ''));\n  if (format === 'percent' && !isNaN(newData)) {\n    return NP.divide(newData, 100);\n  }\n  return isNaN(newData) ? null : newData;\n};\n\nexport const formatStringToNumber = (numberString, formatData) => {\n  let { format, decimal, thousands, enable_precision, precision } = formatData || {};\n  let value = numberString;\n  if (decimal && thousands && decimal === 'comma') {\n    if (thousands === 'dot') {\n      value = value.replace(/,/, '@');\n      value = value.replace(/\\./g, ',');\n      value = value.replace(/@/, '.');\n    } else {\n      value = value.replace(/\\./g, '');\n      value = value.replace(/,/, '.');\n    }\n  }\n  value = getFloatNumber(value, format);\n  if (enable_precision && value) {\n    if (format === 'percent') {\n      precision += 2;\n    }\n    value = Number(parseFloat(value).toFixed(precision));\n  }\n  return value;\n};\n\nexport const isMac = () => {\n  const platform = navigator.platform;\n  return (platform == 'Mac68K') || (platform == 'MacPPC') || (platform == 'Macintosh') || (platform == 'MacIntel');\n};\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/search/ai-search-ask.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/search/constant.js",["4522"],[],"const SEARCH_DELAY_TIME = 1000;\n\nconst getValueLength = (str) => {\n  let code;\n  let len = 0;\n  for (let i = 0; i < str.length; i++) {\n    code = str.charCodeAt(i);\n    if (code == 10) { //solve enter problem\n      len += 2;\n    } else if (code < 0x007f) {\n      len += 1;\n    } else if (code >= 0x0080 && code <= 0x07ff) {\n      len += 2;\n    } else if (code >= 0x0800 && code <= 0xffff) {\n      len += 3;\n    }\n  }\n  return len;\n};\n\nexport { SEARCH_DELAY_TIME, getValueLength };\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/search/search-result-item.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/share-to-user.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/internal-link.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/share-to-other-server.js",["4523"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, ocmRemoteServers } from '../../utils/constants';\nimport { Input, Button } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport OpIcon from '../op-icon';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\nimport { SeahubSelect } from '../common/select';\n\nclass ShareItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false,\n      isOpFrozen: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  deleteShareItem = () => {\n    this.setState({\n      // the 'delete' takes time,\n      // so 'lock' the op icon here to avoid multiple click on it\n      // avoid repeated requests\n      isOpFrozen: true\n    });\n    let item = this.props.item;\n    this.props.deleteShareItem(item);\n  };\n\n  render() {\n    let item = this.props.item;\n    const { isOperationShow, isOpFrozen } = this.state;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><a href={item.to_server_url} target=\"_blank\" rel=\"noreferrer\">{item.to_server_name}</a></td>\n        <td>{item.to_user}</td>\n        <td>{Utils.sharePerms(item.permission)}</td>\n        {/* <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={currentPermission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeUserPermission}\n          />\n        </td> */}\n        <td>\n          <OpIcon\n            className={`sf2-icon-x3 action-icon ${isOperationShow && !isOpFrozen ? '' : 'hide'}`}\n            op={this.deleteShareItem}\n            title={gettext('Delete')}\n          />\n        </td>\n      </tr>\n    );\n  }\n}\n\nShareItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  deleteShareItem: PropTypes.func.isRequired,\n};\n\nclass ShareList extends React.Component {\n\n  render() {\n    return (\n      <div className=\"share-list-container\">\n        <table className=\"table-thead-hidden\">\n          <thead>\n            <tr>\n              <th width=\"30%\">{gettext('Server')}</th>\n              <th width=\"25%\">{gettext('User Email')}</th>\n              <th width=\"30%\">{gettext('Permission')}</th>\n              <th width=\"15%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            {this.props.items.map((item, index) => {\n              return (\n                <ShareItem\n                  key={index}\n                  item={item}\n                  deleteShareItem={this.props.deleteShareItem}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n\nShareList.propTypes = {\n  items: PropTypes.array.isRequired,\n  deleteShareItem: PropTypes.func.isRequired,\n};\n\nconst propTypes = {\n  isGroupOwnedRepo: PropTypes.bool,\n  itemPath: PropTypes.string.isRequired,\n  itemType: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n};\n\nclass ShareToOtherServer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedServer: null,\n      toUser: '',\n      permission: 'rw',\n      btnDisabled: true,\n      isSubmitting: false,\n      ocmShares: []\n    };\n    this.permissions = ['rw', 'r'];\n  }\n\n  componentDidMount() {\n    seafileAPI.listOCMSharesPrepare(this.props.repoID).then((res) => {\n      this.setState({ocmShares: res.data.ocm_share_list});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      this.setState({\n        errorMsg: errMessage\n      });\n    });\n  }\n\n  OCMShare = () => {\n    const { repoID, itemPath } = this.props;\n    const { selectedServer, toUser, permission } = this.state;\n    let toServerURL = selectedServer.value;\n    if (!toServerURL.endsWith('/')) {\n      toServerURL += '/';\n    }\n    this.setState({\n      btnDisabled: true,\n      isSubmitting: true\n    });\n    seafileAPI.addOCMSharePrepare(toUser, toServerURL, repoID, itemPath, permission).then((res) => {\n      let ocmShares = this.state.ocmShares;\n      ocmShares.unshift(res.data);\n      this.setState({\n        ocmShares: ocmShares,\n        selectedServer: null,\n        toUser: '',\n        permission: 'rw',\n        isSubmitting: false\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n      this.setState({\n        btnDisabled: false,\n        isSubmitting: false\n      });\n    });\n  };\n\n  handleToUserChange = (e) => {\n    const toUser = e.target.value;\n    this.setState({\n      toUser: toUser,\n      btnDisabled: !this.state.selectedServer || !toUser.trim()\n    });\n  };\n\n  handleServerChange = (selectedServer) => {\n    this.setState({\n      selectedServer,\n      btnDisabled: !this.state.toUser.trim()\n    });\n  };\n\n  deleteShareItem = (deletedItem) => {\n    const { id } = deletedItem;\n    toaster.notify(gettext('It may take some time, please wait.'));\n    seafileAPI.deleteOCMSharePrepare(id).then((res) => {\n      let ocmShares = this.state.ocmShares.filter(item => {\n        return item.id != id;\n      });\n      this.setState({ocmShares: ocmShares});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  };\n\n  render() {\n    const {\n      errorMsg, ocmShares,\n      toUser, selectedServer, permission,\n      btnDisabled, isSubmitting\n    } = this.state;\n    return (\n      <Fragment>\n        <table>\n          <thead>\n            <tr>\n              <th width=\"30%\">{gettext('Server')}</th>\n              <th width=\"25%\">{gettext('User Email')}</th>\n              <th width=\"30%\">{gettext('Permission')}</th>\n              <th width=\"15%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>\n                <SeahubSelect\n                  placeholder={gettext('Select a server')}\n                  value={selectedServer}\n                  options={ocmRemoteServers}\n                  onChange={this.handleServerChange}\n                />\n              </td>\n              <td>\n                <Input\n                  value={toUser}\n                  onChange={this.handleToUserChange}\n                />\n              </td>\n              <td>\n                <SharePermissionEditor\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button\n                  onClick={this.OCMShare}\n                  disabled={btnDisabled}\n                  className={isSubmitting ? 'btn-loading' : ''}>\n                  {gettext('Submit')}\n                </Button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        {errorMsg ?\n          <p className=\"error text-center mt-4\">{errorMsg}</p> :\n          <ShareList\n            items={ocmShares}\n            deleteShareItem={this.deleteShareItem}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nShareToOtherServer.propTypes = propTypes;\n\nexport default ShareToOtherServer;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/share-to-group.js",["4524"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport { gettext, isPro, enableShareToDepartment } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\nimport { SeahubSelect, NoGroupMessage } from '../common/select';\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  deleteShareItem = () => {\n    let item = this.props.item;\n    this.props.deleteShareItem(item.group_info.id);\n  };\n\n  onChangeUserPermission = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeUserPermission(item, permission);\n  };\n\n  render() {\n    let item = this.props.item;\n    let currentPermission = Utils.getSharedPermission(item);\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} tabIndex=\"0\" onFocus={this.onMouseEnter}>\n        <td className='name'>{item.group_info.name}</td>\n        <td>\n          <SharePermissionEditor\n            repoID={this.props.repoID}\n            isTextMode={true}\n            autoFocus={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={currentPermission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeUserPermission}\n          />\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteShareItem}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nGroupItem.propTypes = {\n  repoID: PropTypes.string.isRequired,\n  item: PropTypes.object.isRequired,\n  permissions: PropTypes.array.isRequired,\n  deleteShareItem: PropTypes.func.isRequired,\n  onChangeUserPermission: PropTypes.func.isRequired,\n};\n\nclass GroupList extends React.Component {\n\n  render() {\n    let items = this.props.items;\n    return (\n      <tbody>\n        {items.map((item, index) => {\n          return (\n            <GroupItem\n              key={index}\n              item={item}\n              repoID={this.props.repoID}\n              permissions={this.props.permissions}\n              deleteShareItem={this.props.deleteShareItem}\n              onChangeUserPermission={this.props.onChangeUserPermission}\n            />\n          );\n        })}\n      </tbody>\n    );\n  }\n}\n\nGroupList.propTypes = {\n  repoID: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  permissions: PropTypes.array.isRequired,\n  deleteShareItem: PropTypes.func.isRequired,\n  onChangeUserPermission: PropTypes.func.isRequired,\n};\n\nconst propTypes = {\n  isGroupOwnedRepo: PropTypes.bool,\n  itemPath: PropTypes.string.isRequired,\n  itemType: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  onAddCustomPermissionToggle: PropTypes.func,\n};\n\nclass ShareToGroup extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      options: [],\n      selectedOption: null,\n      errorMsg: [],\n      permission: 'rw',\n      sharedItems: []\n    };\n    this.permissions = [];\n    let { itemType, isRepoOwner } = props;\n    if (itemType === 'library') {\n      this.permissions = isRepoOwner ? ['rw', 'r', 'admin', 'cloud-edit', 'preview'] : ['rw', 'r', 'cloud-edit', 'preview'];\n    } else if (itemType === 'dir') {\n      this.permissions = ['rw', 'r', 'cloud-edit', 'preview'];\n    }\n    if (!isPro) {\n      this.permissions = ['rw', 'r'];\n    }\n    if (this.props.isGroupOwnedRepo) {\n      this.permissions = ['rw', 'r', 'cloud-edit', 'preview'];\n    }\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({selectedOption: option});\n  };\n\n  componentDidMount() {\n    this.loadOptions();\n    this.listSharedGroups();\n  }\n\n  loadOptions = () => {\n    seafileAPI.shareableGroups().then((res) => {\n      let options = [];\n      for (let i = 0 ; i < res.data.length; i++) {\n        const item = res.data[i];\n        if (item.parent_group_id != 0) { // it's a department\n          if (!enableShareToDepartment) {\n            continue;\n          }\n        }\n        let obj = {};\n        obj.value = res.data[i].name;\n        obj.id = res.data[i].id;\n        obj.label = res.data[i].name;\n        options.push(obj);\n      }\n      this.setState({options: options});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  listSharedGroups = () => {\n    let path = this.props.itemPath;\n    let repoID = this.props.repoID;\n    seafileAPI.listSharedItems(repoID, path, 'group').then((res) => {\n      if(res.data.length !== 0) {\n        this.setState({\n          sharedItems: res.data\n        });\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  };\n\n  shareToGroup = () => {\n\n    let path = this.props.itemPath;\n    let repoID = this.props.repoID;\n    let isGroupOwnedRepo = this.props.isGroupOwnedRepo;\n\n    if (isGroupOwnedRepo) {\n      seafileAPI.shareGroupOwnedRepoToGroup(repoID, this.state.permission, this.state.selectedOption['id'], path).then(res => {\n        let errorMsg = [];\n        if (res.data.failed.length > 0) {\n          for (let i = 0 ; i < res.data.failed.length ; i++) {\n            errorMsg[i] = res.data.failed[i];\n          }\n        }\n\n        // todo modify api\n        let items = res.data.success.map(item => {\n          let sharedItem = {\n            'group_info': { 'id': item.group_id, 'name': item.group_name},\n            'permission': item.permission,\n            'share_type': 'group',\n          };\n          return sharedItem;\n        });\n\n        this.setState({\n          errorMsg: errorMsg,\n          sharedItems: this.state.sharedItems.concat(items),\n          selectedOption: null,\n          permission: 'rw',\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.shareFolder(repoID, path, 'group', this.state.permission, [this.state.selectedOption['id']]).then(res => {\n        let errorMsg = [];\n        if (res.data.failed.length > 0) {\n          for (let i = 0 ; i < res.data.failed.length ; i++) {\n            errorMsg[i] = res.data.failed[i];\n          }\n        }\n\n        this.setState({\n          errorMsg: errorMsg,\n          sharedItems: this.state.sharedItems.concat(res.data.success),\n          selectedOption: null,\n          permission: 'rw'\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  deleteShareItem = (groupID) => {\n    let path = this.props.itemPath;\n    let repoID = this.props.repoID;\n    if (this.props.isGroupOwnedRepo) {\n      seafileAPI.deleteGroupOwnedRepoSharedGroupItem(repoID, groupID, path).then(() => {\n        this.setState({\n          sharedItems: this.state.sharedItems.filter(item => { return item.group_info.id !== groupID; })\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.deleteShareToGroupItem(repoID, path, 'group', groupID).then(() => {\n        this.setState({\n          sharedItems: this.state.sharedItems.filter(item => { return item.group_info.id !== groupID; })\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  onChangeUserPermission = (item, permission) => {\n    let path = this.props.itemPath;\n    let repoID = this.props.repoID;\n    let groupID = item.group_info.id;\n    if (this.props.isGroupOwnedRepo) {\n      seafileAPI.modifyGroupOwnedRepoGroupSharedPermission(repoID, permission, groupID, path).then(() => {\n        this.updateSharedItems(item, permission);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.updateShareToGroupItemPermission(repoID, path, 'group', groupID, permission).then(() => {\n        this.updateSharedItems(item, permission);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  updateSharedItems = (item, permission) => {\n    let groupID = item.group_info.id;\n    let sharedItems = this.state.sharedItems.map(sharedItem => {\n      let sharedItemGroupID = sharedItem.group_info.id;\n      if (groupID === sharedItemGroupID) {\n        sharedItem.permission = permission;\n        sharedItem.is_admin = permission === 'admin' ? true : false;\n      }\n      return sharedItem;\n    });\n    this.setState({sharedItems: sharedItems});\n  };\n\n  render() {\n    const thead = (\n      <thead>\n        <tr>\n          <th width=\"47%\">{gettext('Group')}</th>\n          <th width=\"35%\">{gettext('Permission')}</th>\n          <th width=\"18%\"></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        <table className=\"w-xs-200\">\n          {thead}\n          <tbody>\n            <tr>\n              <td>\n                <SeahubSelect\n                  onChange={this.handleSelectChange}\n                  options={this.state.options}\n                  placeholder={gettext('Select groups')}\n                  maxMenuHeight={200}\n                  value={this.state.selectedOption}\n                  components={{ NoOptionsMessage: NoGroupMessage }}\n                />\n              </td>\n              <td>\n                <SharePermissionEditor\n                  repoID={this.props.repoID}\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                  enableAddCustomPermission={isPro}\n                  onAddCustomPermissionToggle={this.props.onAddCustomPermissionToggle}\n                />\n              </td>\n              <td>\n                <Button onClick={this.shareToGroup}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = item.group_name + ': ' + item.error_msg;\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden w-xs-200\">\n            {thead}\n            <GroupList\n              repoID={this.props.repoID}\n              items={this.state.sharedItems}\n              permissions={this.permissions}\n              deleteShareItem={this.deleteShareItem}\n              onChangeUserPermission={this.onChangeUserPermission}\n            />\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nShareToGroup.propTypes = propTypes;\n\nexport default ShareToGroup;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/search-file-dialog.js",["4525","4526","4527","4528","4529"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../utils/constants';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass SearchFileDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSubmitDisabled: true,\n      isSubmitting: false,\n      q: '',\n      errMessage: '',\n      fileList: null\n    };\n  }\n\n  searchFile = () => {\n    const { q } = this.state;\n    if (!q.trim()) {\n      return false;\n    }\n    this.setState({\n      isSubmitDisabled: true,\n      isSubmitting: true\n    });\n    seafileAPI.searchFileInRepo(this.props.repoID, q).then((res) => {\n      this.setState({\n        fileList: res.data.data,\n        errMessage: '',\n        isSubmitDisabled: false,\n        isSubmitting: false\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      this.setState({\n        errMessage: errMessage,\n        isSubmitDisabled: false,\n        isSubmitting: false\n      });\n    });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      e.preventDefault();\n      this.searchFile();\n    }\n  };\n\n  toggle = () => {\n    this.props.toggleDialog();\n  };\n\n  handleInputChange = (e) => {\n    const q = e.target.value;\n    this.setState({\n      q: q,\n      isSubmitDisabled: !q.trim()\n    });\n  };\n\n  render() {\n    const { q, errMessage, fileList, isSubmitDisabled, isSubmitting } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('Search')}</ModalHeader>\n        <ModalBody style={{height: '250px'}} className=\"o-auto\">\n          <div className=\"d-flex\">\n            <input className=\"form-control mr-2\" type=\"text\" placeholder={gettext('Search files in this library')} value={q} onChange={this.handleInputChange} onKeyDown={this.handleKeyDown} autoFocus={true} />\n            <button type=\"submit\" className={`btn btn-primary flex-shrink-0 ${isSubmitting ? 'btn-loading' : ''}`} onClick={this.searchFile} disabled={isSubmitDisabled}>{gettext('Search')}</button>\n          </div>\n          {errMessage && <Alert color=\"danger\" className=\"mt-2\">{errMessage}</Alert>}\n          <div className=\"mt-2\">\n            {!fileList ?\n              null :\n              fileList.length == 0 ?\n                <p>{gettext('No result')}</p> :\n                <table className=\"table-hover\">\n                  <thead>\n                    <tr>\n                      <th width=\"8%\"></th>\n                      <th width=\"42%\">{gettext('Name')}</th>\n                      <th width=\"25%\">{gettext('Size')}</th>\n                      <th width=\"25%\">{gettext('Last Update')}</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {fileList.map((item, index) => {\n                      return (\n                        <FileItem\n                          key={index}\n                          item={item}\n                          repoID={this.props.repoID}\n                          repoName={this.props.repoName}\n                        />\n                      );\n                    })\n                    }\n                  </tbody>\n                </table>}\n          </div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSearchFileDialog.propTypes = propTypes;\n\nconst FileItemPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  item: PropTypes.object.isRequired\n};\n\nclass FileItem extends React.PureComponent {\n\n  render() {\n    const { item, repoID, repoName } = this.props;\n    const name = item.path.substr(item.path.lastIndexOf('/') + 1);\n    const url = item.type == 'file' ?\n      `${siteRoot}lib/${repoID}/file${Utils.encodePath(item.path)}` :\n      `${siteRoot}library/${repoID}/${Utils.encodePath(repoName + item.path)}`;\n\n    return(\n      <tr>\n        <td className=\"text-center\"><img src={item.type == 'file' ? Utils.getFileIconUrl(item.path) : Utils.getFolderIconUrl()} alt=\"\" width=\"24\" /></td>\n        <td>\n          <a href={url}>{name}</a>\n        </td>\n        <td>{item.type == 'file' ? Utils.bytesToSize(item.size) : ''}</td>\n        <td>{moment(item.mtime).fromNow()}</td>\n      </tr>\n    );\n  }\n}\n\nFileItem.propTypes = FileItemPropTypes;\n\n\nexport default SearchFileDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-chooser/repo-list-view.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-chooser/searched-list-view.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/custom-permission/custom-permission-manager.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/about-dialog.js",["4530"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext, lang, mediaUrl, logoPath, logoWidth, logoHeight, siteTitle, seafileVersion, additionalAboutDialogLinks, aboutDialogCustomHtml } from '../../utils/constants';\n\nconst propTypes = {\n  onCloseAboutDialog: PropTypes.func.isRequired,\n};\n\nclass AboutDialog extends React.Component {\n\n  renderExternalAboutLinks = () => {\n    if (additionalAboutDialogLinks && (typeof additionalAboutDialogLinks) === 'object') {\n      let keys = Object.keys(additionalAboutDialogLinks);\n      return keys.map((key, index) => {\n        return <a key={index} className=\"d-block\" href={additionalAboutDialogLinks[key]}>{key}</a>;\n      });\n    }\n    return null;\n  };\n\n  render() {\n    // let href = lang === 'zh-cn' ? 'http://seafile.com/about/' : 'http://seafile.com/en/about/';\n    let href = \"https://sesamedisk.com\";\n    const { onCloseAboutDialog: toggleDialog } = this.props;\n\n    if (aboutDialogCustomHtml) {\n      return (\n        <Modal isOpen={true} toggle={toggleDialog}>\n          <ModalBody>\n            <button type=\"button\" className=\"close\" onClick={toggleDialog}><span aria-hidden=\"true\"></span></button>\n            <div className=\"about-content\" dangerouslySetInnerHTML={{ __html: aboutDialogCustomHtml }}></div>\n          </ModalBody>\n        </Modal>\n      );\n    } else {\n      return (\n        <Modal isOpen={true} toggle={toggleDialog}>\n          <ModalBody>\n            <button type=\"button\" className=\"close\" onClick={toggleDialog}><span aria-hidden=\"true\"></span></button>\n            <div className=\"about-content\">\n              <p><img src={mediaUrl + logoPath} height={logoHeight} width={logoWidth} title={siteTitle} alt=\"logo\" /></p>\n              <p>Sesame Disk by NiHao Cloud Services</p>\n              <p>{gettext('Server Version: ')}{seafileVersion}<br /> {(new Date()).getFullYear()} {gettext('Seafile')}</p>\n              <p>{this.renderExternalAboutLinks()}</p>\n              <p><a href={href} target=\"_blank\" rel=\"noreferrer\">{gettext('About Us')}</a></p>\n            </div>\n          </ModalBody>\n        </Modal>\n      );\n    }\n  }\n}\n\nAboutDialog.propTypes = propTypes;\n\nexport default AboutDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/share-to-invite-people.js",["4531"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport moment from 'moment';\nimport { Button, Input } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport Loading from '../loading';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\nimport '../../css/invitations.css';\n\nclass UserItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({ isOperationShow: true });\n  };\n\n  onMouseLeave = () => {\n    this.setState({ isOperationShow: false });\n  };\n\n  deleteShareItem = () => {\n    let item = this.props.item;\n    this.props.deleteShareItem(item.token);\n  };\n\n  onChangeUserPermission = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeUserPermission(item.token, permission);\n  };\n\n  render() {\n    let item = this.props.item;\n    let currentPermission = item.is_admin ? 'admin' : item.permission;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} tabIndex=\"0\" onFocus={this.onMouseEnter}>\n        <td className=\"name\">{item.accepter}</td>\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={currentPermission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeUserPermission}\n          />\n        </td>\n        <td>{moment(item.expire_time).format('YYYY-MM-DD')}</td>\n        <td className=\"name\">{item.inviter_name}</td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteShareItem}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nUserItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  permissions: PropTypes.array.isRequired,\n  deleteShareItem: PropTypes.func.isRequired,\n  onChangeUserPermission: PropTypes.func.isRequired,\n};\n\n\nclass UserList extends React.Component {\n\n  render() {\n    let items = this.props.items;\n    return (\n      <tbody>\n        {items.map((item, index) => {\n          return (\n            <UserItem\n              key={index}\n              item={item}\n              permissions={this.props.permissions}\n              deleteShareItem={this.props.deleteShareItem}\n              onChangeUserPermission={this.props.onChangeUserPermission}\n            />\n          );\n        })}\n      </tbody>\n    );\n  }\n}\n\nUserList.propTypes = {\n  items: PropTypes.array.isRequired,\n  permissions: PropTypes.array.isRequired,\n  deleteShareItem: PropTypes.func.isRequired,\n  onChangeUserPermission: PropTypes.func.isRequired,\n};\n\nconst propTypes = {\n  itemPath: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass ShareToInvitePeople extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      permission: 'r',\n      sharedItems: [],\n      emails: '',\n      isSubmitting: false,\n    };\n    this.permissions = ['rw', 'r'];\n  }\n\n  handleInputChange = (e) => {\n    let emails = e.target.value;\n    this.setState({\n      emails: emails,\n    });\n    if (this.state.errorMsg) {\n      this.setState({\n        errorMsg: '',\n      });\n    }\n  };\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      e.preventDefault();\n      this.shareAndInvite();\n    }\n  };\n\n  componentDidMount() {\n    const path = this.props.itemPath;\n    const repoID = this.props.repoID;\n    seafileAPI.listRepoShareInvitations(repoID, path).then((res) => {\n      if (res.data.length !== 0) {\n        this.setState({ sharedItems: res.data.repo_share_invitation_list });\n      }\n    }).catch(error => {\n      const errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({ permission: permission });\n  };\n\n  onInvitePeople = (successArray) => {\n    successArray.push.apply(successArray, this.state.sharedItems);\n    this.setState({\n      sharedItems: successArray,\n    });\n  };\n\n  shareAndInvite = () => {\n    let emails = this.state.emails.trim();\n    if (!emails) {\n      this.setState({ errorMsg: gettext('It is required.') });\n      return false;\n    }\n\n    let emailsArray = [];\n    emails = emails.split(',');\n    for (let i = 0, len = emails.length; i < len; i++) {\n      let email = emails[i].trim();\n      if (email) {\n        emailsArray.push(email);\n      }\n    }\n\n    if (!emailsArray.length) {\n      this.setState({ errorMsg: gettext('Email is invalid.') });\n      return false;\n    }\n\n    this.setState({ isSubmitting: true });\n\n    const path = this.props.itemPath;\n    const repoID = this.props.repoID;\n    const permission = this.state.permission;\n\n    seafileAPI.addRepoShareInvitations(repoID, path, emailsArray, permission).then((res) => {\n      const success = res.data.success;\n      if (success.length) {\n        let successMsg = '';\n        if (success.length == 1) {\n          successMsg = gettext('Successfully invited %(email).')\n            .replace('%(email)', success[0].accepter);\n        } else {\n          successMsg = gettext('Successfully invited %(email) and %(num) other people.')\n            .replace('%(email)', success[0].accepter)\n            .replace('%(num)', success.length - 1);\n        }\n        toaster.success(successMsg);\n        this.onInvitePeople(success);\n      }\n      const failed = res.data.failed;\n      if (failed.length) {\n        for (let i = 0, len = failed.length; i < len; i++) {\n          let failedMsg = failed[i].email + ': ' + failed[i].error_msg;\n          toaster.danger(failedMsg);\n        }\n      }\n      this.setState({ isSubmitting: false });\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.setState({ isSubmitting: false });\n    });\n  };\n\n  deleteShareItem = (token) => {\n    const path = this.props.itemPath;\n    const repoID = this.props.repoID;\n\n    seafileAPI.deleteRepoShareInvitation(repoID, path, token).then(res => {\n      this.setState({\n        sharedItems: this.state.sharedItems.filter(item => { return item.token !== token; })\n      });\n    }).catch(error => {\n      const errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onChangeUserPermission = (token, permission) => {\n    const path = this.props.itemPath;\n    const repoID = this.props.repoID;\n\n    seafileAPI.updateRepoShareInvitation(repoID, path, token, permission).then(() => {\n      this.updateSharedItems(token, permission);\n    }).catch(error => {\n      const errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  updateSharedItems = (token, permission) => {\n    let sharedItems = this.state.sharedItems.map(sharedItem => {\n      if (sharedItem.token === token) {\n        sharedItem.permission = permission;\n      }\n      return sharedItem;\n    });\n    this.setState({ sharedItems: sharedItems });\n  };\n\n  render() {\n    let { sharedItems, isSubmitting } = this.state;\n    return (\n      <Fragment>\n        <table className=\"table-thead-hidden w-xs-200\">\n          <thead>\n            <tr>\n              <th width=\"50%\">{gettext('Invite Guest')}</th>\n              <th width=\"35%\">{gettext('Permission')}</th>\n              <th width=\"15%\">{''}</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>\n                <Input\n                  type=\"text\"\n                  id=\"emails\"\n                  placeholder={gettext('Emails, separated by \\',\\'')}\n                  value={this.state.emails}\n                  onChange={this.handleInputChange}\n                  onKeyDown={this.handleKeyDown}\n                />\n              </td>\n              <td>\n                <SharePermissionEditor\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.shareAndInvite} className=\"submit-btn\" disabled={isSubmitting}\n                >{isSubmitting ? <Loading /> : gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n            <tr key={'error'}>\n              <td colSpan={3}><p className=\"error\">{this.state.errorMsg}</p></td>\n            </tr>\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"w-xs-200\">\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Email')}</th>\n                <th width=\"20%\">{gettext('Permission')}</th>\n                <th width=\"20%\">{gettext('Expiration')}</th>\n                <th width=\"20%\">{gettext('Inviter')}</th>\n                <th width=\"15%\">{''}</th>\n              </tr>\n            </thead>\n            <UserList\n              items={sharedItems}\n              permissions={this.permissions}\n              deleteShareItem={this.deleteShareItem}\n              onChangeUserPermission={this.onChangeUserPermission}\n            />\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nShareToInvitePeople.propTypes = propTypes;\n\nexport default ShareToInvitePeople;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/search/ai-search-widgets/ai-search-robot.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/history-list-view/history-list-item.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toast/toastManager.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/dashboard/activity-item.js",["4532","4533","4534","4535","4536","4537","4538"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport ListCreatedFileDialog from '../../components/dialog/list-created-files-dialog';\nimport ModalPortal from '../../components/modal-portal';\n\nimport '../../css/files-activities.css';\n\nmoment.locale(window.app.config.lang);\n\nconst activityPropTypes = {\n  item: PropTypes.object.isRequired,\n  index: PropTypes.number.isRequired,\n  items: PropTypes.array.isRequired,\n  isDesktop: PropTypes.bool.isRequired,\n};\n\nclass ActivityItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isListCreatedFiles: false,\n    };\n  }\n\n  onListCreatedFilesToggle = () => {\n    this.setState({\n      isListCreatedFiles: !this.state.isListCreatedFiles,\n    });\n  };\n\n  render() {\n    const isDesktop = this.props.isDesktop;\n    let {item, index, items} = this.props;\n    let op, details, moreDetails = false;\n    let userProfileURL = `${siteRoot}profile/${encodeURIComponent(item.author_email)}/`;\n\n    let libURL = siteRoot + 'library/' + item.repo_id + '/' + encodeURIComponent(item.repo_name) + '/';\n    let libLink = <a href={libURL}>{item.repo_name}</a>;\n    let smallLibLink = <a className=\"small text-secondary\" href={libURL}>{item.repo_name}</a>;\n\n    if (item.obj_type == 'repo') {\n      switch(item.op_type) {\n        case 'create':\n          op = gettext('Created library');\n          details = libLink;\n          break;\n        case 'rename':\n          op = gettext('Renamed library');\n          details = <span>{item.old_repo_name} => {libLink}</span>;\n          break;\n        case 'delete':\n          op = gettext('Deleted library');\n          details = item.repo_name;\n          break;\n        case 'recover':\n          op = gettext('Restored library');\n          details = libLink;\n          break;\n        case 'clean-up-trash':\n          op = gettext('Cleaned trash');\n          if (item.days == 0) {\n            details = gettext('Removed all items from trash.');\n          } else {\n            details = gettext('Removed items older than {n} days from trash.').replace('{n}', item.days);\n          }\n          moreDetails = true;\n          break;\n      }\n    } else if (item.obj_type == 'files') {\n      let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      let fileLink = `<a href=${fileURL} target=\"_blank\">${item.name}</a>`;\n      let fileCount = item.createdFilesCount - 1;\n      let firstLine = gettext('{file} and {n} other files')\n        .replace('{file}', fileLink)\n        .replace('{n}', fileCount);\n      op = gettext('Created {n} files').replace('{n}', item.createdFilesCount);\n      details = (\n        <Fragment>\n          <p className=\"m-0 d-inline\" dangerouslySetInnerHTML={{__html: firstLine}}></p>\n          {isDesktop && <button type=\"button\" onClick={this.onListCreatedFilesToggle} className=\"activity-details text-secondary ml-2 border-0 p-0 bg-transparent\">{gettext('details')}</button>}\n        </Fragment>\n      );\n      moreDetails = true;\n    } else if (item.obj_type == 'file') {\n      const isDraft = item.name.endsWith('(draft).md');\n      const fileURL = isDraft ? '' :\n        `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      let fileLink = <a href={fileURL} target=\"_blank\" rel=\"noreferrer\">{item.name}</a>;\n      if (isDraft) {\n        fileLink = item.name;\n      }\n      switch (item.op_type) {\n        case 'create':\n          op = isDraft ? gettext('Created draft') : gettext('Created file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n        case 'delete':\n          op = isDraft ? gettext('Deleted draft') : gettext('Deleted file');\n          details = item.name;\n          moreDetails = true;\n          break;\n        case 'recover':\n          op = gettext('Restored file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n        case 'rename':\n          op = gettext('Renamed file');\n          details = <span>{item.old_name} => {fileLink}</span>;\n          moreDetails = true;\n          break;\n        case 'move':\n          // eslint-disable-next-line\n          const filePathLink = <a href={fileURL}>{item.path}</a>;\n          op = gettext('Moved file');\n          details = <span>{item.old_path} => {filePathLink}</span>;\n          moreDetails = true;\n          break;\n        case 'edit': // update\n          op = isDraft ? gettext('Updated draft') : gettext('Updated file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n      }\n    } else { // dir\n      let dirURL = siteRoot + 'library/' + item.repo_id + '/' + encodeURIComponent(item.repo_name) + Utils.encodePath(item.path);\n      let dirLink = <a href={dirURL} target=\"_blank\" rel=\"noreferrer\">{item.name}</a>;\n      switch (item.op_type) {\n        case 'create':\n          op = gettext('Created folder');\n          details = dirLink;\n          moreDetails = true;\n          break;\n        case 'delete':\n          op = gettext('Deleted folder');\n          details = item.name;\n          moreDetails = true;\n          break;\n        case 'recover':\n          op = gettext('Restored folder');\n          details = dirLink;\n          moreDetails = true;\n          break;\n        case 'rename':\n          op = gettext('Renamed folder');\n          details = <span>{item.old_name} => {dirLink}</span>;\n          moreDetails = true;\n          break;\n        case 'move':\n          // eslint-disable-next-line\n          const dirPathLink = <a href={dirURL}>{item.path}</a>;\n          op = gettext('Moved folder');\n          details = <span>{item.old_path} => {dirPathLink}</span>;\n          moreDetails = true;\n          break;\n      }\n    }\n\n    let isShowDate = true;\n    if (index > 0) {\n      let lastEventTime = items[index - 1].time;\n      isShowDate = moment(item.time).isSame(lastEventTime, 'day') ? false : true;\n    }\n\n    return (\n      <Fragment>\n        {isShowDate &&\n          <tr>\n            <td colSpan={isDesktop ? 5 : 3} className=\"border-top-0\">{moment(item.time).format('YYYY-MM-DD')}</td>\n          </tr>\n        }\n        {isDesktop ? (\n          <tr>\n            <td className=\"text-center\">\n              <img src={item.avatar_url} alt=\"\" width=\"32\" height=\"32\" className=\"avatar\" />\n            </td>\n            <td>\n              <a href={userProfileURL}>{item.author_name}</a>\n            </td>\n            <td>{op}</td>\n            <td>\n              {details}\n              {moreDetails && <br /> }\n              {moreDetails && smallLibLink}\n            </td>\n            <td className=\"text-secondary\">\n              <time datetime={item.time} is=\"relative-time\" title={moment(item.time).format('llll')}>{moment(item.time).fromNow()}</time>\n            </td>\n          </tr>\n        ) : (\n          <tr>\n            <td className=\"text-center align-top\">\n              <img src={item.avatar_url} alt=\"\" width=\"32\" height=\"32\" className=\"avatar\" />\n            </td>\n            <td>\n              <a href={userProfileURL}>{item.author_name}</a>\n              <p className=\"m-0 text-secondary\">{op}</p>\n              {details}\n            </td>\n            <td className=\"text-right align-top\">\n              <span className=\"text-secondary mobile-activity-time\">\n                <time datetime={item.time} is=\"relative-time\" title={moment(item.time).format('llll')}>{moment(item.time).fromNow()}</time>\n              </span>\n              {moreDetails && <br /> }\n              {moreDetails && libLink}\n            </td>\n          </tr>\n        )}\n        {this.state.isListCreatedFiles &&\n          <ModalPortal>\n            <ListCreatedFileDialog\n              activity={item}\n              toggleCancel={this.onListCreatedFilesToggle}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nActivityItem.propTypes = activityPropTypes;\n\nexport default ActivityItem;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/upload-link/upload-list-item.js",["4539","4540","4541"],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/upload-link/forbid-upload-list-item.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/generate-upload-link.js",["4542","4543","4544","4545","4546","4547"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport copy from 'copy-to-clipboard';\nimport moment from 'moment';\nimport { Button, Form, FormGroup, Label, Input, InputGroup, InputGroupAddon, Alert } from 'reactstrap';\nimport { gettext, shareLinkForceUsePassword, shareLinkPasswordMinLength, shareLinkPasswordStrengthLevel, canSendShareLinkEmail, uploadLinkExpireDaysMin, uploadLinkExpireDaysMax, uploadLinkExpireDaysDefault } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport UploadLink from '../../models/upload-link';\nimport toaster from '../toast';\nimport SendLink from '../send-link';\nimport SharedLink from '../shared-link';\nimport SetLinkExpiration from '../set-link-expiration';\nimport { EvalProFunc, EvalQuotaUploadLinks } from '../../services/ad';\n\nconst propTypes = {\n  itemPath: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  closeShareDialog: PropTypes.func.isRequired,\n};\n\nconst inputWidth = Utils.isDesktop() ? 250 : 210;\n\nclass GenerateUploadLink extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.isExpireDaysNoLimit = (uploadLinkExpireDaysMin === 0 && uploadLinkExpireDaysMax === 0 && uploadLinkExpireDaysDefault == 0);\n    this.defaultExpireDays = this.isExpireDaysNoLimit ? '' : uploadLinkExpireDaysDefault;\n\n    this.state = {\n      showPasswordInput: shareLinkForceUsePassword ? true : false,\n      passwordVisible: false,\n      password: '',\n      passwordnew: '',\n      storedPasswordVisible: false,\n      sharedUploadInfo: null,\n      isSendLinkShown: false,\n      isExpireChecked: !this.isExpireDaysNoLimit,\n      isExpirationEditIconShow: false,\n      isEditingExpiration: false,\n      expType: 'by-days',\n      expireDays: this.defaultExpireDays,\n      expDate: null\n    };\n  }\n\n  componentDidMount() {\n    this.getUploadLink();\n  }\n\n  getUploadLink = () => {\n    let path = this.props.itemPath;\n    let repoID = this.props.repoID;\n    seafileAPI.getUploadLink(repoID, path).then((res) => {\n      if (res.data.length !== 0) {\n        let sharedUploadInfo = new UploadLink(res.data[0]);\n        this.setState({ sharedUploadInfo: sharedUploadInfo });\n      }\n    }).catch((err) => {\n      let errMsg = Utils.getErrorMsg(err, true);\n      if (!err.response || err.response.status !== 403) {\n        toaster.danger(errMsg);\n      }\n      this.props.closeShareDialog();\n    });\n  };\n\n  addPassword = () => {\n    this.setState({\n      showPasswordInput: !this.state.showPasswordInput,\n      password: '',\n      passwordnew: '',\n      errorInfo: ''\n    });\n  };\n\n  togglePasswordVisible = () => {\n    this.setState({\n      passwordVisible: !this.state.passwordVisible\n    });\n  };\n\n  generatePassword = () => {\n    let val = Utils.generatePassword(shareLinkPasswordMinLength);\n    this.setState({\n      password: val,\n      passwordnew: val\n    });\n  };\n\n  inputPassword = (e) => {\n    this.setState({\n      password: e.target.value\n    });\n  };\n\n  inputPasswordNew = (e) => {\n    this.setState({\n      passwordnew: e.target.value\n    });\n  };\n\n  toggleStoredPasswordVisible = () => {\n    this.setState({\n      storedPasswordVisible: !this.state.storedPasswordVisible\n    });\n  };\n\n  generateUploadLink = () => {\n    let isValid = this.validateParamsInput();\n    if (isValid) {\n      this.setState({ errorInfo: '' });\n\n      let { itemPath, repoID } = this.props;\n      let { password, isExpireChecked, expType, expireDays, expDate } = this.state;\n\n      let expirationTime = '';\n      if (isExpireChecked) {\n        if (expType == 'by-days') {\n          expirationTime = moment().add(parseInt(expireDays), 'days').format();\n        } else {\n          expirationTime = expDate.format();\n        }\n      }\n\n      seafileAPI.createUploadLink(repoID, itemPath, password, expirationTime).then((res) => {\n        let sharedUploadInfo = new UploadLink(res.data);\n        this.setState({ sharedUploadInfo: sharedUploadInfo });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  validateParamsInput = () => {\n    let { showPasswordInput, password, passwordnew, isExpireChecked, expType, expireDays, expDate } = this.state;\n\n    // check password params\n    if (showPasswordInput) {\n      if (password.length === 0) {\n        this.setState({ errorInfo: gettext('Please enter a password.') });\n        return false;\n      }\n      if (password.length < shareLinkPasswordMinLength) {\n        this.setState({ errorInfo: gettext('The password is too short.') });\n        return false;\n      }\n      if (password !== passwordnew) {\n        this.setState({ errorInfo: gettext('Passwords don\\'t match') });\n        return false;\n      }\n      if (Utils.getStrengthLevel(password) < shareLinkPasswordStrengthLevel) {\n        this.setState({ errorInfo: gettext('The password is too weak. It should include at least {passwordStrengthLevel} of the following: number, upper letter, lower letter and other symbols.').replace('{passwordStrengthLevel}', shareLinkPasswordStrengthLevel) });\n        return false;\n      }\n    }\n\n    if (isExpireChecked) {\n      if (expType == 'by-date') {\n        if (!expDate) {\n          this.setState({ errorInfo: gettext('Please select an expiration time') });\n          return false;\n        }\n        return true;\n      }\n\n      let reg = /^\\d+$/;\n      if (!expireDays) {\n        this.setState({ errorInfo: gettext('Please enter days') });\n        return false;\n      }\n      if (!reg.test(expireDays)) {\n        this.setState({ errorInfo: gettext('Please enter a non-negative integer') });\n        return false;\n      }\n      this.setState({ expireDays: parseInt(expireDays) });\n    }\n    return true;\n  };\n\n  onExpireChecked = (e) => {\n    this.setState({ isExpireChecked: e.target.checked });\n  };\n\n  setExpType = (e) => {\n    this.setState({\n      expType: e.target.value\n    });\n  };\n\n  onExpDateChanged = (value) => {\n    this.setState({\n      expDate: value\n    });\n  };\n\n  onExpireDaysChanged = (e) => {\n    let day = e.target.value.trim();\n    this.setState({ expireDays: day });\n  };\n\n  onCopyUploadLink = () => {\n    let uploadLink = this.state.sharedUploadInfo.link;\n    copy(uploadLink);\n    toaster.success(gettext('Upload link is copied to the clipboard.'));\n    this.props.closeShareDialog();\n  };\n\n  handleMouseOverExpirationEditIcon = () => {\n    this.setState({ isExpirationEditIconShow: true });\n  };\n\n  handleMouseOutExpirationEditIcon = () => {\n    this.setState({ isExpirationEditIconShow: false });\n  };\n\n  editExpirationToggle = () => {\n    this.setState({ isEditingExpiration: !this.state.isEditingExpiration });\n  };\n\n  updateExpiration = (e) => {\n\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation();\n\n    let { expType, expireDays, expDate } = this.state;\n\n    let expirationTime = '';\n    if (expType == 'by-days') {\n      expirationTime = moment().add(parseInt(expireDays), 'days').format();\n    } else {\n      expirationTime = expDate.format();\n    }\n\n    seafileAPI.updateUploadLink(this.state.sharedUploadInfo.token, expirationTime).then((res) => {\n      let sharedUploadInfo = new UploadLink(res.data);\n      this.setState({\n        sharedUploadInfo: sharedUploadInfo,\n        isEditingExpiration: false,\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  deleteUploadLink = () => {\n    let sharedUploadInfo = this.state.sharedUploadInfo;\n    seafileAPI.deleteUploadLink(sharedUploadInfo.token).then(() => {\n      this.setState({\n        showPasswordInput: shareLinkForceUsePassword ? true : false,\n        expireDays: this.defaultExpireDays,\n        expDate: null,\n        isExpireChecked: !this.isExpireDaysNoLimit,\n        password: '',\n        passwordnew: '',\n        sharedUploadInfo: null,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  toggleSendLink = () => {\n    this.setState({\n      isSendLinkShown: !this.state.isSendLinkShown\n    });\n  };\n\n  render() {\n\n    const { isSendLinkShown } = this.state;\n\n    let passwordLengthTip = gettext('(at least {passwordMinLength} characters and includes {passwordStrengthLevel} of the following: number, upper letter, lower letter and other symbols)');\n    passwordLengthTip = passwordLengthTip.replace('{passwordMinLength}', shareLinkPasswordMinLength)\n      .replace('{passwordStrengthLevel}', shareLinkPasswordStrengthLevel);\n\n    if (this.state.sharedUploadInfo) {\n      let sharedUploadInfo = this.state.sharedUploadInfo;\n      return (\n        <div>\n          <Form className=\"mb-4\">\n            <FormGroup>\n              <dt className=\"text-secondary font-weight-normal\">{gettext('Upload Link:')}</dt>\n              <dd>\n                <SharedLink\n                  link={sharedUploadInfo.link}\n                  linkExpired={sharedUploadInfo.is_expired}\n                  copyLink={this.onCopyUploadLink}\n                />\n              </dd>\n            </FormGroup>\n\n            {sharedUploadInfo.password && (\n              <FormGroup className=\"mb-0\">\n                <dt className=\"text-secondary font-weight-normal\">{gettext('Password:')}</dt>\n                <dd className=\"d-flex\">\n                  <div className=\"d-flex align-items-center\">\n                    <input id=\"stored-password\" className=\"border-0 mr-1\" type=\"text\" value={this.state.storedPasswordVisible ? sharedUploadInfo.password : '****************************************'} readOnly={true} size={Math.max(sharedUploadInfo.password.length, 10)} />\n                    <span tabIndex=\"0\" role=\"button\" aria-label={this.state.storedPasswordVisible ? gettext('Hide') : gettext('Show')} onKeyDown={this.onIconKeyDown} onClick={this.toggleStoredPasswordVisible} className={`eye-icon fas ${this.state.storedPasswordVisible ? 'fa-eye' : 'fa-eye-slash'}`}></span>\n                  </div>\n                </dd>\n              </FormGroup>\n            )}\n\n            {sharedUploadInfo.expire_date && (\n              <FormGroup className=\"mb-0\">\n                <dt className=\"text-secondary font-weight-normal\">{gettext('Expiration Date:')}</dt>\n                {!this.state.isEditingExpiration &&\n                  <dd style={{ width: '250px' }} onMouseEnter={this.handleMouseOverExpirationEditIcon} onMouseLeave={this.handleMouseOutExpirationEditIcon}>\n                    {moment(sharedUploadInfo.expire_date).format('YYYY-MM-DD HH:mm:ss')}\n                    {this.state.isExpirationEditIconShow && (\n                      <a href=\"#\"\n                        role=\"button\"\n                        aria-label={gettext('Edit')}\n                        title={gettext('Edit')}\n                        className=\"fa fa-pencil-alt attr-action-icon\"\n                        onClick={EvalProFunc(this.editExpirationToggle)}>\n                      </a>\n                    )}\n                  </dd>\n                }\n                {this.state.isEditingExpiration &&\n                  <div className=\"ml-4\">\n                    <SetLinkExpiration\n                      minDays={uploadLinkExpireDaysMin}\n                      maxDays={uploadLinkExpireDaysMax}\n                      defaultDays={uploadLinkExpireDaysDefault}\n                      expType={this.state.expType}\n                      setExpType={this.setExpType}\n                      expireDays={this.state.expireDays}\n                      onExpireDaysChanged={this.onExpireDaysChanged}\n                      expDate={this.state.expDate}\n                      onExpDateChanged={this.onExpDateChanged}\n                    />\n                    <div className={this.state.expType == 'by-days' ? 'mt-2' : 'mt-3'}>\n                      <button className=\"btn btn-primary mr-2\" onClick={this.updateExpiration}>{gettext('Update')}</button>\n                      <button className=\"btn btn-secondary\" onClick={this.editExpirationToggle}>{gettext('Cancel')}</button>\n                    </div>\n                  </div>\n                }\n              </FormGroup>\n            )}\n          </Form>\n          {canSendShareLinkEmail && !isSendLinkShown && <Button onClick={this.toggleSendLink} className=\"mr-2\">{gettext('Send')}</Button>}\n          {!isSendLinkShown && <Button onClick={this.deleteUploadLink}>{gettext('Delete')}</Button>}\n          {isSendLinkShown &&\n            <SendLink\n              linkType='uploadLink'\n              token={sharedUploadInfo.token}\n              toggleSendLink={this.toggleSendLink}\n              closeShareDialog={this.props.closeShareDialog}\n            />\n          }\n        </div>\n      );\n    }\n    return (\n      <Form className=\"generate-upload-link\">\n        <FormGroup check>\n          <Label check>\n            {shareLinkForceUsePassword ? (\n              <Label check>\n                <Input type=\"checkbox\" checked readOnly disabled />\n                <span>{gettext('Add password protection')}</span>\n              </Label>\n            ) : (\n              <Label check>\n                <Input type=\"checkbox\" onChange={this.addPassword} />\n                <span>{gettext('Add password protection')}</span>\n              </Label>\n            )}\n          </Label>\n          {this.state.showPasswordInput &&\n            <div className=\"ml-4\">\n              <FormGroup>\n                <Label for=\"passwd\">{gettext('Password')}</Label>\n                <span className=\"tip\">{passwordLengthTip}</span>\n                <InputGroup style={{ width: inputWidth }}>\n                  <Input id=\"passwd\" type={this.state.passwordVisible ? 'text' : 'password'} value={this.state.password || ''} onChange={this.inputPassword} />\n                  <InputGroupAddon addonType=\"append\">\n                    <Button onClick={this.togglePasswordVisible}><i className={`link-operation-icon fas ${this.state.passwordVisible ? 'fa-eye' : 'fa-eye-slash'}`}></i></Button>\n                    <Button onClick={this.generatePassword}><i className=\"link-operation-icon fas fa-magic\"></i></Button>\n                  </InputGroupAddon>\n                </InputGroup>\n              </FormGroup>\n              <FormGroup>\n                <Label for=\"passwd-again\">{gettext('Password again')}</Label>\n                <Input id=\"passwd-again\" style={{ width: inputWidth }} type={this.state.passwordVisible ? 'text' : 'password'} value={this.state.passwordnew || ''} onChange={this.inputPasswordNew} />\n              </FormGroup>\n            </div>\n          }\n        </FormGroup>\n        <FormGroup check>\n          <Label check>\n            {this.isExpireDaysNoLimit ? (\n              <Input type=\"checkbox\" onChange={this.onExpireChecked} />\n            ) : (\n              <Input type=\"checkbox\" checked readOnly disabled />\n            )}\n            <span>{gettext('Add auto expiration')}</span>\n          </Label>\n          {this.state.isExpireChecked &&\n            <div className=\"ml-4\">\n              <SetLinkExpiration\n                minDays={uploadLinkExpireDaysMin}\n                maxDays={uploadLinkExpireDaysMax}\n                defaultDays={uploadLinkExpireDaysDefault}\n                expType={this.state.expType}\n                setExpType={this.setExpType}\n                expireDays={this.state.expireDays}\n                onExpireDaysChanged={this.onExpireDaysChanged}\n                expDate={this.state.expDate}\n                onExpDateChanged={this.onExpDateChanged}\n              />\n            </div>\n          }\n        </FormGroup>\n        {this.state.errorInfo && <Alert color=\"danger\" className=\"mt-2\">{this.state.errorInfo}</Alert>}\n        <Button className=\"generate-link-btn\" onClick={EvalQuotaUploadLinks(this.generateUploadLink)}>{gettext('Generate')}</Button>\n      </Form>\n    );\n  }\n}\n\nGenerateUploadLink.propTypes = propTypes;\n\nexport default GenerateUploadLink;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/tree-view/tree-view.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/wiki-dir-list-view/wiki-dir-list-view.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/models/custom-permission.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/my-libs/mylib-repo-list-item.js",["4548","4549","4550","4551","4552","4553"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport moment from 'moment';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, storages } from '../../utils/constants';\nimport ModalPortal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport toaster from '../../components/toast';\nimport DeleteRepoDialog from '../../components/dialog/delete-repo-dialog';\nimport TransferDialog from '../../components/dialog/transfer-dialog';\nimport LibHistorySettingDialog from '../../components/dialog/lib-history-setting-dialog';\nimport ChangeRepoPasswordDialog from '../../components/dialog/change-repo-password-dialog';\nimport ResetEncryptedRepoPasswordDialog from '../../components/dialog/reset-encrypted-repo-password-dialog';\nimport LabelRepoStateDialog from '../../components/dialog/label-repo-state-dialog';\nimport LibSubFolderPermissionDialog from '../../components/dialog/lib-sub-folder-permission-dialog';\nimport Rename from '../../components/rename';\nimport MylibRepoMenu from './mylib-repo-menu';\nimport RepoAPITokenDialog from '../../components/dialog/repo-api-token-dialog';\nimport RepoSeaTableIntegrationDialog from '../../components/dialog/repo-seatable-integration-dialog';\nimport RepoShareAdminDialog from '../../components/dialog/repo-share-admin-dialog';\nimport LibOldFilesAutoDelDialog from '../../components/dialog/lib-old-files-auto-del-dialog';\nimport RepoMonitoredIcon from '../../components/repo-monitored-icon';\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onRenameRepo: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onTransferRepo: PropTypes.func.isRequired,\n  onRepoClick: PropTypes.func.isRequired,\n  onMonitorRepo: PropTypes.func.isRequired,\n};\n\nclass MylibRepoListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShow: false,\n      isStarred: this.props.repo.starred,\n      isRenaming: false,\n      isShareDialogShow: false,\n      isDeleteDialogShow: false,\n      isTransferDialogShow: false,\n      isHistorySettingDialogShow: false,\n      isChangePasswordDialogShow: false,\n      isResetPasswordDialogShow: false,\n      isLabelRepoStateDialogOpen: false,\n      isFolderPermissionDialogShow: false,\n      isAPITokenDialogShow: false,\n      isSeaTableIntegrationShow: false,\n      isRepoShareAdminDialogOpen: false,\n      isRepoDeleted: false,\n      isOldFilesAutoDelDialogOpen: false,\n    };\n  }\n\n  onFocus = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: true\n      });\n    }\n  };\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: true,\n        highlight: true,\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: false,\n        highlight: false\n      });\n    }\n  };\n\n  onMenuItemClick = (item) => {\n    switch(item) {\n      case 'Star':\n      case 'Unstar':\n        this.onToggleStarRepo();\n        break;\n      case 'Share':\n        this.onShareToggle();\n        break;\n      case 'Delete':\n        this.onDeleteToggle();\n        break;\n      case 'Rename':\n        this.onRenameToggle();\n        break;\n      case 'Transfer':\n        this.onTransferToggle();\n        break;\n      case 'History Setting':\n        this.onHistorySettingToggle();\n        break;\n      case 'Change Password':\n        this.onChangePasswordToggle();\n        break;\n      case 'Reset Password':\n        this.onResetPasswordToggle();\n        break;\n      case 'Watch File Changes':\n        this.watchFileChanges();\n        break;\n      case 'Unwatch File Changes':\n        this.unwatchFileChanges();\n        break;\n      case 'Folder Permission':\n        this.onFolderPermissionToggle();\n        break;\n      case 'Label Current State':\n        this.onLabelToggle();\n        break;\n      case 'API Token':\n        this.onAPITokenToggle();\n        break;\n      case 'Share Admin':\n        this.toggleRepoShareAdminDialog();\n        break;\n      case 'Old Files Auto Delete':\n        this.toggleOldFilesAutoDelDialog();\n        break;\n      case 'SeaTable integration':\n        this.onSeaTableIntegrationToggle();\n        break;\n      default:\n        break;\n    }\n  };\n\n  visitRepo = () => {\n    if (!this.state.isRenaming && this.props.repo.repo_name) {\n      navigate(this.repoURL);\n    }\n  };\n\n  onRepoClick = () => {\n    this.props.onRepoClick(this.props.repo);\n  };\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const repoName = this.props.repo.repo_name;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  watchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.monitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  unwatchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.unMonitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onShareToggle = (e) => {\n    // when close share dialog after send share link email,\n    // there is no event\n    if (e != undefined) {\n      e.preventDefault();\n    }\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  };\n\n  onDeleteToggle = (e) => {\n    e.preventDefault();\n    this.setState({isDeleteDialogShow: !this.state.isDeleteDialogShow});\n  };\n\n  onRenameToggle = () => {\n    this.props.onFreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  };\n\n  onTransferToggle = () => {\n    this.setState({isTransferDialogShow: !this.state.isTransferDialogShow});\n  };\n\n  onHistorySettingToggle = () => {\n    this.setState({isHistorySettingDialogShow: !this.state.isHistorySettingDialogShow});\n  };\n\n  onChangePasswordToggle = () => {\n    this.setState({isChangePasswordDialogShow: !this.state.isChangePasswordDialogShow});\n  };\n\n  onResetPasswordToggle = () => {\n    this.setState({isResetPasswordDialogShow: !this.state.isResetPasswordDialogShow});\n  };\n\n  onLabelToggle = () => {\n    this.setState({isLabelRepoStateDialogOpen: !this.state.isLabelRepoStateDialogOpen});\n  };\n\n  onFolderPermissionToggle = () => {\n    this.setState({isFolderPermissionDialogShow: !this.state.isFolderPermissionDialogShow});\n  };\n\n  onAPITokenToggle = () => {\n    this.setState({isAPITokenDialogShow: !this.state.isAPITokenDialogShow});\n  };\n\n  onSeaTableIntegrationToggle = () => {\n    this.setState({isSeaTableIntegrationShow: !this.state.isSeaTableIntegrationShow});\n  };\n\n  toggleRepoShareAdminDialog = () => {\n    this.setState({isRepoShareAdminDialogOpen: !this.state.isRepoShareAdminDialogOpen});\n  };\n\n  toggleOldFilesAutoDelDialog = () => {\n    this.setState({isOldFilesAutoDelDialogOpen: !this.state.isOldFilesAutoDelDialogOpen});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false,\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  onRenameConfirm = (newName) => {\n    let repo = this.props.repo;\n    let repoID = repo.repo_id;\n    seafileAPI.renameRepo(repoID, newName).then(() => {\n      this.props.onRenameRepo(repo, newName);\n      this.onRenameCancel();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onRenameCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  };\n\n  onTransferRepo = (user) => {\n    let repoID = this.props.repo.repo_id;\n    seafileAPI.transferRepo(repoID, user.email).then(res => {\n      this.props.onTransferRepo(repoID);\n      let message = gettext('Successfully transferred the library.');\n      toaster.success(message);\n    }).catch(error => {\n      if (error.response){\n        toaster.danger(error.response.data.error_msg || gettext('Error'), {duration: 3});\n      } else {\n        toaster.danger(gettext('Failed. Please check the network.'), {duration: 3});\n      }\n    });\n    this.onTransferToggle();\n  };\n\n  onDeleteRepo = (repo) => {\n    seafileAPI.deleteRepo(repo.repo_id).then((res) => {\n\n      this.setState({\n        isRepoDeleted: true,\n        isDeleteDialogShow: false,\n      });\n\n      this.props.onDeleteRepo(repo);\n      let name = repo.repo_name;\n      var msg = gettext('Successfully deleted {name}.').replace('{name}', name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = repo.repo_name;\n        errMessage = gettext('Failed to delete {name}.').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n\n      this.setState({isRepoDeleted: false});\n    });\n  };\n\n  renderPCUI = () => {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let repoURL = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onClick={this.onRepoClick} onFocus={this.onFocus}>\n        <td className=\"text-center\">\n          <a href=\"#\" role=\"button\" aria-label={this.state.isStarred ? gettext('Unstar') : gettext('Star')} onClick={this.onToggleStarRepo}>\n            <i className={`fa-star ${this.state.isStarred ? 'fas' : 'far star-empty'}`}></i>\n          </a>\n        </td>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td>\n          {this.state.isRenaming && (\n            <Rename\n              name={repo.repo_name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenaming && repo.repo_name && (\n            <Fragment>\n              <Link to={repoURL}>{repo.repo_name}</Link>\n              {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n            </Fragment>\n          )}\n          {!this.state.isRenaming && !repo.repo_name &&\n            (gettext('Broken (please contact your administrator to fix this library)'))\n          }\n        </td>\n        <td>\n          {(repo.repo_name && this.state.isOpIconShow) && (\n            <div>\n              <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.onShareToggle}></a>\n              <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} role=\"button\" aria-label={gettext('Delete')} onClick={this.onDeleteToggle}></a>\n              <MylibRepoMenu\n                isPC={true}\n                repo={this.props.repo}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            </div>\n          )}\n        </td>\n        <td>{repo.size}</td>\n        {storages.length > 0 && <td>{repo.storage_name}</td>}\n        <td title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</td>\n      </tr>\n    );\n  };\n\n  renderMobileUI = () => {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let repoURL = this.repoURL = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''}  onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onClick={this.onRepoClick}>\n        <td onClick={this.visitRepo}><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td onClick={this.visitRepo}>\n          {this.state.isRenaming && (\n            <Rename\n              name={repo.repo_name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenaming && repo.repo_name && (\n            <div>\n              <Link to={repoURL}>{repo.repo_name}</Link>\n              {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n            </div>\n          )}\n          {!this.state.isRenaming && !repo.repo_name &&\n            <div>(gettext('Broken (please contact your administrator to fix this library)'))</div>\n          }\n          <span className=\"item-meta-info\">{repo.size}</span>\n          <span className=\"item-meta-info\" title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</span>\n        </td>\n        <td>\n          {repo.repo_name && (\n            <MylibRepoMenu\n              repo={this.props.repo}\n              isStarred={this.state.isStarred}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n          )}\n        </td>\n      </tr>\n    );\n  };\n\n  render() {\n    let repo = this.props.repo;\n    return (\n      <Fragment>\n        <MediaQuery query=\"(min-width: 768px)\">\n          {this.renderPCUI()}\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {this.renderMobileUI()}\n        </MediaQuery>\n        {this.state.isShareDialogShow && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={repo.repo_name}\n              itemPath={'/'}\n              repoID={repo.repo_id}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              toggleDialog={this.onShareToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isDeleteDialogShow && (\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onDeleteRepo}\n              toggle={this.onDeleteToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isTransferDialogShow && (\n          <ModalPortal>\n            <TransferDialog\n              itemName={repo.repo_name}\n              submit={this.onTransferRepo}\n              toggleDialog={this.onTransferToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isHistorySettingDialogShow && (\n          <ModalPortal>\n            <LibHistorySettingDialog\n              repoID={repo.repo_id}\n              itemName={repo.repo_name}\n              toggleDialog={this.onHistorySettingToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isChangePasswordDialogShow && (\n          <ModalPortal>\n            <ChangeRepoPasswordDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onChangePasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isResetPasswordDialogShow && (\n          <ModalPortal>\n            <ResetEncryptedRepoPasswordDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.onResetPasswordToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isLabelRepoStateDialogOpen && (\n          <ModalPortal>\n            <LabelRepoStateDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onLabelToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isFolderPermissionDialogShow && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onFolderPermissionToggle}\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isAPITokenDialogShow && (\n          <ModalPortal>\n            <RepoAPITokenDialog\n              repo={repo}\n              onRepoAPITokenToggle={this.onAPITokenToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isSeaTableIntegrationShow && (\n          <ModalPortal>\n            <RepoSeaTableIntegrationDialog\n              repo={repo}\n              onSeaTableIntegrationToggle={this.onSeaTableIntegrationToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isRepoShareAdminDialogOpen && (\n          <ModalPortal>\n            <RepoShareAdminDialog\n              repo={repo}\n              toggleDialog={this.toggleRepoShareAdminDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isOldFilesAutoDelDialogOpen && (\n          <ModalPortal>\n            <LibOldFilesAutoDelDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.toggleOldFilesAutoDelDialog}\n            />\n          </ModalPortal>\n        )}\n\n      </Fragment>\n    );\n  }\n}\n\nMylibRepoListItem.propTypes = propTypes;\n\nexport default MylibRepoListItem;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/select-editor/select-editor.js",["4554"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport Select from 'react-select';\nimport { MenuSelectStyle } from '../common/select';\nimport '../../css/select-editor.css';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired, // there will be two mode. first: text and select. second: just select\n  isEditing: PropTypes.bool,\n  isEditIconShow: PropTypes.bool.isRequired,\n  autoFocus: PropTypes.bool,\n  options: PropTypes.array.isRequired,\n  currentOption: PropTypes.string.isRequired,\n  translateOption: PropTypes.func.isRequired,\n  translateExplanation: PropTypes.func,\n  onOptionChanged: PropTypes.func.isRequired,\n  toggleItemFreezed: PropTypes.func,\n  enableAddCustomPermission: PropTypes.bool,\n  onAddCustomPermissionToggle: PropTypes.func,\n};\n\nclass SelectEditor extends React.Component {\n\n  static defaultProps = {\n    enableAddCustomPermission: false,\n    isEditing: false,\n    autoFocus: false,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEditing: props.isEditing,\n      options: []\n    };\n    this.options = [];\n  }\n\n  componentDidMount() {\n    this.setOptions();\n  }\n\n  setOptions = () => {\n    this.options = [];\n    const options = this.props.options;\n    for (let i = 0, length = options.length; i < length; i++) {\n      let option = {};\n      option.value = options[i];\n      if (!options[i].length) { // it's ''. for example, intitution option in 'system admin - users' page can be ''.\n        option.label = <div style={{minHeight: '1em'}}></div>;\n      } else {\n        option.label = <div>{this.props.translateOption(options[i])}{ this.props.translateExplanation && <div className=\"permission-editor-explanation\">{this.props.translateExplanation(options[i])}</div>}</div>;\n      }\n      this.options.push(option);\n    }\n\n    const { enableAddCustomPermission } = this.props;\n    if (enableAddCustomPermission) {\n      const option = {\n        value: gettext('Add custom permission'),\n        isDisabled: true,\n        label: (\n          <div className=\"permission-editor-btn-add-custom-permission\" onClick={this.props.onAddCustomPermissionToggle}>\n            <i className=\"fa fa-plus\"></i>\n            <span>{gettext('Add custom permission')}</span>\n          </div>\n        )\n      };\n      this.options.push(option);\n    }\n\n    this.setState({\n      options: this.options\n    });\n  };\n\n  UNSAFE_componentWillReceiveProps() {\n    this.setOptions();\n  }\n\n  onEditPermission = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({isEditing: true});\n    this.props.toggleItemFreezed && this.props.toggleItemFreezed(true);\n  };\n\n  onOptionChanged = (e) => {\n    let permission = e.value;\n    if (permission !== this.props.currentOption) {\n      this.props.onOptionChanged(permission);\n    }\n    this.setState({isEditing: false});\n    this.props.toggleItemFreezed && this.props.toggleItemFreezed(false);\n  };\n\n  onSelectHandler = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n  };\n\n  onMenuClose = () => {\n    this.setState({isEditing: false});\n    this.props.toggleItemFreezed && this.props.toggleItemFreezed(false);\n  };\n\n  render() {\n    let { currentOption, isTextMode } = this.props;\n    // scence1: isTextMode (text)editor-icon --> select\n    // scence2: !isTextMode select\n    return (\n      <div className=\"permission-editor\" onClick={this.onSelectHandler}>\n        {(!isTextMode || this.state.isEditing) &&\n          <Select\n            options={this.state.options}\n            className=\"permission-editor-select\"\n            classNamePrefix=\"permission-editor\"\n            placeholder={this.props.translateOption(currentOption)}\n            value={currentOption}\n            onChange={this.onOptionChanged}\n            captureMenuScroll={false}\n            menuPlacement=\"auto\"\n            menuPosition={'fixed'}\n            menuPortalTarget={document.querySelector('#wrapper')}\n            styles={MenuSelectStyle}\n            onMenuClose={this.onMenuClose}\n            autoFocus={this.props.autoFocus}\n            menuShouldScrollIntoView\n          />\n        }\n        {(isTextMode && !this.state.isEditing) &&\n          <div>\n            {this.props.translateOption(currentOption)}\n            {this.props.isEditIconShow && (\n              <a href=\"#\"\n                role=\"button\"\n                aria-label={gettext('Edit')}\n                title={gettext('Edit')}\n                className=\"fa fa-pencil-alt attr-action-icon\"\n                onClick={this.onEditPermission}>\n              </a>\n            )}\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nSelectEditor.propTypes = propTypes;\n\nexport default SelectEditor;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/share-link-panel/index.js",["4555","4556","4557","4558","4559","4560","4561","4562","4563"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { isPro, gettext, shareLinkExpireDaysMin, shareLinkExpireDaysMax, shareLinkExpireDaysDefault } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport ShareLink from '../../models/share-link';\nimport toaster from '../toast';\nimport Loading from '../loading';\nimport LinkDetails from './link-details';\nimport LinkCreation from './link-creation';\nimport LinkList from './link-list';\nimport GenerateShareLinkWithPassword from '../../services/generate-share-link-with-password';\n\nconst propTypes = {\n  itemPath: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  closeShareDialog: PropTypes.func.isRequired,\n  userPerm: PropTypes.string,\n  itemType: PropTypes.string\n};\n\nconst PER_PAGE = 25;\n\nclass ShareLinkPanel extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.isExpireDaysNoLimit = (shareLinkExpireDaysMin === 0 && shareLinkExpireDaysMax === 0 && shareLinkExpireDaysDefault == 0);\n    this.defaultExpireDays = this.isExpireDaysNoLimit ? '' : shareLinkExpireDaysDefault;\n\n    this.state = {\n      isLoading: true,\n      hasMore: false,\n      isLoadingMore: false,\n      page: 1,\n      mode: 'listLinks',\n      sharedLinkInfo: null,\n      shareLinks: [],\n      permissionOptions: [],\n      currentPermission: ''\n    };\n  }\n\n  componentDidMount() {\n    const { page } = this.state;\n    const { repoID, itemPath: path } = this.props;\n    seafileAPI.listShareLinks({ repoID, path, page }).then((res) => {\n      this.setState({\n        isLoading: false,\n        hasMore: res.data.length == PER_PAGE,\n        shareLinks: res.data.map(item => new ShareLink(item))\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n\n    if (isPro) {\n      const { itemType, userPerm } = this.props;\n      if (itemType == 'library') {\n        let permissionOptions = Utils.getShareLinkPermissionList(itemType, userPerm, path);\n        this.setState({\n          permissionOptions: permissionOptions,\n          currentPermission: permissionOptions[0],\n        });\n      } else {\n        let getDirentInfoAPI;\n        if (this.props.itemType === 'file') {\n          getDirentInfoAPI = seafileAPI.getFileInfo(repoID, path);\n        } else if (this.props.itemType === 'dir') {\n          getDirentInfoAPI = seafileAPI.getDirInfo(repoID, path);\n        }\n        getDirentInfoAPI.then((res) => {\n          let canEdit = res.data.can_edit;\n          let permission = res.data.permission;\n          let permissionOptions = Utils.getShareLinkPermissionList(this.props.itemType, permission, path, canEdit);\n          this.setState({\n            permissionOptions: permissionOptions,\n            currentPermission: permissionOptions[0],\n          });\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    }\n  }\n\n  showLinkDetails = (link) => {\n    this.setState({\n      sharedLinkInfo: link,\n      mode: link ? 'displayLinkDetails' : ''\n    });\n  };\n\n  updateLink = (link) => {\n    const { shareLinks } = this.state;\n    this.setState({\n      sharedLinkInfo: link,\n      shareLinks: shareLinks.map(item => item.token == link.token ? link : item)\n    });\n  };\n\n  deleteLink = (token) => {\n    const { shareLinks } = this.state;\n    seafileAPI.deleteShareLink(token).then(() => {\n      this.setState({\n        mode: '',\n        sharedLinkInfo: null,\n        shareLinks: shareLinks.filter(item => item.token !== token)\n      });\n      toaster.success(gettext('Successfully deleted 1 share link'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  deleteShareLinks = () => {\n    const { shareLinks } = this.state;\n    const tokens = shareLinks.filter(item => item.isSelected).map(link => link.token);\n    seafileAPI.deleteShareLinks(tokens).then(res => {\n      const { success, failed } = res.data;\n      if (success.length) {\n        let newShareLinkList = shareLinks.filter(shareLink => {\n          return !success.some(deletedShareLink => {\n            return deletedShareLink.token == shareLink.token;\n          });\n        });\n        this.setState({\n          shareLinks: newShareLinkList\n        });\n        const length = success.length;\n        const msg = length == 1 ?\n          gettext('Successfully deleted 1 share link') :\n          gettext('Successfully deleted {number_placeholder} share links')\n            .replace('{number_placeholder}', length);\n        toaster.success(msg);\n      }\n      failed.forEach(item => {\n        const msg = `${item.token}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  updateAfterCreation = (newData) => {\n    const { mode, shareLinks: links } = this.state;\n    if (mode == 'singleLinkCreation') {\n      links.unshift(newData);\n      this.setState({\n        mode: 'displayLinkDetails',\n        sharedLinkInfo: newData,\n        shareLinks: links\n      });\n    } else { // 'linksCreation'\n      this.setState({\n        mode: '',\n        shareLinks: newData.concat(links)\n      });\n    }\n  };\n\n  setMode = (mode) => {\n    this.setState({ mode: mode });\n  };\n\n  toggleSelectAllLinks = (isSelected) => {\n    const { shareLinks: links } = this.state;\n    this.setState({\n      shareLinks: links.map(item => {\n        item.isSelected = isSelected;\n        return item;\n      })\n    });\n  };\n\n  toggleSelectLink = (link, isSelected) => {\n    const { shareLinks: links } = this.state;\n    this.setState({\n      shareLinks: links.map(item => {\n        if (item.token == link.token) {\n          item.isSelected = isSelected;\n        }\n        return item;\n      })\n    });\n  };\n\n  handleScroll = (event) => {\n    if (!this.state.isLoadingMore && this.state.hasMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({ isLoadingMore: true }, () => {\n          this.getMore();\n        });\n      }\n    }\n  };\n\n  getMore = () => {\n    const { page, shareLinks } = this.state;\n    const { repoID, itemPath: path } = this.props;\n    seafileAPI.listShareLinks({ repoID, path, page: page + 1 }).then((res) => {\n      this.setState({\n        isLoadingMore: false,\n        hasMore: res.data.length == PER_PAGE,\n        page: page + 1,\n        shareLinks: shareLinks.concat(res.data.map(item => new ShareLink(item)))\n      });\n    }).catch(error => {\n      this.setState({\n        isLoadingMore: false\n      });\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  setShareLinks = (shareLinks) => {\n    this.setState({ shareLinks: shareLinks });\n  };\n\n  render() {\n    if (this.state.isLoading) {\n      return <Loading />;\n    }\n\n    const { repoID, itemPath, userPerm } = this.props;\n    const { mode, shareLinks, sharedLinkInfo, permissionOptions, currentPermission, isLoadingMore } = this.state;\n\n    switch (mode) {\n      case 'displayLinkDetails':\n        return (\n          <LinkDetails\n            sharedLinkInfo={sharedLinkInfo}\n            permissionOptions={permissionOptions}\n            defaultExpireDays={this.defaultExpireDays}\n            showLinkDetails={this.showLinkDetails}\n            updateLink={this.updateLink}\n            deleteLink={this.deleteLink}\n            closeShareDialog={this.props.closeShareDialog}\n          />\n        );\n      case 'singleLinkCreation':\n        return (\n          <LinkCreation\n            type=\"single\"\n            repoID={repoID}\n            itemPath={itemPath}\n            userPerm={userPerm}\n            permissionOptions={permissionOptions}\n            currentPermission={currentPermission}\n            setMode={this.setMode}\n            updateAfterCreation={this.updateAfterCreation}\n          />\n        );\n      case 'linksCreation':\n        return (\n          <LinkCreation\n            type=\"batch\"\n            repoID={repoID}\n            itemPath={itemPath}\n            userPerm={userPerm}\n            permissionOptions={permissionOptions}\n            currentPermission={currentPermission}\n            setMode={this.setMode}\n            updateAfterCreation={this.updateAfterCreation}\n          />\n        );\n      default:\n        return (\n          <>\n            <LinkList\n              shareLinks={shareLinks}\n              permissionOptions={permissionOptions}\n              setMode={this.setMode}\n              showLinkDetails={this.showLinkDetails}\n              toggleSelectAllLinks={this.toggleSelectAllLinks}\n              toggleSelectLink={this.toggleSelectLink}\n              deleteShareLinks={this.deleteShareLinks}\n              deleteLink={this.deleteLink}\n              handleScroll={this.handleScroll}\n              isLoadingMore={isLoadingMore}\n            />\n            <GenerateShareLinkWithPassword shareLinks={[...shareLinks]} setShareLinks={this.setShareLinks}{...this.props} />\n          </>\n        );\n    }\n  }\n}\n\nShareLinkPanel.propTypes = propTypes;\n\nexport default ShareLinkPanel;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/shared-repo-list-view/shared-repo-list-item.js",["4564","4565","4566","4567","4568","4569","4570","4571","4572","4573","4574","4575","4576","4577","4578","4579","4580","4581","4582"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, isPro, username, folderPermEnabled, isSystemStaff, enableResetEncryptedRepoPassword, isEmailConfigured, enableRepoAutoDel, enableSeaTableIntegration } from '../../utils/constants';\nimport ModalPortal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport LibSubFolderPermissionDialog from '../../components/dialog/lib-sub-folder-permission-dialog';\nimport DeleteRepoDialog from '../../components/dialog/delete-repo-dialog';\nimport ChangeRepoPasswordDialog from '../../components/dialog/change-repo-password-dialog';\nimport ResetEncryptedRepoPasswordDialog from '../../components/dialog/reset-encrypted-repo-password-dialog';\nimport LibOldFilesAutoDelDialog from '../../components/dialog/lib-old-files-auto-del-dialog';\nimport RepoSeaTableIntegrationDialog from '../../components/dialog/repo-seatable-integration-dialog';\nimport Rename from '../rename';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport LibHistorySettingDialog from '../dialog/lib-history-setting-dialog';\nimport toaster from '../toast';\nimport RepoAPITokenDialog from '../dialog/repo-api-token-dialog';\nimport RepoShareAdminDialog from '../dialog/repo-share-admin-dialog';\nimport RepoMonitoredIcon from '../../components/repo-monitored-icon';\n\nconst propTypes = {\n  currentGroup: PropTypes.object,\n  libraryType: PropTypes.string,\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onItemUnshare: PropTypes.func.isRequired,\n  onItemDetails: PropTypes.func,\n  onItemRename: PropTypes.func,\n  onItemDelete: PropTypes.func,\n  onMonitorRepo: PropTypes.func\n};\n\nclass SharedRepoListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOperationShow: false,\n      isItemMenuShow: false,\n      isAdvancedMenuShown: false,\n      isShowSharedDialog: false,\n      isRenaming: false,\n      isStarred: this.props.repo.starred,\n      isFolderPermissionDialogOpen: false,\n      isHistorySettingDialogShow: false,\n      isDeleteDialogShow: false,\n      isAPITokenDialogShow: false,\n      isRepoShareAdminDialogOpen: false,\n      isRepoDeleted: false,\n      isChangePasswordDialogShow: false,\n      isResetPasswordDialogShow: false,\n      isOldFilesAutoDelDialogOpen: false,\n      isSeaTableIntegrationShow: false,\n    };\n    this.isDeparementOnwerGroupMember = false;\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n  };\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      });\n    }\n  };\n\n  clickOperationMenuToggle = (e) => {\n    this.toggleOperationMenu(e);\n  };\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.clickOperationMenuToggle(e);\n    }\n  };\n\n  toggleOperationMenu = (e) => {\n    let dataset = e.target ? e.target.dataset : null;\n    if (dataset && dataset.toggle && dataset.toggle === 'Rename') {\n      this.setState({isItemMenuShow: !this.state.isItemMenuShow});\n      return;\n    }\n\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.props.onUnfreezedItem();\n          this.setState({\n            highlight: false,\n            isOperationShow: false,\n          });\n        }\n      }\n    );\n  };\n\n  toggleAdvancedMenuShown = (e) => {\n    this.setState({ isAdvancedMenuShown: true });\n  };\n\n  toggleAdvancedMenu = (e) => {\n    e.stopPropagation();\n    this.setState({ isAdvancedMenuShown: !this.state.isAdvancedMenuShown }, () => {\n      this.toggleOperationMenu(e);\n    });\n  };\n\n  onDropDownMouseMove = (e) => {\n    if (this.state.isAdvancedMenuShown && e.target && e.target.className === 'dropdown-item') {\n      this.setState({\n        isAdvancedMenuShown: false\n      });\n    }\n  };\n\n  getRepoComputeParams = () => {\n    let repo = this.props.repo;\n\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let libPath = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n\n    return { iconUrl, iconTitle, libPath };\n  };\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onMenuItemClick(e);\n    }\n  };\n\n  onMenuItemClick = (e) => {\n    let operation = e.target.dataset.toggle;\n    switch(operation) {\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Folder Permission':\n        this.onItemFolderPermissionToggle();\n        break;\n      case 'Details':\n        this.onItemDetails();\n        break;\n      case 'Share':\n        this.onItemShare();\n        break;\n      case 'Unshare':\n        this.onItemUnshare();\n        break;\n      case 'History Setting':\n        this.onHistorySettingToggle();\n        break;\n      case 'API Token':\n        this.onAPITokenToggle();\n        break;\n      case 'Share Admin':\n        this.toggleRepoShareAdminDialog();\n        break;\n      case 'Change Password':\n        this.onChangePasswordToggle();\n        break;\n      case 'Reset Password':\n        this.onResetPasswordToggle();\n        break;\n      case 'Watch File Changes':\n        this.watchFileChanges();\n        break;\n      case 'Unwatch File Changes':\n        this.unwatchFileChanges();\n        break;\n      case 'Old Files Auto Delete':\n        this.toggleOldFilesAutoDelDialog();\n        break;\n      case 'SeaTable integration':\n        this.onSeaTableIntegrationToggle();\n        break;\n      // no default\n    }\n  };\n\n  watchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.monitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  unwatchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.unMonitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onItemRenameToggle = () => {\n    this.props.onFreezedItem();\n    this.setState({\n      isRenaming: !this.state.isRenaming,\n      isOperationShow: !this.state.isOperationShow\n    });\n  };\n\n  onRenameConfirm = (name) => {\n    this.props.onItemRename(this.props.repo, name);\n    this.onRenameCancel();\n  };\n\n  onRenameCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  };\n\n  onItemFolderPermissionToggle = () => {\n    this.setState({isFolderPermissionDialogOpen: !this.state.isFolderPermissionDialogOpen});\n  };\n\n  onHistorySettingToggle = () => {\n    this.setState({isHistorySettingDialogShow: !this.state.isHistorySettingDialogShow});\n  };\n\n  onItemDetails = () => {\n    this.props.onItemDetails(this.props.repo);\n  };\n\n  onItemShare = (e) => {\n    e.preventDefault();\n    this.setState({isShowSharedDialog: true});\n  };\n\n  onItemUnshare = (e) => {\n    e.preventDefault();\n    this.props.onItemUnshare(this.props.repo);\n  };\n\n  onItemDeleteToggle = (e) => {\n    e.preventDefault();\n    this.setState({isDeleteDialogShow: !this.state.isDeleteDialogShow});\n  };\n\n  onItemDelete = () => {\n    const { currentGroup, repo } = this.props;\n    if (!currentGroup) {  // repo can not be deleted in share all module\n      return;\n    }\n\n    const groupID = currentGroup.id;\n\n    seafileAPI.deleteGroupOwnedLibrary(groupID, repo.repo_id).then(() => {\n\n      this.setState({\n        isRepoDeleted: true,\n        isDeleteDialogShow: false,\n      });\n\n      this.props.onItemDelete(repo);\n      let name = repo.repo_name;\n      var msg = gettext('Successfully deleted {name}.').replace('{name}', name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = repo.repo_name;\n        errMessage = gettext('Failed to delete {name}.').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n\n      this.setState({isRepoDeleted: false});\n    });\n  };\n\n  toggleShareDialog = () => {\n    this.setState({isShowSharedDialog: false});\n  };\n\n  toggleRepoShareAdminDialog = () => {\n    this.setState({isRepoShareAdminDialogOpen: !this.state.isRepoShareAdminDialogOpen});\n  };\n\n  toggleOldFilesAutoDelDialog = () => {\n    this.setState({isOldFilesAutoDelDialogOpen: !this.state.isOldFilesAutoDelDialogOpen});\n  };\n\n  onSeaTableIntegrationToggle = () => {\n    this.setState({isSeaTableIntegrationShow: !this.state.isSeaTableIntegrationShow});\n  };\n\n  onAPITokenToggle = () => {\n    this.setState({isAPITokenDialogShow: !this.state.isAPITokenDialogShow});\n  };\n\n  onChangePasswordToggle = () => {\n    this.setState({isChangePasswordDialogShow: !this.state.isChangePasswordDialogShow});\n  };\n\n  onResetPasswordToggle = () => {\n    this.setState({isResetPasswordDialogShow: !this.state.isResetPasswordDialogShow});\n  };\n\n  translateMenuItem = (menuItem) => {\n    let translateResult = '';\n    switch(menuItem) {\n      case 'Rename':\n        translateResult = gettext('Rename');\n        break;\n      case 'Folder Permission':\n        translateResult = gettext('Folder Permission');\n        break;\n      case 'Details':\n        translateResult = gettext('Details');\n        break;\n      case 'Unshare':\n        translateResult = gettext('Unshare');\n        break;\n      case 'Share':\n        translateResult = gettext('Share');\n        break;\n      case 'History Setting':\n        translateResult = gettext('History Setting');\n        break;\n      case 'Share Admin':\n        translateResult = gettext('Share Admin');\n        break;\n      case 'Change Password':\n        translateResult = gettext('Change Password');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n      case 'Watch File Changes':\n        translateResult = gettext('Watch File Changes');\n        break;\n      case 'Unwatch File Changes':\n        translateResult = gettext('Unwatch File Changes');\n        break;\n      case 'Old Files Auto Delete':\n        translateResult = gettext('Auto Deletion Setting');\n        break;\n      case 'API Token':\n        translateResult = 'API Token'; // translation is not needed here\n        break;\n      case 'Advanced':\n        translateResult = gettext('Advanced');\n        break;\n      case 'SeaTable integration':\n        translateResult = gettext('SeaTable integration');\n        break;\n      default:\n        break;\n    }\n    return translateResult;\n  };\n\n  getAdvancedOperations = () => {\n    const operations = [];\n    operations.push('API Token');\n    if (enableRepoAutoDel) {\n      operations.push('Old Files Auto Delete');\n    }\n    if (enableSeaTableIntegration) {\n      operations.push('SeaTable integration');\n    }\n    return operations;\n  };\n\n  generatorOperations = () => {\n    let { repo, currentGroup } = this.props;\n    //todo this have a bug; use current api is not return admins param;\n    let isStaff = currentGroup && currentGroup.admins && currentGroup.admins.indexOf(username) > -1; //for group repolist;\n    let isRepoOwner = repo.owner_email === username;\n    let isAdmin = repo.is_admin;\n    let operations = [];\n    if (isPro) {\n      if (repo.owner_email.indexOf('@seafile_group') != -1) {\n        // is group admin\n        if (isStaff) {\n          if (repo.owner_email == currentGroup.id + '@seafile_group') {\n            this.isDeparementOnwerGroupMember = true;\n            operations = ['Rename'];\n            if (folderPermEnabled) {\n              operations.push('Folder Permission');\n            }\n            operations.push('Share Admin', 'Divider');\n            if (repo.encrypted) {\n              operations.push('Change Password');\n            }\n            if (repo.encrypted && enableResetEncryptedRepoPassword && isEmailConfigured) {\n              operations.push('Reset Password');\n            }\n            if (repo.permission == 'r' || repo.permission == 'rw') {\n              const monitorOp = repo.monitored ? 'Unwatch File Changes' : 'Watch File Changes';\n              operations.push(monitorOp);\n            }\n            operations.push('Divider', 'History Setting', 'Details');\n            if (Utils.isDesktop()) {\n              operations.push('Advanced');\n            }\n            return operations;\n          } else {\n            operations.push('Unshare');\n          }\n        }\n      } else {\n        if (isRepoOwner || isAdmin) {\n          operations.push('Share');\n        }\n        if (isStaff || isRepoOwner || isAdmin) {\n          operations.push('Unshare');\n        }\n      }\n      if (repo.permission == 'r' || repo.permission == 'rw') {\n        const monitorOp = repo.monitored ? 'Unwatch File Changes' : 'Watch File Changes';\n        operations.push(monitorOp);\n      }\n    } else {\n      if (isRepoOwner) {\n        operations.push('Share');\n      }\n      if (isStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    }\n    return operations;\n  };\n\n  generatorMobileMenu = () => {\n    let operations = [];\n    if (this.props.libraryType && this.props.libraryType === 'public') {\n      let isRepoOwner = this.props.repo.owner_email === username;\n      if (isSystemStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    } else {\n      operations = this.generatorOperations();\n      if (this.isDeparementOnwerGroupMember) {\n        operations.unshift('Unshare');\n        operations.unshift('Share');\n      }\n    }\n\n    if (!operations.length) {\n      return null;\n    }\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n          title={gettext('More operations')}\n          aria-label={gettext('More operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n          onClick={this.clickOperationMenuToggle}\n        />\n        <div className={`${this.state.isItemMenuShow?'':'d-none'}`} onClick={this.toggleOperationMenu}>\n          <div className=\"mobile-operation-menu-bg-layer\"></div>\n          <div className=\"mobile-operation-menu\">\n            {operations.map((item, index) => {\n              return (\n                <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick}>{this.translateMenuItem(item)}</DropdownItem>\n              );\n            })}\n          </div>\n        </div>\n      </Dropdown>\n    );\n  };\n\n  generatorPCMenu = () => {\n    let operations = [];\n    if (this.props.libraryType && this.props.libraryType === 'public') {\n      let isRepoOwner = this.props.repo.owner_email === username;\n      if (isSystemStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    } else {\n      operations = this.generatorOperations();\n    }\n    const shareOperation   = <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.onItemShare}></a>;\n    const unshareOperation = <a href=\"#\" className=\"op-icon sf2-icon-x3\" title={gettext('Unshare')} role=\"button\" aria-label={gettext('Unshare')} onClick={this.onItemUnshare}></a>;\n    const deleteOperation  = <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} role=\"button\" aria-label={gettext('Delete')} onClick={this.onItemDeleteToggle}></a>;\n\n    if (this.isDeparementOnwerGroupMember) {\n      const advancedOperations = this.getAdvancedOperations();\n      return (\n        <Fragment>\n          {shareOperation}\n          {deleteOperation}\n          <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n            <DropdownToggle\n              className=\"sf-dropdown-toggle sf2-icon-caret-down border-0 p-0\"\n              title={gettext('More operations')}\n              aria-label={gettext('More operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isItemMenuShow}\n              aria-haspopup={true}\n              style={{'minWidth': '0'}}\n              onClick={this.clickOperationMenuToggle}\n              onKeyDown={this.onDropdownToggleKeyDown}\n            />\n            <DropdownMenu onMouseMove={this.onDropDownMouseMove}>\n              {operations.map((item, index)=> {\n                if (item == 'Divider') {\n                  return <DropdownItem key={index} divider />;\n                } else if (item == 'Advanced') {\n                  return (\n                    <Dropdown\n                      key={index}\n                      direction=\"right\"\n                      className=\"w-100\"\n                      isOpen={this.state.isAdvancedMenuShown}\n                      toggle={this.toggleAdvancedMenu}\n                      onMouseMove={(e) => {e.stopPropagation();}}\n                    >\n                      <DropdownToggle\n                        caret\n                        className=\"dropdown-item font-weight-normal rounded-0 d-flex justify-content-between align-items-center pr-2\"\n                        onMouseEnter={this.toggleAdvancedMenuShown}\n                      >\n                        {this.translateMenuItem(item)}\n                      </DropdownToggle>\n                      <DropdownMenu>\n                        {advancedOperations.map((item, index)=> {\n                          return (<DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateMenuItem(item)}</DropdownItem>);\n                        })}\n                      </DropdownMenu>\n                    </Dropdown>\n                  );\n                } else {\n                  return (<DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateMenuItem(item)}</DropdownItem>);\n                }\n              })}\n            </DropdownMenu>\n          </Dropdown>\n        </Fragment>\n      );\n    } else {\n      return (\n        <Fragment>\n          {operations.map(item => {\n            switch (item) {\n              case 'Share':\n                return <Fragment key={item}>{shareOperation}</Fragment>;\n              case 'Unshare':\n                return <Fragment key={item}>{unshareOperation}</Fragment>;\n              case 'Watch File Changes':\n              case 'Unwatch File Changes':\n                return (\n                  <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu} key={item}>\n                    <DropdownToggle\n                      className=\"sf-dropdown-toggle sf2-icon-caret-down border-0 p-0\"\n                      title={gettext('More operations')}\n                      aria-label={gettext('More operations')}\n                      data-toggle=\"dropdown\"\n                      aria-expanded={this.state.isItemMenuShow}\n                      aria-haspopup={true}\n                      style={{'minWidth': '0'}}\n                      onClick={this.clickOperationMenuToggle}\n                      onKeyDown={this.onDropdownToggleKeyDown}\n                    />\n                    <DropdownMenu>\n                      {[item].map((item, index) => {\n                        return <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateMenuItem(item)}</DropdownItem>;\n                      })}\n                    </DropdownMenu>\n                  </Dropdown>\n                );\n              // no default\n              default:\n                return null;\n            }\n          })}\n        </Fragment>\n      );\n    }\n  };\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const { repo_name: repoName } = this.props.repo;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  renderPCUI = () => {\n    let { iconUrl, iconTitle, libPath } = this.getRepoComputeParams();\n    let { repo } = this.props;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseOver={this.onMouseOver} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n          <td className=\"text-center\">\n            <a href=\"#\" role=\"button\" aria-label={this.state.isStarred ? gettext('Unstar') : gettext('Star')} onClick={this.onToggleStarRepo}>\n              <i className={`fa-star ${this.state.isStarred ? 'fas' : 'far star-empty'}`}></i>\n            </a>\n          </td>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            {this.state.isRenaming ?\n              <Rename name={repo.repo_name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel}/> :\n              <Fragment>\n                <Link to={libPath}>{repo.repo_name}</Link>\n                {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n              </Fragment>\n            }\n          </td>\n          <td>{this.state.isOperationShow && this.generatorPCMenu()}</td>\n          <td>{repo.size}</td>\n          <td title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</td>\n          <td title={repo.owner_contact_email}>{repo.owner_name}</td>\n        </tr>\n      </Fragment>\n    );\n  };\n\n  visitRepo = () => {\n    if (!this.state.isRenaming) {\n      navigate(this.repoURL);\n    }\n  };\n\n  renderMobileUI = () => {\n    let { iconUrl, iconTitle, libPath } = this.getRepoComputeParams();\n    let { repo } = this.props;\n    this.repoURL = libPath;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''}  onMouseEnter={this.onMouseEnter} onMouseOver={this.onMouseOver} onMouseLeave={this.onMouseLeave}>\n          <td onClick={this.visitRepo}><img src={iconUrl} title={iconTitle} width=\"24\" alt={iconTitle}/></td>\n          <td onClick={this.visitRepo}>\n            {this.state.isRenaming ?\n              <Rename name={repo.repo_name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel} /> :\n              <Fragment>\n                <Link to={libPath}>{repo.repo_name}</Link>\n                {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n              </Fragment>\n            }\n            <br />\n            <span className=\"item-meta-info\" title={repo.owner_contact_email}>{repo.owner_name}</span>\n            <span className=\"item-meta-info\">{repo.size}</span>\n            <span className=\"item-meta-info\" title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</span>\n          </td>\n          <td>{this.generatorMobileMenu()}</td>\n        </tr>\n      </Fragment>\n    );\n  };\n\n  render() {\n    let { repo } = this.props;\n    let isGroupOwnedRepo = repo.owner_email.indexOf('@seafile_group') > -1;\n    return (\n      <Fragment>\n        {Utils.isDesktop() ? this.renderPCUI() : this.renderMobileUI()}\n        {this.state.isShowSharedDialog && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={repo.repo_name}\n              itemPath={'/'}\n              repoID={repo.repo_id}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              isAdmin={repo.is_admin}\n              isGroupOwnedRepo={isGroupOwnedRepo}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isFolderPermissionDialogOpen && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onItemFolderPermissionToggle}\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              isDepartmentRepo={true}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isDeleteDialogShow &&\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={this.props.repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onItemDelete}\n              toggle={this.onItemDeleteToggle}\n            />\n          </ModalPortal>\n        }\n        {this.state.isHistorySettingDialogShow && (\n          <ModalPortal>\n            <LibHistorySettingDialog\n              repoID={repo.repo_id}\n              itemName={repo.repo_name}\n              toggleDialog={this.onHistorySettingToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isAPITokenDialogShow && (\n          <ModalPortal>\n            <RepoAPITokenDialog\n              repo={repo}\n              onRepoAPITokenToggle={this.onAPITokenToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isRepoShareAdminDialogOpen && (\n          <ModalPortal>\n            <RepoShareAdminDialog\n              repo={repo}\n              toggleDialog={this.toggleRepoShareAdminDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isChangePasswordDialogShow && (\n          <ModalPortal>\n            <ChangeRepoPasswordDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onChangePasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isResetPasswordDialogShow && (\n          <ModalPortal>\n            <ResetEncryptedRepoPasswordDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.onResetPasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isOldFilesAutoDelDialogOpen && (\n          <ModalPortal>\n            <LibOldFilesAutoDelDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.toggleOldFilesAutoDelDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isSeaTableIntegrationShow && (\n          <ModalPortal>\n            <RepoSeaTableIntegrationDialog\n              repo={repo}\n              onSeaTableIntegrationToggle={this.onSeaTableIntegrationToggle}\n            />\n          </ModalPortal>\n        )}\n\n\n      </Fragment>\n    );\n  }\n}\n\nSharedRepoListItem.propTypes = propTypes;\n\nexport default SharedRepoListItem;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/tree-view/tree.js",["4583"],[],"import TreeNode from './tree-node';\n\nclass Tree {\n\n  constructor() {\n    this.root = null;\n  }\n\n  clone() {\n    let tree = new Tree();\n    if (this.root) {\n      tree.root = this.root.clone();\n    }\n    return tree;\n  }\n\n  setRoot(node) {\n    this.root = node;\n  }\n\n  getNodeByPath(path) {\n    let findNode = null;\n    function callback(currentNode) {\n      if (currentNode.path === path) {\n        findNode = currentNode;\n        return true;\n      }\n      return false;\n    }\n    this.traverseDF(callback);\n    return findNode;\n  }\n\n  getNodeChildrenObject(node) {\n    let objects = node.children.map(item => {\n      let object = item.object;\n      return object;\n    });\n    return objects;\n  }\n\n  addNodeToParent(node, parentNode) {\n    parentNode.addChild(node);\n  }\n\n  addNodeListToParent(nodeList, parentNode) {\n    nodeList.forEach(node => {\n      parentNode.addChild(node);\n    });\n  }\n\n  deleteNode(node) {\n    let parentNode = this.getNodeByPath(node.parentNode.path);\n    parentNode.deleteChild(node);\n  }\n\n  deleteNodeList(nodeList) {\n    nodeList.forEach(node => {\n      this.deleteNode(node);\n    });\n  }\n\n  renameNode(node, newName) {\n    node.rename(newName);\n  }\n\n  updateNode(node, keys, newValues) {\n    node.updateObjectParam(keys, newValues);\n  }\n\n  moveNode(node, destNode) {\n    this.deleteNode(node);\n    destNode.addChild(node);\n  }\n\n  copyNode(node, destNode) {\n    destNode.addChild(node);\n  }\n\n  traverseDF(callback) {\n    let stack = [];\n    let found = false;\n    stack.unshift(this.root);\n    let currentNode = stack.shift();\n    while (!found && currentNode) {\n      found = callback(currentNode) == true ? true : false;\n      if (!found) {\n        stack.unshift(...currentNode.children);\n        currentNode = stack.shift();\n      }\n    }\n  }\n\n  traverseBF(callback) {\n    let queue = [];\n    let found = false;\n    queue.push(this.root);\n    let currentNode = queue.shift();\n    while (!found && currentNode) {\n      found = callback(currentNode) === true ? true : false;\n      if (!found) {\n        queue.push(...currentNode.children);\n        currentNode = queue.shift();\n      }\n    }\n  }\n\n  expandNode(node) {\n    node.isExpanded = true;\n    while (node.parentNode) {\n      node.parentNode.isExpanded = true;\n      node = node.parentNode;\n    }\n  }\n\n  collapseNode(node) {\n    node.isExpanded = false;\n  }\n\n  isNodeChild(node, parentNode) {\n    return parentNode.children.some(item => {\n      return item.path === node.path;\n    });\n  }\n\n  serializeToJson() {\n    return this.root.serializeToJson();\n  }\n\n  deserializefromJson(json) {\n    let root = TreeNode.deserializefromJson(json);\n    let tree = new Tree();\n    tree.setRoot(root);\n    return tree;\n  }\n\n}\n\nexport default Tree;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-tag-list.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/list-and-add-group-members.js",["4584"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, InputGroup, InputGroupText, Input } from 'reactstrap';\nimport { Utils } from '../utils/utils';\nimport { gettext } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport UserSelect from './user-select';\nimport toaster from './toast';\nimport Loading from './loading';\nimport GroupMembers from './group-members';\n\nconst propTypes = {\n  groupID: PropTypes.string,\n  isOwner: PropTypes.bool.isRequired\n};\n\nclass ManageMembersDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true, // first loading\n      isLoadingMore: false,\n      groupMembers: [],\n      page: 1,\n      perPage: 100,\n      hasNextPage: false,\n      selectedOption: null,\n      errMessage: [],\n      isItemFreezed: false,\n      searchActive: false,\n      keyword: '',\n      membersFound: []\n    };\n  }\n\n  componentDidMount() {\n    this.listGroupMembers(this.state.page);\n  }\n\n  listGroupMembers = (page) => {\n    const { groupID } = this.props;\n    const { perPage, groupMembers } = this.state;\n    seafileAPI.listGroupMembers(groupID, page, perPage).then((res) => {\n      const members = res.data;\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        page: page,\n        hasNextPage: members.length < perPage ? false : true,\n        groupMembers: groupMembers.concat(members)\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        hasNextPage: false\n      });\n    });\n  };\n\n  onSelectChange = (option) => {\n    this.setState({\n      selectedOption: option,\n      errMessage: [],\n    });\n  };\n\n  addGroupMember = () => {\n    let emails = [];\n    for (let i = 0; i < this.state.selectedOption.length; i++) {\n      emails.push(this.state.selectedOption[i].email);\n    }\n    seafileAPI.addGroupMembers(this.props.groupID, emails).then((res) => {\n      const newMembers = res.data.success;\n      this.setState({\n        groupMembers: [].concat(newMembers, this.state.groupMembers),\n        selectedOption: null,\n      });\n      this.refs.userSelect.clearSelect();\n      if (res.data.failed.length > 0) {\n        this.setState({\n          errMessage: res.data.failed\n        });\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({\n      isItemFreezed: isFreezed\n    });\n  };\n\n  handleScroll = (event) => {\n    // isLoadingMore: to avoid repeated request\n    const { page, hasNextPage, isLoadingMore } = this.state;\n    if (hasNextPage && !isLoadingMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.listGroupMembers(page + 1);\n        });\n      }\n    }\n  };\n\n  changeMember = (targetMember) => {\n    this.setState({\n      groupMembers: this.state.groupMembers.map((item) => {\n        if (item.email == targetMember.email) {\n          item = targetMember;\n        }\n        return item;\n      })\n    });\n  };\n\n  deleteMember = (targetMember) => {\n    const groupMembers = this.state.groupMembers;\n    groupMembers.splice(groupMembers.indexOf(targetMember), 1);\n    this.setState({\n      groupMembers: groupMembers\n    });\n  };\n\n  searchMembers = (e) => {\n    const { groupMembers } = this.state;\n    const keyword = e.target.value;\n    const value = keyword.trim().toLowerCase();\n    const membersFound = groupMembers.filter(item => item.name.toLowerCase().indexOf(value) > -1);\n    this.setState({ keyword, membersFound });\n  };\n\n  clearSearch = () => {\n    this.setState({\n      keyword: '',\n      membersFound: []\n    });\n  };\n\n  onSearchInputFocus = () => {\n    this.setState({\n      searchActive: true\n    });\n  };\n\n  onSearchInputBlur = () => {\n    this.setState({\n      searchActive: false\n    });\n  };\n\n  render() {\n    const {\n      isLoading, hasNextPage, groupMembers,\n      keyword, membersFound,\n      searchActive\n    } = this.state;\n    return (\n      <Fragment>\n        <p className=\"mb-2\">{gettext('Add group member')}</p>\n        <div className='add-members'>\n          <UserSelect\n            placeholder={gettext('Search users')}\n            onSelectChange={this.onSelectChange}\n            ref=\"userSelect\"\n            isMulti={true}\n            className=\"add-members-select\"\n          />\n          {this.state.selectedOption ?\n            <Button color=\"secondary\" onClick={this.addGroupMember}>{gettext('Submit')}</Button> :\n            <Button color=\"secondary\" disabled>{gettext('Submit')}</Button>\n          }\n        </div>\n        {\n          this.state.errMessage.length > 0 &&\n            this.state.errMessage.map((item, index = 0) => {\n              return (\n                <div className=\"group-error error\" key={index}>{item.error_msg}</div>\n              );\n            })\n        }\n        {groupMembers.length > 10 &&\n          <InputGroup className={`search-group-members rounded ${searchActive ? 'active' : ''}`}>\n            <InputGroupText>\n              <i className=\"fas fa-search\" aria-hidden={true}></i>\n            </InputGroupText>\n            <Input\n              type=\"text\"\n              className=\"input-group-input px-0\"\n              placeholder={gettext('Search group members')}\n              value={keyword}\n              onChange={this.searchMembers}\n              onFocus={this.onSearchInputFocus}\n              onBlur={this.onSearchInputBlur}\n            />\n            {keyword && (\n              <InputGroupText>\n                <i className=\"sf2-icon-x1\" aria-hidden={true} onClick={this.clearSearch}></i>\n              </InputGroupText>\n            )}\n          </InputGroup>\n        }\n        <div className=\"manage-members\" onScroll={keyword.trim() ? () => {} : this.handleScroll}>\n          {isLoading ? <Loading /> : (\n            <Fragment>\n              <GroupMembers\n                groupMembers={keyword.trim() ? membersFound : groupMembers}\n                changeMember={this.changeMember}\n                deleteMember={this.deleteMember}\n                groupID={this.props.groupID}\n                isOwner={this.props.isOwner}\n                isItemFreezed={this.state.isItemFreezed}\n                toggleItemFreezed={this.toggleItemFreezed}\n              />\n              {(!keyword.trim() && hasNextPage) && <Loading />}\n            </Fragment>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nManageMembersDialog.propTypes = propTypes;\n\nexport default ManageMembersDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/seafile-markdown-viewer/index.js",["4585","4586"],[],"import React, { Suspense } from 'react';\nimport PropTypes from 'prop-types';\nimport { MarkdownViewer } from '@seafile/seafile-editor';\nimport { I18nextProvider } from 'react-i18next';\nimport i18n from '../../_i18n/i18n-seafile-editor';\nimport { gettext, mediaUrl, serviceURL, sharedToken, slug } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\n\nimport './style.css';\n\nconst propTypes = {\n  isWiki: PropTypes.bool,\n  path: PropTypes.string,\n  repoID: PropTypes.string,\n  isTOCShow: PropTypes.bool,\n  children: PropTypes.object,\n  isFileLoading: PropTypes.bool.isRequired,\n  containerClassName: PropTypes.string,\n  markdownContent: PropTypes.string.isRequired,\n  latestContributor: PropTypes.string.isRequired,\n  lastModified: PropTypes.string.isRequired,\n  onLinkClick: PropTypes.func.isRequired,\n};\n\nclass SeafileMarkdownViewer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.scrollRef = React.createRef();\n  }\n\n  onLinkClick = (link) => {\n    this.props.onLinkClick(link);\n  };\n\n  changeInlineNode = (item) => {\n    const { repoID } = this.props;\n    let url, imagePath;\n    // isPublicWiki: in the old version, only public wiki need replace image url\n    if (item.type == 'image') { // change image url\n      url = item.data.src;\n      const re = new RegExp(serviceURL + '/lib/' + repoID +'/file.*raw=1');\n      // different repo\n      if (re.test(url)) {\n        // get image path\n        let index = url.indexOf('/file');\n        let index2 = url.indexOf('?');\n        imagePath = url.substring(index + 5, index2);\n      } else if (/^\\.\\.\\/*/.test(url) || /^\\.\\/*/.test(url)) {\n        const path = this.props.path;\n        const originalPath = path.slice(0, path.lastIndexOf('/')) + '/' + url;\n        imagePath = Utils.pathNormalize(originalPath);\n      } else {\n        return;\n      }\n      item.data.src = serviceURL + '/view-image-via-public-wiki/?slug=' + slug + '&path=' + imagePath;\n    } else if (item.type == 'link') { // change link url\n      url = item.url;\n      if (Utils.isInternalFileLink(url, repoID)) { // change file url\n        if (Utils.isInternalMarkdownLink(url, repoID)) {\n          let path = Utils.getPathFromInternalMarkdownLink(url, repoID);\n          // replace url\n          item.url = serviceURL + '/published/' + slug + path;\n        } else {\n          item.url = url.replace(/(.*)lib\\/([-0-9a-f]{36})\\/file(.*)/g, (match, p1, p2, p3) => {\n            return `${p1}d/${sharedToken}/files/?p=${p3}&dl=1`;\n          });\n        }\n      } else if (Utils.isInternalDirLink(url, repoID)) { // change dir url\n        let path = Utils.getPathFromInternalDirLink(url, repoID);\n        // replace url\n        item.url = serviceURL + '/published/' + slug + path;\n      }\n    }\n\n    return item;\n  };\n\n  modifyValueBeforeRender = (value) => {\n    let newNodes = Utils.changeMarkdownNodes(value, this.changeInlineNode);\n    return newNodes;\n  };\n\n  renderMarkdown = () => {\n    const { isTOCShow = true, isWiki, markdownContent } = this.props;\n    const props = {\n      isShowOutline: isTOCShow,\n      mathJaxSource: `${mediaUrl}js/mathjax/tex-svg.js`,\n      value: markdownContent,\n      scrollRef: this.scrollRef,\n      onLinkClick: this.onLinkClick,\n      ...(isWiki && {beforeRenderCallback: this.modifyValueBeforeRender})\n    };\n\n    return (\n      <I18nextProvider i18n={ i18n }>\n        <Suspense fallback={<Loading />}>\n          <MarkdownViewer {...props} />\n        </Suspense>\n      </I18nextProvider>\n    );\n  };\n\n  render() {\n    if (this.props.isFileLoading) {\n      return <Loading />;\n    }\n    const { isWiki, containerClassName = '' } = this.props;\n    const containerClass = `wiki-page-container ${containerClassName}`;\n    // In dir-column-file width is 100%;\n    // In wiki-viewer width isn't 100%\n    const contentClassName = `wiki-page-content ${!isWiki ?  + 'w-100' : ''}`;\n    return (\n      <div ref={this.scrollRef} className={containerClass}>\n        <div className={contentClassName}>\n          {this.props.children}\n          {this.renderMarkdown()}\n          <p id=\"wiki-page-last-modified\">{gettext('Last modified by')} {this.props.latestContributor}, <span>{this.props.lastModified}</span></p>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst defaultProps = {\n  isWiki: false,\n};\n\nSeafileMarkdownViewer.propTypes = propTypes;\nSeafileMarkdownViewer.defaultProps = defaultProps;\n\nexport default SeafileMarkdownViewer;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toolbar/view-mode-toolbar.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/wiki/index-md-viewer/index.js",["4587","4588","4589"],["4590","4591","4592","4593","4594","4595","4596","4597","4598","4599","4600","4601","4602","4603","4604","4605","4606","4607","4608"],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { mdStringToSlate } from '@seafile/seafile-editor';\nimport { isPublicWiki, repoID, serviceURL, slug } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport { generateNavItems } from '../utils/generate-navs';\nimport NavItem from './nav-item';\n\nimport'./style.css';\n\nconst viewerPropTypes = {\n  indexContent: PropTypes.string.isRequired,\n  onLinkClick: PropTypes.func.isRequired,\n};\n\nclass IndexMdViewer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.links = [];\n    this.state = {\n      currentPath: '',\n      treeRoot: { name: '', href: '', children: [], isRoot: true },\n    };\n  }\n\n  componentDidMount() {\n    const { indexContent } = this.props;\n    const slateNodes = mdStringToSlate(indexContent);\n    const newSlateNodes = Utils.changeMarkdownNodes(slateNodes, this.changeInlineNode);\n    const treeRoot = generateNavItems(newSlateNodes);\n    this.setState({\n      treeRoot: treeRoot,\n    });\n  }\n\n  onLinkClick = (node) => {\n    const { currentPath } = this.state;\n    if (node.path === currentPath) return;\n    if (node.path) {\n      this.setState({ currentPath: node.path });\n    }\n    const url = new URL(node.href);\n    if (node.href) this.props.onLinkClick(url.href);\n  };\n\n  changeInlineNode = (item) => {\n    if (item.type == 'link' || item.type === 'image') {\n      let url;\n\n      // change image url\n      if (item.type == 'image' && isPublicWiki) {\n        url = item.data.src;\n        const re = new RegExp(serviceURL + '/lib/' + repoID +'/file.*raw=1');\n        // different repo\n        if (!re.test(url)) {\n          return;\n        }\n        // get image path\n        let index = url.indexOf('/file');\n        let index2 = url.indexOf('?');\n        const imagePath = url.substring(index + 5, index2);\n        // replace url\n        item.data.src = serviceURL + '/view-image-via-public-wiki/?slug=' + slug + '&path=' + imagePath;\n      }\n\n      else if (item.type == 'link') {\n        url = item.url;\n        /* eslint-disable */\n        let expression = /((([A-Za-z]{3,9}:(?:\\/\\/)?)(?:[\\-;:&=\\+\\$,\\w]+@)?[A-Za-z0-9\\.\\-]+|(?:www\\.|[\\-;:&=\\+\\$,\\w]+@)[A-Za-z0-9\\.\\-]+)((?:\\/[\\+~%\\/\\.\\w\\-_]*)?\\??(?:[\\-\\+=&;%@\\.\\w_]*)#?(?:[\\.\\!\\/\\\\\\w]*))?)/\n        /* eslint-enable */\n        let re = new RegExp(expression);\n\n        // Solving relative paths\n        if (!re.test(url)) {\n          if (url.startsWith('./')) {\n            url = url.slice(2);\n          }\n          item.url = serviceURL + '/published/' + slug + '/' + url;\n        }\n        // change file url\n        else if (Utils.isInternalMarkdownLink(url, repoID)) {\n          let path = Utils.getPathFromInternalMarkdownLink(url, repoID);\n          // replace url\n          item.url = serviceURL + '/published/' + slug + path;\n        }\n        // change dir url\n        else if (Utils.isInternalDirLink(url, repoID)) {\n          let path = Utils.getPathFromInternalDirLink(url, repoID);\n          // replace url\n          item.url = serviceURL + '/published/' + slug + path;\n        }\n      }\n    }\n\n    return item;\n  };\n\n  render() {\n    const { treeRoot, currentPath } = this.state;\n    return (\n      <div className=\"mx-4 o-hidden\">\n        {treeRoot.children.map(node => {\n          return (\n            <NavItem key={node.path} node={node} currentPath={currentPath} onLinkClick={this.onLinkClick} />\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nIndexMdViewer.propTypes = viewerPropTypes;\n\nexport default IndexMdViewer;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toolbar/view-file-toolbar.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toolbar/multiple-dir-operation-toolbar.js",["4609","4610","4611","4612"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ButtonGroup } from 'reactstrap';\nimport { gettext, siteRoot, name, fileServerRoot, useGoFileserver } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport Rename from '../dialog/rename-dirent';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport ViewModeToolbar from './view-mode-toolbar';\n\nimport ModalPortal from '../modal-portal';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport toaster from '../toast';\n\nimport '../../css/dirents-menu.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  repoTags: PropTypes.array.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onFilesTagChanged: PropTypes.func.isRequired,\n  unSelectDirent: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n};\n\nclass MultipleDirOperationToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isZipDialogOpen: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isMutipleOperation: true,\n      showLibContentViewDialogs: false,\n      showShareDialog: false,\n      showEditFileTagDialog: false,\n      fileTagList: [],\n      multiFileTagList: [],\n      isRenameDialogOpen: false,\n      isPermissionDialogOpen: false\n    };\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  };\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  };\n\n  onItemsDelete = () => {\n    this.props.onItemsDelete();\n  };\n\n  onItemsDownload = () => {\n    let { path, repoID, selectedDirentList } = this.props;\n    if (selectedDirentList.length) {\n      if (selectedDirentList.length === 1 && !selectedDirentList[0].isDir()) {\n        let direntPath = Utils.joinPath(path, selectedDirentList[0].name);\n        let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n        location.href= url;\n        return;\n      }\n      if (!useGoFileserver) {\n        this.setState({\n          isZipDialogOpen: true\n        });\n      } else {\n        const target = this.props.selectedDirentList.map(dirent => dirent.name);\n        seafileAPI.zipDownload(repoID, path, target).then((res) => {\n          const zipToken = res.data['zip_token'];\n          location.href = `${fileServerRoot}zip/${zipToken}`;\n        }).catch((error) => {\n          let errorMsg = Utils.getErrorMsg(error);\n          this.setState({\n            isLoading: false,\n            errorMsg: errorMsg\n          });\n        });\n      }\n    }\n  };\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  };\n\n  checkDuplicatedName = (newName) => {\n    return Utils.checkDuplicatedNameInList(this.props.direntList, newName);\n  };\n\n  onItemRename = (newName) => {\n    const dirent = this.props.selectedDirentList[0];\n    this.props.onItemRename(dirent, newName);\n  };\n\n  onPermissionItem = () => {\n    this.setState({\n      showLibContentViewDialogs: !this.state.showLibContentViewDialogs,\n      isPermissionDialogOpen: !this.state.isPermissionDialogOpen\n    });\n  };\n\n  onStartRevise = (dirent) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(dirent);\n    seafileAPI.sdocStartRevise(repoID, filePath).then((res) => {\n      let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(res.data.file_path);\n      window.open(url);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  getDirentMenuList = (dirent) => {\n    const isRepoOwner = this.props.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    const isContextmenu = true;\n    let opList = Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n    const list = ['Move', 'Copy', 'Delete', 'Download'];\n    if (dirent.type == 'dir') {\n      opList = opList.filter((item, index) => {\n        return list.indexOf(item.key) == -1 && item != 'Divider';\n      });\n    } else {\n      opList = opList.filter((item, index) => {\n        return list.indexOf(item.key) == -1;\n      });\n    }\n    return opList;\n  };\n\n  onMenuItemClick = (operation) => {\n    const dirents = this.props.selectedDirentList;\n    const dirent = dirents[0];\n    switch (operation) {\n      case 'Share':\n        this.setState({\n          showLibContentViewDialogs: true,\n          showShareDialog: true,\n        });\n        break;\n      case 'Rename':\n        this.setState({\n          showLibContentViewDialogs: true,\n          isRenameDialogOpen: true\n        });\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Tags':\n        this.listFileTags(dirent);\n        break;\n      case 'Lock':\n        this.lockFile(dirent);\n        break;\n      case 'Unlock':\n        this.unlockFile(dirent);\n        break;\n      case 'History':\n        this.onHistory(dirent);\n        break;\n      case 'Access Log':\n        this.onAccessLog(dirent);\n        break;\n      case 'Properties':\n        this.props.showDirentDetail('info');\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient(dirent);\n        break;\n      default:\n        break;\n    }\n  };\n\n  lockFile = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    seafileAPI.lockfile(this.props.repoID, filePath).then((res) => {\n      if (res.data.is_locked) {\n        this.props.updateDirent(dirent, 'is_locked', true);\n        this.props.updateDirent(dirent, 'locked_by_me', true);\n        this.props.updateDirent(dirent, 'lock_owner_name', name);\n        this.props.unSelectDirent();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  unlockFile = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    seafileAPI.unlockfile(this.props.repoID, filePath).then((res) => {\n      if (!res.data.is_locked) {\n        this.props.updateDirent(dirent, 'is_locked', false);\n        this.props.updateDirent(dirent, 'locked_by_me', false);\n        this.props.updateDirent(dirent, 'lock_owner_name', '');\n        this.props.unSelectDirent();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onOpenViaClient = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    let url = URLDecorator.getUrl({\n      type: 'open_via_client',\n      repoID: this.props.repoID,\n      filePath: filePath\n    });\n    location.href = url;\n  };\n\n  onHistory = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    let url = URLDecorator.getUrl({\n      type: 'file_revisions',\n      repoID: this.props.repoID,\n      filePath: filePath\n    });\n    location.href = url;\n  };\n\n  onAccessLog = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  };\n\n  toggleCancel = () => {\n    this.setState({\n      showLibContentViewDialogs: false,\n      showShareDialog: false,\n      showEditFileTagDialog: false,\n      isRenameDialogOpen: false,\n      isPermissionDialogOpen: false,\n    });\n  };\n\n  listFileTags = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    seafileAPI.listFileTags(this.props.repoID, filePath).then(res => {\n      let fileTagList = res.data.file_tags;\n      for (let i = 0, length = fileTagList.length; i < length; i++) {\n        fileTagList[i].id = fileTagList[i].file_tag_id;\n      }\n      this.setState({\n        fileTagList: fileTagList,\n        showLibContentViewDialogs: true,\n        showEditFileTagDialog: true,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onMenuFileTagChanged = () => {\n    this.listFileTags(this.props.selectedDirentList[0]);\n    let length = this.props.selectedDirentList.length;\n    for (let i = 0; i < length; i++) {\n      const dirent = this.props.selectedDirentList[i];\n      const direntPath = this.getDirentPath(dirent);\n      this.props.onFilesTagChanged(dirent, direntPath);\n    }\n  };\n\n  getDirentPath = (dirent) => {\n    if (dirent) return Utils.joinPath(this.props.path, dirent.name);\n  };\n\n  render() {\n\n    const { repoID, repoTags, userPerm } = this.props;\n    const dirent = this.props.selectedDirentList[0];\n    const direntPath = this.getDirentPath(dirent);\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    let canDelete = true;\n    let canDownload = true;\n    let canCopy = true;\n    let canModify = true;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canDelete = permission.delete;\n      canDownload = permission.download;\n      canCopy = permission.copy;\n      canModify = permission.modify;\n    }\n\n    return (\n      <Fragment>\n        <div className=\"dir-operation\">\n          <div className=\"d-flex\">\n            <ButtonGroup className=\"flex-row group-operations\">\n              {(userPerm === 'rw' || userPerm === 'admin' || isCustomPermission) && (\n                <Fragment>\n                  {canModify && <Button className=\"secondary group-op-item action-icon sf2-icon-move\" title={gettext('Move')} aria-label={gettext('Move')} onClick={this.onMoveToggle}></Button>}\n                  {canCopy && <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} aria-label={gettext('Copy')} onClick={this.onCopyToggle}></Button>}\n                  {canDelete && <Button className=\"secondary group-op-item action-icon sf2-icon-delete\" title={gettext('Delete')} aria-label={gettext('Delete')} onClick={this.onItemsDelete}></Button>}\n                  {canDownload && <Button className=\"secondary group-op-item action-icon sf2-icon-download\" title={gettext('Download')} aria-label={gettext('Download')} onClick={this.onItemsDownload}></Button>}\n                </Fragment>\n              )}\n              {userPerm === 'cloud-edit' && (\n                <Fragment>\n                  {canModify && <Button className=\"secondary group-op-item action-icon sf2-icon-move\" title={gettext('Move')} aria-label={gettext('Move')} onClick={this.onMoveToggle}></Button>}\n                  {canCopy && <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} aria-label={gettext('Copy')} onClick={this.onCopyToggle}></Button>}\n                  {canDelete && <Button className=\"secondary group-op-item action-icon sf2-icon-delete\" title={gettext('Delete')} aria-label={gettext('Delete')} onClick={this.onItemsDelete}></Button>}\n                </Fragment>\n              )}\n              {userPerm === 'r' && (\n                <Fragment>\n                  <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} aria-label={gettext('Copy')} onClick={this.onCopyToggle}></Button>\n                  <Button className=\"secondary group-op-item action-icon sf2-icon-download\" title={gettext('Download')} aria-label={gettext('Download')} onClick={this.onItemsDownload}></Button>\n                </Fragment>\n              )}\n              {this.props.selectedDirentList.length === 1 &&\n                <ItemDropdownMenu\n                  tagName={'button'}\n                  item={this.props.selectedDirentList[0]}\n                  toggleClass={'fas fa-ellipsis-v dirents-more-menu'}\n                  onMenuItemClick={this.onMenuItemClick}\n                  getMenuList={this.getDirentMenuList}\n                />\n              }\n            </ButtonGroup>\n          </div>\n        </div>\n        {Utils.isDesktop() && <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode} isCustomPermission={isCustomPermission} />}\n        {this.state.isMoveDialogShow &&\n          <MoveDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.repoEncrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            selectedDirentList={this.props.selectedDirentList}\n            onItemsMove={this.props.onItemsMove}\n            onCancelMove={this.onMoveToggle}\n          />\n        }\n        {this.state.isCopyDialogShow &&\n          <CopyDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.repoEncrypted}\n            selectedDirentList={this.props.selectedDirentList}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemsCopy={this.props.onItemsCopy}\n            onCancelCopy={this.onCopyToggle}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n        <ModalPortal>\n          <ZipDownloadDialog\n            repoID={this.props.repoID}\n            path={this.props.path}\n            target={this.props.selectedDirentList.map(dirent => dirent.name)}\n            toggleDialog={this.closeZipDialog}\n          />\n        </ModalPortal>\n        }\n        {this.state.showLibContentViewDialogs && (\n          <Fragment>\n            {this.state.showShareDialog &&\n              <ModalPortal>\n                <ShareDialog\n                  itemType={dirent.type}\n                  itemName={dirent.name}\n                  itemPath={direntPath}\n                  userPerm={dirent.permission}\n                  repoID={repoID}\n                  repoEncrypted={this.props.repoEncrypted}\n                  enableDirPrivateShare={this.props.enableDirPrivateShare}\n                  isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                  toggleDialog={this.toggleCancel}\n                />\n              </ModalPortal>\n            }\n            {this.state.isRenameDialogOpen &&\n              <ModalPortal>\n                <Rename\n                  dirent={dirent}\n                  onRename={this.onItemRename}\n                  checkDuplicatedName={this.checkDuplicatedName}\n                  toggleCancel={this.toggleCancel}\n                />\n              </ModalPortal>\n            }\n            {this.state.isPermissionDialogOpen &&\n              <ModalPortal>\n                <LibSubFolderPermissionDialog\n                  toggleDialog={this.toggleCancel}\n                  repoID={repoID}\n                  folderPath={direntPath}\n                  folderName={dirent.name}\n                  isDepartmentRepo={this.props.isGroupOwnedRepo}\n                />\n              </ModalPortal>\n            }\n            {this.state.showEditFileTagDialog &&\n              <ModalPortal>\n                <EditFileTagDialog\n                  repoID={repoID}\n                  repoTags={repoTags}\n                  filePath={direntPath}\n                  fileTagList={this.state.fileTagList}\n                  toggleCancel={this.toggleCancel}\n                  onFileTagChanged={this.onMenuFileTagChanged}\n                />\n              </ModalPortal>\n            }\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nMultipleDirOperationToolbar.propTypes = propTypes;\n\nexport default MultipleDirOperationToolbar;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toolbar/dir-operation-toolbar.js",["4613"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\nimport { enableSeadoc, gettext } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport CreateFolder from '../../components/dialog/create-folder-dialog';\nimport CreateFile from '../../components/dialog/create-file-dialog';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport ViewModeToolbar from './view-mode-toolbar';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onUploadFile: PropTypes.func.isRequired,\n  onUploadFolder: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n};\n\nclass DirOperationToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileType: '.md',\n      isCreateFileDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isUploadMenuShow: false,\n      isCreateMenuShow: false,\n      isShareDialogShow: false,\n      operationMenuStyle: '',\n      isMobileOpMenuOpen: false\n    };\n  }\n\n  componentDidMount() {\n    document.addEventListener('click', this.hideOperationMenu);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.hideOperationMenu);\n  }\n\n  toggleMobileOpMenu = () => {\n    this.setState({isMobileOpMenuOpen: !this.state.isMobileOpMenuOpen});\n  };\n\n  hideOperationMenu = () => {\n    this.setState({\n      isUploadMenuShow: false,\n      isCreateMenuShow: false,\n    });\n  };\n\n  toggleOperationMenu = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let targetRect = e.target.getBoundingClientRect();\n    let left = targetRect.left;\n    let top  = targetRect.bottom;\n    let style = {position: 'fixed', display: 'block', left: left, top: top};\n    this.setState({operationMenuStyle: style});\n  };\n\n  onUploadClick = (e) => {\n    this.toggleOperationMenu(e);\n    this.setState({\n      isUploadMenuShow: !this.state.isUploadMenuShow,\n      isCreateMenuShow: false,\n    });\n  };\n\n  onUploadFile = (e) => {\n    this.setState({isUploadMenuShow: false});\n    this.props.onUploadFile(e);\n  };\n\n  onUploadFolder = (e) => {\n    this.setState({isUploadMenuShow: false});\n    this.props.onUploadFolder(e);\n  };\n\n  onCreateClick = (e) => {\n    this.toggleOperationMenu(e);\n    this.setState({\n      isCreateMenuShow: !this.state.isCreateMenuShow,\n      isUploadMenuShow: false,\n    });\n  };\n\n  onShareClick = () => {\n    this.setState({\n      isShareDialogShow: !this.state.isShareDialogShow\n    });\n  };\n\n  onCreateFolderToggle = () => {\n    this.setState({isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow});\n  };\n\n  onCreateFileToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: ''\n    });\n  };\n\n  onCreateMarkdownToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.md'\n    });\n  };\n\n  onCreateExcelToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.xlsx'\n    });\n  };\n\n  onCreatePPTToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.pptx'\n    });\n  };\n\n  onCreateWordToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.docx'\n    });\n  };\n\n  onCreateSeaDocToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.sdoc'\n    });\n  };\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  };\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.props.direntList;\n    let isDuplicated = direntList.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  };\n\n  render() {\n    let { path, repoName, userPerm } = this.props;\n\n    let itemType = path === '/' ? 'library' : 'dir';\n    let itemName = path == '/' ? repoName : Utils.getFolderName(path);\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    let canUpload = true;\n    let canCreate = true;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canUpload = permission.upload;\n      canCreate = permission.create;\n    }\n\n    let content = null;\n    if (Utils.isDesktop()) {\n      const { showShareBtn, repoEncrypted } = this.props;\n      content = (\n        <Fragment>\n          {canUpload && (\n            <Fragment>\n              {Utils.isSupportUploadFolder() ?\n                <Fragment>\n                  <button className=\"btn btn-secondary operation-item\" onClick={this.onUploadClick} aria-haspopup=\"true\" aria-expanded={this.state.isUploadMenuShow} aria-controls=\"upload-menu\">{gettext('Upload')}</button>\n                  {this.state.isUploadMenuShow && (\n                    <div className=\"menu dropdown-menu\" style={this.state.operationMenuStyle} role=\"menu\" id=\"upload-menu\">\n                      <button type=\"button\" className=\"dropdown-item\" onClick={this.onUploadFile} role=\"menuitem\">{gettext('Upload Files')}</button>\n                      <button type=\"button\" className=\"dropdown-item\" onClick={this.onUploadFolder} role=\"menuitem\">{gettext('Upload Folder')}</button>\n                    </div>\n                  )}\n                </Fragment>\n                :\n                <button className=\"btn btn-secondary operation-item\" title={gettext('Upload')} onClick={this.onUploadFile}>{gettext('Upload')}</button>}\n            </Fragment>\n          )}\n          {canCreate &&\n          <Fragment>\n            <button className=\"btn btn-secondary operation-item\" onClick={this.onCreateClick} aria-haspopup=\"true\" aria-expanded={this.state.isUploadMenuShow} aria-controls=\"new-menu\">{gettext('New')}</button>\n            {this.state.isCreateMenuShow && (\n              <div className=\"menu dropdown-menu\" style={this.state.operationMenuStyle} role=\"menu\" id=\"new-menu\">\n                <button className=\"dropdown-item\" onClick={this.onCreateFolderToggle} role=\"menuitem\">{gettext('New Folder')}</button>\n                <button className=\"dropdown-item\" onClick={this.onCreateFileToggle}>{gettext('New File')}</button>\n                <div className=\"dropdown-divider\"></div>\n                <button className=\"dropdown-item\" onClick={this.onCreateMarkdownToggle} role=\"menuitem\">{gettext('New Markdown File')}</button>\n                <button className=\"dropdown-item\" onClick={this.onCreateExcelToggle} role=\"menuitem\">{gettext('New Excel File')}</button>\n                <button className=\"dropdown-item\" onClick={this.onCreatePPTToggle} role=\"menuitem\">{gettext('New PowerPoint File')}</button>\n                <button className=\"dropdown-item\" onClick={this.onCreateWordToggle} role=\"menuitem\">{gettext('New Word File')}</button>\n                {enableSeadoc && !repoEncrypted && <button className=\"dropdown-item\" onClick={this.onCreateSeaDocToggle} role=\"menuitem\">{gettext('New SeaDoc File')} (beta)</button>}\n              </div>\n            )}\n          </Fragment>\n          }\n          {showShareBtn && <button className=\"btn btn-secondary operation-item\" title={gettext('Share')} onClick={this.onShareClick}>{gettext('Share')}</button>}\n        </Fragment>\n      );\n    } else {\n      content = (\n        <Dropdown isOpen={this.state.isMobileOpMenuOpen} toggle={this.toggleMobileOpMenu}>\n          <DropdownToggle tag=\"span\" className=\"sf2-icon-plus mobile-toolbar-icon\" />\n          <DropdownMenu>\n            {canUpload && (\n              <DropdownItem onClick={this.onUploadFile}>{gettext('Upload')}</DropdownItem>\n            )}\n            {canCreate && (\n              <Fragment>\n                <DropdownItem onClick={this.onCreateFolderToggle}>{gettext('New Folder')}</DropdownItem>\n                <DropdownItem onClick={this.onCreateFileToggle}>{gettext('New File')}</DropdownItem>\n              </Fragment>\n            )}\n          </DropdownMenu>\n        </Dropdown>\n      );\n    }\n\n    return (\n      <Fragment>\n        {(userPerm === 'rw' || userPerm === 'admin' || userPerm === 'cloud-edit' || isCustomPermission) && (\n          <div className=\"dir-operation\">\n            {content}\n          </div>\n        )}\n        {Utils.isDesktop() && <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode} isCustomPermission={isCustomPermission} />}\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              fileType={this.state.fileType}\n              onAddFile={this.props.onAddFile}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleDialog={this.onCreateFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.props.path}\n              onAddFolder={this.onAddFolder}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onCreateFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShareDialogShow &&\n          <ModalPortal>\n            <ShareDialog\n              itemType={itemType}\n              itemName={itemName}\n              itemPath={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.onShareClick}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nDirOperationToolbar.propTypes = propTypes;\n\nexport default DirOperationToolbar;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dirent-detail/dirent-details.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-uploader/upload-progress-dialog.js",["4614"],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/sdoc-wiki-page-viewer/index.js",["4615","4616"],[],"import React, { Suspense } from 'react';\nimport PropTypes from 'prop-types';\nimport { WikiViewer } from '@seafile/sdoc-editor';\nimport { I18nextProvider } from 'react-i18next';\nimport { appAvatarURL, assetsUrl, gettext, name, repoID, serviceURL, sharedToken, siteRoot, slug, username } from '../../utils/constants';\nimport i18n from '../../_i18n/i18n-sdoc-editor';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\n\nimport './style.css';\n\nconst propTypes = {\n  isWiki: PropTypes.bool,\n  path: PropTypes.string,\n  repoID: PropTypes.string,\n  isTOCShow: PropTypes.bool,\n  children: PropTypes.object,\n  isFileLoading: PropTypes.bool.isRequired,\n  containerClassName: PropTypes.string,\n  markdownContent: PropTypes.string.isRequired,\n  latestContributor: PropTypes.string.isRequired,\n  lastModified: PropTypes.string.isRequired,\n  onLinkClick: PropTypes.func.isRequired,\n};\n\nclass SdocWikiPageViewer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.scrollRef = React.createRef();\n  }\n\n  changeInlineNode = (item) => {\n    const { repoID } = this.props;\n    let url, imagePath;\n    // isPublicWiki: in the old version, only public wiki need replace image url\n    if (item.type == 'image') { // change image url\n      url = item.data.src;\n      const re = new RegExp(serviceURL + '/lib/' + repoID +'/file.*raw=1');\n      // different repo\n      if (re.test(url)) {\n        // get image path\n        let index = url.indexOf('/file');\n        let index2 = url.indexOf('?');\n        imagePath = url.substring(index + 5, index2);\n      } else if (/^\\.\\.\\/*/.test(url) || /^\\.\\/*/.test(url)) {\n        const path = this.props.path;\n        const originalPath = path.slice(0, path.lastIndexOf('/')) + '/' + url;\n        imagePath = Utils.pathNormalize(originalPath);\n      } else {\n        return;\n      }\n      item.data.src = serviceURL + '/view-image-via-public-wiki/?slug=' + slug + '&path=' + imagePath;\n    } else if (item.type == 'link') { // change link url\n      url = item.url;\n      if (Utils.isInternalFileLink(url, repoID)) { // change file url\n        if (Utils.isInternalMarkdownLink(url, repoID)) {\n          let path = Utils.getPathFromInternalMarkdownLink(url, repoID);\n          // replace url\n          item.url = serviceURL + '/published/' + slug + path;\n        } else {\n          item.url = url.replace(/(.*)lib\\/([-0-9a-f]{36})\\/file(.*)/g, (match, p1, p2, p3) => {\n            return `${p1}d/${sharedToken}/files/?p=${p3}&dl=1`;\n          });\n        }\n      } else if (Utils.isInternalDirLink(url, repoID)) { // change dir url\n        let path = Utils.getPathFromInternalDirLink(url, repoID);\n        // replace url\n        item.url = serviceURL + '/published/' + slug + path;\n      }\n    }\n\n    return item;\n  };\n\n  modifyValueBeforeRender = (value) => {\n    let newNodes = Utils.changeMarkdownNodes(value, this.changeInlineNode);\n    return newNodes;\n  };\n\n  renderMarkdown = () => {\n    let { isTOCShow, markdownContent } = this.props;\n    if (!markdownContent) return null;\n\n    let document = JSON.parse(markdownContent);\n    // if (isWiki) {\n    //   const newChildren = this.modifyValueBeforeRender(document.children);\n    //   document.children = newChildren;\n    // }\n\n    if (!window.seafile) {\n      window.seafile = {\n        serviceUrl: serviceURL,\n        username: username,\n        name: name,\n        avatarURL: appAvatarURL,\n        repoID: repoID,\n        siteRoot: siteRoot,\n        assetsUrl: assetsUrl,\n      };\n    }\n\n    const props = {\n      document: document,\n      showOutline: isTOCShow,\n      scrollRef: this.scrollRef,\n    };\n\n    return (\n      <I18nextProvider i18n={ i18n }>\n        <Suspense fallback={<Loading />}>\n          <WikiViewer {...props} />\n        </Suspense>\n      </I18nextProvider>\n    );\n  };\n\n  render() {\n    if (this.props.isFileLoading) {\n      return <Loading />;\n    }\n\n    const { isWiki, containerClassName = '' } = this.props;\n    const containerClass = `wiki-page-container ${containerClassName}`;\n    // In dir-column-file width is 100%;\n    // In wiki-viewer width isn't 100%\n    const contentClassName = `wiki-page-content ${!isWiki ?  + 'w-100' : ''}`;\n    return (\n      <div ref={this.scrollRef} className={containerClass}>\n        <div className={contentClassName}>\n          {this.props.children}\n          {this.renderMarkdown()}\n          <p id=\"wiki-page-last-modified\">{gettext('Last modified by')} {this.props.latestContributor}, <span>{this.props.lastModified}</span></p>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst defaultProps = {\n  isWiki: false,\n  isTOCShow: true,\n};\n\nSdocWikiPageViewer.propTypes = propTypes;\nSdocWikiPageViewer.defaultProps = defaultProps;\n\nexport default SdocWikiPageViewer;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/popover/edit-filetag-popover.js",["4617","4618"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport CommonAddTool from '../common/common-add-tool';\nimport SearchInput from '../common/search-input';\nimport SeahubPopover from '../common/seahub-popover';\nimport TagItem from './tag-item';\nimport { KeyCodes, TAG_COLORS } from '../../constants';\n\nimport '../../css/repo-tag.css';\nimport '../../css/edit-filetag-popover.css';\n\nclass EditFileTagPopover extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchVal: '',\n      highlightIndex: -1,\n    };\n  }\n\n  setHighlightIndex = (highlightIndex) => {\n    this.setState({ highlightIndex });\n  };\n\n  generateRandomColor = () => {\n    return TAG_COLORS[Math.floor(Math.random() * TAG_COLORS.length)];\n  };\n\n  createNewTag = () => {\n    let name = this.state.searchVal.trim();\n    if (!name) return;\n    let color = this.generateRandomColor();\n    let repoID = this.props.repoID;\n    seafileAPI.createRepoTag(repoID, name, color).then((res) => {\n      const { repo_tag: newTag } = res.data;\n      this.onRepoTagCreated(newTag);\n      this.setState({\n        searchVal: '',\n        highlightIndex: -1,\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onRepoTagCreated = (newTag) => {\n    const { repoID, filePath } = this.props;\n    const { repo_tag_id: repoTagID } = newTag;\n    seafileAPI.addFileTag(repoID, filePath, repoTagID).then(() => {\n      this.props.onFileTagChanged();\n      if (this.props.onNewRepoTagAdded) {\n        this.props.onNewRepoTagAdded(newTag);\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  getRepoTagIdList = () => {\n    return (this.props.fileTagList || []).map((fileTag) => fileTag.repo_tag_id);\n  };\n\n  onEditFileTag = (repoTag) => {\n    let { repoID, filePath } = this.props;\n    let repoTagIdList = this.getRepoTagIdList();\n    if (repoTagIdList.indexOf(repoTag.id) === -1) {\n      seafileAPI.addFileTag(repoID, filePath, repoTag.id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let fileTag = null;\n      let fileTagList = this.props.fileTagList;\n      for(let i = 0; i < fileTagList.length; i++) {\n        if (fileTagList[i].repo_tag_id === repoTag.id) {\n          fileTag = fileTagList[i];\n          break;\n        }\n      }\n      seafileAPI.deleteFileTag(repoID, fileTag.id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  onKeyDown = (e) => {\n    const { repoTags } = this.props;\n    if (e.keyCode === KeyCodes.ChineseInputMethod || e.keyCode === KeyCodes.LeftArrow || e.keyCode === KeyCodes.RightArrow) {\n      e.stopPropagation();\n    }\n    else if (e.keyCode === KeyCodes.Enter) {\n      const searchText = this.state.searchVal.trim();\n      const repoTagList = repoTags.filter(item => item.name.includes(searchText));\n      const tag = repoTagList[this.state.highlightIndex];\n      if (tag) {\n        this.onEditFileTag(tag);\n      }\n    }\n    else if (e.keyCode === KeyCodes.UpArrow) {\n      if (this.state.highlightIndex > -1) {\n        this.setHighlightIndex(this.state.highlightIndex - 1);\n      }\n    }\n    else if (e.keyCode === KeyCodes.DownArrow) {\n      const searchText = this.state.searchVal.trim();\n      const repoTagList = repoTags.filter(item => item.name.includes(searchText));\n      if (this.state.highlightIndex < repoTagList.length) {\n        this.setHighlightIndex(this.state.highlightIndex + 1);\n      }\n    }\n  };\n\n  onChangeSearch = (searchVal) => {\n    this.setState({ searchVal });\n    this.setHighlightIndex(-1);\n  };\n\n  render() {\n    const searchText = this.state.searchVal.trim();\n    const { repoTags: repoTagList } = this.props;\n    const filteredRepoTagList = repoTagList.filter(item => item.name.includes(searchText));\n    const showAddTool = searchText && !repoTagList.find(item => item.name === searchText);\n\n    let noTagsTip = '';\n    if (!searchText) {\n      if (repoTagList.length == 0) {\n        noTagsTip = gettext('No tags');\n      }\n    } else {\n      if (filteredRepoTagList.length == 0) {\n        noTagsTip = gettext('Tag not found');\n      }\n    }\n\n    return (\n      <SeahubPopover\n        popoverClassName=\"edit-filetag-popover\"\n        target={this.props.target}\n        hideSeahubPopover={this.props.toggleCancel}\n        hideSeahubPopoverWithEsc={this.props.toggleCancel}\n        canHideSeahubPopover={true}\n      >\n        <SearchInput\n          className=\"edit-filetag-popover-input\"\n          placeholder={gettext('Find a tag')}\n          onKeyDown={this.onKeyDown}\n          onChange={this.onChangeSearch}\n          autoFocus={true}\n        />\n        {noTagsTip ?\n          <div className='tag-not-found my-4 mx-1'>{noTagsTip}</div> :\n          <ul className=\"tag-list-container\">\n            {filteredRepoTagList.map((repoTag, index) => {\n              return (\n                <TagItem\n                  index={index}\n                  highlightIndex={this.state.highlightIndex}\n                  setHighlightIndex={this.setHighlightIndex}\n                  key={repoTag.id}\n                  repoTag={repoTag}\n                  repoID={this.props.repoID}\n                  filePath={this.props.filePath}\n                  fileTagList={this.props.fileTagList}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                />\n              );\n            })}\n          </ul>\n        }\n        {showAddTool &&\n          <CommonAddTool\n            callBack={this.createNewTag}\n            footerName={`${gettext('Create a new tag')} '${searchText}'`}\n          />\n        }\n      </SeahubPopover>\n    );\n  }\n}\n\nEditFileTagPopover.propTypes = {\n  target: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  repoTags: PropTypes.array.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  onNewRepoTagAdded: PropTypes.func\n};\n\nexport default EditFileTagPopover;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/upload-remind-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/icon-button.js",["4619"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Tooltip } from 'reactstrap';\n\nconst propTypes = {\n  id: PropTypes.string.isRequired,\n  icon: PropTypes.string.isRequired,\n  text: PropTypes.string.isRequired,\n  onClick: PropTypes.func,\n  tag: PropTypes.string,\n  href: PropTypes.string\n};\n\nclass IconButton extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tooltipOpen: false\n    };\n  }\n\n  toggle = () => {\n    this.setState({\n      tooltipOpen: !this.state.tooltipOpen\n    });\n  };\n  render() {\n    const className = 'btn-icon';\n    const btnContent = (\n      <React.Fragment>\n        <i className={this.props.icon}></i>\n        <Tooltip\n          toggle={this.toggle}\n          delay={{show: 0, hide: 0}}\n          target={this.props.id}\n          placement='bottom'\n          isOpen={this.state.tooltipOpen}>\n          {this.props.text}\n        </Tooltip>\n      </React.Fragment>\n    );\n    if (this.props.tag && this.props.tag == 'a') {\n      return (\n        <Button\n          id={this.props.id}\n          className={className}\n          tag=\"a\"\n          href={this.props.href}\n          aria-label={this.props.text}\n        >\n          {btnContent}\n        </Button>\n      );\n    } else {\n      return (\n        <Button\n          id={this.props.id}\n          className={className}\n          onClick={this.props.onClick}\n          aria-label={this.props.text}\n        >\n          {btnContent}\n        </Button>\n      );\n    }\n  }\n}\nIconButton.propTypes = propTypes;\n\nexport default IconButton;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dir-view-mode/dir-grid-view.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/wiki-list-view/wiki-list-item.js",["4620","4621"],[],"import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n// import { seafileAPI } from '../../utils/seafile-api';\n// import Toast from '../toast';\nimport ModalPortal from '../modal-portal';\nimport WikiDeleteDialog from '../dialog/wiki-delete-dialog';\n// import Rename from '../rename';\n\nconst propTypes = {\n  wiki: PropTypes.object.isRequired,\n  // renameWiki: PropTypes.func.isRequired,\n  deleteWiki: PropTypes.func.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n};\n\nclass WikiListItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpMenuOpen: false, // for mobile\n      isShowDeleteDialog: false,\n      // isRenameing: false,\n      highlight: false,\n      // permission: this.props.wiki.permission,\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  };\n\n  // clickMenuToggle = (e) => {\n  //   e.preventDefault();\n  //   this.onMenuToggle(e);\n  // }\n\n  // onMenuToggle = (e) => {\n  //   let targetType = e.target.dataset.toggle;\n  //   if (targetType !== 'item') {\n  //     if (this.props.isItemFreezed) {\n  //       this.setState({\n  //         highlight: false,\n  //         isShowMenuControl: false,\n  //         isShowWikiMenu: !this.state.isShowWikiMenu\n  //       });\n  //       this.props.onUnfreezedItem();\n  //     } else {\n  //       this.setState({\n  //         isShowWikiMenu: !this.state.isShowWikiMenu\n  //       });\n  //       this.props.onFreezedItem();\n  //     }\n  //   }\n  // }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({ highlight: true });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({ highlight: false });\n    }\n  };\n\n  // changePerm = (permission) => {\n  //   let wiki = this.props.wiki;\n  //   seafileAPI.updateWikiPermission(wiki.slug, permission).then(() => {\n  //     this.setState({permission: permission});\n  //   }).catch((error) => {\n  //     if(error.response) {\n  //       let errorMsg = error.response.data.error_msg;\n  //       Toast.danger(errorMsg);\n  //     }\n  //   });\n  // }\n\n  // onRenameToggle = (e) => {\n  //   this.props.onFreezedItem();\n  //   this.setState({\n  //     isShowWikiMenu: false,\n  //     isShowMenuControl: false,\n  //     isRenameing: true,\n  //   });\n  // }\n\n  // onRenameConfirm = (newName) => {\n  //   this.renameWiki(newName);\n  //   this.onRenameCancel();\n  // }\n\n  // onRenameCancel = () => {\n  //   this.props.onUnfreezedItem();\n  //   this.setState({isRenameing: false});\n  // }\n\n  onDeleteToggle = (e) => {\n    e.preventDefault();\n    this.props.onUnfreezedItem();\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  };\n\n  onDeleteCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  };\n\n  // renameWiki = (newName) => {\n  //   let wiki = this.props.wiki;\n  //   this.props.renameWiki(wiki, newName);\n  // }\n\n  deleteWiki = () => {\n    let wiki = this.props.wiki;\n    this.props.deleteWiki(wiki);\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  };\n\n  render() {\n    let wiki = this.props.wiki;\n    let userProfileURL = `${siteRoot}profile/${encodeURIComponent(wiki.owner)}/`;\n    let fileIconUrl = Utils.getDefaultLibIconUrl(false);\n    let deleteIcon = `action-icon sf2-icon-x3 ${this.state.highlight ? '' : 'invisible'}`;\n\n    const desktopItem = (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={fileIconUrl} width=\"24\" alt=\"\" /></td>\n        <td className=\"name\">\n          <a href={wiki.link}>{wiki.name}</a>\n          {/*this.state.isRenameing ?\n              <Rename wiki={wiki} name={wiki.name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel}/> :\n              <a href={wiki.link}>{wiki.name}</a>\n            */}\n        </td>\n        <td><a href={userProfileURL} target='_blank' rel=\"noreferrer\">{wiki.owner_nickname}</a></td>\n        <td>{moment(wiki.updated_at).fromNow()}</td>\n        <td className=\"text-center cursor-pointer\">\n          <a href=\"#\" role=\"button\" aria-label={gettext('Unpublish')} title={gettext('Unpublish')} className={deleteIcon} onClick={this.onDeleteToggle}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={fileIconUrl} width=\"24\" alt=\"\" /></td>\n        <td>\n          <a href={wiki.link}>{wiki.name}</a><br />\n          <a href={userProfileURL} target='_blank' className=\"item-meta-info\" rel=\"noreferrer\">{wiki.owner_nickname}</a>\n          <span className=\"item-meta-info\">{moment(wiki.updated_at).fromNow()}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More operations')}\n              aria-label={gettext('More operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.onDeleteToggle}>{gettext('Unpublish')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {Utils.isDesktop() ? desktopItem : mobileItem}\n        {this.state.isShowDeleteDialog &&\n          <ModalPortal>\n            <WikiDeleteDialog\n              toggleCancel={this.onDeleteCancel}\n              handleSubmit={this.deleteWiki}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nWikiListItem.propTypes = propTypes;\n\nexport default WikiListItem;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dir-view-mode/dir-column-view.js",["4622"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport DirColumnNav from './dir-column-nav';\nimport DirColumnFile from './dir-column-file';\nimport DirListView from './dir-list-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  // repoinfo\n  currentRepoInfo: PropTypes.object.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  // tree\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  // file\n  isViewFile: PropTypes.bool.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  hash: PropTypes.string,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n  // repo content\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  // list\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onItemConvert: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  repoTags: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func,\n  showDirentDetail: PropTypes.func.isRequired,\n  fullDirentList: PropTypes.array,\n  onItemsScroll: PropTypes.func.isRequired\n};\n\nclass DirColumnView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      inResizing: false,\n      navRate: 0.25,\n    };\n    this.containerWidth = null;\n  }\n\n  onResizeMouseUp = () => {\n    if (this.state.inResizing) {\n      this.setState({\n        inResizing: false\n      });\n    }\n    this.setCookie('navRate', this.state.navRate);\n  };\n\n  onResizeMouseDown = () => {\n    this.containerWidth = this.refs.viewModeContainer.clientWidth;\n    this.setState({\n      inResizing: true\n    });\n  };\n\n  onResizeMouseMove = (e) => {\n    let sizeNavWidth = this.containerWidth / 0.78 * 0.22 + 3;\n    let rate = (e.nativeEvent.clientX - sizeNavWidth) / this.containerWidth;\n    if (rate < 0.1) {\n      this.setState({\n        inResizing: false,\n        navRate: 0.12,\n      });\n    }\n    else if (rate > 0.4) {\n      this.setState({\n        inResizing: false,\n        navRate: 0.38,\n      });\n    }\n    else {\n      this.setState({\n        navRate: rate\n      });\n    }\n  };\n\n  setCookie = (name, value) => {\n    let cookie = name + '=' + value + ';';\n    document.cookie = cookie;\n  };\n\n  getCookie = (cookiename) => {\n    let name = cookiename + '=';\n    let cookie = document.cookie.split(';');\n    for (let i = 0, len = cookie.length; i < len; i++) {\n      let c = cookie[i].trim();\n      if (c.indexOf(name) == 0) {\n        return c.substring(name.length, c.length) * 1;\n      }\n    }\n    return '';\n  };\n\n  UNSAFE_componentWillMount() {\n    let rate = this.getCookie('navRate');\n    if (rate) {\n      this.setState({\n        navRate: rate,\n      });\n    }\n  }\n\n  render() {\n    const onResizeMove = this.state.inResizing ? this.onResizeMouseMove : null;\n    const select = this.state.inResizing ? 'none' : '';\n    const mainFlex = '1 0 ' + (1 - this.state.navRate - 0.05) * 100 + '%';\n    return (\n      <div className=\"dir-colunm-view\" onMouseMove={onResizeMove} onMouseUp={this.onResizeMouseUp} ref=\"viewModeContainer\">\n        <DirColumnNav\n          currentPath={this.props.path}\n          userPerm={this.props.userPerm}\n          isTreeDataLoading={this.props.isTreeDataLoading}\n          treeData={this.props.treeData}\n          currentNode={this.props.currentNode}\n          onNodeClick={this.props.onNodeClick}\n          onNodeCollapse={this.props.onNodeCollapse}\n          onNodeExpanded={this.props.onNodeExpanded}\n          onAddFolderNode={this.props.onAddFolderNode}\n          onAddFileNode={this.props.onAddFileNode}\n          onRenameNode={this.props.onRenameNode}\n          onDeleteNode={this.props.onDeleteNode}\n          repoID={this.props.repoID}\n          navRate={this.state.navRate}\n          inResizing={this.state.inResizing}\n          currentRepoInfo={this.props.currentRepoInfo}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          selectedDirentList={this.props.selectedDirentList}\n          onItemsMove={this.props.onItemsMove}\n        />\n        <div className=\"dir-content-resize\" onMouseDown={this.onResizeMouseDown}></div>\n        <div className=\"dir-content-main\" style={{userSelect: select, flex: mainFlex}} onScroll={this.props.isViewFile ? () => {} : this.props.onItemsScroll}>\n          {this.props.isViewFile ? (\n            <DirColumnFile\n              path={this.props.path}\n              repoID={this.props.repoID}\n              hash={this.props.hash}\n              isFileLoading={this.props.isFileLoading}\n              isFileLoadedErr={this.props.isFileLoadedErr}\n              filePermission={this.props.filePermission}\n              content={this.props.content}\n              lastModified={this.props.lastModified}\n              latestContributor={this.props.latestContributor}\n              onLinkClick={this.props.onLinkClick}\n            />\n          ) : (\n            <DirListView\n              path={this.props.path}\n              repoID={this.props.repoID}\n              currentRepoInfo={this.props.currentRepoInfo}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              userPerm={this.props.userPerm}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isRepoInfoBarShow={this.props.isRepoInfoBarShow}\n              usedRepoTags={this.props.usedRepoTags}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              isDirentListLoading={this.props.isDirentListLoading}\n              direntList={this.props.direntList}\n              fullDirentList={this.props.fullDirentList}\n              sortBy={this.props.sortBy}\n              sortOrder={this.props.sortOrder}\n              sortItems={this.props.sortItems}\n              onAddFolder={this.props.onAddFolder}\n              onAddFile={this.props.onAddFile}\n              onItemClick={this.props.onItemClick}\n              onItemSelected={this.props.onItemSelected}\n              onItemDelete={this.props.onItemDelete}\n              onItemRename={this.props.onItemRename}\n              onItemMove={this.props.onItemMove}\n              onItemCopy={this.props.onItemCopy}\n              onItemConvert={this.props.onItemConvert}\n              onDirentClick={this.props.onDirentClick}\n              updateDirent={this.props.updateDirent}\n              isAllItemSelected={this.props.isAllItemSelected}\n              onAllItemSelected={this.props.onAllItemSelected}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n              onItemsCopy={this.props.onItemsCopy}\n              onItemsDelete={this.props.onItemsDelete}\n              repoTags={this.props.repoTags}\n              onFileTagChanged={this.props.onFileTagChanged}\n              showDirentDetail={this.props.showDirentDetail}\n            />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nDirColumnView.propTypes = propTypes;\n\nexport default DirColumnView;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dir-view-mode/dir-list-view.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/rename.js",["4623","4624"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../utils/constants';\nimport { Utils } from '../utils/utils';\nimport toaster from './toast';\n\nconst propTypes = {\n  hasSuffix: PropTypes.bool,\n  name: PropTypes.string.isRequired,\n  onRenameConfirm: PropTypes.func.isRequired,\n  onRenameCancel: PropTypes.func.isRequired,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: props.name\n    };\n    this.inputRef = React.createRef();\n  }\n\n  componentDidMount() {\n    this.inputRef.current.focus();\n    if (this.props.hasSuffix) {\n      var endIndex = this.props.name.lastIndexOf('.');\n      this.inputRef.current.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.inputRef.current.setSelectionRange(0, -1);\n    }\n    // ensure real dom has been rendered, then listen the click event\n    setTimeout(() => {\n      document.addEventListener('click', this.onClick);\n    }, 1);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.onClick);\n  }\n\n  onClick = (e) => {\n    if (!this.inputRef.current.contains(e.target)) {\n      this.onRenameConfirm();\n    }\n  };\n\n  onChange = (e) => {\n    this.setState({name: e.target.value});\n  };\n\n  onKeyDown = (e) => {\n    if (e.keyCode === Utils.keyCodes.enter) {\n      this.onRenameConfirm(e);\n    } else if (e.keyCode === Utils.keyCodes.esc) {\n      this.onRenameCancel(e);\n    }\n    e.nativeEvent.stopImmediatePropagation();\n  };\n\n  onRenameConfirm = (e) => {\n    e && e.nativeEvent.stopImmediatePropagation();\n    let newName = this.state.name.trim();\n    if (newName === this.props.name) {\n      this.props.onRenameCancel();\n      return;\n    }\n\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      toaster.danger(errMessage);\n      this.props.onRenameCancel();\n    } else {\n      this.props.onRenameConfirm(newName);\n    }\n  };\n\n  onRenameCancel = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.onRenameCancel();\n  };\n\n  validateInput = () => {\n    let newName = this.state.name.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  };\n\n  render() {\n    return (\n      <div className=\"rename-container\">\n        <input\n          ref={this.inputRef}\n          value={this.state.name}\n          onChange={this.onChange}\n          onKeyDown={this.onKeyDown}\n        />\n      </div>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/cur-dir-path/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/operations/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/user-content/user-group-item.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/user-content/user-repo-item.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/date-and-time-picker.js",["4625","4626","4627"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport Calendar from '@seafile/seafile-calendar';\nimport DatePicker from '@seafile/seafile-calendar/lib/Picker';\nimport { translateCalendar } from '../utils/date-format-utils';\n\nimport '@seafile/seafile-calendar/assets/index.css';\nimport '../css/date-and-time-picker.css';\n\nclass Picker extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.defaultCalendarValue = null;\n    this.calendarContainerRef = React.createRef();\n    this.inputRef = React.createRef();\n  }\n\n  componentDidMount() {\n    let lang = window.app.config.lang;\n    this.defaultCalendarValue = moment().locale(lang).clone();\n\n  }\n\n  getCalendarContainer = () => {\n    return this.calendarContainerRef.current;\n  };\n\n  render() {\n    let showHourAndMinute = true; // default: true\n    if (this.props.showHourAndMinute != undefined) {\n      showHourAndMinute = this.props.showHourAndMinute;\n    }\n\n    const FORMAT = showHourAndMinute ? 'YYYY-MM-DD HH:mm' : 'YYYY-MM-DD';\n\n    const calendar = (<Calendar\n      defaultValue={this.defaultCalendarValue}\n      disabledDate={this.props.disabledDate}\n      format={FORMAT}\n      locale={translateCalendar()}\n      showHourAndMinute={showHourAndMinute}\n    />);\n    return (\n      <DatePicker\n        disabled={this.props.disabled}\n        getCalendarContainer={this.getCalendarContainer}\n        calendar={calendar}\n        value={this.props.value}\n        onChange={this.props.onChange}\n      >\n        {\n          ({value}) => {\n            return (\n              <div>\n                <input\n                  placeholder={FORMAT}\n                  style={{ width: this.props.inputWidth || 250 }}\n                  tabIndex=\"-1\"\n                  disabled={this.props.disabled}\n                  readOnly={true}\n                  value={value && value.format(FORMAT) || ''}\n                  className=\"form-control\"\n                  ref={this.inputRef}\n                />\n                <div ref={this.calendarContainerRef} />\n              </div>\n            );\n          }\n        }\n      </DatePicker>\n    );\n  }\n}\n\nPicker.propTypes = {\n  showHourAndMinute: PropTypes.bool.isRequired,\n  disabledDate: PropTypes.func.isRequired,\n  value: PropTypes.object,\n  disabled: PropTypes.func.isRequired,\n  inputWidth: PropTypes.number.isRequired,\n  onChange: PropTypes.func.isRequired\n};\n\nexport default Picker;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/create-file-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/date-format-utils.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/internal-link-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/api/index.js",["4628","4629"],[],"import axios from 'axios';\nimport cookie from 'react-cookies';\nimport { siteRoot } from '../../../utils/constants';\n\nclass InstAdminAPI {\n\n  init({ server, username, password, token }) {\n    this.server = server;\n    this.username = username;\n    this.password = password;\n    this.token = token;  //none\n    if (this.token && this.server) {\n      this.req = axios.create({\n        baseURL: this.server,\n        headers: { 'Authorization': 'Token ' + this.token },\n      });\n    }\n    return this;\n  }\n\n  initForSeahubUsage({ siteRoot, xcsrfHeaders }) {\n    if (siteRoot && siteRoot.charAt(siteRoot.length-1) === '/') {\n      var server = siteRoot.substring(0, siteRoot.length-1);\n      this.server = server;\n    } else {\n      this.server = siteRoot;\n    }\n\n    this.req = axios.create({\n      headers: {\n        'X-CSRFToken': xcsrfHeaders,\n      }\n    });\n    return this;\n  }\n\n  _sendPostRequest(url, form) {\n    if (form.getHeaders) {\n      return this.req.post(url, form, {\n        headers:form.getHeaders()\n      });\n    } else {\n      return this.req.post(url, form);\n    }\n  }\n\n  getToken() {\n    const url = this.server + '/api2/auth-token/';\n    axios.post(url, {\n      username: this.username,\n      password: this.password\n    }).then((response) => {\n      this.token = response.data;\n      return this.token;\n    });\n  }\n\n  listInstitutionUsers(page, perPage) {\n    const url = this.server + '/api/v2.1/institutions/admin/users/';\n    let params = {\n    };\n    if (page != undefined) {\n      params.page = page;\n    }\n    if (perPage != undefined) {\n      params.per_page = perPage;\n    }\n    return this.req.get(url);\n  }\n\n  searchInstitutionUsers(q) {\n    const url = this.server + '/api/v2.1/institutions/admin/search-user/';\n    const params = {\n      q: q\n    };\n    return this.req.get(url, {params: params});\n  }\n\n  deleteInstitutionUser(email) {\n    const url = this.server + '/api/v2.1/institutions/admin/users/' + encodeURIComponent(email) + '/';\n    return this.req.delete(url);\n  }\n\n  getInstitutionUserInfo(email) {\n    const url = this.server + '/api/v2.1/institutions/admin/users/' + encodeURIComponent(email) + '/';\n    return this.req.get(url);\n  }\n\n  setInstitutionUserQuote(email, quota) {\n    const url = this.server + '/api/v2.1/institutions/admin/users/' + encodeURIComponent(email) + '/';\n    const data = {\n      quota_total: quota\n    };\n    return this.req.put(url, data);\n  }\n\n  listInstitutionUserRepos(email) {\n    const url = this.server + '/api/v2.1/institutions/admin/users/' + encodeURIComponent(email) + '/libraries/';\n    return this.req.get(url);\n  }\n\n  listInstitutionUserGroups(email) {\n    const url = this.server + '/api/v2.1/institutions/admin/users/' + encodeURIComponent(email) + '/groups/';\n    return this.req.get(url);\n  }\n\n  updateInstitutionUserStatus(email, is_active) {\n    const url = this.server + '/api/v2.1/institutions/admin/users/' + encodeURIComponent(email) + '/';\n    const data = {\n      is_active: is_active ? 'true' : 'false',\n    };\n    return this.req.put(url, data);\n  }\n\n}\n\n\nconst instAdminAPI = new InstAdminAPI();\nconst xcsrfHeaders = cookie.load('sfcsrftoken');\ninstAdminAPI.initForSeahubUsage({ siteRoot, xcsrfHeaders });\n\nexport default instAdminAPI;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/user-list/user-item.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/select/seahub-select.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/select/no-group-message.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-share-to-group.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-share-to-user.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/select/seahub-select-style.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/utils/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/terms-preview-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/markdown-utils.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/number-precision.js",[],["4630"],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/search/ai-search-widgets/ai-search-refrences.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-chooser/repo-list-item.js",["4631","4632"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport TreeListView from './tree-list-view';\n\nimport TreeNode from '../../components/tree-view/tree-node';\nimport Dirent from '../../models/dirent';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport treeHelper from '../../components/tree-view/tree-helper';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  isCurrentRepo: PropTypes.bool,\n  currentPath: PropTypes.string,\n  isShowFile: PropTypes.bool,\n  selectedPath: PropTypes.string,\n  selectedRepo: PropTypes.object,\n  repo: PropTypes.object.isRequired,\n  initToShowChildren: PropTypes.bool.isRequired,\n  onDirentItemClick: PropTypes.func.isRequired,\n  onRepoItemClick: PropTypes.func.isRequired,\n  fileSuffixes: PropTypes.array,\n  selectedItemInfo: PropTypes.object,\n};\n\nclass RepoListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isShowChildren: this.props.initToShowChildren,\n      treeData: treeHelper.buildTree(),\n      hasLoaded: false,\n    };\n  }\n\n  componentDidMount () {\n    const { isCurrentRepo, currentPath, repo, selectedItemInfo } = this.props;\n\n    // render search result\n    const { repoID, filePath } = selectedItemInfo || {};\n    if (repoID && repoID === repo.repo_id) {\n      this.loadRepoDirentList(repo);\n      setTimeout(() => {\n        this.setState({isShowChildren: true});\n        this.loadNodeAndParentsByPath(repoID, filePath);\n      }, 0);\n      return;\n    }\n\n    // the repo is current repo and currentPath is not '/'\n    if (isCurrentRepo && !repoID) {\n      this.loadRepoDirentList(repo);\n      setTimeout(() => {\n        const repoID = repo.repo_id;\n        if (isCurrentRepo && currentPath && currentPath != '/') {\n          const expandNode = true;\n          this.loadNodeAndParentsByPath(repoID, currentPath, expandNode);\n        }\n      }, 0);\n    }\n  }\n\n  loadRepoDirentList = (repo) => {\n    const { hasLoaded } = this.state;\n    if (hasLoaded) return;\n\n    const repoID = repo.repo_id;\n\n    seafileAPI.listDir(repoID, '/').then(res => {\n      let tree = this.state.treeData.clone();\n      let direntList = [];\n      if (this.props.isShowFile === true) {\n        direntList = res.data.dirent_list;\n      } else {\n        direntList = res.data.dirent_list.filter(item => item.type === 'dir');\n      }\n\n      this.addResponseListToNode(direntList, tree.root);\n      this.setState({ treeData: tree, hasLoaded: true });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  addResponseListToNode = (list, node) => {\n    node.isLoaded = true;\n    node.isExpanded = true;\n    let direntList = list.map(item => {\n      return new Dirent(item);\n    });\n    direntList = Utils.sortDirents(direntList, 'name', 'asc');\n\n    let nodeList = direntList.map(object => {\n      return new TreeNode({object});\n    });\n    node.addChildren(nodeList);\n  };\n\n  onNodeExpanded = (node) => {\n    let repoID = this.props.repo.repo_id;\n    let tree = this.state.treeData.clone();\n    node = tree.getNodeByPath(node.path);\n    if (!node.isLoaded) {\n      seafileAPI.listDir(repoID, node.path).then(res => {\n        let direntList = [];\n        if (this.props.isShowFile === true) {\n          direntList = res.data.dirent_list;\n        } else {\n          direntList = res.data.dirent_list.filter(item => item.type === 'dir');\n        }\n        this.addResponseListToNode(direntList, node);\n        this.setState({treeData: tree});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      tree.expandNode(node);\n      this.setState({treeData: tree});\n    }\n  };\n\n  onNodeCollapse = (node) => {\n    let tree = treeHelper.collapseNode(this.state.treeData, node);\n    this.setState({treeData: tree});\n  };\n\n  loadNodeAndParentsByPath = (repoID, path, expandNode) => {\n\n    let tree = this.state.treeData.clone();\n\n    seafileAPI.listDir(repoID, path, {with_parents: true}).then(res => {\n      let direntList = res.data.dirent_list;\n      direntList = direntList.filter(item => item.type === 'dir');\n      let results = {};\n      for (let i = 0; i < direntList.length; i++) {\n        let object = direntList[i];\n        let parentDir = object.parent_dir;\n        let key = parentDir === '/' ?  '/' : parentDir.slice(0, parentDir.length - 1);\n        if (!results[key]) {\n          results[key] = [];\n        }\n        results[key].push(object);\n      }\n      for (let key in results) {\n        let node = tree.getNodeByPath(key);\n        if (!node.isLoaded) {\n          this.addResponseListToNode(results[key], node);\n        }\n      }\n\n      this.setState({\n        treeData: tree\n      }, () => {\n        if (expandNode) {\n          this.onNodeExpanded(tree.getNodeByPath(path));\n        }\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onToggleClick = (e) => {\n    e.stopPropagation();\n    let repo = this.props.repo;\n    this.loadRepoDirentList(repo);\n    this.setState({isShowChildren: !this.state.isShowChildren});\n  };\n\n  onDirentItemClick = (filePath, dirent) => {\n    let repo = this.props.repo;\n    this.props.onDirentItemClick(repo, filePath, dirent);\n  };\n\n  onRepoItemClick = (e) => {\n    const { repo, selectedPath } = this.props;\n    if (!this.isCurrentRepo() || (selectedPath !== '' && selectedPath !== '/')) {\n      this.props.onRepoItemClick(repo);\n    } else {\n      this.onToggleClick(e);\n    }\n  };\n\n  isCurrentRepo = () => {\n    let { selectedRepo, repo } = this.props;\n    return selectedRepo && (repo.repo_id === selectedRepo.repo_id);\n  };\n\n  render() {\n    let repoActive = false;\n    let isCurrentRepo = this.isCurrentRepo();\n    if (isCurrentRepo && this.props.selectedPath == '/') {\n      repoActive = true;\n    }\n\n    return (\n      <li>\n        <div className={`${repoActive ? 'item-active' : ''} item-info`} onClick={this.onRepoItemClick}>\n          <div className=\"item-text\">\n            <span className=\"name user-select-none ellipsis\" title={this.props.repo.repo_name}>{this.props.repo.repo_name}</span>\n          </div>\n          <div className=\"item-left-icon\">\n            <span className={`item-toggle icon fa ${this.state.isShowChildren ? 'fa-caret-down' : 'fa-caret-right'}`} onClick={this.onToggleClick}></span>\n            <i className=\"tree-node-icon\">\n              <span className=\"icon far fa-folder tree-node-icon\"></span>\n            </i>\n          </div>\n        </div>\n        {this.state.isShowChildren && (\n          <TreeListView\n            repo={this.props.repo}\n            onDirentItemClick={this.onDirentItemClick}\n            selectedRepo={this.props.selectedRepo}\n            selectedPath={this.props.selectedPath}\n            fileSuffixes={this.props.fileSuffixes}\n            treeData={this.state.treeData}\n            onNodeCollapse={this.onNodeCollapse}\n            onNodeExpanded={this.onNodeExpanded}\n          />\n        )}\n      </li>\n    );\n  }\n}\n\nRepoListItem.propTypes = propTypes;\n\nexport default RepoListItem;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/custom-permission/add-custom-permission.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-chooser/searched-list-item.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/send-link.js",["4633"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Form, FormGroup, Label } from 'reactstrap';\nimport { seafileAPI } from '../utils/seafile-api';\nimport { gettext } from '../utils/constants';\nimport { Utils } from '../utils/utils';\nimport toaster from './toast';\nimport { EvalProFunc } from '../services/ad';\n\nconst propTypes = {\n  token: PropTypes.string.isRequired,\n  linkType: PropTypes.string.isRequired,\n  toggleSendLink: PropTypes.func.isRequired,\n  closeShareDialog: PropTypes.func.isRequired\n};\n\nclass SendLink extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      emails: '',\n      msg: '',\n      errorMsg: '',\n      btnDisabled: false,\n      sending: false\n    };\n  }\n\n  handleEmailsInputChange = (e) => {\n    this.setState({\n      emails: e.target.value\n    });\n  };\n\n  handleMsgInputChange = (e) => {\n    this.setState({\n      msg: e.target.value\n    });\n  };\n\n  sendLink = () => {\n    const { emails, msg } = this.state;\n    if (!emails.trim()) {\n      this.setState({\n        errorMsg: gettext('Please input at least an email.')\n      });\n      return;\n    }\n\n    this.setState({\n      btnDisabled: true,\n      sending: true\n    });\n\n    const { token, linkType } = this.props;\n    const request = linkType == 'uploadLink' ?\n      seafileAPI.sendUploadLink(token, emails.trim(), msg.trim()) :\n      seafileAPI.sendShareLink(token, emails.trim(), msg.trim());\n    request.then((res) => {\n      this.props.closeShareDialog();\n      const { success, failed } = res.data;\n      if (success.length) {\n        const feedbackMsg = gettext('Successfully sent to {placeholder}')\n          .replace('{placeholder}', success.join(', '));\n        toaster.success(feedbackMsg);\n      }\n      if (failed.length) {\n        failed.forEach((item) => {\n          const feedbackMsg = gettext('Failed to send to {email_placeholder}: {errorMsg_placeholder}')\n            .replace('{email_placeholder}', item.email)\n            .replace('{errorMsg_placeholder}', item.error_msg);\n          toaster.warning(feedbackMsg);\n        });\n      }\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        btnDisabled: false,\n        sending: false,\n        errorMsg: errorMsg\n      });\n    });\n  };\n\n  render() {\n    const { emails, msg, errorMsg, btnDisabled, sending } = this.state;\n    return (\n      <Form>\n        <FormGroup>\n          <Label htmlFor=\"emails\" className=\"text-secondary font-weight-normal\">{gettext('Send to:')}</Label>\n          <input\n            type=\"text\"\n            id=\"emails\"\n            className=\"form-control w-75\"\n            value={emails}\n            onChange={this.handleEmailsInputChange}\n            placeholder={gettext('Emails, separated by \\',\\'')}\n          />\n        </FormGroup>\n        <FormGroup>\n          <Label htmlFor=\"msg\" className=\"text-secondary font-weight-normal\">{gettext('Message (optional):')}</Label>\n          <textarea\n            className=\"form-control w-75\"\n            id=\"msg\"\n            value={msg}\n            onChange={this.handleMsgInputChange}\n          ></textarea>\n        </FormGroup>\n        {errorMsg && <p className=\"error\">{errorMsg}</p>}\n        <Button color=\"primary\" onClick={EvalProFunc(this.sendLink)} disabled={btnDisabled} className=\"mr-2\">{gettext('Send')}</Button>\n        <Button color=\"secondary\" onClick={this.props.toggleSendLink}>{gettext('Cancel')}</Button>\n        {sending && <p className=\"mt-2\">{gettext('Sending...')}</p>}\n      </Form>\n    );\n  }\n}\n\nSendLink.propTypes = propTypes;\n\nexport default SendLink;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/custom-permission/edit-custom-permission.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/custom-permission/list-custom-permissions.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toast/toast.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/list-created-files-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/tree-view/tree-node-view.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/context-menu/context-menu.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/context-menu/actions.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/set-link-expiration.js",["4634","4635","4636","4637","4638"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { FormGroup, Label, Input, InputGroup, InputGroupAddon, InputGroupText, FormText } from 'reactstrap';\nimport { gettext } from '../utils/constants';\nimport { Utils } from '../utils/utils';\nimport DateTimePicker from './date-and-time-picker';\n\nconst propTypes = {\n  minDays: PropTypes.number.isRequired,\n  maxDays: PropTypes.number.isRequired,\n  defaultDays: PropTypes.number.isRequired,\n  expType: PropTypes.string.isRequired,\n  setExpType: PropTypes.func.isRequired,\n  expireDays: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number\n  ]),\n  onExpireDaysChanged: PropTypes.func.isRequired,\n  expDate: PropTypes.object,\n  onExpDateChanged: PropTypes.func.isRequired\n};\n\nconst inputWidth = Utils.isDesktop() ? 250 : 210;\n\nclass SetLinkExpiration extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    const { minDays, maxDays, defaultDays } = this.props;\n    this.isExpireDaysNoLimit = (minDays === 0 && maxDays === 0 && defaultDays == 0);\n\n    let expirationLimitTip = '';\n    if (minDays !== 0 && maxDays !== 0) {\n      expirationLimitTip = gettext('{minDays_placeholder} - {maxDays_placeholder} days')\n        .replace('{minDays_placeholder}', minDays)\n        .replace('{maxDays_placeholder}', maxDays);\n    } else if (minDays !== 0 && maxDays === 0) {\n      expirationLimitTip = gettext('Greater than or equal to {minDays_placeholder} days')\n        .replace('{minDays_placeholder}', minDays);\n    } else if (minDays === 0 && maxDays !== 0) {\n      expirationLimitTip = gettext('Less than or equal to {maxDays_placeholder} days')\n        .replace('{maxDays_placeholder}', maxDays);\n    }\n    this.expirationLimitTip = expirationLimitTip;\n  }\n\n  disabledDate = (current) => {\n    if (!current) {\n      // allow empty select\n      return false;\n    }\n\n    if (this.isExpireDaysNoLimit) {\n      return current.isBefore(moment(), 'day');\n    }\n\n    const { minDays, maxDays } = this.props;\n    const startDay = moment().add(minDays, 'days');\n    const endDay = moment().add(maxDays, 'days');\n    if (minDays !== 0 && maxDays !== 0) {\n      return current.isBefore(startDay, 'day') || current.isAfter(endDay, 'day');\n    } else if (minDays !== 0 && maxDays === 0) {\n      return current.isBefore(startDay, 'day');\n    } else if (minDays === 0 && maxDays !== 0) {\n      return current.isBefore(moment(), 'day') || current.isAfter(endDay, 'day');\n    }\n  };\n\n  render() {\n    const {\n      expType, setExpType,\n      expireDays, onExpireDaysChanged,\n      expDate, onExpDateChanged\n    } = this.props;\n    return (\n      <Fragment>\n        <FormGroup check>\n          <Label check>\n            <Input type=\"radio\" name=\"set-exp\" value=\"by-days\" checked={expType == 'by-days'} onChange={setExpType} className=\"mr-1\" />\n            <span>{gettext('Expiration days')}</span>\n          </Label>\n          {expType == 'by-days' && (\n            <Fragment>\n              <InputGroup style={{width: inputWidth}}>\n                <Input type=\"text\" value={expireDays} onChange={onExpireDaysChanged} />\n                <InputGroupAddon addonType=\"append\">\n                  <InputGroupText>{gettext('days')}</InputGroupText>\n                </InputGroupAddon>\n              </InputGroup>\n              {!this.isExpireDaysNoLimit && (\n                <FormText color=\"muted\">{this.expirationLimitTip}</FormText>\n              )}\n            </Fragment>\n          )}\n        </FormGroup>\n        <FormGroup check>\n          <Label check>\n            <Input type=\"radio\" name=\"set-exp\" value=\"by-date\" checked={expType == 'by-date'} onChange={setExpType} className=\"mr-1\" />\n            <span>{gettext('Expiration time')}</span>\n          </Label>\n          {expType == 'by-date' && (\n            <DateTimePicker\n              inputWidth={inputWidth}\n              disabledDate={this.disabledDate}\n              value={expDate}\n              onChange={onExpDateChanged}\n            />\n          )}\n        </FormGroup>\n      </Fragment>\n    );\n  }\n}\n\nSetLinkExpiration.propTypes = propTypes;\n\nexport default SetLinkExpiration;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/shared-link.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/wiki-dir-list-view/wiki-dir-list-item.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/constants/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/change-repo-password-dialog.js",["4639"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport { gettext, repoPasswordMinLength } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ChangeRepoPasswordDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      oldPassword: '',\n      newPassword: '',\n      newPasswordAgain: '',\n      submitBtnDisabled: false,\n      errorMsg: ''\n    };\n  }\n\n  handleOldPasswordInputChange = (e) => {\n    this.setState({\n      oldPassword: e.target.value\n    });\n  };\n\n  handleNewPasswordInputChange = (e) => {\n    this.setState({\n      newPassword: e.target.value\n    });\n  };\n\n  handleNewPasswordAgainInputChange = (e) => {\n    this.setState({\n      newPasswordAgain: e.target.value\n    });\n  };\n\n  formSubmit = (e) => {\n    const { oldPassword, newPassword, newPasswordAgain } = this.state;\n    if (!oldPassword) {\n      this.setState({\n        errorMsg: gettext('Please enter the old password')\n      });\n      return false;\n    }\n    if (!newPassword) {\n      this.setState({\n        errorMsg: gettext('Please enter a new password')\n      });\n      return false;\n    }\n    if (newPassword.length < repoPasswordMinLength) {\n      this.setState({\n        errorMsg: gettext('New password is too short')\n      });\n      return false;\n    }\n    if (!newPasswordAgain) {\n      this.setState({\n        errorMsg: gettext('Please enter the new password again')\n      });\n      return false;\n    }\n    if (newPassword != newPasswordAgain) {\n      this.setState({\n        errorMsg: gettext('New passwords don\\'t match')\n      });\n      return false;\n    }\n\n    this.setState({\n      submitBtnDisabled: true\n    });\n    seafileAPI.changeEncryptedRepoPassword(this.props.repoID, oldPassword, newPassword)\n      .then(() => {\n        this.props.toggleDialog();\n        toaster.success(gettext('Successfully changed library password.'));\n      }).catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({\n          errorMsg: errorMsg,\n          submitBtnDisabled: false\n        });\n      });\n  };\n\n\n  render() {\n    const { repoName, toggleDialog } = this.props;\n\n    let title = gettext('Change Password of Library {placeholder}');\n    title = title.replace('{placeholder}', '<span class=\"op-target text-truncate mx-1\">' + Utils.HTMLescape(repoName) + '</span>');\n\n    return (\n      <Modal isOpen={true} style={{height: 'auto'}} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>\n          <span dangerouslySetInnerHTML={{__html: title}} className=\"d-flex mw-100\"></span>\n        </ModalHeader>\n        <ModalBody>\n          <form id=\"repo-change-passwd-form\" action=\"\" method=\"post\">\n            <label htmlFor=\"passwd\">{gettext('Old Password')}</label><br />\n            <input type=\"password\" name=\"old_passwd\" className=\"form-control\" id=\"passwd\" value={this.state.oldPassword} onChange={this.handleOldPasswordInputChange} /><br />\n            <label htmlFor=\"new-passwd\">{gettext('New Password')}</label><span className=\"tip\">{gettext('(at least {placeholder} characters)').replace('{placeholder}', repoPasswordMinLength)}</span><br />\n            <input type=\"password\" name=\"new_passwd\" className=\"form-control\" id=\"new-passwd\" value={this.state.newPassword} onChange={this.handleNewPasswordInputChange} /><br />\n            <label htmlFor=\"new-passwd-again\">{gettext('New Password Again')}</label><br />\n            <input type=\"password\" name=\"new_passwd_again\" className=\"form-control\" id=\"new-passwd-again\" value={this.state.newPasswordAgain} onChange={this.handleNewPasswordAgainInputChange} /><br />\n            {this.state.errorMsg && <Alert color=\"danger\">{this.state.errorMsg}</Alert>}\n          </form>\n        </ModalBody>\n        <ModalFooter>\n          <button className=\"btn btn-primary\" disabled={this.state.submitBtnDisabled} onClick={this.formSubmit}>{gettext('Submit')}</button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nChangeRepoPasswordDialog.propTypes = propTypes;\n\nexport default ChangeRepoPasswordDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/lib-history-setting-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/lib-sub-folder-permission-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/repo-api-token-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/lib-old-files-auto-del-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/repo-seatable-integration-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/label-repo-state-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/reset-encrypted-repo-password-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/my-libs/mylib-repo-menu.js",["4640","4641","4642","4643","4644","4645","4646"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext, isPro, folderPermEnabled, enableRepoSnapshotLabel, enableResetEncryptedRepoPassword, isEmailConfigured, enableRepoAutoDel, enableSeaTableIntegration } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  isPC: PropTypes.bool,\n  repo: PropTypes.object.isRequired,\n  isStarred: PropTypes.bool,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n};\n\nclass MylibRepoMenu extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemMenuShow: false,\n      isAdvancedMenuShown: false\n    };\n  }\n\n  onMenuItemClick = (e) => {\n    let operation = Utils.getEventData(e, 'toggle');\n    this.props.onMenuItemClick(operation);\n  };\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onMenuItemClick(e);\n    }\n  };\n\n  onDropdownToggleClick = (e) => {\n    this.toggleOperationMenu(e);\n  };\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onDropdownToggleClick(e);\n    }\n  };\n\n  toggleOperationMenu = (e) => {\n    let dataset = e.target ? e.target.dataset : null;\n    if (dataset && dataset.toggle && dataset.toggle === 'Rename') {\n      this.setState({isItemMenuShow: !this.state.isItemMenuShow});\n      return;\n    }\n\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  };\n\n  toggleAdvancedMenuShown = (e) => {\n    this.setState({ isAdvancedMenuShown: true });\n  };\n\n  toggleAdvancedMenu = (e) => {\n    e.stopPropagation();\n    this.setState({ isAdvancedMenuShown: !this.state.isAdvancedMenuShown }, () => {\n      this.toggleOperationMenu(e);\n    });\n  };\n\n  onDropDownMouseMove = (e) => {\n    if (this.state.isAdvancedMenuShown && e.target && e.target.className === 'dropdown-item') {\n      this.setState({\n        isAdvancedMenuShown: false\n      });\n    }\n  };\n\n  generatorOperations = () => {\n    let repo = this.props.repo;\n    let showResetPasswordMenuItem = isPro && repo.encrypted && enableResetEncryptedRepoPassword && isEmailConfigured;\n    let operations = ['Rename', 'Transfer'];\n    if (folderPermEnabled) {\n      operations.push('Folder Permission');\n    }\n    operations.push('Share Admin', 'Divider');\n\n    if (repo.encrypted) {\n      operations.push('Change Password');\n    }\n    if (showResetPasswordMenuItem) {\n      operations.push('Reset Password');\n    }\n\n    if (isPro) {\n      const monitorOp = repo.monitored ? 'Unwatch File Changes' : 'Watch File Changes';\n      operations.push(monitorOp);\n    }\n\n    operations.push('Divider', 'History Setting', 'Advanced');\n    // Remove adjacent excess 'Divider'\n    for (let i = 0; i < operations.length; i++) {\n      if (operations[i] === 'Divider' && operations[i + 1] === 'Divider') {\n        operations.splice(i, 1);\n        i--;\n      }\n    }\n    return operations;\n  };\n\n  getAdvancedOperations = () => {\n    const operations = [];\n    operations.push('API Token');\n    if (this.props.isPC && enableRepoSnapshotLabel) {\n      operations.push('Label Current State');\n    }\n    if (enableRepoAutoDel) {\n      operations.push('Old Files Auto Delete');\n    }\n    if (enableSeaTableIntegration) {\n      operations.push('SeaTable integration');\n    }\n    return operations;\n  };\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Star':\n        translateResult = gettext('Star');\n        break;\n      case 'Unstar':\n        translateResult = gettext('Unstar');\n        break;\n      case 'Share':\n        translateResult = gettext('Share');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Rename':\n        translateResult = gettext('Rename');\n        break;\n      case 'Transfer':\n        translateResult = gettext('Transfer');\n        break;\n      case 'History Setting':\n        translateResult = gettext('History Setting');\n        break;\n      case 'Change Password':\n        translateResult = gettext('Change Password');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n      case 'Watch File Changes':\n        translateResult = gettext('Watch File Changes');\n        break;\n      case 'Unwatch File Changes':\n        translateResult = gettext('Unwatch File Changes');\n        break;\n      case 'Folder Permission':\n        translateResult = gettext('Folder Permission');\n        break;\n      case 'Label Current State':\n        translateResult = gettext('Label Current State');\n        break;\n      case 'API Token':\n        translateResult = 'API Token'; // translation is not needed here\n        break;\n      case 'Share Admin':\n        translateResult = gettext('Share Admin');\n        break;\n      case 'Old Files Auto Delete':\n        translateResult = gettext('Auto Deletion Setting');\n        break;\n      case 'Advanced':\n        translateResult = gettext('Advanced');\n        break;\n      case 'SeaTable integration':\n        translateResult = gettext('SeaTable integration');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  };\n\n  render() {\n    let operations = this.generatorOperations();\n    const advancedOperations = this.getAdvancedOperations();\n\n    // pc menu\n    if (this.props.isPC) {\n      return (\n        <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n          <DropdownToggle\n            tag=\"i\"\n            role=\"button\"\n            tabIndex=\"0\"\n            className=\"sf-dropdown-toggle sf2-icon-caret-down\"\n            title={gettext('More operations')}\n            aria-label={gettext('More operations')}\n            onClick={this.onDropdownToggleClick}\n            onKeyDown={this.onDropdownToggleKeyDown}\n            data-toggle=\"dropdown\"\n          />\n          <DropdownMenu onMouseMove={this.onDropDownMouseMove}>\n            {operations.map((item, index)=> {\n              if (item == 'Divider') {\n                return <DropdownItem key={index} divider />;\n              } else if (item == 'Advanced') {\n                return (\n                  <Dropdown\n                    key={index}\n                    direction=\"right\"\n                    className=\"w-100\"\n                    isOpen={this.state.isAdvancedMenuShown}\n                    toggle={this.toggleAdvancedMenu}\n                    onMouseMove={(e) => {e.stopPropagation();}}\n                  >\n                    <DropdownToggle\n                      caret\n                      className=\"dropdown-item font-weight-normal rounded-0 d-flex justify-content-between align-items-center pr-2\"\n                      onMouseEnter={this.toggleAdvancedMenuShown}\n                    >\n                      {this.translateOperations(item)}\n                    </DropdownToggle>\n                    <DropdownMenu>\n                      {advancedOperations.map((item, index)=> {\n                        return (<DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateOperations(item)}</DropdownItem>);\n                      })}\n                    </DropdownMenu>\n                  </Dropdown>\n                );\n              } else {\n                return (<DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateOperations(item)}</DropdownItem>);\n              }\n            })}\n          </DropdownMenu>\n        </Dropdown>\n      );\n    }\n\n    // mobile menu\n    operations.pop(); // removed the last item 'Advanced'\n    operations.unshift('Delete');\n    operations.unshift('Share');\n    this.props.isStarred ? operations.unshift('Unstar') : operations.unshift('Star');\n\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n          title={gettext('More operations')}\n          aria-label={gettext('More operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n        />\n        <div className={`${this.state.isItemMenuShow ? '' : 'd-none'}`} onClick={this.toggleOperationMenu}>\n          <div className=\"mobile-operation-menu-bg-layer\"></div>\n          <div className=\"mobile-operation-menu\">\n            {operations.map((item, index) => {\n              if (item != 'Divider') {\n                return (<DropdownItem key={index} className=\"mobile-menu-item\" data-toggle={item} onClick={this.onMenuItemClick}>{this.translateOperations(item)}</DropdownItem>);\n              }\n              return null;\n            })}\n          </div>\n        </div>\n      </Dropdown>\n    );\n  }\n}\n\nMylibRepoMenu.propTypes = propTypes;\n\nexport default MylibRepoMenu;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/repo-share-admin-dialog.js",["4647","4648"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, TabContent, TabPane, Nav, NavItem, NavLink } from 'reactstrap';\nimport { gettext, canGenerateShareLink, canGenerateUploadLink } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport RepoShareAdminShareLinks from './repo-share-admin/share-links';\nimport RepoShareAdminUploadLinks from './repo-share-admin/upload-links';\nimport RepoShareAdminUserShares from './repo-share-admin/user-shares';\nimport RepoShareAdminGroupShares from './repo-share-admin/group-shares';\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass RepoShareAdminDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.enableShareLink = !this.props.repo.encrypted && canGenerateShareLink;\n    this.enableUploadLink = !this.props.repo.encrypted && canGenerateUploadLink;\n    this.state = {\n      activeTab: this.getInitialActiveTab()\n    };\n  }\n\n  getInitialActiveTab = () => {\n    if (this.enableShareLink) {\n      return 'shareLink';\n    } else if (this.enableUploadLink) {\n      return 'uploadLink';\n    } else {\n      return 'shareToUser';\n    }\n  };\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({ activeTab: tab });\n    }\n  };\n\n  onTabKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      e.target.click();\n    }\n  };\n\n  render() {\n    const { activeTab } = this.state;\n    const { repo_name: repoName } = this.props.repo;\n    let title = gettext('{placeholder} Share Admin');\n    title = title.replace('{placeholder}', '<span class=\"op-target text-truncate mx-1\">' + Utils.HTMLescape(repoName) + '</span>');\n    return (\n      <div>\n        <Modal isOpen={true} style={{maxWidth: '760px'}} className=\"share-dialog\" toggle={this.props.toggleDialog}>\n          <ModalHeader toggle={this.props.toggleDialog}>\n            <span dangerouslySetInnerHTML={{__html: title}} className=\"d-flex mw-100\"></span>\n          </ModalHeader>\n          <ModalBody className=\"dialog-list-container share-dialog-content\" role=\"tablist\">\n            <Fragment>\n              <div className=\"share-dialog-side\">\n                <Nav pills>\n                  {this.enableShareLink &&\n                  <NavItem role=\"tab\" aria-selected={activeTab === 'shareLink'} aria-controls=\"share-link-panel\">\n                    <NavLink className={activeTab === 'shareLink' ? 'active' : ''} onClick={(this.toggle.bind(this, 'shareLink'))} tabIndex=\"0\" onKeyDown={this.onTabKeyDown}>\n                      {gettext('Share Links')}\n                    </NavLink>\n                  </NavItem>\n                  }\n                  {this.enableUploadLink &&\n                    <NavItem role=\"tab\" aria-selected={activeTab === 'uploadLink'} aria-controls=\"upload-link-panel\">\n                      <NavLink className={activeTab === 'uploadLink' ? 'active' : ''} onClick={this.toggle.bind(this, 'uploadLink')} tabIndex=\"0\" onKeyDown={this.onTabKeyDown}>\n                        {gettext('Upload Links')}\n                      </NavLink>\n                    </NavItem>\n                  }\n                  <NavItem role=\"tab\" aria-selected={activeTab === 'shareToUser'} aria-controls=\"share-to-user-panel\">\n                    <NavLink className={activeTab === 'shareToUser' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareToUser')} tabIndex=\"0\" onKeyDown={this.onTabKeyDown}>\n                      {gettext('User Shares')}\n                    </NavLink>\n                  </NavItem>\n                  <NavItem role=\"tab\" aria-selected={activeTab === 'shareToGroup'} aria-controls=\"share-to-group-panel\">\n                    <NavLink className={activeTab === 'shareToGroup' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareToGroup')} tabIndex=\"0\" onKeyDown={this.onTabKeyDown}>\n                      {gettext('Group Shares')}\n                    </NavLink>\n                  </NavItem>\n                </Nav>\n              </div>\n              <div className=\"share-dialog-main\">\n                <TabContent activeTab={this.state.activeTab}>\n                  {(this.enableShareLink && activeTab === 'shareLink') &&\n                    <TabPane tabId=\"shareLink\" role=\"tabpanel\" id=\"share-link-panel\">\n                      <RepoShareAdminShareLinks\n                        repo={this.props.repo}\n                      />\n                    </TabPane>\n                  }\n                  {(this.enableUploadLink && activeTab === 'uploadLink') &&\n                    <TabPane tabId=\"uploadLink\" role=\"tabpanel\" id=\"upload-link-panel\">\n                      <RepoShareAdminUploadLinks\n                        repo={this.props.repo}\n                      />\n                    </TabPane>\n                  }\n                  {activeTab === 'shareToUser' &&\n                    <TabPane tabId=\"shareToUser\" role=\"tabpanel\" id=\"share-to-user-panel\">\n                      <RepoShareAdminUserShares\n                        repo={this.props.repo}\n                      />\n                    </TabPane>\n                  }\n                  {activeTab === 'shareToGroup' &&\n                    <TabPane tabId=\"shareToGroup\" role=\"tabpanel\" id=\"share-to-group-panel\">\n                      <RepoShareAdminGroupShares\n                        repo={this.props.repo}\n                      />\n                    </TabPane>\n                  }\n                </TabContent>\n              </div>\n            </Fragment>\n          </ModalBody>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nRepoShareAdminDialog.propTypes = propTypes;\n\nexport default RepoShareAdminDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/services/generate-share-link-with-password.js",[],["4649","4650"],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/share-link-panel/link-creation.js",["4651","4652","4653","4654","4655","4656","4657","4658","4659","4660","4661","4662"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Button, Form, FormGroup, Label, Input, InputGroup, InputGroupAddon, Alert } from 'reactstrap';\nimport { isPro, gettext, shareLinkExpireDaysMin, shareLinkExpireDaysMax, shareLinkExpireDaysDefault, shareLinkForceUsePassword, shareLinkPasswordMinLength, shareLinkPasswordStrengthLevel } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport ShareLink from '../../models/share-link';\nimport toaster from '../toast';\nimport SetLinkExpiration from '../set-link-expiration';\n\nconst propTypes = {\n  itemPath: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  userPerm: PropTypes.string,\n  type: PropTypes.string.isRequired,\n  permissionOptions: PropTypes.array.isRequired,\n  currentPermission: PropTypes.string.isRequired,\n  updateAfterCreation: PropTypes.func.isRequired,\n  setMode: PropTypes.func.isRequired,\n};\n\nconst inputWidth = Utils.isDesktop() ? 250 : 210;\nconst SHARE_LINK_MAX_NUMBER = 200;\n\nclass LinkCreation extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.isExpireDaysNoLimit = (shareLinkExpireDaysMin === 0 && shareLinkExpireDaysMax === 0 && shareLinkExpireDaysDefault == 0);\n    this.defaultExpireDays = this.isExpireDaysNoLimit ? '' : shareLinkExpireDaysDefault;\n\n    this.state = {\n      linkAmount: '',\n      isShowPasswordInput: shareLinkForceUsePassword ? true : false,\n      isPasswordVisible: false,\n      isExpireChecked: !this.isExpireDaysNoLimit,\n      expType: 'by-days',\n      expireDays: this.defaultExpireDays,\n      expDate: null,\n      password: '',\n      passwdnew: '',\n      errorInfo: '',\n      currentPermission: props.currentPermission\n    };\n  }\n\n  setExpType = (e) => {\n    this.setState({\n      expType: e.target.value\n    });\n  };\n\n  onExpDateChanged = (value) => {\n    this.setState({\n      expDate: value\n    });\n  };\n\n  onPasswordInputChecked = () => {\n    this.setState({\n      isShowPasswordInput: !this.state.isShowPasswordInput,\n      password: '',\n      passwdnew: '',\n      errorInfo: ''\n    });\n  };\n\n  togglePasswordVisible = () => {\n    this.setState({\n      isPasswordVisible: !this.state.isPasswordVisible\n    });\n  };\n\n  generatePassword = () => {\n    let val = Utils.generatePassword(shareLinkPasswordMinLength);\n    this.setState({\n      password: val,\n      passwdnew: val\n    });\n  };\n\n  inputPassword = (e) => {\n    let passwd = e.target.value.trim();\n    this.setState({password: passwd});\n  };\n\n  inputPasswordNew = (e) => {\n    let passwd = e.target.value.trim();\n    this.setState({passwdnew: passwd});\n  };\n\n  setPermission = (e) => {\n    this.setState({currentPermission: e.target.value});\n  };\n\n  generateShareLink = () => {\n    let isValid = this.validateParamsInput();\n    if (isValid) {\n      this.setState({errorInfo: ''});\n      let { type, itemPath, repoID } = this.props;\n      let { linkAmount, isShowPasswordInput, password, isExpireChecked, expType, expireDays, expDate } = this.state;\n      let permissions;\n      if (isPro) {\n        const permissionDetails = Utils.getShareLinkPermissionObject(this.state.currentPermission).permissionDetails;\n        permissions = JSON.stringify(permissionDetails);\n      }\n      let expirationTime = '';\n      if (isExpireChecked) {\n        if (expType == 'by-days') {\n          expirationTime = moment().add(parseInt(expireDays), 'days').format();\n        } else {\n          expirationTime = expDate.format();\n        }\n      }\n\n      let request;\n      if (type == 'batch') {\n        const autoGeneratePassword = shareLinkForceUsePassword || isShowPasswordInput;\n        request = seafileAPI.batchCreateMultiShareLink(repoID, itemPath, linkAmount, autoGeneratePassword, expirationTime, permissions);\n      } else {\n        request = seafileAPI.createMultiShareLink(repoID, itemPath, password, expirationTime, permissions);\n      }\n\n      request.then((res) => {\n        if (type == 'batch') {\n          const newLinks = res.data.map(item => new ShareLink(item));\n          this.props.updateAfterCreation(newLinks);\n        } else {\n          const newLink = new ShareLink(res.data);\n          this.props.updateAfterCreation(newLink);\n        }\n      }).catch((error) => {\n        let resp_data = error.response.data;\n        let errMessage = resp_data && resp_data['error_msg'];\n        if (errMessage === 'Folder permission denied.') {\n          this.setState({errorInfo: gettext('Share links cannot be generated because \"Invisible\", \"Online Read-Write\" or \"Online Read-Only\" is set for you on some folder(s) in the library.')});\n        } else {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        }\n      });\n    }\n  };\n\n  onExpireChecked = (e) => {\n    this.setState({isExpireChecked: e.target.checked});\n  };\n\n  onExpireDaysChanged = (e) => {\n    let day = e.target.value.trim();\n    this.setState({expireDays: day});\n  };\n\n  validateParamsInput = () => {\n    const { type } = this.props;\n    let { linkAmount, isShowPasswordInput, password, passwdnew, isExpireChecked, expType, expireDays, expDate } = this.state;\n\n    if (type == 'batch') {\n      if (!Number.isInteger(parseInt(linkAmount)) || parseInt(linkAmount) <= 1) {\n        this.setState({errorInfo: gettext('Please enter an integer bigger than 1 as number of links.')});\n        return false;\n      }\n      if (parseInt(linkAmount) > SHARE_LINK_MAX_NUMBER) {\n        this.setState({errorInfo: gettext('Please enter an integer not bigger than {max_number} as number of links.').replace('{max_number}', SHARE_LINK_MAX_NUMBER)});\n        return false;\n      }\n    }\n\n    if (type == 'single' && isShowPasswordInput) {\n      if (password.length === 0) {\n        this.setState({errorInfo: gettext('Please enter a password.')});\n        return false;\n      }\n      if (password.length < shareLinkPasswordMinLength) {\n        this.setState({errorInfo: gettext('The password is too short.')});\n        return false;\n      }\n      if (password !== passwdnew) {\n        this.setState({errorInfo: gettext('Passwords don\\'t match')});\n        return false;\n      }\n      if (Utils.getStrengthLevel(password) < shareLinkPasswordStrengthLevel) {\n        this.setState({errorInfo: gettext('The password is too weak. It should include at least {passwordStrengthLevel} of the following: number, upper letter, lower letter and other symbols.').replace('{passwordStrengthLevel}', shareLinkPasswordStrengthLevel)});\n        return false;\n      }\n    }\n\n    if (isExpireChecked) {\n      if (expType == 'by-date') {\n        if (!expDate) {\n          this.setState({errorInfo: gettext('Please select an expiration time')});\n          return false;\n        }\n        return true;\n      }\n\n      // by days\n      let reg = /^\\d+$/;\n      if (!expireDays) {\n        this.setState({errorInfo: gettext('Please enter days')});\n        return false;\n      }\n      if (!reg.test(expireDays)) {\n        this.setState({errorInfo: gettext('Please enter a non-negative integer')});\n        return false;\n      }\n\n      expireDays = parseInt(expireDays);\n      let minDays = shareLinkExpireDaysMin;\n      let maxDays = shareLinkExpireDaysMax;\n\n      if (minDays !== 0 && maxDays == 0) {\n        if (expireDays < minDays) {\n          this.setState({errorInfo: 'Please enter valid days'});\n          return false;\n        }\n      }\n\n      if (minDays === 0 && maxDays !== 0 ) {\n        if (expireDays > maxDays) {\n          this.setState({errorInfo: 'Please enter valid days'});\n          return false;\n        }\n      }\n\n      if (minDays !== 0 && maxDays !== 0) {\n        if (expireDays < minDays || expireDays > maxDays) {\n          this.setState({errorInfo: 'Please enter valid days'});\n          return false;\n        }\n      }\n\n      this.setState({expireDays: expireDays});\n    }\n\n    return true;\n  };\n\n  onLinkAmountChange = (e) => {\n    this.setState({\n      linkAmount: e.target.value\n    });\n  };\n\n  goBack = () => {\n    this.props.setMode('');\n  };\n\n  render() {\n    const { userPerm, type, permissionOptions  } = this.props;\n    const { isCustomPermission } = Utils.getUserPermission(userPerm);\n\n    return (\n      <Fragment>\n        <div className=\"d-flex align-items-center pb-2 border-bottom\">\n          <h6 className=\"font-weight-normal m-0\">\n            <button className=\"fa fa-arrow-left back-icon border-0 bg-transparent text-secondary p-0 mr-2\" onClick={this.goBack} title={gettext('Back')} aria-label={gettext('Back')}></button>\n            {type == 'batch' ? gettext('Generate links in batch') : gettext('Generate Link')}</h6>\n        </div>\n        <Form className=\"pt-4\">\n          {type == 'batch' && (\n            <FormGroup>\n              <Label for=\"link-number\" className=\"p-0\">{gettext('Number of links')}</Label>\n              <Input type=\"number\" id=\"link-number\" value={this.state.linkAmount} onChange={this.onLinkAmountChange} style={{width: inputWidth}} />\n            </FormGroup>\n          )}\n          <FormGroup check>\n            {shareLinkForceUsePassword ? (\n              <Label check>\n                <Input type=\"checkbox\" checked readOnly disabled />\n                <span>{gettext('Add password protection')}</span>\n              </Label>\n            ) : (\n              <Label check>\n                <Input type=\"checkbox\" checked={this.state.isShowPasswordInput} onChange={this.onPasswordInputChecked} />\n                <span>{gettext('Add password protection')}</span>\n              </Label>\n            )}\n            {type != 'batch' && this.state.isShowPasswordInput &&\n              <div className=\"ml-4\">\n                <FormGroup>\n                  <Label for=\"passwd\">{gettext('Password')}</Label>\n                  <span className=\"tip\">{gettext('(at least {passwordMinLength} characters and includes {passwordStrengthLevel} of the following: number, upper letter, lower letter and other symbols)').replace('{passwordMinLength}', shareLinkPasswordMinLength).replace('{passwordStrengthLevel}', shareLinkPasswordStrengthLevel)}</span>\n                  <InputGroup style={{width: inputWidth}}>\n                    <Input id=\"passwd\" type={this.state.isPasswordVisible ? 'text' : 'password'} value={this.state.password || ''} onChange={this.inputPassword} />\n                    <InputGroupAddon addonType=\"append\">\n                      <Button onClick={this.togglePasswordVisible}><i className={`link-operation-icon fas ${this.state.isPasswordVisible ? 'fa-eye': 'fa-eye-slash'}`}></i></Button>\n                      <Button onClick={this.generatePassword}><i className=\"link-operation-icon fas fa-magic\"></i></Button>\n                    </InputGroupAddon>\n                  </InputGroup>\n                </FormGroup>\n                <FormGroup>\n                  <Label for=\"passwd-again\">{gettext('Password again')}</Label>\n                  <Input id=\"passwd-again\" style={{width: inputWidth}} type={this.state.isPasswordVisible ? 'text' : 'password'} value={this.state.passwdnew || ''} onChange={this.inputPasswordNew} />\n                </FormGroup>\n              </div>\n            }\n          </FormGroup>\n          <FormGroup check>\n            <Label check>\n              {this.isExpireDaysNoLimit ? (\n                <Input type=\"checkbox\" onChange={this.onExpireChecked} />\n              ) : (\n                <Input type=\"checkbox\" checked readOnly disabled />\n              )}\n              <span>{gettext('Add auto expiration')}</span>\n            </Label>\n            {this.state.isExpireChecked &&\n              <div className=\"ml-4\">\n                <SetLinkExpiration\n                  minDays={shareLinkExpireDaysMin}\n                  maxDays={shareLinkExpireDaysMax}\n                  defaultDays={shareLinkExpireDaysDefault}\n                  expType={this.state.expType}\n                  setExpType={this.setExpType}\n                  expireDays={this.state.expireDays}\n                  onExpireDaysChanged={this.onExpireDaysChanged}\n                  expDate={this.state.expDate}\n                  onExpDateChanged={this.onExpDateChanged}\n                />\n              </div>\n            }\n          </FormGroup>\n          {(isPro && !isCustomPermission) && (\n            <FormGroup check>\n              <Label check>\n                <span>{gettext('Set permission')}</span>\n              </Label>\n              {permissionOptions.map((item, index) => {\n                return (\n                  <FormGroup check className=\"ml-4\" key={index}>\n                    <Label check>\n                      <Input type=\"radio\" name=\"permission\" value={item} checked={this.state.currentPermission == item} onChange={this.setPermission} className=\"mr-1\" />\n                      {Utils.getShareLinkPermissionObject(item).text}\n                    </Label>\n                  </FormGroup>\n                );\n              })}\n            </FormGroup>\n          )}\n          {this.state.errorInfo && <Alert color=\"danger\" className=\"mt-2\">{gettext(this.state.errorInfo)}</Alert>}\n          <Button onClick={this.generateShareLink} className=\"mt-2 ml-1 mb-1\">{gettext('Generate')}</Button>\n        </Form>\n      </Fragment>\n    );\n  }\n}\n\nLinkCreation.propTypes = propTypes;\n\nexport default LinkCreation;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/share-link-panel/link-list.js",["4663","4664","4665"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport EmptyTip from '../empty-tip';\nimport LinkItem from './link-item';\nimport CommonOperationConfirmationDialog from '../../components/dialog/common-operation-confirmation-dialog';\nimport Loading from '../../components/loading';\nimport { EvalProFunc, EvalQuotaShareLinks } from '../../services/ad';\n\nconst propTypes = {\n  shareLinks: PropTypes.array.isRequired,\n  permissionOptions: PropTypes.array.isRequired,\n  setMode: PropTypes.func.isRequired,\n  showLinkDetails: PropTypes.func.isRequired,\n  toggleSelectAllLinks: PropTypes.func.isRequired,\n  toggleSelectLink: PropTypes.func.isRequired,\n  deleteLink: PropTypes.func.isRequired,\n  deleteShareLinks: PropTypes.func.isRequired,\n  isLoadingMore: PropTypes.bool.isRequired,\n  handleScroll: PropTypes.func.isRequired\n};\n\nclass LinkList extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isDeleteShareLinksDialogOpen: false\n    };\n  }\n\n  toggleDeleteShareLinksDialog = () => {\n    this.setState({ isDeleteShareLinksDialogOpen: !this.state.isDeleteShareLinksDialogOpen });\n  };\n\n  toggleSelectAllLinks = (e) => {\n    this.props.toggleSelectAllLinks(e.target.checked);\n  };\n\n  cancelSelectAllLinks = () => {\n    this.props.toggleSelectAllLinks(false);\n  };\n\n  exportSelectedLinks = () => {\n    const { shareLinks } = this.props;\n    const selectedLinks = shareLinks.filter(item => item.isSelected);\n    let url = `${siteRoot}share/link/export-excel/?`;\n    url += selectedLinks.map(item => `token=${item.token}`).join('&');\n    location.href = url;\n  };\n\n  render() {\n    const { shareLinks, permissionOptions, isLoadingMore, handleScroll } = this.props;\n    const selectedLinks = shareLinks.filter(item => item.isSelected);\n    const isAllLinksSelected = shareLinks.length == selectedLinks.length;\n\n    return (\n      <Fragment>\n        <div className=\"d-flex justify-content-between align-items-center pb-2 mt-1 pr-1 border-bottom\">\n          <h6 className=\"font-weight-normal m-0\">{gettext('Share Link')}</h6>\n          <div className=\"d-flex\">\n            {selectedLinks.length == 0 ? (\n              <>\n                <button className=\"btn btn-sm btn-outline-primary mr-2\" onClick={EvalQuotaShareLinks(this.props.setMode.bind(this, 'singleLinkCreation'))}>{gettext('Generate Link')}</button>\n                <button className=\"btn btn-sm btn-outline-primary\" onClick={EvalProFunc(this.props.setMode.bind(this, 'linksCreation'))}>{gettext('Generate links in batch')}</button>\n              </>\n            ) : (\n              <>\n                <button className=\"btn btn-sm btn-secondary mr-2\" onClick={this.cancelSelectAllLinks}>{gettext('Cancel')}</button>\n                <button className=\"btn btn-sm btn-secondary mr-2\" onClick={this.toggleDeleteShareLinksDialog}>{gettext('Delete')}</button>\n                <button className=\"btn btn-sm btn-secondary\" onClick={this.exportSelectedLinks}>{gettext('Export')}</button>\n              </>\n            )}\n          </div>\n        </div>\n        {shareLinks.length == 0 ? (\n          <EmptyTip forDialog={true}>\n            <p className=\"text-secondary\">{gettext('No share links')}</p>\n          </EmptyTip>\n        ) : (\n          <div className='share-list-container share-link'>\n            <table className=\"table-place-header\">\n              <thead>\n                <tr>\n                  <th width=\"5%\" className=\"text-center\">\n                    <input type=\"checkbox\" checked={isAllLinksSelected} className=\"vam\" onChange={this.toggleSelectAllLinks} />\n                  </th>\n                  <th width=\"26%\">{gettext('Link')}</th>\n                  <th width=\"30%\">{gettext('Permission')}</th>\n                  <th width=\"25%\">{gettext('Expiration')}</th>\n                  <th width=\"14%\"></th>\n                </tr>\n              </thead>\n            </table>\n            <div className='table-real-container' onScroll={handleScroll}>\n              <table className=\"table-real-content table-thead-hidden\">\n                <thead>\n                  <tr>\n                    <th width=\"5%\" className=\"text-center\"></th>\n                    <th width=\"26%\">{gettext('Link')}</th>\n                    <th width=\"30%\">{gettext('Permission')}</th>\n                    <th width=\"25%\">{gettext('Expiration')}</th>\n                    <th width=\"14%\"></th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {shareLinks.map((item, index) => {\n                    return (\n                      <LinkItem\n                        key={index}\n                        item={item}\n                        permissionOptions={permissionOptions}\n                        showLinkDetails={this.props.showLinkDetails}\n                        toggleSelectLink={this.props.toggleSelectLink}\n                        deleteLink={this.props.deleteLink}\n                      />\n                    );\n                  })}\n                </tbody>\n              </table>\n              {isLoadingMore && <Loading />}\n            </div>\n          </div>\n        )}\n        {this.state.isDeleteShareLinksDialogOpen && (\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete share links')}\n            message={gettext('Are you sure you want to delete the selected share link(s) ?')}\n            executeOperation={this.props.deleteShareLinks}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteShareLinksDialog}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nLinkList.propTypes = propTypes;\n\nexport default LinkList;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/group-members.js",["4666"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Table } from 'reactstrap';\nimport { Utils } from '../utils/utils';\nimport { gettext } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport RoleSelector from './single-selector';\nimport toaster from './toast';\nimport OpIcon from './op-icon';\n\nconst propTypes = {\n  groupMembers: PropTypes.array.isRequired,\n  groupID: PropTypes.string,\n  isOwner: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n  changeMember: PropTypes.func.isRequired,\n  deleteMember: PropTypes.func.isRequired\n};\n\nclass GroupMembers extends React.Component {\n\n  render() {\n    const { groupMembers, changeMember, deleteMember, groupID, isOwner, isItemFreezed, toggleItemFreezed } = this.props;\n    return (\n      <Table size=\"sm\" className=\"manage-members-table\">\n        <thead>\n          <tr>\n            <th width=\"15%\"></th>\n            <th width=\"45%\">{gettext('Name')}</th>\n            <th width=\"30%\">{gettext('Role')}</th>\n            <th width=\"10%\"></th>\n          </tr>\n        </thead>\n        <tbody>\n          {groupMembers.map((item, index) => {\n            return (\n              <Member\n                key={index}\n                item={item}\n                changeMember={changeMember}\n                deleteMember={deleteMember}\n                groupID={groupID}\n                isOwner={isOwner}\n                isItemFreezed={isItemFreezed}\n                toggleItemFreezed={toggleItemFreezed}\n              />\n            );\n          })\n          }\n        </tbody>\n      </Table>\n    );\n  }\n}\n\nGroupMembers.propTypes = propTypes;\n\nconst MemberPropTypes = {\n  item: PropTypes.object.isRequired,\n  changeMember: PropTypes.func.isRequired,\n  deleteMember: PropTypes.func.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n  groupID: PropTypes.string,\n  isOwner: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired\n};\n\nclass Member extends React.PureComponent {\n\n  constructor(props) {\n    super(props);\n    this.roleOptions = [\n      { value: 'Admin', text: gettext('Admin'), isSelected: false },\n      { value: 'Member', text: gettext('Member'), isSelected: false }\n    ];\n    this.state = ({\n      highlight: false,\n    });\n  }\n\n  onChangeUserRole = (roleOption) => {\n    let isAdmin = roleOption.value === 'Admin' ? 'True' : 'False';\n    seafileAPI.setGroupAdmin(this.props.groupID, this.props.item.email, isAdmin).then((res) => {\n      this.props.changeMember(res.data);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  deleteMember = () => {\n    const { item } = this.props;\n    seafileAPI.deleteGroupMember(this.props.groupID, item.email).then((res) => {\n      this.props.deleteMember(item);\n      toaster.success(gettext('Successfully deleted {name}.').replace('{name}', item.name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  handleMouseOver = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({\n      highlight: true,\n    });\n  };\n\n  handleMouseLeave = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({\n      highlight: false,\n    });\n  };\n\n  translateRole = (role) => {\n    if (role === 'Admin') {\n      return gettext('Admin');\n    }\n    else if (role === 'Member') {\n      return gettext('Member');\n    }\n    else if (role === 'Owner') {\n      return gettext('Owner');\n    }\n  };\n\n  render() {\n    const { highlight } = this.state;\n    const { item, isOwner } = this.props;\n    const deleteAuthority = (item.role !== 'Owner' && isOwner === true) || (item.role === 'Member' && isOwner === false);\n\n    const { role: curRole } = item;\n    this.roleOptions = this.roleOptions.map(item => {\n      item.isSelected = item.value == curRole;\n      return item;\n    });\n    const currentSelectedOption = this.roleOptions.filter(item => item.isSelected)[0];\n\n    return(\n      <tr onMouseOver={this.handleMouseOver} onMouseLeave={this.handleMouseLeave} className={this.state.highlight ? 'tr-highlight' : ''} tabIndex=\"0\" onFocus={this.handleMouseOver}>\n        <th scope=\"row\"><img className=\"avatar\" src={item.avatar_url} alt=\"\"/></th>\n        <td>{item.name}</td>\n        <td>\n          {((isOwner === false) || (isOwner === true && item.role === 'Owner')) &&\n            <span className=\"group-admin\">{this.translateRole(item.role)}</span>\n          }\n          {(isOwner === true && item.role !== 'Owner') &&\n            <RoleSelector\n              isDropdownToggleShown={highlight}\n              currentSelectedOption={currentSelectedOption}\n              options={this.roleOptions}\n              selectOption={this.onChangeUserRole}\n              toggleItemFreezed={this.props.toggleItemFreezed}\n            />\n          }\n        </td>\n        <td>\n          {(deleteAuthority && this.state.highlight) &&\n          <OpIcon\n            className=\"action-icon sf2-icon-x3\"\n            title={gettext('Delete')}\n            op={this.deleteMember}\n          />\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nMember.propTypes = MemberPropTypes;\n\n\nexport default GroupMembers;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/share-link-panel/link-details.js",["4667","4668","4669","4670"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport copy from 'copy-to-clipboard';\nimport { Button } from 'reactstrap';\nimport { isPro, gettext, shareLinkExpireDaysMin, shareLinkExpireDaysMax, shareLinkExpireDaysDefault, canSendShareLinkEmail } from '../../utils/constants';\nimport Selector from '../../components/single-selector';\nimport CommonOperationConfirmationDialog from '../../components/dialog/common-operation-confirmation-dialog';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport ShareLink from '../../models/share-link';\nimport toaster from '../toast';\nimport SendLink from '../send-link';\nimport SharedLink from '../shared-link';\nimport SetLinkExpiration from '../set-link-expiration';\nimport { EvalProFunc } from '../../services/ad';\n\nconst propTypes = {\n  sharedLinkInfo: PropTypes.object.isRequired,\n  permissionOptions: PropTypes.array.isRequired,\n  defaultExpireDays: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number\n  ]),\n  showLinkDetails: PropTypes.func.isRequired,\n  updateLink: PropTypes.func.isRequired,\n  deleteLink: PropTypes.func.isRequired,\n  closeShareDialog: PropTypes.func.isRequired\n};\n\nclass LinkDetails extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      storedPasswordVisible: false,\n      isEditingExpiration: false,\n      isExpirationEditIconShow: false,\n      expType: 'by-days',\n      expireDays: this.props.defaultExpireDays,\n      expDate: null,\n      isOpIconShown: false,\n      isLinkDeleteDialogOpen: false,\n      isSendLinkShown: false\n    };\n  }\n\n  onCopySharedLink = () => {\n    const { sharedLinkInfo } = this.props;\n    copy(sharedLinkInfo.link);\n    toaster.success(gettext('Share link is copied to the clipboard.'));\n  };\n\n  onCopyPassword = () => {\n    const { sharedLinkInfo } = this.props;\n    copy(sharedLinkInfo.password);\n    toaster.success(gettext('Password is copied to the clipboard.'));\n  };\n\n  onCopyLinkAndPassword = () => {\n    const { sharedLinkInfo } = this.props;\n    const textToCopy = `Share Link: ${sharedLinkInfo.link}\\nPassword: ${sharedLinkInfo.password}\\n\\nOpen the link and enter the password to access the files.`;\n    copy(textToCopy);\n    toaster.success(gettext('Link and password copied to the clipboard.'));\n  };\n\n  onCopyDownloadLink = () => {\n    const { sharedLinkInfo } = this.props;\n    copy(`${sharedLinkInfo.link}?dl=1`);\n    toaster.success(gettext('Direct download link is copied to the clipboard.'));\n  };\n\n  toggleStoredPasswordVisible = () => {\n    this.setState({\n      storedPasswordVisible: !this.state.storedPasswordVisible\n    });\n  };\n\n  handleMouseOverExpirationEditIcon = () => {\n    this.setState({ isExpirationEditIconShow: true });\n  };\n\n  handleMouseOutExpirationEditIcon = () => {\n    this.setState({ isExpirationEditIconShow: false });\n  };\n\n  editingExpirationToggle = () => {\n    this.setState({ isEditingExpiration: !this.state.isEditingExpiration });\n  };\n\n  setExpType = (e) => {\n    this.setState({\n      expType: e.target.value\n    });\n  };\n\n  onExpDateChanged = (value) => {\n    this.setState({\n      expDate: value\n    });\n  };\n\n  onExpireDaysChanged = (e) => {\n    let day = e.target.value.trim();\n    this.setState({ expireDays: day });\n  };\n\n  updateExpiration = () => {\n    const { sharedLinkInfo } = this.props;\n    const { expType, expireDays, expDate } = this.state;\n    let expirationTime = '';\n    if (expType == 'by-days') {\n      expirationTime = moment().add(parseInt(expireDays), 'days').format();\n    } else {\n      expirationTime = expDate.format();\n    }\n    seafileAPI.updateShareLink(sharedLinkInfo.token, '', expirationTime).then((res) => {\n      this.setState({\n        isEditingExpiration: false\n      });\n      this.props.updateLink(new ShareLink(res.data));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  handleMouseOver = () => {\n    this.setState({ isOpIconShown: true });\n  };\n\n  handleMouseOut = () => {\n    this.setState({ isOpIconShown: false });\n  };\n\n  changePerm = (permOption) => {\n    const { sharedLinkInfo } = this.props;\n    const { permissionDetails } = Utils.getShareLinkPermissionObject(permOption.value);\n    seafileAPI.updateShareLink(sharedLinkInfo.token, JSON.stringify(permissionDetails)).then((res) => {\n      this.props.updateLink(new ShareLink(res.data));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  toggleLinkDeleteDialog = () => {\n    this.setState({ isLinkDeleteDialogOpen: !this.state.isLinkDeleteDialogOpen });\n  };\n\n  toggleSendLink = () => {\n    this.setState({ isSendLinkShown: !this.state.isSendLinkShown });\n  };\n\n  deleteLink = () => {\n    const { sharedLinkInfo } = this.props;\n    const { token } = sharedLinkInfo;\n    this.props.deleteLink(token);\n  };\n\n  goBack = () => {\n    this.props.showLinkDetails(null);\n  };\n\n  render() {\n    const { sharedLinkInfo, permissionOptions } = this.props;\n    const { isOpIconShown } = this.state;\n    const currentPermission = Utils.getShareLinkPermissionStr(sharedLinkInfo.permissions);\n    this.permOptions = permissionOptions.map(item => {\n      return {\n        value: item,\n        text: Utils.getShareLinkPermissionObject(item).text,\n        isSelected: item == currentPermission\n      };\n    });\n    const currentSelectedPermOption = this.permOptions.filter(item => item.isSelected)[0];\n\n    return (\n      <div>\n        <button className=\"fa fa-arrow-left back-icon border-0 bg-transparent text-secondary p-0\" onClick={this.goBack} title={gettext('Back')} aria-label={gettext('Back')}></button>\n        <dl>\n          <dt className=\"text-secondary font-weight-normal\">{gettext('Link:')}</dt>\n          <dd>\n            <SharedLink\n              link={sharedLinkInfo.link}\n              linkExpired={sharedLinkInfo.is_expired}\n              copyLink={this.onCopySharedLink}\n            />\n          </dd>\n          {!sharedLinkInfo.is_dir && sharedLinkInfo.permissions.can_download && ( // just for file\n            <>\n              <dt className=\"text-secondary font-weight-normal\">{gettext('Direct Download Link:')}</dt>\n              <dd>\n                <SharedLink\n                  link={`${sharedLinkInfo.link}?dl=1`}\n                  linkExpired={sharedLinkInfo.is_expired}\n                  copyLink={this.onCopyDownloadLink}\n                />\n              </dd>\n            </>\n          )}\n          {sharedLinkInfo.password && (\n            <>\n              <dt className=\"text-secondary font-weight-normal\">{gettext('Password:')}</dt>\n              <dd className=\"d-flex align-items-center\">\n                <span className=\"mr-2\">{this.state.storedPasswordVisible ? sharedLinkInfo.password : '***************'}</span>\n                <span\n                  tabIndex=\"0\"\n                  role=\"button\"\n                  aria-label={this.state.storedPasswordVisible ? gettext('Hide') : gettext('Show')}\n                  onKeyDown={this.onIconKeyDown}\n                  onClick={this.toggleStoredPasswordVisible}\n                  className={`eye-icon fas ${this.state.storedPasswordVisible ? 'fa-eye' : 'fa-eye-slash'} mr-2`}\n                  title={this.state.storedPasswordVisible ? gettext('Hide') : gettext('Show')}\n                ></span>\n                <Button\n                  color=\"secondary\"\n                  size=\"sm\"\n                  onClick={this.onCopyPassword}\n                  title={gettext('Copy password')}\n                >\n                  {gettext('Copy')}\n                </Button>\n              </dd>\n              <dd className=\"mt-2\">\n                <Button\n                  color=\"primary\"\n                  size=\"sm\"\n                  onClick={this.onCopyLinkAndPassword}\n                  className=\"china-copy-all-btn\"\n                >\n                   {gettext('Copy Link & Password')}\n                </Button>\n                <small className=\"d-block mt-1 text-muted\">\n                  {gettext('Copies both link and password in a shareable format')}\n                </small>\n              </dd>\n            </>\n          )}\n          {sharedLinkInfo.expire_date && (\n            <>\n              <dt className=\"text-secondary font-weight-normal\">{gettext('Expiration Date:')}</dt>\n              {!this.state.isEditingExpiration &&\n                <dd style={{ width: '250px' }} onMouseEnter={this.handleMouseOverExpirationEditIcon} onMouseLeave={this.handleMouseOutExpirationEditIcon}>\n                  {moment(sharedLinkInfo.expire_date).format('YYYY-MM-DD HH:mm:ss')}\n                  {this.state.isExpirationEditIconShow && (\n                    <a href=\"#\"\n                      role=\"button\"\n                      aria-label={gettext('Edit')}\n                      title={gettext('Edit')}\n                      className=\"fa fa-pencil-alt attr-action-icon\"\n                      onClick={EvalProFunc(this.editingExpirationToggle)}>\n                    </a>\n                  )}\n                </dd>\n              }\n              {this.state.isEditingExpiration &&\n                <dd>\n                  <div className=\"ml-4\">\n                    <SetLinkExpiration\n                      minDays={shareLinkExpireDaysMin}\n                      maxDays={shareLinkExpireDaysMax}\n                      defaultDays={shareLinkExpireDaysDefault}\n                      expType={this.state.expType}\n                      setExpType={this.setExpType}\n                      expireDays={this.state.expireDays}\n                      onExpireDaysChanged={this.onExpireDaysChanged}\n                      expDate={this.state.expDate}\n                      onExpDateChanged={this.onExpDateChanged}\n                    />\n                    <div className={this.state.expType == 'by-days' ? 'mt-2' : 'mt-3'}>\n                      <button className=\"btn btn-primary mr-2\" onClick={this.updateExpiration}>{gettext('Update')}</button>\n                      <button className=\"btn btn-secondary\" onClick={this.editingExpirationToggle}>{gettext('Cancel')}</button>\n                    </div>\n                  </div>\n                </dd>\n              }\n            </>\n          )}\n          {(isPro && sharedLinkInfo.permissions) && (\n            <>\n              <dt className=\"text-secondary font-weight-normal\">{gettext('Permission:')}</dt>\n              <dd style={{ width: '250px' }} onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n                <Selector\n                  isDropdownToggleShown={isOpIconShown && !sharedLinkInfo.is_expired}\n                  currentSelectedOption={currentSelectedPermOption}\n                  options={this.permOptions}\n                  selectOption={this.changePerm}\n                />\n              </dd>\n            </>\n          )}\n        </dl>\n        {(canSendShareLinkEmail && !this.state.isSendLinkShown) &&\n          <Button onClick={this.toggleSendLink} className='mr-2'>{gettext('Send')}</Button>\n        }\n        {this.state.isSendLinkShown &&\n          <SendLink\n            linkType='shareLink'\n            token={sharedLinkInfo.token}\n            toggleSendLink={this.toggleSendLink}\n            closeShareDialog={this.props.closeShareDialog}\n          />\n        }\n        {(!this.state.isSendLinkShown) &&\n          <Button onClick={this.toggleLinkDeleteDialog}>{gettext('Delete')}</Button>\n        }\n        {this.state.isLinkDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete share link')}\n            message={gettext('Are you sure you want to delete the share link?')}\n            executeOperation={this.deleteLink}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleLinkDeleteDialog}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nLinkDetails.propTypes = propTypes;\n\nexport default LinkDetails;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/edit-filetag-dialog.js",["4671","4672"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport CreateTagDialog from './create-tag-dialog';\nimport toaster from '../toast';\nrequire('../../css/repo-tag.css');\n\nconst TagItemPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoTag: PropTypes.object.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass TagItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTagHighlighted: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      isTagHighlighted: true\n    });\n  };\n\n  onMouseLeave = () => {\n    this.setState({\n      isTagHighlighted: false\n    });\n  };\n\n  getRepoTagIdList = () => {\n    let repoTagIdList = [];\n    let fileTagList = this.props.fileTagList || [];\n    repoTagIdList = fileTagList.map((fileTag) => fileTag.repo_tag_id);\n    return repoTagIdList;\n  };\n\n  onEditFileTag = () => {\n    let { repoID, repoTag, filePath } = this.props;\n    let repoTagIdList = this.getRepoTagIdList();\n    if (repoTagIdList.indexOf(repoTag.id) === -1) {\n      let id = repoTag.id;\n      seafileAPI.addFileTag(repoID, filePath, id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let fileTag = null;\n      let fileTagList = this.props.fileTagList;\n      for(let i = 0; i < fileTagList.length; i++) {\n        if (fileTagList[i].repo_tag_id === repoTag.id) {\n          fileTag = fileTagList[i];\n          break;\n        }\n      }\n      seafileAPI.deleteFileTag(repoID, fileTag.id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  render() {\n    const { isTagHighlighted } = this.state;\n    const { repoTag } = this.props;\n    const repoTagIdList = this.getRepoTagIdList();\n    const isTagSelected = repoTagIdList.indexOf(repoTag.id) != -1;\n    return (\n      <li\n        className={`tag-list-item cursor-pointer px-4 d-flex justify-content-between align-items-center ${isTagHighlighted ? 'hl' : ''}`}\n        onClick={this.onEditFileTag}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n      >\n        <div className=\"d-flex align-items-center\">\n          <span className=\"tag-color w-4 h-4 rounded-circle\" style={{backgroundColor: repoTag.color}}></span>\n          <span className=\"tag-name mx-2\">{repoTag.name}</span>\n        </div>\n        {isTagSelected && <i className=\"fas fa-check tag-selected-icon\"></i>}\n      </li>\n    );\n  }\n\n}\n\nTagItem.propTypes = TagItemPropTypes;\n\nconst TagListPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoTags: PropTypes.array.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  createNewTag: PropTypes.func.isRequired,\n};\n\nclass TagList extends React.Component {\n\n  render() {\n    const { repoTags } = this.props;\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.props.toggleCancel}>{gettext('Select Tags')}</ModalHeader>\n        <ModalBody className=\"px-0\">\n          <ul className=\"tag-list tag-list-container\">\n            {repoTags.map((repoTag) => {\n              return (\n                <TagItem\n                  key={repoTag.id}\n                  repoTag={repoTag}\n                  repoID={this.props.repoID}\n                  filePath={this.props.filePath}\n                  fileTagList={this.props.fileTagList}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                />\n              );\n            })}\n          </ul>\n          <a\n            href=\"#\"\n            className=\"add-tag-link px-4 py-2 d-flex align-items-center\"\n            onClick={this.props.createNewTag}\n          >\n            <span className=\"sf2-icon-plus mr-2\"></span>\n            {gettext('Create a new tag')}\n          </a>\n        </ModalBody>\n        <ModalFooter>\n          <Button onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nTagList.propTypes = TagListPropTypes;\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoTags: PropTypes.array.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass EditFileTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCreateRepoTagShow: false,\n      isListRepoTagShow: true,\n    };\n  }\n\n  createNewTag = () => {\n    this.setState({\n      isCreateRepoTagShow: !this.state.isCreateRepoTagShow,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n    });\n  };\n\n  onRepoTagCreated = (repoTagID) => {\n    let {repoID, filePath} = this.props;\n    seafileAPI.addFileTag(repoID, filePath, repoTagID).then(() => {\n      this.props.onFileTagChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleCancel} autoFocus={false}>\n        {this.state.isListRepoTagShow &&\n          <TagList\n            repoID={this.props.repoID}\n            repoTags={this.props.repoTags}\n            filePath={this.props.filePath}\n            fileTagList={this.props.fileTagList}\n            onFileTagChanged={this.props.onFileTagChanged}\n            toggleCancel={this.props.toggleCancel}\n            createNewTag={this.createNewTag}\n          />\n        }\n        {this.state.isCreateRepoTagShow &&\n          <CreateTagDialog\n            repoID={this.props.repoID}\n            onClose={this.props.toggleCancel}\n            toggleCancel={this.createNewTag}\n            onRepoTagCreated={this.onRepoTagCreated}\n          />\n        }\n      </Modal>\n    );\n  }\n}\n\nEditFileTagDialog.propTypes = propTypes;\n\nexport default EditFileTagDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/wiki/index-md-viewer/nav-item.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/copy-dirent-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/move-dirent-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dirent-detail/detail-list-view.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/rename-dirent.js",["4673","4674"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Alert } from 'reactstrap';\n\nconst propTypes = {\n  onRename: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  dirent: PropTypes.object,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  UNSAFE_componentWillMount() {\n    this.setState({newName: this.props.dirent.name});\n  }\n\n  componentDidMount() {\n    let { dirent } = this.props;\n    this.changeState(dirent);\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    this.changeState(nextProps.dirent);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({newName: e.target.value});\n  };\n\n  handleSubmit = () => {\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      this.setState({errMessage : errMessage});\n    } else {\n      let isDuplicated = this.checkDuplicatedName();\n      if (isDuplicated) {\n        let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(this.state.newName));\n        this.setState({errMessage: errMessage});\n      } else {\n        this.props.onRename(this.state.newName);\n        this.props.toggleCancel();\n      }\n    }\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  };\n\n  toggle = () => {\n    this.props.toggleCancel();\n  };\n\n  changeState = (dirent) => {\n    let name = dirent.name;\n    this.setState({newName: name});\n  };\n\n  validateInput = () => {\n    let newName = this.state.newName.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  };\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.newName);\n    return isDuplicated;\n  };\n\n  onAfterModelOpened = () => {\n    if (!this.newInput.current) return;\n    this.newInput.current.focus();\n\n    let { dirent } = this.props;\n    let type = dirent.type;\n    if (type === 'file') {\n      var endIndex = dirent.name.lastIndexOf('.md');\n      this.newInput.current.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.newInput.current.setSelectionRange(0, -1);\n    }\n  };\n\n  render() {\n    let type = this.props.dirent.type;\n    return (\n      <Modal isOpen={true} toggle={this.toggle} onOpened={this.onAfterModelOpened}>\n        <ModalHeader toggle={this.toggle}>{type === 'file' ? gettext('Rename File') : gettext('Rename Folder') }</ModalHeader>\n        <ModalBody>\n          <p>{type === 'file' ? gettext('New file name'): gettext('New folder name')}</p>\n          <Input onKeyDown={this.handleKeyDown} innerRef={this.newInput} value={this.state.newName} onChange={this.handleChange} />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/wiki/utils/generate-navs.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-uploader/upload-list-item.js",["4675","4676","4677"],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/seahub-popover.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-uploader/forbid-upload-list-item.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/common-add-tool.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/search-input.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/popover/tag-item.js",["4678"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass TagItem extends React.Component {\n\n  onMouseEnter = () => {\n    this.props.setHighlightIndex(this.props.index);\n  };\n\n  onMouseLeave = () => {\n    this.props.setHighlightIndex(-1);\n  };\n\n  getRepoTagIdList = () => {\n    let repoTagIdList = [];\n    let fileTagList = this.props.fileTagList || [];\n    repoTagIdList = fileTagList.map((fileTag) => fileTag.repo_tag_id);\n    return repoTagIdList;\n  };\n\n  onEditFileTag = () => {\n    let { repoID, repoTag, filePath } = this.props;\n    let repoTagIdList = this.getRepoTagIdList();\n    if (repoTagIdList.indexOf(repoTag.id) === -1) {\n      let id = repoTag.id;\n      seafileAPI.addFileTag(repoID, filePath, id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let fileTag = null;\n      let fileTagList = this.props.fileTagList;\n      for(let i = 0; i < fileTagList.length; i++) {\n        if (fileTagList[i].repo_tag_id === repoTag.id) {\n          fileTag = fileTagList[i];\n          break;\n        }\n      }\n      seafileAPI.deleteFileTag(repoID, fileTag.id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  render() {\n    const { repoTag, highlightIndex, index } = this.props;\n    const repoTagIdList = this.getRepoTagIdList();\n    const isTagSelected = repoTagIdList.indexOf(repoTag.id) != -1;\n    return (\n      <li\n        className={`tag-list-item cursor-pointer px-3 d-flex justify-content-between align-items-center ${highlightIndex === index ? 'hl' : ''}`}\n        onClick={this.onEditFileTag}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n      >\n        <div className=\"tag-item d-flex align-items-center\" style={{backgroundColor: repoTag.color}}>\n          <span className=\"tag-name\">{repoTag.name}</span>\n        </div>\n        {isTagSelected && <i className=\"fas fa-check tag-selected-icon\"></i>}\n      </li>\n    );\n  }\n\n}\n\nTagItem.propTypes = {\n  index: PropTypes.number.isRequired,\n  highlightIndex: PropTypes.number.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoTag: PropTypes.object.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  setHighlightIndex: PropTypes.func.isRequired,\n};\n\nexport default TagItem;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dropdown-menu/item-dropdown-menu.js",["4679","4680","4681","4682"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport listener from '../context-menu/globalEventListener';\nimport { Dropdown, ButtonDropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  tagName: PropTypes.string,\n  item: PropTypes.object.isRequired,\n  toggleClass: PropTypes.string,\n  isHandleContextMenuEvent: PropTypes.bool,\n  getMenuList: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func,\n  unfreezeItem: PropTypes.func,\n};\n\nclass ItemDropdownMenu extends React.Component {\n\n  static defaultProps = {\n    isHandleContextMenuEvent: true,\n    toggleClass: 'sf2-icon-caret-down'\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      menuList: [],\n      isItemMenuShow: false,\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.isHandleContextMenuEvent) {\n      this.listenerId = listener.register(this.onShowMenu, this.onHideMenu);\n    }\n    let { item } = this.props;\n    let menuList = this.props.getMenuList(item);\n    this.setState({menuList: menuList});\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {  // for toolbar item operation\n    let { item } = nextProps;\n    if (item.name !== this.props.item.name) {\n      let menuList = this.props.getMenuList(item);\n      this.setState({menuList: menuList});\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.isHandleContextMenuEvent && this.listenerId) {\n      listener.unregister(this.listenerId);\n    }\n  }\n\n  onShowMenu = () => {\n    // nothing todo\n  };\n\n  onHideMenu = () => {\n    if (this.state.isItemMenuShow) {\n      this.setState({isItemMenuShow: false});\n      if (typeof(this.props.unfreezeItem) === 'function') {\n        this.props.unfreezeItem();\n      }\n    }\n  };\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onDropdownToggleClick(e);\n    }\n  };\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.toggleOperationMenu();\n  };\n\n  toggleOperationMenu = () => {\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow && typeof(this.props.freezeItem) === 'function') {\n          this.props.freezeItem();\n        } else if (!this.state.isItemMenuShow && typeof(this.props.unfreezeItem) === 'function') {\n          this.props.unfreezeItem();\n        }\n      }\n    );\n  };\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onMenuItemClick(e);\n    }\n  };\n\n  onMenuItemClick = (event) => {\n    let operation = Utils.getEventData(event, 'toggle');\n    let item = this.props.item;\n    this.props.onMenuItemClick(operation, event, item);\n  };\n\n  render() {\n    let menuList = this.state.menuList;\n    let { toggleClass, tagName } = this.props;\n    toggleClass = 'sf-dropdown-toggle ' + toggleClass;\n\n    if (!menuList.length) {\n      return '';\n    }\n\n    if (tagName && tagName === 'button') {\n      return (\n        <ButtonDropdown isOpen={this.state.isItemMenuShow} toggle={this.onDropdownToggleClick}>\n          <DropdownToggle\n            className={toggleClass}\n            data-toggle=\"dropdown\"\n            title={gettext('More operations')}\n            aria-label={gettext('More operations')}\n            aria-expanded={this.state.isItemMenuShow}\n            onKeyDown={this.onDropdownToggleKeyDown}\n            // onClick={this.onDropdownToggleClick}\n          >\n          </DropdownToggle>\n          <DropdownMenu>\n            {menuList.map((menuItem, index) => {\n              if (menuItem === 'Divider') {\n                return <DropdownItem key={index} divider />;\n              } else {\n                return (\n                  <DropdownItem key={index} data-toggle={menuItem.key} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{menuItem.value}</DropdownItem>\n                );\n              }\n            })}\n          </DropdownMenu>\n        </ButtonDropdown>\n      );\n    }\n\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.onDropdownToggleClick} className=\"vam\">\n        <DropdownToggle\n          tag={tagName || 'i'}\n          role=\"button\"\n          tabIndex=\"0\"\n          className={toggleClass}\n          title={gettext('More operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n          aria-label={gettext('More operations')}\n          onKeyDown={this.onDropdownToggleKeyDown}\n          // onClick={this.onDropdownToggleClick}\n        />\n        <DropdownMenu>\n          {menuList.map((menuItem, index) => {\n            if (menuItem === 'Divider') {\n              return <DropdownItem key={index} divider />;\n            } else {\n              return (\n                <DropdownItem key={index} data-toggle={menuItem.key} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{menuItem.value}</DropdownItem>\n              );\n            }\n          })}\n        </DropdownMenu>\n      </Dropdown>\n    );\n  }\n}\n\nItemDropdownMenu.propTypes = propTypes;\n\nexport default ItemDropdownMenu;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/wiki-delete-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dir-view-mode/dir-column-file.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dir-view-mode/dir-column-nav.js",["4683"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport TreeView from '../../components/tree-view/tree-view';\nimport Loading from '../../components/loading';\nimport ModalPortal from '../../components/modal-portal';\nimport Rename from '../../components/dialog/rename-dialog';\nimport Copy from '../../components/dialog/copy-dirent-dialog';\nimport Move from '../../components/dialog/move-dirent-dialog';\nimport CreateFolder from '../../components/dialog/create-folder-dialog';\nimport CreateFile from '../../components/dialog/create-file-dialog';\nimport ImageDialog from '../../components/dialog/image-dialog';\nimport { siteRoot, thumbnailSizeForOriginal } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  currentPath: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n  navRate: PropTypes.number,\n  inResizing: PropTypes.bool.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n};\n\nclass DirColumnNav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      opNode: null,\n      isAddFileDialogShow: false,\n      isAddFolderDialogShow: false,\n      isRenameDialogShow: false,\n      isNodeImagePopupOpen: false,\n      imageNodeItems: [],\n      imageIndex: 0,\n      isCopyDialogShow: false,\n      isMoveDialogShow: false,\n      isMutipleOperation: false,\n    };\n    this.isNodeMenuShow = true;\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    this.setState({opNode: nextProps.currentNode});\n  }\n\n  onNodeClick = (node) => {\n    this.setState({opNode: node});\n    if (Utils.imageCheck(node.object.name)) {\n      this.showNodeImagePopup(node);\n      return;\n    }\n    this.props.onNodeClick(node);\n  };\n\n  onMenuItemClick = (operation, node) => {\n    this.setState({opNode: node});\n    switch (operation) {\n      case 'New Folder':\n        if (!node) {\n          this.onAddFolderToggle('root');\n        } else {\n          this.onAddFolderToggle();\n        }\n        break;\n      case 'New File':\n        if (!node) {\n          this.onAddFileToggle('root');\n        } else {\n          this.onAddFileToggle();\n        }\n        break;\n      case 'Rename':\n        this.onRenameToggle();\n        break;\n      case 'Delete':\n        this.onDeleteNode(node);\n        break;\n      case 'Copy':\n        this.onCopyToggle();\n        break;\n      case 'Move':\n        this.onMoveToggle();\n        break;\n      case 'Open in New Tab':\n        this.onOpenFile(node);\n        break;\n    }\n  };\n\n  onAddFileToggle = (type) => {\n    if (type === 'root') {\n      let root = this.props.treeData.root;\n      this.setState({\n        isAddFileDialogShow: !this.state.isAddFileDialogShow,\n        opNode: root,\n      });\n    } else {\n      this.setState({isAddFileDialogShow: !this.state.isAddFileDialogShow});\n    }\n  };\n\n  onAddFolderToggle = (type) => {\n    if (type === 'root') {\n      let root = this.props.treeData.root;\n      this.setState({\n        isAddFolderDialogShow: !this.state.isAddFolderDialogShow,\n        opNode: root,\n      });\n    } else {\n      this.setState({isAddFolderDialogShow: !this.state.isAddFolderDialogShow});\n    }\n  };\n\n  onRenameToggle = () => {\n    this.setState({isRenameDialogShow: !this.state.isRenameDialogShow});\n  };\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  };\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  };\n\n  onAddFolderNode = (dirPath) => {\n    this.setState({isAddFolderDialogShow: !this.state.isAddFolderDialogShow});\n    this.props.onAddFolderNode(dirPath);\n  };\n\n  onRenameNode = (newName) => {\n    this.setState({isRenameDialogShow: !this.state.isRenameDialogShow});\n    let node = this.state.opNode;\n    this.props.onRenameNode(node, newName);\n  };\n\n  onDeleteNode = (node) => {\n    this.props.onDeleteNode(node);\n  };\n\n  onOpenFile = (node) => {\n    let newUrl = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(node.path);\n    window.open(newUrl, '_blank');\n  };\n\n  checkDuplicatedName = (newName) => {\n    let node = this.state.opNode;\n    // root node to new node conditions: parentNode is null,\n    let parentNode = node.parentNode ? node.parentNode : node;\n    let childrenObject = parentNode.children.map(item => {\n      return item.object;\n    });\n    let isDuplicated = childrenObject.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  };\n\n  showNodeImagePopup = (node) => {\n    let childrenNode = node.parentNode.children;\n    let items = childrenNode.filter((item) => {\n      return Utils.imageCheck(item.object.name);\n    });\n    let imageNames = items.map((item) => {\n      return item.object.name;\n    });\n    this.setState({\n      isNodeImagePopupOpen: true,\n      imageNodeItems: this.prepareImageItems(node),\n      imageIndex: imageNames.indexOf(node.object.name)\n    });\n  };\n\n  prepareImageItems = (node) => {\n    let childrenNode = node.parentNode.children;\n    let items = childrenNode.filter((item) => {\n      return Utils.imageCheck(item.object.name);\n    });\n\n    const useThumbnail = !this.props.currentRepoInfo.encrypted;\n    let prepareItem = (item) => {\n      const name = item.object.name;\n\n      const path = Utils.encodePath(Utils.joinPath(node.parentNode.path, name));\n      const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n      const isGIF = fileExt === 'gif';\n\n      const repoID = this.props.repoID;\n      let src = '';\n      if (useThumbnail && !isGIF) {\n        src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n      } else {\n        src = `${siteRoot}repo/${repoID}/raw${path}`;\n      }\n\n      return {\n        'name': name,\n        'url': `${siteRoot}lib/${repoID}/file${path}`,\n        'src': src\n      };\n    };\n\n    return items.map((item) => { return prepareItem(item); });\n  };\n\n  closeNodeImagePopup = () => {\n    this.setState({\n      isNodeImagePopupOpen: false\n    });\n  };\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageNodeItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  };\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageNodeItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  };\n\n  stopTreeScrollPropagation = (e) => {\n    e.stopPropagation();\n  };\n\n  render() {\n    let flex = this.props.navRate ? '0 0 ' + this.props.navRate * 100 + '%' : '0 0 25%';\n    const select = this.props.inResizing ? 'none' : '';\n    return (\n      <Fragment>\n        <div className=\"dir-content-nav\" role=\"navigation\" style={{flex: (flex), userSelect: select}} onScroll={this.stopTreeScrollPropagation}>\n          {this.props.isTreeDataLoading ?\n            (<Loading/>) :\n            (<TreeView\n              userPerm={this.props.userPerm}\n              isNodeMenuShow={this.isNodeMenuShow}\n              treeData={this.props.treeData}\n              currentPath={this.props.currentPath}\n              onNodeClick={this.onNodeClick}\n              onNodeExpanded={this.props.onNodeExpanded}\n              onNodeCollapse={this.props.onNodeCollapse}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.onFreezedItem}\n              onUnFreezedItem={this.onUnFreezedItem}\n              onItemMove={this.props.onItemMove}\n              currentRepoInfo={this.props.currentRepoInfo}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n            />)\n          }\n        </div>\n        {this.state.isAddFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.state.opNode.path}\n              onAddFolder={this.onAddFolderNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onAddFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isAddFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.state.opNode.path}\n              onAddFile={this.props.onAddFileNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleDialog={this.onAddFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isRenameDialogShow && (\n          <ModalPortal>\n            <Rename\n              currentNode={this.state.opNode}\n              onRename={this.onRenameNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleCancel={this.onRenameToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCopyDialogShow && (\n          <ModalPortal>\n            <Copy\n              path={this.state.opNode.parentNode.path}\n              repoID={this.props.repoID}\n              dirent={this.state.opNode.object}\n              onItemCopy={this.props.onItemCopy}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              onCancelCopy={this.onCopyToggle}\n              isMutipleOperation={this.state.isMutipleOperation}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isMoveDialogShow && (\n          <ModalPortal>\n            <Move\n              path={this.state.opNode.parentNode.path}\n              repoID={this.props.repoID}\n              dirent={this.state.opNode.object}\n              onItemMove={this.props.onItemMove}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              onCancelMove={this.onMoveToggle}\n              isMutipleOperation={this.state.isMutipleOperation}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isNodeImagePopupOpen && (\n          <ModalPortal>\n            <ImageDialog\n              imageItems={this.state.imageNodeItems}\n              imageIndex={this.state.imageIndex}\n              closeImagePopup={this.closeNodeImagePopup}\n              moveToPrevImage={this.moveToPrevImage}\n              moveToNextImage={this.moveToNextImage}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirColumnNav.defaultProps={\n  navRate: 0.25\n};\n\nDirColumnNav.propTypes = propTypes;\n\nexport default DirColumnNav;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dirent-list-view/dirent-none-view.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dirent-grid-view/dirent-grid-view.js",["4684"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, username, enableSeadoc, thumbnailSizeForOriginal } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport Loading from '../loading';\nimport ModalPortal from '../modal-portal';\nimport ImageDialog from '../../components/dialog/image-dialog';\nimport DirentGridItem from '../../components/dirent-grid-view/dirent-grid-item';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport TextTranslation from '../../utils/text-translation';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport Rename from '../../components/dialog/rename-dirent';\nimport CreateFile from '../dialog/create-file-dialog';\nimport CreateFolder from '../dialog/create-folder-dialog';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport toaster from '../toast';\n\nimport '../../css/grid-view.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object,\n  direntList: PropTypes.array.isRequired,\n  fullDirentList: PropTypes.array,\n  onAddFile: PropTypes.func,\n  onItemDelete: PropTypes.func,\n  onItemCopy: PropTypes.func.isRequired,\n  onItemConvert: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string, // current path's user permission\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  onGridItemClick: PropTypes.func,\n  repoTags: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func,\n  onAddFolder: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  posX: PropTypes.number,\n  posY: PropTypes.number,\n  dirent: PropTypes.object,\n};\n\nclass DirentGridView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isImagePopupOpen: false,\n      imageItems: [],\n      imageIndex: 0,\n      // onmenuClick\n      isShareDialogShow: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isEditFileTagShow: false,\n      isZipDialogOpen: false,\n      isRenameDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isCreateFileDialogShow: false,\n      fileType: '',\n      isPermissionDialogOpen: false,\n\n      isMutipleOperation: false,\n      isGridItemFreezed: false,\n      activeDirent: null,\n    };\n    this.isRepoOwner = props.currentRepoInfo.owner_email === username;\n  }\n\n  onCreateFileToggle = (fileType) => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: fileType || ''\n    });\n  };\n\n  onGridItemClick = (dirent) => {\n    hideMenu();\n    this.setState({activeDirent: dirent});\n    this.props.onGridItemClick(dirent);\n  };\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  };\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  };\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  };\n\n  onItemShare = (e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  };\n\n  closeSharedDialog = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  };\n\n  onItemDelete = (currentObject, e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemDelete(currentObject);\n  };\n\n  onItemConvert = (currentObject, e, dstType) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemConvert(currentObject, dstType);\n  };\n\n  exportDocx = () => {\n    const serviceUrl = window.app.config.serviceURL;\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let exportToDocxUrl = serviceUrl + '/repo/sdoc_export_to_docx/' + repoID + '/?file_path=' + filePath;\n    window.location.href = exportToDocxUrl;\n  };\n\n  onMenuItemClick = (operation, currentObject, event) => {\n    hideMenu();\n    switch(operation) {\n      case 'Download':\n        this.onItemDownload(currentObject, event);\n        break;\n      case 'Share':\n        this.onItemShare(event);\n        break;\n      case 'Delete':\n        this.onItemDelete(currentObject, event);\n        break;\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Move':\n        this.onItemMoveToggle();\n        break;\n      case 'Copy':\n        this.onItemCopyToggle();\n        break;\n      case 'Unfreeze Document':\n        this.onUnlockItem(currentObject);\n        break;\n      case 'Freeze Document':\n        this.onFreezeDocument(currentObject);\n        break;\n      case 'Convert to Markdown':\n        this.onItemConvert(currentObject, event, 'markdown');\n        break;\n      case 'Convert to docx':\n        this.onItemConvert(currentObject, event, 'docx');\n        break;\n      case 'Export docx':\n        this.exportDocx();\n        break;\n      case 'Convert to sdoc':\n        this.onItemConvert(currentObject, event, 'sdoc');\n        break;\n      case 'Tags':\n        this.onEditFileTagToggle();\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Unlock':\n        this.onUnlockItem(currentObject);\n        break;\n      case 'Lock':\n        this.onLockItem(currentObject);\n        break;\n      case 'History':\n        this.onHistory(currentObject);\n        break;\n      case 'New Folder':\n        this.onCreateFolderToggle(currentObject);\n        break;\n      case 'New File':\n        this.onCreateFileToggle('');\n        break;\n      case 'New Markdown File':\n        this.onCreateFileToggle('.md');\n        break;\n      case 'New Excel File':\n        this.onCreateFileToggle('.xlsx');\n        break;\n      case 'New PowerPoint File':\n        this.onCreateFileToggle('.pptx');\n        break;\n      case 'New Word File':\n        this.onCreateFileToggle('.docx');\n        break;\n      case 'New SeaDoc File':\n        this.onCreateFileToggle('.sdoc');\n        break;\n      case 'Access Log':\n        this.onAccessLog(currentObject);\n        break;\n      case 'Properties':\n        this.props.showDirentDetail('info');\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient(currentObject);\n        break;\n      default:\n        break;\n    }\n  };\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  };\n\n  onFileTagChanged = () => {\n    let dirent = this.state.activeDirent ? this.state.activeDirent : '';\n    let direntPath = Utils.joinPath(this.props.path, dirent.name);\n    this.props.onFileTagChanged(dirent, direntPath);\n  };\n\n  getDirentPath = (dirent) => {\n    let path = this.props.path;\n    return path === '/' ? path + dirent.name : path + '/' + dirent.name;\n  };\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  };\n\n  onItemDownload = (currentObject, e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let dirent = currentObject;\n    let repoID = this.props.repoID;\n    let direntPath = this.getDirentPath(dirent);\n    if (dirent.type === 'dir') {\n      this.setState({\n        isZipDialogOpen: true\n      });\n    } else {\n      let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n      location.href = url;\n    }\n  };\n\n  onCreateFolderToggle = () => {\n    this.setState({\n      isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow,\n    });\n  };\n\n  onItemRenameToggle = () => {\n    this.setState({\n      isRenameDialogShow: !this.state.isRenameDialogShow,\n    });\n  };\n\n  onItemMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  };\n\n  onItemCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  };\n\n  onPermissionItem = () => {\n    this.setState({isPermissionDialogOpen: !this.state.isPermissionDialogOpen});\n  };\n\n  onLockItem = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.lockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(currentObject, 'is_locked', true);\n      this.props.updateDirent(currentObject, 'locked_by_me', true);\n      let lockName = username.split('@');\n      this.props.updateDirent(currentObject, 'lock_owner_name', lockName[0]);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onFreezeDocument = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.lockfile(repoID, filePath, -1).then(() => {\n      this.props.updateDirent(currentObject, 'is_freezed', true);\n      this.props.updateDirent(currentObject, 'is_locked', true);\n      this.props.updateDirent(currentObject, 'locked_by_me', true);\n      let lockName = username.split('@');\n      this.props.updateDirent(currentObject, 'lock_owner_name', lockName[0]);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onUnlockItem = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.unlockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(currentObject, 'is_locked', false);\n      this.props.updateDirent(currentObject, 'locked_by_me', false);\n      this.props.updateDirent(currentObject, 'lock_owner_name', '');\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onHistory = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    let url = URLDecorator.getUrl({type: 'file_revisions', repoID: repoID, filePath: filePath});\n    location.href = url;\n  };\n\n  onAccessLog = (currentObject) => {\n    let filePath = this.getDirentPath(currentObject);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  };\n\n  onOpenViaClient = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    let url = URLDecorator.getUrl({type: 'open_via_client', repoID: repoID, filePath: filePath});\n    location.href = url;\n  };\n\n  onItemRename = (newName) => {\n    this.props.onItemRename(this.state.activeDirent, newName);\n  };\n\n  prepareImageItem = (item) => {\n    const name = item.name;\n    const repoID = this.props.repoID;\n    const path = Utils.encodePath(Utils.joinPath(this.props.path, name));\n\n    const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n    const isTIFF = fileExt == 'tiff';\n    let src = '';\n    if (isTIFF) {\n      src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n    } else {\n      src = `${siteRoot}repo/${repoID}/raw${path}`;\n    }\n\n    return {\n      'name': name,\n      'url': `${siteRoot}lib/${repoID}/file${path}`,\n      'src': src\n    };\n  };\n\n  showImagePopup = (curItem) => {\n    let items = this.props.fullDirentList.filter((item) => {\n      return Utils.imageCheck(item.name);\n    });\n\n    const imageItems = items.map((item) => {\n      return this.prepareImageItem(item);\n    });\n\n    this.setState({\n      isImagePopupOpen: true,\n      imageItems: imageItems,\n      imageIndex: items.indexOf(curItem)\n    });\n  };\n\n  closeImagePopup = () => {\n    this.setState({isImagePopupOpen: false});\n  };\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  };\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  };\n\n  checkDuplicatedName = (newName) => {\n    return Utils.checkDuplicatedNameInList(this.props.direntList, newName);\n  };\n\n  // common contextmenu handle\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  };\n\n  onGridContainerMouseDown = (event) => {\n    this.onMouseDown(event);\n  };\n\n  onGridItemMouseDown = (event) => {\n    this.onMouseDown(event);\n  };\n\n  gridContainerClick = () => {\n    hideMenu();\n    if (!this.props.isDirentDetailShow) {\n      this.onGridItemClick(null);\n    }\n  };\n\n  onGridContainerContextMenu = (event) => {\n    event.preventDefault();\n    // Display menu items based on the permissions of the current path\n    let permission = this.props.userPerm;\n    if (permission !== 'admin' && permission !== 'rw') {\n      return;\n    }\n    let id = 'dirent-grid-container-menu';\n    const {\n      NEW_FOLDER, NEW_FILE,\n      NEW_MARKDOWN_FILE,\n      NEW_EXCEL_FILE,\n      NEW_POWERPOINT_FILE,\n      NEW_WORD_FILE,\n      NEW_SEADOC_FILE\n    } = TextTranslation;\n\n    const menuList = [\n      NEW_FOLDER, NEW_FILE, 'Divider',\n      NEW_MARKDOWN_FILE,\n      NEW_EXCEL_FILE,\n      NEW_POWERPOINT_FILE,\n      NEW_WORD_FILE\n    ];\n    const { currentRepoInfo } = this.props;\n    if (enableSeadoc && !currentRepoInfo.encrypted) {\n      menuList.push(NEW_SEADOC_FILE);\n    }\n    this.handleContextClick(event, id, menuList);\n  };\n\n  onGridItemContextMenu = (event, dirent) => {\n    // Display menu items according to the current dirent permission\n    let id = 'grid-item-contextmenu';\n    let menuList = this.getDirentItemMenuList(dirent, true);\n    this.handleContextClick(event, id, menuList, dirent);\n    this.props.onGridItemClick && this.props.onGridItemClick(dirent);\n  };\n\n  handleContextClick = (event, id, menuList, currentObject = null) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    this.setState({activeDirent: currentObject});\n\n    let showMenuConfig = {\n      id: id,\n      position: { x, y },\n      target: event.target,\n      currentObject: currentObject,\n      menuList: menuList,\n    };\n\n    if (menuList.length === 0) {\n      return;\n    }\n\n    showMenu(showMenuConfig);\n  };\n\n  getDirentItemMenuList = (dirent, isContextmenu) => {\n    const isRepoOwner = this.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    return Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n  };\n\n  render() {\n    let {direntList, path} = this.props;\n    let dirent = this.state.activeDirent ? this.state.activeDirent : '';\n    let direntPath = Utils.joinPath(path, dirent.name);\n\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    return (\n      <Fragment>\n        <ul className=\"grid-view\" onClick={this.gridContainerClick} onContextMenu={this.onGridContainerContextMenu} onMouseDown={this.onGridContainerMouseDown}>\n          {\n            direntList.length !== 0 && direntList.map((dirent, index) => {\n              return (\n                <DirentGridItem\n                  key={index}\n                  dirent={dirent}\n                  repoID={this.props.repoID}\n                  path={this.props.path}\n                  onItemClick={this.props.onItemClick}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  showImagePopup={this.showImagePopup}\n                  onGridItemContextMenu={this.onGridItemContextMenu}\n                  onItemMove={this.props.onItemMove}\n                  onGridItemMouseDown={this.onGridItemMouseDown}\n                  onGridItemClick={this.onGridItemClick}\n                  activeDirent={this.state.activeDirent}\n                />\n              );\n            })\n          }\n        </ul>\n        <ContextMenu\n          id={'grid-item-contextmenu'}\n          onMenuItemClick={this.onMenuItemClick}\n        />\n        <ContextMenu\n          id={'dirent-grid-container-menu'}\n          onMenuItemClick={this.onMenuItemClick}\n        />\n        {this.state.isCreateFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.props.path}\n              onAddFolder={this.onAddFolder}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onCreateFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              fileType={this.state.fileType}\n              onAddFile={this.props.onAddFile}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleDialog={this.onCreateFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isMoveDialogShow &&\n          <MoveDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.currentRepoInfo.encrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemMove={this.props.onItemMove}\n            onCancelMove={this.onMoveToggle}\n            dirent={this.state.activeDirent}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n          <ModalPortal>\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={dirent.name}\n              toggleDialog={this.closeZipDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isCopyDialogShow &&\n          <CopyDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.currentRepoInfo.encrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemCopy={this.props.onItemCopy}\n            onCancelCopy={this.onCopyToggle}\n            dirent={this.state.activeDirent}\n          />\n        }\n        {this.state.isEditFileTagShow &&\n          <EditFileTagDialog\n            repoID={this.props.repoID}\n            fileTagList={dirent.file_tags}\n            filePath={direntPath}\n            toggleCancel={this.onEditFileTagToggle}\n            repoTags={this.props.repoTags}\n            onFileTagChanged={this.onFileTagChanged}\n          />\n        }\n        {this.state.isShareDialogShow &&\n          <ModalPortal>\n            <ShareDialog\n              itemType={dirent.type}\n              itemName={dirent.name}\n              itemPath={direntPath}\n              userPerm={dirent.permission}\n              repoID={this.props.repoID}\n              repoEncrypted={false}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.closeSharedDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isRenameDialogShow && (\n          <ModalPortal>\n            <Rename\n              dirent={this.state.activeDirent}\n              onRename={this.onItemRename}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleCancel={this.onItemRenameToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isPermissionDialogOpen &&\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onPermissionItem}\n              repoID={this.props.repoID}\n              folderPath={direntPath}\n              folderName={dirent.name}\n              isDepartmentRepo={this.props.isGroupOwnedRepo}\n            />\n          </ModalPortal>\n        }\n        {this.state.isImagePopupOpen && (\n          <ModalPortal>\n            <ImageDialog\n              imageItems={this.state.imageItems}\n              imageIndex={this.state.imageIndex}\n              closeImagePopup={this.closeImagePopup}\n              moveToPrevImage={this.moveToPrevImage}\n              moveToNextImage={this.moveToNextImage}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentGridView.propTypes = propTypes;\n\nexport default DirentGridView;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/cur-dir-path/dir-tool.js",["4685","4686","4687","4688","4689","4690","4691"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { v4 as uuidv4 } from 'uuid';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport SeahubPopover from '../common/seahub-popover';\nimport ListTagPopover from '../popover/list-tag-popover';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  userPerm: PropTypes.string,\n  currentPath: PropTypes.string.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n};\n\nclass DirTool extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isListRepoTagShow: false,\n    };\n    this.tagsIconID = `tags-icon-${uuidv4()}`;\n  }\n\n  onMouseDown = (e) => {\n    e.stopPropagation();\n  };\n\n  toggleRepoTag = (e) => {\n    e.stopPropagation();\n    this.setState({ isListRepoTagShow: !this.state.isListRepoTagShow });\n  };\n\n  hidePopover = (e) => {\n    if (e) {\n      let dom = e.target;\n      while (dom) {\n        if (typeof dom.className === 'string' && dom.className.includes('tag-color-popover')) return;\n        dom = dom.parentNode;\n      }\n    }\n    this.setState({ isListRepoTagShow: false });\n  };\n\n  toggleCancel = () => {\n    this.setState({ isListRepoTagShow: false });\n  };\n\n  isMarkdownFile(filePath) {\n    return Utils.getFileName(filePath).includes('.md');\n  }\n\n  render() {\n    let { repoID, userPerm, currentPath } = this.props;\n    if (userPerm !== 'rw') {\n      return '';\n    }\n    if (this.isMarkdownFile(currentPath)) {\n      return '';\n    }\n    let toolbarDom = null;\n    if (Utils.getFileName(currentPath)) { // name not '' is not root path\n      let trashUrl = siteRoot + 'repo/' + repoID + '/trash/?path=' + encodeURIComponent(currentPath);\n      toolbarDom = (\n        <ul className=\"path-toolbar\">\n          <li className=\"toolbar-item\">\n            <a\n              className=\"op-link sf2-icon-tag\"\n              href=\"#\"\n              id={this.tagsIconID}\n              role=\"button\"\n              onClick={this.toggleRepoTag}\n              onMouseDown={this.onMouseDown}\n              title={gettext('Tags')}\n              aria-label={gettext('Tags')}\n            ></a>\n          </li>\n          <li className=\"toolbar-item\">\n            <a className=\"op-link sf2-icon-recycle\" href={trashUrl} title={gettext('Trash')} aria-label={gettext('Trash')}></a>\n          </li>\n        </ul>\n      );\n    } else { // currentPath === '/' is root path\n      let trashUrl = siteRoot + 'repo/' + repoID + '/trash/';\n      let historyUrl = siteRoot + 'repo/history/' + repoID + '/';\n      toolbarDom = (\n        <ul className=\"path-toolbar\">\n          <li className=\"toolbar-item\">\n            <a\n              className=\"op-link sf2-icon-tag\"\n              href=\"#\"\n              id={this.tagsIconID}\n              role=\"button\"\n              onClick={this.toggleRepoTag}\n              onMouseDown={this.onMouseDown}\n              title={gettext('Tags')}\n              aria-label={gettext('Tags')}\n            ></a>\n          </li>\n          <li className=\"toolbar-item\">\n            <a className=\"op-link sf2-icon-recycle\" href={trashUrl} title={gettext('Trash')} aria-label={gettext('Trash')}></a>\n          </li>\n          <li className=\"toolbar-item\">\n            <a className=\"op-link sf2-icon-history\" href={historyUrl} title={gettext('History')} aria-label={gettext('History')}></a>\n          </li>\n        </ul>\n      );\n    }\n    return (\n      <>\n        {toolbarDom}\n        {this.state.isListRepoTagShow &&\n          <SeahubPopover\n            popoverClassName=\"list-tag-popover\"\n            target={this.tagsIconID}\n            hideSeahubPopover={this.hidePopover}\n            hideSeahubPopoverWithEsc={this.hidePopover}\n            canHideSeahubPopover={true}\n            boundariesElement={document.body}\n            placement={'bottom-end'}\n          >\n            <ListTagPopover\n              repoID={repoID}\n              onListTagCancel={this.toggleCancel}\n            />\n          </SeahubPopover>\n        }\n      </>\n    );\n  }\n}\n\nDirTool.propTypes = propTypes;\n\nexport default DirTool;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/cur-dir-path/dir-path.js",["4692","4693"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { InternalLinkOperation } from '../operations';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func,\n  pathPrefix: PropTypes.array,\n  repoID: PropTypes.string.isRequired,\n  isViewFile: PropTypes.bool,\n  fileTags: PropTypes.array.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  };\n\n  onTabNavClick = (e, tabName, id) => {\n    if (window.uploader &&\n      window.uploader.isUploadProgressDialogShow &&\n      window.uploader.totalProgress !== 100) {\n      if (!window.confirm(gettext('A file is being uploaded. Are you sure you want to leave this page?'))) {\n        e.preventDefault();\n        return false;\n      }\n      window.uploader.isUploadProgressDialogShow = false;\n    }\n    this.props.onTabNavClick(tabName, id);\n  };\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return null;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  };\n\n  render() {\n    let { currentPath, repoName, fileTags } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    let tagTitle = '';\n    if (fileTags.length > 0) {\n      fileTags.forEach(item => {\n        tagTitle += item.name + ' ';\n      });\n    }\n\n    return (\n      <div className=\"path-container\">\n        {this.props.pathPrefix && this.props.pathPrefix.map((item, index) => {\n          return (\n            <Fragment key={index}>\n              <Link to={item.url} className=\"normal\" onClick={(e) => this.onTabNavClick(e, item.name, item.id)}>{gettext(item.showName)}</Link>\n              <span className=\"path-split\">/</span>\n            </Fragment>\n          );\n        })}\n        {this.props.pathPrefix && this.props.pathPrefix.length === 0 && (\n          <Fragment>\n            <Link to={siteRoot + 'my-libs/'} className=\"normal\" onClick={(e) => this.onTabNavClick(e, 'my-libs')}>{gettext('Libraries')}</Link>\n            <span className=\"path-split\">/</span>\n          </Fragment>\n        )}\n        {!this.props.pathPrefix && (\n          <Fragment>\n            <Link href={siteRoot + 'my-libs/'} className=\"normal\" onClick={(e) => this.onTabNavClick(e, 'my-libs')}>{gettext('Libraries')}</Link>\n            <span className=\"path-split\">/</span>\n          </Fragment>\n        )}\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n        {this.props.isViewFile && (\n          <InternalLinkOperation repoID={this.props.repoID} path={this.props.currentPath}/>\n        )}\n        {(this.props.isViewFile && fileTags.length !== 0) &&\n          <span id='column-mode-file-tags' className=\"tag-list tag-list-stacked align-middle ml-1 d-flex align-items-center\">\n            {fileTags.map((fileTag, index) => {\n              return (<span className=\"file-tag\" key={fileTag.id} style={{zIndex: index, backgroundColor: fileTag.color}}></span>);\n            })}\n            <UncontrolledTooltip target=\"column-mode-file-tags\" placement=\"bottom\">\n              {tagTitle}\n            </UncontrolledTooltip>\n          </span>\n        }\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dirent-list-view/dirent-list-view.js",["4694","4695","4696","4697","4698","4699","4700","4701","4702","4703","4704"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, gettext, username, enableSeadoc, thumbnailSizeForOriginal } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport TextTranslation from '../../utils/text-translation';\nimport URLDecorator from '../../utils/url-decorator';\nimport Loading from '../loading';\nimport toaster from '../toast';\nimport ModalPortal from '../modal-portal';\nimport CreateFile from '../dialog/create-file-dialog';\nimport CreateFolder from '../dialog/create-folder-dialog';\nimport ImageDialog from '../dialog/image-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport DirentListItem from './dirent-list-item';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport DirentsDraggedPreview from '../draggable/dirents-dragged-preview';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemConvert: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  repoTags: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  showDirentDetail: PropTypes.func.isRequired,\n  loadDirentList: PropTypes.func,\n  fullDirentList: PropTypes.array,\n  posX: PropTypes.string,\n  posY: PropTypes.string,\n};\n\nclass DirentListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      isImagePopupOpen: false,\n      imageItems: [],\n      imageIndex: 0,\n      fileType: '',\n      isCreateFileDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isProgressDialogShow: false,\n      downloadItems: [],\n      isMutipleOperation: true,\n      activeDirent: null,\n      isListDropTipShow: false,\n      isShowDirentsDraggablePreview: false,\n    };\n\n    this.enteredCounter = 0; // Determine whether to enter the child element to avoid dragging bubbling bugs\n    this.isRepoOwner = props.currentRepoInfo.owner_email === username;\n    this.isAdmin = props.currentRepoInfo.is_admin;\n    this.repoEncrypted = props.currentRepoInfo.encrypted;\n\n    this.clickedDirent = null;\n    this.direntItems = [];\n    this.currentItemRef = null;\n\n    this.zipToken = null;\n\n    const { userPerm } = props;\n    this.canDrop = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrop = modify;\n    }\n  }\n\n  freezeItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  unfreezeItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  onItemRename = (dirent, newName) => {\n    let isDuplicated = this.props.direntList.some(item => {\n      return item.name === newName;\n    });\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      toaster.danger(errMessage);\n      return false;\n    }\n    this.props.onItemRename(dirent, newName);\n  };\n\n  onItemRenameToggle = () => {\n    this.freezeItem();\n  };\n\n  onItemSelected = (dirent) => {\n    this.setState({activeDirent: null});\n    this.props.onItemSelected(dirent);\n  };\n\n  onDirentClick = (dirent) => {\n    hideMenu();\n    if (this.props.selectedDirentList.length > 0 && !this.state.activeDirent ) {\n      return;\n    }\n    this.setState({activeDirent: dirent});\n    this.props.onDirentClick(dirent);\n  };\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  // for image popup\n  prepareImageItem = (item) => {\n    const name = item.name;\n    const repoID = this.props.repoID;\n    const path = Utils.encodePath(Utils.joinPath(this.props.path, name));\n    const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n    const isTIFF = fileExt == 'tiff';\n    let src = '';\n    if (isTIFF) {\n      src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n    } else {\n      src = `${siteRoot}repo/${repoID}/raw${path}`;\n    }\n\n    return {\n      'name': name,\n      'url': `${siteRoot}lib/${repoID}/file${path}`,\n      'src': src\n    };\n  };\n\n  showImagePopup = (curItem) => {\n    let items = this.props.fullDirentList.filter((item) => {\n      return Utils.imageCheck(item.name);\n    });\n\n    const imageItems = items.map((item) => {\n      return this.prepareImageItem(item);\n    });\n\n    this.setState({\n      isImagePopupOpen: true,\n      imageItems: imageItems,\n      imageIndex: items.indexOf(curItem)\n    });\n  };\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  };\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  };\n\n  closeImagePopup = () => {\n    this.setState({isImagePopupOpen: false});\n  };\n\n  onCreateFileToggle = (fileType) => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: fileType || ''\n    });\n  };\n\n  onCreateFolderToggle = () => {\n    this.setState({isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow});\n  };\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  };\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.props.direntList;\n    let isDuplicated = direntList.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  };\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  };\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  };\n\n  onItemsDownload = () => {\n    let { path, repoID, selectedDirentList } = this.props;\n    if (selectedDirentList.length) {\n      if (selectedDirentList.length === 1 && !selectedDirentList[0].isDir()) {\n        let direntPath = Utils.joinPath(path, selectedDirentList[0].name);\n        let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n        location.href= url;\n        return;\n      }\n\n      let selectedDirentNames = selectedDirentList.map(dirent => {\n        return dirent.name;\n      });\n\n      this.setState({\n        isProgressDialogShow: true,\n        downloadItems: selectedDirentNames\n      });\n    }\n  };\n\n  onCloseZipDownloadDialog = () => {\n    this.setState({isProgressDialogShow: false});\n  };\n\n  // common contextmenu handle\n  onMouseDown = (event) => {\n    if (event.button === 2) {\n      event.stopPropagation();\n      return;\n    }\n  };\n\n  handleContextClick = (event, id, menuList, currentObject = null) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    let showMenuConfig = {\n      id: id,\n      position: { x, y },\n      target: event.target,\n      currentObject: currentObject,\n      menuList: menuList,\n    };\n\n    if (menuList.length === 0) {\n      return;\n    }\n\n    showMenu(showMenuConfig);\n  };\n\n  // table-container contextmenu handle\n  onContainerClick = () => {\n    hideMenu();\n    if (this.state.activeDirent) {\n      this.onDirentClick(null);\n    }\n  };\n\n  onContainerMouseDown = (event) => {\n    this.onMouseDown(event);\n  };\n\n  onContainerContextMenu = (event) => {\n    event.preventDefault();\n    // Display menu items based on the permissions of the current path\n    let permission = this.props.userPerm;\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(this.props.userPerm);\n    if (permission !== 'admin' && permission !== 'rw' && !isCustomPermission) {\n      return;\n    }\n\n    const {\n      NEW_FOLDER, NEW_FILE,\n      NEW_MARKDOWN_FILE,\n      NEW_EXCEL_FILE,\n      NEW_POWERPOINT_FILE,\n      NEW_WORD_FILE,\n      NEW_SEADOC_FILE\n    } = TextTranslation;\n\n    const direntsContainerMenuList = [\n      NEW_FOLDER, NEW_FILE, 'Divider',\n      NEW_MARKDOWN_FILE,\n      NEW_EXCEL_FILE,\n      NEW_POWERPOINT_FILE,\n      NEW_WORD_FILE\n    ];\n    const { currentRepoInfo } = this.props;\n    if (enableSeadoc && !currentRepoInfo.encrypted) {\n      direntsContainerMenuList.push(NEW_SEADOC_FILE);\n    }\n\n    if (this.props.selectedDirentList.length === 0) {\n      let id = 'dirent-container-menu';\n\n      // custom permission judgement\n      if (isCustomPermission) {\n        const { create: canCreate } = customPermission.permission;\n        if (!canCreate) return;\n      }\n\n      let menuList = direntsContainerMenuList;\n      this.handleContextClick(event, id, menuList);\n    } else {\n      if (this.props.selectedDirentList.length === 1) {\n        if (!this.state.activeDirent) {\n          let id = 'dirent-item-menu';\n          let dirent = this.props.selectedDirentList[0];\n          let menuList = this.getDirentItemMenuList(dirent, true);\n          this.handleContextClick(event, id, menuList, dirent);\n        } else {\n          this.onDirentClick(null);\n          event.preventDefault();\n          event.persist();\n\n          // custom permission judgement\n          if (isCustomPermission) {\n            const { modify } = customPermission.permission;\n            if (!modify) return;\n          }\n\n          setTimeout(() => {\n            let id = 'dirent-container-menu';\n\n            let menuList = direntsContainerMenuList;\n            this.handleContextClick(event, id, menuList);\n          }, 0);\n        }\n      } else {\n        let id = 'dirents-menu';\n        let menuList = [];\n        if (isCustomPermission) {\n          const { modify: canModify, copy: canCopy, download: canDownload, delete: canDelete } = customPermission.permission;\n          canModify && menuList.push(TextTranslation.MOVE);\n          canCopy && menuList.push(TextTranslation.COPY);\n          canDownload && menuList.push(TextTranslation.DOWNLOAD);\n          canDelete && menuList.push(TextTranslation.DELETE);\n        } else {\n          menuList = [TextTranslation.MOVE, TextTranslation.COPY, TextTranslation.DOWNLOAD, TextTranslation.DELETE];\n        }\n\n        this.handleContextClick(event, id, menuList);\n      }\n    }\n  };\n\n  onContainerMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'New Folder':\n        this.onCreateFolderToggle();\n        break;\n      case 'New File':\n        this.onCreateFileToggle();\n        break;\n      case 'New Markdown File':\n        this.onCreateFileToggle('.md');\n        break;\n      case 'New Excel File':\n        this.onCreateFileToggle('.xlsx');\n        break;\n      case 'New PowerPoint File':\n        this.onCreateFileToggle('.pptx');\n        break;\n      case 'New Word File':\n        this.onCreateFileToggle('.docx');\n        break;\n      case 'New SeaDoc File':\n        this.onCreateFileToggle('.sdoc');\n        break;\n      default:\n        break;\n    }\n\n    hideMenu();\n  };\n\n  onDirentsMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Move':\n        this.onMoveToggle();\n        break;\n      case 'Copy':\n        this.onCopyToggle();\n        break;\n      case 'Download':\n        this.onItemsDownload();\n        break;\n      case 'Delete':\n        this.props.onItemsDelete();\n        break;\n      default:\n        break;\n    }\n\n    hideMenu();\n  };\n\n  // table-thread contextmenu handle -- Shield event\n  onThreadMouseDown = (event) => {\n    this.onMouseDown(event);\n  };\n\n  onThreadContextMenu = (event) => {\n    event.stopPropagation();\n  };\n\n  // table-dirent-item contextmenu handle\n  onItemMouseDown = (event) => {\n    this.onMouseDown(event);\n  };\n\n  onItemContextMenu = (event, dirent) => {\n    // Display menu items according to the current dirent permission\n    if (this.props.selectedDirentList.length > 1) {\n      return;\n    }\n    this.onDirentClick(dirent);\n    let id = 'dirent-item-menu';\n    let menuList = this.getDirentItemMenuList(dirent, true);\n    this.handleContextClick(event, id, menuList, dirent);\n  };\n\n  setDirentItemRef = (index) => item => {\n    this.direntItems[index] = item;\n  };\n\n  onMenuItemClick = (operation, currentObject, event) => {\n    let index = this.getDirentIndex(currentObject);\n    this.direntItems[index].onMenuItemClick(operation, event);\n\n    hideMenu();\n  };\n\n  onShowMenu = (e) => {\n    this.freezeItem();\n  };\n\n  onHideMenu = (e) => {\n    this.unfreezeItem();\n  };\n\n  // contextmenu utils\n  getDirentIndex = (dirent) => {\n    let direntList = this.props.direntList;\n    let index = 0;\n    for (let i = 0; i < direntList.length; i++) {\n      if (direntList[i].name === dirent.name) {\n        index = i;\n        break;\n      }\n    }\n    return index;\n  };\n\n  getDirentItemMenuList = (dirent, isContextmenu) => {\n    const isRepoOwner = this.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    return Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n  };\n\n  onTableDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    this.enteredCounter++;\n    if (this.enteredCounter !== 0) {\n      if (this.state.isListDropTipShow) {\n        return ;\n      }\n      this.setState({isListDropTipShow: true});\n    }\n  };\n\n  onTableDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.dataTransfer.dropEffect === 'copy') {\n      return;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  };\n\n  onTableDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    this.enteredCounter--;\n    if (this.enteredCounter === 0) {\n      this.setState({isListDropTipShow: false});\n    }\n  };\n\n  tableDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.persist();\n    this.enteredCounter = 0;\n    this.setState({isListDropTipShow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n\n    let {nodeDirent, nodeParentPath, nodeRootPath} = dragStartItemData;\n\n    if (Array.isArray(dragStartItemData)) { //selected items\n      return;\n    }\n\n    if (nodeRootPath === this.props.path || nodeParentPath === this.props.path) {\n      return;\n    }\n\n    if (this.props.path.indexOf(nodeRootPath) !== -1) {\n      return;\n    }\n\n    this.props.onItemMove(this.props.currentRepoInfo, nodeDirent, this.props.path, nodeParentPath);\n  };\n\n  onShowDirentsDraggablePreview = () => {\n    this.setState({\n      isShowDirentsDraggablePreview: true,\n    });\n  };\n\n  onHideDirentsDraggablePreview = () => {\n    this.setState({\n      isShowDirentsDraggablePreview: false\n    });\n  };\n\n  render() {\n    const { direntList, sortBy, sortOrder } = this.props;\n\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    // sort\n    const sortByName = sortBy == 'name';\n    const sortByTime = sortBy == 'time';\n    const sortBySize = sortBy == 'size';\n    const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n    const isDesktop = Utils.isDesktop();\n\n    return (\n      <div\n        className={`table-container ${(this.state.isListDropTipShow && this.canDrop) ? 'table-drop-active' : ''}`}\n        onMouseDown={this.onContainerMouseDown}\n        onContextMenu={this.onContainerContextMenu}\n        onClick={this.onContainerClick}\n        onDragEnter={this.onTableDragEnter}\n        onDragOver={this.onTableDragOver}\n        onDragLeave={this.onTableDragLeave}\n        onDrop={this.tableDrop}\n      >\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? (\n            <thead onMouseDown={this.onThreadMouseDown} onContextMenu={this.onThreadContextMenu}>\n              <tr>\n                <th width=\"3%\" className=\"pl10\">\n                  <input type=\"checkbox\" className=\"vam\" onChange={this.props.onAllItemSelected} checked={this.props.isAllItemSelected} aria-label={this.props.isAllItemSelected ? gettext('Unselect all items') : gettext('Select all items')} />\n                </th>\n                <th width=\"3%\" className=\"pl10\">{/*icon */}</th>\n                <th width=\"5%\" className=\"pl10\">{/*star */}</th>\n                <th width=\"39%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"6%\">{/*tag */}</th>\n                <th width=\"18%\">{/*operation */}</th>\n                <th width=\"11%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n                <th width=\"15%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n              </tr>\n            </thead>\n          ) : (\n            <thead>\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            </thead>\n          )}\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return (\n                <DirentListItem\n                  ref={this.setDirentItemRef(index)}\n                  key={index}\n                  dirent={dirent}\n                  path={this.props.path}\n                  repoID={this.props.repoID}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  isAdmin={this.isAdmin}\n                  isRepoOwner={this.isRepoOwner}\n                  repoEncrypted={this.repoEncrypted}\n                  enableDirPrivateShare={this.props.enableDirPrivateShare}\n                  isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                  onItemClick={this.props.onItemClick}\n                  onItemRenameToggle={this.onItemRenameToggle}\n                  onItemSelected={this.onItemSelected}\n                  onItemDelete={this.props.onItemDelete}\n                  onItemRename={this.onItemRename}\n                  onItemMove={this.props.onItemMove}\n                  onItemCopy={this.props.onItemCopy}\n                  onItemConvert={this.props.onItemConvert}\n                  updateDirent={this.props.updateDirent}\n                  isItemFreezed={this.state.isItemFreezed}\n                  freezeItem={this.freezeItem}\n                  unfreezeItem={this.unfreezeItem}\n                  onDirentClick={this.onDirentClick}\n                  showImagePopup={this.showImagePopup}\n                  onItemMouseDown={this.onItemMouseDown}\n                  onItemContextMenu={this.onItemContextMenu}\n                  selectedDirentList={this.props.selectedDirentList}\n                  activeDirent={this.state.activeDirent}\n                  repoTags={this.props.repoTags}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                  getDirentItemMenuList={this.getDirentItemMenuList}\n                  showDirentDetail={this.props.showDirentDetail}\n                  onItemsMove={this.props.onItemsMove}\n                  onShowDirentsDraggablePreview={this.onShowDirentsDraggablePreview}\n                  loadDirentList={this.props.loadDirentList}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        <Fragment>\n          <ContextMenu\n            id={'dirent-container-menu'}\n            onMenuItemClick={this.onContainerMenuItemClick}\n          />\n          <ContextMenu\n            id={'dirent-item-menu'}\n            onMenuItemClick={this.onMenuItemClick}\n            onShowMenu={this.onShowMenu}\n            onHideMenu={this.onHideMenu}\n          />\n          <ContextMenu\n            id={'dirents-menu'}\n            onMenuItemClick={this.onDirentsMenuItemClick}\n          />\n          {this.state.isShowDirentsDraggablePreview &&\n            <ModalPortal>\n              <DirentsDraggedPreview\n                selectedDirentList={this.props.selectedDirentList}\n                onHideDirentsDraggablePreview={this.onHideDirentsDraggablePreview}\n                dragStartPosition={this.state.dragStartPosition}\n              />\n            </ModalPortal>\n          }\n          {this.state.isImagePopupOpen && (\n            <ModalPortal>\n              <ImageDialog\n                imageItems={this.state.imageItems}\n                imageIndex={this.state.imageIndex}\n                closeImagePopup={this.closeImagePopup}\n                moveToPrevImage={this.moveToPrevImage}\n                moveToNextImage={this.moveToNextImage}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isCreateFolderDialogShow && (\n            <ModalPortal>\n              <CreateFolder\n                parentPath={this.props.path}\n                onAddFolder={this.onAddFolder}\n                checkDuplicatedName={this.checkDuplicatedName}\n                addFolderCancel={this.onCreateFolderToggle}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isCreateFileDialogShow && (\n            <ModalPortal>\n              <CreateFile\n                parentPath={this.props.path}\n                fileType={this.state.fileType}\n                onAddFile={this.props.onAddFile}\n                checkDuplicatedName={this.checkDuplicatedName}\n                toggleDialog={this.onCreateFileToggle}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isMoveDialogShow &&\n            <MoveDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              isMutipleOperation={this.state.isMutipleOperation}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n              onCancelMove={this.onMoveToggle}\n            />\n          }\n          {this.state.isCopyDialogShow &&\n            <CopyDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              selectedDirentList={this.props.selectedDirentList}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemsCopy={this.props.onItemsCopy}\n              onCancelCopy={this.onCopyToggle}\n            />\n          }\n          {this.state.isProgressDialogShow &&\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={this.state.downloadItems}\n              toggleDialog={this.onCloseZipDownloadDialog}\n            />\n          }\n        </Fragment>\n      </div>\n    );\n  }\n}\n\nDirentListView.propTypes = propTypes;\n\nexport default DirentListView;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/operations/internal-link-operation/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-chooser/tree-list-view.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/custom-permission/custom-permission-editor.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toast/alert.js",["4705"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { css } from 'glamor';\n\nclass Alert extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.containerStyle = css({\n      borderRadius: '3px',\n      backgroundColor: '#fff',\n      padding: '10px 16px',\n      display: 'flex',\n      boxSizing: 'border-box',\n      boxShadow: 'rgba(67, 90, 111, 0.3) 0px 0px 1px, rgba(67, 90, 111, 0.47) 0px 8px 10px -4px',\n      justifyContent: 'space-between',\n      flexDirection: 'row',\n    });\n\n    this.containerBorderSuccess = css({\n      borderLeft: '3px solid rgb(71, 184, 129)'\n    });\n\n    this.containerBorderWarn = css({\n      borderLeft: '3px solid rgb(217, 130, 43)'\n    });\n\n    this.containerBorderDanger = css({\n      borderLeft: '3px solid rgb(236, 76, 71)'\n    });\n\n    this.containerBorderNotify = css({\n      borderLeft: '3px solid rgb(16, 112, 202)'\n    });\n\n\n    this.toastTextTitle = css({\n      fontWeight: '600',\n      fontSize: '14px',\n      color: '#435a6f',\n      margin: '0'\n    });\n\n    this.toastTextChild = css({\n      fontSize: '14px',\n      color: '#999',\n      margin: '0'\n    });\n    this.toastClose = css({\n      marginLeft: '15px',\n      height: '24px',\n      width: '24px',\n      lineHeight: '22px',\n      fontWeight: '700',\n      textAlign: 'center',\n      fontSize: '20px',\n      color: '#000',\n      cursor: 'pointer',\n      opacity: '0.5',\n      ':hover': {\n        opacity: 1\n      }\n    });\n\n    this.toastIcon = css({\n      marginRight: '10px',\n      width: '14px',\n      height: '20px',\n      lineHeight: '20px'\n    });\n  }\n\n  getContainerStyle(intent) {\n    switch (intent) {\n      case 'success':\n        return { borderStyle: this.containerBorderSuccess, iconColor: css({color: 'rgb(71, 184, 129)'}), iconClass: 'fa fa-check-circle' };\n      case 'warning':\n        return { borderStyle: this.containerBorderWarn, iconColor: css({color: 'rgb(217, 130, 43)'}) , iconClass: 'fa fa-exclamation-triangle' };\n      case 'none':\n        return { borderStyle: this.containerBorderNotify, iconColor: css({color: 'rgb(16, 112, 202)'}), iconClass: 'fa fa-exclamation-circle' };\n      case 'notify-in-progress':\n        return { borderStyle: this.containerBorderNotify, iconColor: css({width: '15px', height: '15px', margin: '3px'}), iconClass: 'loading-icon' };\n      case  'danger':\n        return { borderStyle: this.containerBorderDanger, iconColor: css({color: 'rgb(236, 76, 71)'}), iconClass: 'fa fa-exclamation-circle' };\n    }\n  }\n\n\n  render() {\n    const toastStyle = this.getContainerStyle(this.props.intent);\n    return (\n      <div {...css(toastStyle.borderStyle, this.containerStyle)}>\n        <div className={this.toastIcon} >\n          <i className={toastStyle.iconClass} {...toastStyle.iconColor}/>\n        </div>\n        <div className={this.toastTextContainer}>\n          <p className={this.toastTextTitle}>{this.props.title}</p>\n          {this.props.children ? <p className={this.toastTextChild}>{this.props.children}</p> : null}\n        </div>\n        <div onClick={this.props.onRemove} className={this.toastClose}>\n          <span>&times;</span>\n        </div>\n      </div>\n    );\n  }\n}\n\nAlert.propTypes = {\n  onRemove: PropTypes.func.isRequired,\n  children: PropTypes.any,\n  title: PropTypes.string.isRequired,\n  intent: PropTypes.string.isRequired,\n};\n\nexport default Alert;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/custom-permission/custom-permission-item.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/context-menu/globalEventListener.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/btn-qr-code.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/context-menu/helpers.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/seatable-integration-account-setting-widgets/seatable-account-setting-list.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/constants/zIndexes.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/seatable-integration-account-setting-widgets/add-seatable-account-setting.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/constants/keyCodes.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/lib-sub-folder-set-group-permission-dialog.js",["4706"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { gettext, isPro, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\nimport FileChooser from '../file-chooser/file-chooser';\nimport { SeahubSelect, NoGroupMessage } from '../common/select';\nimport toaster from '../../components/toast';\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  deleteGroupPermissionItem = () => {\n    let item = this.props.item;\n    this.props.deleteGroupPermissionItem(item);\n  };\n\n  onChangeGroupPermission = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeGroupPermission(item, permission);\n  };\n\n  render() {\n    let item = this.props.item;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td>\n          <a href={`${siteRoot}group/${item.group_id}/`} target=\"_blank\" rel=\"noreferrer\">{item.group_name}</a>\n        </td>\n        {this.props.showPath &&\n          <td>\n            <a href={`${siteRoot}library/${item.repo_id}/${Utils.encodePath(this.props.repoName + item.folder_path)}`}>{item.folder_name}</a>\n          </td>\n        }\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            autoFocus={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={item.permission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeGroupPermission}\n          />\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteGroupPermissionItem}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nGroupItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  permissions: PropTypes.array.isRequired,\n  showPath: PropTypes.bool.isRequired,\n  repoName: PropTypes.string,\n  deleteGroupPermissionItem: PropTypes.func.isRequired,\n  onChangeGroupPermission: PropTypes.func.isRequired,\n};\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  isDepartmentRepo: PropTypes.bool,\n  repoName: PropTypes.string,\n  folderPath: PropTypes.string,\n};\n\nclass LibSubFolderSetGroupPermissionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errorMsg: [],\n      permission: 'rw',\n      groupPermissionItems: [],\n      folderPath: '',\n      showFileChooser: false\n    };\n    this.options = [];\n    if (!isPro) {\n      this.permissions = ['r', 'rw'];\n    } else {\n      this.permissions = ['r', 'rw', 'cloud-edit', 'preview', 'invisible'];\n    }\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({selectedOption: option});\n  };\n\n  componentDidMount() {\n    this.loadOptions();\n    this.listGroupPermissionItems();\n  }\n\n  loadOptions = () => {\n    seafileAPI.shareableGroups().then((res) => {\n      this.options = res.data.map((item, index) => {\n        return {\n          id: item.id,\n          label: item.name,\n          value: item.name\n        };\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  listGroupPermissionItems = () => {\n    const { isDepartmentRepo, repoID, folderPath } = this.props;\n    const request = isDepartmentRepo ?\n      seafileAPI.listDepartmentRepoGroupFolderPerm(repoID, folderPath) :\n      seafileAPI.listGroupFolderPerm(repoID, folderPath);\n    request.then((res) => {\n      if (res.data.length !== 0) {\n        this.setState({\n          groupPermissionItems: res.data\n        });\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  };\n\n  addGroupFolderPerm = () => {\n    const { selectedOption } = this.state;\n    const folderPath = this.props.folderPath || this.state.folderPath;\n    if (!selectedOption || !folderPath) {\n      return false;\n    }\n\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.addDepartmentRepoGroupFolderPerm(this.props.repoID, this.state.permission, folderPath, selectedOption.id) :\n      seafileAPI.addGroupFolderPerm(this.props.repoID, this.state.permission, folderPath, selectedOption.id);\n    request.then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0; i < res.data.failed.length; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n      this.setState({\n        errorMsg: errorMsg,\n        groupPermissionItems: this.state.groupPermissionItems.concat(res.data.success),\n        selectedOption: null,\n        permission: 'rw',\n        folderPath: ''\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  deleteGroupPermissionItem = (item) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.deleteDepartmentRepoGroupFolderPerm(item.repo_id, item.permission, item.folder_path, item.group_id) :\n      seafileAPI.deleteGroupFolderPerm(item.repo_id, item.permission, item.folder_path, item.group_id);\n    request.then(() => {\n      this.setState({\n        groupPermissionItems: this.state.groupPermissionItems.filter(deletedItem => { return deletedItem != item; })\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onChangeGroupPermission = (item, permission) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.updateDepartmentRepoGroupFolderPerm(item.repo_id, permission, item.folder_path, item.group_id) :\n      seafileAPI.updateGroupFolderPerm(item.repo_id, permission, item.folder_path, item.group_id);\n    request.then(() => {\n      this.updateGroupPermission(item, permission);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  updateGroupPermission = (item, permission) => {\n    let groupID = item.group_id;\n    let groupPermissionItems = this.state.groupPermissionItems.map(sharedItem => {\n      let sharedItemGroupID = sharedItem.group_id;\n      if (groupID === sharedItemGroupID && item.folder_path === sharedItem.folder_path) {\n        sharedItem.permission = permission;\n      }\n      return sharedItem;\n    });\n    this.setState({groupPermissionItems: groupPermissionItems});\n  };\n\n  onSetSubFolder = (e) => {\n    this.setState({\n      folderPath: e.target.value\n    });\n  };\n\n  toggleFileChooser = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser,\n      folderPath: ''\n    });\n  };\n\n  toggleSubFolder = (repo, path, item) => {\n    this.setState({\n      folderPath: path,\n    });\n  };\n\n  handleSubmit = () => {\n    this.setState({\n      folderPath: this.state.folderPath || '/',\n      showFileChooser: !this.state.showFileChooser\n    });\n  };\n\n  onRepoItemClick = () => {\n    this.setState({\n      folderPath: '/'\n    });\n  };\n\n  render() {\n    let showPath = this.props.folderPath ? false : true;\n\n    if (this.state.showFileChooser) {\n      return (\n        <div>\n          <FileChooser\n            repoID={this.props.repoID}\n            mode={'only_current_library'}\n            onDirentItemClick={this.toggleSubFolder}\n            onRepoItemClick={this.onRepoItemClick}\n          />\n          <div className=\"modal-footer\">\n            <Button color=\"secondary\" onClick={this.toggleFileChooser}>{gettext('Cancel')}</Button>\n            <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      );\n    }\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width={showPath ? '32%' : '55%'}>{gettext('Group')}</th>\n          {showPath &&\n          <th width=\"32%\">{gettext('Folder')}</th>\n          }\n          <th width={showPath ? '24%' : '30%'}>{gettext('Permission')}</th>\n          <th width={showPath ? '12%' : '15%'}></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        <table className=\"w-xs-250\">\n          {thead}\n          <tbody>\n            <tr>\n              <td>\n                <SeahubSelect\n                  onChange={this.handleSelectChange}\n                  options={this.options}\n                  placeholder={gettext('Select a group')}\n                  maxMenuHeight={200}\n                  value={this.state.selectedOption}\n                  components={{ NoOptionsMessage: NoGroupMessage }}\n                />\n              </td>\n              {showPath &&\n                <td>\n                  <InputGroup>\n                    <Input value={this.state.folderPath} onChange={this.onSetSubFolder} />\n                    <InputGroupAddon addonType=\"append\"><Button className=\"sf2-icon-plus\" onClick={this.toggleFileChooser}></Button></InputGroupAddon>\n                  </InputGroup>\n                </td>\n              }\n              <td>\n                <SharePermissionEditor\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.addGroupFolderPerm}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = item.group_id + ': ' + item.error_msg;\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden w-xs-250\">\n            {thead}\n            <tbody>\n              {this.state.groupPermissionItems.map((item, index) => {\n                return (\n                  <GroupItem\n                    key={index}\n                    item={item}\n                    permissions={this.permissions}\n                    deleteGroupPermissionItem={this.deleteGroupPermissionItem}\n                    onChangeGroupPermission={this.onChangeGroupPermission}\n                    showPath={showPath}\n                    repoName={this.props.repoName}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nLibSubFolderSetGroupPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderSetGroupPermissionDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/select-editor/repo-api-token-permission-editor.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/lib-sub-folder-set-user-permission-dialog.js",["4707"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, isPro, siteRoot } from '../../utils/constants';\nimport { Button, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport UserSelect from '../user-select';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\nimport FileChooser from '../file-chooser/file-chooser';\nimport toaster from '../../components/toast';\n\nclass UserItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  deleteUserFolderPermission = () => {\n    let item = this.props.item;\n    this.props.deleteUserFolderPermission(item);\n  };\n\n  onChangeUserFolderPerm = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeUserFolderPerm(item.repo_id, permission, item.folder_path, item.user_email);\n  };\n\n  render() {\n    let item = this.props.item;\n    let currentPermission = item.permission;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td>\n          <a href={`${siteRoot}profile/${encodeURIComponent(item.user_email)}/`} target=\"_blank\" rel=\"noreferrer\">{item.user_name}</a>\n        </td>\n        {this.props.showPath &&\n          <td>\n            <a href={`${siteRoot}library/${item.repo_id}/${Utils.encodePath(this.props.repoName + item.folder_path)}`}>{item.folder_name}</a>\n          </td>\n        }\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            autoFocus={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={currentPermission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeUserFolderPerm}\n          />\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteUserFolderPermission}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nUserItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  permissions: PropTypes.array.isRequired,\n  deleteUserFolderPermission: PropTypes.func.isRequired,\n  onChangeUserFolderPerm: PropTypes.func.isRequired,\n  showPath: PropTypes.bool.isRequired,\n  repoName: PropTypes.string,\n};\n\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  isDepartmentRepo: PropTypes.bool,\n  folderPath: PropTypes.string,\n  repoName: PropTypes.string,\n};\n\n\nclass LibSubFolderSetUserPermissionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedUsers: null,\n      errorMsg: [],\n      permission: 'rw',\n      userFolderPermItems: [],\n      folderPath: '',\n      showFileChooser: false\n    };\n    if (!isPro) {\n      this.permissions = ['r', 'rw'];\n    } else {\n      this.permissions = ['r', 'rw', 'cloud-edit', 'preview', 'invisible'];\n    }\n  }\n\n  handleUserSelectChange = (option) => {\n    this.setState({selectedUsers: option});\n  };\n\n  componentDidMount() {\n    const {repoID, folderPath, isDepartmentRepo} = this.props;\n    const request = isDepartmentRepo ?\n      seafileAPI.listDepartmentRepoUserFolderPerm(repoID, folderPath) :\n      seafileAPI.listUserFolderPerm(repoID, folderPath);\n    request.then((res) => {\n      if (res.data.length !== 0) {\n        this.setState({userFolderPermItems: res.data});\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  };\n\n  addUserFolderPerm = () => {\n    const { selectedUsers } = this.state;\n    const folderPath = this.props.folderPath || this.state.folderPath;\n    if (!selectedUsers || !selectedUsers.length || !folderPath) { // selectedUsers: null or []\n      return false;\n    }\n\n    const users = selectedUsers.map((item, index) => item.email);\n\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.addDepartmentRepoUserFolderPerm(this.props.repoID, this.state.permission, folderPath, users) :\n      seafileAPI.addUserFolderPerm(this.props.repoID, this.state.permission, folderPath, users);\n    request.then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0; i < res.data.failed.length; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n      this.setState({\n        errorMsg: errorMsg,\n        userFolderPermItems: this.state.userFolderPermItems.concat(res.data.success),\n        selectedUsers: null,\n        permission: 'rw',\n        folderPath: '',\n      });\n      this.refs.userSelect.clearSelect();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  deleteUserFolderPermItem = (item) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.deleteDepartmentRepoUserFolderPerm(item.repo_id, item.permission, item.folder_path, item.user_email) :\n      seafileAPI.deleteUserFolderPerm(item.repo_id, item.permission, item.folder_path, item.user_email);\n    request.then(res => {\n      this.setState({\n        userFolderPermItems: this.state.userFolderPermItems.filter(deletedItem => {\n          return deletedItem != item;\n        })\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onChangeUserFolderPerm = (repoID, permission, folderPath, userEmail) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.updateDepartmentRepoUserFolderPerm(repoID, permission, folderPath, userEmail) :\n      seafileAPI.updateUserFolderPerm(repoID, permission, folderPath, userEmail);\n    request.then(res => {\n      let userFolderPermItems = this.state.userFolderPermItems.map(item => {\n        if (item.user_email === userEmail && item.folder_path === folderPath) {\n          item.permission = permission;\n        }\n        return item;\n      });\n      this.setState({userFolderPermItems: userFolderPermItems});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onSetSubFolder = (e) => {\n    this.setState({\n      folderPath: e.target.value\n    });\n  };\n\n  toggleFileChooser = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser,\n      folderPath: ''\n    });\n  };\n\n  toggleSubFolder = (repo, path, item) => {\n    this.setState({\n      folderPath: path,\n    });\n  };\n\n  handleFileChooserSubmit = () => {\n    this.setState({\n      folderPath: this.state.folderPath || '/',\n      showFileChooser: !this.state.showFileChooser\n    });\n  };\n\n  onRepoItemClick = () => {\n    this.setState({\n      folderPath: '/'\n    });\n  };\n\n  render() {\n    let showPath = this.props.folderPath ? false : true;\n    let { userFolderPermItems } = this.state;\n\n    if (this.state.showFileChooser) {\n      return (\n        <div>\n          <FileChooser\n            repoID={this.props.repoID}\n            mode={'only_current_library'}\n            onDirentItemClick={this.toggleSubFolder}\n            onRepoItemClick={this.onRepoItemClick}\n          />\n          <div className=\"modal-footer\">\n            <Button color=\"secondary\" onClick={this.toggleFileChooser}>{gettext('Cancel')}</Button>\n            <Button color=\"primary\" onClick={this.handleFileChooserSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      );\n    }\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width={showPath ? '32%': '55%'}>{gettext('User')}</th>\n          {showPath &&\n          <th width=\"32%\">{gettext('Folder')}</th>\n          }\n          <th width={showPath ? '24%': '30%'}>{gettext('Permission')}</th>\n          <th width={showPath ? '12%' : '15%'}></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        <table className=\"w-xs-250\">\n          {thead}\n          <tbody>\n            <tr>\n              <td>\n                <UserSelect\n                  ref=\"userSelect\"\n                  isMulti={true}\n                  className=\"reviewer-select\"\n                  placeholder={gettext('Search users')}\n                  onSelectChange={this.handleUserSelectChange}\n                  value={this.state.selectedUsers}\n                />\n              </td>\n              {showPath &&\n                <td>\n                  <InputGroup>\n                    <Input value={this.state.folderPath} onChange={this.onSetSubFolder} />\n                    <InputGroupAddon addonType=\"append\"><Button className=\"sf2-icon-plus\" onClick={this.toggleFileChooser}></Button></InputGroupAddon>\n                  </InputGroup>\n                </td>\n              }\n              <td>\n                <SharePermissionEditor\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.addUserFolderPerm}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = '';\n                if (item.user_email) {\n                  errMessage = item.user_email + ': ' + item.error_msg;\n                } else {\n                  errMessage = item;\n                }\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden w-xs-250\">\n            {thead}\n            <tbody>\n              {userFolderPermItems.map((item, index) => {\n                return (\n                  <UserItem\n                    key={index}\n                    item={item}\n                    permissions={this.permissions}\n                    deleteUserFolderPermission={this.deleteUserFolderPermItem}\n                    onChangeUserFolderPerm={this.onChangeUserFolderPerm}\n                    showPath={showPath}\n                    repoName={this.props.repoName}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nLibSubFolderSetUserPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderSetUserPermissionDialog;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/services/share-social-media.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/share-link-panel/link-item.js",["4708","4709","4710","4711"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport copy from 'copy-to-clipboard';\nimport toaster from '../toast';\nimport { isPro, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport CommonOperationConfirmationDialog from '../../components/dialog/common-operation-confirmation-dialog';\n\nconst propTypes = {\n  item: PropTypes.object.isRequired,\n  showLinkDetails : PropTypes.func.isRequired,\n  toggleSelectLink: PropTypes.func.isRequired,\n  deleteLink: PropTypes.func.isRequired\n};\n\nclass LinkItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemOpVisible: false,\n      isDeleteShareLinkDialogOpen: false\n    };\n  }\n\n  onMouseOver = () => {\n    this.setState({\n      isItemOpVisible: true\n    });\n  };\n\n  onMouseOut = () => {\n    this.setState({\n      isItemOpVisible: false\n    });\n  };\n\n  cutLink = (link) => {\n    let length = link.length;\n    return link.slice(0, 9) + '...' + link.slice(length-5);\n  };\n\n  onDeleteIconClicked = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.toggleDeleteShareLinkDialog();\n  };\n\n  toggleDeleteShareLinkDialog = () => {\n    this.setState({isDeleteShareLinkDialogOpen: !this.state.isDeleteShareLinkDialogOpen});\n  };\n\n  onCopyIconClicked = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const { item } = this.props;\n    copy(item.link);\n    toaster.success(gettext('Share link is copied to the clipboard.'));\n  };\n\n  clickItem = (e) => {\n    this.props.showLinkDetails(this.props.item);\n  };\n\n  onCheckboxClicked = (e) => {\n    e.stopPropagation();\n  };\n\n  toggleSelectLink = (e) => {\n    const { item } = this.props;\n    this.props.toggleSelectLink(item, e.target.checked);\n  };\n\n  deleteLink = () => {\n    const { item } = this.props;\n    this.props.deleteLink(item.token);\n  };\n\n  render() {\n    const { isItemOpVisible } = this.state;\n    const { item } = this.props;\n    const { isSelected = false, permissions, link, expire_date } = item;\n    const currentPermission = Utils.getShareLinkPermissionStr(permissions);\n    return (\n      <Fragment>\n        <tr\n          onClick={this.clickItem}\n          onMouseOver={this.onMouseOver}\n          onMouseOut={this.onMouseOut}\n          className={`cursor-pointer ${isSelected ? 'tr-highlight' : ''}`}\n        >\n          <td className=\"text-center\">\n            <input\n              type=\"checkbox\"\n              checked={isSelected}\n              className=\"vam\"\n              onClick={this.onCheckboxClicked}\n              onChange={this.toggleSelectLink}\n            />\n          </td>\n          <td>\n            {this.cutLink(link)}\n          </td>\n          <td>\n            {(isPro && permissions) && Utils.getShareLinkPermissionObject(currentPermission).text}\n          </td>\n          <td>\n            {expire_date ? moment(expire_date).format('YYYY-MM-DD HH:mm') : '--'}\n          </td>\n          <td>\n            <a href=\"#\" role=\"button\" onClick={this.onCopyIconClicked} className={`sf2-icon-copy action-icon ${isItemOpVisible ? '' : 'invisible'}`} title={gettext('Copy')} aria-label={gettext('Copy')}></a>\n            <a href=\"#\" role=\"button\" onClick={this.onDeleteIconClicked} className={`sf2-icon-delete action-icon ${isItemOpVisible ? '' : 'invisible'}`} title={gettext('Delete')} aria-label={gettext('Delete')}></a>\n          </td>\n        </tr>\n        {this.state.isDeleteShareLinkDialogOpen && (\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete share link')}\n            message={gettext('Are you sure you want to delete the share link?')}\n            executeOperation={this.deleteLink}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteShareLinkDialog}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nLinkItem.propTypes = propTypes;\n\nexport default LinkItem;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/repo-share-admin/upload-links.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/services/china-share-info.js",[],["4712"],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/create-tag-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/repo-share-admin/user-shares.js",["4713"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot, isPro, username } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport SharePermissionEditor from '../../../components/select-editor/share-permission-editor';\n\nconst itemPropTypes = {\n  item: PropTypes.object.isRequired,\n  deleteItem: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      permission: this.props.item.permission,\n      isOperationShow: false,\n      isShowPermEditor: false,\n    };\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      if (this.props.item.path === '/' && this.props.isRepoOwner) {\n        this.permissions.push('admin');\n      }\n      this.permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteLink = (e) => {\n    e.preventDefault();\n    this.props.deleteItem(this.props.item);\n  };\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    seafileAPI.updateShareToUserItemPermission(item.repo_id, item.path, 'user', item.share_to, permission).then(() => {\n      this.setState({\n        permission: permission,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onEditPermission = (event) => {\n    event.nativeEvent.stopImmediatePropagation();\n    this.setState({isShowPermEditor: true});\n  };\n\n  render() {\n\n    let objUrl;\n    let item = this.props.item;\n    let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n\n    objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td>\n          <Link to={objUrl}>{Utils.getFolderName(item.path)}</Link>\n        </td>\n        <td className=\"name\">{item.share_to_name}</td>\n        <td>\n          {!this.state.isShowPermEditor && (\n            <div>\n              <span>{item.permission_name || Utils.sharePerms(this.state.permission)}</span>\n              {this.state.isOperationShow && (\n                <a href=\"#\"\n                  role=\"button\"\n                  aria-label={gettext('Edit')}\n                  title={gettext('Edit')}\n                  className=\"fa fa-pencil-alt attr-action-icon\"\n                  onClick={this.onEditPermission}>\n                </a>\n              )}\n            </div>\n          )}\n          {this.state.isShowPermEditor && (\n            <SharePermissionEditor\n              repoID={item.repo_id}\n              isTextMode={true}\n              isEditIconShow={this.state.isOperationShow}\n              isEditing={true}\n              currentPermission={this.state.permission}\n              permissions={this.permissions}\n              onPermissionChanged={this.changePerm}\n            />\n          )}\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'invisible'}`}\n            onClick={this.onDeleteLink}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n};\n\nclass RepoShareAdminUserShares extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getAllRepoFolderShareInfo(this.props.repo.repo_id, 'user').then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.share_info_list,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteItem = (item) => {\n    seafileAPI.deleteShareToUserItem(item.repo_id, item.path, 'user', item.share_to).then(res => {\n      let items = this.state.items.filter(shareItem => {\n        return shareItem.path + shareItem.share_to !== item.path + item.share_to;\n      });\n      this.setState({items: items});\n      let message = gettext('Successfully deleted 1 item');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { loading, errorMsg, items } = this.state;\n    const { repo } = this.props;\n    const isRepoOwner = repo.owner_email === username;\n    return (\n      <Fragment>\n        {loading && <Loading />}\n        {!loading && errorMsg && <p className=\"error text-center mt-8\">{errorMsg}</p>}\n        {!loading && !errorMsg && !items.length &&\n        <EmptyTip forDialog={true}>\n          <p className=\"text-secondary\">{gettext('No user shares')}</p>\n        </EmptyTip>\n        }\n        {!loading && !errorMsg && items.length > 0 &&\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"30%\">{gettext('User')}</th>\n              <th width=\"30%\">{gettext('Permission')}</th>\n              <th width=\"10%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (\n                <Item\n                  key={index}\n                  item={item}\n                  deleteItem={this.deleteItem}\n                  isRepoOwner={isRepoOwner}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        }\n      </Fragment>\n    );\n  }\n}\n\nRepoShareAdminUserShares.propTypes = propTypes;\n\nexport default RepoShareAdminUserShares;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/repo-share-admin/group-shares.js",["4714"],[],"import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot, isPro, username } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport SharePermissionEditor from '../../../components/select-editor/share-permission-editor';\n\nconst itemPropTypes = {\n  item: PropTypes.object.isRequired,\n  deleteItem: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      permission: this.props.item.permission,\n      isOperationShow: false,\n      isShowPermEditor: false,\n    };\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      if (this.props.item.path === '/' && this.props.isRepoOwner) {\n        this.permissions.push('admin');\n      }\n      this.permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteLink = (e) => {\n    e.preventDefault();\n    this.props.deleteItem(this.props.item);\n  };\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    seafileAPI.updateShareToGroupItemPermission(item.repo_id, item.path, 'group', item.share_to, permission).then(() => {\n      this.setState({\n        permission: permission,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onEditPermission = (event) => {\n    event.nativeEvent.stopImmediatePropagation();\n    this.setState({isShowPermEditor: true});\n  };\n\n  render() {\n\n    let objUrl;\n    let item = this.props.item;\n    let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n\n    objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td>\n          <Link to={objUrl}>{Utils.getFolderName(item.path)}</Link>\n        </td>\n        <td className=\"name\">{item.share_to_name}</td>\n        <td>\n          {!this.state.isShowPermEditor && (\n            <div>\n              <span>{item.permission_name || Utils.sharePerms(this.state.permission)}</span>\n              {this.state.isOperationShow && (\n                <a href=\"#\"\n                  role=\"button\"\n                  aria-label={gettext('Edit')}\n                  title={gettext('Edit')}\n                  className=\"fa fa-pencil-alt attr-action-icon\"\n                  onClick={this.onEditPermission}>\n                </a>\n              )}\n            </div>\n          )}\n          {this.state.isShowPermEditor && (\n            <SharePermissionEditor\n              repoID={item.repo_id}\n              isTextMode={true}\n              isEditIconShow={this.state.isOperationShow}\n              isEditing={true}\n              currentPermission={this.state.permission}\n              permissions={this.permissions}\n              onPermissionChanged={this.changePerm}\n            />\n          )}\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'invisible'}`}\n            onClick={this.onDeleteLink}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n};\n\nclass RepoShareAdminGroupShares extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getAllRepoFolderShareInfo(this.props.repo.repo_id, 'group').then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.share_info_list,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteItem = (item) => {\n    seafileAPI.deleteShareToGroupItem(item.repo_id, item.path, 'group', item.share_to).then(res => {\n      let items = this.state.items.filter(shareItem => {\n        return shareItem.path + shareItem.share_to !== item.path + item.share_to;\n      });\n      this.setState({items: items});\n      let message = gettext('Successfully deleted 1 item');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { loading, errorMsg, items } = this.state;\n    const { repo } = this.props;\n    const isRepoOwner = repo.owner_email === username;\n    return (\n      <Fragment>\n        {loading && <Loading />}\n        {!loading && errorMsg && <p className=\"error text-center mt-8\">{errorMsg}</p>}\n        {!loading && !errorMsg && !items.length &&\n        <EmptyTip forDialog={true}>\n          <p className=\"text-secondary\">{gettext('No group shares')}</p>\n        </EmptyTip>\n        }\n        {!loading && !errorMsg && items.length > 0 &&\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"30%\">{gettext('Group')}</th>\n              <th width=\"30%\">{gettext('Permission')}</th>\n              <th width=\"10%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (\n                <Item\n                  key={index}\n                  item={item}\n                  deleteItem={this.deleteItem}\n                  isRepoOwner={isRepoOwner}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        }\n      </Fragment>\n    );\n  }\n}\n\nRepoShareAdminGroupShares.propTypes = propTypes;\n\nexport default RepoShareAdminGroupShares;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dirent-grid-view/dirent-grid-item.js",["4715"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MD5 from 'MD5';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  showImagePopup: PropTypes.func.isRequired,\n  onGridItemContextMenu: PropTypes.func.isRequired,\n  onGridItemClick: PropTypes.func.isRequired,\n  activeDirent: PropTypes.object,\n  onGridItemMouseDown: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n  onItemMove: PropTypes.func.isRequired,\n};\n\nclass DirentGridItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isGridSelected: false,\n      isGridDropTipShow: false,\n    };\n\n    const { dirent } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(dirent.permission);\n    this.isCustomPermission = isCustomPermission;\n    this.customPermission = customPermission;\n    this.canPreview = true;\n    this.canDrag = dirent.permission === 'rw';\n    if (isCustomPermission) {\n      const { preview, modify } = customPermission.permission;\n      this.canPreview = preview || modify;\n      this.canDrag = modify;\n    }\n\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    this.setState({isGridSelected: false}, () => {\n      if (nextProps.activeDirent && nextProps.activeDirent.name === nextProps.dirent.name) {\n        this.setState({isGridSelected: true});\n      }\n    });\n  }\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  };\n\n  onItemClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const { dirent, activeDirent } = this.props;\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    // is have preview permission\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (dirent === activeDirent) {\n      this.setState({isGridSelected: false});\n      if (Utils.imageCheck(dirent.name)) {\n        this.props.showImagePopup(dirent);\n      } else {\n        this.props.onItemClick(dirent);\n      }\n    } else {\n      this.setState({isGridSelected: false});\n      this.props.onGridItemClick(this.props.dirent);\n    }\n  };\n\n  onItemLinkClick = (e) => {\n    e.preventDefault();\n    const dirent = this.props.dirent;\n\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    // is have preview permission\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (Utils.imageCheck(dirent.name)) {\n      this.props.showImagePopup(dirent);\n    } else {\n      this.props.onItemClick(dirent);\n    }\n  };\n\n  onGridItemDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    let dragStartItemData = {nodeDirent: this.props.dirent, nodeParentPath: this.props.path};\n    dragStartItemData = JSON.stringify(dragStartItemData);\n\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartItemData);\n  };\n\n  onGridItemDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    if (this.props.dirent.type === 'dir') {\n      this.setState({isGridDropTipShow: true});\n    }\n  };\n\n  onGridItemDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  };\n\n  onGridItemDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isGridDropTipShow: false});\n  };\n\n  onGridItemDragDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isGridDropTipShow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n    let {nodeDirent, nodeParentPath} = dragStartItemData;\n    let dropItemData = this.props.dirent;\n\n    if (nodeDirent.name === dropItemData.name) {\n      return;\n    }\n\n    if (dropItemData.type !== 'dir') {\n      return;\n    }\n\n    let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, selectedPath, nodeParentPath);\n  };\n\n  onGridItemMouseDown = (event) =>{\n    this.props.onGridItemMouseDown(event);\n  };\n\n  getFileUrl = (url) => {\n    let fileUrlArr = url.split('/');\n    if (fileUrlArr.indexOf('48') !== -1) {\n      fileUrlArr.splice(fileUrlArr.indexOf('48'), 1, '192');\n    }\n    let fileUrl = fileUrlArr.join('/');\n    return fileUrl;\n  };\n\n  onGridItemContextMenu = (event) => {\n    let dirent = this.props.dirent;\n    this.props.onGridItemContextMenu(event, dirent);\n  };\n\n  render() {\n    let { dirent, path } = this.props;\n    let direntPath = Utils.joinPath(path, dirent.name);\n    let iconUrl = Utils.getDirentIcon(dirent, true);\n    let fileUrl = dirent.encoded_thumbnail_src ? this.getFileUrl(dirent.encoded_thumbnail_src) : '';\n\n    let toolTipID = '';\n    let tagTitle = '';\n    if (dirent.file_tags && dirent.file_tags.length > 0) {\n      toolTipID = MD5(dirent.name).slice(0, 7);\n      tagTitle = dirent.file_tags.map(item => item.name).join(' ');\n    }\n\n    let dirHref = '';\n    if (this.props.currentRepoInfo) {\n      dirHref = siteRoot + 'library/' + this.props.repoID + '/' + this.props.currentRepoInfo.repo_name + Utils.encodePath(direntPath);\n    }\n    let fileHref = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(direntPath);\n    if (dirent.is_sdoc_revision && dirent.revision_id) {\n      fileHref = siteRoot + 'lib/' + this.props.repoID + '/revisions/' + dirent.revision_id + '/';\n    }\n\n    let gridClass = 'grid-file-img-link cursor-pointer';\n    gridClass += this.state.isGridSelected ? ' grid-selected-active' : ' ';\n    gridClass += this.state.isGridDropTipShow ? ' grid-drop-show' : ' ';\n\n    let lockedInfo = dirent.is_freezed ? gettext('Frozen by {name}') : gettext('locked by {name}');\n    lockedInfo = lockedInfo.replace('{name}', dirent.lock_owner_name);\n\n    const lockedImageUrl = `${mediaUrl}img/file-${dirent.is_freezed ? 'freezed' : 'locked'}-32.png`;\n    const lockedMessage = dirent.is_freezed ? gettext('freezed') : gettext('locked');\n    return (\n      <Fragment>\n        <li className=\"grid-item\" onContextMenu={this.onGridItemContextMenu} onMouseDown={this.onGridItemMouseDown}>\n          <div\n            className={gridClass}\n            draggable={this.canDrag}\n            onClick={this.onItemClick}\n            onDragStart={this.onGridItemDragStart}\n            onDragEnter={this.onGridItemDragEnter}\n            onDragOver={this.onGridItemDragOver}\n            onDragLeave={this.onGridItemDragLeave}\n            onDrop={this.onGridItemDragDrop}\n          >\n            {(this.canPreview && dirent.encoded_thumbnail_src) ?\n              <img src={`${siteRoot}${fileUrl}`} ref={this.gridIcon} className=\"thumbnail\" onClick={this.onItemClick} alt=\"\"/> :\n              <img src={iconUrl} ref={this.gridIcon} width=\"96\" alt='' />\n            }\n            {dirent.is_locked && <img className=\"grid-file-locked-icon\" src={lockedImageUrl} alt={lockedMessage} title={lockedInfo}/>}\n          </div>\n          <div className=\"grid-file-name\" onDragStart={this.onGridItemDragStart} draggable={this.canDrag} >\n            {(dirent.type !== 'dir' && dirent.file_tags && dirent.file_tags.length > 0) && (\n              <Fragment>\n                <div id={`tag-list-title-${toolTipID}`} className=\"dirent-item tag-list tag-list-stacked d-inline-block align-middle\">\n                  {dirent.file_tags.map((fileTag, index) => {\n                    let length = dirent.file_tags.length;\n                    return (\n                      <span className=\"file-tag\" key={fileTag.id} style={{zIndex:length - index, backgroundColor:fileTag.color}}></span>\n                    );\n                  })}\n                </div>\n                <UncontrolledTooltip target={`tag-list-title-${toolTipID}`} placement=\"bottom\">\n                  {tagTitle}\n                </UncontrolledTooltip>\n              </Fragment>\n            )}\n            {(!dirent.isDir() && !this.canPreview) ?\n              <a className={`sf-link grid-file-name-link ${this.state.isGridSelected ? 'grid-link-selected-active' : ''}`} onClick={this.onItemLinkClick}>{dirent.name}</a> :\n              <a className={`grid-file-name-link ${this.state.isGridSelected ? 'grid-link-selected-active' : ''}`} href={dirent.type === 'dir' ? dirHref : fileHref} onClick={this.onItemLinkClick}>{dirent.name}</a>\n            }\n          </div>\n        </li>\n      </Fragment>\n    );\n  }\n}\n\nDirentGridItem.propTypes = propTypes;\nexport default DirentGridItem;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/repo-share-admin/share-links.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/rename-dialog.js",["4716","4717"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Alert } from 'reactstrap';\n\nconst propTypes = {\n  currentNode: PropTypes.object,\n  onRename: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  UNSAFE_componentWillMount() {\n    this.setState({newName: this.props.currentNode.object.name});\n  }\n\n  componentDidMount() {\n    const { currentNode } = this.props;\n    this.changeState(currentNode);\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    this.changeState(nextProps.currentNode);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({newName: e.target.value});\n  };\n\n  handleSubmit = () => {\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      this.setState({errMessage : errMessage});\n    } else {\n      let isDuplicated = this.checkDuplicatedName();\n      if (isDuplicated) {\n        let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(this.state.newName));\n        this.setState({errMessage: errMessage});\n      } else {\n        this.props.onRename(this.state.newName);\n      }\n    }\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  };\n\n  toggle = () => {\n    this.props.toggleCancel();\n  };\n\n  changeState = (currentNode) => {\n    let name = currentNode.object.name;\n    this.setState({newName: name});\n  };\n\n  validateInput = () => {\n    let newName = this.state.newName.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  };\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.newName);\n    return isDuplicated;\n  };\n\n  onAfterModelOpened = () => {\n    if (!this.newInput.current) return;\n    const { currentNode } = this.props;\n    let type = currentNode.object.type;\n    this.newInput.current.focus();\n    if (type === 'file') {\n      var endIndex = currentNode.object.name.lastIndexOf('.md');\n      this.newInput.current.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.newInput.current.setSelectionRange(0, -1);\n    }\n  };\n\n  render() {\n    let type = this.props.currentNode.object.type;\n    return (\n      <Modal isOpen={true} toggle={this.toggle} onOpened={this.onAfterModelOpened}>\n        <ModalHeader toggle={this.toggle}>{type === 'file' ? gettext('Rename File') : gettext('Rename Folder') }</ModalHeader>\n        <ModalBody>\n          <p>{type === 'file' ? gettext('New file name'): gettext('New folder name')}</p>\n          <Input onKeyDown={this.handleKeyDown} innerRef={this.newInput} placeholder=\"newName\" value={this.state.newName} onChange={this.handleChange} />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/confirm-apply-folder-properties-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dirent-list-view/dirent-list-item.js",["4718","4719","4720","4721","4722","4723","4724","4725","4726","4727","4728","4729","4730","4731","4732","4733","4734","4735","4736"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport { v4 as uuidv4 } from 'uuid';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl, username, useGoFileserver, fileServerRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport Rename from '../rename';\nimport ModalPortal from '../modal-portal';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport EditFileTagPopover from '../popover/edit-filetag-popover';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport toaster from '../toast';\nimport FileTag from './file-tag';\n\nimport '../../css/dirent-list-item.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  unfreezeItem: PropTypes.func.isRequired,\n  onItemRenameToggle: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onItemConvert: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  showImagePopup: PropTypes.func.isRequired,\n  currentRepoInfo: PropTypes.object,\n  isRepoOwner: PropTypes.bool,\n  isAdmin: PropTypes.bool.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  onItemMouseDown: PropTypes.func.isRequired,\n  onItemContextMenu: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  activeDirent: PropTypes.object,\n  getDirentItemMenuList: PropTypes.func.isRequired,\n  repoTags: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onShowDirentsDraggablePreview: PropTypes.func,\n  loadDirentList: PropTypes.func,\n};\n\nclass DirentListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    const { dirent } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(dirent.permission);\n    this.isCustomPermission = isCustomPermission;\n    this.customPermission = customPermission;\n    this.canPreview = true;\n    this.canDrag = dirent.permission === 'rw';\n    if (isCustomPermission) {\n      const { preview, modify } = customPermission.permission;\n      this.canPreview = preview || modify;\n      this.canDrag = modify;\n    }\n\n    this.state = {\n      isOperationShow: false,\n      highlight: false,\n      isZipDialogOpen: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isShareDialogShow: false,\n      isMutipleOperation: false,\n      canDrag: this.canDrag,\n      isShowTagTooltip: false,\n      isDragTipShow: false,\n      isDropTipshow: false,\n      isEditFileTagShow: false,\n      isPermissionDialogOpen: false,\n      isOpMenuOpen: false // for mobile\n    };\n    this.tagListTitleID = `tag-list-title-${uuidv4()}`;\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.isItemFreezed !== this.props.isItemFreezed && !nextProps.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      }, () => {\n        if (nextProps.activeDirent && nextProps.activeDirent.name === nextProps.dirent.name) {\n          this.setState({isOperationShow: true});\n        }\n      });\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  };\n\n  //UI Interactive\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n    if (this.state.canDrag) {\n      this.setState({isDragTipShow: true});\n    }\n  };\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n    if (this.state.canDrag) {\n      this.setState({isDragTipShow: true});\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      });\n    }\n    this.setState({isDragTipShow: false});\n  };\n\n  unfreezeItem = () => {\n    this.setState({\n      highlight: false,\n      isOperationShow: false,\n    });\n    this.props.unfreezeItem();\n  };\n\n  //buiness handler\n  onItemSelected = () => {\n    this.props.onItemSelected(this.props.dirent);\n  };\n\n  onItemStarred = (e) => {\n    let dirent = this.props.dirent;\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(dirent);\n\n    e.preventDefault();\n\n    if (dirent.starred) {\n      seafileAPI.unstarItem(repoID, filePath).then(() => {\n        this.props.updateDirent(this.props.dirent, 'starred', false);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(repoID, filePath).then(() => {\n        this.props.updateDirent(this.props.dirent, 'starred', true);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  // on '<tr>'\n  onDirentClick = (e) => {\n    // '<td>' is clicked\n    e.stopPropagation();\n    if (e.target.tagName == 'TD') {\n      this.props.onDirentClick(this.props.dirent);\n    }\n  };\n\n  onItemClick = (e) => {\n    e.preventDefault();\n    const dirent = this.props.dirent;\n    if (this.state.isRenameing) {\n      return;\n    }\n\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (Utils.imageCheck(dirent.name)) {\n      this.props.showImagePopup(dirent);\n    } else {\n      this.props.onItemClick(dirent);\n    }\n  };\n\n  onItemDelete = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemDelete(this.props.dirent);\n  };\n\n  onItemShare = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  };\n\n  exportDocx = () => {\n    const serviceUrl = window.app.config.serviceURL;\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let exportToDocxUrl = serviceUrl + '/repo/sdoc_export_to_docx/' + repoID + '/?file_path=' + filePath;\n    window.location.href = exportToDocxUrl;\n  };\n\n  closeSharedDialog = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  };\n\n  onMobileMenuItemClick = (e) => {\n    const operation = e.target.getAttribute('data-op');\n    this.onMenuItemClick(operation, e);\n  };\n\n  onMenuItemClick = (operation, event) => {\n    switch(operation) {\n      case 'Download':\n        this.onItemDownload(event);\n        break;\n      case 'Share':\n        this.onItemShare(event);\n        break;\n      case 'Delete':\n        this.onItemDelete(event);\n        break;\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Move':\n        this.onItemMoveToggle();\n        break;\n      case 'Copy':\n        this.onItemCopyToggle();\n        break;\n      case 'Tags':\n        this.onEditFileTagToggle();\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Unlock':\n        this.onUnlockItem();\n        break;\n      case 'Lock':\n        this.onLockItem();\n        break;\n      case 'Unfreeze Document':\n        this.onUnlockItem();\n        break;\n      case 'Freeze Document':\n        this.onFreezeDocument();\n        break;\n      case 'Convert to Markdown':\n        this.onItemConvert(event, 'markdown');\n        break;\n      case 'Convert to docx':\n        this.onItemConvert(event, 'docx');\n        break;\n      case 'Export docx':\n        this.exportDocx();\n        break;\n      case 'Convert to sdoc':\n        this.onItemConvert(event, 'sdoc');\n        break;\n      case 'History':\n        this.onHistory();\n        break;\n      case 'Access Log':\n        this.onAccessLog();\n        break;\n      case 'Properties':\n        this.props.onDirentClick(this.props.dirent);\n        this.props.showDirentDetail('info');\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient();\n        break;\n      case 'Convert with ONLYOFFICE':\n        this.onConvertWithONLYOFFICE();\n        break;\n      default:\n        break;\n    }\n  };\n\n  onItemConvert = (e, dstType)=> {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemConvert(this.props.dirent, dstType);\n  };\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  };\n\n  onFileTagChanged = () => {\n    let direntPath = this.getDirentPath(this.props.dirent);\n    this.props.onFileTagChanged(this.props.dirent, direntPath);\n  };\n\n  onItemRenameToggle = () => {\n    this.props.onItemRenameToggle(this.props.dirent);\n    this.setState({\n      isOperationShow: false,\n      isRenameing: true,\n      canDrag: false\n    });\n  };\n\n  onRenameConfirm = (newName) => {\n    this.props.onItemRename(this.props.dirent, newName);\n    this.onRenameCancel();\n  };\n\n  onRenameCancel = () => {\n    this.setState({\n      isRenameing: false,\n      canDrag: this.canDrag // set it back to the initial value\n    });\n    this.unfreezeItem();\n  };\n\n  onItemMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  };\n\n  onItemCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  };\n\n  onPermissionItem = () => {\n    this.setState({isPermissionDialogOpen: !this.state.isPermissionDialogOpen});\n  };\n\n  onLockItem = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI.lockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(this.props.dirent, 'is_locked', true);\n      this.props.updateDirent(this.props.dirent, 'locked_by_me', true);\n      let lockName = username.split('@');\n      this.props.updateDirent(this.props.dirent, 'lock_owner_name', lockName[0]);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onFreezeDocument = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI.lockfile(repoID, filePath, -1).then(() => {\n      this.props.updateDirent(this.props.dirent, 'is_freezed', true);\n      this.props.updateDirent(this.props.dirent, 'is_locked', true);\n      this.props.updateDirent(this.props.dirent, 'locked_by_me', true);\n      let lockName = username.split('@');\n      this.props.updateDirent(this.props.dirent, 'lock_owner_name', lockName[0]);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onUnlockItem = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI.unlockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(this.props.dirent, 'is_locked', false);\n      this.props.updateDirent(this.props.dirent, 'locked_by_me', false);\n      this.props.updateDirent(this.props.dirent, 'lock_owner_name', '');\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onHistory = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let url = URLDecorator.getUrl({type: 'file_revisions', repoID: repoID, filePath: filePath});\n    location.href = url;\n  };\n\n  onAccessLog = () => {\n    let filePath = this.getDirentPath(this.props.dirent);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  };\n\n  onOpenViaClient = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let url = URLDecorator.getUrl({type: 'open_via_client', repoID: repoID, filePath: filePath});\n    location.href = url;\n  };\n\n  onConvertWithONLYOFFICE = ()=> {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI.onlyofficeConvert(repoID, filePath).then(res => {\n      this.props.loadDirentList(res.data.parent_dir);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onItemDownload = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation();\n    let dirent = this.props.dirent;\n    let repoID = this.props.repoID;\n    let direntPath = this.getDirentPath(dirent);\n    if (dirent.type === 'dir') {\n      if (!useGoFileserver) {\n        this.setState({\n          isZipDialogOpen: true\n        });\n      } else {\n        seafileAPI.zipDownload(repoID, this.props.path, this.props.dirent.name).then((res) => {\n          const zipToken = res.data['zip_token'];\n          location.href = `${fileServerRoot}zip/${zipToken}`;\n        }).catch((error) => {\n          let errorMsg = Utils.getErrorMsg(error);\n          this.setState({\n            isLoading: false,\n            errorMsg: errorMsg\n          });\n        });\n      }\n    } else {\n      let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n      location.href = url;\n    }\n  };\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  };\n\n  getDirentPath = (dirent) => {\n    let path = this.props.path;\n    return path === '/' ? path + dirent.name : path + '/' + dirent.name;\n  };\n\n  onTagTooltipToggle = (e) => {\n    e.stopPropagation();\n    this.setState({isShowTagTooltip: !this.state.isShowTagTooltip});\n  };\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  };\n\n  onItemDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n    e.dataTransfer.effectAllowed = 'move';\n    let { selectedDirentList } = this.props;\n    if (selectedDirentList.length > 0 && selectedDirentList.includes(this.props.dirent)) { // drag items and selectedDirentList include item\n      this.props.onShowDirentsDraggablePreview();\n      e.dataTransfer.setDragImage(this.refs.empty_content, 0, 0); // Show an empty content\n      let selectedList =  selectedDirentList.map(item => {\n        let nodeRootPath = this.getDirentPath(item);\n        let dragStartItemData = {nodeDirent: item, nodeParentPath: this.props.path, nodeRootPath: nodeRootPath};\n        return dragStartItemData;\n      });\n      selectedList = JSON.stringify(selectedList);\n      e.dataTransfer.setData('applicaiton/drag-item-info', selectedList);\n      return ;\n    }\n\n    if (e.dataTransfer && e.dataTransfer.setDragImage) {\n      e.dataTransfer.setDragImage(this.refs.drag_icon, 15, 15);\n    }\n\n    let nodeRootPath = this.getDirentPath(this.props.dirent);\n    let dragStartItemData = {nodeDirent: this.props.dirent, nodeParentPath: this.props.path, nodeRootPath: nodeRootPath};\n    dragStartItemData = JSON.stringify(dragStartItemData);\n\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartItemData);\n  };\n\n  onItemDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n    if (this.props.dirent.type === 'dir') {\n      e.stopPropagation();\n      this.setState({isDropTipshow: true});\n    }\n  };\n\n  onItemDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n    if (e.dataTransfer.dropEffect === 'copy') {\n      return;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  };\n\n  onItemDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n\n    if (this.props.dirent.type === 'dir') {\n      e.stopPropagation();\n    }\n    this.setState({isDropTipshow: false});\n  };\n\n  onItemDragDrop = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n    this.setState({isDropTipshow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    if (this.props.dirent.type === 'dir') {\n      e.stopPropagation();\n    } else {\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n    if (Array.isArray(dragStartItemData)) { //move items\n      let direntPaths =  dragStartItemData.map(draggedItem => {\n        return draggedItem.nodeRootPath;\n      });\n\n      let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n\n      if (direntPaths.some(direntPath => { return direntPath === selectedPath;})) { //eg; A/B, A/C --> A/B\n        return;\n      }\n\n      this.props.onItemsMove(this.props.currentRepoInfo, selectedPath);\n      return ;\n    }\n\n    let { nodeDirent, nodeParentPath, nodeRootPath } = dragStartItemData;\n    let dropItemData = this.props.dirent;\n\n    if (nodeDirent.name === dropItemData.name) {\n      return;\n    }\n\n    //  copy the dirent to it's child. eg: A/B -> A/B/C\n    if (dropItemData.type === 'dir' && nodeDirent.type === 'dir') {\n      if (nodeParentPath !== this.props.path) {\n        if (this.props.path.indexOf(nodeRootPath) !== -1) {\n          return;\n        }\n      }\n    }\n\n    let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, selectedPath, nodeParentPath);\n  };\n\n  onItemMouseDown = (event) => {\n    this.props.onItemMouseDown(event);\n  };\n\n  onItemContextMenu = (event) => {\n    let dirent = this.props.dirent;\n    this.props.onItemContextMenu(event, dirent);\n  };\n\n  renderItemOperation = () => {\n    let { dirent, currentRepoInfo, selectedDirentList } = this.props;\n    let canDownload = true;\n    let canDelete = true;\n    const { isCustomPermission, customPermission } = this;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canDownload = permission.download;\n      canDelete = permission.delete;\n    }\n\n    // https://dev.seafile.com/seahub/lib/d6f300e7-bb2b-4722-b83e-cf45e370bfbc/file/seaf-server%20%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/%E6%9D%83%E9%99%90%E7%9B%B8%E5%85%B3/%E8%B5%84%E6%96%99%E5%BA%93%E6%9D%83%E9%99%90%E8%A7%84%E8%8C%83.md\n    let showShareBtn = Utils.isHasPermissionToShare(currentRepoInfo, dirent.permission, dirent);\n\n    return (\n      <Fragment>\n        {selectedDirentList.length > 1 ?\n          <Fragment>\n            {this.state.isOperationShow && !dirent.isSelected &&\n              <div className=\"operations\">\n                {(dirent.permission === 'rw' || dirent.permission === 'r' || (isCustomPermission && canDownload)) && (\n                  <a href=\"#\" className=\"op-icon sf2-icon-download\" title={gettext('Download')} role=\"button\" aria-label={gettext('Download')} onClick={this.onItemDownload}></a>\n                )}\n                {showShareBtn && (\n                  <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.onItemShare}></a>\n                )}\n                {(dirent.permission === 'rw' || dirent.permission === 'cloud-edit' || (isCustomPermission && canDelete)) && (\n                  <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} role=\"button\" aria-label={gettext('Delete')} onClick={this.onItemDelete}></a>\n                )}\n                <ItemDropdownMenu\n                  item={this.props.dirent}\n                  toggleClass={'sf2-icon-caret-down'}\n                  isHandleContextMenuEvent={true}\n                  getMenuList={this.props.getDirentItemMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  unfreezeItem={this.unfreezeItem}\n                  freezeItem={this.props.freezeItem}\n                />\n              </div>\n            }\n          </Fragment> :\n          <Fragment>\n            {this.state.isOperationShow &&\n              <div className=\"operations\">\n                {(dirent.permission === 'rw' || dirent.permission === 'r' || (isCustomPermission && canDownload)) && (\n                  <a href=\"#\" className=\"op-icon sf2-icon-download\" title={gettext('Download')} role=\"button\" aria-label={gettext('Download')} onClick={this.onItemDownload}></a>\n                )}\n                {showShareBtn && (\n                  <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.onItemShare}></a>\n                )}\n                {(dirent.permission === 'rw' || dirent.permission === 'cloud-edit' || (isCustomPermission && canDelete)) && (\n                  <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} role=\"button\" aria-label={gettext('Delete')} onClick={this.onItemDelete}></a>\n                )}\n                <ItemDropdownMenu\n                  item={this.props.dirent}\n                  toggleClass={'sf2-icon-caret-down'}\n                  isHandleContextMenuEvent={true}\n                  getMenuList={this.props.getDirentItemMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  unfreezeItem={this.unfreezeItem}\n                  freezeItem={this.props.freezeItem}\n                />\n              </div>\n            }\n          </Fragment>\n        }\n      </Fragment>\n    );\n  };\n\n  render() {\n    let { path, dirent, activeDirent } = this.props;\n    let direntPath = Utils.joinPath(path, dirent.name);\n    let dirHref = '';\n    if (this.props.currentRepoInfo) {\n      dirHref = siteRoot + 'library/' + this.props.repoID + '/' + this.props.currentRepoInfo.repo_name + Utils.encodePath(direntPath);\n    }\n    let fileHref = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(direntPath);\n    if (dirent.is_sdoc_revision && dirent.revision_id) {\n      fileHref = siteRoot + 'lib/' + this.props.repoID + '/revisions/' + dirent.revision_id + '/';\n    }\n\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    let trClass = this.state.highlight ? 'tr-highlight ' : '';\n    trClass += this.state.isDropTipshow ? 'tr-drop-effect' : '';\n    trClass += (activeDirent && activeDirent.name === dirent.name)  ? 'tr-active' : '';\n    trClass += dirent.isSelected? 'tr-active' : '';\n\n    let lockedInfo = dirent.is_freezed ? gettext('Frozen by {name}'): gettext('locked by {name}');\n    lockedInfo = lockedInfo.replace('{name}', dirent.lock_owner_name);\n\n    const isDesktop = Utils.isDesktop();\n    const { canDrag } = this.state;\n    const lockedImageUrl = `${mediaUrl}img/file-${dirent.is_freezed ? 'freezed-32.svg' : 'locked-32.png'}`;\n    const lockedMessage = dirent.is_freezed ? gettext('freezed') : gettext('locked');\n    const desktopItem = (\n      <tr\n        className={trClass}\n        draggable={canDrag}\n        onFocus={this.onMouseEnter}\n        onMouseEnter={this.onMouseEnter}\n        onMouseOver={this.onMouseOver}\n        onMouseLeave={this.onMouseLeave}\n        onClick={this.onDirentClick}\n        onDragStart={this.onItemDragStart}\n        onDragEnter={this.onItemDragEnter}\n        onDragOver={this.onItemDragOver}\n        onDragLeave={this.onItemDragLeave}\n        onDrop={this.onItemDragDrop}\n        onMouseDown={this.onItemMouseDown}\n        onContextMenu={this.onItemContextMenu}\n      >\n        <td className={`pl10 ${this.state.isDragTipShow ? 'tr-drag-effect' : ''}`}>\n          <input type=\"checkbox\" className=\"vam\" onChange={this.onItemSelected} checked={dirent.isSelected} aria-label={dirent.isSelected ?gettext('Unselect this item') : gettext('Select this item')} />\n        </td>\n        <td className=\"pl10\">\n          {dirent.starred !== undefined &&\n          <a href=\"#\" role=\"button\" aria-label={dirent.starred ? gettext('Unstar') : gettext('Star')} onClick={this.onItemStarred}>\n            <i className={`fa-star ${dirent.starred ? 'fas' : 'far star-empty'}`}></i>\n          </a>\n          }\n        </td>\n        <td className=\"pl10\">\n          <div className=\"dir-icon\">\n            {(this.canPreview && dirent.encoded_thumbnail_src) ?\n              <img ref='drag_icon' src={`${siteRoot}${dirent.encoded_thumbnail_src}`} className=\"thumbnail cursor-pointer\" onClick={this.onItemClick} alt=\"\" /> :\n              <img ref='drag_icon' src={iconUrl} width=\"24\" alt='' />\n            }\n            {dirent.is_locked && <img className=\"locked\" src={lockedImageUrl} alt={lockedMessage} title={lockedInfo}/>}\n            <div ref=\"empty_content\" style={{position: 'absolute', width: '1px', height: '1px'}}></div>\n          </div>\n        </td>\n        <td className=\"name\">\n          {this.state.isRenameing && <Rename hasSuffix={dirent.type !== 'dir'} name={dirent.name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel} />}\n          {!this.state.isRenameing && (\n            <Fragment>\n              {(!dirent.isDir() && !this.canPreview) ?\n                <a className=\"sf-link\" onClick={this.onItemClick}>{dirent.name}</a> :\n                <a href={dirent.type === 'dir' ? dirHref : fileHref} onClick={this.onItemClick}>{dirent.name}</a>\n              }\n            </Fragment>\n          )}\n        </td>\n        <td className=\"tag-list-title\">\n          {(dirent.type !== 'dir' && dirent.file_tags && dirent.file_tags.length > 0) && (\n            <div id={this.tagListTitleID} className=\"dirent-item tag-list tag-list-stacked\">\n              {dirent.file_tags.map((fileTag, index) => {\n                return (\n                  <FileTag fileTag={fileTag} length={dirent.file_tags.length} key={index} index={index}/>\n                );\n              })}\n            </div>\n          )}\n          {(dirent.type !== 'dir' && (!dirent.file_tags || dirent.file_tags.length == 0)) && (\n            <div id={this.tagListTitleID} className=\"dirent-item tag-list tag-list-stacked\"></div>\n          )}\n        </td>\n        <td className=\"operation\">{this.renderItemOperation()}</td>\n        <td className=\"file-size\">{dirent.size && dirent.size}</td>\n        <td className=\"last-update\" title={moment.unix(dirent.mtime).format('llll')}>{dirent.mtime_relative}</td>\n      </tr>\n    );\n    const mobileItem = (\n      <tr>\n        <td onClick={this.onItemClick}>\n          <div className=\"dir-icon\">\n            {(this.canPreview && dirent.encoded_thumbnail_src) ?\n              <img src={`${siteRoot}${dirent.encoded_thumbnail_src}`} className=\"thumbnail cursor-pointer\" alt=\"\" /> :\n              <img src={iconUrl} width=\"24\" alt=\"\" />\n            }\n            {dirent.is_locked && <img className=\"locked\" src={lockedImageUrl} alt={lockedMessage} title={lockedInfo}/>}\n          </div>\n        </td>\n        <td onClick={this.onItemClick}>\n          {this.state.isRenameing && <Rename hasSuffix={dirent.type !== 'dir'} name={dirent.name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel} /> }\n          {!this.state.isRenameing && (\n            <Fragment>\n              {(!dirent.isDir() && !this.canPreview) ?\n                <a className=\"sf-link\">{dirent.name}</a> :\n                <a href={dirent.type === 'dir' ? dirHref : fileHref}>{dirent.name}</a>\n              }\n            </Fragment>\n          )}\n          <br />\n          {dirent.size && <span className=\"item-meta-info\">{dirent.size}</span>}\n          <span className=\"item-meta-info\">{dirent.mtime_relative}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More operations')}\n              aria-label={gettext('More operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {dirent.starred !== undefined &&\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.onItemStarred}>{dirent.starred ? gettext('Unstar') : gettext('Star')}</DropdownItem>}\n                {this.props.getDirentItemMenuList(dirent, true).map((item, index) => {\n                  if (item != 'Divider' && item.key != 'Open via Client') {\n                    return (\n                      <DropdownItem className=\"mobile-menu-item\" key={index} data-op={item.key} onClick={this.onMobileMenuItemClick}>{item.value}</DropdownItem>\n                    );\n                  } else {\n                    return null;\n                  }\n                })}\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {isDesktop ? desktopItem : mobileItem}\n        {this.state.isMoveDialogShow &&\n          <ModalPortal>\n            <MoveDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              dirent={this.props.dirent}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemMove={this.props.onItemMove}\n              onCancelMove={this.onItemMoveToggle}\n              repoEncrypted={this.props.repoEncrypted}\n            />\n          </ModalPortal>\n        }\n        {this.state.isCopyDialogShow &&\n          <ModalPortal>\n            <CopyDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              dirent={this.props.dirent}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemCopy={this.props.onItemCopy}\n              onCancelCopy={this.onItemCopyToggle}\n              repoEncrypted={this.props.repoEncrypted}\n            />\n          </ModalPortal>\n        }\n        <MediaQuery query=\"(min-width: 768px)\">\n          {this.state.isEditFileTagShow &&\n            <EditFileTagPopover\n              repoID={this.props.repoID}\n              repoTags={this.props.repoTags}\n              fileTagList={dirent.file_tags}\n              filePath={direntPath}\n              toggleCancel={this.onEditFileTagToggle}\n              onFileTagChanged={this.onFileTagChanged}\n              target={this.tagListTitleID}\n              isEditFileTagShow={this.state.isEditFileTagShow}\n            />\n          }\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {this.state.isEditFileTagShow &&\n            <EditFileTagDialog\n              repoID={this.props.repoID}\n              repoTags={this.props.repoTags}\n              fileTagList={dirent.file_tags}\n              filePath={direntPath}\n              toggleCancel={this.onEditFileTagToggle}\n              onFileTagChanged={this.onFileTagChanged}\n            />\n          }\n        </MediaQuery>\n        {this.state.isZipDialogOpen &&\n          <ModalPortal>\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={this.props.dirent.name}\n              toggleDialog={this.closeZipDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isShareDialogShow &&\n          <ModalPortal>\n            <ShareDialog\n              itemType={dirent.type}\n              itemName={dirent.name}\n              itemPath={direntPath}\n              userPerm={dirent.permission}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.closeSharedDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isPermissionDialogOpen &&\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onPermissionItem}\n              repoID={this.props.repoID}\n              folderPath={direntPath}\n              folderName={dirent.name}\n              isDepartmentRepo={this.props.isGroupOwnedRepo}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nDirentListItem.propTypes = propTypes;\n\nexport default DirentListItem;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/popover/list-tag-popover.js",["4737"],[],"import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { v4 as uuidv4 } from 'uuid';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport RepoTag from '../../models/repo-tag';\nimport TagListItem from './tag-list-item';\nimport VirtualTagListItem from './virtual-tag-list-item';\nimport TagListFooter from './tag-list-footer';\nimport { TAG_COLORS } from '../../constants/';\n\nimport '../../css/repo-tag.css';\nimport './list-tag-popover.css';\n\nexport default class ListTagPopover extends React.Component {\n\n  static propTypes = {\n    repoID: PropTypes.string.isRequired,\n    onListTagCancel: PropTypes.func.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repotagList: []\n    };\n  }\n\n  componentDidMount() {\n    this.loadTags();\n  }\n\n  loadTags = () => {\n    seafileAPI.listRepoTags(this.props.repoID).then(res => {\n      let repotagList = [];\n      res.data.repo_tags.forEach(item => {\n        let repo_tag = new RepoTag(item);\n        repotagList.push(repo_tag);\n      });\n      this.setState({ repotagList });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  updateTags = (newRepotagList) => {\n    this.setState({\n      repotagList: [...this.state.repotagList, ...newRepotagList],\n    });\n  };\n\n  onDeleteTag = (tag) => {\n    const { repoID } = this.props;\n    const { id: targetTagID } = tag;\n    seafileAPI.deleteRepoTag(repoID, targetTagID).then((res) => {\n      this.setState({\n        repotagList: this.state.repotagList.filter(tag => tag.id != targetTagID)\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  createVirtualTag = (e) => {\n    e.preventDefault();\n    let { repotagList } = this.state;\n    let virtual_repo_tag = {\n      name: '',\n      color: TAG_COLORS[Math.floor(Math.random() * TAG_COLORS.length)], // generate random tag color for virtual tag\n      id: `virtual-tag-${uuidv4()}`,\n      is_virtual: true,\n    };\n    repotagList.push(virtual_repo_tag);\n    this.setState({ repotagList });\n  };\n\n  deleteVirtualTag = (virtualTag) => {\n    let { repotagList } = this.state;\n    let index = repotagList.findIndex(item => item.id === virtualTag.id);\n    repotagList.splice(index, 1);\n    this.setState({ repotagList });\n  };\n\n  updateVirtualTag = (virtualTag, data) => {\n    const repoID = this.props.repoID;\n    const { repotagList } = this.state;\n    const index = repotagList.findIndex(item => item.id === virtualTag.id);\n    if (index < 0) return null;\n\n    // If virtual tag color is updated and virtual tag name is empty, it will be saved to local state, don't save it to the server\n    if (data.color) {\n      virtualTag.color = data.color;\n      repotagList[index] = virtualTag;\n      this.setState({ repotagList });\n      return;\n    }\n\n    // If virtual tag name is updated and name is not empty, virtual tag color use default, save it to the server\n    if (data.name && data.name.length > 0) {\n      let color = virtualTag.color;\n      let name = data.name;\n      seafileAPI.createRepoTag(repoID, name, color).then((res) => {\n        // After saving sag to the server, replace the virtual tag with newly created tag\n        repotagList[index] = new RepoTag(res.data.repo_tag);\n        this.setState({ repotagList });\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <ul className=\"tag-list tag-list-container my-2\">\n          {this.state.repotagList.map((repoTag, index) => {\n            if (repoTag.is_virtual) {\n              return (\n                <VirtualTagListItem\n                  key={index}\n                  item={repoTag}\n                  repoID={this.props.repoID}\n                  deleteVirtualTag={this.deleteVirtualTag}\n                  updateVirtualTag={this.updateVirtualTag}\n                />\n              );\n            } else {\n              return (\n                <TagListItem\n                  key={index}\n                  item={repoTag}\n                  repoID={this.props.repoID}\n                  onDeleteTag={this.onDeleteTag}\n                />\n              );\n            }\n          })}\n        </ul>\n        <div className=\"add-tag-link px-4 py-2 d-flex align-items-center\" onClick={this.createVirtualTag}>\n          <span className=\"sf2-icon-plus mr-2\"></span>{gettext('Create a new tag')}\n        </div>\n        <TagListFooter\n          toggle={this.props.onListTagCancel}\n          repotagList={this.state.repotagList}\n          updateTags={this.updateTags}\n          repoID={this.props.repoID}\n        />\n      </Fragment>\n    );\n  }\n}\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/draggable/dirents-dragged-preview.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/services/share-link-panel/index.js",[],["4738","4739","4740","4741","4742","4743","4744","4745","4746"],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/extra-attributes-dialog/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-chooser/tree-list-item.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/seatable-integration-account-setting-widgets/seatable-account-setting-item.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dirent-list-view/file-tag.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/popover/virtual-tag-list-item.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/popover/tag-list-item.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/popover/tag-list-footer.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/services/share-link-panel/link-creation.js",[],["4747","4748","4749","4750","4751","4752","4753","4754","4755","4756","4757","4758"],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/services/share-link-panel/link-list.js",[],["4759","4760","4761"],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/extra-attributes-dialog/column/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/seatable-integration-account-setting-widgets/delete-seatables-dialog.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/popover/virtual-tag-color.js",["4762","4763"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Popover, PopoverBody } from 'reactstrap';\nimport { TAG_COLORS } from '../../constants';\n\nimport '../../css/repo-tag.css';\n\nexport default class VirtualTagColor extends React.Component {\n\n  static propTypes = {\n    updateVirtualTag: PropTypes.func.isRequired,\n    tag: PropTypes.object.isRequired,\n    repoID: PropTypes.string.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagColor: this.props.tag.color,\n      isPopoverOpen: false\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.tag.color !== this.props.tag.color) {\n      this.setState({\n        tagColor: nextProps.tag.color,\n      });\n    }\n  }\n\n  togglePopover = () => {\n    this.setState({\n      isPopoverOpen: !this.state.isPopoverOpen\n    });\n  };\n\n  selectTagColor = (e) => {\n    const newColor = e.target.value;\n    this.props.updateVirtualTag(this.props.tag, { color: newColor });\n    this.setState({\n      tagColor: newColor,\n      isPopoverOpen: !this.state.isPopoverOpen,\n    });\n  };\n\n  render() {\n    const { isPopoverOpen, tagColor } = this.state;\n    const { tag } = this.props;\n    const { id, color } = tag;\n\n    let colorList = [...TAG_COLORS];\n    // for color from previous color options\n    if (colorList.indexOf(color) == -1) {\n      colorList.unshift(color);\n    }\n\n    return (\n      <div>\n        <span\n          id={`tag-${id}-color`}\n          className=\"tag-color cursor-pointer rounded-circle d-flex align-items-center justify-content-center\"\n          style={{backgroundColor: tagColor}}\n          onClick={this.togglePopover}\n        >\n          <i className=\"fas fa-caret-down text-white\"></i>\n        </span>\n        <Popover\n          target={`tag-${id}-color`}\n          isOpen={isPopoverOpen}\n          placement=\"bottom\"\n          toggle={this.togglePopover}\n          className=\"tag-color-popover mw-100\"\n        >\n          <PopoverBody className=\"p-2\">\n            <div className=\"d-flex justify-content-between\">\n              {colorList.map((item, index)=>{\n                return (\n                  <div key={index} className=\"tag-color-option mx-1\">\n                    <label className=\"colorinput\">\n                      <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" defaultChecked={item == tagColor} onClick={this.selectTagColor} />\n                      <span className=\"colorinput-color rounded-circle d-flex align-items-center justify-content-center\" style={{backgroundColor: item}}>\n                        <i className=\"fas fa-check color-selected\"></i>\n                      </span>\n                    </label>\n                  </div>\n                );\n              })\n              }\n            </div>\n          </PopoverBody>\n        </Popover>\n      </div>\n    );\n  }\n}\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/tag-color.js",["4764","4765"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Popover, PopoverBody } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { TAG_COLORS } from '../../constants';\nimport toaster from '../toast';\n\nimport '../../css/repo-tag.css';\n\nconst tagColorPropTypes = {\n  tag: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired\n};\n\nclass TagColor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagColor: this.props.tag.color,\n      isPopoverOpen: false\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.tag.color !== this.props.tag.color) {\n      this.setState({\n        tagColor: nextProps.tag.color,\n      });\n    }\n  }\n\n  togglePopover = () => {\n    this.setState({\n      isPopoverOpen: !this.state.isPopoverOpen\n    });\n  };\n\n  selectTagColor = (e) => {\n    const newColor = e.target.value;\n    const { repoID, tag } = this.props;\n    const { id, name } = tag;\n    seafileAPI.updateRepoTag(repoID, id, name, newColor).then(() => {\n      this.setState({\n        tagColor: newColor,\n        isPopoverOpen: !this.state.isPopoverOpen\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { isPopoverOpen, tagColor } = this.state;\n    const { tag } = this.props;\n    const { id, color } = tag;\n\n    let colorList = [...TAG_COLORS];\n    // for color from previous color options\n    if (colorList.indexOf(color) == -1) {\n      colorList.unshift(color);\n    }\n\n    return (\n      <div>\n        <span\n          id={`tag-${id}-color`}\n          className=\"tag-color cursor-pointer rounded-circle d-flex align-items-center justify-content-center\"\n          style={{backgroundColor: tagColor}}\n          onClick={this.togglePopover}\n        >\n          <i className=\"fas fa-caret-down text-white\"></i>\n        </span>\n        <Popover\n          target={`tag-${id}-color`}\n          isOpen={isPopoverOpen}\n          placement=\"bottom\"\n          toggle={this.togglePopover}\n          className=\"tag-color-popover mw-100\"\n        >\n          <PopoverBody className=\"p-2\">\n            <div className=\"d-flex justify-content-between\">\n              {colorList.map((item, index)=>{\n                return (\n                  <div key={index} className=\"tag-color-option mx-1\">\n                    <label className=\"colorinput\">\n                      <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" defaultChecked={item == tagColor} onClick={this.selectTagColor} />\n                      <span className=\"colorinput-color rounded-circle d-flex align-items-center justify-content-center\" style={{backgroundColor: item}}>\n                        <i className=\"fas fa-check color-selected\"></i>\n                      </span>\n                    </label>\n                  </div>\n                );\n              })\n              }\n            </div>\n          </PopoverBody>\n        </Popover>\n      </div>\n    );\n  }\n}\n\nTagColor.propTypes = tagColorPropTypes;\n\nexport default TagColor;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/popover/virtual-tag-name.js",["4766","4767"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport '../../css/repo-tag.css';\n\nexport default class VirtualTagName extends React.Component {\n\n  static propTypes = {\n    updateVirtualTag: PropTypes.func.isRequired,\n    tag: PropTypes.object.isRequired,\n    repoID: PropTypes.string.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagName: this.props.tag.name,\n      isEditing: true,\n    };\n    this.input = React.createRef();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.tag.name !== this.props.tag.name) {\n      this.setState({\n        tagName: nextProps.tag.name,\n      });\n    }\n  }\n\n  componentDidMount() {\n    setTimeout(() => {\n      this.input.current.focus();\n    }, 1);\n  }\n\n  toggleMode = () => {\n    this.setState({\n      isEditing: !this.state.isEditing\n    });\n  };\n\n  updateTagName = (e) => {\n    const newName = e.target.value;\n    this.props.updateVirtualTag(this.props.tag, { name: newName });\n    this.setState({\n      tagName: newName\n    });\n  };\n\n  onInputKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      this.toggleMode();\n      this.updateTagName(e);\n    }\n    else if (e.key == 'Escape') {\n      e.nativeEvent.stopImmediatePropagation();\n      this.toggleMode();\n    }\n  };\n\n  onInputBlur = (e) => {\n    this.toggleMode();\n    this.updateTagName(e);\n  };\n\n  render() {\n    const { isEditing, tagName } = this.state;\n    return (\n      <div className=\"mx-2 flex-fill d-flex\">\n        {isEditing ?\n          <input\n            type=\"text\"\n            ref={this.input}\n            defaultValue={tagName}\n            onBlur={this.onInputBlur}\n            onKeyDown={this.onInputKeyDown}\n            className=\"flex-fill form-control-sm form-control\"\n          /> :\n          <span\n            onClick={this.toggleMode}\n            className=\"cursor-pointer flex-fill\"\n            style={{width: 100, height: 20}}\n          >{tagName}</span>\n        }\n      </div>\n    );\n  }\n}\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/tag-name.js",["4768","4769"],[],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nimport '../../css/repo-tag.css';\n\nconst tagNamePropTypes = {\n  tag: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired\n};\n\nclass TagName extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagName: this.props.tag.name,\n      isEditing: false\n    };\n    this.input = React.createRef();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.tag.name !== this.props.tag.name) {\n      this.setState({\n        tagName: nextProps.tag.name,\n      });\n    }\n  }\n\n  toggleMode = () => {\n    this.setState({\n      isEditing: !this.state.isEditing\n    }, () => {\n      if (this.state.isEditing) {\n        this.input.current.focus();\n      }\n    });\n  };\n\n  updateTagName = (e) => {\n    const newName = e.target.value;\n    const { repoID, tag } = this.props;\n    const { id, color } = tag;\n    seafileAPI.updateRepoTag(repoID, id, newName, color).then(() => {\n      this.setState({\n        tagName: newName\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onInputKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      this.toggleMode();\n      this.updateTagName(e);\n    }\n    else if (e.key == 'Escape') {\n      e.nativeEvent.stopImmediatePropagation();\n      this.toggleMode();\n    }\n  };\n\n  onInputBlur = (e) => {\n    this.toggleMode();\n    this.updateTagName(e);\n  };\n\n  render() {\n    const { isEditing, tagName } = this.state;\n    return (\n      <div className=\"mx-2 flex-fill d-flex\">\n        {isEditing ?\n          <input\n            type=\"text\"\n            ref={this.input}\n            defaultValue={tagName}\n            onBlur={this.onInputBlur}\n            onKeyDown={this.onInputKeyDown}\n            className=\"flex-fill form-control-sm form-control\"\n          /> :\n          <span\n            onClick={this.toggleMode}\n            className=\"cursor-pointer flex-fill\"\n          >{tagName}</span>\n        }\n      </div>\n    );\n  }\n}\n\nTagName.propTypes = tagNamePropTypes;\n\nexport default TagName;\n","/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/extra-attributes-dialog/column/column-name.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/extra-attributes-dialog/editor/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/extra-attributes-dialog/editor/simple-text.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/extra-attributes-dialog/editor/formula-formatter.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/extra-attributes-dialog/editor/number-editor.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/extra-attributes-dialog/editor/date-editor.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/extra-attributes-dialog/editor/ctime-formatter.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/extra-attributes-dialog/editor/single-select/index.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/extra-attributes-dialog/editor/single-select/single-select-editor.js",[],[],"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/extra-attributes-dialog/editor/search-input.js",[],[],{"ruleId":"4770","severity":1,"message":"4771","line":57,"column":59,"nodeType":"4772","messageId":"4773","endLine":57,"endColumn":61},{"ruleId":"4770","severity":1,"message":"4771","line":60,"column":67,"nodeType":"4772","messageId":"4773","endLine":60,"endColumn":69},{"ruleId":"4770","severity":1,"message":"4771","line":63,"column":62,"nodeType":"4772","messageId":"4773","endLine":63,"endColumn":64},{"ruleId":"4770","severity":1,"message":"4771","line":66,"column":60,"nodeType":"4772","messageId":"4773","endLine":66,"endColumn":62},{"ruleId":"4770","severity":1,"message":"4771","line":69,"column":65,"nodeType":"4772","messageId":"4773","endLine":69,"endColumn":67},{"ruleId":"4770","severity":1,"message":"4771","line":181,"column":66,"nodeType":"4772","messageId":"4773","endLine":181,"endColumn":68},{"ruleId":"4770","severity":1,"message":"4774","line":118,"column":22,"nodeType":"4772","messageId":"4773","endLine":118,"endColumn":24},{"ruleId":"4770","severity":1,"message":"4771","line":148,"column":21,"nodeType":"4772","messageId":"4773","endLine":148,"endColumn":23},{"ruleId":"4770","severity":1,"message":"4774","line":314,"column":27,"nodeType":"4772","messageId":"4773","endLine":314,"endColumn":29},{"ruleId":"4770","severity":1,"message":"4771","line":424,"column":31,"nodeType":"4772","messageId":"4773","endLine":424,"endColumn":33},{"ruleId":"4770","severity":1,"message":"4774","line":424,"column":52,"nodeType":"4772","messageId":"4773","endLine":424,"endColumn":54},{"ruleId":"4775","severity":1,"message":"4776","line":455,"column":23,"nodeType":"4777","endLine":460,"endColumn":24},{"ruleId":"4770","severity":1,"message":"4774","line":457,"column":80,"nodeType":"4772","messageId":"4773","endLine":457,"endColumn":82},{"ruleId":"4775","severity":1,"message":"4776","line":461,"column":23,"nodeType":"4777","endLine":466,"endColumn":24},{"ruleId":"4770","severity":1,"message":"4774","line":463,"column":80,"nodeType":"4772","messageId":"4773","endLine":463,"endColumn":82},{"ruleId":"4778","severity":1,"message":"4779","line":581,"column":3,"nodeType":"4780","messageId":"4781","endLine":583,"endColumn":4},{"ruleId":"4770","severity":1,"message":"4774","line":588,"column":44,"nodeType":"4772","messageId":"4773","endLine":588,"endColumn":46},{"ruleId":"4770","severity":1,"message":"4774","line":595,"column":44,"nodeType":"4772","messageId":"4773","endLine":595,"endColumn":46},{"ruleId":"4770","severity":1,"message":"4774","line":602,"column":44,"nodeType":"4772","messageId":"4773","endLine":602,"endColumn":46},{"ruleId":"4770","severity":1,"message":"4774","line":652,"column":56,"nodeType":"4772","messageId":"4773","endLine":652,"endColumn":58},{"ruleId":"4770","severity":1,"message":"4774","line":653,"column":17,"nodeType":"4772","messageId":"4773","endLine":653,"endColumn":19},{"ruleId":"4782","severity":1,"message":"4783","line":663,"column":58,"nodeType":"4777","endLine":663,"endColumn":130},{"ruleId":"4770","severity":1,"message":"4774","line":663,"column":156,"nodeType":"4772","messageId":"4773","endLine":663,"endColumn":158},{"ruleId":"4782","severity":1,"message":"4783","line":665,"column":29,"nodeType":"4777","endLine":665,"endColumn":101},{"ruleId":"4770","severity":1,"message":"4774","line":665,"column":127,"nodeType":"4772","messageId":"4773","endLine":665,"endColumn":129},{"ruleId":"4782","severity":1,"message":"4783","line":666,"column":29,"nodeType":"4777","endLine":666,"endColumn":101},{"ruleId":"4770","severity":1,"message":"4774","line":666,"column":134,"nodeType":"4772","messageId":"4773","endLine":666,"endColumn":136},{"ruleId":"4782","severity":1,"message":"4783","line":771,"column":15,"nodeType":"4777","endLine":771,"endColumn":213},{"ruleId":"4775","severity":1,"message":"4776","line":846,"column":15,"nodeType":"4777","endLine":846,"endColumn":182},{"ruleId":"4782","severity":1,"message":"4783","line":947,"column":13,"nodeType":"4777","endLine":947,"endColumn":211},{"ruleId":"4782","severity":1,"message":"4783","line":54,"column":15,"nodeType":"4777","endLine":54,"endColumn":87},{"ruleId":"4782","severity":1,"message":"4783","line":234,"column":15,"nodeType":"4777","endLine":234,"endColumn":82},{"ruleId":"4770","severity":1,"message":"4774","line":43,"column":24,"nodeType":"4772","messageId":"4773","endLine":43,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4774","line":24,"column":36,"nodeType":"4772","messageId":"4773","endLine":24,"endColumn":38},{"ruleId":"4770","severity":1,"message":"4774","line":27,"column":36,"nodeType":"4772","messageId":"4773","endLine":27,"endColumn":38},{"ruleId":"4784","severity":1,"message":"4785","line":41,"column":9,"nodeType":"4786","messageId":"4787","endLine":64,"endColumn":10},{"ruleId":"4770","severity":1,"message":"4771","line":83,"column":76,"nodeType":"4772","messageId":"4773","endLine":83,"endColumn":78},{"ruleId":"4784","severity":1,"message":"4785","line":42,"column":9,"nodeType":"4786","messageId":"4787","endLine":61,"endColumn":10},{"ruleId":"4784","severity":1,"message":"4785","line":42,"column":9,"nodeType":"4786","messageId":"4787","endLine":61,"endColumn":10},{"ruleId":"4782","severity":1,"message":"4783","line":112,"column":17,"nodeType":"4777","endLine":112,"endColumn":138},{"ruleId":"4770","severity":1,"message":"4774","line":115,"column":27,"nodeType":"4772","messageId":"4773","endLine":115,"endColumn":29},{"ruleId":"4770","severity":1,"message":"4774","line":189,"column":49,"nodeType":"4772","messageId":"4773","endLine":189,"endColumn":51},{"ruleId":"4770","severity":1,"message":"4774","line":189,"column":65,"nodeType":"4772","messageId":"4773","endLine":189,"endColumn":67},{"ruleId":"4770","severity":1,"message":"4771","line":190,"column":56,"nodeType":"4772","messageId":"4773","endLine":190,"endColumn":58},{"ruleId":"4782","severity":1,"message":"4783","line":292,"column":13,"nodeType":"4777","endLine":292,"endColumn":92},{"ruleId":"4770","severity":1,"message":"4774","line":305,"column":23,"nodeType":"4772","messageId":"4773","endLine":305,"endColumn":25},{"ruleId":"4775","severity":1,"message":"4776","line":306,"column":13,"nodeType":"4777","endLine":306,"endColumn":198},{"ruleId":"4782","severity":1,"message":"4783","line":306,"column":13,"nodeType":"4777","endLine":306,"endColumn":198},{"ruleId":"4770","severity":1,"message":"4774","line":311,"column":23,"nodeType":"4772","messageId":"4773","endLine":311,"endColumn":25},{"ruleId":"4770","severity":1,"message":"4774","line":108,"column":36,"nodeType":"4772","messageId":"4773","endLine":108,"endColumn":38},{"ruleId":"4784","severity":1,"message":"4785","line":43,"column":9,"nodeType":"4786","messageId":"4787","endLine":66,"endColumn":10},{"ruleId":"4770","severity":1,"message":"4774","line":128,"column":35,"nodeType":"4772","messageId":"4773","endLine":128,"endColumn":37},{"ruleId":"4782","severity":1,"message":"4783","line":163,"column":9,"nodeType":"4777","endLine":163,"endColumn":95},{"ruleId":"4770","severity":1,"message":"4771","line":166,"column":34,"nodeType":"4772","messageId":"4773","endLine":166,"endColumn":36},{"ruleId":"4782","severity":1,"message":"4783","line":169,"column":17,"nodeType":"4777","endLine":169,"endColumn":159},{"ruleId":"4782","severity":1,"message":"4783","line":201,"column":17,"nodeType":"4777","endLine":201,"endColumn":118},{"ruleId":"4770","severity":1,"message":"4774","line":206,"column":26,"nodeType":"4772","messageId":"4773","endLine":206,"endColumn":28},{"ruleId":"4782","severity":1,"message":"4783","line":358,"column":13,"nodeType":"4777","endLine":358,"endColumn":53},{"ruleId":"4782","severity":1,"message":"4783","line":363,"column":11,"nodeType":"4777","endLine":363,"endColumn":106},{"ruleId":"4782","severity":1,"message":"4783","line":374,"column":11,"nodeType":"4777","endLine":374,"endColumn":106},{"ruleId":"4770","severity":1,"message":"4774","line":415,"column":22,"nodeType":"4772","messageId":"4773","endLine":415,"endColumn":24},{"ruleId":"4782","severity":1,"message":"4783","line":418,"column":13,"nodeType":"4777","endLine":418,"endColumn":53},{"ruleId":"4770","severity":1,"message":"4774","line":93,"column":14,"nodeType":"4772","messageId":"4773","endLine":93,"endColumn":16},{"ruleId":"4782","severity":1,"message":"4783","line":99,"column":9,"nodeType":"4777","endLine":99,"endColumn":111},{"ruleId":"4770","severity":1,"message":"4771","line":102,"column":34,"nodeType":"4772","messageId":"4773","endLine":102,"endColumn":36},{"ruleId":"4782","severity":1,"message":"4783","line":105,"column":17,"nodeType":"4777","endLine":105,"endColumn":159},{"ruleId":"4782","severity":1,"message":"4783","line":150,"column":17,"nodeType":"4777","endLine":150,"endColumn":138},{"ruleId":"4770","severity":1,"message":"4774","line":153,"column":29,"nodeType":"4772","messageId":"4773","endLine":153,"endColumn":31},{"ruleId":"4770","severity":1,"message":"4774","line":169,"column":32,"nodeType":"4772","messageId":"4773","endLine":169,"endColumn":34},{"ruleId":"4770","severity":1,"message":"4774","line":269,"column":31,"nodeType":"4772","messageId":"4773","endLine":269,"endColumn":33},{"ruleId":"4770","severity":1,"message":"4774","line":293,"column":22,"nodeType":"4772","messageId":"4773","endLine":293,"endColumn":24},{"ruleId":"4782","severity":1,"message":"4783","line":296,"column":13,"nodeType":"4777","endLine":296,"endColumn":53},{"ruleId":"4775","severity":1,"message":"4776","line":299,"column":11,"nodeType":"4777","endLine":299,"endColumn":197},{"ruleId":"4782","severity":1,"message":"4783","line":299,"column":11,"nodeType":"4777","endLine":299,"endColumn":197},{"ruleId":"4775","severity":1,"message":"4776","line":308,"column":11,"nodeType":"4777","endLine":308,"endColumn":197},{"ruleId":"4782","severity":1,"message":"4783","line":308,"column":11,"nodeType":"4777","endLine":308,"endColumn":197},{"ruleId":"4775","severity":1,"message":"4776","line":309,"column":11,"nodeType":"4777","endLine":309,"endColumn":285},{"ruleId":"4788","severity":1,"message":"4789","line":95,"column":6,"nodeType":"4790","endLine":95,"endColumn":8,"suggestions":"4791","suppressions":"4792"},{"ruleId":"4778","severity":1,"message":"4779","line":15,"column":3,"nodeType":"4780","messageId":"4781","endLine":17,"endColumn":4},{"ruleId":"4770","severity":1,"message":"4774","line":34,"column":15,"nodeType":"4772","messageId":"4773","endLine":34,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4774","line":108,"column":39,"nodeType":"4772","messageId":"4773","endLine":108,"endColumn":41},{"ruleId":"4770","severity":1,"message":"4774","line":161,"column":32,"nodeType":"4772","messageId":"4773","endLine":161,"endColumn":34},{"ruleId":"4770","severity":1,"message":"4771","line":200,"column":65,"nodeType":"4772","messageId":"4773","endLine":200,"endColumn":67},{"ruleId":"4770","severity":1,"message":"4774","line":241,"column":24,"nodeType":"4772","messageId":"4773","endLine":241,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4774","line":18,"column":34,"nodeType":"4772","messageId":"4773","endLine":18,"endColumn":36},{"ruleId":"4770","severity":1,"message":"4771","line":42,"column":75,"nodeType":"4772","messageId":"4773","endLine":42,"endColumn":77},{"ruleId":"4770","severity":1,"message":"4771","line":56,"column":75,"nodeType":"4772","messageId":"4773","endLine":56,"endColumn":77},{"ruleId":"4770","severity":1,"message":"4774","line":81,"column":24,"nodeType":"4772","messageId":"4773","endLine":81,"endColumn":26},{"ruleId":"4778","severity":1,"message":"4779","line":61,"column":3,"nodeType":"4780","messageId":"4781","endLine":63,"endColumn":4},{"ruleId":"4775","severity":1,"message":"4776","line":174,"column":13,"nodeType":"4777","endLine":174,"endColumn":166},{"ruleId":"4782","severity":1,"message":"4783","line":174,"column":13,"nodeType":"4777","endLine":174,"endColumn":166},{"ruleId":"4770","severity":1,"message":"4774","line":55,"column":21,"nodeType":"4772","messageId":"4773","endLine":55,"endColumn":23},{"ruleId":"4770","severity":1,"message":"4774","line":68,"column":27,"nodeType":"4772","messageId":"4773","endLine":68,"endColumn":29},{"ruleId":"4770","severity":1,"message":"4774","line":79,"column":27,"nodeType":"4772","messageId":"4773","endLine":79,"endColumn":29},{"ruleId":"4770","severity":1,"message":"4771","line":94,"column":50,"nodeType":"4772","messageId":"4773","endLine":94,"endColumn":52},{"ruleId":"4770","severity":1,"message":"4771","line":228,"column":64,"nodeType":"4772","messageId":"4773","endLine":228,"endColumn":66},{"ruleId":"4770","severity":1,"message":"4774","line":59,"column":13,"nodeType":"4772","messageId":"4773","endLine":59,"endColumn":15},{"ruleId":"4770","severity":1,"message":"4771","line":124,"column":28,"nodeType":"4772","messageId":"4773","endLine":124,"endColumn":30},{"ruleId":"4782","severity":1,"message":"4783","line":124,"column":36,"nodeType":"4777","endLine":124,"endColumn":93},{"ruleId":"4770","severity":1,"message":"4771","line":125,"column":29,"nodeType":"4772","messageId":"4773","endLine":125,"endColumn":31},{"ruleId":"4782","severity":1,"message":"4783","line":126,"column":35,"nodeType":"4777","endLine":126,"endColumn":91},{"ruleId":"4770","severity":1,"message":"4771","line":201,"column":29,"nodeType":"4772","messageId":"4773","endLine":201,"endColumn":31},{"ruleId":"4770","severity":1,"message":"4771","line":204,"column":29,"nodeType":"4772","messageId":"4773","endLine":204,"endColumn":31},{"ruleId":"4770","severity":1,"message":"4771","line":207,"column":36,"nodeType":"4772","messageId":"4773","endLine":207,"endColumn":38},{"ruleId":"4778","severity":1,"message":"4779","line":59,"column":3,"nodeType":"4780","messageId":"4781","endLine":61,"endColumn":4},{"ruleId":"4778","severity":1,"message":"4779","line":102,"column":3,"nodeType":"4780","messageId":"4781","endLine":104,"endColumn":4},{"ruleId":"4784","severity":1,"message":"4785","line":107,"column":5,"nodeType":"4786","messageId":"4787","endLine":114,"endColumn":6},{"ruleId":"4778","severity":1,"message":"4779","line":9,"column":3,"nodeType":"4780","messageId":"4781","endLine":11,"endColumn":4},{"ruleId":"4770","severity":1,"message":"4774","line":60,"column":13,"nodeType":"4772","messageId":"4773","endLine":60,"endColumn":15},{"ruleId":"4770","severity":1,"message":"4771","line":139,"column":28,"nodeType":"4772","messageId":"4773","endLine":139,"endColumn":30},{"ruleId":"4782","severity":1,"message":"4783","line":139,"column":36,"nodeType":"4777","endLine":139,"endColumn":93},{"ruleId":"4770","severity":1,"message":"4771","line":140,"column":29,"nodeType":"4772","messageId":"4773","endLine":140,"endColumn":31},{"ruleId":"4782","severity":1,"message":"4783","line":141,"column":35,"nodeType":"4777","endLine":141,"endColumn":91},{"ruleId":"4782","severity":1,"message":"4783","line":259,"column":9,"nodeType":"4777","endLine":260,"endColumn":63},{"ruleId":"4782","severity":1,"message":"4783","line":119,"column":43,"nodeType":"4777","endLine":119,"endColumn":100},{"ruleId":"4782","severity":1,"message":"4783","line":121,"column":41,"nodeType":"4777","endLine":121,"endColumn":97},{"ruleId":"4770","severity":1,"message":"4774","line":56,"column":13,"nodeType":"4772","messageId":"4773","endLine":56,"endColumn":15},{"ruleId":"4770","severity":1,"message":"4771","line":104,"column":28,"nodeType":"4772","messageId":"4773","endLine":104,"endColumn":30},{"ruleId":"4782","severity":1,"message":"4783","line":104,"column":36,"nodeType":"4777","endLine":104,"endColumn":93},{"ruleId":"4770","severity":1,"message":"4771","line":105,"column":29,"nodeType":"4772","messageId":"4773","endLine":105,"endColumn":31},{"ruleId":"4782","severity":1,"message":"4783","line":106,"column":35,"nodeType":"4777","endLine":106,"endColumn":91},{"ruleId":"4770","severity":1,"message":"4771","line":177,"column":42,"nodeType":"4772","messageId":"4773","endLine":177,"endColumn":44},{"ruleId":"4770","severity":1,"message":"4771","line":181,"column":41,"nodeType":"4772","messageId":"4773","endLine":181,"endColumn":43},{"ruleId":"4770","severity":1,"message":"4771","line":188,"column":40,"nodeType":"4772","messageId":"4773","endLine":188,"endColumn":42},{"ruleId":"4770","severity":1,"message":"4771","line":195,"column":29,"nodeType":"4772","messageId":"4773","endLine":195,"endColumn":31},{"ruleId":"4770","severity":1,"message":"4771","line":198,"column":32,"nodeType":"4772","messageId":"4773","endLine":198,"endColumn":34},{"ruleId":"4770","severity":1,"message":"4771","line":201,"column":32,"nodeType":"4772","messageId":"4773","endLine":201,"endColumn":34},{"ruleId":"4775","severity":1,"message":"4776","line":170,"column":13,"nodeType":"4777","endLine":170,"endColumn":166},{"ruleId":"4782","severity":1,"message":"4783","line":170,"column":13,"nodeType":"4777","endLine":170,"endColumn":166},{"ruleId":"4782","severity":1,"message":"4783","line":38,"column":17,"nodeType":"4777","endLine":38,"endColumn":71},{"ruleId":"4770","severity":1,"message":"4771","line":112,"column":27,"nodeType":"4772","messageId":"4773","endLine":112,"endColumn":29},{"ruleId":"4770","severity":1,"message":"4774","line":127,"column":24,"nodeType":"4772","messageId":"4773","endLine":127,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4774","line":133,"column":24,"nodeType":"4772","messageId":"4773","endLine":133,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4774","line":167,"column":24,"nodeType":"4772","messageId":"4773","endLine":167,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4774","line":28,"column":15,"nodeType":"4772","messageId":"4773","endLine":28,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4774","line":105,"column":13,"nodeType":"4772","messageId":"4773","endLine":105,"endColumn":15},{"ruleId":"4770","severity":1,"message":"4771","line":124,"column":64,"nodeType":"4772","messageId":"4773","endLine":124,"endColumn":66},{"ruleId":"4770","severity":1,"message":"4771","line":182,"column":34,"nodeType":"4772","messageId":"4773","endLine":182,"endColumn":36},{"ruleId":"4782","severity":1,"message":"4783","line":182,"column":42,"nodeType":"4777","endLine":182,"endColumn":99},{"ruleId":"4770","severity":1,"message":"4771","line":183,"column":35,"nodeType":"4772","messageId":"4773","endLine":183,"endColumn":37},{"ruleId":"4782","severity":1,"message":"4783","line":184,"column":41,"nodeType":"4777","endLine":184,"endColumn":97},{"ruleId":"4770","severity":1,"message":"4774","line":259,"column":27,"nodeType":"4772","messageId":"4773","endLine":259,"endColumn":29},{"ruleId":"4770","severity":1,"message":"4774","line":270,"column":27,"nodeType":"4772","messageId":"4773","endLine":270,"endColumn":29},{"ruleId":"4770","severity":1,"message":"4771","line":285,"column":50,"nodeType":"4772","messageId":"4773","endLine":285,"endColumn":52},{"ruleId":"4770","severity":1,"message":"4774","line":116,"column":21,"nodeType":"4772","messageId":"4773","endLine":116,"endColumn":23},{"ruleId":"4770","severity":1,"message":"4774","line":437,"column":36,"nodeType":"4772","messageId":"4773","endLine":437,"endColumn":38},{"ruleId":"4784","severity":1,"message":"4785","line":45,"column":5,"nodeType":"4786","messageId":"4787","endLine":52,"endColumn":6},{"ruleId":"4778","severity":1,"message":"4779","line":8,"column":3,"nodeType":"4780","messageId":"4781","endLine":10,"endColumn":4},{"ruleId":"4770","severity":1,"message":"4774","line":62,"column":22,"nodeType":"4772","messageId":"4773","endLine":62,"endColumn":24},{"ruleId":"4770","severity":1,"message":"4774","line":63,"column":34,"nodeType":"4772","messageId":"4773","endLine":63,"endColumn":36},{"ruleId":"4770","severity":1,"message":"4774","line":21,"column":34,"nodeType":"4772","messageId":"4773","endLine":21,"endColumn":36},{"ruleId":"4778","severity":1,"message":"4779","line":19,"column":3,"nodeType":"4780","messageId":"4781","endLine":21,"endColumn":4},{"ruleId":"4770","severity":1,"message":"4774","line":47,"column":48,"nodeType":"4772","messageId":"4773","endLine":47,"endColumn":50},{"ruleId":"4770","severity":1,"message":"4774","line":48,"column":58,"nodeType":"4772","messageId":"4773","endLine":48,"endColumn":60},{"ruleId":"4770","severity":1,"message":"4774","line":48,"column":101,"nodeType":"4772","messageId":"4773","endLine":48,"endColumn":103},{"ruleId":"4770","severity":1,"message":"4774","line":115,"column":35,"nodeType":"4772","messageId":"4773","endLine":115,"endColumn":37},{"ruleId":"4770","severity":1,"message":"4771","line":120,"column":38,"nodeType":"4772","messageId":"4773","endLine":120,"endColumn":40},{"ruleId":"4770","severity":1,"message":"4774","line":140,"column":20,"nodeType":"4772","messageId":"4773","endLine":140,"endColumn":22},{"ruleId":"4770","severity":1,"message":"4774","line":140,"column":42,"nodeType":"4772","messageId":"4773","endLine":140,"endColumn":44},{"ruleId":"4770","severity":1,"message":"4774","line":140,"column":67,"nodeType":"4772","messageId":"4773","endLine":140,"endColumn":69},{"ruleId":"4770","severity":1,"message":"4774","line":145,"column":18,"nodeType":"4772","messageId":"4773","endLine":145,"endColumn":20},{"ruleId":"4770","severity":1,"message":"4774","line":145,"column":43,"nodeType":"4772","messageId":"4773","endLine":145,"endColumn":45},{"ruleId":"4770","severity":1,"message":"4774","line":146,"column":22,"nodeType":"4772","messageId":"4773","endLine":146,"endColumn":24},{"ruleId":"4770","severity":1,"message":"4774","line":146,"column":44,"nodeType":"4772","messageId":"4773","endLine":146,"endColumn":46},{"ruleId":"4770","severity":1,"message":"4774","line":150,"column":58,"nodeType":"4772","messageId":"4773","endLine":150,"endColumn":60},{"ruleId":"4770","severity":1,"message":"4774","line":150,"column":80,"nodeType":"4772","messageId":"4773","endLine":150,"endColumn":82},{"ruleId":"4784","severity":1,"message":"4785","line":165,"column":5,"nodeType":"4786","messageId":"4787","endLine":176,"endColumn":6},{"ruleId":"4770","severity":1,"message":"4774","line":181,"column":35,"nodeType":"4772","messageId":"4773","endLine":181,"endColumn":37},{"ruleId":"4770","severity":1,"message":"4771","line":186,"column":32,"nodeType":"4772","messageId":"4773","endLine":186,"endColumn":34},{"ruleId":"4770","severity":1,"message":"4774","line":196,"column":35,"nodeType":"4772","messageId":"4773","endLine":196,"endColumn":37},{"ruleId":"4770","severity":1,"message":"4771","line":201,"column":32,"nodeType":"4772","messageId":"4773","endLine":201,"endColumn":34},{"ruleId":"4770","severity":1,"message":"4771","line":323,"column":50,"nodeType":"4772","messageId":"4773","endLine":323,"endColumn":52},{"ruleId":"4784","severity":1,"message":"4785","line":351,"column":5,"nodeType":"4786","messageId":"4787","endLine":361,"endColumn":6},{"ruleId":"4770","severity":1,"message":"4774","line":364,"column":21,"nodeType":"4772","messageId":"4773","endLine":364,"endColumn":23},{"ruleId":"4770","severity":1,"message":"4774","line":409,"column":35,"nodeType":"4772","messageId":"4773","endLine":409,"endColumn":37},{"ruleId":"4784","severity":1,"message":"4785","line":430,"column":7,"nodeType":"4786","messageId":"4787","endLine":443,"endColumn":8},{"ruleId":"4784","severity":1,"message":"4785","line":450,"column":5,"nodeType":"4786","messageId":"4787","endLine":463,"endColumn":6},{"ruleId":"4770","severity":1,"message":"4774","line":475,"column":22,"nodeType":"4772","messageId":"4773","endLine":475,"endColumn":24},{"ruleId":"4770","severity":1,"message":"4774","line":475,"column":44,"nodeType":"4772","messageId":"4773","endLine":475,"endColumn":46},{"ruleId":"4770","severity":1,"message":"4774","line":487,"column":22,"nodeType":"4772","messageId":"4773","endLine":487,"endColumn":24},{"ruleId":"4770","severity":1,"message":"4774","line":487,"column":44,"nodeType":"4772","messageId":"4773","endLine":487,"endColumn":46},{"ruleId":"4770","severity":1,"message":"4774","line":496,"column":20,"nodeType":"4772","messageId":"4773","endLine":496,"endColumn":22},{"ruleId":"4770","severity":1,"message":"4774","line":496,"column":42,"nodeType":"4772","messageId":"4773","endLine":496,"endColumn":44},{"ruleId":"4770","severity":1,"message":"4774","line":504,"column":20,"nodeType":"4772","messageId":"4773","endLine":504,"endColumn":22},{"ruleId":"4770","severity":1,"message":"4774","line":504,"column":42,"nodeType":"4772","messageId":"4773","endLine":504,"endColumn":44},{"ruleId":"4770","severity":1,"message":"4774","line":512,"column":20,"nodeType":"4772","messageId":"4773","endLine":512,"endColumn":22},{"ruleId":"4770","severity":1,"message":"4774","line":519,"column":20,"nodeType":"4772","messageId":"4773","endLine":519,"endColumn":22},{"ruleId":"4770","severity":1,"message":"4774","line":539,"column":22,"nodeType":"4772","messageId":"4773","endLine":539,"endColumn":24},{"ruleId":"4770","severity":1,"message":"4774","line":539,"column":44,"nodeType":"4772","messageId":"4773","endLine":539,"endColumn":46},{"ruleId":"4770","severity":1,"message":"4774","line":551,"column":22,"nodeType":"4772","messageId":"4773","endLine":551,"endColumn":24},{"ruleId":"4770","severity":1,"message":"4774","line":551,"column":44,"nodeType":"4772","messageId":"4773","endLine":551,"endColumn":46},{"ruleId":"4770","severity":1,"message":"4774","line":566,"column":20,"nodeType":"4772","messageId":"4773","endLine":566,"endColumn":22},{"ruleId":"4770","severity":1,"message":"4774","line":566,"column":42,"nodeType":"4772","messageId":"4773","endLine":566,"endColumn":44},{"ruleId":"4770","severity":1,"message":"4774","line":578,"column":20,"nodeType":"4772","messageId":"4773","endLine":578,"endColumn":22},{"ruleId":"4770","severity":1,"message":"4774","line":578,"column":42,"nodeType":"4772","messageId":"4773","endLine":578,"endColumn":44},{"ruleId":"4770","severity":1,"message":"4774","line":588,"column":20,"nodeType":"4772","messageId":"4773","endLine":588,"endColumn":22},{"ruleId":"4770","severity":1,"message":"4774","line":592,"column":56,"nodeType":"4772","messageId":"4773","endLine":592,"endColumn":58},{"ruleId":"4770","severity":1,"message":"4774","line":615,"column":21,"nodeType":"4772","messageId":"4773","endLine":615,"endColumn":23},{"ruleId":"4770","severity":1,"message":"4774","line":615,"column":43,"nodeType":"4772","messageId":"4773","endLine":615,"endColumn":45},{"ruleId":"4770","severity":1,"message":"4774","line":627,"column":20,"nodeType":"4772","messageId":"4773","endLine":627,"endColumn":22},{"ruleId":"4770","severity":1,"message":"4774","line":636,"column":20,"nodeType":"4772","messageId":"4773","endLine":636,"endColumn":22},{"ruleId":"4770","severity":1,"message":"4774","line":643,"column":20,"nodeType":"4772","messageId":"4773","endLine":643,"endColumn":22},{"ruleId":"4770","severity":1,"message":"4774","line":671,"column":24,"nodeType":"4772","messageId":"4773","endLine":671,"endColumn":26},{"ruleId":"4784","severity":1,"message":"4785","line":678,"column":5,"nodeType":"4786","messageId":"4787","endLine":697,"endColumn":6},{"ruleId":"4784","severity":1,"message":"4785","line":703,"column":5,"nodeType":"4786","messageId":"4787","endLine":722,"endColumn":6},{"ruleId":"4784","severity":1,"message":"4785","line":727,"column":5,"nodeType":"4786","messageId":"4787","endLine":778,"endColumn":6},{"ruleId":"4770","severity":1,"message":"4774","line":957,"column":47,"nodeType":"4772","messageId":"4773","endLine":957,"endColumn":49},{"ruleId":"4770","severity":1,"message":"4771","line":968,"column":19,"nodeType":"4772","messageId":"4773","endLine":968,"endColumn":21},{"ruleId":"4784","severity":1,"message":"4785","line":985,"column":5,"nodeType":"4786","messageId":"4787","endLine":1039,"endColumn":6},{"ruleId":"4784","severity":1,"message":"4785","line":1049,"column":5,"nodeType":"4786","messageId":"4787","endLine":1088,"endColumn":6},{"ruleId":"4770","severity":1,"message":"4774","line":1074,"column":22,"nodeType":"4772","messageId":"4773","endLine":1074,"endColumn":24},{"ruleId":"4770","severity":1,"message":"4774","line":1074,"column":41,"nodeType":"4772","messageId":"4773","endLine":1074,"endColumn":43},{"ruleId":"4770","severity":1,"message":"4774","line":1082,"column":22,"nodeType":"4772","messageId":"4773","endLine":1082,"endColumn":24},{"ruleId":"4770","severity":1,"message":"4774","line":1082,"column":41,"nodeType":"4772","messageId":"4773","endLine":1082,"endColumn":43},{"ruleId":"4770","severity":1,"message":"4774","line":1091,"column":18,"nodeType":"4772","messageId":"4773","endLine":1091,"endColumn":20},{"ruleId":"4770","severity":1,"message":"4774","line":1091,"column":37,"nodeType":"4772","messageId":"4773","endLine":1091,"endColumn":39},{"ruleId":"4770","severity":1,"message":"4774","line":1093,"column":25,"nodeType":"4772","messageId":"4773","endLine":1093,"endColumn":27},{"ruleId":"4770","severity":1,"message":"4774","line":1093,"column":45,"nodeType":"4772","messageId":"4773","endLine":1093,"endColumn":47},{"ruleId":"4784","severity":1,"message":"4785","line":1107,"column":5,"nodeType":"4786","messageId":"4787","endLine":1158,"endColumn":6},{"ruleId":"4770","severity":1,"message":"4774","line":1178,"column":33,"nodeType":"4772","messageId":"4773","endLine":1178,"endColumn":35},{"ruleId":"4770","severity":1,"message":"4774","line":1186,"column":40,"nodeType":"4772","messageId":"4773","endLine":1186,"endColumn":42},{"ruleId":"4770","severity":1,"message":"4774","line":1435,"column":29,"nodeType":"4772","messageId":"4773","endLine":1435,"endColumn":31},{"ruleId":"4770","severity":1,"message":"4774","line":1435,"column":58,"nodeType":"4772","messageId":"4773","endLine":1435,"endColumn":60},{"ruleId":"4770","severity":1,"message":"4774","line":1443,"column":52,"nodeType":"4772","messageId":"4773","endLine":1443,"endColumn":54},{"ruleId":"4770","severity":1,"message":"4774","line":1443,"column":81,"nodeType":"4772","messageId":"4773","endLine":1443,"endColumn":83},{"ruleId":"4770","severity":1,"message":"4774","line":1449,"column":53,"nodeType":"4772","messageId":"4773","endLine":1449,"endColumn":55},{"ruleId":"4770","severity":1,"message":"4774","line":1571,"column":15,"nodeType":"4772","messageId":"4773","endLine":1571,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4774","line":1571,"column":35,"nodeType":"4772","messageId":"4773","endLine":1571,"endColumn":37},{"ruleId":"4793","severity":1,"message":"4794","line":869,"column":60,"nodeType":"4795","messageId":"4796","endLine":869,"endColumn":61,"suggestions":"4797","suppressions":"4798"},{"ruleId":"4799","severity":1,"message":"4800","line":880,"column":65,"nodeType":"4772","messageId":"4801","endLine":880,"endColumn":66,"suppressions":"4802"},{"ruleId":"4793","severity":1,"message":"4794","line":880,"column":71,"nodeType":"4795","messageId":"4796","endLine":880,"endColumn":72,"suggestions":"4803","suppressions":"4804"},{"ruleId":"4793","severity":1,"message":"4794","line":898,"column":64,"nodeType":"4795","messageId":"4796","endLine":898,"endColumn":65,"suggestions":"4805","suppressions":"4806"},{"ruleId":"4793","severity":1,"message":"4794","line":911,"column":65,"nodeType":"4795","messageId":"4796","endLine":911,"endColumn":66,"suggestions":"4807","suppressions":"4808"},{"ruleId":"4778","severity":1,"message":"4779","line":8,"column":3,"nodeType":"4780","messageId":"4781","endLine":10,"endColumn":4},{"ruleId":"4770","severity":1,"message":"4771","line":81,"column":47,"nodeType":"4772","messageId":"4773","endLine":81,"endColumn":49},{"ruleId":"4770","severity":1,"message":"4774","line":233,"column":51,"nodeType":"4772","messageId":"4773","endLine":233,"endColumn":53},{"ruleId":"4770","severity":1,"message":"4771","line":341,"column":22,"nodeType":"4772","messageId":"4773","endLine":341,"endColumn":24},{"ruleId":"4770","severity":1,"message":"4771","line":350,"column":22,"nodeType":"4772","messageId":"4773","endLine":350,"endColumn":24},{"ruleId":"4778","severity":1,"message":"4779","line":8,"column":3,"nodeType":"4780","messageId":"4781","endLine":10,"endColumn":4},{"ruleId":"4784","severity":1,"message":"4785","line":45,"column":5,"nodeType":"4786","messageId":"4787","endLine":52,"endColumn":6},{"ruleId":"4770","severity":1,"message":"4771","line":77,"column":27,"nodeType":"4772","messageId":"4773","endLine":77,"endColumn":29},{"ruleId":"4782","severity":1,"message":"4783","line":79,"column":23,"nodeType":"4777","endLine":79,"endColumn":107},{"ruleId":"4770","severity":1,"message":"4774","line":79,"column":134,"nodeType":"4772","messageId":"4773","endLine":79,"endColumn":136},{"ruleId":"4782","severity":1,"message":"4783","line":80,"column":23,"nodeType":"4777","endLine":80,"endColumn":102},{"ruleId":"4770","severity":1,"message":"4774","line":80,"column":128,"nodeType":"4772","messageId":"4773","endLine":80,"endColumn":130},{"ruleId":"4770","severity":1,"message":"4774","line":389,"column":25,"nodeType":"4772","messageId":"4773","endLine":389,"endColumn":27},{"ruleId":"4778","severity":1,"message":"4779","line":16,"column":3,"nodeType":"4780","messageId":"4781","endLine":18,"endColumn":4},{"ruleId":"4784","severity":1,"message":"4785","line":131,"column":5,"nodeType":"4786","messageId":"4787","endLine":138,"endColumn":6},{"ruleId":"4784","severity":1,"message":"4785","line":144,"column":5,"nodeType":"4786","messageId":"4787","endLine":151,"endColumn":6},{"ruleId":"4784","severity":1,"message":"4785","line":157,"column":5,"nodeType":"4786","messageId":"4787","endLine":167,"endColumn":6},{"ruleId":"4770","severity":1,"message":"4774","line":174,"column":19,"nodeType":"4772","messageId":"4773","endLine":174,"endColumn":21},{"ruleId":"4770","severity":1,"message":"4774","line":194,"column":30,"nodeType":"4772","messageId":"4773","endLine":194,"endColumn":32},{"ruleId":"4770","severity":1,"message":"4774","line":195,"column":22,"nodeType":"4772","messageId":"4773","endLine":195,"endColumn":24},{"ruleId":"4770","severity":1,"message":"4774","line":292,"column":14,"nodeType":"4772","messageId":"4773","endLine":292,"endColumn":16},{"ruleId":"4770","severity":1,"message":"4771","line":295,"column":29,"nodeType":"4772","messageId":"4773","endLine":295,"endColumn":31},{"ruleId":"4770","severity":1,"message":"4771","line":308,"column":29,"nodeType":"4772","messageId":"4773","endLine":308,"endColumn":31},{"ruleId":"4770","severity":1,"message":"4774","line":68,"column":27,"nodeType":"4772","messageId":"4773","endLine":68,"endColumn":29},{"ruleId":"4770","severity":1,"message":"4771","line":73,"column":33,"nodeType":"4772","messageId":"4773","endLine":73,"endColumn":35},{"ruleId":"4770","severity":1,"message":"4771","line":140,"column":27,"nodeType":"4772","messageId":"4773","endLine":140,"endColumn":29},{"ruleId":"4770","severity":1,"message":"4774","line":159,"column":26,"nodeType":"4772","messageId":"4773","endLine":159,"endColumn":28},{"ruleId":"4770","severity":1,"message":"4774","line":181,"column":38,"nodeType":"4772","messageId":"4773","endLine":181,"endColumn":40},{"ruleId":"4770","severity":1,"message":"4771","line":186,"column":42,"nodeType":"4772","messageId":"4773","endLine":186,"endColumn":44},{"ruleId":"4770","severity":1,"message":"4774","line":189,"column":28,"nodeType":"4772","messageId":"4773","endLine":189,"endColumn":30},{"ruleId":"4770","severity":1,"message":"4774","line":208,"column":24,"nodeType":"4772","messageId":"4773","endLine":208,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4774","line":214,"column":24,"nodeType":"4772","messageId":"4773","endLine":214,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4774","line":226,"column":24,"nodeType":"4772","messageId":"4773","endLine":226,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4771","line":242,"column":27,"nodeType":"4772","messageId":"4773","endLine":242,"endColumn":29},{"ruleId":"4770","severity":1,"message":"4774","line":99,"column":27,"nodeType":"4772","messageId":"4773","endLine":99,"endColumn":29},{"ruleId":"4770","severity":1,"message":"4771","line":104,"column":33,"nodeType":"4772","messageId":"4773","endLine":104,"endColumn":35},{"ruleId":"4770","severity":1,"message":"4774","line":185,"column":39,"nodeType":"4772","messageId":"4773","endLine":185,"endColumn":41},{"ruleId":"4770","severity":1,"message":"4771","line":203,"column":27,"nodeType":"4772","messageId":"4773","endLine":203,"endColumn":29},{"ruleId":"4770","severity":1,"message":"4774","line":222,"column":26,"nodeType":"4772","messageId":"4773","endLine":222,"endColumn":28},{"ruleId":"4770","severity":1,"message":"4774","line":244,"column":38,"nodeType":"4772","messageId":"4773","endLine":244,"endColumn":40},{"ruleId":"4770","severity":1,"message":"4771","line":249,"column":42,"nodeType":"4772","messageId":"4773","endLine":249,"endColumn":44},{"ruleId":"4770","severity":1,"message":"4774","line":252,"column":28,"nodeType":"4772","messageId":"4773","endLine":252,"endColumn":30},{"ruleId":"4770","severity":1,"message":"4774","line":273,"column":32,"nodeType":"4772","messageId":"4773","endLine":273,"endColumn":34},{"ruleId":"4770","severity":1,"message":"4774","line":319,"column":24,"nodeType":"4772","messageId":"4773","endLine":319,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4774","line":325,"column":24,"nodeType":"4772","messageId":"4773","endLine":325,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4774","line":337,"column":24,"nodeType":"4772","messageId":"4773","endLine":337,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4771","line":353,"column":27,"nodeType":"4772","messageId":"4773","endLine":353,"endColumn":29},{"ruleId":"4770","severity":1,"message":"4774","line":48,"column":26,"nodeType":"4772","messageId":"4773","endLine":48,"endColumn":28},{"ruleId":"4770","severity":1,"message":"4774","line":51,"column":26,"nodeType":"4772","messageId":"4773","endLine":51,"endColumn":28},{"ruleId":"4778","severity":1,"message":"4779","line":8,"column":3,"nodeType":"4780","messageId":"4781","endLine":10,"endColumn":4},{"ruleId":"4778","severity":1,"message":"4779","line":19,"column":3,"nodeType":"4780","messageId":"4781","endLine":21,"endColumn":4},{"ruleId":"4770","severity":1,"message":"4771","line":67,"column":22,"nodeType":"4772","messageId":"4773","endLine":67,"endColumn":24},{"ruleId":"4770","severity":1,"message":"4774","line":76,"column":22,"nodeType":"4772","messageId":"4773","endLine":76,"endColumn":24},{"ruleId":"4770","severity":1,"message":"4771","line":49,"column":24,"nodeType":"4772","messageId":"4773","endLine":49,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4774","line":64,"column":21,"nodeType":"4772","messageId":"4773","endLine":64,"endColumn":23},{"ruleId":"4770","severity":1,"message":"4774","line":235,"column":51,"nodeType":"4772","messageId":"4773","endLine":235,"endColumn":53},{"ruleId":"4770","severity":1,"message":"4771","line":343,"column":22,"nodeType":"4772","messageId":"4773","endLine":343,"endColumn":24},{"ruleId":"4770","severity":1,"message":"4771","line":352,"column":22,"nodeType":"4772","messageId":"4773","endLine":352,"endColumn":24},{"ruleId":"4784","severity":1,"message":"4785","line":117,"column":5,"nodeType":"4786","messageId":"4787","endLine":127,"endColumn":6},{"ruleId":"4770","severity":1,"message":"4774","line":133,"column":38,"nodeType":"4772","messageId":"4773","endLine":133,"endColumn":40},{"ruleId":"4770","severity":1,"message":"4771","line":98,"column":26,"nodeType":"4772","messageId":"4773","endLine":98,"endColumn":28},{"ruleId":"4770","severity":1,"message":"4771","line":99,"column":22,"nodeType":"4772","messageId":"4773","endLine":99,"endColumn":24},{"ruleId":"4770","severity":1,"message":"4774","line":108,"column":22,"nodeType":"4772","messageId":"4773","endLine":108,"endColumn":24},{"ruleId":"4784","severity":1,"message":"4785","line":161,"column":5,"nodeType":"4786","messageId":"4787","endLine":168,"endColumn":6},{"ruleId":"4784","severity":1,"message":"4785","line":174,"column":5,"nodeType":"4786","messageId":"4787","endLine":181,"endColumn":6},{"ruleId":"4770","severity":1,"message":"4771","line":279,"column":24,"nodeType":"4772","messageId":"4773","endLine":279,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4771","line":292,"column":24,"nodeType":"4772","messageId":"4773","endLine":292,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4774","line":84,"column":15,"nodeType":"4772","messageId":"4773","endLine":84,"endColumn":17},{"ruleId":"4778","severity":1,"message":"4779","line":18,"column":3,"nodeType":"4780","messageId":"4781","endLine":20,"endColumn":4},{"ruleId":"4775","severity":1,"message":"4776","line":140,"column":13,"nodeType":"4777","endLine":140,"endColumn":165},{"ruleId":"4782","severity":1,"message":"4783","line":140,"column":13,"nodeType":"4777","endLine":140,"endColumn":165},{"ruleId":"4770","severity":1,"message":"4771","line":192,"column":29,"nodeType":"4772","messageId":"4773","endLine":192,"endColumn":31},{"ruleId":"4770","severity":1,"message":"4771","line":82,"column":24,"nodeType":"4772","messageId":"4773","endLine":82,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4774","line":97,"column":21,"nodeType":"4772","messageId":"4773","endLine":97,"endColumn":23},{"ruleId":"4770","severity":1,"message":"4774","line":154,"column":36,"nodeType":"4772","messageId":"4773","endLine":154,"endColumn":38},{"ruleId":"4770","severity":1,"message":"4774","line":165,"column":24,"nodeType":"4772","messageId":"4773","endLine":165,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4771","line":177,"column":24,"nodeType":"4772","messageId":"4773","endLine":177,"endColumn":26},{"ruleId":"4775","severity":1,"message":"4776","line":178,"column":13,"nodeType":"4777","endLine":178,"endColumn":157},{"ruleId":"4782","severity":1,"message":"4783","line":178,"column":13,"nodeType":"4777","endLine":178,"endColumn":157},{"ruleId":"4770","severity":1,"message":"4771","line":289,"column":27,"nodeType":"4772","messageId":"4773","endLine":289,"endColumn":29},{"ruleId":"4770","severity":1,"message":"4774","line":302,"column":24,"nodeType":"4772","messageId":"4773","endLine":302,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4774","line":305,"column":24,"nodeType":"4772","messageId":"4773","endLine":305,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4774","line":50,"column":21,"nodeType":"4772","messageId":"4773","endLine":50,"endColumn":23},{"ruleId":"4770","severity":1,"message":"4771","line":69,"column":47,"nodeType":"4772","messageId":"4773","endLine":69,"endColumn":49},{"ruleId":"4770","severity":1,"message":"4774","line":77,"column":21,"nodeType":"4772","messageId":"4773","endLine":77,"endColumn":23},{"ruleId":"4770","severity":1,"message":"4774","line":120,"column":30,"nodeType":"4772","messageId":"4773","endLine":120,"endColumn":32},{"ruleId":"4770","severity":1,"message":"4774","line":51,"column":21,"nodeType":"4772","messageId":"4773","endLine":51,"endColumn":23},{"ruleId":"4770","severity":1,"message":"4771","line":78,"column":45,"nodeType":"4772","messageId":"4773","endLine":78,"endColumn":47},{"ruleId":"4770","severity":1,"message":"4774","line":86,"column":21,"nodeType":"4772","messageId":"4773","endLine":86,"endColumn":23},{"ruleId":"4778","severity":1,"message":"4779","line":18,"column":3,"nodeType":"4780","messageId":"4781","endLine":20,"endColumn":4},{"ruleId":"4770","severity":1,"message":"4774","line":58,"column":58,"nodeType":"4772","messageId":"4773","endLine":58,"endColumn":60},{"ruleId":"4782","severity":1,"message":"4783","line":68,"column":19,"nodeType":"4777","endLine":68,"endColumn":98},{"ruleId":"4770","severity":1,"message":"4774","line":68,"column":130,"nodeType":"4772","messageId":"4773","endLine":68,"endColumn":132},{"ruleId":"4782","severity":1,"message":"4783","line":71,"column":19,"nodeType":"4777","endLine":71,"endColumn":99},{"ruleId":"4770","severity":1,"message":"4774","line":71,"column":126,"nodeType":"4772","messageId":"4773","endLine":71,"endColumn":128},{"ruleId":"4775","severity":1,"message":"4776","line":169,"column":11,"nodeType":"4777","endLine":169,"endColumn":103},{"ruleId":"4782","severity":1,"message":"4783","line":169,"column":11,"nodeType":"4777","endLine":169,"endColumn":103},{"ruleId":"4770","severity":1,"message":"4774","line":233,"column":39,"nodeType":"4772","messageId":"4773","endLine":233,"endColumn":41},{"ruleId":"4770","severity":1,"message":"4771","line":250,"column":20,"nodeType":"4772","messageId":"4773","endLine":250,"endColumn":22},{"ruleId":"4770","severity":1,"message":"4774","line":50,"column":24,"nodeType":"4772","messageId":"4773","endLine":50,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4771","line":66,"column":27,"nodeType":"4772","messageId":"4773","endLine":66,"endColumn":29},{"ruleId":"4778","severity":1,"message":"4779","line":18,"column":3,"nodeType":"4780","messageId":"4781","endLine":20,"endColumn":4},{"ruleId":"4775","severity":1,"message":"4776","line":147,"column":13,"nodeType":"4777","endLine":147,"endColumn":106},{"ruleId":"4782","severity":1,"message":"4783","line":147,"column":13,"nodeType":"4777","endLine":147,"endColumn":106},{"ruleId":"4770","severity":1,"message":"4771","line":208,"column":20,"nodeType":"4772","messageId":"4773","endLine":208,"endColumn":22},{"ruleId":"4770","severity":1,"message":"4774","line":74,"column":24,"nodeType":"4772","messageId":"4773","endLine":74,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4771","line":102,"column":27,"nodeType":"4772","messageId":"4773","endLine":102,"endColumn":29},{"ruleId":"4784","severity":1,"message":"4785","line":193,"column":5,"nodeType":"4786","messageId":"4787","endLine":200,"endColumn":6},{"ruleId":"4784","severity":1,"message":"4785","line":206,"column":5,"nodeType":"4786","messageId":"4787","endLine":211,"endColumn":6},{"ruleId":"4784","severity":1,"message":"4785","line":215,"column":5,"nodeType":"4786","messageId":"4787","endLine":220,"endColumn":6},{"ruleId":"4770","severity":1,"message":"4774","line":238,"column":26,"nodeType":"4772","messageId":"4773","endLine":238,"endColumn":28},{"ruleId":"4770","severity":1,"message":"4774","line":249,"column":26,"nodeType":"4772","messageId":"4773","endLine":249,"endColumn":28},{"ruleId":"4770","severity":1,"message":"4771","line":282,"column":43,"nodeType":"4772","messageId":"4773","endLine":282,"endColumn":45},{"ruleId":"4770","severity":1,"message":"4771","line":387,"column":27,"nodeType":"4772","messageId":"4773","endLine":387,"endColumn":29},{"ruleId":"4770","severity":1,"message":"4774","line":398,"column":34,"nodeType":"4772","messageId":"4773","endLine":398,"endColumn":36},{"ruleId":"4770","severity":1,"message":"4774","line":401,"column":24,"nodeType":"4772","messageId":"4773","endLine":401,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4774","line":414,"column":40,"nodeType":"4772","messageId":"4773","endLine":414,"endColumn":42},{"ruleId":"4770","severity":1,"message":"4774","line":417,"column":24,"nodeType":"4772","messageId":"4773","endLine":417,"endColumn":26},{"ruleId":"4809","severity":1,"message":"4810","line":55,"column":7,"nodeType":"4811","messageId":"4812","endLine":55,"endColumn":63},{"ruleId":"4809","severity":1,"message":"4810","line":56,"column":7,"nodeType":"4811","messageId":"4812","endLine":56,"endColumn":63},{"ruleId":"4770","severity":1,"message":"4774","line":111,"column":58,"nodeType":"4772","messageId":"4773","endLine":111,"endColumn":60},{"ruleId":"4775","severity":1,"message":"4776","line":117,"column":13,"nodeType":"4777","endLine":117,"endColumn":163},{"ruleId":"4782","severity":1,"message":"4783","line":117,"column":13,"nodeType":"4777","endLine":117,"endColumn":163},{"ruleId":"4770","severity":1,"message":"4771","line":173,"column":29,"nodeType":"4772","messageId":"4773","endLine":173,"endColumn":31},{"ruleId":"4778","severity":1,"message":"4779","line":17,"column":3,"nodeType":"4780","messageId":"4781","endLine":19,"endColumn":4},{"ruleId":"4770","severity":1,"message":"4774","line":109,"column":43,"nodeType":"4772","messageId":"4773","endLine":109,"endColumn":45},{"ruleId":"4775","severity":1,"message":"4776","line":120,"column":13,"nodeType":"4777","endLine":120,"endColumn":163},{"ruleId":"4782","severity":1,"message":"4783","line":120,"column":13,"nodeType":"4777","endLine":120,"endColumn":163},{"ruleId":"4770","severity":1,"message":"4771","line":180,"column":30,"nodeType":"4772","messageId":"4773","endLine":180,"endColumn":32},{"ruleId":"4778","severity":1,"message":"4779","line":19,"column":3,"nodeType":"4780","messageId":"4781","endLine":21,"endColumn":4},{"ruleId":"4775","severity":1,"message":"4776","line":135,"column":13,"nodeType":"4777","endLine":135,"endColumn":163},{"ruleId":"4782","severity":1,"message":"4783","line":135,"column":13,"nodeType":"4777","endLine":135,"endColumn":163},{"ruleId":"4770","severity":1,"message":"4771","line":225,"column":24,"nodeType":"4772","messageId":"4773","endLine":225,"endColumn":26},{"ruleId":"4784","severity":1,"message":"4785","line":161,"column":5,"nodeType":"4786","messageId":"4787","endLine":168,"endColumn":6},{"ruleId":"4784","severity":1,"message":"4785","line":182,"column":5,"nodeType":"4786","messageId":"4787","endLine":189,"endColumn":6},{"ruleId":"4770","severity":1,"message":"4774","line":303,"column":24,"nodeType":"4772","messageId":"4773","endLine":303,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4771","line":347,"column":27,"nodeType":"4772","messageId":"4773","endLine":347,"endColumn":29},{"ruleId":"4784","severity":1,"message":"4785","line":141,"column":5,"nodeType":"4786","messageId":"4787","endLine":145,"endColumn":6},{"ruleId":"4784","severity":1,"message":"4785","line":150,"column":5,"nodeType":"4786","messageId":"4787","endLine":154,"endColumn":6},{"ruleId":"4770","severity":1,"message":"4771","line":250,"column":27,"nodeType":"4772","messageId":"4773","endLine":250,"endColumn":29},{"ruleId":"4770","severity":1,"message":"4771","line":263,"column":27,"nodeType":"4772","messageId":"4773","endLine":263,"endColumn":29},{"ruleId":"4782","severity":1,"message":"4783","line":137,"column":15,"nodeType":"4777","endLine":137,"endColumn":77},{"ruleId":"4770","severity":1,"message":"4771","line":114,"column":30,"nodeType":"4772","messageId":"4773","endLine":114,"endColumn":32},{"ruleId":"4770","severity":1,"message":"4771","line":116,"column":40,"nodeType":"4772","messageId":"4773","endLine":116,"endColumn":42},{"ruleId":"4770","severity":1,"message":"4771","line":118,"column":40,"nodeType":"4772","messageId":"4773","endLine":118,"endColumn":42},{"ruleId":"4770","severity":1,"message":"4774","line":57,"column":18,"nodeType":"4772","messageId":"4773","endLine":57,"endColumn":20},{"ruleId":"4770","severity":1,"message":"4774","line":59,"column":25,"nodeType":"4772","messageId":"4773","endLine":59,"endColumn":27},{"ruleId":"4770","severity":1,"message":"4774","line":61,"column":25,"nodeType":"4772","messageId":"4773","endLine":61,"endColumn":27},{"ruleId":"4770","severity":1,"message":"4774","line":65,"column":20,"nodeType":"4772","messageId":"4773","endLine":65,"endColumn":22},{"ruleId":"4770","severity":1,"message":"4774","line":69,"column":27,"nodeType":"4772","messageId":"4773","endLine":69,"endColumn":29},{"ruleId":"4770","severity":1,"message":"4774","line":73,"column":27,"nodeType":"4772","messageId":"4773","endLine":73,"endColumn":29},{"ruleId":"4784","severity":1,"message":"4785","line":63,"column":5,"nodeType":"4786","messageId":"4787","endLine":73,"endColumn":6},{"ruleId":"4784","severity":1,"message":"4785","line":264,"column":5,"nodeType":"4786","messageId":"4787","endLine":274,"endColumn":6},{"ruleId":"4770","severity":1,"message":"4774","line":278,"column":29,"nodeType":"4772","messageId":"4773","endLine":278,"endColumn":31},{"ruleId":"4770","severity":1,"message":"4774","line":279,"column":20,"nodeType":"4772","messageId":"4773","endLine":279,"endColumn":22},{"ruleId":"4770","severity":1,"message":"4774","line":55,"column":21,"nodeType":"4772","messageId":"4773","endLine":55,"endColumn":23},{"ruleId":"4770","severity":1,"message":"4771","line":71,"column":65,"nodeType":"4772","messageId":"4773","endLine":71,"endColumn":67},{"ruleId":"4784","severity":1,"message":"4785","line":143,"column":5,"nodeType":"4786","messageId":"4787","endLine":150,"endColumn":6},{"ruleId":"4770","severity":1,"message":"4771","line":271,"column":24,"nodeType":"4772","messageId":"4773","endLine":271,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4774","line":284,"column":21,"nodeType":"4772","messageId":"4773","endLine":284,"endColumn":23},{"ruleId":"4784","severity":1,"message":"4785","line":67,"column":5,"nodeType":"4786","messageId":"4787","endLine":77,"endColumn":6},{"ruleId":"4784","severity":1,"message":"4785","line":292,"column":5,"nodeType":"4786","messageId":"4787","endLine":302,"endColumn":6},{"ruleId":"4770","severity":1,"message":"4774","line":306,"column":29,"nodeType":"4772","messageId":"4773","endLine":306,"endColumn":31},{"ruleId":"4770","severity":1,"message":"4774","line":307,"column":20,"nodeType":"4772","messageId":"4773","endLine":307,"endColumn":22},{"ruleId":"4770","severity":1,"message":"4774","line":350,"column":16,"nodeType":"4772","messageId":"4773","endLine":350,"endColumn":18},{"ruleId":"4770","severity":1,"message":"4774","line":360,"column":56,"nodeType":"4772","messageId":"4773","endLine":360,"endColumn":58},{"ruleId":"4770","severity":1,"message":"4774","line":361,"column":16,"nodeType":"4772","messageId":"4773","endLine":361,"endColumn":18},{"ruleId":"4770","severity":1,"message":"4774","line":372,"column":58,"nodeType":"4772","messageId":"4773","endLine":372,"endColumn":60},{"ruleId":"4770","severity":1,"message":"4774","line":373,"column":25,"nodeType":"4772","messageId":"4773","endLine":373,"endColumn":27},{"ruleId":"4778","severity":1,"message":"4779","line":17,"column":3,"nodeType":"4780","messageId":"4781","endLine":19,"endColumn":4},{"ruleId":"4778","severity":1,"message":"4779","line":92,"column":3,"nodeType":"4780","messageId":"4781","endLine":94,"endColumn":4},{"ruleId":"4784","severity":1,"message":"4785","line":154,"column":5,"nodeType":"4786","messageId":"4787","endLine":158,"endColumn":6},{"ruleId":"4784","severity":1,"message":"4785","line":174,"column":5,"nodeType":"4786","messageId":"4787","endLine":187,"endColumn":6},{"ruleId":"4770","severity":1,"message":"4771","line":297,"column":27,"nodeType":"4772","messageId":"4773","endLine":297,"endColumn":29},{"ruleId":"4770","severity":1,"message":"4771","line":20,"column":52,"nodeType":"4772","messageId":"4773","endLine":20,"endColumn":54},{"ruleId":"4782","severity":1,"message":"4813","line":23,"column":11,"nodeType":"4777","endLine":28,"endColumn":12},{"ruleId":"4782","severity":1,"message":"4783","line":154,"column":9,"nodeType":"4777","endLine":154,"endColumn":163},{"ruleId":"4814","severity":1,"message":"4815","line":2,"column":10,"nodeType":"4816","messageId":"4817","endLine":2,"endColumn":18},{"ruleId":"4778","severity":1,"message":"4779","line":16,"column":3,"nodeType":"4780","messageId":"4781","endLine":18,"endColumn":4},{"ruleId":"4770","severity":1,"message":"4774","line":127,"column":24,"nodeType":"4772","messageId":"4773","endLine":127,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4774","line":127,"column":59,"nodeType":"4772","messageId":"4773","endLine":127,"endColumn":61},{"ruleId":"4770","severity":1,"message":"4774","line":127,"column":94,"nodeType":"4772","messageId":"4773","endLine":127,"endColumn":96},{"ruleId":"4770","severity":1,"message":"4774","line":130,"column":24,"nodeType":"4772","messageId":"4773","endLine":130,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4774","line":130,"column":60,"nodeType":"4772","messageId":"4773","endLine":130,"endColumn":62},{"ruleId":"4770","severity":1,"message":"4774","line":130,"column":96,"nodeType":"4772","messageId":"4773","endLine":130,"endColumn":98},{"ruleId":"4770","severity":1,"message":"4774","line":65,"column":23,"nodeType":"4772","messageId":"4773","endLine":65,"endColumn":25},{"ruleId":"4770","severity":1,"message":"4774","line":84,"column":35,"nodeType":"4772","messageId":"4773","endLine":84,"endColumn":37},{"ruleId":"4770","severity":1,"message":"4774","line":86,"column":27,"nodeType":"4772","messageId":"4773","endLine":86,"endColumn":29},{"ruleId":"4770","severity":1,"message":"4771","line":113,"column":36,"nodeType":"4772","messageId":"4773","endLine":113,"endColumn":38},{"ruleId":"4770","severity":1,"message":"4774","line":21,"column":19,"nodeType":"4772","messageId":"4773","endLine":21,"endColumn":21,"suppressions":"4818"},{"ruleId":"4788","severity":1,"message":"4819","line":51,"column":8,"nodeType":"4790","endLine":51,"endColumn":10,"suggestions":"4820","suppressions":"4821"},{"ruleId":"4770","severity":1,"message":"4774","line":67,"column":96,"nodeType":"4772","messageId":"4773","endLine":67,"endColumn":98,"suppressions":"4822"},{"ruleId":"4823","severity":2,"message":"4824","line":93,"column":41,"nodeType":"4816","endLine":93,"endColumn":49,"suppressions":"4825"},{"ruleId":"4823","severity":2,"message":"4824","line":94,"column":39,"nodeType":"4816","endLine":94,"endColumn":47,"suppressions":"4826"},{"ruleId":"4823","severity":2,"message":"4827","line":97,"column":5,"nodeType":"4816","endLine":97,"endColumn":14,"suppressions":"4828"},{"ruleId":"4770","severity":1,"message":"4774","line":14,"column":13,"nodeType":"4772","messageId":"4773","endLine":14,"endColumn":15},{"ruleId":"4770","severity":1,"message":"4774","line":77,"column":50,"nodeType":"4772","messageId":"4773","endLine":77,"endColumn":52},{"ruleId":"4770","severity":1,"message":"4774","line":77,"column":67,"nodeType":"4772","messageId":"4773","endLine":77,"endColumn":69},{"ruleId":"4770","severity":1,"message":"4774","line":77,"column":84,"nodeType":"4772","messageId":"4773","endLine":77,"endColumn":86},{"ruleId":"4770","severity":1,"message":"4774","line":77,"column":101,"nodeType":"4772","messageId":"4773","endLine":77,"endColumn":103},{"ruleId":"4770","severity":1,"message":"4771","line":90,"column":21,"nodeType":"4772","messageId":"4773","endLine":90,"endColumn":23},{"ruleId":"4770","severity":1,"message":"4774","line":120,"column":62,"nodeType":"4772","messageId":"4773","endLine":120,"endColumn":64},{"ruleId":"4770","severity":1,"message":"4774","line":120,"column":82,"nodeType":"4772","messageId":"4773","endLine":120,"endColumn":84},{"ruleId":"4782","severity":1,"message":"4783","line":126,"column":27,"nodeType":"4777","endLine":126,"endColumn":63},{"ruleId":"4770","severity":1,"message":"4771","line":130,"column":18,"nodeType":"4772","messageId":"4773","endLine":130,"endColumn":20},{"ruleId":"4782","severity":1,"message":"4783","line":117,"column":13,"nodeType":"4777","endLine":117,"endColumn":25},{"ruleId":"4782","severity":1,"message":"4783","line":149,"column":17,"nodeType":"4777","endLine":149,"endColumn":171},{"ruleId":"4829","severity":1,"message":"4830","line":316,"column":52,"nodeType":"4816","messageId":"4831","endLine":316,"endColumn":56,"suppressions":"4832"},{"ruleId":"4778","severity":1,"message":"4779","line":7,"column":5,"nodeType":"4780","messageId":"4781","endLine":9,"endColumn":6},{"ruleId":"4770","severity":1,"message":"4774","line":26,"column":38,"nodeType":"4772","messageId":"4773","endLine":26,"endColumn":40},{"ruleId":"4770","severity":1,"message":"4774","line":67,"column":41,"nodeType":"4772","messageId":"4773","endLine":67,"endColumn":43},{"ruleId":"4770","severity":1,"message":"4774","line":166,"column":41,"nodeType":"4772","messageId":"4773","endLine":166,"endColumn":43},{"ruleId":"4770","severity":1,"message":"4774","line":171,"column":49,"nodeType":"4772","messageId":"4773","endLine":171,"endColumn":51},{"ruleId":"4770","severity":1,"message":"4774","line":189,"column":54,"nodeType":"4772","messageId":"4773","endLine":189,"endColumn":56},{"ruleId":"4770","severity":1,"message":"4771","line":191,"column":99,"nodeType":"4772","messageId":"4773","endLine":191,"endColumn":101},{"ruleId":"4770","severity":1,"message":"4774","line":216,"column":24,"nodeType":"4772","messageId":"4773","endLine":216,"endColumn":26},{"ruleId":"4775","severity":1,"message":"4776","line":148,"column":11,"nodeType":"4777","endLine":148,"endColumn":143},{"ruleId":"4782","severity":1,"message":"4783","line":148,"column":11,"nodeType":"4777","endLine":148,"endColumn":143},{"ruleId":"4770","severity":1,"message":"4774","line":84,"column":22,"nodeType":"4772","messageId":"4773","endLine":84,"endColumn":24},{"ruleId":"4775","severity":1,"message":"4776","line":234,"column":11,"nodeType":"4777","endLine":234,"endColumn":138},{"ruleId":"4782","severity":1,"message":"4783","line":234,"column":11,"nodeType":"4777","endLine":234,"endColumn":138},{"ruleId":"4770","severity":1,"message":"4774","line":19,"column":44,"nodeType":"4772","messageId":"4773","endLine":19,"endColumn":46},{"ruleId":"4770","severity":1,"message":"4774","line":39,"column":33,"nodeType":"4772","messageId":"4773","endLine":39,"endColumn":35},{"ruleId":"4770","severity":1,"message":"4774","line":40,"column":34,"nodeType":"4772","messageId":"4773","endLine":40,"endColumn":36},{"ruleId":"4782","severity":1,"message":"4783","line":49,"column":33,"nodeType":"4777","endLine":49,"endColumn":105},{"ruleId":"4770","severity":1,"message":"4774","line":142,"column":20,"nodeType":"4772","messageId":"4773","endLine":142,"endColumn":22},{"ruleId":"4770","severity":1,"message":"4774","line":144,"column":27,"nodeType":"4772","messageId":"4773","endLine":144,"endColumn":29},{"ruleId":"4770","severity":1,"message":"4774","line":150,"column":38,"nodeType":"4772","messageId":"4773","endLine":150,"endColumn":40},{"ruleId":"4770","severity":1,"message":"4774","line":151,"column":30,"nodeType":"4772","messageId":"4773","endLine":151,"endColumn":32},{"ruleId":"4770","severity":1,"message":"4774","line":168,"column":20,"nodeType":"4772","messageId":"4773","endLine":168,"endColumn":22},{"ruleId":"4770","severity":1,"message":"4774","line":170,"column":27,"nodeType":"4772","messageId":"4773","endLine":170,"endColumn":29},{"ruleId":"4770","severity":1,"message":"4774","line":210,"column":19,"nodeType":"4772","messageId":"4773","endLine":210,"endColumn":21},{"ruleId":"4770","severity":1,"message":"4774","line":212,"column":26,"nodeType":"4772","messageId":"4773","endLine":212,"endColumn":28},{"ruleId":"4770","severity":1,"message":"4774","line":214,"column":26,"nodeType":"4772","messageId":"4773","endLine":214,"endColumn":28},{"ruleId":"4770","severity":1,"message":"4774","line":232,"column":28,"nodeType":"4772","messageId":"4773","endLine":232,"endColumn":30},{"ruleId":"4782","severity":1,"message":"4783","line":239,"column":17,"nodeType":"4777","endLine":244,"endColumn":51},{"ruleId":"4775","severity":1,"message":"4776","line":262,"column":13,"nodeType":"4777","endLine":262,"endColumn":194},{"ruleId":"4782","severity":1,"message":"4783","line":262,"column":13,"nodeType":"4777","endLine":262,"endColumn":194},{"ruleId":"4770","severity":1,"message":"4774","line":38,"column":44,"nodeType":"4772","messageId":"4773","endLine":38,"endColumn":46},{"ruleId":"4770","severity":1,"message":"4774","line":45,"column":44,"nodeType":"4772","messageId":"4773","endLine":45,"endColumn":46},{"ruleId":"4770","severity":1,"message":"4774","line":52,"column":44,"nodeType":"4772","messageId":"4773","endLine":52,"endColumn":46},{"ruleId":"4770","severity":1,"message":"4774","line":72,"column":33,"nodeType":"4772","messageId":"4773","endLine":72,"endColumn":35},{"ruleId":"4770","severity":1,"message":"4774","line":73,"column":33,"nodeType":"4772","messageId":"4773","endLine":73,"endColumn":35},{"ruleId":"4770","severity":1,"message":"4774","line":74,"column":33,"nodeType":"4772","messageId":"4773","endLine":74,"endColumn":35},{"ruleId":"4770","severity":1,"message":"4774","line":75,"column":34,"nodeType":"4772","messageId":"4773","endLine":75,"endColumn":36},{"ruleId":"4782","severity":1,"message":"4783","line":82,"column":29,"nodeType":"4777","endLine":82,"endColumn":101},{"ruleId":"4782","severity":1,"message":"4783","line":84,"column":29,"nodeType":"4777","endLine":84,"endColumn":101},{"ruleId":"4782","severity":1,"message":"4783","line":85,"column":29,"nodeType":"4777","endLine":85,"endColumn":101},{"ruleId":"4770","severity":1,"message":"4774","line":176,"column":52,"nodeType":"4772","messageId":"4773","endLine":176,"endColumn":54},{"ruleId":"4770","severity":1,"message":"4774","line":269,"column":57,"nodeType":"4772","messageId":"4773","endLine":269,"endColumn":59},{"ruleId":"4770","severity":1,"message":"4774","line":269,"column":83,"nodeType":"4772","messageId":"4773","endLine":269,"endColumn":85},{"ruleId":"4782","severity":1,"message":"4783","line":275,"column":13,"nodeType":"4777","endLine":275,"endColumn":143},{"ruleId":"4775","severity":1,"message":"4776","line":288,"column":15,"nodeType":"4777","endLine":288,"endColumn":148},{"ruleId":"4782","severity":1,"message":"4783","line":288,"column":15,"nodeType":"4777","endLine":288,"endColumn":148},{"ruleId":"4775","severity":1,"message":"4776","line":290,"column":13,"nodeType":"4777","endLine":290,"endColumn":168},{"ruleId":"4782","severity":1,"message":"4783","line":290,"column":13,"nodeType":"4777","endLine":290,"endColumn":168},{"ruleId":"4775","severity":1,"message":"4776","line":107,"column":11,"nodeType":"4777","endLine":107,"endColumn":204},{"ruleId":"4782","severity":1,"message":"4783","line":107,"column":11,"nodeType":"4777","endLine":107,"endColumn":204},{"ruleId":"4770","severity":1,"message":"4771","line":147,"column":24,"nodeType":"4772","messageId":"4773","endLine":147,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4774","line":47,"column":44,"nodeType":"4772","messageId":"4773","endLine":47,"endColumn":46},{"ruleId":"4770","severity":1,"message":"4774","line":54,"column":44,"nodeType":"4772","messageId":"4773","endLine":54,"endColumn":46},{"ruleId":"4770","severity":1,"message":"4774","line":74,"column":33,"nodeType":"4772","messageId":"4773","endLine":74,"endColumn":35},{"ruleId":"4770","severity":1,"message":"4774","line":75,"column":33,"nodeType":"4772","messageId":"4773","endLine":75,"endColumn":35},{"ruleId":"4770","severity":1,"message":"4774","line":76,"column":34,"nodeType":"4772","messageId":"4773","endLine":76,"endColumn":36},{"ruleId":"4782","severity":1,"message":"4783","line":87,"column":33,"nodeType":"4777","endLine":87,"endColumn":105},{"ruleId":"4782","severity":1,"message":"4783","line":91,"column":45,"nodeType":"4777","endLine":91,"endColumn":117},{"ruleId":"4770","severity":1,"message":"4774","line":255,"column":26,"nodeType":"4772","messageId":"4773","endLine":255,"endColumn":28},{"ruleId":"4775","severity":1,"message":"4776","line":296,"column":32,"nodeType":"4777","endLine":296,"endColumn":211},{"ruleId":"4782","severity":1,"message":"4783","line":296,"column":32,"nodeType":"4777","endLine":296,"endColumn":211},{"ruleId":"4775","severity":1,"message":"4776","line":297,"column":11,"nodeType":"4777","endLine":297,"endColumn":198},{"ruleId":"4782","severity":1,"message":"4783","line":297,"column":11,"nodeType":"4777","endLine":297,"endColumn":198},{"ruleId":"4770","severity":1,"message":"4774","line":462,"column":34,"nodeType":"4772","messageId":"4773","endLine":462,"endColumn":36},{"ruleId":"4770","severity":1,"message":"4774","line":495,"column":34,"nodeType":"4772","messageId":"4773","endLine":495,"endColumn":36},{"ruleId":"4775","severity":1,"message":"4776","line":152,"column":32,"nodeType":"4777","endLine":152,"endColumn":211},{"ruleId":"4782","severity":1,"message":"4783","line":152,"column":32,"nodeType":"4777","endLine":152,"endColumn":211},{"ruleId":"4775","severity":1,"message":"4776","line":153,"column":11,"nodeType":"4777","endLine":153,"endColumn":198},{"ruleId":"4782","severity":1,"message":"4783","line":153,"column":11,"nodeType":"4777","endLine":153,"endColumn":198},{"ruleId":"4770","severity":1,"message":"4774","line":20,"column":44,"nodeType":"4772","messageId":"4773","endLine":20,"endColumn":46},{"ruleId":"4770","severity":1,"message":"4774","line":40,"column":33,"nodeType":"4772","messageId":"4773","endLine":40,"endColumn":35},{"ruleId":"4770","severity":1,"message":"4774","line":41,"column":34,"nodeType":"4772","messageId":"4773","endLine":41,"endColumn":36},{"ruleId":"4782","severity":1,"message":"4783","line":50,"column":33,"nodeType":"4777","endLine":50,"endColumn":105},{"ruleId":"4770","severity":1,"message":"4774","line":132,"column":25,"nodeType":"4772","messageId":"4773","endLine":132,"endColumn":27},{"ruleId":"4770","severity":1,"message":"4774","line":164,"column":25,"nodeType":"4772","messageId":"4773","endLine":164,"endColumn":27},{"ruleId":"4770","severity":1,"message":"4774","line":199,"column":26,"nodeType":"4772","messageId":"4773","endLine":199,"endColumn":28},{"ruleId":"4770","severity":1,"message":"4774","line":199,"column":53,"nodeType":"4772","messageId":"4773","endLine":199,"endColumn":55},{"ruleId":"4770","severity":1,"message":"4774","line":217,"column":28,"nodeType":"4772","messageId":"4773","endLine":217,"endColumn":30},{"ruleId":"4782","severity":1,"message":"4783","line":225,"column":17,"nodeType":"4777","endLine":230,"endColumn":51},{"ruleId":"4775","severity":1,"message":"4776","line":248,"column":13,"nodeType":"4777","endLine":248,"endColumn":194},{"ruleId":"4782","severity":1,"message":"4783","line":248,"column":13,"nodeType":"4777","endLine":248,"endColumn":194},{"ruleId":"4770","severity":1,"message":"4774","line":260,"column":90,"nodeType":"4772","messageId":"4773","endLine":260,"endColumn":92},{"ruleId":"4784","severity":1,"message":"4785","line":319,"column":5,"nodeType":"4786","messageId":"4787","endLine":332,"endColumn":6},{"ruleId":"4775","severity":1,"message":"4776","line":176,"column":11,"nodeType":"4777","endLine":178,"endColumn":90},{"ruleId":"4782","severity":1,"message":"4783","line":176,"column":11,"nodeType":"4777","endLine":178,"endColumn":90},{"ruleId":"4770","severity":1,"message":"4774","line":152,"column":51,"nodeType":"4772","messageId":"4773","endLine":152,"endColumn":53},{"ruleId":"4775","severity":1,"message":"4776","line":477,"column":29,"nodeType":"4777","endLine":480,"endColumn":66},{"ruleId":"4782","severity":1,"message":"4783","line":477,"column":29,"nodeType":"4777","endLine":480,"endColumn":66},{"ruleId":"4782","severity":1,"message":"4783","line":485,"column":35,"nodeType":"4777","endLine":485,"endColumn":114},{"ruleId":"4782","severity":1,"message":"4783","line":488,"column":37,"nodeType":"4777","endLine":488,"endColumn":119},{"ruleId":"4782","severity":1,"message":"4783","line":494,"column":35,"nodeType":"4777","endLine":494,"endColumn":117},{"ruleId":"4782","severity":1,"message":"4783","line":495,"column":35,"nodeType":"4777","endLine":495,"endColumn":117},{"ruleId":"4782","severity":1,"message":"4783","line":501,"column":37,"nodeType":"4777","endLine":501,"endColumn":117},{"ruleId":"4782","severity":1,"message":"4783","line":507,"column":35,"nodeType":"4777","endLine":507,"endColumn":113},{"ruleId":"4782","severity":1,"message":"4783","line":514,"column":21,"nodeType":"4777","endLine":517,"endColumn":78},{"ruleId":"4775","severity":1,"message":"4776","line":523,"column":25,"nodeType":"4777","endLine":524,"endColumn":68},{"ruleId":"4782","severity":1,"message":"4783","line":523,"column":25,"nodeType":"4777","endLine":524,"endColumn":68},{"ruleId":"4782","severity":1,"message":"4783","line":531,"column":33,"nodeType":"4777","endLine":531,"endColumn":90},{"ruleId":"4770","severity":1,"message":"4771","line":48,"column":24,"nodeType":"4772","messageId":"4773","endLine":48,"endColumn":26},{"ruleId":"4778","severity":1,"message":"4779","line":137,"column":3,"nodeType":"4780","messageId":"4781","endLine":139,"endColumn":4},{"ruleId":"4782","severity":1,"message":"4783","line":249,"column":26,"nodeType":"4777","endLine":249,"endColumn":64},{"ruleId":"4775","severity":1,"message":"4776","line":253,"column":33,"nodeType":"4777","endLine":253,"endColumn":181},{"ruleId":"4782","severity":1,"message":"4783","line":253,"column":33,"nodeType":"4777","endLine":253,"endColumn":181},{"ruleId":"4775","severity":1,"message":"4776","line":255,"column":37,"nodeType":"4777","endLine":255,"endColumn":180},{"ruleId":"4782","severity":1,"message":"4783","line":255,"column":37,"nodeType":"4777","endLine":255,"endColumn":180},{"ruleId":"4782","severity":1,"message":"4813","line":309,"column":13,"nodeType":"4777","endLine":309,"endColumn":86},{"ruleId":"4782","severity":1,"message":"4783","line":321,"column":9,"nodeType":"4777","endLine":321,"endColumn":63},{"ruleId":"4770","severity":1,"message":"4774","line":208,"column":94,"nodeType":"4772","messageId":"4773","endLine":208,"endColumn":96},{"ruleId":"4770","severity":1,"message":"4774","line":165,"column":35,"nodeType":"4772","messageId":"4773","endLine":165,"endColumn":37},{"ruleId":"4770","severity":1,"message":"4774","line":173,"column":42,"nodeType":"4772","messageId":"4773","endLine":173,"endColumn":44},{"ruleId":"4770","severity":1,"message":"4774","line":508,"column":38,"nodeType":"4772","messageId":"4773","endLine":508,"endColumn":40},{"ruleId":"4770","severity":1,"message":"4774","line":512,"column":23,"nodeType":"4772","messageId":"4773","endLine":512,"endColumn":25},{"ruleId":"4770","severity":1,"message":"4774","line":534,"column":22,"nodeType":"4772","messageId":"4773","endLine":534,"endColumn":24},{"ruleId":"4782","severity":1,"message":"4783","line":844,"column":11,"nodeType":"4777","endLine":844,"endColumn":137},{"ruleId":"4770","severity":1,"message":"4774","line":1046,"column":35,"nodeType":"4772","messageId":"4773","endLine":1046,"endColumn":37},{"ruleId":"4782","severity":1,"message":"4783","line":1081,"column":11,"nodeType":"4777","endLine":1081,"endColumn":132},{"ruleId":"4782","severity":1,"message":"4783","line":1109,"column":13,"nodeType":"4777","endLine":1109,"endColumn":134},{"ruleId":"4829","severity":1,"message":"4830","line":936,"column":54,"nodeType":"4816","messageId":"4831","endLine":936,"endColumn":58,"suppressions":"4833"},{"ruleId":"4782","severity":1,"message":"4783","line":94,"column":15,"nodeType":"4777","endLine":99,"endColumn":51},{"ruleId":"4782","severity":1,"message":"4783","line":101,"column":15,"nodeType":"4777","endLine":106,"endColumn":43},{"ruleId":"4778","severity":1,"message":"4779","line":171,"column":3,"nodeType":"4780","messageId":"4781","endLine":173,"endColumn":4},{"ruleId":"4770","severity":1,"message":"4774","line":15,"column":13,"nodeType":"4772","messageId":"4773","endLine":15,"endColumn":15},{"ruleId":"4770","severity":1,"message":"4774","line":35,"column":38,"nodeType":"4772","messageId":"4773","endLine":35,"endColumn":40},{"ruleId":"4770","severity":1,"message":"4774","line":38,"column":34,"nodeType":"4772","messageId":"4773","endLine":38,"endColumn":36},{"ruleId":"4770","severity":1,"message":"4774","line":82,"column":27,"nodeType":"4772","messageId":"4773","endLine":82,"endColumn":29},{"ruleId":"4770","severity":1,"message":"4774","line":10,"column":72,"nodeType":"4772","messageId":"4773","endLine":10,"endColumn":74},{"ruleId":"4770","severity":1,"message":"4774","line":32,"column":35,"nodeType":"4772","messageId":"4773","endLine":32,"endColumn":37},{"ruleId":"4770","severity":1,"message":"4774","line":41,"column":37,"nodeType":"4772","messageId":"4773","endLine":41,"endColumn":39},{"ruleId":"4770","severity":1,"message":"4774","line":84,"column":15,"nodeType":"4772","messageId":"4773","endLine":84,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4774","line":84,"column":35,"nodeType":"4772","messageId":"4773","endLine":84,"endColumn":37},{"ruleId":"4770","severity":1,"message":"4774","line":83,"column":15,"nodeType":"4772","messageId":"4773","endLine":83,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4774","line":83,"column":35,"nodeType":"4772","messageId":"4773","endLine":83,"endColumn":37},{"ruleId":"4778","severity":1,"message":"4779","line":11,"column":3,"nodeType":"4780","messageId":"4781","endLine":13,"endColumn":4},{"ruleId":"4770","severity":1,"message":"4774","line":23,"column":25,"nodeType":"4772","messageId":"4773","endLine":23,"endColumn":27},{"ruleId":"4770","severity":1,"message":"4774","line":39,"column":41,"nodeType":"4772","messageId":"4773","endLine":39,"endColumn":43},{"ruleId":"4770","severity":1,"message":"4774","line":65,"column":15,"nodeType":"4772","messageId":"4773","endLine":65,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4774","line":65,"column":35,"nodeType":"4772","messageId":"4773","endLine":65,"endColumn":37},{"ruleId":"4770","severity":1,"message":"4774","line":75,"column":182,"nodeType":"4772","messageId":"4773","endLine":75,"endColumn":184},{"ruleId":"4770","severity":1,"message":"4774","line":89,"column":181,"nodeType":"4772","messageId":"4773","endLine":89,"endColumn":183},{"ruleId":"4770","severity":1,"message":"4774","line":39,"column":41,"nodeType":"4772","messageId":"4773","endLine":39,"endColumn":43},{"ruleId":"4778","severity":1,"message":"4779","line":23,"column":3,"nodeType":"4780","messageId":"4781","endLine":25,"endColumn":4},{"ruleId":"4770","severity":1,"message":"4774","line":16,"column":13,"nodeType":"4772","messageId":"4773","endLine":16,"endColumn":15},{"ruleId":"4770","severity":1,"message":"4774","line":16,"column":46,"nodeType":"4772","messageId":"4773","endLine":16,"endColumn":48},{"ruleId":"4770","severity":1,"message":"4774","line":56,"column":33,"nodeType":"4772","messageId":"4773","endLine":56,"endColumn":35},{"ruleId":"4782","severity":1,"message":"4783","line":97,"column":9,"nodeType":"4777","endLine":97,"endColumn":152},{"ruleId":"4799","severity":1,"message":"4800","line":98,"column":50,"nodeType":"4772","messageId":"4801","endLine":98,"endColumn":51,"suppressions":"4834"},{"ruleId":"4793","severity":1,"message":"4835","line":98,"column":60,"nodeType":"4795","messageId":"4796","endLine":98,"endColumn":61,"suggestions":"4836","suppressions":"4837"},{"ruleId":"4793","severity":1,"message":"4835","line":145,"column":32,"nodeType":"4795","messageId":"4796","endLine":145,"endColumn":33,"suggestions":"4838","suppressions":"4839"},{"ruleId":"4793","severity":1,"message":"4835","line":145,"column":69,"nodeType":"4795","messageId":"4796","endLine":145,"endColumn":70,"suggestions":"4840","suppressions":"4841"},{"ruleId":"4782","severity":1,"message":"4783","line":363,"column":39,"nodeType":"4777","endLine":363,"endColumn":81,"suppressions":"4842"},{"ruleId":"4782","severity":1,"message":"4783","line":365,"column":36,"nodeType":"4777","endLine":365,"endColumn":74,"suppressions":"4843"},{"ruleId":"4778","severity":1,"message":"4779","line":37,"column":3,"nodeType":"4780","messageId":"4781","endLine":39,"endColumn":4},{"ruleId":"4770","severity":1,"message":"4774","line":126,"column":49,"nodeType":"4772","messageId":"4773","endLine":126,"endColumn":51},{"ruleId":"4770","severity":1,"message":"4774","line":43,"column":13,"nodeType":"4772","messageId":"4773","endLine":43,"endColumn":15},{"ruleId":"4770","severity":1,"message":"4774","line":60,"column":16,"nodeType":"4772","messageId":"4773","endLine":60,"endColumn":18},{"ruleId":"4770","severity":1,"message":"4774","line":64,"column":52,"nodeType":"4772","messageId":"4773","endLine":64,"endColumn":54},{"ruleId":"4782","severity":1,"message":"4783","line":75,"column":17,"nodeType":"4777","endLine":75,"endColumn":102},{"ruleId":"4770","severity":1,"message":"4771","line":99,"column":17,"nodeType":"4772","messageId":"4773","endLine":99,"endColumn":19},{"ruleId":"4782","severity":1,"message":"4783","line":99,"column":24,"nodeType":"4777","endLine":99,"endColumn":81},{"ruleId":"4770","severity":1,"message":"4771","line":100,"column":18,"nodeType":"4772","messageId":"4773","endLine":100,"endColumn":20},{"ruleId":"4782","severity":1,"message":"4783","line":101,"column":24,"nodeType":"4777","endLine":101,"endColumn":80},{"ruleId":"4770","severity":1,"message":"4774","line":33,"column":15,"nodeType":"4772","messageId":"4773","endLine":33,"endColumn":17},{"ruleId":"4778","severity":1,"message":"4779","line":15,"column":3,"nodeType":"4780","messageId":"4781","endLine":17,"endColumn":4},{"ruleId":"4770","severity":1,"message":"4774","line":28,"column":96,"nodeType":"4772","messageId":"4773","endLine":28,"endColumn":98},{"ruleId":"4770","severity":1,"message":"4774","line":20,"column":66,"nodeType":"4772","messageId":"4773","endLine":20,"endColumn":68},{"ruleId":"4770","severity":1,"message":"4774","line":23,"column":77,"nodeType":"4772","messageId":"4773","endLine":23,"endColumn":79},{"ruleId":"4770","severity":1,"message":"4774","line":26,"column":84,"nodeType":"4772","messageId":"4773","endLine":26,"endColumn":86},{"ruleId":"4770","severity":1,"message":"4774","line":20,"column":66,"nodeType":"4772","messageId":"4773","endLine":20,"endColumn":68},{"ruleId":"4770","severity":1,"message":"4774","line":23,"column":77,"nodeType":"4772","messageId":"4773","endLine":23,"endColumn":79},{"ruleId":"4770","severity":1,"message":"4774","line":26,"column":79,"nodeType":"4772","messageId":"4773","endLine":26,"endColumn":81},{"ruleId":"4770","severity":1,"message":"4771","line":69,"column":27,"nodeType":"4772","messageId":"4773","endLine":69,"endColumn":29},{"ruleId":"4770","severity":1,"message":"4774","line":28,"column":54,"nodeType":"4772","messageId":"4773","endLine":28,"endColumn":56},{"ruleId":"4770","severity":1,"message":"4774","line":30,"column":39,"nodeType":"4772","messageId":"4773","endLine":30,"endColumn":41},{"ruleId":"4778","severity":1,"message":"4779","line":18,"column":3,"nodeType":"4780","messageId":"4781","endLine":20,"endColumn":4},{"ruleId":"4770","severity":1,"message":"4771","line":37,"column":26,"nodeType":"4772","messageId":"4773","endLine":37,"endColumn":28},{"ruleId":"4770","severity":1,"message":"4771","line":50,"column":15,"nodeType":"4772","messageId":"4773","endLine":50,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4774","line":31,"column":96,"nodeType":"4772","messageId":"4773","endLine":31,"endColumn":98},{"ruleId":"4770","severity":1,"message":"4774","line":81,"column":41,"nodeType":"4772","messageId":"4773","endLine":81,"endColumn":43},{"ruleId":"4784","severity":1,"message":"4785","line":127,"column":5,"nodeType":"4786","messageId":"4787","endLine":132,"endColumn":6},{"ruleId":"4770","severity":1,"message":"4774","line":151,"column":26,"nodeType":"4772","messageId":"4773","endLine":151,"endColumn":28},{"ruleId":"4770","severity":1,"message":"4774","line":196,"column":31,"nodeType":"4772","messageId":"4773","endLine":196,"endColumn":33},{"ruleId":"4778","severity":1,"message":"4779","line":11,"column":3,"nodeType":"4780","messageId":"4781","endLine":13,"endColumn":4},{"ruleId":"4784","severity":1,"message":"4785","line":40,"column":5,"nodeType":"4786","messageId":"4787","endLine":50,"endColumn":6},{"ruleId":"4770","severity":1,"message":"4774","line":29,"column":108,"nodeType":"4772","messageId":"4773","endLine":29,"endColumn":110},{"ruleId":"4778","severity":1,"message":"4779","line":18,"column":3,"nodeType":"4780","messageId":"4781","endLine":20,"endColumn":4},{"ruleId":"4770","severity":1,"message":"4774","line":77,"column":31,"nodeType":"4772","messageId":"4773","endLine":77,"endColumn":33},{"ruleId":"4770","severity":1,"message":"4774","line":100,"column":39,"nodeType":"4772","messageId":"4773","endLine":100,"endColumn":41},{"ruleId":"4778","severity":1,"message":"4779","line":15,"column":3,"nodeType":"4780","messageId":"4781","endLine":17,"endColumn":4},{"ruleId":"4775","severity":1,"message":"4776","line":148,"column":13,"nodeType":"4777","endLine":148,"endColumn":157},{"ruleId":"4782","severity":1,"message":"4783","line":148,"column":13,"nodeType":"4777","endLine":148,"endColumn":157},{"ruleId":"4778","severity":1,"message":"4779","line":11,"column":3,"nodeType":"4780","messageId":"4781","endLine":13,"endColumn":4},{"ruleId":"4770","severity":1,"message":"4774","line":28,"column":96,"nodeType":"4772","messageId":"4773","endLine":28,"endColumn":98},{"ruleId":"4784","severity":1,"message":"4785","line":40,"column":5,"nodeType":"4786","messageId":"4787","endLine":50,"endColumn":6},{"ruleId":"4770","severity":1,"message":"4774","line":31,"column":96,"nodeType":"4772","messageId":"4773","endLine":31,"endColumn":98},{"ruleId":"4778","severity":1,"message":"4779","line":11,"column":3,"nodeType":"4780","messageId":"4781","endLine":13,"endColumn":4},{"ruleId":"4770","severity":1,"message":"4774","line":31,"column":96,"nodeType":"4772","messageId":"4773","endLine":31,"endColumn":98},{"ruleId":"4770","severity":1,"message":"4771","line":35,"column":26,"nodeType":"4772","messageId":"4773","endLine":35,"endColumn":28},{"ruleId":"4770","severity":1,"message":"4771","line":47,"column":15,"nodeType":"4772","messageId":"4773","endLine":47,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4774","line":62,"column":68,"nodeType":"4772","messageId":"4773","endLine":62,"endColumn":70},{"ruleId":"4770","severity":1,"message":"4774","line":63,"column":68,"nodeType":"4772","messageId":"4773","endLine":63,"endColumn":70},{"ruleId":"4778","severity":1,"message":"4779","line":15,"column":3,"nodeType":"4780","messageId":"4781","endLine":17,"endColumn":4},{"ruleId":"4775","severity":1,"message":"4776","line":151,"column":13,"nodeType":"4777","endLine":151,"endColumn":157},{"ruleId":"4782","severity":1,"message":"4783","line":151,"column":13,"nodeType":"4777","endLine":151,"endColumn":157},{"ruleId":"4770","severity":1,"message":"4774","line":77,"column":31,"nodeType":"4772","messageId":"4773","endLine":77,"endColumn":33},{"ruleId":"4770","severity":1,"message":"4774","line":100,"column":39,"nodeType":"4772","messageId":"4773","endLine":100,"endColumn":41},{"ruleId":"4770","severity":1,"message":"4771","line":118,"column":38,"nodeType":"4772","messageId":"4773","endLine":118,"endColumn":40},{"ruleId":"4770","severity":1,"message":"4774","line":38,"column":96,"nodeType":"4772","messageId":"4773","endLine":38,"endColumn":98},{"ruleId":"4770","severity":1,"message":"4774","line":77,"column":31,"nodeType":"4772","messageId":"4773","endLine":77,"endColumn":33},{"ruleId":"4770","severity":1,"message":"4774","line":97,"column":39,"nodeType":"4772","messageId":"4773","endLine":97,"endColumn":41},{"ruleId":"4770","severity":1,"message":"4774","line":36,"column":131,"nodeType":"4772","messageId":"4773","endLine":36,"endColumn":133},{"ruleId":"4770","severity":1,"message":"4774","line":25,"column":15,"nodeType":"4772","messageId":"4773","endLine":25,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4774","line":75,"column":18,"nodeType":"4772","messageId":"4773","endLine":75,"endColumn":20},{"ruleId":"4770","severity":1,"message":"4774","line":79,"column":54,"nodeType":"4772","messageId":"4773","endLine":79,"endColumn":56},{"ruleId":"4770","severity":1,"message":"4771","line":83,"column":16,"nodeType":"4772","messageId":"4773","endLine":83,"endColumn":18},{"ruleId":"4782","severity":1,"message":"4783","line":84,"column":11,"nodeType":"4777","endLine":84,"endColumn":96},{"ruleId":"4770","severity":1,"message":"4774","line":259,"column":39,"nodeType":"4772","messageId":"4773","endLine":259,"endColumn":41},{"ruleId":"4784","severity":1,"message":"4785","line":305,"column":5,"nodeType":"4786","messageId":"4787","endLine":310,"endColumn":6},{"ruleId":"4770","severity":1,"message":"4774","line":348,"column":38,"nodeType":"4772","messageId":"4773","endLine":348,"endColumn":40},{"ruleId":"4784","severity":1,"message":"4785","line":359,"column":5,"nodeType":"4786","messageId":"4787","endLine":369,"endColumn":6},{"ruleId":"4770","severity":1,"message":"4774","line":414,"column":26,"nodeType":"4772","messageId":"4773","endLine":414,"endColumn":28},{"ruleId":"4770","severity":1,"message":"4774","line":427,"column":28,"nodeType":"4772","messageId":"4773","endLine":427,"endColumn":30},{"ruleId":"4770","severity":1,"message":"4774","line":437,"column":28,"nodeType":"4772","messageId":"4773","endLine":437,"endColumn":30},{"ruleId":"4770","severity":1,"message":"4774","line":454,"column":28,"nodeType":"4772","messageId":"4773","endLine":454,"endColumn":30},{"ruleId":"4770","severity":1,"message":"4771","line":538,"column":26,"nodeType":"4772","messageId":"4773","endLine":538,"endColumn":28},{"ruleId":"4778","severity":1,"message":"4779","line":15,"column":3,"nodeType":"4780","messageId":"4781","endLine":17,"endColumn":4},{"ruleId":"4770","severity":1,"message":"4771","line":36,"column":55,"nodeType":"4772","messageId":"4773","endLine":36,"endColumn":57},{"ruleId":"4770","severity":1,"message":"4771","line":29,"column":39,"nodeType":"4772","messageId":"4773","endLine":29,"endColumn":41},{"ruleId":"4770","severity":1,"message":"4774","line":34,"column":15,"nodeType":"4772","messageId":"4773","endLine":34,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4774","line":31,"column":15,"nodeType":"4772","messageId":"4773","endLine":31,"endColumn":17},{"ruleId":"4784","severity":1,"message":"4785","line":182,"column":5,"nodeType":"4786","messageId":"4787","endLine":189,"endColumn":6},{"ruleId":"4770","severity":1,"message":"4774","line":201,"column":43,"nodeType":"4772","messageId":"4773","endLine":201,"endColumn":45},{"ruleId":"4770","severity":1,"message":"4774","line":210,"column":25,"nodeType":"4772","messageId":"4773","endLine":210,"endColumn":27},{"ruleId":"4770","severity":1,"message":"4771","line":219,"column":43,"nodeType":"4772","messageId":"4773","endLine":219,"endColumn":45},{"ruleId":"4770","severity":1,"message":"4771","line":101,"column":18,"nodeType":"4772","messageId":"4773","endLine":101,"endColumn":20},{"ruleId":"4770","severity":1,"message":"4774","line":29,"column":96,"nodeType":"4772","messageId":"4773","endLine":29,"endColumn":98},{"ruleId":"4775","severity":1,"message":"4776","line":61,"column":15,"nodeType":"4777","endLine":61,"endColumn":117},{"ruleId":"4782","severity":1,"message":"4783","line":61,"column":15,"nodeType":"4777","endLine":61,"endColumn":117},{"ruleId":"4775","severity":1,"message":"4776","line":64,"column":13,"nodeType":"4777","endLine":64,"endColumn":121},{"ruleId":"4782","severity":1,"message":"4783","line":64,"column":13,"nodeType":"4777","endLine":64,"endColumn":121},{"ruleId":"4770","severity":1,"message":"4771","line":79,"column":27,"nodeType":"4772","messageId":"4773","endLine":79,"endColumn":29},{"ruleId":"4782","severity":1,"message":"4783","line":81,"column":23,"nodeType":"4777","endLine":81,"endColumn":107},{"ruleId":"4770","severity":1,"message":"4774","line":81,"column":134,"nodeType":"4772","messageId":"4773","endLine":81,"endColumn":136},{"ruleId":"4782","severity":1,"message":"4783","line":82,"column":23,"nodeType":"4777","endLine":82,"endColumn":102},{"ruleId":"4770","severity":1,"message":"4774","line":82,"column":128,"nodeType":"4772","messageId":"4773","endLine":82,"endColumn":130},{"ruleId":"4770","severity":1,"message":"4771","line":284,"column":34,"nodeType":"4772","messageId":"4773","endLine":284,"endColumn":36},{"ruleId":"4770","severity":1,"message":"4771","line":308,"column":34,"nodeType":"4772","messageId":"4773","endLine":308,"endColumn":36},{"ruleId":"4770","severity":1,"message":"4771","line":30,"column":39,"nodeType":"4772","messageId":"4773","endLine":30,"endColumn":41},{"ruleId":"4770","severity":1,"message":"4774","line":35,"column":15,"nodeType":"4772","messageId":"4773","endLine":35,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4774","line":50,"column":72,"nodeType":"4772","messageId":"4773","endLine":50,"endColumn":74},{"ruleId":"4782","severity":1,"message":"4813","line":41,"column":13,"nodeType":"4777","endLine":41,"endColumn":86},{"ruleId":"4782","severity":1,"message":"4813","line":62,"column":11,"nodeType":"4777","endLine":62,"endColumn":77},{"ruleId":"4770","severity":1,"message":"4774","line":33,"column":97,"nodeType":"4772","messageId":"4773","endLine":33,"endColumn":99},{"ruleId":"4770","severity":1,"message":"4774","line":60,"column":36,"nodeType":"4772","messageId":"4773","endLine":60,"endColumn":38},{"ruleId":"4778","severity":1,"message":"4779","line":11,"column":3,"nodeType":"4780","messageId":"4781","endLine":13,"endColumn":4},{"ruleId":"4778","severity":1,"message":"4779","line":18,"column":3,"nodeType":"4780","messageId":"4781","endLine":20,"endColumn":4},{"ruleId":"4770","severity":1,"message":"4771","line":27,"column":21,"nodeType":"4772","messageId":"4773","endLine":27,"endColumn":23},{"ruleId":"4770","severity":1,"message":"4771","line":28,"column":20,"nodeType":"4772","messageId":"4773","endLine":28,"endColumn":22},{"ruleId":"4770","severity":1,"message":"4771","line":29,"column":23,"nodeType":"4772","messageId":"4773","endLine":29,"endColumn":25},{"ruleId":"4770","severity":1,"message":"4771","line":30,"column":28,"nodeType":"4772","messageId":"4773","endLine":30,"endColumn":30},{"ruleId":"4770","severity":1,"message":"4771","line":74,"column":18,"nodeType":"4772","messageId":"4773","endLine":74,"endColumn":20},{"ruleId":"4770","severity":1,"message":"4774","line":28,"column":96,"nodeType":"4772","messageId":"4773","endLine":28,"endColumn":98},{"ruleId":"4770","severity":1,"message":"4771","line":30,"column":39,"nodeType":"4772","messageId":"4773","endLine":30,"endColumn":41},{"ruleId":"4770","severity":1,"message":"4774","line":35,"column":15,"nodeType":"4772","messageId":"4773","endLine":35,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4774","line":181,"column":26,"nodeType":"4772","messageId":"4773","endLine":181,"endColumn":28},{"ruleId":"4775","severity":1,"message":"4776","line":205,"column":13,"nodeType":"4777","endLine":205,"endColumn":161},{"ruleId":"4782","severity":1,"message":"4783","line":205,"column":13,"nodeType":"4777","endLine":205,"endColumn":161},{"ruleId":"4770","severity":1,"message":"4774","line":104,"column":26,"nodeType":"4772","messageId":"4773","endLine":104,"endColumn":28},{"ruleId":"4770","severity":1,"message":"4774","line":105,"column":26,"nodeType":"4772","messageId":"4773","endLine":105,"endColumn":28},{"ruleId":"4770","severity":1,"message":"4774","line":106,"column":26,"nodeType":"4772","messageId":"4773","endLine":106,"endColumn":28},{"ruleId":"4770","severity":1,"message":"4774","line":176,"column":122,"nodeType":"4772","messageId":"4773","endLine":176,"endColumn":124},{"ruleId":"4770","severity":1,"message":"4774","line":37,"column":120,"nodeType":"4772","messageId":"4773","endLine":37,"endColumn":122},{"ruleId":"4770","severity":1,"message":"4771","line":30,"column":39,"nodeType":"4772","messageId":"4773","endLine":30,"endColumn":41},{"ruleId":"4770","severity":1,"message":"4774","line":35,"column":15,"nodeType":"4772","messageId":"4773","endLine":35,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4771","line":25,"column":39,"nodeType":"4772","messageId":"4773","endLine":25,"endColumn":41},{"ruleId":"4770","severity":1,"message":"4774","line":30,"column":96,"nodeType":"4772","messageId":"4773","endLine":30,"endColumn":98},{"ruleId":"4770","severity":1,"message":"4774","line":34,"column":127,"nodeType":"4772","messageId":"4773","endLine":34,"endColumn":129},{"ruleId":"4784","severity":1,"message":"4785","line":26,"column":5,"nodeType":"4786","messageId":"4787","endLine":39,"endColumn":6},{"ruleId":"4778","severity":1,"message":"4779","line":11,"column":3,"nodeType":"4780","messageId":"4781","endLine":13,"endColumn":4},{"ruleId":"4770","severity":1,"message":"4771","line":38,"column":26,"nodeType":"4772","messageId":"4773","endLine":38,"endColumn":28},{"ruleId":"4770","severity":1,"message":"4771","line":50,"column":15,"nodeType":"4772","messageId":"4773","endLine":50,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4774","line":64,"column":66,"nodeType":"4772","messageId":"4773","endLine":64,"endColumn":68},{"ruleId":"4770","severity":1,"message":"4774","line":28,"column":108,"nodeType":"4772","messageId":"4773","endLine":28,"endColumn":110},{"ruleId":"4770","severity":1,"message":"4774","line":28,"column":96,"nodeType":"4772","messageId":"4773","endLine":28,"endColumn":98},{"ruleId":"4770","severity":1,"message":"4771","line":25,"column":39,"nodeType":"4772","messageId":"4773","endLine":25,"endColumn":41},{"ruleId":"4775","severity":1,"message":"4776","line":177,"column":13,"nodeType":"4777","endLine":177,"endColumn":200},{"ruleId":"4782","severity":1,"message":"4783","line":177,"column":13,"nodeType":"4777","endLine":177,"endColumn":200},{"ruleId":"4775","severity":1,"message":"4776","line":180,"column":13,"nodeType":"4777","endLine":180,"endColumn":183},{"ruleId":"4770","severity":1,"message":"4774","line":94,"column":48,"nodeType":"4772","messageId":"4773","endLine":94,"endColumn":50},{"ruleId":"4770","severity":1,"message":"4774","line":222,"column":19,"nodeType":"4772","messageId":"4773","endLine":222,"endColumn":21},{"ruleId":"4770","severity":1,"message":"4774","line":222,"column":43,"nodeType":"4772","messageId":"4773","endLine":222,"endColumn":45},{"ruleId":"4770","severity":1,"message":"4771","line":227,"column":21,"nodeType":"4772","messageId":"4773","endLine":227,"endColumn":23},{"ruleId":"4770","severity":1,"message":"4774","line":60,"column":83,"nodeType":"4772","messageId":"4773","endLine":60,"endColumn":85},{"ruleId":"4770","severity":1,"message":"4774","line":60,"column":103,"nodeType":"4772","messageId":"4773","endLine":60,"endColumn":105},{"ruleId":"4770","severity":1,"message":"4774","line":65,"column":40,"nodeType":"4772","messageId":"4773","endLine":65,"endColumn":42},{"ruleId":"4770","severity":1,"message":"4774","line":72,"column":25,"nodeType":"4772","messageId":"4773","endLine":72,"endColumn":27},{"ruleId":"4770","severity":1,"message":"4774","line":72,"column":47,"nodeType":"4772","messageId":"4773","endLine":72,"endColumn":49},{"ruleId":"4770","severity":1,"message":"4774","line":98,"column":83,"nodeType":"4772","messageId":"4773","endLine":98,"endColumn":85},{"ruleId":"4770","severity":1,"message":"4774","line":98,"column":103,"nodeType":"4772","messageId":"4773","endLine":98,"endColumn":105},{"ruleId":"4770","severity":1,"message":"4774","line":103,"column":40,"nodeType":"4772","messageId":"4773","endLine":103,"endColumn":42},{"ruleId":"4770","severity":1,"message":"4774","line":256,"column":15,"nodeType":"4772","messageId":"4773","endLine":256,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4774","line":256,"column":35,"nodeType":"4772","messageId":"4773","endLine":256,"endColumn":37},{"ruleId":"4770","severity":1,"message":"4774","line":182,"column":19,"nodeType":"4772","messageId":"4773","endLine":182,"endColumn":21},{"ruleId":"4770","severity":1,"message":"4774","line":182,"column":43,"nodeType":"4772","messageId":"4773","endLine":182,"endColumn":45},{"ruleId":"4770","severity":1,"message":"4771","line":187,"column":21,"nodeType":"4772","messageId":"4773","endLine":187,"endColumn":23},{"ruleId":"4770","severity":1,"message":"4774","line":11,"column":20,"nodeType":"4772","messageId":"4773","endLine":11,"endColumn":22},{"ruleId":"4782","severity":1,"message":"4783","line":40,"column":11,"nodeType":"4777","endLine":40,"endColumn":75},{"ruleId":"4782","severity":1,"message":"4813","line":209,"column":15,"nodeType":"4777","endLine":209,"endColumn":112},{"ruleId":"4782","severity":1,"message":"4813","line":272,"column":15,"nodeType":"4777","endLine":272,"endColumn":103},{"ruleId":"4770","severity":1,"message":"4774","line":240,"column":16,"nodeType":"4772","messageId":"4773","endLine":240,"endColumn":18},{"ruleId":"4770","severity":1,"message":"4774","line":38,"column":15,"nodeType":"4772","messageId":"4773","endLine":38,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4774","line":38,"column":35,"nodeType":"4772","messageId":"4773","endLine":38,"endColumn":37},{"ruleId":"4770","severity":1,"message":"4774","line":44,"column":15,"nodeType":"4772","messageId":"4773","endLine":44,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4774","line":44,"column":35,"nodeType":"4772","messageId":"4773","endLine":44,"endColumn":37},{"ruleId":"4782","severity":1,"message":"4813","line":66,"column":13,"nodeType":"4777","endLine":69,"endColumn":48},{"ruleId":"4770","severity":1,"message":"4774","line":104,"column":40,"nodeType":"4772","messageId":"4773","endLine":104,"endColumn":42},{"ruleId":"4770","severity":1,"message":"4771","line":72,"column":122,"nodeType":"4772","messageId":"4773","endLine":72,"endColumn":124},{"ruleId":"4770","severity":1,"message":"4771","line":72,"column":163,"nodeType":"4772","messageId":"4773","endLine":72,"endColumn":165},{"ruleId":"4770","severity":1,"message":"4771","line":23,"column":25,"nodeType":"4772","messageId":"4773","endLine":23,"endColumn":27},{"ruleId":"4770","severity":1,"message":"4774","line":53,"column":157,"nodeType":"4772","messageId":"4773","endLine":53,"endColumn":159},{"ruleId":"4770","severity":1,"message":"4774","line":47,"column":131,"nodeType":"4772","messageId":"4773","endLine":47,"endColumn":133},{"ruleId":"4770","severity":1,"message":"4774","line":40,"column":15,"nodeType":"4772","messageId":"4773","endLine":40,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4774","line":40,"column":35,"nodeType":"4772","messageId":"4773","endLine":40,"endColumn":37},{"ruleId":"4770","severity":1,"message":"4774","line":46,"column":15,"nodeType":"4772","messageId":"4773","endLine":46,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4774","line":46,"column":35,"nodeType":"4772","messageId":"4773","endLine":46,"endColumn":37},{"ruleId":"4770","severity":1,"message":"4774","line":40,"column":44,"nodeType":"4772","messageId":"4773","endLine":40,"endColumn":46},{"ruleId":"4770","severity":1,"message":"4774","line":47,"column":44,"nodeType":"4772","messageId":"4773","endLine":47,"endColumn":46},{"ruleId":"4770","severity":1,"message":"4774","line":54,"column":44,"nodeType":"4772","messageId":"4773","endLine":54,"endColumn":46},{"ruleId":"4782","severity":1,"message":"4783","line":90,"column":60,"nodeType":"4777","endLine":90,"endColumn":132},{"ruleId":"4782","severity":1,"message":"4783","line":92,"column":60,"nodeType":"4777","endLine":92,"endColumn":132},{"ruleId":"4782","severity":1,"message":"4783","line":94,"column":60,"nodeType":"4777","endLine":94,"endColumn":132},{"ruleId":"4778","severity":1,"message":"4779","line":11,"column":3,"nodeType":"4780","messageId":"4781","endLine":13,"endColumn":4},{"ruleId":"4775","severity":1,"message":"4776","line":56,"column":13,"nodeType":"4777","endLine":56,"endColumn":121},{"ruleId":"4782","severity":1,"message":"4783","line":56,"column":13,"nodeType":"4777","endLine":56,"endColumn":121},{"ruleId":"4778","severity":1,"message":"4779","line":76,"column":3,"nodeType":"4780","messageId":"4781","endLine":78,"endColumn":4},{"ruleId":"4778","severity":1,"message":"4779","line":11,"column":3,"nodeType":"4780","messageId":"4781","endLine":13,"endColumn":4},{"ruleId":"4770","severity":1,"message":"4771","line":35,"column":55,"nodeType":"4772","messageId":"4773","endLine":35,"endColumn":57},{"ruleId":"4770","severity":1,"message":"4774","line":38,"column":44,"nodeType":"4772","messageId":"4773","endLine":38,"endColumn":46},{"ruleId":"4770","severity":1,"message":"4774","line":45,"column":44,"nodeType":"4772","messageId":"4773","endLine":45,"endColumn":46},{"ruleId":"4770","severity":1,"message":"4774","line":52,"column":44,"nodeType":"4772","messageId":"4773","endLine":52,"endColumn":46},{"ruleId":"4770","severity":1,"message":"4774","line":58,"column":37,"nodeType":"4772","messageId":"4773","endLine":58,"endColumn":39},{"ruleId":"4770","severity":1,"message":"4774","line":59,"column":37,"nodeType":"4772","messageId":"4773","endLine":59,"endColumn":39},{"ruleId":"4770","severity":1,"message":"4774","line":60,"column":37,"nodeType":"4772","messageId":"4773","endLine":60,"endColumn":39},{"ruleId":"4770","severity":1,"message":"4774","line":61,"column":38,"nodeType":"4772","messageId":"4773","endLine":61,"endColumn":40},{"ruleId":"4782","severity":1,"message":"4783","line":122,"column":29,"nodeType":"4777","endLine":122,"endColumn":101},{"ruleId":"4782","severity":1,"message":"4783","line":124,"column":31,"nodeType":"4777","endLine":124,"endColumn":103},{"ruleId":"4782","severity":1,"message":"4783","line":125,"column":31,"nodeType":"4777","endLine":125,"endColumn":103},{"ruleId":"4782","severity":1,"message":"4813","line":42,"column":13,"nodeType":"4777","endLine":42,"endColumn":86},{"ruleId":"4782","severity":1,"message":"4813","line":60,"column":11,"nodeType":"4777","endLine":60,"endColumn":77},{"ruleId":"4778","severity":1,"message":"4779","line":17,"column":3,"nodeType":"4780","messageId":"4781","endLine":19,"endColumn":4},{"ruleId":"4770","severity":1,"message":"4774","line":120,"column":131,"nodeType":"4772","messageId":"4773","endLine":120,"endColumn":133},{"ruleId":"4770","severity":1,"message":"4774","line":39,"column":15,"nodeType":"4772","messageId":"4773","endLine":39,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4771","line":39,"column":34,"nodeType":"4772","messageId":"4773","endLine":39,"endColumn":36},{"ruleId":"4770","severity":1,"message":"4774","line":39,"column":63,"nodeType":"4772","messageId":"4773","endLine":39,"endColumn":65},{"ruleId":"4778","severity":1,"message":"4779","line":17,"column":3,"nodeType":"4780","messageId":"4781","endLine":19,"endColumn":4},{"ruleId":"4770","severity":1,"message":"4774","line":78,"column":28,"nodeType":"4772","messageId":"4773","endLine":78,"endColumn":30},{"ruleId":"4778","severity":1,"message":"4779","line":19,"column":3,"nodeType":"4780","messageId":"4781","endLine":21,"endColumn":4},{"ruleId":"4782","severity":1,"message":"4783","line":36,"column":11,"nodeType":"4777","endLine":41,"endColumn":39},{"ruleId":"4770","severity":1,"message":"4774","line":104,"column":25,"nodeType":"4772","messageId":"4773","endLine":104,"endColumn":27},{"ruleId":"4770","severity":1,"message":"4774","line":104,"column":45,"nodeType":"4772","messageId":"4773","endLine":104,"endColumn":47},{"ruleId":"4770","severity":1,"message":"4774","line":117,"column":21,"nodeType":"4772","messageId":"4773","endLine":117,"endColumn":23},{"ruleId":"4770","severity":1,"message":"4771","line":148,"column":37,"nodeType":"4772","messageId":"4773","endLine":148,"endColumn":39},{"ruleId":"4770","severity":1,"message":"4774","line":182,"column":21,"nodeType":"4772","messageId":"4773","endLine":182,"endColumn":23},{"ruleId":"4770","severity":1,"message":"4774","line":196,"column":25,"nodeType":"4772","messageId":"4773","endLine":196,"endColumn":27},{"ruleId":"4770","severity":1,"message":"4771","line":207,"column":39,"nodeType":"4772","messageId":"4773","endLine":207,"endColumn":41},{"ruleId":"4770","severity":1,"message":"4774","line":245,"column":23,"nodeType":"4772","messageId":"4773","endLine":245,"endColumn":25},{"ruleId":"4775","severity":1,"message":"4776","line":127,"column":17,"nodeType":"4777","endLine":133,"endColumn":19},{"ruleId":"4782","severity":1,"message":"4813","line":127,"column":17,"nodeType":"4777","endLine":133,"endColumn":19},{"ruleId":"4799","severity":1,"message":"4800","line":194,"column":63,"nodeType":"4772","messageId":"4801","endLine":194,"endColumn":64},{"ruleId":"4770","severity":1,"message":"4774","line":276,"column":20,"nodeType":"4772","messageId":"4773","endLine":276,"endColumn":22},{"ruleId":"4770","severity":1,"message":"4774","line":282,"column":43,"nodeType":"4772","messageId":"4773","endLine":282,"endColumn":45},{"ruleId":"4770","severity":1,"message":"4774","line":285,"column":43,"nodeType":"4772","messageId":"4773","endLine":285,"endColumn":45},{"ruleId":"4770","severity":1,"message":"4774","line":296,"column":43,"nodeType":"4772","messageId":"4773","endLine":296,"endColumn":45},{"ruleId":"4770","severity":1,"message":"4774","line":311,"column":43,"nodeType":"4772","messageId":"4773","endLine":311,"endColumn":45},{"ruleId":"4770","severity":1,"message":"4774","line":314,"column":43,"nodeType":"4772","messageId":"4773","endLine":314,"endColumn":45},{"ruleId":"4770","severity":1,"message":"4774","line":325,"column":43,"nodeType":"4772","messageId":"4773","endLine":325,"endColumn":45},{"ruleId":"4778","severity":1,"message":"4779","line":13,"column":3,"nodeType":"4780","messageId":"4781","endLine":15,"endColumn":4},{"ruleId":"4770","severity":1,"message":"4774","line":66,"column":91,"nodeType":"4772","messageId":"4773","endLine":66,"endColumn":93},{"ruleId":"4778","severity":1,"message":"4779","line":9,"column":3,"nodeType":"4780","messageId":"4781","endLine":11,"endColumn":4},{"ruleId":"4778","severity":1,"message":"4779","line":65,"column":3,"nodeType":"4780","messageId":"4781","endLine":67,"endColumn":4},{"ruleId":"4844","severity":1,"message":"4845","line":46,"column":32,"nodeType":"4846","messageId":"4847","endLine":46,"endColumn":34},{"ruleId":"4844","severity":1,"message":"4845","line":46,"column":56,"nodeType":"4846","messageId":"4847","endLine":46,"endColumn":58},{"ruleId":"4770","severity":1,"message":"4774","line":21,"column":129,"nodeType":"4772","messageId":"4773","endLine":21,"endColumn":131},{"ruleId":"4784","severity":1,"message":"4785","line":15,"column":5,"nodeType":"4786","messageId":"4787","endLine":25,"endColumn":6},{"ruleId":"4844","severity":1,"message":"4845","line":46,"column":32,"nodeType":"4846","messageId":"4847","endLine":46,"endColumn":34},{"ruleId":"4844","severity":1,"message":"4845","line":46,"column":56,"nodeType":"4846","messageId":"4847","endLine":46,"endColumn":58},{"ruleId":"4778","severity":1,"message":"4779","line":15,"column":3,"nodeType":"4780","messageId":"4781","endLine":17,"endColumn":4},{"ruleId":"4770","severity":1,"message":"4774","line":21,"column":32,"nodeType":"4772","messageId":"4773","endLine":21,"endColumn":34},{"ruleId":"4770","severity":1,"message":"4774","line":27,"column":35,"nodeType":"4772","messageId":"4773","endLine":27,"endColumn":37},{"ruleId":"4778","severity":1,"message":"4779","line":14,"column":3,"nodeType":"4780","messageId":"4781","endLine":16,"endColumn":4},{"ruleId":"4788","severity":1,"message":"4848","line":30,"column":6,"nodeType":"4790","endLine":30,"endColumn":8,"suggestions":"4849","suppressions":"4850"},{"ruleId":"4784","severity":1,"message":"4785","line":15,"column":5,"nodeType":"4786","messageId":"4787","endLine":25,"endColumn":6},{"ruleId":"4778","severity":1,"message":"4779","line":15,"column":3,"nodeType":"4780","messageId":"4781","endLine":17,"endColumn":4},{"ruleId":"4770","severity":1,"message":"4774","line":21,"column":32,"nodeType":"4772","messageId":"4773","endLine":21,"endColumn":34},{"ruleId":"4770","severity":1,"message":"4774","line":27,"column":35,"nodeType":"4772","messageId":"4773","endLine":27,"endColumn":37},{"ruleId":"4770","severity":1,"message":"4774","line":28,"column":58,"nodeType":"4772","messageId":"4773","endLine":28,"endColumn":60},{"ruleId":"4770","severity":1,"message":"4774","line":30,"column":39,"nodeType":"4772","messageId":"4773","endLine":30,"endColumn":41},{"ruleId":"4778","severity":1,"message":"4779","line":17,"column":3,"nodeType":"4780","messageId":"4781","endLine":19,"endColumn":4},{"ruleId":"4778","severity":1,"message":"4779","line":20,"column":3,"nodeType":"4780","messageId":"4781","endLine":22,"endColumn":4},{"ruleId":"4778","severity":1,"message":"4779","line":20,"column":3,"nodeType":"4780","messageId":"4781","endLine":22,"endColumn":4},{"ruleId":"4778","severity":1,"message":"4779","line":16,"column":3,"nodeType":"4780","messageId":"4781","endLine":18,"endColumn":4},{"ruleId":"4778","severity":1,"message":"4779","line":16,"column":3,"nodeType":"4780","messageId":"4781","endLine":18,"endColumn":4},{"ruleId":"4778","severity":1,"message":"4779","line":14,"column":3,"nodeType":"4780","messageId":"4781","endLine":16,"endColumn":4},{"ruleId":"4823","severity":2,"message":"4824","line":195,"column":29,"nodeType":"4816","endLine":195,"endColumn":37,"suppressions":"4851"},{"ruleId":"4823","severity":2,"message":"4824","line":196,"column":47,"nodeType":"4816","endLine":196,"endColumn":55,"suppressions":"4852"},{"ruleId":"4823","severity":2,"message":"4853","line":197,"column":23,"nodeType":"4816","endLine":197,"endColumn":29,"suppressions":"4854"},{"ruleId":"4823","severity":2,"message":"4827","line":213,"column":5,"nodeType":"4816","endLine":213,"endColumn":14,"suppressions":"4855"},{"ruleId":"4823","severity":2,"message":"4827","line":221,"column":5,"nodeType":"4816","endLine":221,"endColumn":14,"suppressions":"4856"},{"ruleId":"4823","severity":2,"message":"4827","line":233,"column":5,"nodeType":"4816","endLine":233,"endColumn":14,"suppressions":"4857"},{"ruleId":"4782","severity":1,"message":"4783","line":244,"column":13,"nodeType":"4777","endLine":251,"endColumn":14,"suppressions":"4858"},{"ruleId":"4770","severity":1,"message":"4774","line":117,"column":33,"nodeType":"4772","messageId":"4773","endLine":117,"endColumn":35},{"ruleId":"4782","severity":1,"message":"4783","line":144,"column":15,"nodeType":"4777","endLine":144,"endColumn":71},{"ruleId":"4782","severity":1,"message":"4783","line":147,"column":15,"nodeType":"4777","endLine":147,"endColumn":70},{"ruleId":"4784","severity":1,"message":"4785","line":76,"column":5,"nodeType":"4786","messageId":"4787","endLine":83,"endColumn":6},{"ruleId":"4782","severity":1,"message":"4783","line":132,"column":13,"nodeType":"4777","endLine":132,"endColumn":65},{"ruleId":"4770","severity":1,"message":"4774","line":350,"column":20,"nodeType":"4772","messageId":"4773","endLine":350,"endColumn":22},{"ruleId":"4770","severity":1,"message":"4774","line":350,"column":46,"nodeType":"4772","messageId":"4773","endLine":350,"endColumn":48},{"ruleId":"4770","severity":1,"message":"4774","line":350,"column":72,"nodeType":"4772","messageId":"4773","endLine":350,"endColumn":74},{"ruleId":"4770","severity":1,"message":"4774","line":350,"column":101,"nodeType":"4772","messageId":"4773","endLine":350,"endColumn":103},{"ruleId":"4793","severity":1,"message":"4859","line":306,"column":35,"nodeType":"4795","messageId":"4796","endLine":306,"endColumn":36,"suggestions":"4860","suppressions":"4861"},{"ruleId":"4770","severity":1,"message":"4774","line":8,"column":14,"nodeType":"4772","messageId":"4773","endLine":8,"endColumn":16},{"ruleId":"4770","severity":1,"message":"4771","line":196,"column":24,"nodeType":"4772","messageId":"4773","endLine":196,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4771","line":160,"column":34,"nodeType":"4772","messageId":"4773","endLine":160,"endColumn":36},{"ruleId":"4770","severity":1,"message":"4774","line":55,"column":15,"nodeType":"4772","messageId":"4773","endLine":55,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4774","line":87,"column":31,"nodeType":"4772","messageId":"4773","endLine":87,"endColumn":33},{"ruleId":"4770","severity":1,"message":"4774","line":135,"column":27,"nodeType":"4772","messageId":"4773","endLine":135,"endColumn":29},{"ruleId":"4770","severity":1,"message":"4774","line":141,"column":57,"nodeType":"4772","messageId":"4773","endLine":141,"endColumn":59},{"ruleId":"4770","severity":1,"message":"4774","line":145,"column":24,"nodeType":"4772","messageId":"4773","endLine":145,"endColumn":26},{"ruleId":"4814","severity":1,"message":"4862","line":4,"column":19,"nodeType":"4816","messageId":"4817","endLine":4,"endColumn":23},{"ruleId":"4770","severity":1,"message":"4774","line":204,"column":28,"nodeType":"4772","messageId":"4773","endLine":204,"endColumn":30},{"ruleId":"4770","severity":1,"message":"4774","line":45,"column":23,"nodeType":"4772","messageId":"4773","endLine":45,"endColumn":25},{"ruleId":"4784","severity":1,"message":"4785","line":46,"column":7,"nodeType":"4786","messageId":"4787","endLine":72,"endColumn":8},{"ruleId":"4770","severity":1,"message":"4774","line":65,"column":25,"nodeType":"4772","messageId":"4773","endLine":65,"endColumn":27},{"ruleId":"4770","severity":1,"message":"4774","line":73,"column":30,"nodeType":"4772","messageId":"4773","endLine":73,"endColumn":32},{"ruleId":"4770","severity":1,"message":"4774","line":88,"column":30,"nodeType":"4772","messageId":"4773","endLine":88,"endColumn":32},{"ruleId":"4784","severity":1,"message":"4785","line":96,"column":7,"nodeType":"4786","messageId":"4787","endLine":129,"endColumn":8},{"ruleId":"4784","severity":1,"message":"4785","line":133,"column":7,"nodeType":"4786","messageId":"4787","endLine":161,"endColumn":8},{"ruleId":"4770","severity":1,"message":"4774","line":117,"column":33,"nodeType":"4772","messageId":"4773","endLine":117,"endColumn":35},{"ruleId":"4782","severity":1,"message":"4783","line":144,"column":15,"nodeType":"4777","endLine":144,"endColumn":71},{"ruleId":"4782","severity":1,"message":"4783","line":147,"column":15,"nodeType":"4777","endLine":147,"endColumn":70},{"ruleId":"4770","severity":1,"message":"4774","line":28,"column":127,"nodeType":"4772","messageId":"4773","endLine":28,"endColumn":129},{"ruleId":"4770","severity":1,"message":"4774","line":120,"column":21,"nodeType":"4772","messageId":"4773","endLine":120,"endColumn":23},{"ruleId":"4770","severity":1,"message":"4774","line":161,"column":19,"nodeType":"4772","messageId":"4773","endLine":161,"endColumn":21},{"ruleId":"4770","severity":1,"message":"4774","line":231,"column":17,"nodeType":"4772","messageId":"4773","endLine":231,"endColumn":19},{"ruleId":"4782","severity":1,"message":"4783","line":316,"column":23,"nodeType":"4777","endLine":321,"endColumn":74},{"ruleId":"4770","severity":1,"message":"4774","line":339,"column":56,"nodeType":"4772","messageId":"4773","endLine":339,"endColumn":58},{"ruleId":"4770","severity":1,"message":"4771","line":204,"column":11,"nodeType":"4772","messageId":"4773","endLine":204,"endColumn":13},{"ruleId":"4782","severity":1,"message":"4783","line":333,"column":11,"nodeType":"4777","endLine":333,"endColumn":141},{"ruleId":"4775","severity":1,"message":"4776","line":359,"column":15,"nodeType":"4777","endLine":359,"endColumn":160},{"ruleId":"4782","severity":1,"message":"4783","line":359,"column":15,"nodeType":"4777","endLine":359,"endColumn":160},{"ruleId":"4775","severity":1,"message":"4776","line":360,"column":15,"nodeType":"4777","endLine":360,"endColumn":164},{"ruleId":"4782","severity":1,"message":"4783","line":360,"column":15,"nodeType":"4777","endLine":360,"endColumn":164},{"ruleId":"4782","severity":1,"message":"4783","line":135,"column":15,"nodeType":"4777","endLine":140,"endColumn":49},{"ruleId":"4770","severity":1,"message":"4774","line":29,"column":124,"nodeType":"4772","messageId":"4773","endLine":29,"endColumn":126},{"ruleId":"4770","severity":1,"message":"4774","line":51,"column":34,"nodeType":"4772","messageId":"4773","endLine":51,"endColumn":36},{"ruleId":"4770","severity":1,"message":"4774","line":61,"column":20,"nodeType":"4772","messageId":"4773","endLine":61,"endColumn":22},{"ruleId":"4770","severity":1,"message":"4774","line":101,"column":53,"nodeType":"4772","messageId":"4773","endLine":101,"endColumn":55},{"ruleId":"4770","severity":1,"message":"4774","line":128,"column":43,"nodeType":"4772","messageId":"4773","endLine":128,"endColumn":45},{"ruleId":"4770","severity":1,"message":"4774","line":135,"column":28,"nodeType":"4772","messageId":"4773","endLine":135,"endColumn":30},{"ruleId":"4770","severity":1,"message":"4774","line":153,"column":14,"nodeType":"4772","messageId":"4773","endLine":153,"endColumn":16},{"ruleId":"4770","severity":1,"message":"4774","line":186,"column":24,"nodeType":"4772","messageId":"4773","endLine":186,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4774","line":214,"column":34,"nodeType":"4772","messageId":"4773","endLine":214,"endColumn":36},{"ruleId":"4770","severity":1,"message":"4774","line":96,"column":15,"nodeType":"4772","messageId":"4773","endLine":96,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4774","line":96,"column":35,"nodeType":"4772","messageId":"4773","endLine":96,"endColumn":37},{"ruleId":"4770","severity":1,"message":"4774","line":154,"column":15,"nodeType":"4772","messageId":"4773","endLine":154,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4774","line":154,"column":35,"nodeType":"4772","messageId":"4773","endLine":154,"endColumn":37},{"ruleId":"4770","severity":1,"message":"4771","line":406,"column":54,"nodeType":"4772","messageId":"4773","endLine":406,"endColumn":56},{"ruleId":"4770","severity":1,"message":"4774","line":409,"column":32,"nodeType":"4772","messageId":"4773","endLine":409,"endColumn":34},{"ruleId":"4770","severity":1,"message":"4774","line":422,"column":33,"nodeType":"4772","messageId":"4773","endLine":422,"endColumn":35},{"ruleId":"4770","severity":1,"message":"4774","line":422,"column":59,"nodeType":"4772","messageId":"4773","endLine":422,"endColumn":61},{"ruleId":"4770","severity":1,"message":"4774","line":443,"column":27,"nodeType":"4772","messageId":"4773","endLine":443,"endColumn":29},{"ruleId":"4770","severity":1,"message":"4774","line":443,"column":53,"nodeType":"4772","messageId":"4773","endLine":443,"endColumn":55},{"ruleId":"4775","severity":1,"message":"4776","line":511,"column":30,"nodeType":"4777","endLine":511,"endColumn":173},{"ruleId":"4782","severity":1,"message":"4783","line":511,"column":30,"nodeType":"4777","endLine":511,"endColumn":173},{"ruleId":"4775","severity":1,"message":"4776","line":512,"column":30,"nodeType":"4777","endLine":512,"endColumn":176},{"ruleId":"4782","severity":1,"message":"4783","line":512,"column":30,"nodeType":"4777","endLine":512,"endColumn":176},{"ruleId":"4775","severity":1,"message":"4776","line":513,"column":30,"nodeType":"4777","endLine":513,"endColumn":183},{"ruleId":"4782","severity":1,"message":"4783","line":513,"column":30,"nodeType":"4777","endLine":513,"endColumn":183},{"ruleId":"4770","severity":1,"message":"4774","line":535,"column":26,"nodeType":"4772","messageId":"4773","endLine":535,"endColumn":28},{"ruleId":"4770","severity":1,"message":"4774","line":537,"column":33,"nodeType":"4772","messageId":"4773","endLine":537,"endColumn":35},{"ruleId":"4782","severity":1,"message":"4783","line":643,"column":13,"nodeType":"4777","endLine":643,"endColumn":143},{"ruleId":"4770","severity":1,"message":"4774","line":86,"column":37,"nodeType":"4772","messageId":"4773","endLine":86,"endColumn":39},{"ruleId":"4770","severity":1,"message":"4774","line":119,"column":24,"nodeType":"4772","messageId":"4773","endLine":119,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4774","line":41,"column":19,"nodeType":"4772","messageId":"4773","endLine":41,"endColumn":21},{"ruleId":"4770","severity":1,"message":"4774","line":58,"column":26,"nodeType":"4772","messageId":"4773","endLine":58,"endColumn":28},{"ruleId":"4770","severity":1,"message":"4774","line":48,"column":19,"nodeType":"4772","messageId":"4773","endLine":48,"endColumn":21},{"ruleId":"4770","severity":1,"message":"4774","line":52,"column":21,"nodeType":"4772","messageId":"4773","endLine":52,"endColumn":23},{"ruleId":"4770","severity":1,"message":"4774","line":67,"column":26,"nodeType":"4772","messageId":"4773","endLine":67,"endColumn":28},{"ruleId":"4793","severity":1,"message":"4835","line":70,"column":58,"nodeType":"4795","messageId":"4796","endLine":70,"endColumn":59,"suggestions":"4863","suppressions":"4864"},{"ruleId":"4793","severity":1,"message":"4865","line":70,"column":64,"nodeType":"4795","messageId":"4796","endLine":70,"endColumn":65,"suggestions":"4866","suppressions":"4867"},{"ruleId":"4793","severity":1,"message":"4868","line":70,"column":66,"nodeType":"4795","messageId":"4796","endLine":70,"endColumn":67,"suggestions":"4869","suppressions":"4870"},{"ruleId":"4793","severity":1,"message":"4794","line":70,"column":86,"nodeType":"4795","messageId":"4796","endLine":70,"endColumn":87,"suggestions":"4871","suppressions":"4872"},{"ruleId":"4793","severity":1,"message":"4835","line":70,"column":88,"nodeType":"4795","messageId":"4796","endLine":70,"endColumn":89,"suggestions":"4873","suppressions":"4874"},{"ruleId":"4793","severity":1,"message":"4835","line":70,"column":103,"nodeType":"4795","messageId":"4796","endLine":70,"endColumn":104,"suggestions":"4875","suppressions":"4876"},{"ruleId":"4793","severity":1,"message":"4865","line":70,"column":109,"nodeType":"4795","messageId":"4796","endLine":70,"endColumn":110,"suggestions":"4877","suppressions":"4878"},{"ruleId":"4793","severity":1,"message":"4868","line":70,"column":111,"nodeType":"4795","messageId":"4796","endLine":70,"endColumn":112,"suggestions":"4879","suppressions":"4880"},{"ruleId":"4793","severity":1,"message":"4794","line":70,"column":130,"nodeType":"4795","messageId":"4796","endLine":70,"endColumn":131,"suggestions":"4881","suppressions":"4882"},{"ruleId":"4793","severity":1,"message":"4835","line":70,"column":132,"nodeType":"4795","messageId":"4796","endLine":70,"endColumn":133,"suggestions":"4883","suppressions":"4884"},{"ruleId":"4793","severity":1,"message":"4865","line":70,"column":144,"nodeType":"4795","messageId":"4796","endLine":70,"endColumn":145,"suggestions":"4885","suppressions":"4886"},{"ruleId":"4793","severity":1,"message":"4887","line":70,"column":148,"nodeType":"4795","messageId":"4796","endLine":70,"endColumn":149,"suggestions":"4888","suppressions":"4889"},{"ruleId":"4793","severity":1,"message":"4794","line":70,"column":150,"nodeType":"4795","messageId":"4796","endLine":70,"endColumn":151,"suggestions":"4890","suppressions":"4891"},{"ruleId":"4793","severity":1,"message":"4835","line":70,"column":168,"nodeType":"4795","messageId":"4796","endLine":70,"endColumn":169,"suggestions":"4892","suppressions":"4893"},{"ruleId":"4793","severity":1,"message":"4865","line":70,"column":170,"nodeType":"4795","messageId":"4796","endLine":70,"endColumn":171,"suggestions":"4894","suppressions":"4895"},{"ruleId":"4793","severity":1,"message":"4794","line":70,"column":177,"nodeType":"4795","messageId":"4796","endLine":70,"endColumn":178,"suggestions":"4896","suppressions":"4897"},{"ruleId":"4793","severity":1,"message":"4794","line":70,"column":191,"nodeType":"4795","messageId":"4796","endLine":70,"endColumn":192,"suggestions":"4898","suppressions":"4899"},{"ruleId":"4793","severity":1,"message":"4900","line":70,"column":193,"nodeType":"4795","messageId":"4796","endLine":70,"endColumn":194,"suggestions":"4901","suppressions":"4902"},{"ruleId":"4793","severity":1,"message":"4887","line":70,"column":195,"nodeType":"4795","messageId":"4796","endLine":70,"endColumn":196,"suggestions":"4903","suppressions":"4904"},{"ruleId":"4770","severity":1,"message":"4774","line":147,"column":21,"nodeType":"4772","messageId":"4773","endLine":147,"endColumn":23},{"ruleId":"4770","severity":1,"message":"4774","line":149,"column":39,"nodeType":"4772","messageId":"4773","endLine":149,"endColumn":41},{"ruleId":"4770","severity":1,"message":"4771","line":149,"column":53,"nodeType":"4772","messageId":"4773","endLine":149,"endColumn":55},{"ruleId":"4770","severity":1,"message":"4774","line":153,"column":39,"nodeType":"4772","messageId":"4773","endLine":153,"endColumn":41},{"ruleId":"4770","severity":1,"message":"4774","line":169,"column":25,"nodeType":"4772","messageId":"4773","endLine":169,"endColumn":27},{"ruleId":"4770","severity":1,"message":"4774","line":94,"column":48,"nodeType":"4772","messageId":"4773","endLine":94,"endColumn":50},{"ruleId":"4770","severity":1,"message":"4774","line":37,"column":19,"nodeType":"4772","messageId":"4773","endLine":37,"endColumn":21},{"ruleId":"4770","severity":1,"message":"4774","line":54,"column":26,"nodeType":"4772","messageId":"4773","endLine":54,"endColumn":28},{"ruleId":"4770","severity":1,"message":"4774","line":140,"column":30,"nodeType":"4772","messageId":"4773","endLine":140,"endColumn":32},{"ruleId":"4770","severity":1,"message":"4774","line":144,"column":38,"nodeType":"4772","messageId":"4773","endLine":144,"endColumn":40},{"ruleId":"4770","severity":1,"message":"4774","line":43,"column":42,"nodeType":"4772","messageId":"4773","endLine":43,"endColumn":44},{"ruleId":"4775","severity":1,"message":"4776","line":154,"column":11,"nodeType":"4777","endLine":154,"endColumn":153},{"ruleId":"4782","severity":1,"message":"4783","line":154,"column":11,"nodeType":"4777","endLine":154,"endColumn":153},{"ruleId":"4770","severity":1,"message":"4774","line":129,"column":27,"nodeType":"4772","messageId":"4773","endLine":129,"endColumn":29},{"ruleId":"4799","severity":1,"message":"4800","line":95,"column":55,"nodeType":"4772","messageId":"4801","endLine":95,"endColumn":56},{"ruleId":"4799","severity":1,"message":"4800","line":95,"column":65,"nodeType":"4772","messageId":"4801","endLine":95,"endColumn":66},{"ruleId":"4770","severity":1,"message":"4771","line":32,"column":38,"nodeType":"4772","messageId":"4773","endLine":32,"endColumn":40},{"ruleId":"4844","severity":1,"message":"4845","line":63,"column":32,"nodeType":"4846","messageId":"4847","endLine":63,"endColumn":34},{"ruleId":"4844","severity":1,"message":"4845","line":63,"column":56,"nodeType":"4846","messageId":"4847","endLine":63,"endColumn":58},{"ruleId":"4770","severity":1,"message":"4771","line":62,"column":14,"nodeType":"4772","messageId":"4773","endLine":62,"endColumn":16},{"ruleId":"4770","severity":1,"message":"4771","line":65,"column":17,"nodeType":"4772","messageId":"4773","endLine":65,"endColumn":19},{"ruleId":"4905","severity":1,"message":"4906","line":122,"column":1,"nodeType":"4907","endLine":122,"endColumn":111,"suppressions":"4908"},{"ruleId":"4770","severity":1,"message":"4771","line":56,"column":57,"nodeType":"4772","messageId":"4773","endLine":56,"endColumn":59},{"ruleId":"4770","severity":1,"message":"4774","line":196,"column":50,"nodeType":"4772","messageId":"4773","endLine":196,"endColumn":52},{"ruleId":"4770","severity":1,"message":"4774","line":57,"column":30,"nodeType":"4772","messageId":"4773","endLine":57,"endColumn":32},{"ruleId":"4770","severity":1,"message":"4774","line":32,"column":79,"nodeType":"4772","messageId":"4773","endLine":32,"endColumn":81},{"ruleId":"4770","severity":1,"message":"4774","line":81,"column":81,"nodeType":"4772","messageId":"4773","endLine":81,"endColumn":83},{"ruleId":"4770","severity":1,"message":"4774","line":84,"column":20,"nodeType":"4772","messageId":"4773","endLine":84,"endColumn":22},{"ruleId":"4770","severity":1,"message":"4774","line":100,"column":81,"nodeType":"4772","messageId":"4773","endLine":100,"endColumn":83},{"ruleId":"4770","severity":1,"message":"4774","line":103,"column":20,"nodeType":"4772","messageId":"4773","endLine":103,"endColumn":22},{"ruleId":"4770","severity":1,"message":"4771","line":71,"column":21,"nodeType":"4772","messageId":"4773","endLine":71,"endColumn":23},{"ruleId":"4770","severity":1,"message":"4774","line":32,"column":15,"nodeType":"4772","messageId":"4773","endLine":32,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4774","line":32,"column":35,"nodeType":"4772","messageId":"4773","endLine":32,"endColumn":37},{"ruleId":"4770","severity":1,"message":"4774","line":42,"column":15,"nodeType":"4772","messageId":"4773","endLine":42,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4774","line":42,"column":35,"nodeType":"4772","messageId":"4773","endLine":42,"endColumn":37},{"ruleId":"4770","severity":1,"message":"4774","line":217,"column":24,"nodeType":"4772","messageId":"4773","endLine":217,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4774","line":219,"column":31,"nodeType":"4772","messageId":"4773","endLine":219,"endColumn":33},{"ruleId":"4770","severity":1,"message":"4771","line":272,"column":24,"nodeType":"4772","messageId":"4773","endLine":272,"endColumn":26},{"ruleId":"4770","severity":1,"message":"4774","line":44,"column":15,"nodeType":"4772","messageId":"4773","endLine":44,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4774","line":44,"column":35,"nodeType":"4772","messageId":"4773","endLine":44,"endColumn":37},{"ruleId":"4814","severity":1,"message":"4909","line":2,"column":35,"nodeType":"4816","messageId":"4817","endLine":2,"endColumn":44,"suppressions":"4910"},{"ruleId":"4770","severity":1,"message":"4774","line":53,"column":24,"nodeType":"4772","messageId":"4773","endLine":53,"endColumn":26,"suppressions":"4911"},{"ruleId":"4770","severity":1,"message":"4774","line":31,"column":124,"nodeType":"4772","messageId":"4773","endLine":31,"endColumn":126},{"ruleId":"4770","severity":1,"message":"4774","line":111,"column":21,"nodeType":"4772","messageId":"4773","endLine":111,"endColumn":23},{"ruleId":"4770","severity":1,"message":"4774","line":119,"column":16,"nodeType":"4772","messageId":"4773","endLine":119,"endColumn":18},{"ruleId":"4770","severity":1,"message":"4774","line":127,"column":18,"nodeType":"4772","messageId":"4773","endLine":127,"endColumn":20},{"ruleId":"4770","severity":1,"message":"4774","line":160,"column":14,"nodeType":"4772","messageId":"4773","endLine":160,"endColumn":16},{"ruleId":"4770","severity":1,"message":"4774","line":171,"column":14,"nodeType":"4772","messageId":"4773","endLine":171,"endColumn":16},{"ruleId":"4770","severity":1,"message":"4774","line":191,"column":19,"nodeType":"4772","messageId":"4773","endLine":191,"endColumn":21},{"ruleId":"4770","severity":1,"message":"4774","line":214,"column":36,"nodeType":"4772","messageId":"4773","endLine":214,"endColumn":38},{"ruleId":"4770","severity":1,"message":"4774","line":260,"column":19,"nodeType":"4772","messageId":"4773","endLine":260,"endColumn":21},{"ruleId":"4770","severity":1,"message":"4774","line":263,"column":17,"nodeType":"4772","messageId":"4773","endLine":263,"endColumn":19},{"ruleId":"4770","severity":1,"message":"4771","line":281,"column":19,"nodeType":"4772","messageId":"4773","endLine":281,"endColumn":21},{"ruleId":"4770","severity":1,"message":"4774","line":335,"column":112,"nodeType":"4772","messageId":"4773","endLine":335,"endColumn":114},{"ruleId":"4770","severity":1,"message":"4774","line":55,"column":50,"nodeType":"4772","messageId":"4773","endLine":55,"endColumn":52},{"ruleId":"4770","severity":1,"message":"4774","line":62,"column":35,"nodeType":"4772","messageId":"4773","endLine":62,"endColumn":37},{"ruleId":"4770","severity":1,"message":"4774","line":76,"column":28,"nodeType":"4772","messageId":"4773","endLine":76,"endColumn":30},{"ruleId":"4770","severity":1,"message":"4774","line":136,"column":36,"nodeType":"4772","messageId":"4773","endLine":136,"endColumn":38},{"ruleId":"4770","severity":1,"message":"4774","line":112,"column":17,"nodeType":"4772","messageId":"4773","endLine":112,"endColumn":19},{"ruleId":"4770","severity":1,"message":"4774","line":173,"column":26,"nodeType":"4772","messageId":"4773","endLine":173,"endColumn":28},{"ruleId":"4782","severity":1,"message":"4783","line":247,"column":21,"nodeType":"4777","endLine":252,"endColumn":75},{"ruleId":"4770","severity":1,"message":"4774","line":271,"column":56,"nodeType":"4772","messageId":"4773","endLine":271,"endColumn":58},{"ruleId":"4770","severity":1,"message":"4771","line":82,"column":61,"nodeType":"4772","messageId":"4773","endLine":82,"endColumn":63},{"ruleId":"4782","severity":1,"message":"4783","line":135,"column":11,"nodeType":"4777","endLine":139,"endColumn":12},{"ruleId":"4799","severity":1,"message":"4800","line":93,"column":55,"nodeType":"4772","messageId":"4801","endLine":93,"endColumn":56},{"ruleId":"4799","severity":1,"message":"4800","line":93,"column":65,"nodeType":"4772","messageId":"4801","endLine":93,"endColumn":66},{"ruleId":"4770","severity":1,"message":"4774","line":117,"column":33,"nodeType":"4772","messageId":"4773","endLine":117,"endColumn":35},{"ruleId":"4782","severity":1,"message":"4783","line":144,"column":15,"nodeType":"4777","endLine":144,"endColumn":71},{"ruleId":"4782","severity":1,"message":"4783","line":147,"column":15,"nodeType":"4777","endLine":147,"endColumn":70},{"ruleId":"4770","severity":1,"message":"4771","line":58,"column":61,"nodeType":"4772","messageId":"4773","endLine":58,"endColumn":63},{"ruleId":"4770","severity":1,"message":"4774","line":71,"column":15,"nodeType":"4772","messageId":"4773","endLine":71,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4774","line":71,"column":35,"nodeType":"4772","messageId":"4773","endLine":71,"endColumn":37},{"ruleId":"4770","severity":1,"message":"4774","line":97,"column":15,"nodeType":"4772","messageId":"4773","endLine":97,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4774","line":97,"column":35,"nodeType":"4772","messageId":"4773","endLine":97,"endColumn":37},{"ruleId":"4784","severity":1,"message":"4785","line":72,"column":5,"nodeType":"4786","messageId":"4787","endLine":102,"endColumn":6},{"ruleId":"4770","severity":1,"message":"4774","line":359,"column":28,"nodeType":"4772","messageId":"4773","endLine":359,"endColumn":30},{"ruleId":"4775","severity":1,"message":"4776","line":69,"column":13,"nodeType":"4777","endLine":78,"endColumn":14},{"ruleId":"4782","severity":1,"message":"4783","line":69,"column":13,"nodeType":"4777","endLine":78,"endColumn":14},{"ruleId":"4775","severity":1,"message":"4776","line":81,"column":13,"nodeType":"4777","endLine":81,"endColumn":124},{"ruleId":"4775","severity":1,"message":"4776","line":91,"column":13,"nodeType":"4777","endLine":100,"endColumn":14},{"ruleId":"4782","severity":1,"message":"4783","line":91,"column":13,"nodeType":"4777","endLine":100,"endColumn":14},{"ruleId":"4775","severity":1,"message":"4776","line":103,"column":13,"nodeType":"4777","endLine":103,"endColumn":124},{"ruleId":"4775","severity":1,"message":"4776","line":106,"column":13,"nodeType":"4777","endLine":106,"endColumn":130},{"ruleId":"4782","severity":1,"message":"4813","line":60,"column":13,"nodeType":"4777","endLine":60,"endColumn":86},{"ruleId":"4782","severity":1,"message":"4813","line":103,"column":11,"nodeType":"4777","endLine":103,"endColumn":77},{"ruleId":"4770","severity":1,"message":"4774","line":143,"column":44,"nodeType":"4772","messageId":"4773","endLine":143,"endColumn":46},{"ruleId":"4770","severity":1,"message":"4774","line":150,"column":44,"nodeType":"4772","messageId":"4773","endLine":150,"endColumn":46},{"ruleId":"4770","severity":1,"message":"4774","line":157,"column":44,"nodeType":"4772","messageId":"4773","endLine":157,"endColumn":46},{"ruleId":"4770","severity":1,"message":"4774","line":167,"column":28,"nodeType":"4772","messageId":"4773","endLine":167,"endColumn":30},{"ruleId":"4770","severity":1,"message":"4774","line":607,"column":31,"nodeType":"4772","messageId":"4773","endLine":607,"endColumn":33},{"ruleId":"4770","severity":1,"message":"4774","line":608,"column":31,"nodeType":"4772","messageId":"4773","endLine":608,"endColumn":33},{"ruleId":"4770","severity":1,"message":"4774","line":609,"column":31,"nodeType":"4772","messageId":"4773","endLine":609,"endColumn":33},{"ruleId":"4770","severity":1,"message":"4774","line":610,"column":32,"nodeType":"4772","messageId":"4773","endLine":610,"endColumn":34},{"ruleId":"4782","severity":1,"message":"4783","line":634,"column":33,"nodeType":"4777","endLine":634,"endColumn":105},{"ruleId":"4782","severity":1,"message":"4783","line":637,"column":33,"nodeType":"4777","endLine":637,"endColumn":105},{"ruleId":"4782","severity":1,"message":"4783","line":638,"column":33,"nodeType":"4777","endLine":638,"endColumn":105},{"ruleId":"4784","severity":1,"message":"4785","line":74,"column":5,"nodeType":"4786","messageId":"4787","endLine":85,"endColumn":6},{"ruleId":"4770","severity":1,"message":"4771","line":195,"column":106,"nodeType":"4772","messageId":"4773","endLine":195,"endColumn":108},{"ruleId":"4770","severity":1,"message":"4771","line":179,"column":30,"nodeType":"4772","messageId":"4773","endLine":179,"endColumn":32},{"ruleId":"4775","severity":1,"message":"4776","line":112,"column":13,"nodeType":"4777","endLine":112,"endColumn":203},{"ruleId":"4782","severity":1,"message":"4783","line":112,"column":13,"nodeType":"4777","endLine":112,"endColumn":203},{"ruleId":"4775","severity":1,"message":"4776","line":113,"column":13,"nodeType":"4777","endLine":113,"endColumn":211},{"ruleId":"4782","severity":1,"message":"4783","line":113,"column":13,"nodeType":"4777","endLine":113,"endColumn":211},{"ruleId":"4788","severity":1,"message":"4912","line":31,"column":8,"nodeType":"4790","endLine":31,"endColumn":10,"suggestions":"4913","suppressions":"4914"},{"ruleId":"4782","severity":1,"message":"4783","line":85,"column":17,"nodeType":"4777","endLine":90,"endColumn":51},{"ruleId":"4782","severity":1,"message":"4783","line":85,"column":17,"nodeType":"4777","endLine":90,"endColumn":51},{"ruleId":"4782","severity":1,"message":"4813","line":251,"column":15,"nodeType":"4777","endLine":251,"endColumn":155},{"ruleId":"4799","severity":1,"message":"4800","line":92,"column":55,"nodeType":"4772","messageId":"4801","endLine":92,"endColumn":56},{"ruleId":"4799","severity":1,"message":"4800","line":92,"column":65,"nodeType":"4772","messageId":"4801","endLine":92,"endColumn":66},{"ruleId":"4770","severity":1,"message":"4774","line":194,"column":26,"nodeType":"4772","messageId":"4773","endLine":194,"endColumn":28},{"ruleId":"4775","severity":1,"message":"4776","line":637,"column":19,"nodeType":"4777","endLine":637,"endColumn":174},{"ruleId":"4782","severity":1,"message":"4783","line":637,"column":19,"nodeType":"4777","endLine":637,"endColumn":174},{"ruleId":"4775","severity":1,"message":"4776","line":640,"column":19,"nodeType":"4777","endLine":640,"endColumn":162},{"ruleId":"4782","severity":1,"message":"4783","line":640,"column":19,"nodeType":"4777","endLine":640,"endColumn":162},{"ruleId":"4775","severity":1,"message":"4776","line":643,"column":19,"nodeType":"4777","endLine":643,"endColumn":166},{"ruleId":"4782","severity":1,"message":"4783","line":643,"column":19,"nodeType":"4777","endLine":643,"endColumn":166},{"ruleId":"4775","severity":1,"message":"4776","line":661,"column":19,"nodeType":"4777","endLine":661,"endColumn":174},{"ruleId":"4782","severity":1,"message":"4783","line":661,"column":19,"nodeType":"4777","endLine":661,"endColumn":174},{"ruleId":"4775","severity":1,"message":"4776","line":664,"column":19,"nodeType":"4777","endLine":664,"endColumn":162},{"ruleId":"4782","severity":1,"message":"4783","line":664,"column":19,"nodeType":"4777","endLine":664,"endColumn":162},{"ruleId":"4775","severity":1,"message":"4776","line":667,"column":19,"nodeType":"4777","endLine":667,"endColumn":166},{"ruleId":"4782","severity":1,"message":"4783","line":667,"column":19,"nodeType":"4777","endLine":667,"endColumn":166},{"ruleId":"4782","severity":1,"message":"4783","line":734,"column":11,"nodeType":"4777","endLine":734,"endColumn":132},{"ruleId":"4782","severity":1,"message":"4813","line":754,"column":17,"nodeType":"4777","endLine":754,"endColumn":67},{"ruleId":"4770","severity":1,"message":"4774","line":770,"column":84,"nodeType":"4772","messageId":"4773","endLine":770,"endColumn":86},{"ruleId":"4782","severity":1,"message":"4813","line":795,"column":17,"nodeType":"4777","endLine":795,"endColumn":40},{"ruleId":"4770","severity":1,"message":"4771","line":820,"column":28,"nodeType":"4772","messageId":"4773","endLine":820,"endColumn":30},{"ruleId":"4770","severity":1,"message":"4771","line":820,"column":53,"nodeType":"4772","messageId":"4773","endLine":820,"endColumn":55},{"ruleId":"4770","severity":1,"message":"4771","line":60,"column":66,"nodeType":"4772","messageId":"4773","endLine":60,"endColumn":68},{"ruleId":"4770","severity":1,"message":"4774","line":30,"column":124,"nodeType":"4772","messageId":"4773","endLine":30,"endColumn":126,"suppressions":"4915"},{"ruleId":"4770","severity":1,"message":"4774","line":71,"column":20,"nodeType":"4772","messageId":"4773","endLine":71,"endColumn":22,"suppressions":"4916"},{"ruleId":"4770","severity":1,"message":"4774","line":161,"column":60,"nodeType":"4772","messageId":"4773","endLine":161,"endColumn":62,"suppressions":"4917"},{"ruleId":"4770","severity":1,"message":"4774","line":167,"column":76,"nodeType":"4772","messageId":"4773","endLine":167,"endColumn":78,"suppressions":"4918"},{"ruleId":"4770","severity":1,"message":"4774","line":201,"column":43,"nodeType":"4772","messageId":"4773","endLine":201,"endColumn":45,"suppressions":"4919"},{"ruleId":"4770","severity":1,"message":"4774","line":209,"column":43,"nodeType":"4772","messageId":"4773","endLine":209,"endColumn":45,"suppressions":"4920"},{"ruleId":"4770","severity":1,"message":"4774","line":214,"column":28,"nodeType":"4772","messageId":"4773","endLine":214,"endColumn":30,"suppressions":"4921"},{"ruleId":"4770","severity":1,"message":"4774","line":232,"column":14,"nodeType":"4772","messageId":"4773","endLine":232,"endColumn":16,"suppressions":"4922"},{"ruleId":"4770","severity":1,"message":"4774","line":273,"column":24,"nodeType":"4772","messageId":"4773","endLine":273,"endColumn":26,"suppressions":"4923"},{"ruleId":"4770","severity":1,"message":"4774","line":34,"column":124,"nodeType":"4772","messageId":"4773","endLine":34,"endColumn":126,"suppressions":"4924"},{"ruleId":"4770","severity":1,"message":"4774","line":114,"column":21,"nodeType":"4772","messageId":"4773","endLine":114,"endColumn":23,"suppressions":"4925"},{"ruleId":"4770","severity":1,"message":"4774","line":122,"column":16,"nodeType":"4772","messageId":"4773","endLine":122,"endColumn":18,"suppressions":"4926"},{"ruleId":"4770","severity":1,"message":"4774","line":130,"column":18,"nodeType":"4772","messageId":"4773","endLine":130,"endColumn":20,"suppressions":"4927"},{"ruleId":"4770","severity":1,"message":"4774","line":157,"column":14,"nodeType":"4772","messageId":"4773","endLine":157,"endColumn":16,"suppressions":"4928"},{"ruleId":"4770","severity":1,"message":"4774","line":168,"column":14,"nodeType":"4772","messageId":"4773","endLine":168,"endColumn":16,"suppressions":"4929"},{"ruleId":"4770","severity":1,"message":"4774","line":188,"column":19,"nodeType":"4772","messageId":"4773","endLine":188,"endColumn":21,"suppressions":"4930"},{"ruleId":"4770","severity":1,"message":"4774","line":211,"column":36,"nodeType":"4772","messageId":"4773","endLine":211,"endColumn":38,"suppressions":"4931"},{"ruleId":"4770","severity":1,"message":"4774","line":257,"column":19,"nodeType":"4772","messageId":"4773","endLine":257,"endColumn":21,"suppressions":"4932"},{"ruleId":"4770","severity":1,"message":"4774","line":260,"column":17,"nodeType":"4772","messageId":"4773","endLine":260,"endColumn":19,"suppressions":"4933"},{"ruleId":"4770","severity":1,"message":"4771","line":278,"column":19,"nodeType":"4772","messageId":"4773","endLine":278,"endColumn":21,"suppressions":"4934"},{"ruleId":"4770","severity":1,"message":"4774","line":332,"column":112,"nodeType":"4772","messageId":"4773","endLine":332,"endColumn":114,"suppressions":"4935"},{"ruleId":"4770","severity":1,"message":"4774","line":57,"column":54,"nodeType":"4772","messageId":"4773","endLine":57,"endColumn":56,"suppressions":"4936"},{"ruleId":"4770","severity":1,"message":"4774","line":64,"column":47,"nodeType":"4772","messageId":"4773","endLine":64,"endColumn":49,"suppressions":"4937"},{"ruleId":"4770","severity":1,"message":"4774","line":80,"column":36,"nodeType":"4772","messageId":"4773","endLine":80,"endColumn":38,"suppressions":"4938"},{"ruleId":"4770","severity":1,"message":"4774","line":54,"column":34,"nodeType":"4772","messageId":"4773","endLine":54,"endColumn":36},{"ruleId":"4770","severity":1,"message":"4774","line":81,"column":119,"nodeType":"4772","messageId":"4773","endLine":81,"endColumn":121},{"ruleId":"4770","severity":1,"message":"4774","line":62,"column":34,"nodeType":"4772","messageId":"4773","endLine":62,"endColumn":36},{"ruleId":"4770","severity":1,"message":"4774","line":89,"column":119,"nodeType":"4772","messageId":"4773","endLine":89,"endColumn":121},{"ruleId":"4770","severity":1,"message":"4774","line":52,"column":15,"nodeType":"4772","messageId":"4773","endLine":52,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4774","line":56,"column":20,"nodeType":"4772","messageId":"4773","endLine":56,"endColumn":22},{"ruleId":"4770","severity":1,"message":"4774","line":58,"column":15,"nodeType":"4772","messageId":"4773","endLine":58,"endColumn":17},{"ruleId":"4770","severity":1,"message":"4774","line":62,"column":20,"nodeType":"4772","messageId":"4773","endLine":62,"endColumn":22},"eqeqeq","Expected '!==' and instead saw '!='.","BinaryExpression","unexpected","Expected '===' and instead saw '=='.","jsx-a11y/anchor-has-content","Anchors must have content and the content must be accessible by a screen reader.","JSXOpeningElement","no-useless-constructor","Useless constructor.","MethodDefinition","noUselessConstructor","jsx-a11y/anchor-is-valid","The href attribute requires a valid value to be accessible. Provide a valid, navigable address as the href value. If you cannot provide a valid href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/jsx-eslint/eslint-plugin-jsx-a11y/blob/HEAD/docs/rules/anchor-is-valid.md","default-case","Expected a default case.","SwitchStatement","missingDefaultCase","react-hooks/exhaustive-deps","React Hook useLayoutEffect has a missing dependency: 'updateOptions'. Either include it or remove the dependency array.","ArrayExpression",["4939"],["4940"],"no-useless-escape","Unnecessary escape character: \\..","Literal","unnecessaryEscape",["4941","4942"],["4943"],"no-useless-concat","Unexpected string concatenation of literals.","unexpectedConcat",["4944"],["4945","4946"],["4947"],["4948","4949"],["4950"],["4951","4952"],["4953"],"no-unused-expressions","Expected an assignment or function call and instead saw an expression.","ExpressionStatement","unusedExpression","The href attribute is required for an anchor to be keyboard accessible. Provide a valid, navigable address as the href value. If you cannot provide an href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/jsx-eslint/eslint-plugin-jsx-a11y/blob/HEAD/docs/rules/anchor-is-valid.md","no-unused-vars","'siteRoot' is defined but never used.","Identifier","unusedVar",["4954"],"React Hook useEffect has a missing dependency: 'param'. Either include it or remove the dependency array.",["4955"],["4956"],["4957"],"react-hooks/rules-of-hooks","React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.",["4958"],["4959"],"React Hook \"useEffect\" is called conditionally. React Hooks must be called in the exact same order in every component render.",["4960"],"no-use-before-define","'node' was used before it was defined.","usedBeforeDefined",["4961"],["4962"],["4963"],"Unnecessary escape character: \\-.",["4964","4965"],["4966"],["4967","4968"],["4969","4970"],["4971","4972"],["4973","4974"],["4975"],["4976"],"no-mixed-operators","Unexpected mix of '&&' and '||'. Use parentheses to clarify the intended order of operations.","LogicalExpression","unexpectedMixedOperator","React Hook useEffect has missing dependencies: 'curPerPage' and 'currentPage'. Either include them or remove the dependency array.",["4977"],["4978"],["4979"],["4980"],"React Hook \"useRef\" is called conditionally. React Hooks must be called in the exact same order in every component render.",["4981"],["4982"],["4983"],["4984"],["4985"],"Unnecessary escape character: \\d.",["4986","4987"],["4988"],"'lang' is defined but never used.",["4989","4990"],["4991"],"Unnecessary escape character: \\+.",["4992","4993"],["4994"],"Unnecessary escape character: \\$.",["4995","4996"],["4997"],["4998","4999"],["5000"],["5001","5002"],["5003"],["5004","5005"],["5006"],["5007","5008"],["5009"],["5010","5011"],["5012"],["5013","5014"],["5015"],["5016","5017"],["5018"],["5019","5020"],["5021"],"Unnecessary escape character: \\/.",["5022","5023"],["5024"],["5025","5026"],["5027"],["5028","5029"],["5030"],["5031","5032"],["5033"],["5034","5035"],["5036"],["5037","5038"],["5039"],"Unnecessary escape character: \\!.",["5040","5041"],["5042"],["5043","5044"],["5045"],"import/no-anonymous-default-export","Assign object to a variable before exporting as module default","ExportDefaultDeclaration",["5046"],"'useEffect' is defined but never used.",["5047"],["5048"],"React Hook useEffect has a missing dependency: 'DISMISS_DURATION'. Either include it or remove the dependency array.",["5049"],["5050"],["5051"],["5052"],["5053"],["5054"],["5055"],["5056"],["5057"],["5058"],["5059"],["5060"],["5061"],["5062"],["5063"],["5064"],["5065"],["5066"],["5067"],["5068"],["5069"],["5070"],["5071"],["5072"],["5073"],["5074"],{"desc":"5075","fix":"5076"},{"kind":"5077","justification":"5078"},{"messageId":"5079","fix":"5080","desc":"5081"},{"messageId":"5082","fix":"5083","desc":"5084"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"messageId":"5079","fix":"5085","desc":"5081"},{"messageId":"5082","fix":"5086","desc":"5084"},{"kind":"5077","justification":"5078"},{"messageId":"5079","fix":"5087","desc":"5081"},{"messageId":"5082","fix":"5088","desc":"5084"},{"kind":"5077","justification":"5078"},{"messageId":"5079","fix":"5089","desc":"5081"},{"messageId":"5082","fix":"5090","desc":"5084"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"desc":"5091","fix":"5092"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"messageId":"5079","fix":"5093","desc":"5081"},{"messageId":"5082","fix":"5094","desc":"5084"},{"kind":"5077","justification":"5078"},{"messageId":"5079","fix":"5095","desc":"5081"},{"messageId":"5082","fix":"5096","desc":"5084"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"messageId":"5079","fix":"5097","desc":"5081"},{"messageId":"5082","fix":"5098","desc":"5084"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"desc":"5099","fix":"5100"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"messageId":"5079","fix":"5101","desc":"5081"},{"messageId":"5082","fix":"5102","desc":"5084"},{"kind":"5077","justification":"5078"},{"messageId":"5079","fix":"5103","desc":"5081"},{"messageId":"5082","fix":"5104","desc":"5084"},{"kind":"5077","justification":"5078"},{"messageId":"5079","fix":"5105","desc":"5081"},{"messageId":"5082","fix":"5106","desc":"5084"},{"kind":"5077","justification":"5078"},{"messageId":"5079","fix":"5107","desc":"5081"},{"messageId":"5082","fix":"5108","desc":"5084"},{"kind":"5077","justification":"5078"},{"messageId":"5079","fix":"5109","desc":"5081"},{"messageId":"5082","fix":"5110","desc":"5084"},{"kind":"5077","justification":"5078"},{"messageId":"5079","fix":"5111","desc":"5081"},{"messageId":"5082","fix":"5112","desc":"5084"},{"kind":"5077","justification":"5078"},{"messageId":"5079","fix":"5113","desc":"5081"},{"messageId":"5082","fix":"5114","desc":"5084"},{"kind":"5077","justification":"5078"},{"messageId":"5079","fix":"5115","desc":"5081"},{"messageId":"5082","fix":"5116","desc":"5084"},{"kind":"5077","justification":"5078"},{"messageId":"5079","fix":"5117","desc":"5081"},{"messageId":"5082","fix":"5118","desc":"5084"},{"kind":"5077","justification":"5078"},{"messageId":"5079","fix":"5119","desc":"5081"},{"messageId":"5082","fix":"5120","desc":"5084"},{"kind":"5077","justification":"5078"},{"messageId":"5079","fix":"5121","desc":"5081"},{"messageId":"5082","fix":"5122","desc":"5084"},{"kind":"5077","justification":"5078"},{"messageId":"5079","fix":"5123","desc":"5081"},{"messageId":"5082","fix":"5124","desc":"5084"},{"kind":"5077","justification":"5078"},{"messageId":"5079","fix":"5125","desc":"5081"},{"messageId":"5082","fix":"5126","desc":"5084"},{"kind":"5077","justification":"5078"},{"messageId":"5079","fix":"5127","desc":"5081"},{"messageId":"5082","fix":"5128","desc":"5084"},{"kind":"5077","justification":"5078"},{"messageId":"5079","fix":"5129","desc":"5081"},{"messageId":"5082","fix":"5130","desc":"5084"},{"kind":"5077","justification":"5078"},{"messageId":"5079","fix":"5131","desc":"5081"},{"messageId":"5082","fix":"5132","desc":"5084"},{"kind":"5077","justification":"5078"},{"messageId":"5079","fix":"5133","desc":"5081"},{"messageId":"5082","fix":"5134","desc":"5084"},{"kind":"5077","justification":"5078"},{"messageId":"5079","fix":"5135","desc":"5081"},{"messageId":"5082","fix":"5136","desc":"5084"},{"kind":"5077","justification":"5078"},{"messageId":"5079","fix":"5137","desc":"5081"},{"messageId":"5082","fix":"5138","desc":"5084"},{"kind":"5077","justification":"5078"},{"messageId":"5079","fix":"5139","desc":"5081"},{"messageId":"5082","fix":"5140","desc":"5084"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"desc":"5141","fix":"5142"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},{"kind":"5077","justification":"5078"},"Update the dependencies array to be: [updateOptions]",{"range":"5143","text":"5144"},"directive","","removeEscape",{"range":"5145","text":"5078"},"Remove the `\\`. This maintains the current functionality.","escapeBackslash",{"range":"5146","text":"5147"},"Replace the `\\` with `\\\\` to include the actual backslash character.",{"range":"5148","text":"5078"},{"range":"5149","text":"5147"},{"range":"5150","text":"5078"},{"range":"5151","text":"5147"},{"range":"5152","text":"5078"},{"range":"5153","text":"5147"},"Update the dependencies array to be: [param]",{"range":"5154","text":"5155"},{"range":"5156","text":"5078"},{"range":"5157","text":"5147"},{"range":"5158","text":"5078"},{"range":"5159","text":"5147"},{"range":"5160","text":"5078"},{"range":"5161","text":"5147"},"Update the dependencies array to be: [curPerPage, currentPage]",{"range":"5162","text":"5163"},{"range":"5164","text":"5078"},{"range":"5165","text":"5147"},{"range":"5166","text":"5078"},{"range":"5167","text":"5147"},{"range":"5168","text":"5078"},{"range":"5169","text":"5147"},{"range":"5170","text":"5078"},{"range":"5171","text":"5147"},{"range":"5172","text":"5078"},{"range":"5173","text":"5147"},{"range":"5174","text":"5078"},{"range":"5175","text":"5147"},{"range":"5176","text":"5078"},{"range":"5177","text":"5147"},{"range":"5178","text":"5078"},{"range":"5179","text":"5147"},{"range":"5180","text":"5078"},{"range":"5181","text":"5147"},{"range":"5182","text":"5078"},{"range":"5183","text":"5147"},{"range":"5184","text":"5078"},{"range":"5185","text":"5147"},{"range":"5186","text":"5078"},{"range":"5187","text":"5147"},{"range":"5188","text":"5078"},{"range":"5189","text":"5147"},{"range":"5190","text":"5078"},{"range":"5191","text":"5147"},{"range":"5192","text":"5078"},{"range":"5193","text":"5147"},{"range":"5194","text":"5078"},{"range":"5195","text":"5147"},{"range":"5196","text":"5078"},{"range":"5197","text":"5147"},{"range":"5198","text":"5078"},{"range":"5199","text":"5147"},{"range":"5200","text":"5078"},{"range":"5201","text":"5147"},{"range":"5202","text":"5078"},{"range":"5203","text":"5147"},"Update the dependencies array to be: [DISMISS_DURATION]",{"range":"5204","text":"5205"},[3092,3094],"[updateOptions]",[24033,24034],[24033,24033],"\\",[24377,24378],[24377,24377],[24958,24959],[24958,24958],[25374,25375],[25374,25374],[1527,1529],"[param]",[2972,2973],[2972,2972],[4675,4676],[4675,4675],[4712,4713],[4712,4712],[1297,1299],"[curPerPage, currentPage]",[10289,10290],[10289,10289],[2140,2141],[2140,2140],[2146,2147],[2146,2146],[2148,2149],[2148,2148],[2168,2169],[2168,2168],[2170,2171],[2170,2170],[2185,2186],[2185,2185],[2191,2192],[2191,2191],[2193,2194],[2193,2193],[2212,2213],[2212,2212],[2214,2215],[2214,2214],[2226,2227],[2226,2226],[2230,2231],[2230,2230],[2232,2233],[2232,2232],[2250,2251],[2250,2250],[2252,2253],[2252,2252],[2259,2260],[2259,2259],[2273,2274],[2273,2273],[2275,2276],[2275,2275],[2277,2278],[2277,2277],[1156,1158],"[DISMISS_DURATION]"]