{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Fragment}from'react';import ReactDom from'react-dom';import{Utils}from'../../utils/utils';import{seafileAPI}from'../../utils/seafile-api';import{gettext}from'../../utils/constants';import Logo from'../../components/logo';import Account from'../../components/common/account';import FileUploader from'./file-uploader';import'../../css/upload-link.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var loggedUser=window.app.pageOptions.username;var _window$uploadLink=window.uploadLink,dirName=_window$uploadLink.dirName,sharedBy=_window$uploadLink.sharedBy,noQuota=_window$uploadLink.noQuota,maxUploadFileSize=_window$uploadLink.maxUploadFileSize,token=_window$uploadLink.token,repoID=_window$uploadLink.repoID,path=_window$uploadLink.path;var SharedUploadLink=/*#__PURE__*/function(_React$Component){_inherits(SharedUploadLink,_React$Component);var _super=_createSuper(SharedUploadLink);function SharedUploadLink(){var _this;_classCallCheck(this,SharedUploadLink);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.onFileUploadSuccess=function(direntObject){var name=direntObject.name;var isDir=direntObject.type==='dir';seafileAPI.shareLinksUploadDone(token,Utils.joinPath(path,name),isDir);};return _this;}_createClass(SharedUploadLink,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"h-100 d-flex flex-column\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"top-header d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(Logo,{}),loggedUser&&/*#__PURE__*/_jsx(Account,{})]}),/*#__PURE__*/_jsx(\"div\",{className:\"o-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"py-4 px-6 mx-auto rounded\",id:\"upload-link-panel\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"h5 d-flex text-nowrap\",dangerouslySetInnerHTML:{__html:gettext('Upload files to {folder_name_placeholder}').replace('{folder_name_placeholder}',\"<span class=\\\"op-target text-truncate mx-1\\\">\".concat(Utils.HTMLescape(dirName),\"</span>\"))}}),/*#__PURE__*/_jsx(\"p\",{className:\"small shared-by\",dangerouslySetInnerHTML:{__html:\"\".concat(gettext('shared by:'),\" \").concat(sharedBy.avatar,\" \").concat(sharedBy.name)}}),noQuota?/*#__PURE__*/_jsxs(\"div\",{className:\"py-6 text-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"sf3-font sf3-font-tips warning-icon\"}),/*#__PURE__*/_jsx(\"p\",{children:gettext('The owner of this library has run out of space.')})]}):/*#__PURE__*/_jsxs(Fragment,{children:[maxUploadFileSize&&/*#__PURE__*/_jsx(\"p\",{className:\"small text-gray m-0\",children:gettext('File size should be smaller than {max_size_placeholder}.').replace('{max_size_placeholder}',Utils.bytesToSize(maxUploadFileSize*1000*1000))}),/*#__PURE__*/_jsxs(\"div\",{id:\"upload-link-drop-zone\",className:\"text-center mt-2 mb-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"sf3-font sf3-font-upload upload-icon\"}),/*#__PURE__*/_jsx(\"p\",{className:\"small text-gray mb-0\",children:gettext('Drag and drop files or folders here.')})]}),/*#__PURE__*/_jsx(FileUploader,{ref:function ref(uploader){return _this2.uploader=uploader;},dragAndDrop:true,token:token,repoID:repoID,path:path,onFileUploadSuccess:this.onFileUploadSuccess})]})]})})]});}}]);return SharedUploadLink;}(React.Component);ReactDom.render(/*#__PURE__*/_jsx(SharedUploadLink,{}),document.getElementById('wrapper'));","map":{"version":3,"names":["React","Fragment","ReactDom","Utils","seafileAPI","gettext","Logo","Account","FileUploader","jsx","_jsx","jsxs","_jsxs","loggedUser","window","app","pageOptions","username","_window$uploadLink","uploadLink","dirName","sharedBy","noQuota","maxUploadFileSize","token","repoID","path","SharedUploadLink","_React$Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","onFileUploadSuccess","direntObject","name","isDir","type","shareLinksUploadDone","joinPath","_createClass","key","value","render","_this2","className","children","id","dangerouslySetInnerHTML","__html","replace","HTMLescape","avatar","bytesToSize","ref","uploader","dragAndDrop","Component","document","getElementById"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/upload-link/index.js"],"sourcesContent":["import React, { Fragment } from 'react';\nimport ReactDom from 'react-dom';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport Logo from '../../components/logo';\nimport Account from '../../components/common/account';\nimport FileUploader from './file-uploader';\n\nimport '../../css/upload-link.css';\n\nconst loggedUser = window.app.pageOptions.username;\nconst {\n  dirName,\n  sharedBy,\n  noQuota,\n  maxUploadFileSize,\n  token,\n  repoID,\n  path\n} = window.uploadLink;\n\n\nclass SharedUploadLink extends React.Component {\n\n  onFileUploadSuccess = (direntObject) => {\n    const { name } = direntObject;\n    const isDir = direntObject.type === 'dir';\n    seafileAPI.shareLinksUploadDone(token, Utils.joinPath(path, name), isDir);\n  };\n\n  render() {\n    return (\n      <div className=\"h-100 d-flex flex-column\">\n        <div className=\"top-header d-flex justify-content-between\">\n          <Logo />\n          {loggedUser && <Account />}\n        </div>\n        <div className=\"o-auto\">\n          <div className=\"py-4 px-6 mx-auto rounded\" id=\"upload-link-panel\">\n            <h3 className=\"h5 d-flex text-nowrap\" dangerouslySetInnerHTML={{__html: gettext('Upload files to {folder_name_placeholder}')\n              .replace('{folder_name_placeholder}', `<span class=\"op-target text-truncate mx-1\">${Utils.HTMLescape(dirName)}</span>`)}}></h3>\n            <p className=\"small shared-by\" dangerouslySetInnerHTML={{__html: `${gettext('shared by:')} ${sharedBy.avatar} ${sharedBy.name}`}}></p>\n            {noQuota ? (\n              <div className=\"py-6 text-center\">\n                <span className=\"sf3-font sf3-font-tips warning-icon\"></span>\n                <p>{gettext('The owner of this library has run out of space.')}</p>\n              </div>\n            ) : (\n              <Fragment>\n                {maxUploadFileSize && <p className=\"small text-gray m-0\">{gettext('File size should be smaller than {max_size_placeholder}.').replace('{max_size_placeholder}', Utils.bytesToSize(maxUploadFileSize * 1000 * 1000))}</p>}\n                <div id=\"upload-link-drop-zone\" className=\"text-center mt-2 mb-4\">\n                  <span className=\"sf3-font sf3-font-upload upload-icon\"></span>\n                  <p className=\"small text-gray mb-0\">{gettext('Drag and drop files or folders here.')}</p>\n                </div>\n                <FileUploader\n                  ref={uploader => this.uploader = uploader}\n                  dragAndDrop={true}\n                  token={token}\n                  repoID={repoID}\n                  path={path}\n                  onFileUploadSuccess={this.onFileUploadSuccess}\n                />\n              </Fragment>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nReactDom.render(<SharedUploadLink />, document.getElementById('wrapper'));\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}