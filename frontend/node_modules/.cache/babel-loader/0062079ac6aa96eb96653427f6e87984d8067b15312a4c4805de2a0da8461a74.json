{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{Button,Modal,ModalHeader,Input,ModalBody,ModalFooter,Form,FormGroup,Label,Alert}from'reactstrap';import{gettext}from'../../utils/constants';import{Utils,validateName}from'../../utils/utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreateForder=/*#__PURE__*/function(_React$Component){_inherits(CreateForder,_React$Component);var _super=_createSuper(CreateForder);function CreateForder(props){var _this;_classCallCheck(this,CreateForder);_this=_super.call(this,props);_this.handleChange=function(e){if(!e.target.value.trim()){_this.setState({isSubmitBtnActive:false});}else{_this.setState({isSubmitBtnActive:true});}_this.setState({childName:e.target.value});};_this.handleSubmit=function(){if(!_this.state.isSubmitBtnActive){return;}var isDuplicated=_this.checkDuplicatedName();var newName=_this.state.childName.trim();var _validateName=validateName(newName),isValid=_validateName.isValid,errMessage=_validateName.errMessage;if(!isValid){_this.setState({errMessage:errMessage});return;}if(isDuplicated){var _errMessage=gettext('The name \"{name}\" is already taken. Please choose a different name.');_errMessage=_errMessage.replace('{name}',Utils.HTMLescape(newName));_this.setState({errMessage:_errMessage});}else{var path=_this.state.parentPath+newName;_this.props.onAddFolder(path);}};_this.handleKeyDown=function(e){if(e.key==='Enter'){_this.handleSubmit();e.preventDefault();}};_this.toggle=function(){_this.props.addFolderCancel();};_this.checkDuplicatedName=function(){var isDuplicated=_this.props.checkDuplicatedName(_this.state.childName);return isDuplicated;};_this.state={parentPath:'',childName:'',errMessage:'',isSubmitBtnActive:false};return _this;}_createClass(CreateForder,[{key:\"componentDidMount\",value:function componentDidMount(){var parentPath=this.props.parentPath;if(parentPath[parentPath.length-1]==='/'){// mainPanel\nthis.setState({parentPath:parentPath});}else{this.setState({parentPath:parentPath+'/'});// sidePanel\n}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(Modal,{isOpen:true,toggle:this.toggle,autoFocus:false,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:this.toggle,children:gettext('New Folder')}),/*#__PURE__*/_jsxs(ModalBody,{children:[/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"folderName\",children:gettext('Name')}),/*#__PURE__*/_jsx(Input,{id:\"folderName\",value:this.state.childName,onKeyDown:this.handleKeyDown,onChange:this.handleChange,autoFocus:true})]})}),this.state.errMessage&&/*#__PURE__*/_jsx(Alert,{color:\"danger\",className:\"mt-2\",children:this.state.errMessage})]}),/*#__PURE__*/_jsxs(ModalFooter,{children:[/*#__PURE__*/_jsx(Button,{color:\"secondary\",onClick:this.toggle,children:gettext('Cancel')}),/*#__PURE__*/_jsx(Button,{color:\"primary\",onClick:this.handleSubmit,disabled:!this.state.isSubmitBtnActive,children:gettext('Submit')})]})]});}}]);return CreateForder;}(React.Component);export default CreateForder;","map":{"version":3,"names":["React","Button","Modal","ModalHeader","Input","ModalBody","ModalFooter","Form","FormGroup","Label","Alert","gettext","Utils","validateName","jsx","_jsx","jsxs","_jsxs","CreateForder","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","handleChange","e","target","value","trim","setState","isSubmitBtnActive","childName","handleSubmit","state","isDuplicated","checkDuplicatedName","newName","_validateName","isValid","errMessage","replace","HTMLescape","path","parentPath","onAddFolder","handleKeyDown","key","preventDefault","toggle","addFolderCancel","_createClass","componentDidMount","length","render","isOpen","autoFocus","children","for","id","onKeyDown","onChange","color","className","onClick","disabled","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/create-folder-dialog.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils, validateName } from '../../utils/utils';\n\nconst propTypes = {\n  fileType: PropTypes.string,\n  parentPath: PropTypes.string.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  addFolderCancel: PropTypes.func.isRequired,\n};\n\nclass CreateForder extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parentPath: '',\n      childName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  componentDidMount() {\n    let parentPath = this.props.parentPath;\n    if (parentPath[parentPath.length - 1] === '/') {  // mainPanel\n      this.setState({parentPath: parentPath});\n    } else {\n      this.setState({parentPath: parentPath + '/'}); // sidePanel\n    }\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({childName: e.target.value});\n  };\n\n  handleSubmit = () => {\n    if (!this.state.isSubmitBtnActive) {\n      return;\n    }\n    let isDuplicated = this.checkDuplicatedName();\n    let newName = this.state.childName.trim();\n    let { isValid, errMessage } = validateName(newName);\n    if (!isValid) {\n      this.setState({ errMessage });\n      return;\n    }\n\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      this.setState({errMessage: errMessage});\n    } else {\n      let path = this.state.parentPath + newName;\n      this.props.onAddFolder(path);\n    }\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  };\n\n  toggle = () => {\n    this.props.addFolderCancel();\n  };\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.childName);\n    return isDuplicated;\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Folder')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"folderName\">{gettext('Name')}</Label>\n              <Input\n                id=\"folderName\"\n                value={this.state.childName}\n                onKeyDown={this.handleKeyDown}\n                onChange={this.handleChange}\n                autoFocus={true}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateForder.propTypes = propTypes;\n\nexport default CreateForder;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}