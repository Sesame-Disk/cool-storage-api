{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{Modal,ModalBody,Form}from'reactstrap';import{gettext,siteRoot,mediaUrl}from'../../utils/constants';import{seafileAPI}from'../../utils/seafile-api';import'../../css/lib-decrypt.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LibDecryptDialog=/*#__PURE__*/function(_React$Component){_inherits(LibDecryptDialog,_React$Component);var _super=_createSuper(LibDecryptDialog);function LibDecryptDialog(props){var _this;_classCallCheck(this,LibDecryptDialog);_this=_super.call(this,props);_this.handleSubmit=function(e){var repoID=_this.props.repoID;var password=_this.state.password;seafileAPI.setRepoDecryptPassword(repoID,password).then(function(res){_this.props.onLibDecryptDialog();}).catch(function(res){_this.setState({showError:true});});e.preventDefault();};_this.handleKeyDown=function(e){if(e.key=='Enter'){_this.handleSubmit(e);}};_this.handleChange=function(e){_this.setState({password:e.target.value,showError:false});};_this.toggle=function(){window.location.href=siteRoot;};_this.state={password:'',showError:false};return _this;}_createClass(LibDecryptDialog,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(Modal,{isOpen:true,toggle:this.toggle,children:/*#__PURE__*/_jsxs(ModalBody,{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"close\",onClick:this.toggle,children:/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\"\\xD7\"})}),/*#__PURE__*/_jsxs(Form,{className:\"lib-decrypt-form text-center\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(mediaUrl,\"img/lock.png\"),alt:\"\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"p\",{className:\"intro\",children:gettext('This library is password protected')}),this.state.showError&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:gettext('Wrong password')}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",className:\"form-control password-input\",autoComplete:\"off\",onKeyDown:this.handleKeyDown,placeholder:gettext('Password'),onChange:this.handleChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary submit\",onClick:this.handleSubmit,children:gettext('Submit')}),/*#__PURE__*/_jsxs(\"p\",{className:\"tip\",children:['* ',gettext('The password will be kept in the server for only 1 hour.')]})]})]})});}}]);return LibDecryptDialog;}(React.Component);export default LibDecryptDialog;","map":{"version":3,"names":["React","Modal","ModalBody","Form","gettext","siteRoot","mediaUrl","seafileAPI","jsx","_jsx","jsxs","_jsxs","LibDecryptDialog","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","handleSubmit","e","repoID","password","state","setRepoDecryptPassword","then","res","onLibDecryptDialog","catch","setState","showError","preventDefault","handleKeyDown","key","handleChange","target","value","toggle","window","location","href","_createClass","render","isOpen","children","type","className","onClick","src","concat","alt","name","autoComplete","onKeyDown","placeholder","onChange","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/lib-decrypt-dialog.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody, Form } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nimport '../../css/lib-decrypt.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  onLibDecryptDialog: PropTypes.func.isRequired\n};\n\n\nclass LibDecryptDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      password: '',\n      showError: false,\n    };\n  }\n\n  handleSubmit = (e) => {\n    let repoID = this.props.repoID;\n    let password = this.state.password;\n    seafileAPI.setRepoDecryptPassword(repoID, password).then(res => {\n      this.props.onLibDecryptDialog();\n    }).catch(res => {\n      this.setState({\n        showError: true\n      });\n    });\n\n    e.preventDefault();\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit(e);\n    }\n  };\n\n  handleChange = (e) => {\n    this.setState({\n      password: e.target.value,\n      showError: false\n    });\n  };\n\n  toggle = () => {\n    window.location.href = siteRoot;\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalBody>\n          <button type=\"button\" className=\"close\" onClick={this.toggle}><span aria-hidden=\"true\">Ã—</span></button>\n          <Form className=\"lib-decrypt-form text-center\">\n            <img src={`${mediaUrl}img/lock.png`} alt=\"\" aria-hidden=\"true\" />\n            <p className=\"intro\">{gettext('This library is password protected')}</p>\n            {this.state.showError &&\n              <p className=\"error\">{gettext('Wrong password')}</p>\n            }\n            <input type=\"password\" name=\"password\" className=\"form-control password-input\" autoComplete=\"off\" onKeyDown={this.handleKeyDown} placeholder={gettext('Password')} onChange={this.handleChange} />\n            <button type=\"submit\" className=\"btn btn-primary submit\" onClick={this.handleSubmit}>{gettext('Submit')}</button>\n            <p className=\"tip\">{'* '}{gettext('The password will be kept in the server for only 1 hour.')}</p>\n          </Form>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nLibDecryptDialog.propTypes = propTypes;\n\nexport default LibDecryptDialog;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}