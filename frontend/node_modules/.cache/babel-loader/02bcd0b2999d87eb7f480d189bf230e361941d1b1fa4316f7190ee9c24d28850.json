{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var TreeNode=/*#__PURE__*/function(){function TreeNode(_ref){var path=_ref.path,object=_ref.object,isLoaded=_ref.isLoaded,isPreload=_ref.isPreload,isExpanded=_ref.isExpanded,parentNode=_ref.parentNode;_classCallCheck(this,TreeNode);this.path=path||object.name;// The default setting is the object name, which is set to a relative path when the father is set.\nthis.object=object;this.isLoaded=isLoaded||false;this.isPreload=isPreload||false;this.isExpanded=isExpanded||false;this.children=[];this.parentNode=parentNode||null;}_createClass(TreeNode,[{key:\"clone\",value:function clone(parentNode){var treeNode=new TreeNode({path:this.path,object:this.object.clone(),isLoaded:this.isLoaded,isPreload:this.isPreload,isExpanded:this.isExpanded,parentNode:parentNode||null});treeNode.children=this.children.map(function(child){var newChild=child.clone(treeNode);return newChild;});return treeNode;}},{key:\"setParent\",value:function setParent(parentNode){this.path=this.generatePath(parentNode);this.parentNode=parentNode;this.isLoaded=false;// update parentNode need loaded data again;\n}},{key:\"hasChildren\",value:function hasChildren(){return this.children.length!==0;}},{key:\"addChild\",value:function addChild(node){node.setParent(this);var children=this.children;if(node.object.isDir()){this.children.unshift(node);}else{var index=-1;for(var i=0;i<children.length;i++){if(!children[i].object.isDir()){index=i;break;}}if(index===-1){// -1: all the node object is dir;\nthis.children.push(node);}else if(index===0){// 0: all the node object is file\nthis.children.unshift(node);}else{this.children.splice(index,0,node);}}}},{key:\"addChildren\",value:function addChildren(nodeList){var _this=this;nodeList.forEach(function(node){node.setParent(_this);});this.children=nodeList;}},{key:\"deleteChild\",value:function deleteChild(node){var children=this.children.filter(function(item){return item!==node;});this.children=children;}},{key:\"rename\",value:function rename(newName){this.object.name=newName;this.path=this.generatePath(this.parentNode);if(this.isExpanded){this.updateChildrenPath(this);}else{this.isLoaded=false;}}},{key:\"updateChildrenPath\",value:function updateChildrenPath(node){var children=node.children;children.forEach(function(child){child.path=child.generatePath(child.parentNode);if(child.isExpanded){child.updateChildrenPath(child);}else{child.isLoaded=false;}});}},{key:\"updateObjectProperties\",value:function updateObjectProperties(keys,newValues){var _this2=this;if(Array.isArray(keys)&&Array.isArray(newValues)){keys.forEach(function(key,index){_this2.object[key]=newValues[index];});}else{this.object[keys]=newValues;}}},{key:\"generatePath\",value:function generatePath(parentNode){return parentNode.path==='/'?parentNode.path+this.object.name:parentNode.path+'/'+this.object.name;}},{key:\"serializeToJson\",value:function serializeToJson(){var children=[];if(this.hasChildren){children=this.children.map(function(m){return m.serializeToJson();});}var treeNode={path:this.path,object:this.object.clone(),isLoaded:this.isLoaded,isPreload:this.isPreload,isExpanded:this.isExpanded,parentNode:this.parentNode,children:children};return treeNode;}}],[{key:\"deserializefromJson\",value:function deserializefromJson(json){var path=json.path,object=json.object,isLoaded=json.isLoaded,isPreload=json.isPreload,isExpanded=json.isExpanded,parentNode=json.parentNode,_json$children=json.children,children=_json$children===void 0?[]:_json$children;object=object.clone();var treeNode=new TreeNode({path:path,object:object,isLoaded:isLoaded,isPreload:isPreload,isExpanded:isExpanded,parentNode:parentNode,children:children.map(function(item){return TreeNode.deserializefromJson(item);})});return treeNode;}}]);return TreeNode;}();export default TreeNode;","map":{"version":3,"names":["TreeNode","_ref","path","object","isLoaded","isPreload","isExpanded","parentNode","_classCallCheck","name","children","_createClass","key","value","clone","treeNode","map","child","newChild","setParent","generatePath","hasChildren","length","addChild","node","isDir","unshift","index","i","push","splice","addChildren","nodeList","_this","forEach","deleteChild","filter","item","rename","newName","updateChildrenPath","updateObjectProperties","keys","newValues","_this2","Array","isArray","serializeToJson","m","deserializefromJson","json","_json$children"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/tree-view/tree-node.js"],"sourcesContent":["class TreeNode {\n\n  constructor({ path, object, isLoaded, isPreload, isExpanded, parentNode }) {\n    this.path = path || object.name;  // The default setting is the object name, which is set to a relative path when the father is set.\n    this.object = object;\n    this.isLoaded = isLoaded || false;\n    this.isPreload = isPreload || false;\n    this.isExpanded = isExpanded || false;\n    this.children = [];\n    this.parentNode = parentNode || null;\n  }\n\n  clone(parentNode) {\n    let treeNode = new TreeNode({\n      path: this.path,\n      object: this.object.clone(),\n      isLoaded: this.isLoaded,\n      isPreload: this.isPreload,\n      isExpanded: this.isExpanded,\n      parentNode: parentNode || null,\n    });\n    treeNode.children = this.children.map(child => {\n      let newChild = child.clone(treeNode);\n      return newChild;\n    });\n\n    return treeNode;\n  }\n\n  setParent(parentNode) {\n    this.path = this.generatePath(parentNode);\n    this.parentNode = parentNode;\n    this.isLoaded = false;  // update parentNode need loaded data again;\n  }\n\n  hasChildren() {\n    return this.children.length !== 0;\n  }\n\n  addChild(node) {\n    node.setParent(this);\n    let children = this.children;\n    if (node.object.isDir()) {\n      this.children.unshift(node);\n    } else {\n      let index = -1;\n      for (let i = 0; i < children.length; i++) {\n        if (!children[i].object.isDir()) {\n          index = i;\n          break;\n        }\n      }\n      if (index === -1) { // -1: all the node object is dir;\n        this.children.push(node);\n      } else if (index === 0) { // 0: all the node object is file\n        this.children.unshift(node);\n      } else {\n        this.children.splice(index, 0, node);\n      }\n    }\n  }\n\n  addChildren(nodeList) {\n    nodeList.forEach(node => {\n      node.setParent(this);\n    });\n    this.children = nodeList;\n  }\n\n  deleteChild(node) {\n    let children = this.children.filter(item => {\n      return item !== node;\n    });\n    this.children = children;\n  }\n\n  rename(newName) {\n    this.object.name = newName;\n    this.path = this.generatePath(this.parentNode);\n    if (this.isExpanded) {\n      this.updateChildrenPath(this);\n    } else {\n      this.isLoaded = false;\n    }\n  }\n\n  updateChildrenPath(node) {\n    let children = node.children;\n    children.forEach(child => {\n      child.path = child.generatePath(child.parentNode);\n      if (child.isExpanded) {\n        child.updateChildrenPath(child);\n      } else {\n        child.isLoaded = false;\n      }\n    });\n  }\n\n  updateObjectProperties(keys, newValues) {\n    if (Array.isArray(keys) && Array.isArray(newValues)) {\n      keys.forEach((key, index) => {\n        this.object[key] = newValues[index];\n      });\n    } else {\n      this.object[keys] = newValues;\n    }\n  }\n\n  generatePath(parentNode) {\n    return parentNode.path === '/' ? parentNode.path + this.object.name : parentNode.path + '/' + this.object.name;\n  }\n\n  serializeToJson() {\n    let children = [];\n    if (this.hasChildren) {\n      children = this.children.map(m => m.serializeToJson());\n    }\n\n    const treeNode = {\n      path: this.path,\n      object: this.object.clone(),\n      isLoaded: this.isLoaded,\n      isPreload: this.isPreload,\n      isExpanded: this.isExpanded,\n      parentNode: this.parentNode,\n      children: children,\n    };\n\n    return treeNode;\n  }\n\n  static deserializefromJson(json) {\n    let { path, object, isLoaded, isPreload, isExpanded, parentNode, children = [] } = json;\n    object = object.clone();\n\n    const treeNode = new TreeNode({\n      path,\n      object,\n      isLoaded,\n      isPreload,\n      isExpanded,\n      parentNode,\n      children: children.map(item => TreeNode.deserializefromJson(item))\n    });\n    return treeNode;\n  }\n}\n\nexport default TreeNode;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}