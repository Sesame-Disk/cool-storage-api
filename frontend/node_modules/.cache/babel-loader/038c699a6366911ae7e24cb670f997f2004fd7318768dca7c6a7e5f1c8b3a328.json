{"ast":null,"code":"\"use strict\";\n\nvar _objectSpread = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/objectSpread2.js\").default;\nvar _slicedToArray = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nvar _objectWithoutProperties = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/objectWithoutProperties.js\").default;\nvar _excluded = [\"isInline\", \"isFetching\", \"value\", \"editorApi\", \"mathJaxSource\", \"onSave\", \"onContentChanged\"];\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _loading = _interopRequireDefault(require(\"../containers/loading\"));\nvar _slateConvert = require(\"../slate-convert\");\nvar _useMathjax = _interopRequireDefault(require(\"../hooks/use-mathjax\"));\nvar _simpleSlateEditor = _interopRequireDefault(require(\"../editors/simple-slate-editor\"));\nvar _inlineEditor = _interopRequireDefault(require(\"../editors/inline-editor\"));\nvar SimpleEditor = /*#__PURE__*/(0, _react.forwardRef)(function (_ref, ref) {\n  var isInline = _ref.isInline,\n    isFetching = _ref.isFetching,\n    value = _ref.value,\n    editorApi = _ref.editorApi,\n    mathJaxSource = _ref.mathJaxSource,\n    propsOnSave = _ref.onSave,\n    propsOnContentChanged = _ref.onContentChanged,\n    otherProps = _objectWithoutProperties(_ref, _excluded);\n  var _ref2 = (0, _react.useState)([]),\n    _ref3 = _slicedToArray(_ref2, 2),\n    richValue = _ref3[0],\n    setRichValue = _ref3[1];\n  var _ref4 = (0, _react.useState)(true),\n    _ref5 = _slicedToArray(_ref4, 2),\n    isLoading = _ref5[0],\n    setIsLoading = _ref5[1];\n  var _ref6 = (0, _useMathjax.default)(mathJaxSource),\n    isLoadingMathJax = _ref6.isLoadingMathJax;\n  (0, _react.useImperativeHandle)(ref, function () {\n    return {\n      getValue: function getValue() {\n        var mdStringValue = (0, _slateConvert.slateToMdString)(richValue);\n        return mdStringValue;\n      },\n      getSlateValue: function getSlateValue() {\n        return richValue;\n      }\n    };\n  }, [richValue]);\n  (0, _react.useEffect)(function () {\n    if (!isFetching) {\n      var _richValue = (0, _slateConvert.mdStringToSlate)(value);\n      setRichValue(_richValue);\n      setIsLoading(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isFetching]);\n  var onContentChanged = (0, _react.useCallback)(function (content) {\n    setRichValue(content);\n    propsOnContentChanged && propsOnContentChanged();\n  }, [propsOnContentChanged]);\n  var props = _objectSpread({\n    isSupportFormula: !!mathJaxSource,\n    value: richValue,\n    editorApi: editorApi,\n    onSave: propsOnSave,\n    onContentChanged: onContentChanged\n  }, otherProps);\n  if (isFetching || isLoading || isLoadingMathJax) {\n    return /*#__PURE__*/_react.default.createElement(_loading.default, null);\n  }\n  if (isInline) {\n    return /*#__PURE__*/_react.default.createElement(_inlineEditor.default, props);\n  }\n  return /*#__PURE__*/_react.default.createElement(_simpleSlateEditor.default, props);\n});\nvar _default = exports.default = SimpleEditor;","map":{"version":3,"names":["_objectSpread","require","default","_slicedToArray","_objectWithoutProperties","_excluded","_interopRequireDefault","_interopRequireWildcard","Object","defineProperty","exports","value","_react","_loading","_slateConvert","_useMathjax","_simpleSlateEditor","_inlineEditor","SimpleEditor","forwardRef","_ref","ref","isInline","isFetching","editorApi","mathJaxSource","propsOnSave","onSave","propsOnContentChanged","onContentChanged","otherProps","_ref2","useState","_ref3","richValue","setRichValue","_ref4","_ref5","isLoading","setIsLoading","_ref6","isLoadingMathJax","useImperativeHandle","getValue","mdStringValue","slateToMdString","getSlateValue","useEffect","mdStringToSlate","useCallback","content","props","isSupportFormula","createElement","_default"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/pages/simple-editor.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _loading = _interopRequireDefault(require(\"../containers/loading\"));\nvar _slateConvert = require(\"../slate-convert\");\nvar _useMathjax = _interopRequireDefault(require(\"../hooks/use-mathjax\"));\nvar _simpleSlateEditor = _interopRequireDefault(require(\"../editors/simple-slate-editor\"));\nvar _inlineEditor = _interopRequireDefault(require(\"../editors/inline-editor\"));\nconst SimpleEditor = /*#__PURE__*/(0, _react.forwardRef)((_ref, ref) => {\n  let {\n    isInline,\n    isFetching,\n    value,\n    editorApi,\n    mathJaxSource,\n    onSave: propsOnSave,\n    onContentChanged: propsOnContentChanged,\n    ...otherProps\n  } = _ref;\n  const [richValue, setRichValue] = (0, _react.useState)([]);\n  const [isLoading, setIsLoading] = (0, _react.useState)(true);\n  const {\n    isLoadingMathJax\n  } = (0, _useMathjax.default)(mathJaxSource);\n  (0, _react.useImperativeHandle)(ref, () => {\n    return {\n      getValue: () => {\n        const mdStringValue = (0, _slateConvert.slateToMdString)(richValue);\n        return mdStringValue;\n      },\n      getSlateValue: () => {\n        return richValue;\n      }\n    };\n  }, [richValue]);\n  (0, _react.useEffect)(() => {\n    if (!isFetching) {\n      const richValue = (0, _slateConvert.mdStringToSlate)(value);\n      setRichValue(richValue);\n      setIsLoading(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isFetching]);\n  const onContentChanged = (0, _react.useCallback)(content => {\n    setRichValue(content);\n    propsOnContentChanged && propsOnContentChanged();\n  }, [propsOnContentChanged]);\n  const props = {\n    isSupportFormula: !!mathJaxSource,\n    value: richValue,\n    editorApi: editorApi,\n    onSave: propsOnSave,\n    onContentChanged: onContentChanged,\n    ...otherProps\n  };\n  if (isFetching || isLoading || isLoadingMathJax) {\n    return /*#__PURE__*/_react.default.createElement(_loading.default, null);\n  }\n  if (isInline) {\n    return /*#__PURE__*/_react.default.createElement(_inlineEditor.default, props);\n  }\n  return /*#__PURE__*/_react.default.createElement(_simpleSlateEditor.default, props);\n});\nvar _default = exports.default = SimpleEditor;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}