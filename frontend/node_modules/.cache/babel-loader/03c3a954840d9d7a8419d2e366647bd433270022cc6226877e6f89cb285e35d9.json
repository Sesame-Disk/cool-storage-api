{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Fragment}from'react';import{Link}from'@gatsbyjs/reach-router';import{UncontrolledTooltip}from'reactstrap';import{siteRoot,gettext}from'../../utils/constants';import{Utils}from'../../utils/utils';import{InternalLinkOperation}from'../operations';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DirPath=/*#__PURE__*/function(_React$Component){_inherits(DirPath,_React$Component);var _super=_createSuper(DirPath);function DirPath(){var _this;_classCallCheck(this,DirPath);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.onPathClick=function(e){var path=Utils.getEventData(e,'path');_this.props.onPathClick(path);};_this.onTabNavClick=function(e,tabName,id){if(window.uploader&&window.uploader.isUploadProgressDialogShow&&window.uploader.totalProgress!==100){if(!window.confirm(gettext('A file is being uploaded. Are you sure you want to leave this page?'))){e.preventDefault();return false;}window.uploader.isUploadProgressDialogShow=false;}_this.props.onTabNavClick(tabName,id);};_this.turnPathToLink=function(path){path=path[path.length-1]==='/'?path.slice(0,path.length-1):path;var pathList=path.split('/');var nodePath='';var pathElem=pathList.map(function(item,index){if(item===''){return null;}if(index===pathList.length-1){return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"path-split\",children:\"/\"}),/*#__PURE__*/_jsx(\"span\",{className:\"path-file-name\",children:item})]},index);}else{nodePath+='/'+item;return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"path-split\",children:\"/\"}),/*#__PURE__*/_jsx(\"a\",{className:\"path-link\",\"data-path\":nodePath,onClick:_this.onPathClick,children:item})]},index);}});return pathElem;};return _this;}_createClass(DirPath,[{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,currentPath=_this$props.currentPath,repoName=_this$props.repoName,fileTags=_this$props.fileTags;var pathElem=this.turnPathToLink(currentPath);var tagTitle='';if(fileTags.length>0){fileTags.forEach(function(item){tagTitle+=item.name+' ';});}return/*#__PURE__*/_jsxs(\"div\",{className:\"path-container\",children:[this.props.pathPrefix&&this.props.pathPrefix.map(function(item,index){return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:item.url,className:\"normal\",onClick:function onClick(e){return _this2.onTabNavClick(e,item.name,item.id);},children:gettext(item.showName)}),/*#__PURE__*/_jsx(\"span\",{className:\"path-split\",children:\"/\"})]},index);}),this.props.pathPrefix&&this.props.pathPrefix.length===0&&/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:siteRoot+'my-libs/',className:\"normal\",onClick:function onClick(e){return _this2.onTabNavClick(e,'my-libs');},children:gettext('Libraries')}),/*#__PURE__*/_jsx(\"span\",{className:\"path-split\",children:\"/\"})]}),!this.props.pathPrefix&&/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Link,{href:siteRoot+'my-libs/',className:\"normal\",onClick:function onClick(e){return _this2.onTabNavClick(e,'my-libs');},children:gettext('Libraries')}),/*#__PURE__*/_jsx(\"span\",{className:\"path-split\",children:\"/\"})]}),currentPath==='/'||currentPath===''?/*#__PURE__*/_jsx(\"span\",{className:\"path-repo-name\",children:repoName}):/*#__PURE__*/_jsx(\"a\",{className:\"path-link\",\"data-path\":\"/\",onClick:this.onPathClick,children:repoName}),pathElem,this.props.isViewFile&&/*#__PURE__*/_jsx(InternalLinkOperation,{repoID:this.props.repoID,path:this.props.currentPath}),this.props.isViewFile&&fileTags.length!==0&&/*#__PURE__*/_jsxs(\"span\",{id:\"column-mode-file-tags\",className:\"tag-list tag-list-stacked align-middle ml-1 d-flex align-items-center\",children:[fileTags.map(function(fileTag,index){return/*#__PURE__*/_jsx(\"span\",{className:\"file-tag\",style:{zIndex:index,backgroundColor:fileTag.color}},fileTag.id);}),/*#__PURE__*/_jsx(UncontrolledTooltip,{target:\"column-mode-file-tags\",placement:\"bottom\",children:tagTitle})]})]});}}]);return DirPath;}(React.Component);export default DirPath;","map":{"version":3,"names":["React","Fragment","Link","UncontrolledTooltip","siteRoot","gettext","Utils","InternalLinkOperation","jsx","_jsx","jsxs","_jsxs","DirPath","_React$Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","onPathClick","e","path","getEventData","props","onTabNavClick","tabName","id","window","uploader","isUploadProgressDialogShow","totalProgress","confirm","preventDefault","turnPathToLink","slice","pathList","split","nodePath","pathElem","map","item","index","children","className","onClick","_createClass","key","value","render","_this2","_this$props","currentPath","repoName","fileTags","tagTitle","forEach","name","pathPrefix","to","url","showName","href","isViewFile","repoID","fileTag","style","zIndex","backgroundColor","color","target","placement","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/cur-dir-path/dir-path.js"],"sourcesContent":["import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { InternalLinkOperation } from '../operations';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func,\n  pathPrefix: PropTypes.array,\n  repoID: PropTypes.string.isRequired,\n  isViewFile: PropTypes.bool,\n  fileTags: PropTypes.array.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  };\n\n  onTabNavClick = (e, tabName, id) => {\n    if (window.uploader &&\n      window.uploader.isUploadProgressDialogShow &&\n      window.uploader.totalProgress !== 100) {\n      if (!window.confirm(gettext('A file is being uploaded. Are you sure you want to leave this page?'))) {\n        e.preventDefault();\n        return false;\n      }\n      window.uploader.isUploadProgressDialogShow = false;\n    }\n    this.props.onTabNavClick(tabName, id);\n  };\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return null;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  };\n\n  render() {\n    let { currentPath, repoName, fileTags } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    let tagTitle = '';\n    if (fileTags.length > 0) {\n      fileTags.forEach(item => {\n        tagTitle += item.name + ' ';\n      });\n    }\n\n    return (\n      <div className=\"path-container\">\n        {this.props.pathPrefix && this.props.pathPrefix.map((item, index) => {\n          return (\n            <Fragment key={index}>\n              <Link to={item.url} className=\"normal\" onClick={(e) => this.onTabNavClick(e, item.name, item.id)}>{gettext(item.showName)}</Link>\n              <span className=\"path-split\">/</span>\n            </Fragment>\n          );\n        })}\n        {this.props.pathPrefix && this.props.pathPrefix.length === 0 && (\n          <Fragment>\n            <Link to={siteRoot + 'my-libs/'} className=\"normal\" onClick={(e) => this.onTabNavClick(e, 'my-libs')}>{gettext('Libraries')}</Link>\n            <span className=\"path-split\">/</span>\n          </Fragment>\n        )}\n        {!this.props.pathPrefix && (\n          <Fragment>\n            <Link href={siteRoot + 'my-libs/'} className=\"normal\" onClick={(e) => this.onTabNavClick(e, 'my-libs')}>{gettext('Libraries')}</Link>\n            <span className=\"path-split\">/</span>\n          </Fragment>\n        )}\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n        {this.props.isViewFile && (\n          <InternalLinkOperation repoID={this.props.repoID} path={this.props.currentPath}/>\n        )}\n        {(this.props.isViewFile && fileTags.length !== 0) &&\n          <span id='column-mode-file-tags' className=\"tag-list tag-list-stacked align-middle ml-1 d-flex align-items-center\">\n            {fileTags.map((fileTag, index) => {\n              return (<span className=\"file-tag\" key={fileTag.id} style={{zIndex: index, backgroundColor: fileTag.color}}></span>);\n            })}\n            <UncontrolledTooltip target=\"column-mode-file-tags\" placement=\"bottom\">\n              {tagTitle}\n            </UncontrolledTooltip>\n          </span>\n        }\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}