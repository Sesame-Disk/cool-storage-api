{"ast":null,"code":"import { decorateOperation, replacePastedDataId } from './helpers';\nimport { getSlateFragmentAttribute, normalizeCopyNodes } from '../utils/document-utils';\nimport { CLIPBOARD_FORMAT_KEY } from '../extension/constants';\nvar withNodeId = function withNodeId(editor) {\n  var apply = editor.apply;\n  var newEditor = editor;\n  newEditor.apply = function (op) {\n    var newOp = decorateOperation(newEditor, op);\n    apply(newOp);\n  };\n\n  // rewrite insert fragment data\n  newEditor.insertFragmentData = function (data) {\n    var fragment = data.getData(\"application/\".concat(CLIPBOARD_FORMAT_KEY)) || getSlateFragmentAttribute(data);\n    if (fragment) {\n      var decoded = decodeURIComponent(window.atob(fragment));\n      var parsed = JSON.parse(decoded);\n      var newData = replacePastedDataId(parsed);\n      var normalizeNewData = normalizeCopyNodes(newEditor, newData);\n      newEditor.insertFragment(normalizeNewData);\n      return newEditor;\n    }\n  };\n  return newEditor;\n};\nexport default withNodeId;","map":{"version":3,"names":["decorateOperation","replacePastedDataId","getSlateFragmentAttribute","normalizeCopyNodes","CLIPBOARD_FORMAT_KEY","withNodeId","editor","apply","newEditor","op","newOp","insertFragmentData","data","fragment","getData","concat","decoded","decodeURIComponent","window","atob","parsed","JSON","parse","newData","normalizeNewData","insertFragment"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/node-id/index.js"],"sourcesContent":["import { decorateOperation, replacePastedDataId } from './helpers';\nimport { getSlateFragmentAttribute, normalizeCopyNodes } from '../utils/document-utils';\nimport { CLIPBOARD_FORMAT_KEY } from '../extension/constants';\nconst withNodeId = editor => {\n  const {\n    apply\n  } = editor;\n  const newEditor = editor;\n  newEditor.apply = op => {\n    const newOp = decorateOperation(newEditor, op);\n    apply(newOp);\n  };\n\n  // rewrite insert fragment data\n  newEditor.insertFragmentData = data => {\n    const fragment = data.getData(\"application/\".concat(CLIPBOARD_FORMAT_KEY)) || getSlateFragmentAttribute(data);\n    if (fragment) {\n      const decoded = decodeURIComponent(window.atob(fragment));\n      const parsed = JSON.parse(decoded);\n      const newData = replacePastedDataId(parsed);\n      const normalizeNewData = normalizeCopyNodes(newEditor, newData);\n      newEditor.insertFragment(normalizeNewData);\n      return newEditor;\n    }\n  };\n  return newEditor;\n};\nexport default withNodeId;"],"mappings":"AAAA,SAASA,iBAAiB,EAAEC,mBAAmB,QAAQ,WAAW;AAClE,SAASC,yBAAyB,EAAEC,kBAAkB,QAAQ,yBAAyB;AACvF,SAASC,oBAAoB,QAAQ,wBAAwB;AAC7D,IAAMC,UAAU,GAAG,SAAbA,UAAUA,CAAGC,MAAM,EAAI;EAC3B,IACEC,KAAK,GACHD,MAAM,CADRC,KAAK;EAEP,IAAMC,SAAS,GAAGF,MAAM;EACxBE,SAAS,CAACD,KAAK,GAAG,UAAAE,EAAE,EAAI;IACtB,IAAMC,KAAK,GAAGV,iBAAiB,CAACQ,SAAS,EAAEC,EAAE,CAAC;IAC9CF,KAAK,CAACG,KAAK,CAAC;EACd,CAAC;;EAED;EACAF,SAAS,CAACG,kBAAkB,GAAG,UAAAC,IAAI,EAAI;IACrC,IAAMC,QAAQ,GAAGD,IAAI,CAACE,OAAO,CAAC,cAAc,CAACC,MAAM,CAACX,oBAAoB,CAAC,CAAC,IAAIF,yBAAyB,CAACU,IAAI,CAAC;IAC7G,IAAIC,QAAQ,EAAE;MACZ,IAAMG,OAAO,GAAGC,kBAAkB,CAACC,MAAM,CAACC,IAAI,CAACN,QAAQ,CAAC,CAAC;MACzD,IAAMO,MAAM,GAAGC,IAAI,CAACC,KAAK,CAACN,OAAO,CAAC;MAClC,IAAMO,OAAO,GAAGtB,mBAAmB,CAACmB,MAAM,CAAC;MAC3C,IAAMI,gBAAgB,GAAGrB,kBAAkB,CAACK,SAAS,EAAEe,OAAO,CAAC;MAC/Df,SAAS,CAACiB,cAAc,CAACD,gBAAgB,CAAC;MAC1C,OAAOhB,SAAS;IAClB;EACF,CAAC;EACD,OAAOA,SAAS;AAClB,CAAC;AACD,eAAeH,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}