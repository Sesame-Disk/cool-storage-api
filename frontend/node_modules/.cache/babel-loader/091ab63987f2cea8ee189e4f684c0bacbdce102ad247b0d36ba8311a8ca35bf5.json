{"ast":null,"code":"\"use strict\";\n\nvar _createForOfIteratorHelper = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\").default;\nvar _objectSpread = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/objectSpread2.js\").default;\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.formatSlateToMd = void 0;\nvar _slate = require(\"slate\");\nvar _isPunctuationMark = _interopRequireDefault(require(\"../../utils/is-punctuation-mark\"));\nvar formatInlineChildren = function formatInlineChildren(children) {\n  return children.reduce(function (ret, item, index) {\n    if (index === 0) return [item];\n    var prev = ret[ret.length - 1];\n    if (prev.type === item.type && item.type === 'text') {\n      prev.value = prev.value + item.value;\n    } else if (prev.type === item.type && item.type === 'strong') {\n      var prevChild = prev.children[0];\n      var nextChild = item.children[0];\n      prev.children = [{\n        type: 'text',\n        value: prevChild.value + nextChild.value\n      }];\n    } else if (prev.type === item.type && item.type === 'emphasis') {\n      var _prevChild = prev.children[0];\n      var _nextChild = item.children[0];\n      if (_prevChild.type === _nextChild.type && _prevChild.type === 'text') {\n        prev.children = [{\n          type: 'text',\n          value: _prevChild.value + _nextChild.value\n        }];\n      } else if (_prevChild.type === _nextChild.type && _prevChild.type === 'strong') {\n        prev.children = [{\n          type: 'strong',\n          children: [{\n            type: 'text',\n            value: _prevChild.children[0].value + _nextChild.children[0].value\n          }]\n        }];\n      } else {\n        ret.push(item);\n      }\n    } else {\n      ret.push(item);\n    }\n    return ret;\n  }, []);\n};\nvar generateDefaultText = function generateDefaultText(value) {\n  return {\n    type: 'text',\n    value: value || ''\n  };\n};\nvar transformTextNode = function transformTextNode(textNode) {\n  var mdNode = {\n    type: 'text',\n    value: textNode.text\n  };\n\n  // code = true, override text type\n  if (textNode['code']) {\n    mdNode = _objectSpread(_objectSpread({}, mdNode), {}, {\n      type: 'inlineCode'\n    });\n  }\n\n  // blob = true, add strong parent\n  if (textNode['bold']) {\n    mdNode['value'] = mdNode.value ? mdNode.value.trim() : '';\n    if ((0, _isPunctuationMark.default)(mdNode.value)) {\n      // https://symbl.cc/en/200B/\n      mdNode['value'] = mdNode.value + '​';\n    }\n    mdNode = {\n      type: 'strong',\n      children: [mdNode]\n    };\n  }\n\n  // italic = true, add emphasis parent\n  if (textNode['italic'] && mdNode.type === 'strong') {\n    mdNode = {\n      type: 'emphasis',\n      children: [mdNode]\n    };\n  } else if (textNode['italic']) {\n    mdNode['value'] = mdNode.value ? mdNode.value.trim() : '';\n    if ((0, _isPunctuationMark.default)(mdNode.value)) {\n      // https://symbl.cc/en/200B/\n      mdNode['value'] = mdNode.value + '​';\n    }\n    mdNode = {\n      type: 'emphasis',\n      children: [mdNode]\n    };\n  }\n  return mdNode;\n};\nvar transformInlineChildren = function transformInlineChildren(result, item) {\n  // image\n  if (item.type && item.type === 'image') {\n    var data = item.data;\n    var image = {\n      type: 'image',\n      url: data.src,\n      alt: data.alt || null,\n      title: data.title || null\n    };\n    if (data.height || data.width) {\n      image = {\n        type: 'html',\n        value: \"<img src=\\\"\".concat(data.src, \"\\\" alt=\\\"\").concat(data.alt, \"\\\" title=\\\"\").concat(data.title, \"\\\" width=\\\"\").concat(data.width, \"\\\" height=\\\"\").concat(data.height, \"\\\" />\")\n      };\n    }\n    result.push(image);\n    return result;\n  }\n\n  // link\n  if (item.type && item.type === 'link') {\n    var link = {\n      type: 'link',\n      url: item.url,\n      title: item.title || null,\n      children: [transformTextNode(item.children[0])]\n    };\n    result.push(link);\n    return result;\n  }\n  if (item.type && item.type === 'column') {\n    var _data = item.data;\n    var newNode = {\n      text: \"{\".concat(_data.name, \"}\")\n    };\n    var column = transformTextNode(newNode);\n    result.push(column);\n    return result;\n  }\n  if (item.type && item.type === 'html') {\n    result.push(item);\n    return result;\n  }\n\n  // text\n  var nodes = transformTextNode(item);\n  result.push(nodes);\n  return result;\n};\nvar transformNodeWithInlineChildren = function transformNodeWithInlineChildren(node) {\n  var children = node.children;\n  var defaultChildren = [generateDefaultText()];\n  if (!children || !Array.isArray(children) || children.length === 0) {\n    return defaultChildren;\n  }\n  var result = [];\n  children.forEach(function (item) {\n    return transformInlineChildren(result, item);\n  });\n\n  // format result\n  return formatInlineChildren(result.flat());\n};\nvar transformHeader = function transformHeader(node) {\n  var level = node.type.replace('header', '');\n  return {\n    type: 'heading',\n    depth: parseInt(level),\n    children: transformNodeWithInlineChildren(node)\n  };\n};\nvar transformParagraph = function transformParagraph(node) {\n  var children = node.children;\n  if (!Array.isArray(children) || children.length === 0) {\n    return {\n      type: 'paragraph',\n      children: transformNodeWithInlineChildren(node)\n    };\n  }\n  var voidNodeTypes = ['image', 'column', 'formula'];\n  var hasBlock = children.some(function (item) {\n    return voidNodeTypes.includes(item.type);\n  });\n  var hasHtml = children.some(function (item) {\n    return item.type === 'html';\n  });\n  if (!hasHtml && !hasBlock && _slate.Node.string(node).length === 0) {\n    return {\n      type: 'paragraph',\n      children: [\n      // https://symbl.cc/en/200B/\n      generateDefaultText('​')]\n    };\n  }\n  return {\n    type: 'paragraph',\n    children: transformNodeWithInlineChildren(node)\n  };\n};\nvar transformBlockquote = function transformBlockquote(node) {\n  var children = node.children;\n  return {\n    type: 'blockquote',\n    children: children.map(function (child) {\n      var handler = elementHandlers[child.type];\n      return handler(child);\n    }).flat() // flat\n  };\n};\n\nvar transformCheckList = function transformCheckList(node) {\n  return {\n    type: 'list',\n    ordered: false,\n    start: null,\n    spread: false,\n    children: [{\n      type: 'listItem',\n      spread: false,\n      checked: node.checked ? true : false,\n      children: [transformParagraph(node)]\n    }]\n  };\n};\nvar transformListContent = function transformListContent(node) {\n  return transformParagraph(node);\n};\nvar transformListItem = function transformListItem(node) {\n  var loose = false;\n  var children = node.children;\n  // eslint-disable-next-line array-callback-return\n  var newChildren = children.map(function (child) {\n    if (child.type === 'paragraph') {\n      return transformListContent(child);\n    }\n    if (child.type === 'code_block') {\n      return transformCodeBlock(child);\n    }\n    if (child.type === 'blockquote') {\n      return transformBlockquote(child);\n    }\n    if (child.type === 'unordered_list' || child.type === 'ordered_list') {\n      return transformList(child);\n    }\n  });\n  if (newChildren.length === 1) {\n    loose = false;\n  } else if (newChildren.length === 2 && newChildren[1].type === 'list') {\n    loose = true;\n  } else {\n    loose = true;\n  }\n  return {\n    type: 'listItem',\n    loose: loose,\n    checked: null,\n    children: newChildren\n  };\n};\nvar transformList = function transformList(node) {\n  var children = node.children;\n  var newChildren = children.map(function (child) {\n    return transformListItem(child);\n  });\n  var loose = false;\n  var _iterator = _createForOfIteratorHelper(newChildren),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _node = _step.value;\n      if (_node.loose === true) {\n        loose = true;\n        break;\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return {\n    type: 'list',\n    ordered: node.type === 'ordered_list',\n    // ordered_list | unordered_list\n    start: 1,\n    loose: loose,\n    children: newChildren\n  };\n};\nvar transformTableCell = function transformTableCell(cell) {\n  return {\n    type: 'tableCell',\n    children: transformNodeWithInlineChildren(cell)\n  };\n};\nvar transformTableRow = function transformTableRow(row) {\n  var cells = row.children;\n  return {\n    type: 'tableRow',\n    children: cells.map(function (cell) {\n      return transformTableCell(cell);\n    })\n  };\n};\nvar transformTable = function transformTable(node) {\n  var rows = node.children,\n    align = node.align;\n  return {\n    type: 'table',\n    align: align,\n    children: rows.map(function (row) {\n      return transformTableRow(row);\n    })\n  };\n};\nvar transformCodeLine = function transformCodeLine(node) {\n  var _node$children$;\n  var text = ((_node$children$ = node.children[0]) === null || _node$children$ === void 0 ? void 0 : _node$children$.text) || '';\n  return text;\n};\nvar transformCodeBlock = function transformCodeBlock(node) {\n  var children = node.children;\n  return {\n    type: 'code',\n    lang: node.lang ? node.lang : null,\n    value: children.map(function (child) {\n      return transformCodeLine(child);\n    }).join('\\n')\n  };\n};\nvar transformFormula = function transformFormula(node) {\n  var data = node.data;\n  return {\n    type: 'math',\n    value: data.formula\n  };\n};\nvar transformAsParagraph = function transformAsParagraph(node) {\n  var paragraph = {\n    type: 'paragraph',\n    children: [{\n      text: _slate.Node.string(node)\n    }]\n  };\n  return transformParagraph(paragraph);\n};\nvar elementHandlers = {\n  'paragraph': transformParagraph,\n  'header1': transformHeader,\n  'header2': transformHeader,\n  'header3': transformHeader,\n  'header4': transformHeader,\n  'header5': transformHeader,\n  'header6': transformHeader,\n  'blockquote': transformBlockquote,\n  'table': transformTable,\n  'check_list_item': transformCheckList,\n  'ordered_list': transformList,\n  'unordered_list': transformList,\n  'code_block': transformCodeBlock,\n  'formula': transformFormula\n};\nvar formatSlateToMd = function formatSlateToMd(children) {\n  // const validChildren = children.filter(child => elementHandlers[child.type]);\n  var validChildren = children;\n  return validChildren.map(function (child) {\n    var handler = elementHandlers[child.type];\n    if (handler) {\n      return handler(child);\n    } else {\n      return transformAsParagraph(child);\n    }\n  }).flat();\n};\nexports.formatSlateToMd = formatSlateToMd;","map":{"version":3,"names":["_createForOfIteratorHelper","require","default","_objectSpread","_interopRequireDefault","Object","defineProperty","exports","value","formatSlateToMd","_slate","_isPunctuationMark","formatInlineChildren","children","reduce","ret","item","index","prev","length","type","prevChild","nextChild","push","generateDefaultText","transformTextNode","textNode","mdNode","text","trim","transformInlineChildren","result","data","image","url","src","alt","title","height","width","concat","link","newNode","name","column","nodes","transformNodeWithInlineChildren","node","defaultChildren","Array","isArray","forEach","flat","transformHeader","level","replace","depth","parseInt","transformParagraph","voidNodeTypes","hasBlock","some","includes","hasHtml","Node","string","transformBlockquote","map","child","handler","elementHandlers","transformCheckList","ordered","start","spread","checked","transformListContent","transformListItem","loose","newChildren","transformCodeBlock","transformList","_iterator","_step","s","n","done","err","e","f","transformTableCell","cell","transformTableRow","row","cells","transformTable","rows","align","transformCodeLine","_node$children$","lang","join","transformFormula","formula","transformAsParagraph","paragraph","validChildren"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/slate-convert/slate-to-md/transform.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.formatSlateToMd = void 0;\nvar _slate = require(\"slate\");\nvar _isPunctuationMark = _interopRequireDefault(require(\"../../utils/is-punctuation-mark\"));\nconst formatInlineChildren = children => {\n  return children.reduce((ret, item, index) => {\n    if (index === 0) return [item];\n    let prev = ret[ret.length - 1];\n    if (prev.type === item.type && item.type === 'text') {\n      prev.value = prev.value + item.value;\n    } else if (prev.type === item.type && item.type === 'strong') {\n      const prevChild = prev.children[0];\n      const nextChild = item.children[0];\n      prev.children = [{\n        type: 'text',\n        value: prevChild.value + nextChild.value\n      }];\n    } else if (prev.type === item.type && item.type === 'emphasis') {\n      const prevChild = prev.children[0];\n      const nextChild = item.children[0];\n      if (prevChild.type === nextChild.type && prevChild.type === 'text') {\n        prev.children = [{\n          type: 'text',\n          value: prevChild.value + nextChild.value\n        }];\n      } else if (prevChild.type === nextChild.type && prevChild.type === 'strong') {\n        prev.children = [{\n          type: 'strong',\n          children: [{\n            type: 'text',\n            value: prevChild.children[0].value + nextChild.children[0].value\n          }]\n        }];\n      } else {\n        ret.push(item);\n      }\n    } else {\n      ret.push(item);\n    }\n    return ret;\n  }, []);\n};\nconst generateDefaultText = value => {\n  return {\n    type: 'text',\n    value: value || ''\n  };\n};\nconst transformTextNode = textNode => {\n  let mdNode = {\n    type: 'text',\n    value: textNode.text\n  };\n\n  // code = true, override text type\n  if (textNode['code']) {\n    mdNode = {\n      ...mdNode,\n      type: 'inlineCode'\n    };\n  }\n\n  // blob = true, add strong parent\n  if (textNode['bold']) {\n    mdNode['value'] = mdNode.value ? mdNode.value.trim() : '';\n    if ((0, _isPunctuationMark.default)(mdNode.value)) {\n      // https://symbl.cc/en/200B/\n      mdNode['value'] = mdNode.value + '​';\n    }\n    mdNode = {\n      type: 'strong',\n      children: [mdNode]\n    };\n  }\n\n  // italic = true, add emphasis parent\n  if (textNode['italic'] && mdNode.type === 'strong') {\n    mdNode = {\n      type: 'emphasis',\n      children: [mdNode]\n    };\n  } else if (textNode['italic']) {\n    mdNode['value'] = mdNode.value ? mdNode.value.trim() : '';\n    if ((0, _isPunctuationMark.default)(mdNode.value)) {\n      // https://symbl.cc/en/200B/\n      mdNode['value'] = mdNode.value + '​';\n    }\n    mdNode = {\n      type: 'emphasis',\n      children: [mdNode]\n    };\n  }\n  return mdNode;\n};\nconst transformInlineChildren = (result, item) => {\n  // image\n  if (item.type && item.type === 'image') {\n    const {\n      data\n    } = item;\n    let image = {\n      type: 'image',\n      url: data.src,\n      alt: data.alt || null,\n      title: data.title || null\n    };\n    if (data.height || data.width) {\n      image = {\n        type: 'html',\n        value: \"<img src=\\\"\".concat(data.src, \"\\\" alt=\\\"\").concat(data.alt, \"\\\" title=\\\"\").concat(data.title, \"\\\" width=\\\"\").concat(data.width, \"\\\" height=\\\"\").concat(data.height, \"\\\" />\")\n      };\n    }\n    result.push(image);\n    return result;\n  }\n\n  // link\n  if (item.type && item.type === 'link') {\n    const link = {\n      type: 'link',\n      url: item.url,\n      title: item.title || null,\n      children: [transformTextNode(item.children[0])]\n    };\n    result.push(link);\n    return result;\n  }\n  if (item.type && item.type === 'column') {\n    const data = item.data;\n    const newNode = {\n      text: \"{\".concat(data.name, \"}\")\n    };\n    const column = transformTextNode(newNode);\n    result.push(column);\n    return result;\n  }\n  if (item.type && item.type === 'html') {\n    result.push(item);\n    return result;\n  }\n\n  // text\n  const nodes = transformTextNode(item);\n  result.push(nodes);\n  return result;\n};\nconst transformNodeWithInlineChildren = node => {\n  const {\n    children\n  } = node;\n  const defaultChildren = [generateDefaultText()];\n  if (!children || !Array.isArray(children) || children.length === 0) {\n    return defaultChildren;\n  }\n  const result = [];\n  children.forEach(item => transformInlineChildren(result, item));\n\n  // format result\n  return formatInlineChildren(result.flat());\n};\nconst transformHeader = node => {\n  const level = node.type.replace('header', '');\n  return {\n    type: 'heading',\n    depth: parseInt(level),\n    children: transformNodeWithInlineChildren(node)\n  };\n};\nconst transformParagraph = node => {\n  const {\n    children\n  } = node;\n  if (!Array.isArray(children) || children.length === 0) {\n    return {\n      type: 'paragraph',\n      children: transformNodeWithInlineChildren(node)\n    };\n  }\n  const voidNodeTypes = ['image', 'column', 'formula'];\n  const hasBlock = children.some(item => voidNodeTypes.includes(item.type));\n  const hasHtml = children.some(item => item.type === 'html');\n  if (!hasHtml && !hasBlock && _slate.Node.string(node).length === 0) {\n    return {\n      type: 'paragraph',\n      children: [\n      // https://symbl.cc/en/200B/\n      generateDefaultText('​')]\n    };\n  }\n  return {\n    type: 'paragraph',\n    children: transformNodeWithInlineChildren(node)\n  };\n};\nconst transformBlockquote = node => {\n  const {\n    children\n  } = node;\n  return {\n    type: 'blockquote',\n    children: children.map(child => {\n      const handler = elementHandlers[child.type];\n      return handler(child);\n    }).flat() // flat\n  };\n};\nconst transformCheckList = node => {\n  return {\n    type: 'list',\n    ordered: false,\n    start: null,\n    spread: false,\n    children: [{\n      type: 'listItem',\n      spread: false,\n      checked: node.checked ? true : false,\n      children: [transformParagraph(node)]\n    }]\n  };\n};\nconst transformListContent = node => {\n  return transformParagraph(node);\n};\nconst transformListItem = node => {\n  let loose = false;\n  const {\n    children\n  } = node;\n  // eslint-disable-next-line array-callback-return\n  const newChildren = children.map(child => {\n    if (child.type === 'paragraph') {\n      return transformListContent(child);\n    }\n    if (child.type === 'code_block') {\n      return transformCodeBlock(child);\n    }\n    if (child.type === 'blockquote') {\n      return transformBlockquote(child);\n    }\n    if (child.type === 'unordered_list' || child.type === 'ordered_list') {\n      return transformList(child);\n    }\n  });\n  if (newChildren.length === 1) {\n    loose = false;\n  } else if (newChildren.length === 2 && newChildren[1].type === 'list') {\n    loose = true;\n  } else {\n    loose = true;\n  }\n  return {\n    type: 'listItem',\n    loose: loose,\n    checked: null,\n    children: newChildren\n  };\n};\nconst transformList = node => {\n  const {\n    children\n  } = node;\n  const newChildren = children.map(child => transformListItem(child));\n  let loose = false;\n  for (let node of newChildren) {\n    if (node.loose === true) {\n      loose = true;\n      break;\n    }\n  }\n  return {\n    type: 'list',\n    ordered: node.type === 'ordered_list',\n    // ordered_list | unordered_list\n    start: 1,\n    loose: loose,\n    children: newChildren\n  };\n};\nconst transformTableCell = cell => {\n  return {\n    type: 'tableCell',\n    children: transformNodeWithInlineChildren(cell)\n  };\n};\nconst transformTableRow = row => {\n  const {\n    children: cells\n  } = row;\n  return {\n    type: 'tableRow',\n    children: cells.map(cell => transformTableCell(cell))\n  };\n};\nconst transformTable = node => {\n  const {\n    children: rows,\n    align\n  } = node;\n  return {\n    type: 'table',\n    align: align,\n    children: rows.map(row => transformTableRow(row))\n  };\n};\nconst transformCodeLine = node => {\n  var _node$children$;\n  const text = ((_node$children$ = node.children[0]) === null || _node$children$ === void 0 ? void 0 : _node$children$.text) || '';\n  return text;\n};\nconst transformCodeBlock = node => {\n  const {\n    children\n  } = node;\n  return {\n    type: 'code',\n    lang: node.lang ? node.lang : null,\n    value: children.map(child => transformCodeLine(child)).join('\\n')\n  };\n};\nconst transformFormula = node => {\n  const data = node.data;\n  return {\n    type: 'math',\n    value: data.formula\n  };\n};\nconst transformAsParagraph = node => {\n  const paragraph = {\n    type: 'paragraph',\n    children: [{\n      text: _slate.Node.string(node)\n    }]\n  };\n  return transformParagraph(paragraph);\n};\nconst elementHandlers = {\n  'paragraph': transformParagraph,\n  'header1': transformHeader,\n  'header2': transformHeader,\n  'header3': transformHeader,\n  'header4': transformHeader,\n  'header5': transformHeader,\n  'header6': transformHeader,\n  'blockquote': transformBlockquote,\n  'table': transformTable,\n  'check_list_item': transformCheckList,\n  'ordered_list': transformList,\n  'unordered_list': transformList,\n  'code_block': transformCodeBlock,\n  'formula': transformFormula\n};\nconst formatSlateToMd = children => {\n  // const validChildren = children.filter(child => elementHandlers[child.type]);\n  const validChildren = children;\n  return validChildren.map(child => {\n    const handler = elementHandlers[child.type];\n    if (handler) {\n      return handler(child);\n    } else {\n      return transformAsParagraph(child);\n    }\n  }).flat();\n};\nexports.formatSlateToMd = formatSlateToMd;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}