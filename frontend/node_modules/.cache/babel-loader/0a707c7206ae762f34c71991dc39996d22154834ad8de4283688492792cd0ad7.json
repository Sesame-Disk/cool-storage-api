{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import axios from'axios';import cookie from'react-cookies';import{siteRoot}from'../../../utils/constants';var InstAdminAPI=/*#__PURE__*/function(){function InstAdminAPI(){_classCallCheck(this,InstAdminAPI);}_createClass(InstAdminAPI,[{key:\"init\",value:function init(_ref){var server=_ref.server,username=_ref.username,password=_ref.password,token=_ref.token;this.server=server;this.username=username;this.password=password;this.token=token;//none\nif(this.token&&this.server){this.req=axios.create({baseURL:this.server,headers:{'Authorization':'Token '+this.token}});}return this;}},{key:\"initForSeahubUsage\",value:function initForSeahubUsage(_ref2){var siteRoot=_ref2.siteRoot,xcsrfHeaders=_ref2.xcsrfHeaders;if(siteRoot&&siteRoot.charAt(siteRoot.length-1)==='/'){var server=siteRoot.substring(0,siteRoot.length-1);this.server=server;}else{this.server=siteRoot;}this.req=axios.create({headers:{'X-CSRFToken':xcsrfHeaders}});return this;}},{key:\"_sendPostRequest\",value:function _sendPostRequest(url,form){if(form.getHeaders){return this.req.post(url,form,{headers:form.getHeaders()});}else{return this.req.post(url,form);}}},{key:\"getToken\",value:function getToken(){var _this=this;var url=this.server+'/api2/auth-token/';axios.post(url,{username:this.username,password:this.password}).then(function(response){_this.token=response.data;return _this.token;});}},{key:\"listInstitutionUsers\",value:function listInstitutionUsers(page,perPage){var url=this.server+'/api/v2.1/institutions/admin/users/';var params={};if(page!=undefined){params.page=page;}if(perPage!=undefined){params.per_page=perPage;}return this.req.get(url);}},{key:\"searchInstitutionUsers\",value:function searchInstitutionUsers(q){var url=this.server+'/api/v2.1/institutions/admin/search-user/';var params={q:q};return this.req.get(url,{params:params});}},{key:\"deleteInstitutionUser\",value:function deleteInstitutionUser(email){var url=this.server+'/api/v2.1/institutions/admin/users/'+encodeURIComponent(email)+'/';return this.req.delete(url);}},{key:\"getInstitutionUserInfo\",value:function getInstitutionUserInfo(email){var url=this.server+'/api/v2.1/institutions/admin/users/'+encodeURIComponent(email)+'/';return this.req.get(url);}},{key:\"setInstitutionUserQuote\",value:function setInstitutionUserQuote(email,quota){var url=this.server+'/api/v2.1/institutions/admin/users/'+encodeURIComponent(email)+'/';var data={quota_total:quota};return this.req.put(url,data);}},{key:\"listInstitutionUserRepos\",value:function listInstitutionUserRepos(email){var url=this.server+'/api/v2.1/institutions/admin/users/'+encodeURIComponent(email)+'/libraries/';return this.req.get(url);}},{key:\"listInstitutionUserGroups\",value:function listInstitutionUserGroups(email){var url=this.server+'/api/v2.1/institutions/admin/users/'+encodeURIComponent(email)+'/groups/';return this.req.get(url);}},{key:\"updateInstitutionUserStatus\",value:function updateInstitutionUserStatus(email,is_active){var url=this.server+'/api/v2.1/institutions/admin/users/'+encodeURIComponent(email)+'/';var data={is_active:is_active?'true':'false'};return this.req.put(url,data);}}]);return InstAdminAPI;}();var instAdminAPI=new InstAdminAPI();var xcsrfHeaders=cookie.load('sfcsrftoken');instAdminAPI.initForSeahubUsage({siteRoot:siteRoot,xcsrfHeaders:xcsrfHeaders});export default instAdminAPI;","map":{"version":3,"names":["axios","cookie","siteRoot","InstAdminAPI","_classCallCheck","_createClass","key","value","init","_ref","server","username","password","token","req","create","baseURL","headers","initForSeahubUsage","_ref2","xcsrfHeaders","charAt","length","substring","_sendPostRequest","url","form","getHeaders","post","getToken","_this","then","response","data","listInstitutionUsers","page","perPage","params","undefined","per_page","get","searchInstitutionUsers","q","deleteInstitutionUser","email","encodeURIComponent","delete","getInstitutionUserInfo","setInstitutionUserQuote","quota","quota_total","put","listInstitutionUserRepos","listInstitutionUserGroups","updateInstitutionUserStatus","is_active","instAdminAPI","load"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/api/index.js"],"sourcesContent":["import axios from 'axios';\nimport cookie from 'react-cookies';\nimport { siteRoot } from '../../../utils/constants';\n\nclass InstAdminAPI {\n\n  init({ server, username, password, token }) {\n    this.server = server;\n    this.username = username;\n    this.password = password;\n    this.token = token;  //none\n    if (this.token && this.server) {\n      this.req = axios.create({\n        baseURL: this.server,\n        headers: { 'Authorization': 'Token ' + this.token },\n      });\n    }\n    return this;\n  }\n\n  initForSeahubUsage({ siteRoot, xcsrfHeaders }) {\n    if (siteRoot && siteRoot.charAt(siteRoot.length-1) === '/') {\n      var server = siteRoot.substring(0, siteRoot.length-1);\n      this.server = server;\n    } else {\n      this.server = siteRoot;\n    }\n\n    this.req = axios.create({\n      headers: {\n        'X-CSRFToken': xcsrfHeaders,\n      }\n    });\n    return this;\n  }\n\n  _sendPostRequest(url, form) {\n    if (form.getHeaders) {\n      return this.req.post(url, form, {\n        headers:form.getHeaders()\n      });\n    } else {\n      return this.req.post(url, form);\n    }\n  }\n\n  getToken() {\n    const url = this.server + '/api2/auth-token/';\n    axios.post(url, {\n      username: this.username,\n      password: this.password\n    }).then((response) => {\n      this.token = response.data;\n      return this.token;\n    });\n  }\n\n  listInstitutionUsers(page, perPage) {\n    const url = this.server + '/api/v2.1/institutions/admin/users/';\n    let params = {\n    };\n    if (page != undefined) {\n      params.page = page;\n    }\n    if (perPage != undefined) {\n      params.per_page = perPage;\n    }\n    return this.req.get(url);\n  }\n\n  searchInstitutionUsers(q) {\n    const url = this.server + '/api/v2.1/institutions/admin/search-user/';\n    const params = {\n      q: q\n    };\n    return this.req.get(url, {params: params});\n  }\n\n  deleteInstitutionUser(email) {\n    const url = this.server + '/api/v2.1/institutions/admin/users/' + encodeURIComponent(email) + '/';\n    return this.req.delete(url);\n  }\n\n  getInstitutionUserInfo(email) {\n    const url = this.server + '/api/v2.1/institutions/admin/users/' + encodeURIComponent(email) + '/';\n    return this.req.get(url);\n  }\n\n  setInstitutionUserQuote(email, quota) {\n    const url = this.server + '/api/v2.1/institutions/admin/users/' + encodeURIComponent(email) + '/';\n    const data = {\n      quota_total: quota\n    };\n    return this.req.put(url, data);\n  }\n\n  listInstitutionUserRepos(email) {\n    const url = this.server + '/api/v2.1/institutions/admin/users/' + encodeURIComponent(email) + '/libraries/';\n    return this.req.get(url);\n  }\n\n  listInstitutionUserGroups(email) {\n    const url = this.server + '/api/v2.1/institutions/admin/users/' + encodeURIComponent(email) + '/groups/';\n    return this.req.get(url);\n  }\n\n  updateInstitutionUserStatus(email, is_active) {\n    const url = this.server + '/api/v2.1/institutions/admin/users/' + encodeURIComponent(email) + '/';\n    const data = {\n      is_active: is_active ? 'true' : 'false',\n    };\n    return this.req.put(url, data);\n  }\n\n}\n\n\nconst instAdminAPI = new InstAdminAPI();\nconst xcsrfHeaders = cookie.load('sfcsrftoken');\ninstAdminAPI.initForSeahubUsage({ siteRoot, xcsrfHeaders });\n\nexport default instAdminAPI;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}