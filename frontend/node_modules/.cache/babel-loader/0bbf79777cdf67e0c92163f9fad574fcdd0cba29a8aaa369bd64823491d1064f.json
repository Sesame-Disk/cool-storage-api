{"ast":null,"code":"import React, { useEffect, useMemo } from 'react';\nimport { withTranslation } from 'react-i18next';\nimport context from '../context';\nimport ErrorBoundary from './error-boundary';\nimport { SDocEditor } from '../basic-sdk';\nimport { PAGE_EDIT_AREA_WIDTH, WIKI_EDITOR } from '../basic-sdk/constants';\nimport { createWikiEditor } from '../basic-sdk/extension';\nimport withNodeId from '../basic-sdk/node-id';\nimport { withSocketIO } from '../basic-sdk/socket';\nimport '../assets/css/simple-viewer.css';\nvar SdocWikiViewer = function SdocWikiViewer(_ref) {\n  var document = _ref.document,\n    showOutline = _ref.showOutline,\n    scrollRef = _ref.scrollRef,\n    docUuid = _ref.docUuid,\n    isWikiReadOnly = _ref.isWikiReadOnly;\n  context.initApi();\n  var validEditor = useMemo(function () {\n    var defaultEditor = createWikiEditor();\n    // getEditorConfig cashe the config, so we need to update the uuid,for wiki editor\n    docUuid && context.updateConfigUuid(docUuid);\n    var editorConfig = context.getEditorConfig();\n    var newEditor = withNodeId(withSocketIO(defaultEditor, {\n      document: document,\n      config: editorConfig\n    }));\n    var cursors = document.cursors;\n    newEditor.cursors = cursors || {};\n    newEditor.width = PAGE_EDIT_AREA_WIDTH; // default width\n    newEditor.editorType = WIKI_EDITOR;\n    return newEditor;\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [docUuid]);\n  useEffect(function () {\n    validEditor.openConnection();\n    return function () {\n      validEditor.closeConnection();\n    };\n  }, [validEditor]);\n  return /*#__PURE__*/React.createElement(ErrorBoundary, null, /*#__PURE__*/React.createElement(SDocEditor, {\n    showComment: false,\n    document: document,\n    showOutline: showOutline,\n    scrollRef: scrollRef,\n    docUuid: docUuid,\n    isShowHeaderToolbar: false,\n    editor: validEditor,\n    isWikiReadOnly: isWikiReadOnly\n  }));\n};\nexport default withTranslation('sdoc-editor')(SdocWikiViewer);","map":{"version":3,"names":["React","useEffect","useMemo","withTranslation","context","ErrorBoundary","SDocEditor","PAGE_EDIT_AREA_WIDTH","WIKI_EDITOR","createWikiEditor","withNodeId","withSocketIO","SdocWikiViewer","_ref","document","showOutline","scrollRef","docUuid","isWikiReadOnly","initApi","validEditor","defaultEditor","updateConfigUuid","editorConfig","getEditorConfig","newEditor","config","cursors","width","editorType","openConnection","closeConnection","createElement","showComment","isShowHeaderToolbar","editor"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/pages/sdoc-wiki-viewer.js"],"sourcesContent":["import React, { useEffect, useMemo } from 'react';\nimport { withTranslation } from 'react-i18next';\nimport context from '../context';\nimport ErrorBoundary from './error-boundary';\nimport { SDocEditor } from '../basic-sdk';\nimport { PAGE_EDIT_AREA_WIDTH, WIKI_EDITOR } from '../basic-sdk/constants';\nimport { createWikiEditor } from '../basic-sdk/extension';\nimport withNodeId from '../basic-sdk/node-id';\nimport { withSocketIO } from '../basic-sdk/socket';\nimport '../assets/css/simple-viewer.css';\nconst SdocWikiViewer = _ref => {\n  let {\n    document,\n    showOutline,\n    scrollRef,\n    docUuid,\n    isWikiReadOnly\n  } = _ref;\n  context.initApi();\n  const validEditor = useMemo(() => {\n    const defaultEditor = createWikiEditor();\n    // getEditorConfig cashe the config, so we need to update the uuid,for wiki editor\n    docUuid && context.updateConfigUuid(docUuid);\n    const editorConfig = context.getEditorConfig();\n    const newEditor = withNodeId(withSocketIO(defaultEditor, {\n      document,\n      config: editorConfig\n    }));\n    const {\n      cursors\n    } = document;\n    newEditor.cursors = cursors || {};\n    newEditor.width = PAGE_EDIT_AREA_WIDTH; // default width\n    newEditor.editorType = WIKI_EDITOR;\n    return newEditor;\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [docUuid]);\n  useEffect(() => {\n    validEditor.openConnection();\n    return () => {\n      validEditor.closeConnection();\n    };\n  }, [validEditor]);\n  return /*#__PURE__*/React.createElement(ErrorBoundary, null, /*#__PURE__*/React.createElement(SDocEditor, {\n    showComment: false,\n    document: document,\n    showOutline: showOutline,\n    scrollRef: scrollRef,\n    docUuid: docUuid,\n    isShowHeaderToolbar: false,\n    editor: validEditor,\n    isWikiReadOnly: isWikiReadOnly\n  }));\n};\nexport default withTranslation('sdoc-editor')(SdocWikiViewer);"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,OAAO,QAAQ,OAAO;AACjD,SAASC,eAAe,QAAQ,eAAe;AAC/C,OAAOC,OAAO,MAAM,YAAY;AAChC,OAAOC,aAAa,MAAM,kBAAkB;AAC5C,SAASC,UAAU,QAAQ,cAAc;AACzC,SAASC,oBAAoB,EAAEC,WAAW,QAAQ,wBAAwB;AAC1E,SAASC,gBAAgB,QAAQ,wBAAwB;AACzD,OAAOC,UAAU,MAAM,sBAAsB;AAC7C,SAASC,YAAY,QAAQ,qBAAqB;AAClD,OAAO,iCAAiC;AACxC,IAAMC,cAAc,GAAG,SAAjBA,cAAcA,CAAGC,IAAI,EAAI;EAC7B,IACEC,QAAQ,GAKND,IAAI,CALNC,QAAQ;IACRC,WAAW,GAITF,IAAI,CAJNE,WAAW;IACXC,SAAS,GAGPH,IAAI,CAHNG,SAAS;IACTC,OAAO,GAELJ,IAAI,CAFNI,OAAO;IACPC,cAAc,GACZL,IAAI,CADNK,cAAc;EAEhBd,OAAO,CAACe,OAAO,CAAC,CAAC;EACjB,IAAMC,WAAW,GAAGlB,OAAO,CAAC,YAAM;IAChC,IAAMmB,aAAa,GAAGZ,gBAAgB,CAAC,CAAC;IACxC;IACAQ,OAAO,IAAIb,OAAO,CAACkB,gBAAgB,CAACL,OAAO,CAAC;IAC5C,IAAMM,YAAY,GAAGnB,OAAO,CAACoB,eAAe,CAAC,CAAC;IAC9C,IAAMC,SAAS,GAAGf,UAAU,CAACC,YAAY,CAACU,aAAa,EAAE;MACvDP,QAAQ,EAARA,QAAQ;MACRY,MAAM,EAAEH;IACV,CAAC,CAAC,CAAC;IACH,IACEI,OAAO,GACLb,QAAQ,CADVa,OAAO;IAETF,SAAS,CAACE,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;IACjCF,SAAS,CAACG,KAAK,GAAGrB,oBAAoB,CAAC,CAAC;IACxCkB,SAAS,CAACI,UAAU,GAAGrB,WAAW;IAClC,OAAOiB,SAAS;;IAEhB;EACF,CAAC,EAAE,CAACR,OAAO,CAAC,CAAC;EACbhB,SAAS,CAAC,YAAM;IACdmB,WAAW,CAACU,cAAc,CAAC,CAAC;IAC5B,OAAO,YAAM;MACXV,WAAW,CAACW,eAAe,CAAC,CAAC;IAC/B,CAAC;EACH,CAAC,EAAE,CAACX,WAAW,CAAC,CAAC;EACjB,OAAO,aAAapB,KAAK,CAACgC,aAAa,CAAC3B,aAAa,EAAE,IAAI,EAAE,aAAaL,KAAK,CAACgC,aAAa,CAAC1B,UAAU,EAAE;IACxG2B,WAAW,EAAE,KAAK;IAClBnB,QAAQ,EAAEA,QAAQ;IAClBC,WAAW,EAAEA,WAAW;IACxBC,SAAS,EAAEA,SAAS;IACpBC,OAAO,EAAEA,OAAO;IAChBiB,mBAAmB,EAAE,KAAK;IAC1BC,MAAM,EAAEf,WAAW;IACnBF,cAAc,EAAEA;EAClB,CAAC,CAAC,CAAC;AACL,CAAC;AACD,eAAef,eAAe,CAAC,aAAa,CAAC,CAACS,cAAc,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}