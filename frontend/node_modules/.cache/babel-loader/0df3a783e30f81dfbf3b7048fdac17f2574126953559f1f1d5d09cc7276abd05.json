{"ast":null,"code":"import _slicedToArray from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{Link}from'@gatsbyjs/reach-router';import Selector from'../../../components/single-selector';import{gettext,username}from'../../../utils/constants';import{Utils}from'../../../utils/utils';import moment from'moment';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var OPERATIONS=[{value:'active',text:gettext('Active'),is_active:true,isSelected:false},{value:'inactive',text:gettext('Inactive'),is_active:false,isSelected:false}];var UserItem=function UserItem(_ref){var user=_ref.user,deleteInstUser=_ref.deleteInstUser,updateInstUserStatus=_ref.updateInstUserStatus;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),highlight=_useState2[0],setHighlight=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isOpIconShow=_useState4[0],setIsOpIconSHow=_useState4[1];var operations=OPERATIONS.map(function(item){if(user.is_active===item.is_active){item.isSelected=true;}else{item.isSelected=false;}return item;});var currentSelection=operations.find(function(item){return item.isSelected;});var handleMouseEnter=function handleMouseEnter(){setHighlight(true);setIsOpIconSHow(true);};var handleMouseLeave=function handleMouseLeave(){setHighlight(false);setIsOpIconSHow(false);};var updateStatus=function updateStatus(){updateInstUserStatus(user);};var deleteCurrentUser=function deleteCurrentUser(){deleteInstUser(user);};return/*#__PURE__*/_jsxs(\"tr\",{className:\"\".concat(highlight?'hl':''),onMouseEnter:handleMouseEnter,onMouseLeave:handleMouseLeave,children:[/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/inst/useradmin/\".concat(encodeURIComponent(user.email)),children:user.email}),/*#__PURE__*/_jsx(\"br\",{}),user.name,/*#__PURE__*/_jsx(\"br\",{}),user.contact_email]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Selector,{isDropdownToggleShown:highlight,currentSelectedOption:currentSelection,options:operations,selectOption:updateStatus})}),/*#__PURE__*/_jsx(\"td\",{children:\"\".concat(Utils.bytesToSize(user.quota_usage),\" / \").concat(user.quota_total>0?Utils.bytesToSize(user.quota_total):'--')}),/*#__PURE__*/_jsxs(\"td\",{children:[\"\".concat(user.create_time?moment(user.create_time).format('YYYY-MM-DD HH:mm'):'--',\" /\"),/*#__PURE__*/_jsx(\"br\",{}),\"\".concat(user.last_login?moment(user.last_login).fromNow():'--'),/*#__PURE__*/_jsx(\"br\",{}),\"\".concat(user.last_access_time?moment(user.last_access_time).fromNow():'--')]}),/*#__PURE__*/_jsx(\"td\",{children:isOpIconShow&&!user.is_institution_admin&&!user.is_system_admin&&user.email!==username&&/*#__PURE__*/_jsx(\"span\",{className:\"sf-link\",onClick:deleteCurrentUser,children:gettext('Delete')})})]});};export default UserItem;","map":{"version":3,"names":["React","useState","Link","Selector","gettext","username","Utils","moment","jsx","_jsx","jsxs","_jsxs","OPERATIONS","value","text","is_active","isSelected","UserItem","_ref","user","deleteInstUser","updateInstUserStatus","_useState","_useState2","_slicedToArray","highlight","setHighlight","_useState3","_useState4","isOpIconShow","setIsOpIconSHow","operations","map","item","currentSelection","find","handleMouseEnter","handleMouseLeave","updateStatus","deleteCurrentUser","className","concat","onMouseEnter","onMouseLeave","children","to","encodeURIComponent","email","name","contact_email","isDropdownToggleShown","currentSelectedOption","options","selectOption","bytesToSize","quota_usage","quota_total","create_time","format","last_login","fromNow","last_access_time","is_institution_admin","is_system_admin","onClick"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/institution-admin/user-list/user-item.js"],"sourcesContent":["import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport Selector from '../../../components/single-selector';\nimport { gettext, username } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport moment from 'moment';\n\nconst OPERATIONS =[\n  {\n    value: 'active',\n    text: gettext('Active'),\n    is_active: true,\n    isSelected: false,\n  },\n  {\n    value: 'inactive',\n    text: gettext('Inactive'),\n    is_active: false,\n    isSelected: false,\n  },\n];\n\nconst UserItem = ({ user, deleteInstUser, updateInstUserStatus }) => {\n  const [highlight, setHighlight] = useState(false);\n  const [isOpIconShow, setIsOpIconSHow] = useState(false);\n\n  const operations = OPERATIONS.map(item => {\n    if (user.is_active === item.is_active) {\n      item.isSelected = true;\n    } else {\n      item.isSelected = false;\n    }\n    return item;\n  });\n  const currentSelection = operations.find(item => item.isSelected);\n\n  const handleMouseEnter = () => {\n    setHighlight(true);\n    setIsOpIconSHow(true);\n  };\n\n  const handleMouseLeave = () => {\n    setHighlight(false);\n    setIsOpIconSHow(false);\n  };\n\n  const updateStatus = () => {\n    updateInstUserStatus(user);\n  };\n\n  const deleteCurrentUser = () => {\n    deleteInstUser(user);\n  };\n\n  return (\n    <tr className={`${highlight ? 'hl' : ''}`} onMouseEnter={handleMouseEnter} onMouseLeave={handleMouseLeave}>\n      <td>\n        <Link to={`/inst/useradmin/${encodeURIComponent(user.email)}`}>{user.email}</Link>\n        <br/>\n        {user.name}\n        <br/>\n        {user.contact_email}\n      </td>\n      <td>\n        <Selector\n          isDropdownToggleShown={highlight}\n          currentSelectedOption={currentSelection}\n          options={operations}\n          selectOption={updateStatus}\n        />\n      </td>\n      <td>\n        {`${Utils.bytesToSize(user.quota_usage)} / ${user.quota_total > 0 ? Utils.bytesToSize(user.quota_total) : '--'}`}\n      </td>\n      <td>\n        {`${user.create_time ? moment(user.create_time).format('YYYY-MM-DD HH:mm') : '--'} /`}\n        <br />\n        {`${user.last_login ? moment(user.last_login).fromNow() : '--'}`}\n        <br />\n        {`${user.last_access_time ? moment(user.last_access_time).fromNow() : '--'}`}\n      </td>\n      <td>\n        {isOpIconShow && !user.is_institution_admin && !user.is_system_admin && user.email !== username && (\n          <span className='sf-link' onClick={deleteCurrentUser}>{gettext('Delete')}</span>\n        )}\n      </td>\n    </tr>\n  );\n};\n\nUserItem.propTypes = {\n  user: PropTypes.object.isRequired,\n  deleteInstUser: PropTypes.func.isRequired,\n  updateInstUserStatus: PropTypes.func.isRequired,\n};\n\nexport default UserItem;\n"],"mappings":"sJAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CAEvC,OAASC,IAAI,KAAQ,wBAAwB,CAC7C,MAAO,CAAAC,QAAQ,KAAM,qCAAqC,CAC1D,OAASC,OAAO,CAAEC,QAAQ,KAAQ,0BAA0B,CAC5D,OAASC,KAAK,KAAQ,sBAAsB,CAC5C,MAAO,CAAAC,MAAM,KAAM,QAAQ,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE5B,GAAM,CAAAC,UAAU,CAAE,CAChB,CACEC,KAAK,CAAE,QAAQ,CACfC,IAAI,CAAEV,OAAO,CAAC,QAAQ,CAAC,CACvBW,SAAS,CAAE,IAAI,CACfC,UAAU,CAAE,KACd,CAAC,CACD,CACEH,KAAK,CAAE,UAAU,CACjBC,IAAI,CAAEV,OAAO,CAAC,UAAU,CAAC,CACzBW,SAAS,CAAE,KAAK,CAChBC,UAAU,CAAE,KACd,CAAC,CACF,CAED,GAAM,CAAAC,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAAC,IAAA,CAAuD,IAAjD,CAAAC,IAAI,CAAAD,IAAA,CAAJC,IAAI,CAAEC,cAAc,CAAAF,IAAA,CAAdE,cAAc,CAAEC,oBAAoB,CAAAH,IAAA,CAApBG,oBAAoB,CAC5D,IAAAC,SAAA,CAAkCrB,QAAQ,CAAC,KAAK,CAAC,CAAAsB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA1CG,SAAS,CAAAF,UAAA,IAAEG,YAAY,CAAAH,UAAA,IAC9B,IAAAI,UAAA,CAAwC1B,QAAQ,CAAC,KAAK,CAAC,CAAA2B,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAhDE,YAAY,CAAAD,UAAA,IAAEE,eAAe,CAAAF,UAAA,IAEpC,GAAM,CAAAG,UAAU,CAAGnB,UAAU,CAACoB,GAAG,CAAC,SAAAC,IAAI,CAAI,CACxC,GAAId,IAAI,CAACJ,SAAS,GAAKkB,IAAI,CAAClB,SAAS,CAAE,CACrCkB,IAAI,CAACjB,UAAU,CAAG,IAAI,CACxB,CAAC,IAAM,CACLiB,IAAI,CAACjB,UAAU,CAAG,KAAK,CACzB,CACA,MAAO,CAAAiB,IAAI,CACb,CAAC,CAAC,CACF,GAAM,CAAAC,gBAAgB,CAAGH,UAAU,CAACI,IAAI,CAAC,SAAAF,IAAI,QAAI,CAAAA,IAAI,CAACjB,UAAU,GAAC,CAEjE,GAAM,CAAAoB,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAA,CAAS,CAC7BV,YAAY,CAAC,IAAI,CAAC,CAClBI,eAAe,CAAC,IAAI,CAAC,CACvB,CAAC,CAED,GAAM,CAAAO,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAA,CAAS,CAC7BX,YAAY,CAAC,KAAK,CAAC,CACnBI,eAAe,CAAC,KAAK,CAAC,CACxB,CAAC,CAED,GAAM,CAAAQ,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,CAAS,CACzBjB,oBAAoB,CAACF,IAAI,CAAC,CAC5B,CAAC,CAED,GAAM,CAAAoB,iBAAiB,CAAG,QAApB,CAAAA,iBAAiBA,CAAA,CAAS,CAC9BnB,cAAc,CAACD,IAAI,CAAC,CACtB,CAAC,CAED,mBACER,KAAA,OAAI6B,SAAS,IAAAC,MAAA,CAAKhB,SAAS,CAAG,IAAI,CAAG,EAAE,CAAG,CAACiB,YAAY,CAAEN,gBAAiB,CAACO,YAAY,CAAEN,gBAAiB,CAAAO,QAAA,eACxGjC,KAAA,OAAAiC,QAAA,eACEnC,IAAA,CAACP,IAAI,EAAC2C,EAAE,oBAAAJ,MAAA,CAAqBK,kBAAkB,CAAC3B,IAAI,CAAC4B,KAAK,CAAC,CAAG,CAAAH,QAAA,CAAEzB,IAAI,CAAC4B,KAAK,CAAO,CAAC,cAClFtC,IAAA,QAAI,CAAC,CACJU,IAAI,CAAC6B,IAAI,cACVvC,IAAA,QAAI,CAAC,CACJU,IAAI,CAAC8B,aAAa,EACjB,CAAC,cACLxC,IAAA,OAAAmC,QAAA,cACEnC,IAAA,CAACN,QAAQ,EACP+C,qBAAqB,CAAEzB,SAAU,CACjC0B,qBAAqB,CAAEjB,gBAAiB,CACxCkB,OAAO,CAAErB,UAAW,CACpBsB,YAAY,CAAEf,YAAa,CAC5B,CAAC,CACA,CAAC,cACL7B,IAAA,OAAAmC,QAAA,IAAAH,MAAA,CACMnC,KAAK,CAACgD,WAAW,CAACnC,IAAI,CAACoC,WAAW,CAAC,QAAAd,MAAA,CAAMtB,IAAI,CAACqC,WAAW,CAAG,CAAC,CAAGlD,KAAK,CAACgD,WAAW,CAACnC,IAAI,CAACqC,WAAW,CAAC,CAAG,IAAI,EAC5G,CAAC,cACL7C,KAAA,OAAAiC,QAAA,KAAAH,MAAA,CACMtB,IAAI,CAACsC,WAAW,CAAGlD,MAAM,CAACY,IAAI,CAACsC,WAAW,CAAC,CAACC,MAAM,CAAC,kBAAkB,CAAC,CAAG,IAAI,oBACjFjD,IAAA,QAAK,CAAC,IAAAgC,MAAA,CACFtB,IAAI,CAACwC,UAAU,CAAGpD,MAAM,CAACY,IAAI,CAACwC,UAAU,CAAC,CAACC,OAAO,CAAC,CAAC,CAAG,IAAI,eAC9DnD,IAAA,QAAK,CAAC,IAAAgC,MAAA,CACFtB,IAAI,CAAC0C,gBAAgB,CAAGtD,MAAM,CAACY,IAAI,CAAC0C,gBAAgB,CAAC,CAACD,OAAO,CAAC,CAAC,CAAG,IAAI,GACxE,CAAC,cACLnD,IAAA,OAAAmC,QAAA,CACGf,YAAY,EAAI,CAACV,IAAI,CAAC2C,oBAAoB,EAAI,CAAC3C,IAAI,CAAC4C,eAAe,EAAI5C,IAAI,CAAC4B,KAAK,GAAK1C,QAAQ,eAC7FI,IAAA,SAAM+B,SAAS,CAAC,SAAS,CAACwB,OAAO,CAAEzB,iBAAkB,CAAAK,QAAA,CAAExC,OAAO,CAAC,QAAQ,CAAC,CAAO,CAChF,CACC,CAAC,EACH,CAAC,CAET,CAAC,CAQD,cAAe,CAAAa,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}