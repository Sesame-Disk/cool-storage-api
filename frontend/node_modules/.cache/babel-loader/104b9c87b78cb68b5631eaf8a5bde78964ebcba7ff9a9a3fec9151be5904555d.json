{"ast":null,"code":"import _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { ReactEditor } from '@seafile/slate-react';\nimport { Editor, Transforms, Range, Text, Path, Node } from '@seafile/slate';\nimport slugid from 'slugid';\nimport copy from 'copy-to-clipboard';\nimport context from '../../../../context';\nimport { focusEditor, generateEmptyElement, getNodeType, getSelectedElems } from '../../core';\nimport { SDOC_LINK, LINK, INSERT_FILE_DISPLAY_TYPE, CODE_BLOCK, CODE_LINE, PARAGRAPH, FILE_LINK_INSET_INPUT_TEMP } from '../../constants';\nexport var isMenuDisabled = function isMenuDisabled(editor, readonly) {\n  if (readonly) return true;\n  if (editor.selection == null) return true;\n  var selectedElems = getSelectedElems(editor);\n  var notMatch = selectedElems.some(function (elem) {\n    var type = elem.type;\n    if (editor.isVoid(elem)) return true;\n    if ([CODE_BLOCK, CODE_LINE, LINK].includes(type)) return true;\n    return false;\n  });\n  if (notMatch) return true; // disabled\n  return false; // enable\n};\n\nexport var generateSdocFileNode = function generateSdocFileNode(uuid) {\n  var text = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var sdocFileName = text.replace(/\\.sdoc$/, '');\n  var sdocFileNode = {\n    id: slugid.nice(),\n    type: SDOC_LINK,\n    doc_uuid: uuid,\n    title: sdocFileName,\n    display_type: INSERT_FILE_DISPLAY_TYPE[1],\n    children: [{\n      id: slugid.nice(),\n      text: sdocFileName\n    }]\n  };\n  return sdocFileNode;\n};\nexport var getType = function getType(editor) {\n  var _Editor$nodes = Editor.nodes(editor, {\n      match: function match(n) {\n        return getNodeType(n) === LINK;\n      },\n      universal: true\n    }),\n    _Editor$nodes2 = _slicedToArray(_Editor$nodes, 1),\n    match = _Editor$nodes2[0];\n  if (!match) return PARAGRAPH;\n  var _match = _slicedToArray(match, 1),\n    n = _match[0];\n  return getNodeType(n);\n};\nexport var insertSdocFileLink = function insertSdocFileLink(editor, text, uuid) {\n  if (isMenuDisabled(editor)) return;\n  // Selection folded or not\n  var selection = editor.selection;\n  if (selection == null) return;\n  var isCollapsed = Range.isCollapsed(selection);\n\n  // Remove shortcut symbol,if trigger by shortcut\n  removeShortCutSymbol(editor);\n  var sdocFileNode = generateSdocFileNode(uuid, text);\n  if (isCollapsed) {\n    Transforms.insertNodes(editor, sdocFileNode);\n  } else {\n    var selectedText = Editor.string(editor, selection); // Selected text\n    if (selectedText !== text) {\n      // If the selected text is different from the typed text, delete the text and insert the link\n      editor.deleteFragment();\n      Transforms.insertNodes(editor, sdocFileNode);\n    } else {\n      // If the selected text is the same as the entered text, only the link can be wrapped\n      Transforms.wrapNodes(editor, sdocFileNode, {\n        split: true\n      });\n      Transforms.collapse(editor, {\n        edge: 'end'\n      });\n    }\n  }\n};\nexport var unwrapLinkNode = function unwrapLinkNode(editor, element) {\n  if (editor.selection == null) return;\n  var path = ReactEditor.findPath(editor, element);\n  if (path) {\n    Transforms.unwrapNodes(editor, {\n      at: path\n    });\n  }\n};\nexport var getNewFileListData = function getNewFileListData(fileListData, indexId, children) {\n  fileListData.forEach(function (item) {\n    if (item.indexId === indexId) {\n      item.children = children;\n    }\n    if (item === null || item === void 0 ? void 0 : item.children) {\n      getNewFileListData(item.children, indexId, children);\n    }\n  });\n  return fileListData;\n};\nexport var getUrl = function getUrl(uuid) {\n  return context.getSdocLocalFileUrl(uuid);\n};\nexport var onCopySdocLinkNode = function onCopySdocLinkNode(editor, element) {\n  if (editor.selection == null || Range.isExpanded(editor.selection)) return;\n  var p = ReactEditor.findPath(editor, element);\n  Transforms.select(editor, p);\n  var newData = editor.setFragmentData(new DataTransfer());\n  copy('copy', {\n    onCopy: function onCopy(clipboardData) {\n      newData.types.forEach(function (type) {\n        var data = newData.getData(type);\n        clipboardData.setData(type, data);\n      });\n    }\n  });\n};\nexport var getBeforeText = function getBeforeText(editor) {\n  var selection = editor.selection;\n  if (selection == null) return {\n    beforeText: '',\n    range: null\n  };\n  var anchor = selection.anchor;\n  // Find the near text node above the current text\n  var _Editor$nodes3 = Editor.nodes(editor, {\n      match: function match(node) {\n        return Text.isText(node);\n      },\n      mode: 'lowest'\n    }),\n    _Editor$nodes4 = _slicedToArray(_Editor$nodes3, 1),\n    _Editor$nodes4$ = _slicedToArray(_Editor$nodes4[0], 2),\n    beforeNodePath = _Editor$nodes4$[1];\n  var beforeNodeStartPoint = Editor.start(editor, beforeNodePath); // The starting position of the text node\n  var range = {\n    anchor: anchor,\n    focus: beforeNodeStartPoint\n  };\n  var beforeText = Editor.string(editor, range) || '';\n  return {\n    beforeText: beforeText,\n    range: range\n  };\n};\nexport var isTriggeredByShortcut = function isTriggeredByShortcut(editor) {\n  var _getBeforeText = getBeforeText(editor),\n    beforeText = _getBeforeText.beforeText;\n  var fileSearchInput = getFileSearchInputEntry(editor);\n  if (fileSearchInput) return false;\n  return beforeText.endsWith('[');\n};\n\n// If insert operation is triggered by shortcut, remove the '[[' symbol\nexport var removeShortCutSymbol = function removeShortCutSymbol(editor) {\n  // Check is trigger by short cut\n  var selection = editor.selection;\n  var _getBeforeText2 = getBeforeText(editor),\n    beforeText = _getBeforeText2.beforeText,\n    beforeRange = _getBeforeText2.range;\n  var isTriggeredByShortCut = beforeText.slice(-2) === '[[';\n  isTriggeredByShortCut && Transforms.delete(editor, {\n    at: {\n      anchor: {\n        path: beforeRange.focus.path,\n        offset: beforeText.length - 2\n      },\n      focus: _objectSpread({}, selection.focus)\n    },\n    voids: true\n  });\n  focusEditor(editor);\n};\n\n// Generate temp input for collecting file name\nvar generateFileLinkInput = function generateFileLinkInput() {\n  var input = generateEmptyElement(FILE_LINK_INSET_INPUT_TEMP);\n  return input;\n};\n\n// Insert temp input collecting file name\nexport var insertTempInput = function insertTempInput(editor) {\n  var selection = editor.selection;\n  if (!Range.isCollapsed(selection)) return;\n  var tempInput = generateFileLinkInput();\n  var insertPoint = Editor.start(editor, selection);\n  Transforms.insertNodes(editor, tempInput, {\n    at: insertPoint\n  });\n  var path = Editor.path(editor, insertPoint);\n  var insertPath = Path.next(path);\n  var focusPoint = insertPath.concat(0);\n  focusEditor(editor, focusPoint);\n};\n\n// Remove temp input collecting file name\nexport var removeTempInput = function removeTempInput(editor, element) {\n  var path = ReactEditor.findPath(editor, element);\n  Transforms.delete(editor, {\n    at: path\n  });\n};\nexport var getFileSearchInputEntry = function getFileSearchInputEntry(editor) {\n  var _Editor$nodes5 = Editor.nodes(editor, {\n      match: function match(n) {\n        return n.type === FILE_LINK_INSET_INPUT_TEMP;\n      }\n    }),\n    _Editor$nodes6 = _slicedToArray(_Editor$nodes5, 1),\n    searchInputNodeEntry = _Editor$nodes6[0];\n  return searchInputNodeEntry;\n};\n\n// Insert text when remove file name collector, such as inserting 'filename' into prevNode when close collector entered '[[filename'\nexport var insertTextWhenRemoveFileNameCollector = function insertTextWhenRemoveFileNameCollector(editor, searchInputNode) {\n  var inputNodePath = ReactEditor.findPath(editor, searchInputNode);\n  if (!inputNodePath) return;\n  var prevNodeEntry = Editor.previous(editor, {\n    at: inputNodePath\n  });\n  if (!prevNodeEntry) return;\n  var searchContent = Node.string(searchInputNode);\n  var insertPoint = Editor.end(editor, prevNodeEntry[1]);\n  Transforms.insertText(editor, searchContent, {\n    at: insertPoint\n  });\n  removeTempInput(editor, searchInputNode);\n};","map":{"version":3,"names":["_objectSpread","ReactEditor","Editor","Transforms","Range","Text","Path","Node","slugid","copy","context","focusEditor","generateEmptyElement","getNodeType","getSelectedElems","SDOC_LINK","LINK","INSERT_FILE_DISPLAY_TYPE","CODE_BLOCK","CODE_LINE","PARAGRAPH","FILE_LINK_INSET_INPUT_TEMP","isMenuDisabled","editor","readonly","selection","selectedElems","notMatch","some","elem","type","isVoid","includes","generateSdocFileNode","uuid","text","arguments","length","undefined","sdocFileName","replace","sdocFileNode","id","nice","doc_uuid","title","display_type","children","getType","_Editor$nodes","nodes","match","n","universal","_Editor$nodes2","_slicedToArray","_match","insertSdocFileLink","isCollapsed","removeShortCutSymbol","insertNodes","selectedText","string","deleteFragment","wrapNodes","split","collapse","edge","unwrapLinkNode","element","path","findPath","unwrapNodes","at","getNewFileListData","fileListData","indexId","forEach","item","getUrl","getSdocLocalFileUrl","onCopySdocLinkNode","isExpanded","p","select","newData","setFragmentData","DataTransfer","onCopy","clipboardData","types","data","getData","setData","getBeforeText","beforeText","range","anchor","_Editor$nodes3","node","isText","mode","_Editor$nodes4","_Editor$nodes4$","beforeNodePath","beforeNodeStartPoint","start","focus","isTriggeredByShortcut","_getBeforeText","fileSearchInput","getFileSearchInputEntry","endsWith","_getBeforeText2","beforeRange","isTriggeredByShortCut","slice","delete","offset","voids","generateFileLinkInput","input","insertTempInput","tempInput","insertPoint","insertPath","next","focusPoint","concat","removeTempInput","_Editor$nodes5","_Editor$nodes6","searchInputNodeEntry","insertTextWhenRemoveFileNameCollector","searchInputNode","inputNodePath","prevNodeEntry","previous","searchContent","end","insertText"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/extension/plugins/sdoc-link/helpers.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { ReactEditor } from '@seafile/slate-react';\nimport { Editor, Transforms, Range, Text, Path, Node } from '@seafile/slate';\nimport slugid from 'slugid';\nimport copy from 'copy-to-clipboard';\nimport context from '../../../../context';\nimport { focusEditor, generateEmptyElement, getNodeType, getSelectedElems } from '../../core';\nimport { SDOC_LINK, LINK, INSERT_FILE_DISPLAY_TYPE, CODE_BLOCK, CODE_LINE, PARAGRAPH, FILE_LINK_INSET_INPUT_TEMP } from '../../constants';\nexport const isMenuDisabled = (editor, readonly) => {\n  if (readonly) return true;\n  if (editor.selection == null) return true;\n  const selectedElems = getSelectedElems(editor);\n  const notMatch = selectedElems.some(elem => {\n    const {\n      type\n    } = elem;\n    if (editor.isVoid(elem)) return true;\n    if ([CODE_BLOCK, CODE_LINE, LINK].includes(type)) return true;\n    return false;\n  });\n  if (notMatch) return true; // disabled\n  return false; // enable\n};\n\nexport const generateSdocFileNode = function (uuid) {\n  let text = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  const sdocFileName = text.replace(/\\.sdoc$/, '');\n  const sdocFileNode = {\n    id: slugid.nice(),\n    type: SDOC_LINK,\n    doc_uuid: uuid,\n    title: sdocFileName,\n    display_type: INSERT_FILE_DISPLAY_TYPE[1],\n    children: [{\n      id: slugid.nice(),\n      text: sdocFileName\n    }]\n  };\n  return sdocFileNode;\n};\nexport const getType = editor => {\n  const [match] = Editor.nodes(editor, {\n    match: n => getNodeType(n) === LINK,\n    universal: true\n  });\n  if (!match) return PARAGRAPH;\n  const [n] = match;\n  return getNodeType(n);\n};\nexport const insertSdocFileLink = (editor, text, uuid) => {\n  if (isMenuDisabled(editor)) return;\n  // Selection folded or not\n  const {\n    selection\n  } = editor;\n  if (selection == null) return;\n  const isCollapsed = Range.isCollapsed(selection);\n\n  // Remove shortcut symbol,if trigger by shortcut\n  removeShortCutSymbol(editor);\n  const sdocFileNode = generateSdocFileNode(uuid, text);\n  if (isCollapsed) {\n    Transforms.insertNodes(editor, sdocFileNode);\n  } else {\n    const selectedText = Editor.string(editor, selection); // Selected text\n    if (selectedText !== text) {\n      // If the selected text is different from the typed text, delete the text and insert the link\n      editor.deleteFragment();\n      Transforms.insertNodes(editor, sdocFileNode);\n    } else {\n      // If the selected text is the same as the entered text, only the link can be wrapped\n      Transforms.wrapNodes(editor, sdocFileNode, {\n        split: true\n      });\n      Transforms.collapse(editor, {\n        edge: 'end'\n      });\n    }\n  }\n};\nexport const unwrapLinkNode = (editor, element) => {\n  if (editor.selection == null) return;\n  const path = ReactEditor.findPath(editor, element);\n  if (path) {\n    Transforms.unwrapNodes(editor, {\n      at: path\n    });\n  }\n};\nexport const getNewFileListData = (fileListData, indexId, children) => {\n  fileListData.forEach(item => {\n    if (item.indexId === indexId) {\n      item.children = children;\n    }\n    if (item === null || item === void 0 ? void 0 : item.children) {\n      getNewFileListData(item.children, indexId, children);\n    }\n  });\n  return fileListData;\n};\nexport const getUrl = uuid => {\n  return context.getSdocLocalFileUrl(uuid);\n};\nexport const onCopySdocLinkNode = (editor, element) => {\n  if (editor.selection == null || Range.isExpanded(editor.selection)) return;\n  const p = ReactEditor.findPath(editor, element);\n  Transforms.select(editor, p);\n  const newData = editor.setFragmentData(new DataTransfer());\n  copy('copy', {\n    onCopy: clipboardData => {\n      newData.types.forEach(type => {\n        const data = newData.getData(type);\n        clipboardData.setData(type, data);\n      });\n    }\n  });\n};\nexport const getBeforeText = editor => {\n  const {\n    selection\n  } = editor;\n  if (selection == null) return {\n    beforeText: '',\n    range: null\n  };\n  const {\n    anchor\n  } = selection;\n  // Find the near text node above the current text\n  const [[, beforeNodePath]] = Editor.nodes(editor, {\n    match: node => Text.isText(node),\n    mode: 'lowest'\n  });\n  const beforeNodeStartPoint = Editor.start(editor, beforeNodePath); // The starting position of the text node\n  const range = {\n    anchor,\n    focus: beforeNodeStartPoint\n  };\n  const beforeText = Editor.string(editor, range) || '';\n  return {\n    beforeText,\n    range\n  };\n};\nexport const isTriggeredByShortcut = editor => {\n  const {\n    beforeText\n  } = getBeforeText(editor);\n  const fileSearchInput = getFileSearchInputEntry(editor);\n  if (fileSearchInput) return false;\n  return beforeText.endsWith('[');\n};\n\n// If insert operation is triggered by shortcut, remove the '[[' symbol\nexport const removeShortCutSymbol = editor => {\n  // Check is trigger by short cut\n  const {\n    selection\n  } = editor;\n  const {\n    beforeText,\n    range: beforeRange\n  } = getBeforeText(editor);\n  const isTriggeredByShortCut = beforeText.slice(-2) === '[[';\n  isTriggeredByShortCut && Transforms.delete(editor, {\n    at: {\n      anchor: {\n        path: beforeRange.focus.path,\n        offset: beforeText.length - 2\n      },\n      focus: _objectSpread({}, selection.focus)\n    },\n    voids: true\n  });\n  focusEditor(editor);\n};\n\n// Generate temp input for collecting file name\nconst generateFileLinkInput = () => {\n  const input = generateEmptyElement(FILE_LINK_INSET_INPUT_TEMP);\n  return input;\n};\n\n// Insert temp input collecting file name\nexport const insertTempInput = editor => {\n  const {\n    selection\n  } = editor;\n  if (!Range.isCollapsed(selection)) return;\n  const tempInput = generateFileLinkInput();\n  const insertPoint = Editor.start(editor, selection);\n  Transforms.insertNodes(editor, tempInput, {\n    at: insertPoint\n  });\n  const path = Editor.path(editor, insertPoint);\n  const insertPath = Path.next(path);\n  const focusPoint = insertPath.concat(0);\n  focusEditor(editor, focusPoint);\n};\n\n// Remove temp input collecting file name\nexport const removeTempInput = (editor, element) => {\n  const path = ReactEditor.findPath(editor, element);\n  Transforms.delete(editor, {\n    at: path\n  });\n};\nexport const getFileSearchInputEntry = editor => {\n  const [searchInputNodeEntry] = Editor.nodes(editor, {\n    match: n => n.type === FILE_LINK_INSET_INPUT_TEMP\n  });\n  return searchInputNodeEntry;\n};\n\n// Insert text when remove file name collector, such as inserting 'filename' into prevNode when close collector entered '[[filename'\nexport const insertTextWhenRemoveFileNameCollector = (editor, searchInputNode) => {\n  const inputNodePath = ReactEditor.findPath(editor, searchInputNode);\n  if (!inputNodePath) return;\n  const prevNodeEntry = Editor.previous(editor, {\n    at: inputNodePath\n  });\n  if (!prevNodeEntry) return;\n  const searchContent = Node.string(searchInputNode);\n  const insertPoint = Editor.end(editor, prevNodeEntry[1]);\n  Transforms.insertText(editor, searchContent, {\n    at: insertPoint\n  });\n  removeTempInput(editor, searchInputNode);\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}