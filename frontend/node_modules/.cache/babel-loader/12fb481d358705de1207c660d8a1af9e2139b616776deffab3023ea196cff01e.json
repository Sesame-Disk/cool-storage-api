{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Fragment}from'react';import moment from'moment';import copy from'copy-to-clipboard';import toaster from'../toast';import{isPro,gettext}from'../../utils/constants';import{Utils}from'../../utils/utils';import CommonOperationConfirmationDialog from'../../components/dialog/common-operation-confirmation-dialog';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LinkItem=/*#__PURE__*/function(_React$Component){_inherits(LinkItem,_React$Component);var _super=_createSuper(LinkItem);function LinkItem(props){var _this;_classCallCheck(this,LinkItem);_this=_super.call(this,props);_this.onMouseOver=function(){_this.setState({isItemOpVisible:true});};_this.onMouseOut=function(){_this.setState({isItemOpVisible:false});};_this.cutLink=function(link){var length=link.length;return link.slice(0,9)+'...'+link.slice(length-5);};_this.onDeleteIconClicked=function(e){e.preventDefault();e.stopPropagation();_this.toggleDeleteShareLinkDialog();};_this.toggleDeleteShareLinkDialog=function(){_this.setState({isDeleteShareLinkDialogOpen:!_this.state.isDeleteShareLinkDialogOpen});};_this.onCopyIconClicked=function(e){e.preventDefault();e.stopPropagation();var item=_this.props.item;copy(item.link);toaster.success(gettext('Share link is copied to the clipboard.'));};_this.clickItem=function(e){_this.props.showLinkDetails(_this.props.item);};_this.onCheckboxClicked=function(e){e.stopPropagation();};_this.toggleSelectLink=function(e){var item=_this.props.item;_this.props.toggleSelectLink(item,e.target.checked);};_this.deleteLink=function(){var item=_this.props.item;_this.props.deleteLink(item.token);};_this.state={isItemOpVisible:false,isDeleteShareLinkDialogOpen:false};return _this;}_createClass(LinkItem,[{key:\"render\",value:function render(){var isItemOpVisible=this.state.isItemOpVisible;var item=this.props.item;var _item$isSelected=item.isSelected,isSelected=_item$isSelected===void 0?false:_item$isSelected,permissions=item.permissions,link=item.link,expire_date=item.expire_date;var currentPermission=Utils.getShareLinkPermissionStr(permissions);return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(\"tr\",{onClick:this.clickItem,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,className:\"cursor-pointer \".concat(isSelected?'tr-highlight':''),children:[/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:isSelected,className:\"vam\",onClick:this.onCheckboxClicked,onChange:this.toggleSelectLink})}),/*#__PURE__*/_jsx(\"td\",{children:this.cutLink(link)}),/*#__PURE__*/_jsx(\"td\",{children:isPro&&permissions&&Utils.getShareLinkPermissionObject(currentPermission).text}),/*#__PURE__*/_jsx(\"td\",{children:expire_date?moment(expire_date).format('YYYY-MM-DD HH:mm'):'--'}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"a\",{href:\"#\",role:\"button\",onClick:this.onCopyIconClicked,className:\"sf2-icon-copy action-icon \".concat(isItemOpVisible?'':'invisible'),title:gettext('Copy'),\"aria-label\":gettext('Copy')}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",role:\"button\",onClick:this.onDeleteIconClicked,className:\"sf2-icon-delete action-icon \".concat(isItemOpVisible?'':'invisible'),title:gettext('Delete'),\"aria-label\":gettext('Delete')})]})]}),this.state.isDeleteShareLinkDialogOpen&&/*#__PURE__*/_jsx(CommonOperationConfirmationDialog,{title:gettext('Delete share link'),message:gettext('Are you sure you want to delete the share link?'),executeOperation:this.deleteLink,confirmBtnText:gettext('Delete'),toggleDialog:this.toggleDeleteShareLinkDialog})]});}}]);return LinkItem;}(React.Component);export default LinkItem;","map":{"version":3,"names":["React","Fragment","moment","copy","toaster","isPro","gettext","Utils","CommonOperationConfirmationDialog","jsx","_jsx","jsxs","_jsxs","LinkItem","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","onMouseOver","setState","isItemOpVisible","onMouseOut","cutLink","link","length","slice","onDeleteIconClicked","e","preventDefault","stopPropagation","toggleDeleteShareLinkDialog","isDeleteShareLinkDialogOpen","state","onCopyIconClicked","item","success","clickItem","showLinkDetails","onCheckboxClicked","toggleSelectLink","target","checked","deleteLink","token","_createClass","key","value","render","_item$isSelected","isSelected","permissions","expire_date","currentPermission","getShareLinkPermissionStr","children","onClick","className","concat","type","onChange","getShareLinkPermissionObject","text","format","href","role","title","message","executeOperation","confirmBtnText","toggleDialog","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/share-link-panel/link-item.js"],"sourcesContent":["import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport copy from 'copy-to-clipboard';\nimport toaster from '../toast';\nimport { isPro, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport CommonOperationConfirmationDialog from '../../components/dialog/common-operation-confirmation-dialog';\n\nconst propTypes = {\n  item: PropTypes.object.isRequired,\n  showLinkDetails : PropTypes.func.isRequired,\n  toggleSelectLink: PropTypes.func.isRequired,\n  deleteLink: PropTypes.func.isRequired\n};\n\nclass LinkItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemOpVisible: false,\n      isDeleteShareLinkDialogOpen: false\n    };\n  }\n\n  onMouseOver = () => {\n    this.setState({\n      isItemOpVisible: true\n    });\n  };\n\n  onMouseOut = () => {\n    this.setState({\n      isItemOpVisible: false\n    });\n  };\n\n  cutLink = (link) => {\n    let length = link.length;\n    return link.slice(0, 9) + '...' + link.slice(length-5);\n  };\n\n  onDeleteIconClicked = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.toggleDeleteShareLinkDialog();\n  };\n\n  toggleDeleteShareLinkDialog = () => {\n    this.setState({isDeleteShareLinkDialogOpen: !this.state.isDeleteShareLinkDialogOpen});\n  };\n\n  onCopyIconClicked = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const { item } = this.props;\n    copy(item.link);\n    toaster.success(gettext('Share link is copied to the clipboard.'));\n  };\n\n  clickItem = (e) => {\n    this.props.showLinkDetails(this.props.item);\n  };\n\n  onCheckboxClicked = (e) => {\n    e.stopPropagation();\n  };\n\n  toggleSelectLink = (e) => {\n    const { item } = this.props;\n    this.props.toggleSelectLink(item, e.target.checked);\n  };\n\n  deleteLink = () => {\n    const { item } = this.props;\n    this.props.deleteLink(item.token);\n  };\n\n  render() {\n    const { isItemOpVisible } = this.state;\n    const { item } = this.props;\n    const { isSelected = false, permissions, link, expire_date } = item;\n    const currentPermission = Utils.getShareLinkPermissionStr(permissions);\n    return (\n      <Fragment>\n        <tr\n          onClick={this.clickItem}\n          onMouseOver={this.onMouseOver}\n          onMouseOut={this.onMouseOut}\n          className={`cursor-pointer ${isSelected ? 'tr-highlight' : ''}`}\n        >\n          <td className=\"text-center\">\n            <input\n              type=\"checkbox\"\n              checked={isSelected}\n              className=\"vam\"\n              onClick={this.onCheckboxClicked}\n              onChange={this.toggleSelectLink}\n            />\n          </td>\n          <td>\n            {this.cutLink(link)}\n          </td>\n          <td>\n            {(isPro && permissions) && Utils.getShareLinkPermissionObject(currentPermission).text}\n          </td>\n          <td>\n            {expire_date ? moment(expire_date).format('YYYY-MM-DD HH:mm') : '--'}\n          </td>\n          <td>\n            <a href=\"#\" role=\"button\" onClick={this.onCopyIconClicked} className={`sf2-icon-copy action-icon ${isItemOpVisible ? '' : 'invisible'}`} title={gettext('Copy')} aria-label={gettext('Copy')}></a>\n            <a href=\"#\" role=\"button\" onClick={this.onDeleteIconClicked} className={`sf2-icon-delete action-icon ${isItemOpVisible ? '' : 'invisible'}`} title={gettext('Delete')} aria-label={gettext('Delete')}></a>\n          </td>\n        </tr>\n        {this.state.isDeleteShareLinkDialogOpen && (\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete share link')}\n            message={gettext('Are you sure you want to delete the share link?')}\n            executeOperation={this.deleteLink}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteShareLinkDialog}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nLinkItem.propTypes = propTypes;\n\nexport default LinkItem;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}