{"ast":null,"code":"import _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { Editor, Transforms, Element } from '@seafile/slate';\nimport { CODE_BLOCK, TABLE } from '../../constants';\nexport var isMenuDisabled = function isMenuDisabled(editor, readonly) {\n  if (readonly) return true;\n  if (!editor.selection) return true;\n  var _Editor$nodes = Editor.nodes(editor, {\n      match: function match(node) {\n        return !Editor.isEditor(node) && Element.isElement(node) && Editor.isBlock(editor, node);\n      },\n      universal: true,\n      mode: 'highest'\n    }),\n    _Editor$nodes2 = _slicedToArray(_Editor$nodes, 1),\n    match = _Editor$nodes2[0];\n  var elementType = match[0].type;\n  // at present, TABLE got its own 'text align'\n  if (elementType === CODE_BLOCK || elementType === TABLE) {\n    return true;\n  }\n  return false;\n};\nexport var getAlignType = function getAlignType(editor) {\n  var defaultType = 'left';\n  var selection = editor.selection;\n  if (!selection) {\n    return defaultType;\n  }\n  var _Editor$nodes3 = Editor.nodes(editor, {\n      at: Editor.unhangRange(editor, selection),\n      match: function match(n) {\n        return !Editor.isEditor(n) && Element.isElement(n) && n['align'];\n      }\n    }),\n    _Editor$nodes4 = _slicedToArray(_Editor$nodes3, 1),\n    match = _Editor$nodes4[0];\n  if (!match) return defaultType;\n  return match[0].align;\n};\nexport var setAlignType = function setAlignType(editor, type) {\n  Transforms.setNodes(editor, {\n    'align': type\n  });\n};","map":{"version":3,"names":["Editor","Transforms","Element","CODE_BLOCK","TABLE","isMenuDisabled","editor","readonly","selection","_Editor$nodes","nodes","match","node","isEditor","isElement","isBlock","universal","mode","_Editor$nodes2","_slicedToArray","elementType","type","getAlignType","defaultType","_Editor$nodes3","at","unhangRange","n","_Editor$nodes4","align","setAlignType","setNodes"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/extension/plugins/text-align/helpers.js"],"sourcesContent":["import { Editor, Transforms, Element } from '@seafile/slate';\nimport { CODE_BLOCK, TABLE } from '../../constants';\nexport const isMenuDisabled = (editor, readonly) => {\n  if (readonly) return true;\n  if (!editor.selection) return true;\n  const [match] = Editor.nodes(editor, {\n    match: node => {\n      return !Editor.isEditor(node) && Element.isElement(node) && Editor.isBlock(editor, node);\n    },\n    universal: true,\n    mode: 'highest'\n  });\n  const elementType = match[0].type;\n  // at present, TABLE got its own 'text align'\n  if (elementType === CODE_BLOCK || elementType === TABLE) {\n    return true;\n  }\n  return false;\n};\nexport const getAlignType = editor => {\n  const defaultType = 'left';\n  const {\n    selection\n  } = editor;\n  if (!selection) {\n    return defaultType;\n  }\n  const [match] = Editor.nodes(editor, {\n    at: Editor.unhangRange(editor, selection),\n    match: n => !Editor.isEditor(n) && Element.isElement(n) && n['align']\n  });\n  if (!match) return defaultType;\n  return match[0].align;\n};\nexport const setAlignType = (editor, type) => {\n  Transforms.setNodes(editor, {\n    'align': type\n  });\n};"],"mappings":";AAAA,SAASA,MAAM,EAAEC,UAAU,EAAEC,OAAO,QAAQ,gBAAgB;AAC5D,SAASC,UAAU,EAAEC,KAAK,QAAQ,iBAAiB;AACnD,OAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAcA,CAAIC,MAAM,EAAEC,QAAQ,EAAK;EAClD,IAAIA,QAAQ,EAAE,OAAO,IAAI;EACzB,IAAI,CAACD,MAAM,CAACE,SAAS,EAAE,OAAO,IAAI;EAClC,IAAAC,aAAA,GAAgBT,MAAM,CAACU,KAAK,CAACJ,MAAM,EAAE;MACnCK,KAAK,EAAE,SAAAA,MAAAC,IAAI,EAAI;QACb,OAAO,CAACZ,MAAM,CAACa,QAAQ,CAACD,IAAI,CAAC,IAAIV,OAAO,CAACY,SAAS,CAACF,IAAI,CAAC,IAAIZ,MAAM,CAACe,OAAO,CAACT,MAAM,EAAEM,IAAI,CAAC;MAC1F,CAAC;MACDI,SAAS,EAAE,IAAI;MACfC,IAAI,EAAE;IACR,CAAC,CAAC;IAAAC,cAAA,GAAAC,cAAA,CAAAV,aAAA;IANKE,KAAK,GAAAO,cAAA;EAOZ,IAAME,WAAW,GAAGT,KAAK,CAAC,CAAC,CAAC,CAACU,IAAI;EACjC;EACA,IAAID,WAAW,KAAKjB,UAAU,IAAIiB,WAAW,KAAKhB,KAAK,EAAE;IACvD,OAAO,IAAI;EACb;EACA,OAAO,KAAK;AACd,CAAC;AACD,OAAO,IAAMkB,YAAY,GAAG,SAAfA,YAAYA,CAAGhB,MAAM,EAAI;EACpC,IAAMiB,WAAW,GAAG,MAAM;EAC1B,IACEf,SAAS,GACPF,MAAM,CADRE,SAAS;EAEX,IAAI,CAACA,SAAS,EAAE;IACd,OAAOe,WAAW;EACpB;EACA,IAAAC,cAAA,GAAgBxB,MAAM,CAACU,KAAK,CAACJ,MAAM,EAAE;MACnCmB,EAAE,EAAEzB,MAAM,CAAC0B,WAAW,CAACpB,MAAM,EAAEE,SAAS,CAAC;MACzCG,KAAK,EAAE,SAAAA,MAAAgB,CAAC;QAAA,OAAI,CAAC3B,MAAM,CAACa,QAAQ,CAACc,CAAC,CAAC,IAAIzB,OAAO,CAACY,SAAS,CAACa,CAAC,CAAC,IAAIA,CAAC,CAAC,OAAO,CAAC;MAAA;IACvE,CAAC,CAAC;IAAAC,cAAA,GAAAT,cAAA,CAAAK,cAAA;IAHKb,KAAK,GAAAiB,cAAA;EAIZ,IAAI,CAACjB,KAAK,EAAE,OAAOY,WAAW;EAC9B,OAAOZ,KAAK,CAAC,CAAC,CAAC,CAACkB,KAAK;AACvB,CAAC;AACD,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CAAIxB,MAAM,EAAEe,IAAI,EAAK;EAC5CpB,UAAU,CAAC8B,QAAQ,CAACzB,MAAM,EAAE;IAC1B,OAAO,EAAEe;EACX,CAAC,CAAC;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}