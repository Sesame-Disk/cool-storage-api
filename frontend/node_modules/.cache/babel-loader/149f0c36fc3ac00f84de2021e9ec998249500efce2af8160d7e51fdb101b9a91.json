{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{Button,Modal,ModalHeader,ModalBody,ModalFooter,Input,Form,FormGroup,Label}from'reactstrap';import{gettext}from'../../../utils/constants';import{seafileAPI}from'../../../utils/seafile-api';import{Utils}from'../../../utils/utils';import toaster from'../../../components/toast';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RenameDepartmentDialog=/*#__PURE__*/function(_React$Component){_inherits(RenameDepartmentDialog,_React$Component);var _super=_createSuper(RenameDepartmentDialog);function RenameDepartmentDialog(props){var _this;_classCallCheck(this,RenameDepartmentDialog);_this=_super.call(this,props);_this.handleSubmit=function(){var isValid=_this.validateName();if(isValid){seafileAPI.sysAdminRenameDepartment(_this.props.groupID,_this.state.departmentName.trim()).then(function(res){_this.props.toggle();_this.props.onDepartmentNameChanged(res.data);toaster.success(gettext('Success'));}).catch(function(error){var errorMsg=Utils.getErrorMsg(error);_this.setState({errMessage:errorMsg});});}};_this.validateName=function(){var errMessage='';var name=_this.state.departmentName.trim();if(!name.length){errMessage=gettext('Name is required');_this.setState({errMessage:errMessage});return false;}return true;};_this.handleChange=function(e){_this.setState({departmentName:e.target.value});};_this.handleKeyDown=function(e){if(e.key==='Enter'){_this.handleSubmit();e.preventDefault();}};_this.onAfterModelOpened=function(){if(!_this.newInput.current)return;_this.newInput.current.focus();_this.newInput.current.select();};_this.state={departmentName:_this.props.name,errMessage:''};_this.newInput=/*#__PURE__*/React.createRef();return _this;}_createClass(RenameDepartmentDialog,[{key:\"render\",value:function render(){var header=gettext('Rename Department');return/*#__PURE__*/_jsxs(Modal,{isOpen:true,toggle:this.props.toggle,onOpened:this.onAfterModelOpened,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:this.props.toggle,children:header}),/*#__PURE__*/_jsxs(ModalBody,{children:[/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"departmentName\",children:gettext('Name')}),/*#__PURE__*/_jsx(Input,{id:\"departmentName\",onKeyDown:this.handleKeyDown,value:this.state.departmentName,onChange:this.handleChange,innerRef:this.newInput})]})}),this.state.errMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:this.state.errMessage})]}),/*#__PURE__*/_jsxs(ModalFooter,{children:[/*#__PURE__*/_jsx(Button,{color:\"secondary\",onClick:this.props.toggle,children:gettext('Cancel')}),/*#__PURE__*/_jsx(Button,{color:\"primary\",onClick:this.handleSubmit,children:gettext('Submit')})]})]});}}]);return RenameDepartmentDialog;}(React.Component);export default RenameDepartmentDialog;","map":{"version":3,"names":["React","Button","Modal","ModalHeader","ModalBody","ModalFooter","Input","Form","FormGroup","Label","gettext","seafileAPI","Utils","toaster","jsx","_jsx","jsxs","_jsxs","RenameDepartmentDialog","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","handleSubmit","isValid","validateName","sysAdminRenameDepartment","groupID","state","departmentName","trim","then","res","toggle","onDepartmentNameChanged","data","success","catch","error","errorMsg","getErrorMsg","setState","errMessage","name","length","handleChange","e","target","value","handleKeyDown","key","preventDefault","onAfterModelOpened","newInput","current","focus","select","createRef","_createClass","render","header","isOpen","onOpened","children","for","id","onKeyDown","onChange","innerRef","className","color","onClick","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-rename-department-dialog.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Form, FormGroup, Label } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nconst propTypes = {\n  groupID: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number\n  ]).isRequired,\n  name: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired,\n  onDepartmentNameChanged: PropTypes.func.isRequired\n};\n\nclass RenameDepartmentDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      departmentName: this.props.name,\n      errMessage: ''\n    };\n    this.newInput = React.createRef();\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateName();\n    if (isValid) {\n      seafileAPI.sysAdminRenameDepartment(this.props.groupID, this.state.departmentName.trim()).then((res) => {\n        this.props.toggle();\n        this.props.onDepartmentNameChanged(res.data);\n        toaster.success(gettext('Success'));\n      }).catch(error => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({ errMessage: errorMsg });\n      });\n    }\n  };\n\n  validateName = () => {\n    let errMessage = '';\n    const name = this.state.departmentName.trim();\n    if (!name.length) {\n      errMessage = gettext('Name is required');\n      this.setState({ errMessage: errMessage });\n      return false;\n    }\n    return true;\n  };\n\n  handleChange = (e) => {\n    this.setState({\n      departmentName: e.target.value\n    });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  };\n\n  onAfterModelOpened = () => {\n    if (!this.newInput.current) return;\n    this.newInput.current.focus();\n    this.newInput.current.select();\n  };\n\n  render() {\n    let header = gettext('Rename Department');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle} onOpened={this.onAfterModelOpened}>\n        <ModalHeader toggle={this.props.toggle}>{header}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"departmentName\">{gettext('Name')}</Label>\n              <Input\n                id=\"departmentName\"\n                onKeyDown={this.handleKeyDown}\n                value={this.state.departmentName}\n                onChange={this.handleChange}\n                innerRef={this.newInput}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRenameDepartmentDialog.propTypes = propTypes;\n\nexport default RenameDepartmentDialog;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}