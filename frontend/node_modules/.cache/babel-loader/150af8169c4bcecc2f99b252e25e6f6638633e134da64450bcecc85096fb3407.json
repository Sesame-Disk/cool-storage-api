{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Fragment}from'react';import moment from'moment';import{gettext}from'../../../utils/constants';import{Utils}from'../../../utils/utils';import{seafileAPI}from'../../../utils/seafile-api';import RepoTag from'../../../models/repo-tag';import toaster from'../../../components/toast';import Icon from'../../../components/icon';import EditFileTagPopover from'../../../components/popover/edit-filetag-popover';import FileTagList from'../../../components/file-tag-list';import'../../../css/dirent-detail.css';import'../css/detail-list-view.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _window$app$pageOptio=window.app.pageOptions,repoID=_window$app$pageOptio.repoID,filePath=_window$app$pageOptio.filePath;var DetailListView=/*#__PURE__*/function(_React$Component){_inherits(DetailListView,_React$Component);var _super=_createSuper(DetailListView);function DetailListView(props){var _this;_classCallCheck(this,DetailListView);_this=_super.call(this,props);_this.onNewRepoTagAdded=function(newTag){var repoTag=new RepoTag(newTag);var newTags=_this.state.repoTags;newTags.push(repoTag);_this.setState({repoTags:newTags});};_this.onEditFileTagToggle=function(){_this.setState({isEditFileTagShow:!_this.state.isEditFileTagShow});};_this.state={repoTags:[],isEditFileTagShow:false};return _this;}_createClass(DetailListView,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;seafileAPI.listRepoTags(repoID).then(function(res){var repoTags=[];res.data.repo_tags.forEach(function(item){var repoTag=new RepoTag(item);repoTags.push(repoTag);});_this2.setState({repoTags:repoTags});}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});}},{key:\"render\",value:function render(){var fileInfo=this.props.fileInfo;var repoTags=this.state.repoTags;return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"dirent-table-container p-2\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table-thead-hidden\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{width:\"35%\"}),/*#__PURE__*/_jsx(\"th\",{width:\"65%\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:gettext('Size')}),/*#__PURE__*/_jsx(\"td\",{children:Utils.bytesToSize(fileInfo.size)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:gettext('Location')}),/*#__PURE__*/_jsx(\"td\",{children:filePath})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:gettext('Last Update')}),/*#__PURE__*/_jsx(\"td\",{children:moment(fileInfo.mtime*1000).fromNow()})]}),/*#__PURE__*/_jsxs(\"tr\",{className:\"file-tag-container\",children:[/*#__PURE__*/_jsx(\"th\",{children:gettext('Tags')}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(FileTagList,{fileTagList:this.props.fileTagList}),/*#__PURE__*/_jsx(\"span\",{onClick:this.onEditFileTagToggle,id:\"file-tag-container-icon\",children:/*#__PURE__*/_jsx(Icon,{symbol:\"tag\"})})]})]})]})]})}),this.state.isEditFileTagShow&&/*#__PURE__*/_jsx(EditFileTagPopover,{repoID:repoID,repoTags:repoTags,filePath:filePath,fileTagList:this.props.fileTagList,toggleCancel:this.onEditFileTagToggle,onFileTagChanged:this.props.onFileTagChanged,onNewRepoTagAdded:this.onNewRepoTagAdded,target:'file-tag-container-icon',isEditFileTagShow:this.state.isEditFileTagShow})]});}}]);return DetailListView;}(React.Component);DetailListView.defaultProps={fileTagList:[]};export default DetailListView;","map":{"version":3,"names":["React","Fragment","moment","gettext","Utils","seafileAPI","RepoTag","toaster","Icon","EditFileTagPopover","FileTagList","jsx","_jsx","jsxs","_jsxs","_window$app$pageOptio","window","app","pageOptions","repoID","filePath","DetailListView","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","onNewRepoTagAdded","newTag","repoTag","newTags","state","repoTags","push","setState","onEditFileTagToggle","isEditFileTagShow","_createClass","key","value","componentDidMount","_this2","listRepoTags","then","res","data","repo_tags","forEach","item","catch","error","errMessage","getErrorMsg","danger","render","fileInfo","children","className","width","bytesToSize","size","mtime","fromNow","fileTagList","onClick","id","symbol","toggleCancel","onFileTagChanged","target","Component","defaultProps"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/markdown-editor/detail-list-view/index.js"],"sourcesContent":["import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport RepoTag from '../../../models/repo-tag';\nimport toaster from '../../../components/toast';\nimport Icon from '../../../components/icon';\nimport EditFileTagPopover from '../../../components/popover/edit-filetag-popover';\nimport FileTagList from '../../../components/file-tag-list';\n\nimport '../../../css/dirent-detail.css';\nimport '../css/detail-list-view.css';\n\nconst { repoID, filePath } = window.app.pageOptions;\n\nconst propTypes = {\n  fileInfo: PropTypes.object.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired\n};\n\nclass DetailListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoTags: [],\n      isEditFileTagShow: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let repoTags = [];\n      res.data.repo_tags.forEach(item => {\n        const repoTag = new RepoTag(item);\n        repoTags.push(repoTag);\n      });\n      this.setState({\n        repoTags: repoTags\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onNewRepoTagAdded = (newTag) => {\n    const repoTag = new RepoTag(newTag);\n    const { repoTags: newTags } = this.state;\n    newTags.push(repoTag);\n    this.setState({\n      repoTags: newTags\n    });\n  };\n\n  onEditFileTagToggle = () => {\n    this.setState({isEditFileTagShow: !this.state.isEditFileTagShow});\n  };\n\n  render() {\n    const { fileInfo } = this.props;\n    const { repoTags } = this.state;\n    return (\n      <Fragment>\n        <div className=\"dirent-table-container p-2\">\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n            </thead>\n            <tbody>\n              <tr><th>{gettext('Size')}</th><td>{Utils.bytesToSize(fileInfo.size)}</td></tr>\n              <tr><th>{gettext('Location')}</th><td>{filePath}</td></tr>\n              <tr><th>{gettext('Last Update')}</th><td>{moment(fileInfo.mtime * 1000).fromNow()}</td></tr>\n              <tr className=\"file-tag-container\">\n                <th>{gettext('Tags')}</th>\n                <td>\n                  <FileTagList fileTagList={this.props.fileTagList} />\n                  <span onClick={this.onEditFileTagToggle} id='file-tag-container-icon'><Icon symbol='tag' /></span>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n        {this.state.isEditFileTagShow &&\n          <EditFileTagPopover\n            repoID={repoID}\n            repoTags={repoTags}\n            filePath={filePath}\n            fileTagList={this.props.fileTagList}\n            toggleCancel={this.onEditFileTagToggle}\n            onFileTagChanged={this.props.onFileTagChanged}\n            onNewRepoTagAdded={this.onNewRepoTagAdded}\n            target={'file-tag-container-icon'}\n            isEditFileTagShow={this.state.isEditFileTagShow}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nDetailListView.defaultProps = {\n  fileTagList: [],\n};\n\nDetailListView.propTypes = propTypes;\n\nexport default DetailListView;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}