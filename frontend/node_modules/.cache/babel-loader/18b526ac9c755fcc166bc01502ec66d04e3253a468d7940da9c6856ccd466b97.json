{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _isHotkey = _interopRequireDefault(require(\"is-hotkey\"));\nvar FallbackEditor = function FallbackEditor(_ref) {\n  var enableEdit = _ref.enableEdit,\n    propsValue = _ref.value,\n    propsOnChange = _ref.onChange,\n    closeEditor = _ref.closeEditor;\n  var _ref2 = (0, _react.useState)(propsValue),\n    _ref3 = _slicedToArray(_ref2, 2),\n    value = _ref3[0],\n    setValue = _ref3[1];\n  var showEditorRef = (0, _react.useRef)(false);\n  var inputRef = (0, _react.useRef)(null);\n  (0, _react.useEffect)(function () {\n    if (enableEdit === showEditorRef.current) return;\n    if (enableEdit && !showEditorRef.current) {\n      setTimeout(function () {\n        return inputRef.current.focus();\n      });\n    }\n  }, [enableEdit]);\n  var onChange = (0, _react.useCallback)(function (event) {\n    var newValue = event.target.value;\n    if (newValue === value) return;\n    setValue(newValue);\n    propsOnChange && propsOnChange({\n      text: newValue,\n      preview: newValue ? newValue.slice(0, 30) : '',\n      links: [],\n      images: []\n    });\n  }, [value, propsOnChange]);\n  var onKeyDown = (0, _react.useCallback)(function (e) {\n    var _e$currentTarget = e.currentTarget,\n      selectionStart = _e$currentTarget.selectionStart,\n      selectionEnd = _e$currentTarget.selectionEnd,\n      value = _e$currentTarget.value;\n    if ((0, _isHotkey.default)('enter', e)) {\n      e.preventDefault();\n      closeEditor && closeEditor();\n      inputRef.current.blur();\n    } else if (e.keyCode === 37 && selectionStart === 0 || e.keyCode === 39 && selectionEnd === value.length) {\n      e.stopPropagation();\n    }\n  }, [closeEditor]);\n  var onPaste = (0, _react.useCallback)(function (e) {\n    e.stopPropagation();\n  }, []);\n  var onCut = (0, _react.useCallback)(function (e) {\n    e.stopPropagation();\n  }, []);\n  return /*#__PURE__*/_react.default.createElement(\"textarea\", {\n    className: \"form-control sf-long-text-inline-fallback-editor-container\",\n    ref: inputRef,\n    rows: 5,\n    value: value,\n    onChange: onChange,\n    onKeyDown: onKeyDown,\n    onPaste: onPaste,\n    onCut: onCut\n  });\n};\nvar _default = exports.default = FallbackEditor;","map":{"version":3,"names":["_slicedToArray","require","default","_interopRequireDefault","_interopRequireWildcard","Object","defineProperty","exports","value","_react","_isHotkey","FallbackEditor","_ref","enableEdit","propsValue","propsOnChange","onChange","closeEditor","_ref2","useState","_ref3","setValue","showEditorRef","useRef","inputRef","useEffect","current","setTimeout","focus","useCallback","event","newValue","target","text","preview","slice","links","images","onKeyDown","e","_e$currentTarget","currentTarget","selectionStart","selectionEnd","preventDefault","blur","keyCode","length","stopPropagation","onPaste","onCut","createElement","className","ref","rows","_default"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/pages/longtext-inline-editor/fallback-editor.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _isHotkey = _interopRequireDefault(require(\"is-hotkey\"));\nconst FallbackEditor = _ref => {\n  let {\n    enableEdit,\n    value: propsValue,\n    onChange: propsOnChange,\n    closeEditor\n  } = _ref;\n  const [value, setValue] = (0, _react.useState)(propsValue);\n  const showEditorRef = (0, _react.useRef)(false);\n  const inputRef = (0, _react.useRef)(null);\n  (0, _react.useEffect)(() => {\n    if (enableEdit === showEditorRef.current) return;\n    if (enableEdit && !showEditorRef.current) {\n      setTimeout(() => inputRef.current.focus());\n    }\n  }, [enableEdit]);\n  const onChange = (0, _react.useCallback)(event => {\n    const newValue = event.target.value;\n    if (newValue === value) return;\n    setValue(newValue);\n    propsOnChange && propsOnChange({\n      text: newValue,\n      preview: newValue ? newValue.slice(0, 30) : '',\n      links: [],\n      images: []\n    });\n  }, [value, propsOnChange]);\n  const onKeyDown = (0, _react.useCallback)(e => {\n    let {\n      selectionStart,\n      selectionEnd,\n      value\n    } = e.currentTarget;\n    if ((0, _isHotkey.default)('enter', e)) {\n      e.preventDefault();\n      closeEditor && closeEditor();\n      inputRef.current.blur();\n    } else if (e.keyCode === 37 && selectionStart === 0 || e.keyCode === 39 && selectionEnd === value.length) {\n      e.stopPropagation();\n    }\n  }, [closeEditor]);\n  const onPaste = (0, _react.useCallback)(e => {\n    e.stopPropagation();\n  }, []);\n  const onCut = (0, _react.useCallback)(e => {\n    e.stopPropagation();\n  }, []);\n  return /*#__PURE__*/_react.default.createElement(\"textarea\", {\n    className: \"form-control sf-long-text-inline-fallback-editor-container\",\n    ref: inputRef,\n    rows: 5,\n    value: value,\n    onChange: onChange,\n    onKeyDown: onKeyDown,\n    onPaste: onPaste,\n    onCut: onCut\n  });\n};\nvar _default = exports.default = FallbackEditor;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}