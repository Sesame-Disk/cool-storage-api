{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{Button,Modal,ModalHeader,ModalBody,ModalFooter,Input,Form,FormGroup,Label}from'reactstrap';import{gettext}from'../../../utils/constants';import{seafileAPI}from'../../../utils/seafile-api';import{Utils}from'../../../utils/utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddRepoDialog=/*#__PURE__*/function(_React$Component){_inherits(AddRepoDialog,_React$Component);var _super=_createSuper(AddRepoDialog);function AddRepoDialog(props){var _this;_classCallCheck(this,AddRepoDialog);_this=_super.call(this,props);_this.handleSubmit=function(){var isValid=_this.validateName();if(isValid){seafileAPI.sysAdminAddRepoInDepartment(_this.props.groupID,_this.state.repoName.trim()).then(function(res){_this.props.toggle();_this.props.onAddNewRepo(res.data);}).catch(function(error){var errorMsg=Utils.getErrorMsg(error);_this.setState({errMessage:errorMsg});});}};_this.validateName=function(){var errMessage='';var name=_this.state.repoName.trim();if(!name.length){errMessage=gettext('Name is required');_this.setState({errMessage:errMessage});return false;}return true;};_this.handleChange=function(e){_this.setState({repoName:e.target.value});};_this.handleKeyDown=function(e){if(e.key==='Enter'){_this.handleSubmit();e.preventDefault();}};_this.state={repoName:'',errMessage:''};return _this;}_createClass(AddRepoDialog,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(Modal,{isOpen:true,toggle:this.props.toggle,autoFocus:false,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:this.props.toggle,children:gettext('New Library')}),/*#__PURE__*/_jsxs(ModalBody,{children:[/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"repoName\",children:gettext('Name')}),/*#__PURE__*/_jsx(Input,{id:\"repoName\",onKeyDown:this.handleKeyDown,value:this.state.repoName,onChange:this.handleChange,autoFocus:true})]})}),this.state.errMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:this.state.errMessage})]}),/*#__PURE__*/_jsxs(ModalFooter,{children:[/*#__PURE__*/_jsx(Button,{color:\"secondary\",onClick:this.props.toggle,children:gettext('Cancel')}),/*#__PURE__*/_jsx(Button,{color:\"primary\",onClick:this.handleSubmit,children:gettext('Submit')})]})]});}}]);return AddRepoDialog;}(React.Component);export default AddRepoDialog;","map":{"version":3,"names":["React","Button","Modal","ModalHeader","ModalBody","ModalFooter","Input","Form","FormGroup","Label","gettext","seafileAPI","Utils","jsx","_jsx","jsxs","_jsxs","AddRepoDialog","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","handleSubmit","isValid","validateName","sysAdminAddRepoInDepartment","groupID","state","repoName","trim","then","res","toggle","onAddNewRepo","data","catch","error","errorMsg","getErrorMsg","setState","errMessage","name","length","handleChange","e","target","value","handleKeyDown","key","preventDefault","_createClass","render","isOpen","autoFocus","children","for","id","onKeyDown","onChange","className","color","onClick","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-add-repo-dialog.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Form, FormGroup, Label } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  groupID: PropTypes.string,\n  onAddNewRepo: PropTypes.func.isRequired\n};\n\nclass AddRepoDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      errMessage: '',\n    };\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateName();\n    if (isValid) {\n      seafileAPI.sysAdminAddRepoInDepartment(this.props.groupID, this.state.repoName.trim()).then((res) => {\n        this.props.toggle();\n        this.props.onAddNewRepo(res.data);\n      }).catch(error => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({ errMessage: errorMsg });\n      });\n    }\n  };\n\n  validateName = () => {\n    let errMessage = '';\n    const name = this.state.repoName.trim();\n    if (!name.length) {\n      errMessage = gettext('Name is required');\n      this.setState({ errMessage: errMessage });\n      return false;\n    }\n    return true;\n  };\n\n  handleChange = (e) => {\n    this.setState({\n      repoName: e.target.value,\n    });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('New Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repoName\">{gettext('Name')}</Label>\n              <Input\n                id=\"repoName\"\n                onKeyDown={this.handleKeyDown}\n                value={this.state.repoName}\n                onChange={this.handleChange}\n                autoFocus={true}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p> }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAddRepoDialog.propTypes = propTypes;\n\nexport default AddRepoDialog;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}