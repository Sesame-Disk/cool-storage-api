{"ast":null,"code":"import _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { EventBus } from '../../../basic-sdk';\nimport { eventStopPropagation } from '../../../basic-sdk/utils/mouse-event';\nimport { INTERNAL_EVENT } from '../../../basic-sdk/constants';\nimport './index.css';\nexport default function CommentsOperation() {\n  var _useState = useState(0),\n    _useState2 = _slicedToArray(_useState, 2),\n    unseenNotificationsCount = _useState2[0],\n    setUnseenNotificationsCount = _useState2[1];\n  var onCommentsToggle = useCallback(function (event) {\n    eventStopPropagation(event);\n    var eventBus = EventBus.getInstance();\n    eventBus.dispatch(INTERNAL_EVENT.COMMENT_LIST_CLICK);\n  }, []);\n  useEffect(function () {\n    var eventBus = EventBus.getInstance();\n    var unsubscribeUnseenNotificationsCount = eventBus.subscribe(INTERNAL_EVENT.UNSEEN_NOTIFICATIONS_COUNT, function (count) {\n      return setUnseenNotificationsCount(count);\n    });\n    return function () {\n      unsubscribeUnseenNotificationsCount();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return /*#__PURE__*/React.createElement(\"span\", {\n    className: \"op-item sdoc-notification-container\",\n    onClick: onCommentsToggle\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"sdocfont sdoc-comments\"\n  }), unseenNotificationsCount > 0 && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sdoc-notification-count\"\n  }, unseenNotificationsCount));\n}","map":{"version":3,"names":["React","useCallback","useEffect","useState","EventBus","eventStopPropagation","INTERNAL_EVENT","CommentsOperation","_useState","_useState2","_slicedToArray","unseenNotificationsCount","setUnseenNotificationsCount","onCommentsToggle","event","eventBus","getInstance","dispatch","COMMENT_LIST_CLICK","unsubscribeUnseenNotificationsCount","subscribe","UNSEEN_NOTIFICATIONS_COUNT","count","createElement","className","onClick"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/components/doc-operations/comments-operation/index.js"],"sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\nimport { EventBus } from '../../../basic-sdk';\nimport { eventStopPropagation } from '../../../basic-sdk/utils/mouse-event';\nimport { INTERNAL_EVENT } from '../../../basic-sdk/constants';\nimport './index.css';\nexport default function CommentsOperation() {\n  const [unseenNotificationsCount, setUnseenNotificationsCount] = useState(0);\n  const onCommentsToggle = useCallback(event => {\n    eventStopPropagation(event);\n    const eventBus = EventBus.getInstance();\n    eventBus.dispatch(INTERNAL_EVENT.COMMENT_LIST_CLICK);\n  }, []);\n  useEffect(() => {\n    const eventBus = EventBus.getInstance();\n    const unsubscribeUnseenNotificationsCount = eventBus.subscribe(INTERNAL_EVENT.UNSEEN_NOTIFICATIONS_COUNT, count => setUnseenNotificationsCount(count));\n    return () => {\n      unsubscribeUnseenNotificationsCount();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return /*#__PURE__*/React.createElement(\"span\", {\n    className: \"op-item sdoc-notification-container\",\n    onClick: onCommentsToggle\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"sdocfont sdoc-comments\"\n  }), unseenNotificationsCount > 0 && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sdoc-notification-count\"\n  }, unseenNotificationsCount));\n}"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,WAAW,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC/D,SAASC,QAAQ,QAAQ,oBAAoB;AAC7C,SAASC,oBAAoB,QAAQ,sCAAsC;AAC3E,SAASC,cAAc,QAAQ,8BAA8B;AAC7D,OAAO,aAAa;AACpB,eAAe,SAASC,iBAAiBA,CAAA,EAAG;EAC1C,IAAAC,SAAA,GAAgEL,QAAQ,CAAC,CAAC,CAAC;IAAAM,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAApEG,wBAAwB,GAAAF,UAAA;IAAEG,2BAA2B,GAAAH,UAAA;EAC5D,IAAMI,gBAAgB,GAAGZ,WAAW,CAAC,UAAAa,KAAK,EAAI;IAC5CT,oBAAoB,CAACS,KAAK,CAAC;IAC3B,IAAMC,QAAQ,GAAGX,QAAQ,CAACY,WAAW,CAAC,CAAC;IACvCD,QAAQ,CAACE,QAAQ,CAACX,cAAc,CAACY,kBAAkB,CAAC;EACtD,CAAC,EAAE,EAAE,CAAC;EACNhB,SAAS,CAAC,YAAM;IACd,IAAMa,QAAQ,GAAGX,QAAQ,CAACY,WAAW,CAAC,CAAC;IACvC,IAAMG,mCAAmC,GAAGJ,QAAQ,CAACK,SAAS,CAACd,cAAc,CAACe,0BAA0B,EAAE,UAAAC,KAAK;MAAA,OAAIV,2BAA2B,CAACU,KAAK,CAAC;IAAA,EAAC;IACtJ,OAAO,YAAM;MACXH,mCAAmC,CAAC,CAAC;IACvC,CAAC;IACD;EACF,CAAC,EAAE,EAAE,CAAC;EACN,OAAO,aAAanB,KAAK,CAACuB,aAAa,CAAC,MAAM,EAAE;IAC9CC,SAAS,EAAE,qCAAqC;IAChDC,OAAO,EAAEZ;EACX,CAAC,EAAE,aAAab,KAAK,CAACuB,aAAa,CAAC,GAAG,EAAE;IACvCC,SAAS,EAAE;EACb,CAAC,CAAC,EAAEb,wBAAwB,GAAG,CAAC,IAAI,aAAaX,KAAK,CAACuB,aAAa,CAAC,MAAM,EAAE;IAC3EC,SAAS,EAAE;EACb,CAAC,EAAEb,wBAAwB,CAAC,CAAC;AAC/B"},"metadata":{},"sourceType":"module","externalDependencies":[]}