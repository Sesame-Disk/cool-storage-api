{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _slateReact = require(\"slate-react\");\nvar _eventTypes = require(\"../../../constants/event-types\");\nvar _eventBus = _interopRequireDefault(require(\"../../../utils/event-bus\"));\nrequire(\"./formula.css\");\nvar Formula = function Formula(_ref) {\n  var attributes = _ref.attributes,\n    element = _ref.element,\n    children = _ref.children;\n  var isSelected = (0, _slateReact.useSelected)();\n  var formulaContainerRef = (0, _react.useRef)(null);\n  (0, _react.useEffect)(function () {\n    var _ref2 = element.data || {},\n      _ref2$formula = _ref2.formula,\n      formula = _ref2$formula === void 0 ? '' : _ref2$formula;\n    if (!formula) return;\n    if (formulaContainerRef.current && window.MathJax) {\n      formulaContainerRef.current.innerHTML = '';\n      var dom = window.MathJax.tex2svg(formula);\n      formulaContainerRef.current.appendChild(dom);\n    }\n  }, [element]);\n  var toggleFormulaEditor = (0, _react.useCallback)(function () {\n    var eventBus = _eventBus.default.getInstance();\n    eventBus.dispatch(_eventTypes.INTERNAL_EVENTS.ON_OPEN_FORMULA_DIALOG, element);\n  }, [element]);\n  return /*#__PURE__*/_react.default.createElement(\"span\", Object.assign({\n    onDoubleClick: toggleFormulaEditor,\n    className: 'sf-block-formula ' + (isSelected ? ' sf-selected-formula' : '')\n  }, attributes), /*#__PURE__*/_react.default.createElement(\"span\", {\n    contentEditable: false,\n    ref: formulaContainerRef\n  }), /*#__PURE__*/_react.default.createElement(\"span\", {\n    contentEditable: false\n  }, children));\n};\nvar renderFormula = function renderFormula(props) {\n  return /*#__PURE__*/_react.default.createElement(Formula, props);\n};\nvar _default = exports.default = renderFormula;","map":{"version":3,"names":["_interopRequireDefault","require","default","_interopRequireWildcard","Object","defineProperty","exports","value","_react","_slateReact","_eventTypes","_eventBus","Formula","_ref","attributes","element","children","isSelected","useSelected","formulaContainerRef","useRef","useEffect","_ref2","data","_ref2$formula","formula","current","window","MathJax","innerHTML","dom","tex2svg","appendChild","toggleFormulaEditor","useCallback","eventBus","getInstance","dispatch","INTERNAL_EVENTS","ON_OPEN_FORMULA_DIALOG","createElement","assign","onDoubleClick","className","contentEditable","ref","renderFormula","props","_default"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/extension/plugins/formula/render-elem.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _slateReact = require(\"slate-react\");\nvar _eventTypes = require(\"../../../constants/event-types\");\nvar _eventBus = _interopRequireDefault(require(\"../../../utils/event-bus\"));\nrequire(\"./formula.css\");\nconst Formula = _ref => {\n  let {\n    attributes,\n    element,\n    children\n  } = _ref;\n  const isSelected = (0, _slateReact.useSelected)();\n  const formulaContainerRef = (0, _react.useRef)(null);\n  (0, _react.useEffect)(() => {\n    const {\n      formula = ''\n    } = element.data || {};\n    if (!formula) return;\n    if (formulaContainerRef.current && window.MathJax) {\n      formulaContainerRef.current.innerHTML = '';\n      const dom = window.MathJax.tex2svg(formula);\n      formulaContainerRef.current.appendChild(dom);\n    }\n  }, [element]);\n  const toggleFormulaEditor = (0, _react.useCallback)(() => {\n    const eventBus = _eventBus.default.getInstance();\n    eventBus.dispatch(_eventTypes.INTERNAL_EVENTS.ON_OPEN_FORMULA_DIALOG, element);\n  }, [element]);\n  return /*#__PURE__*/_react.default.createElement(\"span\", Object.assign({\n    onDoubleClick: toggleFormulaEditor,\n    className: 'sf-block-formula ' + (isSelected ? ' sf-selected-formula' : '')\n  }, attributes), /*#__PURE__*/_react.default.createElement(\"span\", {\n    contentEditable: false,\n    ref: formulaContainerRef\n  }), /*#__PURE__*/_react.default.createElement(\"span\", {\n    contentEditable: false\n  }, children));\n};\nconst renderFormula = props => {\n  return /*#__PURE__*/_react.default.createElement(Formula, props);\n};\nvar _default = exports.default = renderFormula;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}