{"ast":null,"code":"import DateUtils from './date-utils';\nimport LocalStorage from './local-storage-utils';\nimport context from '../context';\nimport getEventTransfer from './get-event-transfer';\nimport * as Hotkey from './hotkey';\nexport var getDirPath = function getDirPath(path) {\n  var dir = path.slice(0, path.lastIndexOf('/'));\n  if (dir === '') {\n    return '/';\n  } else {\n    return dir;\n  }\n};\nexport var generateDefaultDocContent = function generateDefaultDocContent() {\n  var defaultValue = {\n    version: 0,\n    children: [{\n      id: 'aaaa',\n      type: 'paragraph',\n      children: [{\n        text: ''\n      }]\n    }]\n  };\n  return defaultValue;\n};\nexport var getImageFileNameWithTimestamp = function getImageFileNameWithTimestamp() {\n  var d = Date.now();\n  return 'image-' + d.toString() + '.png';\n};\nexport var getErrorMsg = function getErrorMsg(error) {\n  var errorMsg = '';\n  if (error.response) {\n    if (error.response.status === 403) {\n      errorMsg = 'Permission_denied';\n    } else if (error.response.data && error.response.data['error_msg']) {\n      errorMsg = error.response.data['error_msg'];\n    } else {\n      errorMsg = 'Error';\n    }\n  } else {\n    errorMsg = 'Please_check_the_network';\n  }\n  return errorMsg;\n};\nexport var isMac = function isMac() {\n  var platform = navigator.platform;\n  return platform === 'Mac68K' || platform === 'MacPPC' || platform === 'Macintosh' || platform === 'MacIntel';\n};\nexport var isMobile = typeof window !== 'undefined' && (window.innerWidth < 768 || navigator.userAgent.toLowerCase().match(/(ipod|ipad|iphone|android|coolpad|mmp|smartphone|midp|wap|xoom|symbian|j2me|blackberry|wince)/i) != null);\nexport var resetWebTitle = function resetWebTitle(t) {\n  var isSdocRevision = context.getSetting('isSdocRevision');\n  var originFilename = context.getSetting('originFilename');\n  if (!isSdocRevision) return;\n  window.document.getElementsByTagName('title')[0].innerText = \"\".concat(t('Revision'), \" - \").concat(originFilename);\n};\nexport var getSelectionCoords = function getSelectionCoords() {\n  var doc = window.document;\n  var sel = doc.selection;\n  var range;\n  var rects;\n  var rect;\n  var x = 0;\n  var y = 0;\n  if (sel) {\n    if (sel.type !== 'Control') {\n      range = sel.createRange();\n      range.collapse(true);\n      x = range.boundingLeft;\n      y = range.boundingTop;\n    }\n  } else if (window.getSelection) {\n    sel = window.getSelection();\n    if (sel.rangeCount) {\n      range = sel.getRangeAt(0).cloneRange();\n      if (range.getClientRects) {\n        range.collapse(true);\n        rects = range.getClientRects();\n        if (rects.length > 0) {\n          rect = rects[0];\n        }\n        // When the cursor is at the beginning of the line, rect is undefined\n        if (rect) {\n          x = rect.left;\n          y = rect.top;\n        }\n      }\n      // Fall back to inserting a temporary element\n      if (x === 0 && y === 0 || rect === undefined) {\n        var span = doc.createElement('span');\n        if (span.getClientRects) {\n          // Ensure span has dimensions and position by\n          // adding a zero-width space character\n          span.appendChild(doc.createTextNode(\"\\u200B\"));\n          range.insertNode(span);\n          rect = span.getClientRects()[0];\n          x = rect.left;\n          y = rect.top;\n          var spanParent = span.parentNode;\n          spanParent.removeChild(span);\n          // Glue any broken text nodes back together\n          spanParent.normalize();\n        }\n      }\n    }\n  }\n  return {\n    x: x,\n    y: y\n  };\n};\nexport var isEnglish = function isEnglish(str) {\n  var pattern = new RegExp('[A-Za-z]+');\n  if (pattern.test(str)) {\n    return true;\n  }\n  return false;\n};\nexport { DateUtils, LocalStorage, getEventTransfer, Hotkey };","map":{"version":3,"names":["DateUtils","LocalStorage","context","getEventTransfer","Hotkey","getDirPath","path","dir","slice","lastIndexOf","generateDefaultDocContent","defaultValue","version","children","id","type","text","getImageFileNameWithTimestamp","d","Date","now","toString","getErrorMsg","error","errorMsg","response","status","data","isMac","platform","navigator","isMobile","window","innerWidth","userAgent","toLowerCase","match","resetWebTitle","t","isSdocRevision","getSetting","originFilename","document","getElementsByTagName","innerText","concat","getSelectionCoords","doc","sel","selection","range","rects","rect","x","y","createRange","collapse","boundingLeft","boundingTop","getSelection","rangeCount","getRangeAt","cloneRange","getClientRects","length","left","top","undefined","span","createElement","appendChild","createTextNode","insertNode","spanParent","parentNode","removeChild","normalize","isEnglish","str","pattern","RegExp","test"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/utils/index.js"],"sourcesContent":["import DateUtils from './date-utils';\nimport LocalStorage from './local-storage-utils';\nimport context from '../context';\nimport getEventTransfer from './get-event-transfer';\nimport * as Hotkey from './hotkey';\nexport const getDirPath = path => {\n  let dir = path.slice(0, path.lastIndexOf('/'));\n  if (dir === '') {\n    return '/';\n  } else {\n    return dir;\n  }\n};\nexport const generateDefaultDocContent = () => {\n  const defaultValue = {\n    version: 0,\n    children: [{\n      id: 'aaaa',\n      type: 'paragraph',\n      children: [{\n        text: ''\n      }]\n    }]\n  };\n  return defaultValue;\n};\nexport const getImageFileNameWithTimestamp = () => {\n  var d = Date.now();\n  return 'image-' + d.toString() + '.png';\n};\nexport const getErrorMsg = error => {\n  let errorMsg = '';\n  if (error.response) {\n    if (error.response.status === 403) {\n      errorMsg = 'Permission_denied';\n    } else if (error.response.data && error.response.data['error_msg']) {\n      errorMsg = error.response.data['error_msg'];\n    } else {\n      errorMsg = 'Error';\n    }\n  } else {\n    errorMsg = 'Please_check_the_network';\n  }\n  return errorMsg;\n};\nexport const isMac = () => {\n  const platform = navigator.platform;\n  return platform === 'Mac68K' || platform === 'MacPPC' || platform === 'Macintosh' || platform === 'MacIntel';\n};\nexport const isMobile = typeof window !== 'undefined' && (window.innerWidth < 768 || navigator.userAgent.toLowerCase().match(/(ipod|ipad|iphone|android|coolpad|mmp|smartphone|midp|wap|xoom|symbian|j2me|blackberry|wince)/i) != null);\nexport const resetWebTitle = t => {\n  const isSdocRevision = context.getSetting('isSdocRevision');\n  const originFilename = context.getSetting('originFilename');\n  if (!isSdocRevision) return;\n  window.document.getElementsByTagName('title')[0].innerText = \"\".concat(t('Revision'), \" - \").concat(originFilename);\n};\nexport const getSelectionCoords = () => {\n  let doc = window.document;\n  let sel = doc.selection;\n  let range;\n  let rects;\n  let rect;\n  let x = 0;\n  let y = 0;\n  if (sel) {\n    if (sel.type !== 'Control') {\n      range = sel.createRange();\n      range.collapse(true);\n      x = range.boundingLeft;\n      y = range.boundingTop;\n    }\n  } else if (window.getSelection) {\n    sel = window.getSelection();\n    if (sel.rangeCount) {\n      range = sel.getRangeAt(0).cloneRange();\n      if (range.getClientRects) {\n        range.collapse(true);\n        rects = range.getClientRects();\n        if (rects.length > 0) {\n          rect = rects[0];\n        }\n        // When the cursor is at the beginning of the line, rect is undefined\n        if (rect) {\n          x = rect.left;\n          y = rect.top;\n        }\n      }\n      // Fall back to inserting a temporary element\n      if (x === 0 && y === 0 || rect === undefined) {\n        let span = doc.createElement('span');\n        if (span.getClientRects) {\n          // Ensure span has dimensions and position by\n          // adding a zero-width space character\n          span.appendChild(doc.createTextNode('\\u200b'));\n          range.insertNode(span);\n          rect = span.getClientRects()[0];\n          x = rect.left;\n          y = rect.top;\n          let spanParent = span.parentNode;\n          spanParent.removeChild(span);\n          // Glue any broken text nodes back together\n          spanParent.normalize();\n        }\n      }\n    }\n  }\n  return {\n    x: x,\n    y: y\n  };\n};\nexport const isEnglish = str => {\n  const pattern = new RegExp('[A-Za-z]+');\n  if (pattern.test(str)) {\n    return true;\n  }\n  return false;\n};\nexport { DateUtils, LocalStorage, getEventTransfer, Hotkey };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}