{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{Button,Modal,ModalHeader,ModalBody,ModalFooter,Input,Form,FormGroup,Label}from'reactstrap';import{gettext}from'../../utils/constants';import{seafileAPI}from'../../utils/seafile-api';import{Utils}from'../../utils/utils';import toaster from'../toast';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RenameDepartmentDialog=/*#__PURE__*/function(_React$Component){_inherits(RenameDepartmentDialog,_React$Component);var _super=_createSuper(RenameDepartmentDialog);function RenameDepartmentDialog(props){var _this;_classCallCheck(this,RenameDepartmentDialog);_this=_super.call(this,props);_this.handleSubmit=function(){var isValid=_this.validateName();var _this$props=_this.props,orgID=_this$props.orgID,groupID=_this$props.groupID;if(isValid){seafileAPI.orgAdminUpdateDepartGroup(orgID,groupID,_this.state.departmentName.trim()).then(function(res){_this.props.toggle();_this.props.onDepartmentNameChanged(res.data);toaster.success(gettext('Success'));}).catch(function(error){var errorMsg=Utils.getErrorMsg(error);_this.setState({errMessage:errorMsg});});}};_this.validateName=function(){var errMessage='';var name=_this.state.departmentName.trim();if(!name.length){errMessage=gettext('Name is required');_this.setState({errMessage:errMessage});return false;}return true;};_this.handleChange=function(e){_this.setState({departmentName:e.target.value});};_this.handleKeyDown=function(e){if(e.key==='Enter'){_this.handleSubmit();e.preventDefault();}};_this.onAfterModelOpened=function(){if(!_this.newInput.current)return;_this.newInput.current.focus();_this.newInput.current.select();};_this.state={departmentName:_this.props.name,errMessage:''};_this.newInput=/*#__PURE__*/React.createRef();return _this;}_createClass(RenameDepartmentDialog,[{key:\"render\",value:function render(){var header=gettext('Rename Department');return/*#__PURE__*/_jsxs(Modal,{isOpen:true,toggle:this.props.toggle,onOpened:this.onAfterModelOpened,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:this.props.toggle,children:header}),/*#__PURE__*/_jsxs(ModalBody,{children:[/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"departmentName\",children:gettext('Name')}),/*#__PURE__*/_jsx(Input,{id:\"departmentName\",onKeyDown:this.handleKeyDown,value:this.state.departmentName,onChange:this.handleChange,innerRef:this.newInput})]})}),this.state.errMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:this.state.errMessage})]}),/*#__PURE__*/_jsx(ModalFooter,{children:/*#__PURE__*/_jsx(Button,{color:\"primary\",onClick:this.handleSubmit,children:gettext('Submit')})})]});}}]);return RenameDepartmentDialog;}(React.Component);export default RenameDepartmentDialog;","map":{"version":3,"names":["React","Button","Modal","ModalHeader","ModalBody","ModalFooter","Input","Form","FormGroup","Label","gettext","seafileAPI","Utils","toaster","jsx","_jsx","jsxs","_jsxs","RenameDepartmentDialog","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","handleSubmit","isValid","validateName","_this$props","orgID","groupID","orgAdminUpdateDepartGroup","state","departmentName","trim","then","res","toggle","onDepartmentNameChanged","data","success","catch","error","errorMsg","getErrorMsg","setState","errMessage","name","length","handleChange","e","target","value","handleKeyDown","key","preventDefault","onAfterModelOpened","newInput","current","focus","select","createRef","_createClass","render","header","isOpen","onOpened","children","for","id","onKeyDown","onChange","innerRef","className","color","onClick","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-rename-department-dialog.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Form, FormGroup, Label } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  groupID: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number\n  ]).isRequired,\n  orgID: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number\n  ]).isRequired,\n  name: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired,\n  onDepartmentNameChanged: PropTypes.func.isRequired\n};\n\nclass RenameDepartmentDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      departmentName: this.props.name,\n      errMessage: ''\n    };\n    this.newInput = React.createRef();\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateName();\n    const { orgID, groupID } = this.props;\n    if (isValid) {\n      seafileAPI.orgAdminUpdateDepartGroup(orgID, groupID, this.state.departmentName.trim()).then((res) => {\n        this.props.toggle();\n        this.props.onDepartmentNameChanged(res.data);\n        toaster.success(gettext('Success'));\n      }).catch(error => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({ errMessage: errorMsg });\n      });\n    }\n  };\n\n  validateName = () => {\n    let errMessage = '';\n    const name = this.state.departmentName.trim();\n    if (!name.length) {\n      errMessage = gettext('Name is required');\n      this.setState({ errMessage: errMessage });\n      return false;\n    }\n    return true;\n  };\n\n  handleChange = (e) => {\n    this.setState({\n      departmentName: e.target.value\n    });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  };\n\n  onAfterModelOpened = () => {\n    if (!this.newInput.current) return;\n    this.newInput.current.focus();\n    this.newInput.current.select();\n  };\n\n  render() {\n    let header = gettext('Rename Department');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle} onOpened={this.onAfterModelOpened}>\n        <ModalHeader toggle={this.props.toggle}>{header}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"departmentName\">{gettext('Name')}</Label>\n              <Input\n                id=\"departmentName\"\n                onKeyDown={this.handleKeyDown}\n                value={this.state.departmentName}\n                onChange={this.handleChange}\n                innerRef={this.newInput}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRenameDepartmentDialog.propTypes = propTypes;\n\nexport default RenameDepartmentDialog;\n"],"mappings":"wkBAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,OAASC,MAAM,CAAEC,KAAK,CAAEC,WAAW,CAAEC,SAAS,CAAEC,WAAW,CAAEC,KAAK,CAAEC,IAAI,CAAEC,SAAS,CAAEC,KAAK,KAAQ,YAAY,CAC9G,OAASC,OAAO,KAAQ,uBAAuB,CAC/C,OAASC,UAAU,KAAQ,yBAAyB,CACpD,OAASC,KAAK,KAAQ,mBAAmB,CACzC,MAAO,CAAAC,OAAO,KAAM,UAAU,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,4BAgBzB,CAAAC,sBAAsB,uBAAAC,gBAAA,EAAAC,SAAA,CAAAF,sBAAA,CAAAC,gBAAA,MAAAE,MAAA,CAAAC,YAAA,CAAAJ,sBAAA,EAE1B,SAAAA,uBAAYK,KAAK,CAAE,KAAAC,KAAA,CAAAC,eAAA,MAAAP,sBAAA,EACjBM,KAAA,CAAAH,MAAA,CAAAK,IAAA,MAAMH,KAAK,EAAEC,KAAA,CAQfG,YAAY,CAAG,UAAM,CACnB,GAAI,CAAAC,OAAO,CAAGJ,KAAA,CAAKK,YAAY,CAAC,CAAC,CACjC,IAAAC,WAAA,CAA2BN,KAAA,CAAKD,KAAK,CAA7BQ,KAAK,CAAAD,WAAA,CAALC,KAAK,CAAEC,OAAO,CAAAF,WAAA,CAAPE,OAAO,CACtB,GAAIJ,OAAO,CAAE,CACXjB,UAAU,CAACsB,yBAAyB,CAACF,KAAK,CAAEC,OAAO,CAAER,KAAA,CAAKU,KAAK,CAACC,cAAc,CAACC,IAAI,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,SAACC,GAAG,CAAK,CACnGd,KAAA,CAAKD,KAAK,CAACgB,MAAM,CAAC,CAAC,CACnBf,KAAA,CAAKD,KAAK,CAACiB,uBAAuB,CAACF,GAAG,CAACG,IAAI,CAAC,CAC5C5B,OAAO,CAAC6B,OAAO,CAAChC,OAAO,CAAC,SAAS,CAAC,CAAC,CACrC,CAAC,CAAC,CAACiC,KAAK,CAAC,SAAAC,KAAK,CAAI,CAChB,GAAI,CAAAC,QAAQ,CAAGjC,KAAK,CAACkC,WAAW,CAACF,KAAK,CAAC,CACvCpB,KAAA,CAAKuB,QAAQ,CAAC,CAAEC,UAAU,CAAEH,QAAS,CAAC,CAAC,CACzC,CAAC,CAAC,CACJ,CACF,CAAC,CAAArB,KAAA,CAEDK,YAAY,CAAG,UAAM,CACnB,GAAI,CAAAmB,UAAU,CAAG,EAAE,CACnB,GAAM,CAAAC,IAAI,CAAGzB,KAAA,CAAKU,KAAK,CAACC,cAAc,CAACC,IAAI,CAAC,CAAC,CAC7C,GAAI,CAACa,IAAI,CAACC,MAAM,CAAE,CAChBF,UAAU,CAAGtC,OAAO,CAAC,kBAAkB,CAAC,CACxCc,KAAA,CAAKuB,QAAQ,CAAC,CAAEC,UAAU,CAAEA,UAAW,CAAC,CAAC,CACzC,MAAO,MAAK,CACd,CACA,MAAO,KAAI,CACb,CAAC,CAAAxB,KAAA,CAED2B,YAAY,CAAG,SAACC,CAAC,CAAK,CACpB5B,KAAA,CAAKuB,QAAQ,CAAC,CACZZ,cAAc,CAAEiB,CAAC,CAACC,MAAM,CAACC,KAC3B,CAAC,CAAC,CACJ,CAAC,CAAA9B,KAAA,CAED+B,aAAa,CAAG,SAACH,CAAC,CAAK,CACrB,GAAIA,CAAC,CAACI,GAAG,GAAK,OAAO,CAAE,CACrBhC,KAAA,CAAKG,YAAY,CAAC,CAAC,CACnByB,CAAC,CAACK,cAAc,CAAC,CAAC,CACpB,CACF,CAAC,CAAAjC,KAAA,CAEDkC,kBAAkB,CAAG,UAAM,CACzB,GAAI,CAAClC,KAAA,CAAKmC,QAAQ,CAACC,OAAO,CAAE,OAC5BpC,KAAA,CAAKmC,QAAQ,CAACC,OAAO,CAACC,KAAK,CAAC,CAAC,CAC7BrC,KAAA,CAAKmC,QAAQ,CAACC,OAAO,CAACE,MAAM,CAAC,CAAC,CAChC,CAAC,CAlDCtC,KAAA,CAAKU,KAAK,CAAG,CACXC,cAAc,CAAEX,KAAA,CAAKD,KAAK,CAAC0B,IAAI,CAC/BD,UAAU,CAAE,EACd,CAAC,CACDxB,KAAA,CAAKmC,QAAQ,cAAG3D,KAAK,CAAC+D,SAAS,CAAC,CAAC,CAAC,OAAAvC,KAAA,CACpC,CAACwC,YAAA,CAAA9C,sBAAA,GAAAsC,GAAA,UAAAF,KAAA,CA+CD,SAAAW,OAAA,CAAS,CACP,GAAI,CAAAC,MAAM,CAAGxD,OAAO,CAAC,mBAAmB,CAAC,CACzC,mBACEO,KAAA,CAACf,KAAK,EAACiE,MAAM,CAAE,IAAK,CAAC5B,MAAM,CAAE,IAAI,CAAChB,KAAK,CAACgB,MAAO,CAAC6B,QAAQ,CAAE,IAAI,CAACV,kBAAmB,CAAAW,QAAA,eAChFtD,IAAA,CAACZ,WAAW,EAACoC,MAAM,CAAE,IAAI,CAAChB,KAAK,CAACgB,MAAO,CAAA8B,QAAA,CAAEH,MAAM,CAAc,CAAC,cAC9DjD,KAAA,CAACb,SAAS,EAAAiE,QAAA,eACRtD,IAAA,CAACR,IAAI,EAAA8D,QAAA,cACHpD,KAAA,CAACT,SAAS,EAAA6D,QAAA,eACRtD,IAAA,CAACN,KAAK,EAAC6D,GAAG,CAAC,gBAAgB,CAAAD,QAAA,CAAE3D,OAAO,CAAC,MAAM,CAAC,CAAQ,CAAC,cACrDK,IAAA,CAACT,KAAK,EACJiE,EAAE,CAAC,gBAAgB,CACnBC,SAAS,CAAE,IAAI,CAACjB,aAAc,CAC9BD,KAAK,CAAE,IAAI,CAACpB,KAAK,CAACC,cAAe,CACjCsC,QAAQ,CAAE,IAAI,CAACtB,YAAa,CAC5BuB,QAAQ,CAAE,IAAI,CAACf,QAAS,CACzB,CAAC,EACO,CAAC,CACR,CAAC,CACN,IAAI,CAACzB,KAAK,CAACc,UAAU,eAAIjC,IAAA,MAAG4D,SAAS,CAAC,OAAO,CAAAN,QAAA,CAAE,IAAI,CAACnC,KAAK,CAACc,UAAU,CAAI,CAAC,EACjE,CAAC,cACZjC,IAAA,CAACV,WAAW,EAAAgE,QAAA,cACVtD,IAAA,CAACd,MAAM,EAAC2E,KAAK,CAAC,SAAS,CAACC,OAAO,CAAE,IAAI,CAAClD,YAAa,CAAA0C,QAAA,CAAE3D,OAAO,CAAC,QAAQ,CAAC,CAAS,CAAC,CACrE,CAAC,EACT,CAAC,CAEZ,CAAC,WAAAQ,sBAAA,GAjFkClB,KAAK,CAAC8E,SAAS,EAsFpD,cAAe,CAAA5D,sBAAsB"},"metadata":{},"sourceType":"module","externalDependencies":[]}