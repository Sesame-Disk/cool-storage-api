{"ast":null,"code":"import _objectSpread from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{isPro,gettext,shareLinkExpireDaysMin,shareLinkExpireDaysMax,shareLinkExpireDaysDefault}from'../../utils/constants';import{seafileAPI}from'../../utils/seafile-api';import{Utils}from'../../utils/utils';import ShareLink from'../../models/share-link';import toaster from'../toast';import Loading from'../loading';import LinkDetails from'./link-details';import LinkCreation from'./link-creation';import LinkList from'./link-list';import GenerateShareLinkWithPassword from'../../services/generate-share-link-with-password';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PER_PAGE=25;var ShareLinkPanel=/*#__PURE__*/function(_React$Component){_inherits(ShareLinkPanel,_React$Component);var _super=_createSuper(ShareLinkPanel);function ShareLinkPanel(props){var _this;_classCallCheck(this,ShareLinkPanel);_this=_super.call(this,props);_this.showLinkDetails=function(link){_this.setState({sharedLinkInfo:link,mode:link?'displayLinkDetails':''});};_this.updateLink=function(link){var shareLinks=_this.state.shareLinks;_this.setState({sharedLinkInfo:link,shareLinks:shareLinks.map(function(item){return item.token==link.token?link:item;})});};_this.deleteLink=function(token){var shareLinks=_this.state.shareLinks;seafileAPI.deleteShareLink(token).then(function(){_this.setState({mode:'',sharedLinkInfo:null,shareLinks:shareLinks.filter(function(item){return item.token!==token;})});toaster.success(gettext('Successfully deleted 1 share link'));}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this.deleteShareLinks=function(){var shareLinks=_this.state.shareLinks;var tokens=shareLinks.filter(function(item){return item.isSelected;}).map(function(link){return link.token;});seafileAPI.deleteShareLinks(tokens).then(function(res){var _res$data=res.data,success=_res$data.success,failed=_res$data.failed;if(success.length){var newShareLinkList=shareLinks.filter(function(shareLink){return!success.some(function(deletedShareLink){return deletedShareLink.token==shareLink.token;});});_this.setState({shareLinks:newShareLinkList});var length=success.length;var msg=length==1?gettext('Successfully deleted 1 share link'):gettext('Successfully deleted {number_placeholder} share links').replace('{number_placeholder}',length);toaster.success(msg);}failed.forEach(function(item){var msg=\"\".concat(item.token,\": \").concat(item.error_msg);toaster.danger(msg);});}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this.updateAfterCreation=function(newData){var _this$state=_this.state,mode=_this$state.mode,links=_this$state.shareLinks;if(mode=='singleLinkCreation'){links.unshift(newData);_this.setState({mode:'displayLinkDetails',sharedLinkInfo:newData,shareLinks:links});}else{// 'linksCreation'\n_this.setState({mode:'',shareLinks:newData.concat(links)});}};_this.setMode=function(mode){_this.setState({mode:mode});};_this.toggleSelectAllLinks=function(isSelected){var links=_this.state.shareLinks;_this.setState({shareLinks:links.map(function(item){item.isSelected=isSelected;return item;})});};_this.toggleSelectLink=function(link,isSelected){var links=_this.state.shareLinks;_this.setState({shareLinks:links.map(function(item){if(item.token==link.token){item.isSelected=isSelected;}return item;})});};_this.handleScroll=function(event){if(!_this.state.isLoadingMore&&_this.state.hasMore){var clientHeight=event.target.clientHeight;var scrollHeight=event.target.scrollHeight;var scrollTop=event.target.scrollTop;var isBottom=clientHeight+scrollTop+1>=scrollHeight;if(isBottom){// scroll to the bottom\n_this.setState({isLoadingMore:true},function(){_this.getMore();});}}};_this.getMore=function(){var _this$state2=_this.state,page=_this$state2.page,shareLinks=_this$state2.shareLinks;var _this$props=_this.props,repoID=_this$props.repoID,path=_this$props.itemPath;seafileAPI.listShareLinks({repoID:repoID,path:path,page:page+1}).then(function(res){_this.setState({isLoadingMore:false,hasMore:res.data.length==PER_PAGE,page:page+1,shareLinks:shareLinks.concat(res.data.map(function(item){return new ShareLink(item);}))});}).catch(function(error){_this.setState({isLoadingMore:false});var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this.setShareLinks=function(shareLinks){_this.setState({shareLinks:shareLinks});};_this.isExpireDaysNoLimit=shareLinkExpireDaysMin===0&&shareLinkExpireDaysMax===0&&shareLinkExpireDaysDefault==0;_this.defaultExpireDays=_this.isExpireDaysNoLimit?'':shareLinkExpireDaysDefault;_this.state={isLoading:true,hasMore:false,isLoadingMore:false,page:1,mode:'listLinks',sharedLinkInfo:null,shareLinks:[],permissionOptions:[],currentPermission:''};return _this;}_createClass(ShareLinkPanel,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var page=this.state.page;var _this$props2=this.props,repoID=_this$props2.repoID,path=_this$props2.itemPath;seafileAPI.listShareLinks({repoID:repoID,path:path,page:page}).then(function(res){_this2.setState({isLoading:false,hasMore:res.data.length==PER_PAGE,shareLinks:res.data.map(function(item){return new ShareLink(item);})});}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});if(isPro){var _this$props3=this.props,itemType=_this$props3.itemType,userPerm=_this$props3.userPerm;if(itemType=='library'){var permissionOptions=Utils.getShareLinkPermissionList(itemType,userPerm,path);this.setState({permissionOptions:permissionOptions,currentPermission:permissionOptions[0]});}else{var getDirentInfoAPI;if(this.props.itemType==='file'){getDirentInfoAPI=seafileAPI.getFileInfo(repoID,path);}else if(this.props.itemType==='dir'){getDirentInfoAPI=seafileAPI.getDirInfo(repoID,path);}getDirentInfoAPI.then(function(res){var canEdit=res.data.can_edit;var permission=res.data.permission;var permissionOptions=Utils.getShareLinkPermissionList(_this2.props.itemType,permission,path,canEdit);_this2.setState({permissionOptions:permissionOptions,currentPermission:permissionOptions[0]});}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});}}}},{key:\"render\",value:function render(){if(this.state.isLoading){return/*#__PURE__*/_jsx(Loading,{});}var _this$props4=this.props,repoID=_this$props4.repoID,itemPath=_this$props4.itemPath,userPerm=_this$props4.userPerm;var _this$state3=this.state,mode=_this$state3.mode,shareLinks=_this$state3.shareLinks,sharedLinkInfo=_this$state3.sharedLinkInfo,permissionOptions=_this$state3.permissionOptions,currentPermission=_this$state3.currentPermission,isLoadingMore=_this$state3.isLoadingMore;switch(mode){case'displayLinkDetails':return/*#__PURE__*/_jsx(LinkDetails,{sharedLinkInfo:sharedLinkInfo,permissionOptions:permissionOptions,defaultExpireDays:this.defaultExpireDays,showLinkDetails:this.showLinkDetails,updateLink:this.updateLink,deleteLink:this.deleteLink,closeShareDialog:this.props.closeShareDialog});case'singleLinkCreation':return/*#__PURE__*/_jsx(LinkCreation,{type:\"single\",repoID:repoID,itemPath:itemPath,userPerm:userPerm,permissionOptions:permissionOptions,currentPermission:currentPermission,setMode:this.setMode,updateAfterCreation:this.updateAfterCreation});case'linksCreation':return/*#__PURE__*/_jsx(LinkCreation,{type:\"batch\",repoID:repoID,itemPath:itemPath,userPerm:userPerm,permissionOptions:permissionOptions,currentPermission:currentPermission,setMode:this.setMode,updateAfterCreation:this.updateAfterCreation});default:return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(LinkList,{shareLinks:shareLinks,permissionOptions:permissionOptions,setMode:this.setMode,showLinkDetails:this.showLinkDetails,toggleSelectAllLinks:this.toggleSelectAllLinks,toggleSelectLink:this.toggleSelectLink,deleteShareLinks:this.deleteShareLinks,deleteLink:this.deleteLink,handleScroll:this.handleScroll,isLoadingMore:isLoadingMore}),/*#__PURE__*/_jsx(GenerateShareLinkWithPassword,_objectSpread({shareLinks:_toConsumableArray(shareLinks),setShareLinks:this.setShareLinks},this.props))]});}}}]);return ShareLinkPanel;}(React.Component);export default ShareLinkPanel;","map":{"version":3,"names":["React","isPro","gettext","shareLinkExpireDaysMin","shareLinkExpireDaysMax","shareLinkExpireDaysDefault","seafileAPI","Utils","ShareLink","toaster","Loading","LinkDetails","LinkCreation","LinkList","GenerateShareLinkWithPassword","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","PER_PAGE","ShareLinkPanel","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","showLinkDetails","link","setState","sharedLinkInfo","mode","updateLink","shareLinks","state","map","item","token","deleteLink","deleteShareLink","then","filter","success","catch","error","errMessage","getErrorMsg","danger","deleteShareLinks","tokens","isSelected","res","_res$data","data","failed","length","newShareLinkList","shareLink","some","deletedShareLink","msg","replace","forEach","concat","error_msg","updateAfterCreation","newData","_this$state","links","unshift","setMode","toggleSelectAllLinks","toggleSelectLink","handleScroll","event","isLoadingMore","hasMore","clientHeight","target","scrollHeight","scrollTop","isBottom","getMore","_this$state2","page","_this$props","repoID","path","itemPath","listShareLinks","setShareLinks","isExpireDaysNoLimit","defaultExpireDays","isLoading","permissionOptions","currentPermission","_createClass","key","value","componentDidMount","_this2","_this$props2","_this$props3","itemType","userPerm","getShareLinkPermissionList","getDirentInfoAPI","getFileInfo","getDirInfo","canEdit","can_edit","permission","render","_this$props4","_this$state3","closeShareDialog","type","children","_objectSpread","_toConsumableArray","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/share-link-panel/index.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { isPro, gettext, shareLinkExpireDaysMin, shareLinkExpireDaysMax, shareLinkExpireDaysDefault } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport ShareLink from '../../models/share-link';\nimport toaster from '../toast';\nimport Loading from '../loading';\nimport LinkDetails from './link-details';\nimport LinkCreation from './link-creation';\nimport LinkList from './link-list';\nimport GenerateShareLinkWithPassword from '../../services/generate-share-link-with-password';\n\nconst propTypes = {\n  itemPath: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  closeShareDialog: PropTypes.func.isRequired,\n  userPerm: PropTypes.string,\n  itemType: PropTypes.string\n};\n\nconst PER_PAGE = 25;\n\nclass ShareLinkPanel extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.isExpireDaysNoLimit = (shareLinkExpireDaysMin === 0 && shareLinkExpireDaysMax === 0 && shareLinkExpireDaysDefault == 0);\n    this.defaultExpireDays = this.isExpireDaysNoLimit ? '' : shareLinkExpireDaysDefault;\n\n    this.state = {\n      isLoading: true,\n      hasMore: false,\n      isLoadingMore: false,\n      page: 1,\n      mode: 'listLinks',\n      sharedLinkInfo: null,\n      shareLinks: [],\n      permissionOptions: [],\n      currentPermission: ''\n    };\n  }\n\n  componentDidMount() {\n    const { page } = this.state;\n    const { repoID, itemPath: path } = this.props;\n    seafileAPI.listShareLinks({ repoID, path, page }).then((res) => {\n      this.setState({\n        isLoading: false,\n        hasMore: res.data.length == PER_PAGE,\n        shareLinks: res.data.map(item => new ShareLink(item))\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n\n    if (isPro) {\n      const { itemType, userPerm } = this.props;\n      if (itemType == 'library') {\n        let permissionOptions = Utils.getShareLinkPermissionList(itemType, userPerm, path);\n        this.setState({\n          permissionOptions: permissionOptions,\n          currentPermission: permissionOptions[0],\n        });\n      } else {\n        let getDirentInfoAPI;\n        if (this.props.itemType === 'file') {\n          getDirentInfoAPI = seafileAPI.getFileInfo(repoID, path);\n        } else if (this.props.itemType === 'dir') {\n          getDirentInfoAPI = seafileAPI.getDirInfo(repoID, path);\n        }\n        getDirentInfoAPI.then((res) => {\n          let canEdit = res.data.can_edit;\n          let permission = res.data.permission;\n          let permissionOptions = Utils.getShareLinkPermissionList(this.props.itemType, permission, path, canEdit);\n          this.setState({\n            permissionOptions: permissionOptions,\n            currentPermission: permissionOptions[0],\n          });\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    }\n  }\n\n  showLinkDetails = (link) => {\n    this.setState({\n      sharedLinkInfo: link,\n      mode: link ? 'displayLinkDetails' : ''\n    });\n  };\n\n  updateLink = (link) => {\n    const { shareLinks } = this.state;\n    this.setState({\n      sharedLinkInfo: link,\n      shareLinks: shareLinks.map(item => item.token == link.token ? link : item)\n    });\n  };\n\n  deleteLink = (token) => {\n    const { shareLinks } = this.state;\n    seafileAPI.deleteShareLink(token).then(() => {\n      this.setState({\n        mode: '',\n        sharedLinkInfo: null,\n        shareLinks: shareLinks.filter(item => item.token !== token)\n      });\n      toaster.success(gettext('Successfully deleted 1 share link'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  deleteShareLinks = () => {\n    const { shareLinks } = this.state;\n    const tokens = shareLinks.filter(item => item.isSelected).map(link => link.token);\n    seafileAPI.deleteShareLinks(tokens).then(res => {\n      const { success, failed } = res.data;\n      if (success.length) {\n        let newShareLinkList = shareLinks.filter(shareLink => {\n          return !success.some(deletedShareLink => {\n            return deletedShareLink.token == shareLink.token;\n          });\n        });\n        this.setState({\n          shareLinks: newShareLinkList\n        });\n        const length = success.length;\n        const msg = length == 1 ?\n          gettext('Successfully deleted 1 share link') :\n          gettext('Successfully deleted {number_placeholder} share links')\n            .replace('{number_placeholder}', length);\n        toaster.success(msg);\n      }\n      failed.forEach(item => {\n        const msg = `${item.token}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  updateAfterCreation = (newData) => {\n    const { mode, shareLinks: links } = this.state;\n    if (mode == 'singleLinkCreation') {\n      links.unshift(newData);\n      this.setState({\n        mode: 'displayLinkDetails',\n        sharedLinkInfo: newData,\n        shareLinks: links\n      });\n    } else { // 'linksCreation'\n      this.setState({\n        mode: '',\n        shareLinks: newData.concat(links)\n      });\n    }\n  };\n\n  setMode = (mode) => {\n    this.setState({ mode: mode });\n  };\n\n  toggleSelectAllLinks = (isSelected) => {\n    const { shareLinks: links } = this.state;\n    this.setState({\n      shareLinks: links.map(item => {\n        item.isSelected = isSelected;\n        return item;\n      })\n    });\n  };\n\n  toggleSelectLink = (link, isSelected) => {\n    const { shareLinks: links } = this.state;\n    this.setState({\n      shareLinks: links.map(item => {\n        if (item.token == link.token) {\n          item.isSelected = isSelected;\n        }\n        return item;\n      })\n    });\n  };\n\n  handleScroll = (event) => {\n    if (!this.state.isLoadingMore && this.state.hasMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({ isLoadingMore: true }, () => {\n          this.getMore();\n        });\n      }\n    }\n  };\n\n  getMore = () => {\n    const { page, shareLinks } = this.state;\n    const { repoID, itemPath: path } = this.props;\n    seafileAPI.listShareLinks({ repoID, path, page: page + 1 }).then((res) => {\n      this.setState({\n        isLoadingMore: false,\n        hasMore: res.data.length == PER_PAGE,\n        page: page + 1,\n        shareLinks: shareLinks.concat(res.data.map(item => new ShareLink(item)))\n      });\n    }).catch(error => {\n      this.setState({\n        isLoadingMore: false\n      });\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  setShareLinks = (shareLinks) => {\n    this.setState({ shareLinks: shareLinks });\n  };\n\n  render() {\n    if (this.state.isLoading) {\n      return <Loading />;\n    }\n\n    const { repoID, itemPath, userPerm } = this.props;\n    const { mode, shareLinks, sharedLinkInfo, permissionOptions, currentPermission, isLoadingMore } = this.state;\n\n    switch (mode) {\n      case 'displayLinkDetails':\n        return (\n          <LinkDetails\n            sharedLinkInfo={sharedLinkInfo}\n            permissionOptions={permissionOptions}\n            defaultExpireDays={this.defaultExpireDays}\n            showLinkDetails={this.showLinkDetails}\n            updateLink={this.updateLink}\n            deleteLink={this.deleteLink}\n            closeShareDialog={this.props.closeShareDialog}\n          />\n        );\n      case 'singleLinkCreation':\n        return (\n          <LinkCreation\n            type=\"single\"\n            repoID={repoID}\n            itemPath={itemPath}\n            userPerm={userPerm}\n            permissionOptions={permissionOptions}\n            currentPermission={currentPermission}\n            setMode={this.setMode}\n            updateAfterCreation={this.updateAfterCreation}\n          />\n        );\n      case 'linksCreation':\n        return (\n          <LinkCreation\n            type=\"batch\"\n            repoID={repoID}\n            itemPath={itemPath}\n            userPerm={userPerm}\n            permissionOptions={permissionOptions}\n            currentPermission={currentPermission}\n            setMode={this.setMode}\n            updateAfterCreation={this.updateAfterCreation}\n          />\n        );\n      default:\n        return (\n          <>\n            <LinkList\n              shareLinks={shareLinks}\n              permissionOptions={permissionOptions}\n              setMode={this.setMode}\n              showLinkDetails={this.showLinkDetails}\n              toggleSelectAllLinks={this.toggleSelectAllLinks}\n              toggleSelectLink={this.toggleSelectLink}\n              deleteShareLinks={this.deleteShareLinks}\n              deleteLink={this.deleteLink}\n              handleScroll={this.handleScroll}\n              isLoadingMore={isLoadingMore}\n            />\n            <GenerateShareLinkWithPassword shareLinks={[...shareLinks]} setShareLinks={this.setShareLinks}{...this.props} />\n          </>\n        );\n    }\n  }\n}\n\nShareLinkPanel.propTypes = propTypes;\n\nexport default ShareLinkPanel;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}