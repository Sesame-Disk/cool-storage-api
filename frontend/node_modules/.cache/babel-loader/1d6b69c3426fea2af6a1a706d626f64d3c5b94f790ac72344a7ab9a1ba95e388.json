{"ast":null,"code":"import _toConsumableArray from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";/**\n * @desc Solve the problem of floating calculation, avoid multiple digits after the decimal point and loss of calculation accuracy.\n * example: 3 + 2.4 = 4.699999999999999，1.0 - 0.9 = 0.09999999999999998\n */ /**\n * Correct wrong data\n * strip(0.09999999999999998)=0.1\n */function strip(num){var precision=arguments.length>1&&arguments[1]!==undefined?arguments[1]:12;return+parseFloat(num.toPrecision(precision));}/**\n * Return digits length of a number\n * @param {*number} num Input number\n */function digitLength(num){// Get digit length of e\nvar eSplit=num.toString().split(/[eE]/);var len=(eSplit[0].split('.')[1]||'').length-+(eSplit[1]||0);return len>0?len:0;}/**\n * Convert decimals to integers and support scientific notation. If it is a decimal, it is enlarged to an integer\n * @param {*number} num Number of inputs\n */function float2Fixed(num){if(num.toString().indexOf('e')===-1){return Number(num.toString().replace('.',''));}var dLen=digitLength(num);return dLen>0?strip(num*Math.pow(10,dLen)):num;}/**\n * Check whether the number is out of range, and give a prompt if it is out of range\n * @param {*number} num Number of inputs\n */function checkBoundary(num){if(_boundaryCheckingState){if(num>Number.MAX_SAFE_INTEGER||num<Number.MIN_SAFE_INTEGER){// eslint-disable-next-line no-console\nconsole.warn(\"\".concat(num,\" is beyond boundary when transfer to integer, the results may not be accurate\"));}}}/**\n * Exact multiplication\n */function times(num1,num2){for(var _len=arguments.length,others=new Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){others[_key-2]=arguments[_key];}if(others.length>0){return times.apply(void 0,[times(num1,num2),others[0]].concat(_toConsumableArray(others.slice(1))));}var num1Changed=float2Fixed(num1);var num2Changed=float2Fixed(num2);var baseNum=digitLength(num1)+digitLength(num2);var leftValue=num1Changed*num2Changed;checkBoundary(leftValue);return leftValue/Math.pow(10,baseNum);}/**\n * Exact addition\n */function plus(num1,num2){for(var _len2=arguments.length,others=new Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++){others[_key2-2]=arguments[_key2];}if(others.length>0){return plus.apply(void 0,[plus(num1,num2),others[0]].concat(_toConsumableArray(others.slice(1))));}var baseNum=Math.pow(10,Math.max(digitLength(num1),digitLength(num2)));return(times(num1,baseNum)+times(num2,baseNum))/baseNum;}/**\n * Exact subtraction\n */function minus(num1,num2){for(var _len3=arguments.length,others=new Array(_len3>2?_len3-2:0),_key3=2;_key3<_len3;_key3++){others[_key3-2]=arguments[_key3];}if(others.length>0){return minus.apply(void 0,[minus(num1,num2),others[0]].concat(_toConsumableArray(others.slice(1))));}var baseNum=Math.pow(10,Math.max(digitLength(num1),digitLength(num2)));return(times(num1,baseNum)-times(num2,baseNum))/baseNum;}/**\n * Exact division\n */function divide(num1,num2){for(var _len4=arguments.length,others=new Array(_len4>2?_len4-2:0),_key4=2;_key4<_len4;_key4++){others[_key4-2]=arguments[_key4];}if(others.length>0){return divide.apply(void 0,[divide(num1,num2),others[0]].concat(_toConsumableArray(others.slice(1))));}var num1Changed=float2Fixed(num1);var num2Changed=float2Fixed(num2);checkBoundary(num1Changed);checkBoundary(num2Changed);// fix: Similar to 10 ** -4 is 0.00009999999999999999, strip correction\nreturn times(num1Changed/num2Changed,strip(Math.pow(10,digitLength(num2)-digitLength(num1))));}/**\n * rounding\n */function round(num,ratio){var base=Math.pow(10,ratio);return divide(Math.round(times(num,base)),base);}var _boundaryCheckingState=true;/**\n * Whether to perform boundary check, default true\n * @param flag Mark switch, true is on, false is off, default is true\n */function enableBoundaryChecking(){var flag=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;_boundaryCheckingState=flag;}export{strip,plus,minus,times,divide,round,digitLength,float2Fixed,enableBoundaryChecking};// eslint-disable-next-line\nexport default{strip:strip,plus:plus,minus:minus,times:times,divide:divide,round:round,digitLength:digitLength,float2Fixed:float2Fixed,enableBoundaryChecking:enableBoundaryChecking};","map":{"version":3,"names":["strip","num","precision","arguments","length","undefined","parseFloat","toPrecision","digitLength","eSplit","toString","split","len","float2Fixed","indexOf","Number","replace","dLen","Math","pow","checkBoundary","_boundaryCheckingState","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","console","warn","concat","times","num1","num2","_len","others","Array","_key","apply","_toConsumableArray","slice","num1Changed","num2Changed","baseNum","leftValue","plus","_len2","_key2","max","minus","_len3","_key3","divide","_len4","_key4","round","ratio","base","enableBoundaryChecking","flag"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/number-precision.js"],"sourcesContent":["/**\n * @desc Solve the problem of floating calculation, avoid multiple digits after the decimal point and loss of calculation accuracy.\n * example: 3 + 2.4 = 4.699999999999999，1.0 - 0.9 = 0.09999999999999998\n */\n\n/**\n * Correct wrong data\n * strip(0.09999999999999998)=0.1\n */\nfunction strip(num, precision = 12) {\n  return +parseFloat(num.toPrecision(precision));\n}\n\n/**\n * Return digits length of a number\n * @param {*number} num Input number\n */\nfunction digitLength(num) {\n  // Get digit length of e\n  const eSplit = num.toString().split(/[eE]/);\n  const len = (eSplit[0].split('.')[1] || '').length - (+(eSplit[1] || 0));\n  return len > 0 ? len : 0;\n}\n\n/**\n * Convert decimals to integers and support scientific notation. If it is a decimal, it is enlarged to an integer\n * @param {*number} num Number of inputs\n */\nfunction float2Fixed(num) {\n  if (num.toString().indexOf('e') === -1) {\n    return Number(num.toString().replace('.', ''));\n  }\n  const dLen = digitLength(num);\n  return dLen > 0 ? strip(num * Math.pow(10, dLen)) : num;\n}\n\n/**\n * Check whether the number is out of range, and give a prompt if it is out of range\n * @param {*number} num Number of inputs\n */\nfunction checkBoundary(num) {\n  if (_boundaryCheckingState) {\n    if (num > Number.MAX_SAFE_INTEGER || num < Number.MIN_SAFE_INTEGER) {\n      // eslint-disable-next-line no-console\n      console.warn(`${num} is beyond boundary when transfer to integer, the results may not be accurate`);\n    }\n  }\n}\n\n/**\n * Exact multiplication\n */\nfunction times(num1, num2, ...others) {\n  if (others.length > 0) {\n    return times(times(num1, num2), others[0], ...others.slice(1));\n  }\n  const num1Changed = float2Fixed(num1);\n  const num2Changed = float2Fixed(num2);\n  const baseNum = digitLength(num1) + digitLength(num2);\n  const leftValue = num1Changed * num2Changed;\n\n  checkBoundary(leftValue);\n\n  return leftValue / Math.pow(10, baseNum);\n}\n\n/**\n * Exact addition\n */\nfunction plus(num1, num2, ...others) {\n  if (others.length > 0) {\n    return plus(plus(num1, num2), others[0], ...others.slice(1));\n  }\n  const baseNum = Math.pow(10, Math.max(digitLength(num1), digitLength(num2)));\n  return (times(num1, baseNum) + times(num2, baseNum)) / baseNum;\n}\n\n/**\n * Exact subtraction\n */\nfunction minus(num1, num2, ...others) {\n  if (others.length > 0) {\n    return minus(minus(num1, num2), others[0], ...others.slice(1));\n  }\n  const baseNum = Math.pow(10, Math.max(digitLength(num1), digitLength(num2)));\n  return (times(num1, baseNum) - times(num2, baseNum)) / baseNum;\n}\n\n/**\n * Exact division\n */\nfunction divide(num1, num2, ...others) {\n  if (others.length > 0) {\n    return divide(divide(num1, num2), others[0], ...others.slice(1));\n  }\n  const num1Changed = float2Fixed(num1);\n  const num2Changed = float2Fixed(num2);\n  checkBoundary(num1Changed);\n  checkBoundary(num2Changed);\n  // fix: Similar to 10 ** -4 is 0.00009999999999999999, strip correction\n  return times((num1Changed / num2Changed), strip(Math.pow(10, digitLength(num2) - digitLength(num1))));\n}\n\n/**\n * rounding\n */\nfunction round(num, ratio) {\n  const base = Math.pow(10, ratio);\n  return divide(Math.round(times(num, base)), base);\n}\n\nlet _boundaryCheckingState = true;\n/**\n * Whether to perform boundary check, default true\n * @param flag Mark switch, true is on, false is off, default is true\n */\nfunction enableBoundaryChecking(flag = true) {\n  _boundaryCheckingState = flag;\n}\nexport { strip, plus, minus, times, divide, round, digitLength, float2Fixed, enableBoundaryChecking };\n// eslint-disable-next-line\nexport default { strip, plus, minus, times, divide, round, digitLength, float2Fixed, enableBoundaryChecking };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}