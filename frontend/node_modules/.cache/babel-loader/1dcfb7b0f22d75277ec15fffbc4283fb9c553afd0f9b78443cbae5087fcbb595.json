{"ast":null,"code":"import { TransferTypes } from '../constants';\nvar HTML = TransferTypes.HTML,\n  TEXT = TransferTypes.TEXT;\nfunction getEventTransfer(event) {\n  var html;\n  var text;\n  var files;\n  if (window.isMobile) {\n    if (window.dtableTransfer) {\n      text = window.dtableTransfer['TEXT'];\n    }\n  } else {\n    var transfer = event.dataTransfer || event.clipboardData;\n    html = getType(transfer, HTML);\n    text = getType(transfer, TEXT);\n    files = getFiles(transfer);\n  }\n\n  // paste html\n  if (html) {\n    // eslint-disable-next-line new-parens\n    var copiedTableNode = new DOMParser().parseFromString(html, HTML).querySelector('table');\n    if (copiedTableNode) return {\n      html: html,\n      text: text,\n      type: 'html'\n    };\n    return {\n      html: html,\n      text: text,\n      type: 'html'\n    };\n  }\n\n  // paste local picture or other files here\n  if (files && files.length) return {\n    'files': files,\n    type: 'files'\n  };\n\n  // paste text\n  return {\n    text: text || '',\n    type: 'text'\n  };\n}\nfunction getType(transfer, type) {\n  if (!transfer.types || !transfer.types.length) {\n    // COMPAT: In IE 11, there is no `types` field but `getData('Text')`\n    // is supported`. (2017/06/23)\n    return type === TEXT ? transfer.getData('Text') || null : null;\n  }\n  return transfer.getData(type);\n}\nfunction getFiles(transfer) {\n  var files;\n  try {\n    // Get and normalize files if they exist.\n    if (transfer.items && transfer.items.length) {\n      files = Array.from(transfer.items).map(function (item) {\n        return item.kind === 'file' ? item.getAsFile() : null;\n      }).filter(function (exists) {\n        return exists;\n      });\n    } else if (transfer.files && transfer.files.length) {\n      files = Array.from(transfer.files);\n    }\n  } catch (err) {\n    if (transfer.files && transfer.files.length) {\n      files = Array.from(transfer.files);\n    }\n  }\n  return files;\n}\nexport default getEventTransfer;","map":{"version":3,"names":["TransferTypes","HTML","TEXT","getEventTransfer","event","html","text","files","window","isMobile","dtableTransfer","transfer","dataTransfer","clipboardData","getType","getFiles","copiedTableNode","DOMParser","parseFromString","querySelector","type","length","types","getData","items","Array","from","map","item","kind","getAsFile","filter","exists","err"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/utils/get-event-transfer.js"],"sourcesContent":["import { TransferTypes } from '../constants';\nconst {\n  HTML,\n  TEXT\n} = TransferTypes;\nfunction getEventTransfer(event) {\n  let html;\n  let text;\n  let files;\n  if (window.isMobile) {\n    if (window.dtableTransfer) {\n      text = window.dtableTransfer['TEXT'];\n    }\n  } else {\n    const transfer = event.dataTransfer || event.clipboardData;\n    html = getType(transfer, HTML);\n    text = getType(transfer, TEXT);\n    files = getFiles(transfer);\n  }\n\n  // paste html\n  if (html) {\n    // eslint-disable-next-line new-parens\n    let copiedTableNode = new DOMParser().parseFromString(html, HTML).querySelector('table');\n    if (copiedTableNode) return {\n      html,\n      text,\n      type: 'html'\n    };\n    return {\n      html,\n      text,\n      type: 'html'\n    };\n  }\n\n  // paste local picture or other files here\n  if (files && files.length) return {\n    'files': files,\n    type: 'files'\n  };\n\n  // paste text\n  return {\n    text: text || '',\n    type: 'text'\n  };\n}\nfunction getType(transfer, type) {\n  if (!transfer.types || !transfer.types.length) {\n    // COMPAT: In IE 11, there is no `types` field but `getData('Text')`\n    // is supported`. (2017/06/23)\n    return type === TEXT ? transfer.getData('Text') || null : null;\n  }\n  return transfer.getData(type);\n}\nfunction getFiles(transfer) {\n  let files;\n  try {\n    // Get and normalize files if they exist.\n    if (transfer.items && transfer.items.length) {\n      files = Array.from(transfer.items).map(item => item.kind === 'file' ? item.getAsFile() : null).filter(exists => exists);\n    } else if (transfer.files && transfer.files.length) {\n      files = Array.from(transfer.files);\n    }\n  } catch (err) {\n    if (transfer.files && transfer.files.length) {\n      files = Array.from(transfer.files);\n    }\n  }\n  return files;\n}\nexport default getEventTransfer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}