{"ast":null,"code":"import _objectSpread from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component,Fragment}from'react';import{Button}from'reactstrap';import{seafileAPI}from'../../../utils/seafile-api';import{gettext}from'../../../utils/constants';import{Utils}from'../../../utils/utils';import toaster from'../../../components/toast';import OpMenu from'../../../components/dialog/op-menu';import Loading from'../../../components/loading';import Paginator from'../../../components/paginator';import MainPanelTopbar from'../main-panel-topbar';import Nav from'./nav';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var VirusFileItem=/*#__PURE__*/function(_Component){_inherits(VirusFileItem,_Component);var _super=_createSuper(VirusFileItem);function VirusFileItem(props){var _this;_classCallCheck(this,VirusFileItem);_this=_super.call(this,props);_this.handleMouseEnter=function(){if(!_this.props.isItemFreezed){_this.setState({isOpIconShown:true,highlight:true});}};_this.handleMouseLeave=function(){if(!_this.props.isItemFreezed){_this.setState({isOpIconShown:false,highlight:false});}};_this.onUnfreezedItem=function(){_this.setState({highlight:false,isOpIconShow:false});_this.props.onUnfreezedItem();};_this.onMenuItemClick=function(operation){_this.props.handleFile(_this.props.virusFile.virus_id,operation);};_this.translateOperations=function(item){var translateResult='';switch(item){case'delete':translateResult=gettext('Delete');break;case'ignore':translateResult=gettext('Ignore');break;case'do-not-ignore':translateResult=gettext('Don\\'t ignore');break;}return translateResult;};_this.toggleItemSelected=function(e){_this.props.toggleItemSelected(_this.props.virusFile,e.target.checked);};_this.state={highlight:false,isOpIconShown:false};return _this;}_createClass(VirusFileItem,[{key:\"render\",value:function render(){var virusFile=this.props.virusFile;var fileStatus='',fileOpList=[];if(virusFile.has_deleted){fileStatus=/*#__PURE__*/_jsx(\"span\",{className:\"text-green\",children:gettext('Deleted')});}else if(virusFile.has_ignored){fileStatus=/*#__PURE__*/_jsx(\"span\",{className:\"text-orange\",children:gettext('Ignored')});fileOpList=['do-not-ignore'];}else{fileStatus=/*#__PURE__*/_jsx(\"span\",{className:\"text-red\",children:gettext('Unhandled')});fileOpList=['delete','ignore'];}return/*#__PURE__*/_jsxs(\"tr\",{className:this.state.highlight?'tr-highlight':'',onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:virusFile.isSelected,onChange:this.toggleItemSelected})}),/*#__PURE__*/_jsx(\"td\",{children:virusFile.repo_name}),/*#__PURE__*/_jsx(\"td\",{children:virusFile.repo_owner}),/*#__PURE__*/_jsx(\"td\",{children:virusFile.file_path}),/*#__PURE__*/_jsx(\"td\",{children:fileStatus}),/*#__PURE__*/_jsx(\"td\",{children:fileOpList.length>0&&this.state.isOpIconShown&&/*#__PURE__*/_jsx(OpMenu,{operations:fileOpList,translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})})]});}}]);return VirusFileItem;}(Component);var Content=/*#__PURE__*/function(_Component2){_inherits(Content,_Component2);var _super2=_createSuper(Content);function Content(props){var _this2;_classCallCheck(this,Content);_this2=_super2.call(this,props);_this2.onFreezedItem=function(){_this2.setState({isItemFreezed:true});};_this2.onUnfreezedItem=function(){_this2.setState({isItemFreezed:false});};_this2.getPreviousPage=function(){_this2.props.getListByPage(_this2.props.currentPage-1);};_this2.getNextPage=function(){_this2.props.getListByPage(_this2.props.currentPage+1);};_this2.state={isItemFreezed:false};return _this2;}_createClass(Content,[{key:\"render\",value:function render(){var _this3=this;var _this$props=this.props,loading=_this$props.loading,errorMsg=_this$props.errorMsg,virusFiles=_this$props.virusFiles,curPerPage=_this$props.curPerPage,hasNextPage=_this$props.hasNextPage,currentPage=_this$props.currentPage,isAllItemsSelected=_this$props.isAllItemsSelected;if(loading){return/*#__PURE__*/_jsx(Loading,{});}else if(errorMsg){return/*#__PURE__*/_jsx(\"p\",{className:\"error text-center mt-4\",children:errorMsg});}else{return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{width:\"3%\",className:\"text-center\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:isAllItemsSelected,onChange:this.props.toggleAllSelected})}),/*#__PURE__*/_jsx(\"th\",{width:\"24%\",children:gettext('Library')}),/*#__PURE__*/_jsx(\"th\",{width:\"25%\",children:gettext('Owner')}),/*#__PURE__*/_jsx(\"th\",{width:\"28%\",children:gettext('Virus File')}),/*#__PURE__*/_jsx(\"th\",{width:\"15%\",children:gettext('Status')}),/*#__PURE__*/_jsx(\"th\",{width:\"5%\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:virusFiles.map(function(virusFile,index){return/*#__PURE__*/_jsx(VirusFileItem,{virusFile:virusFile,isItemFreezed:_this3.state.isItemFreezed,onFreezedItem:_this3.onFreezedItem,onUnfreezedItem:_this3.onUnfreezedItem,handleFile:_this3.props.handleFile,toggleItemSelected:_this3.props.toggleItemSelected},index);})})]}),virusFiles.length>0&&/*#__PURE__*/_jsx(Paginator,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:currentPage,hasNextPage:hasNextPage,curPerPage:curPerPage,resetPerPage:this.props.resetPerPage})]});}}}]);return Content;}(Component);var UnhandledVirusFiles=/*#__PURE__*/function(_Component3){_inherits(UnhandledVirusFiles,_Component3);var _super3=_createSuper(UnhandledVirusFiles);function UnhandledVirusFiles(props){var _this4;_classCallCheck(this,UnhandledVirusFiles);_this4=_super3.call(this,props);_this4.getListByPage=function(page){var perPage=_this4.state.perPage;var hasHandled=false;seafileAPI.listVirusFiles(page,perPage,hasHandled).then(function(res){var data=res.data;var items=data.virus_file_list.map(function(item){item.isSelected=false;return item;});_this4.setState({loading:false,virusFiles:items,hasNextPage:data.has_next_page});}).catch(function(error){_this4.setState({loading:false,errorMsg:Utils.getErrorMsg(error,true)// true: show login tip if 403\n});});};_this4.resetPerPage=function(perPage){_this4.setState({perPage:perPage},function(){_this4.getListByPage(1);});};_this4.handleFile=function(virusID,op){var request;switch(op){case'delete':request=seafileAPI.deleteVirusFile(virusID);break;case'ignore':request=seafileAPI.toggleIgnoreVirusFile(virusID,true);break;case'do-not-ignore':request=seafileAPI.toggleIgnoreVirusFile(virusID,false);break;}request.then(function(res){_this4.setState({virusFiles:_this4.state.virusFiles.map(function(item){if(item.virus_id==virusID){if(op=='delete'){item.has_deleted=true;}else{item=res.data.virus_file;}}return item;})});}).catch(function(error){toaster.danger(Utils.getErrorMsg(error));});};_this4.toggleAllSelected=function(){_this4.setState(function(prevState){return{isAllItemsSelected:!prevState.isAllItemsSelected,virusFiles:_this4.state.virusFiles.map(function(item){item.isSelected=!prevState.isAllItemsSelected;return item;})};});};_this4.toggleItemSelected=function(targetItem,isSelected){_this4.setState({virusFiles:_this4.state.virusFiles.map(function(item){if(item===targetItem){item.isSelected=isSelected;}return item;})},function(){_this4.setState({isAllItemsSelected:!_this4.state.virusFiles.some(function(item){return!item.isSelected;})});});};_this4.handleSelectedItems=function(op){// op: 'delete-virus', 'ignore-virus'\nvar virusIDs=_this4.state.virusFiles.filter(function(item){if(op=='delete-virus'){return item.isSelected&&!item.has_deleted;}else{return item.isSelected&&!item.has_ignored;}}).map(function(item){return item.virus_id;});seafileAPI.batchProcessVirusFiles(virusIDs,op).then(function(res){var fileList=_this4.state.virusFiles;res.data.success.forEach(function(item){var file=fileList.find(function(file){return file.virus_id==item.virus_id;});if(op=='delete-virus'){file.has_deleted=true;}else{file.has_ignored=true;}});_this4.setState({virusFiles:fileList});res.data.failed.forEach(function(item){var file=fileList.find(function(file){return file.virus_id==item.virus_id;});var errMsg=op=='delete-virus'?gettext('Failed to delete %(virus_file) from library %(library): %(error_msg)'):gettext('Failed to ignore %(virus_file) from library %(library): %(error_msg)');errMsg=errMsg.replace('%(virus_file)',file.file_path).replace('%(library)',file.repo_name).replace('%(error_msg)',item.error_msg);toaster.danger(errMsg);});}).catch(function(error){toaster.danger(Utils.getErrorMsg(error));});};_this4.deleteSelectedItems=function(){var op='delete-virus';_this4.handleSelectedItems(op);};_this4.ignoreSelectedItems=function(){var op='ignore-virus';_this4.handleSelectedItems(op);};_this4.state={loading:true,errorMsg:'',virusFiles:[],isAllItemsSelected:false,selectedItems:[],currentPage:1,perPage:25,hasNextPage:false};return _this4;}_createClass(UnhandledVirusFiles,[{key:\"componentDidMount\",value:function componentDidMount(){var _this5=this;var urlParams=new URL(window.location).searchParams;var _this$state=this.state,currentPage=_this$state.currentPage,perPage=_this$state.perPage;this.setState({perPage:parseInt(urlParams.get('per_page')||perPage),currentPage:parseInt(urlParams.get('page')||currentPage)},function(){_this5.getListByPage(_this5.state.currentPage);});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(Fragment,{children:[this.state.virusFiles.some(function(item){return item.isSelected;})?/*#__PURE__*/_jsx(MainPanelTopbar,_objectSpread(_objectSpread({},this.props),{},{children:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Button,{onClick:this.deleteSelectedItems,className:\"operation-item\",children:gettext('Delete')}),/*#__PURE__*/_jsx(Button,{onClick:this.ignoreSelectedItems,className:\"operation-item\",children:gettext('Ignore')})]})})):/*#__PURE__*/_jsx(MainPanelTopbar,_objectSpread({},this.props)),/*#__PURE__*/_jsx(\"div\",{className:\"main-panel-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cur-view-container\",children:[/*#__PURE__*/_jsx(Nav,{currentItem:\"unhandled\"}),/*#__PURE__*/_jsx(\"div\",{className:\"cur-view-content\",children:/*#__PURE__*/_jsx(Content,{loading:this.state.loading,errorMsg:this.state.errorMsg,virusFiles:this.state.virusFiles,currentPage:this.state.currentPage,hasNextPage:this.state.hasNextPage,curPerPage:this.state.perPage,resetPerPage:this.resetPerPage,getListByPage:this.getListByPage,handleFile:this.handleFile,isAllItemsSelected:this.state.isAllItemsSelected,toggleAllSelected:this.toggleAllSelected,toggleItemSelected:this.toggleItemSelected})})]})})]});}}]);return UnhandledVirusFiles;}(Component);export default UnhandledVirusFiles;","map":{"version":3,"names":["React","Component","Fragment","Button","seafileAPI","gettext","Utils","toaster","OpMenu","Loading","Paginator","MainPanelTopbar","Nav","jsx","_jsx","jsxs","_jsxs","VirusFileItem","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","handleMouseEnter","isItemFreezed","setState","isOpIconShown","highlight","handleMouseLeave","onUnfreezedItem","isOpIconShow","onMenuItemClick","operation","handleFile","virusFile","virus_id","translateOperations","item","translateResult","toggleItemSelected","e","target","checked","state","_createClass","key","value","render","fileStatus","fileOpList","has_deleted","className","children","has_ignored","onMouseEnter","onMouseLeave","type","isSelected","onChange","repo_name","repo_owner","file_path","length","operations","onFreezedItem","Content","_Component2","_super2","_this2","getPreviousPage","getListByPage","currentPage","getNextPage","_this3","_this$props","loading","errorMsg","virusFiles","curPerPage","hasNextPage","isAllItemsSelected","width","toggleAllSelected","map","index","gotoPreviousPage","gotoNextPage","resetPerPage","UnhandledVirusFiles","_Component3","_super3","_this4","page","perPage","hasHandled","listVirusFiles","then","res","data","items","virus_file_list","has_next_page","catch","error","getErrorMsg","virusID","op","request","deleteVirusFile","toggleIgnoreVirusFile","virus_file","danger","prevState","targetItem","some","handleSelectedItems","virusIDs","filter","batchProcessVirusFiles","fileList","success","forEach","file","find","failed","errMsg","replace","error_msg","deleteSelectedItems","ignoreSelectedItems","selectedItems","componentDidMount","_this5","urlParams","URL","window","location","searchParams","_this$state","parseInt","get","_objectSpread","onClick","currentItem"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/virus-scan/unhandled-virus-files.js"],"sourcesContent":["import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './nav';\n\nconst virusFileItemPropTypes = {\n  resetPerPage: PropTypes.func,\n  getListByPage: PropTypes.func.isRequired,\n  handleFile: PropTypes.func.isRequired,\n  virusFile: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  toggleItemSelected: PropTypes.func.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired\n};\n\nclass VirusFileItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  };\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  onMenuItemClick = (operation) => {\n    this.props.handleFile(this.props.virusFile.virus_id, operation);\n  };\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'ignore':\n        translateResult = gettext('Ignore');\n        break;\n      case 'do-not-ignore':\n        translateResult = gettext('Don\\'t ignore');\n        break;\n    }\n    return translateResult;\n  };\n\n  toggleItemSelected = (e) => {\n    this.props.toggleItemSelected(this.props.virusFile, e.target.checked);\n  };\n\n  render() {\n    const virusFile = this.props.virusFile;\n    let fileStatus = '',\n      fileOpList = [];\n    if (virusFile.has_deleted) {\n      fileStatus = <span className=\"text-green\">{gettext('Deleted')}</span>;\n    } else if (virusFile.has_ignored) {\n      fileStatus = <span className=\"text-orange\">{gettext('Ignored')}</span>;\n      fileOpList = ['do-not-ignore'];\n    } else {\n      fileStatus = <span className=\"text-red\">{gettext('Unhandled')}</span>;\n      fileOpList = ['delete', 'ignore'];\n    }\n\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n        <td className=\"text-center\">\n          <input type=\"checkbox\" checked={virusFile.isSelected} onChange={this.toggleItemSelected} />\n        </td>\n        <td>{virusFile.repo_name}</td>\n        <td>{virusFile.repo_owner}</td>\n        <td>{virusFile.file_path}</td>\n        <td>{fileStatus}</td>\n        <td>\n          {fileOpList.length > 0 && this.state.isOpIconShown &&\n            <OpMenu\n              operations={fileOpList}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nVirusFileItem.propTypes = virusFileItemPropTypes;\n\n\nconst virusFileListPropTypes = {\n  currentPage: PropTypes.number,\n  hasNextPage: PropTypes.bool,\n  curPerPage: PropTypes.number,\n  resetPerPage: PropTypes.func,\n  getListByPage: PropTypes.func.isRequired,\n  handleFile: PropTypes.func.isRequired,\n  isAllItemsSelected: PropTypes.bool.isRequired,\n  toggleAllSelected: PropTypes.func.isRequired,\n  toggleItemSelected: PropTypes.func.isRequired,\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  virusFiles: PropTypes.array.isRequired\n};\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.currentPage - 1);\n  };\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.currentPage + 1);\n  };\n\n  render() {\n    const {\n      loading, errorMsg, virusFiles,\n      curPerPage, hasNextPage, currentPage,\n      isAllItemsSelected\n    } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      return (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"3%\" className=\"text-center\">\n                  <input type=\"checkbox\" checked={isAllItemsSelected} onChange={this.props.toggleAllSelected} />\n                </th>\n                <th width=\"24%\">{gettext('Library')}</th>\n                <th width=\"25%\">{gettext('Owner')}</th>\n                <th width=\"28%\">{gettext('Virus File')}</th>\n                <th width=\"15%\">{gettext('Status')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {virusFiles.map((virusFile, index) => {\n                return (\n                  <VirusFileItem\n                    key={index}\n                    virusFile={virusFile}\n                    isItemFreezed={this.state.isItemFreezed}\n                    onFreezedItem={this.onFreezedItem}\n                    onUnfreezedItem={this.onUnfreezedItem}\n                    handleFile={this.props.handleFile}\n                    toggleItemSelected={this.props.toggleItemSelected}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n          {virusFiles.length > 0 &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nContent.propTypes = virusFileListPropTypes;\n\n\nclass UnhandledVirusFiles extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      virusFiles: [],\n\n      isAllItemsSelected: false,\n      selectedItems: [],\n\n      currentPage: 1,\n      perPage: 25,\n      hasNextPage: false\n    };\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const {\n      currentPage, perPage\n    } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getListByPage(this.state.currentPage);\n    });\n  }\n\n  getListByPage = (page) => {\n    const { perPage } = this.state;\n    const hasHandled = false;\n    seafileAPI.listVirusFiles(page, perPage, hasHandled).then((res) => {\n      const data = res.data;\n      const items = data.virus_file_list.map(item => {\n        item.isSelected = false;\n        return item;\n      });\n      this.setState({\n        loading: false,\n        virusFiles: items,\n        hasNextPage: data.has_next_page\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getListByPage(1);\n    });\n  };\n\n  handleFile = (virusID, op) => {\n    let request;\n    switch(op) {\n      case 'delete':\n        request = seafileAPI.deleteVirusFile(virusID);\n        break;\n      case 'ignore':\n        request = seafileAPI.toggleIgnoreVirusFile(virusID, true);\n        break;\n      case 'do-not-ignore':\n        request = seafileAPI.toggleIgnoreVirusFile(virusID, false);\n        break;\n    }\n    request.then((res) => {\n      this.setState({\n        virusFiles: this.state.virusFiles.map((item) => {\n          if (item.virus_id == virusID) {\n            if (op == 'delete') {\n              item.has_deleted = true;\n            } else {\n              item = res.data.virus_file;\n            }\n          }\n          return item;\n        })\n      });\n    }).catch((error) => {\n      toaster.danger(Utils.getErrorMsg(error));\n    });\n  };\n\n  toggleAllSelected = () => {\n    this.setState((prevState) => ({\n      isAllItemsSelected: !prevState.isAllItemsSelected,\n      virusFiles: this.state.virusFiles.map((item) => {\n        item.isSelected = !prevState.isAllItemsSelected;\n        return item;\n      })\n    }));\n  };\n\n  toggleItemSelected = (targetItem, isSelected) => {\n    this.setState({\n      virusFiles: this.state.virusFiles.map((item) => {\n        if (item === targetItem) {\n          item.isSelected = isSelected;\n        }\n        return item;\n      })\n    }, () => {\n      this.setState({\n        isAllItemsSelected: !this.state.virusFiles.some(item => !item.isSelected)\n      });\n    });\n  };\n\n  handleSelectedItems = (op) => {\n    // op: 'delete-virus', 'ignore-virus'\n    const virusIDs = this.state.virusFiles\n      .filter(item => {\n        if (op == 'delete-virus') {\n          return item.isSelected && !item.has_deleted;\n        } else {\n          return item.isSelected && !item.has_ignored;\n        }\n      })\n      .map(item => item.virus_id);\n    seafileAPI.batchProcessVirusFiles(virusIDs, op).then((res) => {\n      let fileList = this.state.virusFiles;\n      res.data.success.forEach(item => {\n        let file = fileList.find(file => file.virus_id == item.virus_id);\n        if (op == 'delete-virus') {\n          file.has_deleted = true;\n        } else {\n          file.has_ignored = true;\n        }\n      });\n      this.setState({\n        virusFiles: fileList\n      });\n\n      res.data.failed.forEach(item => {\n        const file = fileList.find(file => file.virus_id == item.virus_id);\n        let errMsg = op == 'delete-virus' ?\n          gettext('Failed to delete %(virus_file) from library %(library): %(error_msg)') :\n          gettext('Failed to ignore %(virus_file) from library %(library): %(error_msg)');\n        errMsg = errMsg.replace('%(virus_file)', file.file_path)\n          .replace('%(library)', file.repo_name)\n          .replace('%(error_msg)', item.error_msg);\n        toaster.danger(errMsg);\n      });\n    }).catch((error) => {\n      toaster.danger(Utils.getErrorMsg(error));\n    });\n  };\n\n  deleteSelectedItems = () => {\n    const op = 'delete-virus';\n    this.handleSelectedItems(op);\n  };\n\n  ignoreSelectedItems = () => {\n    const op = 'ignore-virus';\n    this.handleSelectedItems(op);\n  };\n\n  render() {\n    return (\n      <Fragment>\n        {this.state.virusFiles.some(item => item.isSelected) ? (\n          <MainPanelTopbar {...this.props}>\n            <Fragment>\n              <Button onClick={this.deleteSelectedItems} className=\"operation-item\">{gettext('Delete')}</Button>\n              <Button onClick={this.ignoreSelectedItems} className=\"operation-item\">{gettext('Ignore')}</Button>\n            </Fragment>\n          </MainPanelTopbar>\n        ) : <MainPanelTopbar {...this.props} />\n        }\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"unhandled\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                virusFiles={this.state.virusFiles}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                getListByPage={this.getListByPage}\n                handleFile={this.handleFile}\n                isAllItemsSelected={this.state.isAllItemsSelected}\n                toggleAllSelected={this.toggleAllSelected}\n                toggleItemSelected={this.toggleItemSelected}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default UnhandledVirusFiles;\n"],"mappings":"6tBAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAElD,OAASC,MAAM,KAAQ,YAAY,CACnC,OAASC,UAAU,KAAQ,4BAA4B,CACvD,OAASC,OAAO,KAAQ,0BAA0B,CAClD,OAASC,KAAK,KAAQ,sBAAsB,CAC5C,MAAO,CAAAC,OAAO,KAAM,2BAA2B,CAC/C,MAAO,CAAAC,MAAM,KAAM,oCAAoC,CACvD,MAAO,CAAAC,OAAO,KAAM,6BAA6B,CACjD,MAAO,CAAAC,SAAS,KAAM,+BAA+B,CACrD,MAAO,CAAAC,eAAe,KAAM,sBAAsB,CAClD,MAAO,CAAAC,GAAG,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,4BAalB,CAAAC,aAAa,uBAAAC,UAAA,EAAAC,SAAA,CAAAF,aAAA,CAAAC,UAAA,MAAAE,MAAA,CAAAC,YAAA,CAAAJ,aAAA,EAEjB,SAAAA,cAAYK,KAAK,CAAE,KAAAC,KAAA,CAAAC,eAAA,MAAAP,aAAA,EACjBM,KAAA,CAAAH,MAAA,CAAAK,IAAA,MAAMH,KAAK,EAAEC,KAAA,CAOfG,gBAAgB,CAAG,UAAM,CACvB,GAAI,CAACH,KAAA,CAAKD,KAAK,CAACK,aAAa,CAAE,CAC7BJ,KAAA,CAAKK,QAAQ,CAAC,CACZC,aAAa,CAAE,IAAI,CACnBC,SAAS,CAAE,IACb,CAAC,CAAC,CACJ,CACF,CAAC,CAAAP,KAAA,CAEDQ,gBAAgB,CAAG,UAAM,CACvB,GAAI,CAACR,KAAA,CAAKD,KAAK,CAACK,aAAa,CAAE,CAC7BJ,KAAA,CAAKK,QAAQ,CAAC,CACZC,aAAa,CAAE,KAAK,CACpBC,SAAS,CAAE,KACb,CAAC,CAAC,CACJ,CACF,CAAC,CAAAP,KAAA,CAEDS,eAAe,CAAG,UAAM,CACtBT,KAAA,CAAKK,QAAQ,CAAC,CACZE,SAAS,CAAE,KAAK,CAChBG,YAAY,CAAE,KAChB,CAAC,CAAC,CACFV,KAAA,CAAKD,KAAK,CAACU,eAAe,CAAC,CAAC,CAC9B,CAAC,CAAAT,KAAA,CAEDW,eAAe,CAAG,SAACC,SAAS,CAAK,CAC/BZ,KAAA,CAAKD,KAAK,CAACc,UAAU,CAACb,KAAA,CAAKD,KAAK,CAACe,SAAS,CAACC,QAAQ,CAAEH,SAAS,CAAC,CACjE,CAAC,CAAAZ,KAAA,CAEDgB,mBAAmB,CAAG,SAACC,IAAI,CAAK,CAC9B,GAAI,CAAAC,eAAe,CAAG,EAAE,CACxB,OAAOD,IAAI,EACT,IAAK,QAAQ,CACXC,eAAe,CAAGpC,OAAO,CAAC,QAAQ,CAAC,CACnC,MACF,IAAK,QAAQ,CACXoC,eAAe,CAAGpC,OAAO,CAAC,QAAQ,CAAC,CACnC,MACF,IAAK,eAAe,CAClBoC,eAAe,CAAGpC,OAAO,CAAC,eAAe,CAAC,CAC1C,MACJ,CACA,MAAO,CAAAoC,eAAe,CACxB,CAAC,CAAAlB,KAAA,CAEDmB,kBAAkB,CAAG,SAACC,CAAC,CAAK,CAC1BpB,KAAA,CAAKD,KAAK,CAACoB,kBAAkB,CAACnB,KAAA,CAAKD,KAAK,CAACe,SAAS,CAAEM,CAAC,CAACC,MAAM,CAACC,OAAO,CAAC,CACvE,CAAC,CAtDCtB,KAAA,CAAKuB,KAAK,CAAG,CACXhB,SAAS,CAAE,KAAK,CAChBD,aAAa,CAAE,KACjB,CAAC,CAAC,OAAAN,KAAA,CACJ,CAACwB,YAAA,CAAA9B,aAAA,GAAA+B,GAAA,UAAAC,KAAA,CAoDD,SAAAC,OAAA,CAAS,CACP,GAAM,CAAAb,SAAS,CAAG,IAAI,CAACf,KAAK,CAACe,SAAS,CACtC,GAAI,CAAAc,UAAU,CAAG,EAAE,CACjBC,UAAU,CAAG,EAAE,CACjB,GAAIf,SAAS,CAACgB,WAAW,CAAE,CACzBF,UAAU,cAAGrC,IAAA,SAAMwC,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAElD,OAAO,CAAC,SAAS,CAAC,CAAO,CAAC,CACvE,CAAC,IAAM,IAAIgC,SAAS,CAACmB,WAAW,CAAE,CAChCL,UAAU,cAAGrC,IAAA,SAAMwC,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAElD,OAAO,CAAC,SAAS,CAAC,CAAO,CAAC,CACtE+C,UAAU,CAAG,CAAC,eAAe,CAAC,CAChC,CAAC,IAAM,CACLD,UAAU,cAAGrC,IAAA,SAAMwC,SAAS,CAAC,UAAU,CAAAC,QAAA,CAAElD,OAAO,CAAC,WAAW,CAAC,CAAO,CAAC,CACrE+C,UAAU,CAAG,CAAC,QAAQ,CAAE,QAAQ,CAAC,CACnC,CAEA,mBACEpC,KAAA,OAAIsC,SAAS,CAAE,IAAI,CAACR,KAAK,CAAChB,SAAS,CAAG,cAAc,CAAG,EAAG,CAAC2B,YAAY,CAAE,IAAI,CAAC/B,gBAAiB,CAACgC,YAAY,CAAE,IAAI,CAAC3B,gBAAiB,CAAAwB,QAAA,eAClIzC,IAAA,OAAIwC,SAAS,CAAC,aAAa,CAAAC,QAAA,cACzBzC,IAAA,UAAO6C,IAAI,CAAC,UAAU,CAACd,OAAO,CAAER,SAAS,CAACuB,UAAW,CAACC,QAAQ,CAAE,IAAI,CAACnB,kBAAmB,CAAE,CAAC,CACzF,CAAC,cACL5B,IAAA,OAAAyC,QAAA,CAAKlB,SAAS,CAACyB,SAAS,CAAK,CAAC,cAC9BhD,IAAA,OAAAyC,QAAA,CAAKlB,SAAS,CAAC0B,UAAU,CAAK,CAAC,cAC/BjD,IAAA,OAAAyC,QAAA,CAAKlB,SAAS,CAAC2B,SAAS,CAAK,CAAC,cAC9BlD,IAAA,OAAAyC,QAAA,CAAKJ,UAAU,CAAK,CAAC,cACrBrC,IAAA,OAAAyC,QAAA,CACGH,UAAU,CAACa,MAAM,CAAG,CAAC,EAAI,IAAI,CAACnB,KAAK,CAACjB,aAAa,eAChDf,IAAA,CAACN,MAAM,EACL0D,UAAU,CAAEd,UAAW,CACvBb,mBAAmB,CAAE,IAAI,CAACA,mBAAoB,CAC9CL,eAAe,CAAE,IAAI,CAACA,eAAgB,CACtCiC,aAAa,CAAE,IAAI,CAAC7C,KAAK,CAAC6C,aAAc,CACxCnC,eAAe,CAAE,IAAI,CAACA,eAAgB,CACvC,CAAC,CAEF,CAAC,EACH,CAAC,CAET,CAAC,WAAAf,aAAA,GAhGyBhB,SAAS,KAqH/B,CAAAmE,OAAO,uBAAAC,WAAA,EAAAlD,SAAA,CAAAiD,OAAA,CAAAC,WAAA,MAAAC,OAAA,CAAAjD,YAAA,CAAA+C,OAAA,EAEX,SAAAA,QAAY9C,KAAK,CAAE,KAAAiD,MAAA,CAAA/C,eAAA,MAAA4C,OAAA,EACjBG,MAAA,CAAAD,OAAA,CAAA7C,IAAA,MAAMH,KAAK,EAAEiD,MAAA,CAMfJ,aAAa,CAAG,UAAM,CACpBI,MAAA,CAAK3C,QAAQ,CAAC,CAACD,aAAa,CAAE,IAAI,CAAC,CAAC,CACtC,CAAC,CAAA4C,MAAA,CAEDvC,eAAe,CAAG,UAAM,CACtBuC,MAAA,CAAK3C,QAAQ,CAAC,CAACD,aAAa,CAAE,KAAK,CAAC,CAAC,CACvC,CAAC,CAAA4C,MAAA,CAEDC,eAAe,CAAG,UAAM,CACtBD,MAAA,CAAKjD,KAAK,CAACmD,aAAa,CAACF,MAAA,CAAKjD,KAAK,CAACoD,WAAW,CAAG,CAAC,CAAC,CACtD,CAAC,CAAAH,MAAA,CAEDI,WAAW,CAAG,UAAM,CAClBJ,MAAA,CAAKjD,KAAK,CAACmD,aAAa,CAACF,MAAA,CAAKjD,KAAK,CAACoD,WAAW,CAAG,CAAC,CAAC,CACtD,CAAC,CAnBCH,MAAA,CAAKzB,KAAK,CAAG,CACXnB,aAAa,CAAE,KACjB,CAAC,CAAC,OAAA4C,MAAA,CACJ,CAACxB,YAAA,CAAAqB,OAAA,GAAApB,GAAA,UAAAC,KAAA,CAkBD,SAAAC,OAAA,CAAS,KAAA0B,MAAA,MACP,IAAAC,WAAA,CAII,IAAI,CAACvD,KAAK,CAHZwD,OAAO,CAAAD,WAAA,CAAPC,OAAO,CAAEC,QAAQ,CAAAF,WAAA,CAARE,QAAQ,CAAEC,UAAU,CAAAH,WAAA,CAAVG,UAAU,CAC7BC,UAAU,CAAAJ,WAAA,CAAVI,UAAU,CAAEC,WAAW,CAAAL,WAAA,CAAXK,WAAW,CAAER,WAAW,CAAAG,WAAA,CAAXH,WAAW,CACpCS,kBAAkB,CAAAN,WAAA,CAAlBM,kBAAkB,CAGpB,GAAIL,OAAO,CAAE,CACX,mBAAOhE,IAAA,CAACL,OAAO,GAAE,CAAC,CACpB,CAAC,IAAM,IAAIsE,QAAQ,CAAE,CACnB,mBAAOjE,IAAA,MAAGwC,SAAS,CAAC,wBAAwB,CAAAC,QAAA,CAAEwB,QAAQ,CAAI,CAAC,CAC7D,CAAC,IAAM,CACL,mBACE/D,KAAA,CAACd,QAAQ,EAAAqD,QAAA,eACPvC,KAAA,UAAAuC,QAAA,eACEzC,IAAA,UAAAyC,QAAA,cACEvC,KAAA,OAAAuC,QAAA,eACEzC,IAAA,OAAIsE,KAAK,CAAC,IAAI,CAAC9B,SAAS,CAAC,aAAa,CAAAC,QAAA,cACpCzC,IAAA,UAAO6C,IAAI,CAAC,UAAU,CAACd,OAAO,CAAEsC,kBAAmB,CAACtB,QAAQ,CAAE,IAAI,CAACvC,KAAK,CAAC+D,iBAAkB,CAAE,CAAC,CAC5F,CAAC,cACLvE,IAAA,OAAIsE,KAAK,CAAC,KAAK,CAAA7B,QAAA,CAAElD,OAAO,CAAC,SAAS,CAAC,CAAK,CAAC,cACzCS,IAAA,OAAIsE,KAAK,CAAC,KAAK,CAAA7B,QAAA,CAAElD,OAAO,CAAC,OAAO,CAAC,CAAK,CAAC,cACvCS,IAAA,OAAIsE,KAAK,CAAC,KAAK,CAAA7B,QAAA,CAAElD,OAAO,CAAC,YAAY,CAAC,CAAK,CAAC,cAC5CS,IAAA,OAAIsE,KAAK,CAAC,KAAK,CAAA7B,QAAA,CAAElD,OAAO,CAAC,QAAQ,CAAC,CAAK,CAAC,cACxCS,IAAA,OAAIsE,KAAK,CAAC,IAAI,CAAuB,CAAC,EACpC,CAAC,CACA,CAAC,cACRtE,IAAA,UAAAyC,QAAA,CACGyB,UAAU,CAACM,GAAG,CAAC,SAACjD,SAAS,CAAEkD,KAAK,CAAK,CACpC,mBACEzE,IAAA,CAACG,aAAa,EAEZoB,SAAS,CAAEA,SAAU,CACrBV,aAAa,CAAEiD,MAAI,CAAC9B,KAAK,CAACnB,aAAc,CACxCwC,aAAa,CAAES,MAAI,CAACT,aAAc,CAClCnC,eAAe,CAAE4C,MAAI,CAAC5C,eAAgB,CACtCI,UAAU,CAAEwC,MAAI,CAACtD,KAAK,CAACc,UAAW,CAClCM,kBAAkB,CAAEkC,MAAI,CAACtD,KAAK,CAACoB,kBAAmB,EAN7C6C,KAON,CAAC,CAEN,CAAC,CAAC,CACG,CAAC,EACH,CAAC,CACPP,UAAU,CAACf,MAAM,CAAG,CAAC,eACtBnD,IAAA,CAACJ,SAAS,EACR8E,gBAAgB,CAAE,IAAI,CAAChB,eAAgB,CACvCiB,YAAY,CAAE,IAAI,CAACd,WAAY,CAC/BD,WAAW,CAAEA,WAAY,CACzBQ,WAAW,CAAEA,WAAY,CACzBD,UAAU,CAAEA,UAAW,CACvBS,YAAY,CAAE,IAAI,CAACpE,KAAK,CAACoE,YAAa,CACvC,CAAC,EAEM,CAAC,CAEf,CACF,CAAC,WAAAtB,OAAA,GAjFmBnE,SAAS,KAuFzB,CAAA0F,mBAAmB,uBAAAC,WAAA,EAAAzE,SAAA,CAAAwE,mBAAA,CAAAC,WAAA,MAAAC,OAAA,CAAAxE,YAAA,CAAAsE,mBAAA,EAEvB,SAAAA,oBAAYrE,KAAK,CAAE,KAAAwE,MAAA,CAAAtE,eAAA,MAAAmE,mBAAA,EACjBG,MAAA,CAAAD,OAAA,CAAApE,IAAA,MAAMH,KAAK,EAAEwE,MAAA,CA4BfrB,aAAa,CAAG,SAACsB,IAAI,CAAK,CACxB,GAAQ,CAAAC,OAAO,CAAKF,MAAA,CAAKhD,KAAK,CAAtBkD,OAAO,CACf,GAAM,CAAAC,UAAU,CAAG,KAAK,CACxB7F,UAAU,CAAC8F,cAAc,CAACH,IAAI,CAAEC,OAAO,CAAEC,UAAU,CAAC,CAACE,IAAI,CAAC,SAACC,GAAG,CAAK,CACjE,GAAM,CAAAC,IAAI,CAAGD,GAAG,CAACC,IAAI,CACrB,GAAM,CAAAC,KAAK,CAAGD,IAAI,CAACE,eAAe,CAACjB,GAAG,CAAC,SAAA9C,IAAI,CAAI,CAC7CA,IAAI,CAACoB,UAAU,CAAG,KAAK,CACvB,MAAO,CAAApB,IAAI,CACb,CAAC,CAAC,CACFsD,MAAA,CAAKlE,QAAQ,CAAC,CACZkD,OAAO,CAAE,KAAK,CACdE,UAAU,CAAEsB,KAAK,CACjBpB,WAAW,CAAEmB,IAAI,CAACG,aACpB,CAAC,CAAC,CACJ,CAAC,CAAC,CAACC,KAAK,CAAC,SAACC,KAAK,CAAK,CAClBZ,MAAA,CAAKlE,QAAQ,CAAC,CACZkD,OAAO,CAAE,KAAK,CACdC,QAAQ,CAAEzE,KAAK,CAACqG,WAAW,CAACD,KAAK,CAAE,IAAI,CAAE;AAC3C,CAAC,CAAC,CACJ,CAAC,CAAC,CACJ,CAAC,CAAAZ,MAAA,CAEDJ,YAAY,CAAG,SAACM,OAAO,CAAK,CAC1BF,MAAA,CAAKlE,QAAQ,CAAC,CACZoE,OAAO,CAAEA,OACX,CAAC,CAAE,UAAM,CACPF,MAAA,CAAKrB,aAAa,CAAC,CAAC,CAAC,CACvB,CAAC,CAAC,CACJ,CAAC,CAAAqB,MAAA,CAED1D,UAAU,CAAG,SAACwE,OAAO,CAAEC,EAAE,CAAK,CAC5B,GAAI,CAAAC,OAAO,CACX,OAAOD,EAAE,EACP,IAAK,QAAQ,CACXC,OAAO,CAAG1G,UAAU,CAAC2G,eAAe,CAACH,OAAO,CAAC,CAC7C,MACF,IAAK,QAAQ,CACXE,OAAO,CAAG1G,UAAU,CAAC4G,qBAAqB,CAACJ,OAAO,CAAE,IAAI,CAAC,CACzD,MACF,IAAK,eAAe,CAClBE,OAAO,CAAG1G,UAAU,CAAC4G,qBAAqB,CAACJ,OAAO,CAAE,KAAK,CAAC,CAC1D,MACJ,CACAE,OAAO,CAACX,IAAI,CAAC,SAACC,GAAG,CAAK,CACpBN,MAAA,CAAKlE,QAAQ,CAAC,CACZoD,UAAU,CAAEc,MAAA,CAAKhD,KAAK,CAACkC,UAAU,CAACM,GAAG,CAAC,SAAC9C,IAAI,CAAK,CAC9C,GAAIA,IAAI,CAACF,QAAQ,EAAIsE,OAAO,CAAE,CAC5B,GAAIC,EAAE,EAAI,QAAQ,CAAE,CAClBrE,IAAI,CAACa,WAAW,CAAG,IAAI,CACzB,CAAC,IAAM,CACLb,IAAI,CAAG4D,GAAG,CAACC,IAAI,CAACY,UAAU,CAC5B,CACF,CACA,MAAO,CAAAzE,IAAI,CACb,CAAC,CACH,CAAC,CAAC,CACJ,CAAC,CAAC,CAACiE,KAAK,CAAC,SAACC,KAAK,CAAK,CAClBnG,OAAO,CAAC2G,MAAM,CAAC5G,KAAK,CAACqG,WAAW,CAACD,KAAK,CAAC,CAAC,CAC1C,CAAC,CAAC,CACJ,CAAC,CAAAZ,MAAA,CAEDT,iBAAiB,CAAG,UAAM,CACxBS,MAAA,CAAKlE,QAAQ,CAAC,SAACuF,SAAS,QAAM,CAC5BhC,kBAAkB,CAAE,CAACgC,SAAS,CAAChC,kBAAkB,CACjDH,UAAU,CAAEc,MAAA,CAAKhD,KAAK,CAACkC,UAAU,CAACM,GAAG,CAAC,SAAC9C,IAAI,CAAK,CAC9CA,IAAI,CAACoB,UAAU,CAAG,CAACuD,SAAS,CAAChC,kBAAkB,CAC/C,MAAO,CAAA3C,IAAI,CACb,CAAC,CACH,CAAC,EAAC,CAAC,CACL,CAAC,CAAAsD,MAAA,CAEDpD,kBAAkB,CAAG,SAAC0E,UAAU,CAAExD,UAAU,CAAK,CAC/CkC,MAAA,CAAKlE,QAAQ,CAAC,CACZoD,UAAU,CAAEc,MAAA,CAAKhD,KAAK,CAACkC,UAAU,CAACM,GAAG,CAAC,SAAC9C,IAAI,CAAK,CAC9C,GAAIA,IAAI,GAAK4E,UAAU,CAAE,CACvB5E,IAAI,CAACoB,UAAU,CAAGA,UAAU,CAC9B,CACA,MAAO,CAAApB,IAAI,CACb,CAAC,CACH,CAAC,CAAE,UAAM,CACPsD,MAAA,CAAKlE,QAAQ,CAAC,CACZuD,kBAAkB,CAAE,CAACW,MAAA,CAAKhD,KAAK,CAACkC,UAAU,CAACqC,IAAI,CAAC,SAAA7E,IAAI,QAAI,CAACA,IAAI,CAACoB,UAAU,GAC1E,CAAC,CAAC,CACJ,CAAC,CAAC,CACJ,CAAC,CAAAkC,MAAA,CAEDwB,mBAAmB,CAAG,SAACT,EAAE,CAAK,CAC5B;AACA,GAAM,CAAAU,QAAQ,CAAGzB,MAAA,CAAKhD,KAAK,CAACkC,UAAU,CACnCwC,MAAM,CAAC,SAAAhF,IAAI,CAAI,CACd,GAAIqE,EAAE,EAAI,cAAc,CAAE,CACxB,MAAO,CAAArE,IAAI,CAACoB,UAAU,EAAI,CAACpB,IAAI,CAACa,WAAW,CAC7C,CAAC,IAAM,CACL,MAAO,CAAAb,IAAI,CAACoB,UAAU,EAAI,CAACpB,IAAI,CAACgB,WAAW,CAC7C,CACF,CAAC,CAAC,CACD8B,GAAG,CAAC,SAAA9C,IAAI,QAAI,CAAAA,IAAI,CAACF,QAAQ,GAAC,CAC7BlC,UAAU,CAACqH,sBAAsB,CAACF,QAAQ,CAAEV,EAAE,CAAC,CAACV,IAAI,CAAC,SAACC,GAAG,CAAK,CAC5D,GAAI,CAAAsB,QAAQ,CAAG5B,MAAA,CAAKhD,KAAK,CAACkC,UAAU,CACpCoB,GAAG,CAACC,IAAI,CAACsB,OAAO,CAACC,OAAO,CAAC,SAAApF,IAAI,CAAI,CAC/B,GAAI,CAAAqF,IAAI,CAAGH,QAAQ,CAACI,IAAI,CAAC,SAAAD,IAAI,QAAI,CAAAA,IAAI,CAACvF,QAAQ,EAAIE,IAAI,CAACF,QAAQ,GAAC,CAChE,GAAIuE,EAAE,EAAI,cAAc,CAAE,CACxBgB,IAAI,CAACxE,WAAW,CAAG,IAAI,CACzB,CAAC,IAAM,CACLwE,IAAI,CAACrE,WAAW,CAAG,IAAI,CACzB,CACF,CAAC,CAAC,CACFsC,MAAA,CAAKlE,QAAQ,CAAC,CACZoD,UAAU,CAAE0C,QACd,CAAC,CAAC,CAEFtB,GAAG,CAACC,IAAI,CAAC0B,MAAM,CAACH,OAAO,CAAC,SAAApF,IAAI,CAAI,CAC9B,GAAM,CAAAqF,IAAI,CAAGH,QAAQ,CAACI,IAAI,CAAC,SAAAD,IAAI,QAAI,CAAAA,IAAI,CAACvF,QAAQ,EAAIE,IAAI,CAACF,QAAQ,GAAC,CAClE,GAAI,CAAA0F,MAAM,CAAGnB,EAAE,EAAI,cAAc,CAC/BxG,OAAO,CAAC,sEAAsE,CAAC,CAC/EA,OAAO,CAAC,sEAAsE,CAAC,CACjF2H,MAAM,CAAGA,MAAM,CAACC,OAAO,CAAC,eAAe,CAAEJ,IAAI,CAAC7D,SAAS,CAAC,CACrDiE,OAAO,CAAC,YAAY,CAAEJ,IAAI,CAAC/D,SAAS,CAAC,CACrCmE,OAAO,CAAC,cAAc,CAAEzF,IAAI,CAAC0F,SAAS,CAAC,CAC1C3H,OAAO,CAAC2G,MAAM,CAACc,MAAM,CAAC,CACxB,CAAC,CAAC,CACJ,CAAC,CAAC,CAACvB,KAAK,CAAC,SAACC,KAAK,CAAK,CAClBnG,OAAO,CAAC2G,MAAM,CAAC5G,KAAK,CAACqG,WAAW,CAACD,KAAK,CAAC,CAAC,CAC1C,CAAC,CAAC,CACJ,CAAC,CAAAZ,MAAA,CAEDqC,mBAAmB,CAAG,UAAM,CAC1B,GAAM,CAAAtB,EAAE,CAAG,cAAc,CACzBf,MAAA,CAAKwB,mBAAmB,CAACT,EAAE,CAAC,CAC9B,CAAC,CAAAf,MAAA,CAEDsC,mBAAmB,CAAG,UAAM,CAC1B,GAAM,CAAAvB,EAAE,CAAG,cAAc,CACzBf,MAAA,CAAKwB,mBAAmB,CAACT,EAAE,CAAC,CAC9B,CAAC,CAjKCf,MAAA,CAAKhD,KAAK,CAAG,CACXgC,OAAO,CAAE,IAAI,CACbC,QAAQ,CAAE,EAAE,CACZC,UAAU,CAAE,EAAE,CAEdG,kBAAkB,CAAE,KAAK,CACzBkD,aAAa,CAAE,EAAE,CAEjB3D,WAAW,CAAE,CAAC,CACdsB,OAAO,CAAE,EAAE,CACXd,WAAW,CAAE,KACf,CAAC,CAAC,OAAAY,MAAA,CACJ,CAAC/C,YAAA,CAAA4C,mBAAA,GAAA3C,GAAA,qBAAAC,KAAA,CAED,SAAAqF,kBAAA,CAAoB,KAAAC,MAAA,MAClB,GAAI,CAAAC,SAAS,CAAI,GAAI,CAAAC,GAAG,CAACC,MAAM,CAACC,QAAQ,CAAC,CAAEC,YAAY,CACvD,IAAAC,WAAA,CAEI,IAAI,CAAC/F,KAAK,CADZ4B,WAAW,CAAAmE,WAAA,CAAXnE,WAAW,CAAEsB,OAAO,CAAA6C,WAAA,CAAP7C,OAAO,CAEtB,IAAI,CAACpE,QAAQ,CAAC,CACZoE,OAAO,CAAE8C,QAAQ,CAACN,SAAS,CAACO,GAAG,CAAC,UAAU,CAAC,EAAI/C,OAAO,CAAC,CACvDtB,WAAW,CAAEoE,QAAQ,CAACN,SAAS,CAACO,GAAG,CAAC,MAAM,CAAC,EAAIrE,WAAW,CAC5D,CAAC,CAAE,UAAM,CACP6D,MAAI,CAAC9D,aAAa,CAAC8D,MAAI,CAACzF,KAAK,CAAC4B,WAAW,CAAC,CAC5C,CAAC,CAAC,CACJ,CAAC,GAAA1B,GAAA,UAAAC,KAAA,CA0ID,SAAAC,OAAA,CAAS,CACP,mBACElC,KAAA,CAACd,QAAQ,EAAAqD,QAAA,EACN,IAAI,CAACT,KAAK,CAACkC,UAAU,CAACqC,IAAI,CAAC,SAAA7E,IAAI,QAAI,CAAAA,IAAI,CAACoB,UAAU,GAAC,cAClD9C,IAAA,CAACH,eAAe,CAAAqI,aAAA,CAAAA,aAAA,IAAK,IAAI,CAAC1H,KAAK,MAAAiC,QAAA,cAC7BvC,KAAA,CAACd,QAAQ,EAAAqD,QAAA,eACPzC,IAAA,CAACX,MAAM,EAAC8I,OAAO,CAAE,IAAI,CAACd,mBAAoB,CAAC7E,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAAElD,OAAO,CAAC,QAAQ,CAAC,CAAS,CAAC,cAClGS,IAAA,CAACX,MAAM,EAAC8I,OAAO,CAAE,IAAI,CAACb,mBAAoB,CAAC9E,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAAElD,OAAO,CAAC,QAAQ,CAAC,CAAS,CAAC,EAC1F,CAAC,EACI,CAAC,cAChBS,IAAA,CAACH,eAAe,CAAAqI,aAAA,IAAK,IAAI,CAAC1H,KAAK,CAAG,CAAC,cAEvCR,IAAA,QAAKwC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,cAChCvC,KAAA,QAAKsC,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjCzC,IAAA,CAACF,GAAG,EAACsI,WAAW,CAAC,WAAW,CAAE,CAAC,cAC/BpI,IAAA,QAAKwC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,cAC/BzC,IAAA,CAACsD,OAAO,EACNU,OAAO,CAAE,IAAI,CAAChC,KAAK,CAACgC,OAAQ,CAC5BC,QAAQ,CAAE,IAAI,CAACjC,KAAK,CAACiC,QAAS,CAC9BC,UAAU,CAAE,IAAI,CAAClC,KAAK,CAACkC,UAAW,CAClCN,WAAW,CAAE,IAAI,CAAC5B,KAAK,CAAC4B,WAAY,CACpCQ,WAAW,CAAE,IAAI,CAACpC,KAAK,CAACoC,WAAY,CACpCD,UAAU,CAAE,IAAI,CAACnC,KAAK,CAACkD,OAAQ,CAC/BN,YAAY,CAAE,IAAI,CAACA,YAAa,CAChCjB,aAAa,CAAE,IAAI,CAACA,aAAc,CAClCrC,UAAU,CAAE,IAAI,CAACA,UAAW,CAC5B+C,kBAAkB,CAAE,IAAI,CAACrC,KAAK,CAACqC,kBAAmB,CAClDE,iBAAiB,CAAE,IAAI,CAACA,iBAAkB,CAC1C3C,kBAAkB,CAAE,IAAI,CAACA,kBAAmB,CAC7C,CAAC,CACC,CAAC,EACH,CAAC,CACH,CAAC,EACE,CAAC,CAEf,CAAC,WAAAiD,mBAAA,GA1M+B1F,SAAS,EA6M3C,cAAe,CAAA0F,mBAAmB"},"metadata":{},"sourceType":"module","externalDependencies":[]}