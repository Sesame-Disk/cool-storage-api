{"ast":null,"code":"import _objectSpread from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component,Fragment}from'react';import{Button}from'reactstrap';import moment from'moment';import{Utils}from'../../../utils/utils';import{seafileAPI}from'../../../utils/seafile-api';import{gettext,username}from'../../../utils/constants';import toaster from'../../../components/toast';import EmptyTip from'../../../components/empty-tip';import Loading from'../../../components/loading';import Selector from'../../../components/single-selector';import SysAdminAddUserDialog from'../../../components/dialog/sysadmin-dialog/sysadmin-add-user-dialog';import CommonOperationConfirmationDialog from'../../../components/dialog/common-operation-confirmation-dialog';import OpMenu from'../../../components/dialog/op-menu';import MainPanelTopbar from'../main-panel-topbar';import UserLink from'../user-link';import OrgNav from'./org-nav';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Content=/*#__PURE__*/function(_Component){_inherits(Content,_Component);var _super=_createSuper(Content);function Content(props){var _this;_classCallCheck(this,Content);_this=_super.call(this,props);_this.toggleItemFreezed=function(isFreezed){_this.setState({isItemFreezed:isFreezed});};_this.onFreezedItem=function(){_this.setState({isItemFreezed:true});};_this.onUnfreezedItem=function(){_this.setState({isItemFreezed:false});};_this.state={isItemFreezed:false};return _this;}_createClass(Content,[{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,loading=_this$props.loading,errorMsg=_this$props.errorMsg,items=_this$props.items;if(loading){return/*#__PURE__*/_jsx(Loading,{});}else if(errorMsg){return/*#__PURE__*/_jsx(\"p\",{className:\"error text-center mt-4\",children:errorMsg});}else{var emptyTip=/*#__PURE__*/_jsx(EmptyTip,{children:/*#__PURE__*/_jsx(\"h2\",{children:gettext('No members')})});var table=/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{width:\"25%\",children:gettext('Name')}),/*#__PURE__*/_jsx(\"th\",{width:\"15%\",children:gettext('Status')}),/*#__PURE__*/_jsx(\"th\",{width:\"15%\",children:gettext('Role')}),/*#__PURE__*/_jsx(\"th\",{width:\"15%\",children:gettext('Space Used')}),/*#__PURE__*/_jsxs(\"th\",{width:\"25%\",children:[gettext('Created At'),' / ',gettext('Last Login')]}),/*#__PURE__*/_jsx(\"th\",{width:\"5%\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:items.map(function(item,index){return/*#__PURE__*/_jsx(Item,{item:item,isItemFreezed:_this2.state.isItemFreezed,onFreezedItem:_this2.onFreezedItem,onUnfreezedItem:_this2.onUnfreezedItem,toggleItemFreezed:_this2.toggleItemFreezed,updateStatus:_this2.props.updateStatus,updateMembership:_this2.props.updateMembership,deleteUser:_this2.props.deleteUser},index);})})]})});return items.length?table:emptyTip;}}}]);return Content;}(Component);var Item=/*#__PURE__*/function(_Component2){_inherits(Item,_Component2);var _super2=_createSuper(Item);function Item(props){var _this3;_classCallCheck(this,Item);_this3=_super2.call(this,props);_this3.handleMouseEnter=function(){if(!_this3.props.isItemFreezed){_this3.setState({isOpIconShown:true,highlight:true});}};_this3.handleMouseLeave=function(){if(!_this3.props.isItemFreezed){_this3.setState({isOpIconShown:false,highlight:false});}};_this3.onUnfreezedItem=function(){_this3.setState({highlight:false,isOpIconShow:false});_this3.props.onUnfreezedItem();};_this3.onMenuItemClick=function(operation){switch(operation){case'Delete':_this3.toggleDeleteDialog();break;case'Reset Password':_this3.toggleResetPasswordDialog();break;default:break;}};_this3.toggleDeleteDialog=function(e){if(e){e.preventDefault();}_this3.setState({isDeleteDialogOpen:!_this3.state.isDeleteDialogOpen});};_this3.toggleResetPasswordDialog=function(e){if(e){e.preventDefault();}_this3.setState({isResetPasswordDialogOpen:!_this3.state.isResetPasswordDialogOpen});};_this3.toggleConfirmInactiveDialog=function(){_this3.setState({isConfirmInactiveDialogOpen:!_this3.state.isConfirmInactiveDialogOpen});};_this3.updateStatus=function(statusOption){_this3.props.updateStatus(_this3.props.item.email,statusOption.value);};_this3.setUserInactive=function(){_this3.props.updateStatus(_this3.props.item.email,'inactive');};_this3.updateMembership=function(membershipOption){_this3.props.updateMembership(_this3.props.item.email,membershipOption.value);};_this3.deleteUser=function(){var item=_this3.props.item;_this3.props.deleteUser(item.org_id,item.email);};_this3.resetPassword=function(){seafileAPI.sysAdminResetUserPassword(_this3.props.item.email).then(function(res){toaster.success(res.data.reset_tip);}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this3.translateOperations=function(item){var translateResult='';switch(item){case'Delete':translateResult=gettext('Delete');break;case'Reset Password':translateResult=gettext('Reset Password');break;}return translateResult;};_this3.translateStatus=function(status){switch(status){case'active':return gettext('Active');case'inactive':return gettext('Inactive');}};_this3.translateMembership=function(membership){switch(membership){case'Admin':return gettext('Admin');case'Member':return gettext('Member');}};_this3.state={isOpIconShown:false,highlight:false,isDeleteDialogOpen:false,isResetPasswordDialogOpen:false};return _this3;}_createClass(Item,[{key:\"render\",value:function render(){var _this4=this;var item=this.props.item;var _this$state=this.state,highlight=_this$state.highlight,isOpIconShown=_this$state.isOpIconShown,isDeleteDialogOpen=_this$state.isDeleteDialogOpen,isResetPasswordDialogOpen=_this$state.isResetPasswordDialogOpen,isConfirmInactiveDialogOpen=_this$state.isConfirmInactiveDialogOpen;var itemName='<span class=\"op-target\">'+Utils.HTMLescape(item.name)+'</span>';var deleteDialogMsg=gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}',itemName);var resetPasswordDialogMsg=gettext('Are you sure you want to reset the password of {placeholder} ?').replace('{placeholder}',itemName);var confirmSetUserInactiveMsg=gettext('Are you sure you want to set {user_placeholder} inactive?').replace('{user_placeholder}',itemName);// for 'user status'\nvar curStatus=item.active?'active':'inactive';this.statusOptions=['active','inactive'].map(function(item){return{value:item,text:_this4.translateStatus(item),isSelected:item==curStatus};});var currentSelectedStatusOption=this.statusOptions.filter(function(item){return item.isSelected;})[0];// for 'user membership'\nvar curMembership=item.is_org_staff?'Admin':'Member';this.membershipOptions=['Admin','Member'].map(function(item){return{value:item,text:_this4.translateMembership(item),isSelected:item==curMembership};});var currentSelectedMembershipOption=this.membershipOptions.filter(function(item){return item.isSelected;})[0];return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(\"tr\",{className:this.state.highlight?'tr-highlight':'',onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(UserLink,{email:item.email,name:item.name})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Selector,{isDropdownToggleShown:highlight,currentSelectedOption:currentSelectedStatusOption,options:this.statusOptions,selectOption:this.updateStatus,toggleItemFreezed:this.props.toggleItemFreezed,operationBeforeSelect:item.active?this.toggleConfirmInactiveDialog:undefined})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Selector,{isDropdownToggleShown:highlight,currentSelectedOption:currentSelectedMembershipOption,options:this.membershipOptions,selectOption:this.updateMembership,toggleItemFreezed:this.props.toggleItemFreezed})}),/*#__PURE__*/_jsx(\"td\",{children:\"\".concat(Utils.bytesToSize(item.quota_usage),\" / \").concat(item.quota_total>0?Utils.bytesToSize(item.quota_total):'--')}),/*#__PURE__*/_jsxs(\"td\",{children:[moment(item.create_time).format('YYYY-MM-DD HH:mm:ss'),' / ',item.last_login?moment(item.last_login).fromNow():'--']}),/*#__PURE__*/_jsx(\"td\",{children:isOpIconShown&&item.email!=username&&/*#__PURE__*/_jsx(OpMenu,{operations:['Delete','Reset Password'],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})})]}),isDeleteDialogOpen&&/*#__PURE__*/_jsx(CommonOperationConfirmationDialog,{title:gettext('Delete Member'),message:deleteDialogMsg,executeOperation:this.deleteUser,confirmBtnText:gettext('Delete'),toggleDialog:this.toggleDeleteDialog}),isResetPasswordDialogOpen&&/*#__PURE__*/_jsx(CommonOperationConfirmationDialog,{title:gettext('Reset Password'),message:resetPasswordDialogMsg,executeOperation:this.resetPassword,confirmBtnText:gettext('Reset'),toggleDialog:this.toggleResetPasswordDialog}),isConfirmInactiveDialogOpen&&/*#__PURE__*/_jsx(CommonOperationConfirmationDialog,{title:gettext('Set user inactive'),message:confirmSetUserInactiveMsg,executeOperation:this.setUserInactive,confirmBtnText:gettext('Set'),toggleDialog:this.toggleConfirmInactiveDialog})]});}}]);return Item;}(Component);var OrgUsers=/*#__PURE__*/function(_Component3){_inherits(OrgUsers,_Component3);var _super3=_createSuper(OrgUsers);function OrgUsers(props){var _this5;_classCallCheck(this,OrgUsers);_this5=_super3.call(this,props);_this5.toggleAddUserDialog=function(){_this5.setState({isAddUserDialogOpen:!_this5.state.isAddUserDialogOpen});};_this5.addUser=function(newUserInfo){var email=newUserInfo.email,name=newUserInfo.name,password=newUserInfo.password;seafileAPI.sysAdminAddOrgUser(_this5.props.orgID,email,name,password).then(function(res){var userList=_this5.state.userList;userList.unshift(res.data);_this5.setState({userList:userList});}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this5.deleteUser=function(orgID,email){seafileAPI.sysAdminDeleteOrgUser(orgID,email).then(function(res){var newUserList=_this5.state.userList.filter(function(item){return item.email!=email;});_this5.setState({userList:newUserList});toaster.success(gettext('Successfully deleted 1 item.'));}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this5.updateStatus=function(email,statusValue){var isActive=statusValue=='active';seafileAPI.sysAdminUpdateOrgUser(_this5.props.orgID,email,'active',isActive).then(function(res){var newUserList=_this5.state.userList.map(function(item){if(item.email==email){item.active=res.data.active;}return item;});_this5.setState({userList:newUserList});}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this5.updateMembership=function(email,membershipValue){var isOrgStaff=membershipValue=='Admin';seafileAPI.sysAdminUpdateOrgUser(_this5.props.orgID,email,'is_org_staff',isOrgStaff).then(function(res){var newUserList=_this5.state.userList.map(function(item){if(item.email==email){item.is_org_staff=res.data.is_org_staff;}return item;});_this5.setState({userList:newUserList});}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this5.state={loading:true,errorMsg:'',orgName:'',userList:[],isAddUserDialogOpen:false};return _this5;}_createClass(OrgUsers,[{key:\"componentDidMount\",value:function componentDidMount(){var _this6=this;seafileAPI.sysAdminGetOrg(this.props.orgID).then(function(res){_this6.setState({orgName:res.data.org_name});});seafileAPI.sysAdminListOrgUsers(this.props.orgID).then(function(res){_this6.setState({loading:false,userList:res.data.users});}).catch(function(error){_this6.setState({loading:false,errorMsg:Utils.getErrorMsg(error,true)// true: show login tip if 403\n});});}},{key:\"render\",value:function render(){var _this$state2=this.state,isAddUserDialogOpen=_this$state2.isAddUserDialogOpen,orgName=_this$state2.orgName;return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MainPanelTopbar,_objectSpread(_objectSpread({},this.props),{},{children:/*#__PURE__*/_jsx(Button,{className:\"btn btn-secondary operation-item\",onClick:this.toggleAddUserDialog,children:gettext('Add Member')})})),/*#__PURE__*/_jsx(\"div\",{className:\"main-panel-center flex-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cur-view-container\",children:[/*#__PURE__*/_jsx(OrgNav,{currentItem:\"users\",orgID:this.props.orgID,orgName:orgName}),/*#__PURE__*/_jsx(\"div\",{className:\"cur-view-content\",children:/*#__PURE__*/_jsx(Content,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.userList,updateStatus:this.updateStatus,updateMembership:this.updateMembership,deleteUser:this.deleteUser})})]})}),isAddUserDialogOpen&&/*#__PURE__*/_jsx(SysAdminAddUserDialog,{addUser:this.addUser,toggleDialog:this.toggleAddUserDialog})]});}}]);return OrgUsers;}(Component);export default OrgUsers;","map":{"version":3,"names":["React","Component","Fragment","Button","moment","Utils","seafileAPI","gettext","username","toaster","EmptyTip","Loading","Selector","SysAdminAddUserDialog","CommonOperationConfirmationDialog","OpMenu","MainPanelTopbar","UserLink","OrgNav","jsx","_jsx","jsxs","_jsxs","Content","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","toggleItemFreezed","isFreezed","setState","isItemFreezed","onFreezedItem","onUnfreezedItem","state","_createClass","key","value","render","_this2","_this$props","loading","errorMsg","items","className","children","emptyTip","table","width","map","item","index","Item","updateStatus","updateMembership","deleteUser","length","_Component2","_super2","_this3","handleMouseEnter","isOpIconShown","highlight","handleMouseLeave","isOpIconShow","onMenuItemClick","operation","toggleDeleteDialog","toggleResetPasswordDialog","e","preventDefault","isDeleteDialogOpen","isResetPasswordDialogOpen","toggleConfirmInactiveDialog","isConfirmInactiveDialogOpen","statusOption","email","setUserInactive","membershipOption","org_id","resetPassword","sysAdminResetUserPassword","then","res","success","data","reset_tip","catch","error","errMessage","getErrorMsg","danger","translateOperations","translateResult","translateStatus","status","translateMembership","membership","_this4","_this$state","itemName","HTMLescape","name","deleteDialogMsg","replace","resetPasswordDialogMsg","confirmSetUserInactiveMsg","curStatus","active","statusOptions","text","isSelected","currentSelectedStatusOption","filter","curMembership","is_org_staff","membershipOptions","currentSelectedMembershipOption","onMouseEnter","onMouseLeave","isDropdownToggleShown","currentSelectedOption","options","selectOption","operationBeforeSelect","undefined","concat","bytesToSize","quota_usage","quota_total","create_time","format","last_login","fromNow","operations","title","message","executeOperation","confirmBtnText","toggleDialog","OrgUsers","_Component3","_super3","_this5","toggleAddUserDialog","isAddUserDialogOpen","addUser","newUserInfo","password","sysAdminAddOrgUser","orgID","userList","unshift","sysAdminDeleteOrgUser","newUserList","statusValue","isActive","sysAdminUpdateOrgUser","membershipValue","isOrgStaff","orgName","componentDidMount","_this6","sysAdminGetOrg","org_name","sysAdminListOrgUsers","users","_this$state2","_objectSpread","onClick","currentItem"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/orgs/org-users.js"],"sourcesContent":["import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, username } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Selector from '../../../components/single-selector';\nimport SysAdminAddUserDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-user-dialog';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport OrgNav from './org-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({ isItemFreezed: isFreezed });\n  };\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No members')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"15%\">{gettext('Status')}</th>\n                <th width=\"15%\">{gettext('Role')}</th>\n                <th width=\"15%\">{gettext('Space Used')}</th>\n                <th width=\"25%\">{gettext('Created At')}{' / '}{gettext('Last Login')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  toggleItemFreezed={this.toggleItemFreezed}\n                  updateStatus={this.props.updateStatus}\n                  updateMembership={this.props.updateMembership}\n                  deleteUser={this.props.deleteUser}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  updateStatus: PropTypes.func.isRequired,\n  updateMembership: PropTypes.func.isRequired,\n  deleteUser: PropTypes.func.isRequired,\n};\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isDeleteDialogOpen: false,\n      isResetPasswordDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  };\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n      case 'Reset Password':\n        this.toggleResetPasswordDialog();\n        break;\n      default:\n        break;\n    }\n  };\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  };\n\n  toggleResetPasswordDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isResetPasswordDialogOpen: !this.state.isResetPasswordDialogOpen});\n  };\n\n  toggleConfirmInactiveDialog= () => {\n    this.setState({isConfirmInactiveDialogOpen: !this.state.isConfirmInactiveDialogOpen});\n  };\n\n  updateStatus= (statusOption) => {\n    this.props.updateStatus(this.props.item.email, statusOption.value);\n  };\n\n  setUserInactive = () => {\n    this.props.updateStatus(this.props.item.email, 'inactive');\n  };\n\n  updateMembership= (membershipOption) => {\n    this.props.updateMembership(this.props.item.email, membershipOption.value);\n  };\n\n  deleteUser = () => {\n    const { item } = this.props;\n    this.props.deleteUser(item.org_id, item.email);\n  };\n\n  resetPassword = () => {\n    seafileAPI.sysAdminResetUserPassword(this.props.item.email).then(res => {\n      toaster.success(res.data.reset_tip);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n    }\n\n    return translateResult;\n  };\n\n  translateStatus = (status) => {\n    switch (status) {\n      case 'active':\n        return gettext('Active');\n      case 'inactive':\n        return gettext('Inactive');\n    }\n  };\n\n  translateMembership = (membership) => {\n    switch (membership) {\n      case 'Admin':\n        return gettext('Admin');\n      case 'Member':\n        return gettext('Member');\n    }\n  };\n\n  render() {\n    const { item } = this.props;\n    const { highlight, isOpIconShown, isDeleteDialogOpen, isResetPasswordDialogOpen, isConfirmInactiveDialogOpen } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    let deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n    let resetPasswordDialogMsg = gettext('Are you sure you want to reset the password of {placeholder} ?').replace('{placeholder}', itemName);\n    const confirmSetUserInactiveMsg = gettext('Are you sure you want to set {user_placeholder} inactive?').replace('{user_placeholder}', itemName);\n\n    // for 'user status'\n    const curStatus = item.active ? 'active' : 'inactive';\n    this.statusOptions = ['active', 'inactive'].map(item => {\n      return {\n        value: item,\n        text: this.translateStatus(item),\n        isSelected: item == curStatus\n      };\n    });\n    const currentSelectedStatusOption = this.statusOptions.filter(item => item.isSelected)[0];\n\n    // for 'user membership'\n    const curMembership = item.is_org_staff? 'Admin' : 'Member';\n    this.membershipOptions = ['Admin', 'Member'].map(item => {\n      return {\n        value: item,\n        text: this.translateMembership(item),\n        isSelected: item == curMembership\n      };\n    });\n    const currentSelectedMembershipOption = this.membershipOptions.filter(item => item.isSelected)[0];\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><UserLink email={item.email} name={item.name} /></td>\n          <td>\n            <Selector\n              isDropdownToggleShown={highlight}\n              currentSelectedOption={currentSelectedStatusOption}\n              options={this.statusOptions}\n              selectOption={this.updateStatus}\n              toggleItemFreezed={this.props.toggleItemFreezed}\n              operationBeforeSelect={item.active ? this.toggleConfirmInactiveDialog : undefined}\n            />\n          </td>\n          <td>\n            <Selector\n              isDropdownToggleShown={highlight}\n              currentSelectedOption={currentSelectedMembershipOption}\n              options={this.membershipOptions}\n              selectOption={this.updateMembership}\n              toggleItemFreezed={this.props.toggleItemFreezed}\n            />\n          </td>\n          <td>{`${Utils.bytesToSize(item.quota_usage)} / ${item.quota_total > 0 ? Utils.bytesToSize(item.quota_total) : '--'}`}</td>\n          <td>\n            {moment(item.create_time).format('YYYY-MM-DD HH:mm:ss')}{' / '}{item.last_login ? moment(item.last_login).fromNow() : '--'}\n          </td>\n          <td>\n            {(isOpIconShown && item.email != username) &&\n            <OpMenu\n              operations={['Delete', 'Reset Password']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Member')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteUser}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n        {isResetPasswordDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Reset Password')}\n            message={resetPasswordDialogMsg}\n            executeOperation={this.resetPassword}\n            confirmBtnText={gettext('Reset')}\n            toggleDialog={this.toggleResetPasswordDialog}\n          />\n        }\n        {isConfirmInactiveDialogOpen &&\n        <CommonOperationConfirmationDialog\n          title={gettext('Set user inactive')}\n          message={confirmSetUserInactiveMsg}\n          executeOperation={this.setUserInactive}\n          confirmBtnText={gettext('Set')}\n          toggleDialog={this.toggleConfirmInactiveDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n  updateStatus: PropTypes.func.isRequired,\n  updateMembership: PropTypes.func.isRequired,\n  deleteUser: PropTypes.func.isRequired,\n};\n\nclass OrgUsers extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      orgName: '',\n      userList: [],\n      isAddUserDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetOrg(this.props.orgID).then((res) => {\n      this.setState({\n        orgName: res.data.org_name\n      });\n    });\n    seafileAPI.sysAdminListOrgUsers(this.props.orgID).then((res) => {\n      this.setState({\n        loading: false,\n        userList: res.data.users\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleAddUserDialog = () => {\n    this.setState({isAddUserDialogOpen: !this.state.isAddUserDialogOpen});\n  };\n\n  addUser = (newUserInfo) => {\n    const { email, name, password } = newUserInfo;\n    seafileAPI.sysAdminAddOrgUser(this.props.orgID, email, name, password).then(res => {\n      let userList = this.state.userList;\n      userList.unshift(res.data);\n      this.setState({userList: userList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  deleteUser = (orgID, email) => {\n    seafileAPI.sysAdminDeleteOrgUser(orgID, email).then(res => {\n      let newUserList = this.state.userList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({userList: newUserList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  updateStatus = (email, statusValue) => {\n    const isActive = statusValue == 'active';\n    seafileAPI.sysAdminUpdateOrgUser(this.props.orgID, email, 'active', isActive).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item.active = res.data.active;\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  updateMembership = (email, membershipValue) => {\n    const isOrgStaff = membershipValue == 'Admin';\n    seafileAPI.sysAdminUpdateOrgUser(this.props.orgID, email, 'is_org_staff', isOrgStaff).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item.is_org_staff = res.data.is_org_staff;\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { isAddUserDialogOpen, orgName } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddUserDialog}>{gettext('Add Member')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgNav\n              currentItem=\"users\"\n              orgID={this.props.orgID}\n              orgName={orgName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.userList}\n                updateStatus={this.updateStatus}\n                updateMembership={this.updateMembership}\n                deleteUser={this.deleteUser}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddUserDialogOpen &&\n          <SysAdminAddUserDialog\n            addUser={this.addUser}\n            toggleDialog={this.toggleAddUserDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nOrgUsers.propTypes = {\n  orgID: PropTypes.string,\n};\n\nexport default OrgUsers;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}