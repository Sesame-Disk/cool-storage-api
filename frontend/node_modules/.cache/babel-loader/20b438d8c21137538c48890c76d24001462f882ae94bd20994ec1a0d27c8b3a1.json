{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { REBASE_MARK_KEY } from '../../../constants';\nimport { getNode } from '../queries';\nimport { replaceNode } from './replace-node';\nexport var updateRebaseParentNodeByPath = function updateRebaseParentNodeByPath(editor, path) {\n  var parentPath = path.slice(0, -1);\n  var parentNode = getNode(editor, parentPath);\n  if (parentNode.children.filter(function (item) {\n    return item[REBASE_MARK_KEY.REBASE_TYPE];\n  }).length !== 0) return;\n  var newParentElement = _objectSpread({}, parentNode);\n  newParentElement[REBASE_MARK_KEY.REBASE_TYPE] && delete newParentElement[REBASE_MARK_KEY.REBASE_TYPE];\n  newParentElement[REBASE_MARK_KEY.OLD_ELEMENT] && delete newParentElement[REBASE_MARK_KEY.OLD_ELEMENT];\n  newParentElement[REBASE_MARK_KEY.ORIGIN] && delete newParentElement[REBASE_MARK_KEY.ORIGIN];\n  newParentElement['children'] = newParentElement['children'].map(function (item) {\n    item[REBASE_MARK_KEY.REBASE_TYPE] && delete item[REBASE_MARK_KEY.REBASE_TYPE];\n    item[REBASE_MARK_KEY.OLD_ELEMENT] && delete item[REBASE_MARK_KEY.OLD_ELEMENT];\n    item[REBASE_MARK_KEY.ORIGIN] && delete item[REBASE_MARK_KEY.ORIGIN];\n    return item;\n  });\n  replaceNode(editor, {\n    at: parentPath,\n    nodes: newParentElement\n  });\n};","map":{"version":3,"names":["_objectSpread","REBASE_MARK_KEY","getNode","replaceNode","updateRebaseParentNodeByPath","editor","path","parentPath","slice","parentNode","children","filter","item","REBASE_TYPE","length","newParentElement","OLD_ELEMENT","ORIGIN","map","at","nodes"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/extension/core/transforms/update-parent-node.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { REBASE_MARK_KEY } from '../../../constants';\nimport { getNode } from '../queries';\nimport { replaceNode } from './replace-node';\nexport const updateRebaseParentNodeByPath = (editor, path) => {\n  const parentPath = path.slice(0, -1);\n  const parentNode = getNode(editor, parentPath);\n  if (parentNode.children.filter(item => item[REBASE_MARK_KEY.REBASE_TYPE]).length !== 0) return;\n  const newParentElement = _objectSpread({}, parentNode);\n  newParentElement[REBASE_MARK_KEY.REBASE_TYPE] && delete newParentElement[REBASE_MARK_KEY.REBASE_TYPE];\n  newParentElement[REBASE_MARK_KEY.OLD_ELEMENT] && delete newParentElement[REBASE_MARK_KEY.OLD_ELEMENT];\n  newParentElement[REBASE_MARK_KEY.ORIGIN] && delete newParentElement[REBASE_MARK_KEY.ORIGIN];\n  newParentElement['children'] = newParentElement['children'].map(item => {\n    item[REBASE_MARK_KEY.REBASE_TYPE] && delete item[REBASE_MARK_KEY.REBASE_TYPE];\n    item[REBASE_MARK_KEY.OLD_ELEMENT] && delete item[REBASE_MARK_KEY.OLD_ELEMENT];\n    item[REBASE_MARK_KEY.ORIGIN] && delete item[REBASE_MARK_KEY.ORIGIN];\n    return item;\n  });\n  replaceNode(editor, {\n    at: parentPath,\n    nodes: newParentElement\n  });\n};"],"mappings":"AAAA,OAAOA,aAAa,MAAM,0CAA0C;AACpE,SAASC,eAAe,QAAQ,oBAAoB;AACpD,SAASC,OAAO,QAAQ,YAAY;AACpC,SAASC,WAAW,QAAQ,gBAAgB;AAC5C,OAAO,IAAMC,4BAA4B,GAAG,SAA/BA,4BAA4BA,CAAIC,MAAM,EAAEC,IAAI,EAAK;EAC5D,IAAMC,UAAU,GAAGD,IAAI,CAACE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACpC,IAAMC,UAAU,GAAGP,OAAO,CAACG,MAAM,EAAEE,UAAU,CAAC;EAC9C,IAAIE,UAAU,CAACC,QAAQ,CAACC,MAAM,CAAC,UAAAC,IAAI;IAAA,OAAIA,IAAI,CAACX,eAAe,CAACY,WAAW,CAAC;EAAA,EAAC,CAACC,MAAM,KAAK,CAAC,EAAE;EACxF,IAAMC,gBAAgB,GAAGf,aAAa,CAAC,CAAC,CAAC,EAAES,UAAU,CAAC;EACtDM,gBAAgB,CAACd,eAAe,CAACY,WAAW,CAAC,IAAI,OAAOE,gBAAgB,CAACd,eAAe,CAACY,WAAW,CAAC;EACrGE,gBAAgB,CAACd,eAAe,CAACe,WAAW,CAAC,IAAI,OAAOD,gBAAgB,CAACd,eAAe,CAACe,WAAW,CAAC;EACrGD,gBAAgB,CAACd,eAAe,CAACgB,MAAM,CAAC,IAAI,OAAOF,gBAAgB,CAACd,eAAe,CAACgB,MAAM,CAAC;EAC3FF,gBAAgB,CAAC,UAAU,CAAC,GAAGA,gBAAgB,CAAC,UAAU,CAAC,CAACG,GAAG,CAAC,UAAAN,IAAI,EAAI;IACtEA,IAAI,CAACX,eAAe,CAACY,WAAW,CAAC,IAAI,OAAOD,IAAI,CAACX,eAAe,CAACY,WAAW,CAAC;IAC7ED,IAAI,CAACX,eAAe,CAACe,WAAW,CAAC,IAAI,OAAOJ,IAAI,CAACX,eAAe,CAACe,WAAW,CAAC;IAC7EJ,IAAI,CAACX,eAAe,CAACgB,MAAM,CAAC,IAAI,OAAOL,IAAI,CAACX,eAAe,CAACgB,MAAM,CAAC;IACnE,OAAOL,IAAI;EACb,CAAC,CAAC;EACFT,WAAW,CAACE,MAAM,EAAE;IAClBc,EAAE,EAAEZ,UAAU;IACda,KAAK,EAAEL;EACT,CAAC,CAAC;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}