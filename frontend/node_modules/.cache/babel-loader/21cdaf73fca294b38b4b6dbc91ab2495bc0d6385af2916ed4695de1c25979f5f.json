{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{seafileAPI}from'../../utils/seafile-api';import{Modal,ModalHeader,ModalBody,ModalFooter,Button}from'reactstrap';import{gettext}from'../../utils/constants';import{Utils}from'../../utils/utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DeleteFolderDialog=/*#__PURE__*/function(_Component){_inherits(DeleteFolderDialog,_Component);var _super=_createSuper(DeleteFolderDialog);function DeleteFolderDialog(props){var _this;_classCallCheck(this,DeleteFolderDialog);_this=_super.call(this,props);_this.deleteFolder=function(){_this.props.deleteFolder();_this.props.toggleDialog();};_this.state={sharedToUserCount:0,sharedToGroupCount:0};return _this;}_createClass(DeleteFolderDialog,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var _this$props=this.props,repoID=_this$props.repoID,path=_this$props.path;seafileAPI.getRepoFolderShareInfo(repoID,path).then(function(res){_this2.setState({sharedToUserCount:res.data['shared_user_emails'].length,sharedToGroupCount:res.data['shared_group_ids'].length});});}},{key:\"render\",value:function render(){var _this$state=this.state,sharedToUserCount=_this$state.sharedToUserCount,sharedToGroupCount=_this$state.sharedToGroupCount;var _this$props2=this.props,path=_this$props2.path,toggleDialog=_this$props2.toggleDialog;var folderName=Utils.getFileName(path);var opTarget='<span class=\"op-target\">'+Utils.HTMLescape(folderName)+'</span>';var message=gettext('Are you sure you want to delete %s ?').replace('%s',opTarget);var alert_message='';if(sharedToUserCount>0||sharedToGroupCount>0){alert_message=gettext('This folder has been shared to {user_amount} user(s) and {group_amount} group(s).').replace('{user_amount}',sharedToUserCount).replace('{group_amount}',sharedToGroupCount);}return/*#__PURE__*/_jsxs(Modal,{isOpen:true,toggle:toggleDialog,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:toggleDialog,children:gettext('Delete Folder')}),/*#__PURE__*/_jsxs(ModalBody,{children:[/*#__PURE__*/_jsx(\"p\",{dangerouslySetInnerHTML:{__html:message}}),alert_message&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:alert_message})]}),/*#__PURE__*/_jsxs(ModalFooter,{children:[/*#__PURE__*/_jsx(Button,{color:\"secondary\",onClick:toggleDialog,children:gettext('Cancel')}),/*#__PURE__*/_jsx(Button,{color:\"primary\",onClick:this.deleteFolder,children:gettext('Delete')})]})]});}}]);return DeleteFolderDialog;}(Component);export default DeleteFolderDialog;","map":{"version":3,"names":["React","Component","seafileAPI","Modal","ModalHeader","ModalBody","ModalFooter","Button","gettext","Utils","jsx","_jsx","jsxs","_jsxs","DeleteFolderDialog","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","deleteFolder","toggleDialog","state","sharedToUserCount","sharedToGroupCount","_createClass","key","value","componentDidMount","_this2","_this$props","repoID","path","getRepoFolderShareInfo","then","res","setState","data","length","render","_this$state","_this$props2","folderName","getFileName","opTarget","HTMLescape","message","replace","alert_message","isOpen","toggle","children","dangerouslySetInnerHTML","__html","className","color","onClick"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/delete-folder-dialog.js"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  deleteFolder: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass DeleteFolderDialog extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      sharedToUserCount: 0,\n      sharedToGroupCount: 0\n    };\n  }\n\n  componentDidMount() {\n    const { repoID, path } = this.props;\n    seafileAPI.getRepoFolderShareInfo(repoID, path).then((res) => {\n      this.setState({\n        sharedToUserCount: res.data['shared_user_emails'].length,\n        sharedToGroupCount: res.data['shared_group_ids'].length\n      });\n    });\n  }\n\n  deleteFolder = () => {\n    this.props.deleteFolder();\n    this.props.toggleDialog();\n  };\n\n  render() {\n    const { sharedToUserCount, sharedToGroupCount } = this.state;\n    const { path, toggleDialog } = this.props;\n    const folderName = Utils.getFileName(path);\n    const opTarget = '<span class=\"op-target\">' + Utils.HTMLescape(folderName) + '</span>';\n    const message = gettext('Are you sure you want to delete %s ?').replace('%s', opTarget);\n\n    let alert_message = '';\n    if (sharedToUserCount > 0 || sharedToGroupCount > 0) {\n      alert_message = gettext('This folder has been shared to {user_amount} user(s) and {group_amount} group(s).')\n        .replace('{user_amount}', sharedToUserCount)\n        .replace('{group_amount}', sharedToGroupCount);\n    }\n\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Delete Folder')}</ModalHeader>\n        <ModalBody>\n          <p dangerouslySetInnerHTML={{__html: message}}></p>\n          {alert_message && <p className=\"error\">{alert_message}</p>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.deleteFolder}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nDeleteFolderDialog.propTypes = propTypes;\n\nexport default DeleteFolderDialog;\n"],"mappings":"wkBAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CAExC,OAASC,UAAU,KAAQ,yBAAyB,CACpD,OAASC,KAAK,CAAEC,WAAW,CAAEC,SAAS,CAAEC,WAAW,CAAEC,MAAM,KAAQ,YAAY,CAC/E,OAASC,OAAO,KAAQ,uBAAuB,CAC/C,OAASC,KAAK,KAAQ,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,4BASpC,CAAAC,kBAAkB,uBAAAC,UAAA,EAAAC,SAAA,CAAAF,kBAAA,CAAAC,UAAA,MAAAE,MAAA,CAAAC,YAAA,CAAAJ,kBAAA,EAEtB,SAAAA,mBAAYK,KAAK,CAAE,KAAAC,KAAA,CAAAC,eAAA,MAAAP,kBAAA,EACjBM,KAAA,CAAAH,MAAA,CAAAK,IAAA,MAAMH,KAAK,EAAEC,KAAA,CAiBfG,YAAY,CAAG,UAAM,CACnBH,KAAA,CAAKD,KAAK,CAACI,YAAY,CAAC,CAAC,CACzBH,KAAA,CAAKD,KAAK,CAACK,YAAY,CAAC,CAAC,CAC3B,CAAC,CAnBCJ,KAAA,CAAKK,KAAK,CAAG,CACXC,iBAAiB,CAAE,CAAC,CACpBC,kBAAkB,CAAE,CACtB,CAAC,CAAC,OAAAP,KAAA,CACJ,CAACQ,YAAA,CAAAd,kBAAA,GAAAe,GAAA,qBAAAC,KAAA,CAED,SAAAC,kBAAA,CAAoB,KAAAC,MAAA,MAClB,IAAAC,WAAA,CAAyB,IAAI,CAACd,KAAK,CAA3Be,MAAM,CAAAD,WAAA,CAANC,MAAM,CAAEC,IAAI,CAAAF,WAAA,CAAJE,IAAI,CACpBjC,UAAU,CAACkC,sBAAsB,CAACF,MAAM,CAAEC,IAAI,CAAC,CAACE,IAAI,CAAC,SAACC,GAAG,CAAK,CAC5DN,MAAI,CAACO,QAAQ,CAAC,CACZb,iBAAiB,CAAEY,GAAG,CAACE,IAAI,CAAC,oBAAoB,CAAC,CAACC,MAAM,CACxDd,kBAAkB,CAAEW,GAAG,CAACE,IAAI,CAAC,kBAAkB,CAAC,CAACC,MACnD,CAAC,CAAC,CACJ,CAAC,CAAC,CACJ,CAAC,GAAAZ,GAAA,UAAAC,KAAA,CAOD,SAAAY,OAAA,CAAS,CACP,IAAAC,WAAA,CAAkD,IAAI,CAAClB,KAAK,CAApDC,iBAAiB,CAAAiB,WAAA,CAAjBjB,iBAAiB,CAAEC,kBAAkB,CAAAgB,WAAA,CAAlBhB,kBAAkB,CAC7C,IAAAiB,YAAA,CAA+B,IAAI,CAACzB,KAAK,CAAjCgB,IAAI,CAAAS,YAAA,CAAJT,IAAI,CAAEX,YAAY,CAAAoB,YAAA,CAAZpB,YAAY,CAC1B,GAAM,CAAAqB,UAAU,CAAGpC,KAAK,CAACqC,WAAW,CAACX,IAAI,CAAC,CAC1C,GAAM,CAAAY,QAAQ,CAAG,0BAA0B,CAAGtC,KAAK,CAACuC,UAAU,CAACH,UAAU,CAAC,CAAG,SAAS,CACtF,GAAM,CAAAI,OAAO,CAAGzC,OAAO,CAAC,sCAAsC,CAAC,CAAC0C,OAAO,CAAC,IAAI,CAAEH,QAAQ,CAAC,CAEvF,GAAI,CAAAI,aAAa,CAAG,EAAE,CACtB,GAAIzB,iBAAiB,CAAG,CAAC,EAAIC,kBAAkB,CAAG,CAAC,CAAE,CACnDwB,aAAa,CAAG3C,OAAO,CAAC,mFAAmF,CAAC,CACzG0C,OAAO,CAAC,eAAe,CAAExB,iBAAiB,CAAC,CAC3CwB,OAAO,CAAC,gBAAgB,CAAEvB,kBAAkB,CAAC,CAClD,CAEA,mBACEd,KAAA,CAACV,KAAK,EAACiD,MAAM,CAAE,IAAK,CAACC,MAAM,CAAE7B,YAAa,CAAA8B,QAAA,eACxC3C,IAAA,CAACP,WAAW,EAACiD,MAAM,CAAE7B,YAAa,CAAA8B,QAAA,CAAE9C,OAAO,CAAC,eAAe,CAAC,CAAc,CAAC,cAC3EK,KAAA,CAACR,SAAS,EAAAiD,QAAA,eACR3C,IAAA,MAAG4C,uBAAuB,CAAE,CAACC,MAAM,CAAEP,OAAO,CAAE,CAAI,CAAC,CAClDE,aAAa,eAAIxC,IAAA,MAAG8C,SAAS,CAAC,OAAO,CAAAH,QAAA,CAAEH,aAAa,CAAI,CAAC,EACjD,CAAC,cACZtC,KAAA,CAACP,WAAW,EAAAgD,QAAA,eACV3C,IAAA,CAACJ,MAAM,EAACmD,KAAK,CAAC,WAAW,CAACC,OAAO,CAAEnC,YAAa,CAAA8B,QAAA,CAAE9C,OAAO,CAAC,QAAQ,CAAC,CAAS,CAAC,cAC7EG,IAAA,CAACJ,MAAM,EAACmD,KAAK,CAAC,SAAS,CAACC,OAAO,CAAE,IAAI,CAACpC,YAAa,CAAA+B,QAAA,CAAE9C,OAAO,CAAC,QAAQ,CAAC,CAAS,CAAC,EACrE,CAAC,EACT,CAAC,CAEZ,CAAC,WAAAM,kBAAA,GApD8Bb,SAAS,EAyD1C,cAAe,CAAAa,kBAAkB"},"metadata":{},"sourceType":"module","externalDependencies":[]}