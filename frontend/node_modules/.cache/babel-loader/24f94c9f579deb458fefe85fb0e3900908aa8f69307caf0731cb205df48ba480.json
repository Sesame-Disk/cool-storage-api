{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Fragment}from'react';import moment from'moment';import{Dropdown,DropdownMenu,DropdownToggle,DropdownItem}from'reactstrap';import{Link,navigate}from'@gatsbyjs/reach-router';import{Utils}from'../../utils/utils';import{gettext,siteRoot,isPro,username,folderPermEnabled,isSystemStaff,enableResetEncryptedRepoPassword,isEmailConfigured,enableRepoAutoDel,enableSeaTableIntegration}from'../../utils/constants';import ModalPortal from'../../components/modal-portal';import ShareDialog from'../../components/dialog/share-dialog';import LibSubFolderPermissionDialog from'../../components/dialog/lib-sub-folder-permission-dialog';import DeleteRepoDialog from'../../components/dialog/delete-repo-dialog';import ChangeRepoPasswordDialog from'../../components/dialog/change-repo-password-dialog';import ResetEncryptedRepoPasswordDialog from'../../components/dialog/reset-encrypted-repo-password-dialog';import LibOldFilesAutoDelDialog from'../../components/dialog/lib-old-files-auto-del-dialog';import RepoSeaTableIntegrationDialog from'../../components/dialog/repo-seatable-integration-dialog';import Rename from'../rename';import{seafileAPI}from'../../utils/seafile-api';import LibHistorySettingDialog from'../dialog/lib-history-setting-dialog';import toaster from'../toast';import RepoAPITokenDialog from'../dialog/repo-api-token-dialog';import RepoShareAdminDialog from'../dialog/repo-share-admin-dialog';import RepoMonitoredIcon from'../../components/repo-monitored-icon';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SharedRepoListItem=/*#__PURE__*/function(_React$Component){_inherits(SharedRepoListItem,_React$Component);var _super=_createSuper(SharedRepoListItem);function SharedRepoListItem(props){var _this;_classCallCheck(this,SharedRepoListItem);_this=_super.call(this,props);_this.onMouseEnter=function(){if(!_this.props.isItemFreezed){_this.setState({highlight:true,isOperationShow:true});}};_this.onMouseOver=function(){if(!_this.props.isItemFreezed){_this.setState({highlight:true,isOperationShow:true});}};_this.onMouseLeave=function(){if(!_this.props.isItemFreezed){_this.setState({highlight:false,isOperationShow:false});}};_this.clickOperationMenuToggle=function(e){_this.toggleOperationMenu(e);};_this.onDropdownToggleKeyDown=function(e){if(e.key=='Enter'||e.key=='Space'){_this.clickOperationMenuToggle(e);}};_this.toggleOperationMenu=function(e){var dataset=e.target?e.target.dataset:null;if(dataset&&dataset.toggle&&dataset.toggle==='Rename'){_this.setState({isItemMenuShow:!_this.state.isItemMenuShow});return;}_this.setState({isItemMenuShow:!_this.state.isItemMenuShow},function(){if(_this.state.isItemMenuShow){_this.props.onFreezedItem();}else{_this.props.onUnfreezedItem();_this.setState({highlight:false,isOperationShow:false});}});};_this.toggleAdvancedMenuShown=function(e){_this.setState({isAdvancedMenuShown:true});};_this.toggleAdvancedMenu=function(e){e.stopPropagation();_this.setState({isAdvancedMenuShown:!_this.state.isAdvancedMenuShown},function(){_this.toggleOperationMenu(e);});};_this.onDropDownMouseMove=function(e){if(_this.state.isAdvancedMenuShown&&e.target&&e.target.className==='dropdown-item'){_this.setState({isAdvancedMenuShown:false});}};_this.getRepoComputeParams=function(){var repo=_this.props.repo;var iconUrl=Utils.getLibIconUrl(repo);var iconTitle=Utils.getLibIconTitle(repo);var libPath=\"\".concat(siteRoot,\"library/\").concat(repo.repo_id,\"/\").concat(Utils.encodePath(repo.repo_name),\"/\");return{iconUrl:iconUrl,iconTitle:iconTitle,libPath:libPath};};_this.onMenuItemKeyDown=function(e){if(e.key=='Enter'||e.key=='Space'){_this.onMenuItemClick(e);}};_this.onMenuItemClick=function(e){var operation=e.target.dataset.toggle;switch(operation){case'Rename':_this.onItemRenameToggle();break;case'Folder Permission':_this.onItemFolderPermissionToggle();break;case'Details':_this.onItemDetails();break;case'Share':_this.onItemShare();break;case'Unshare':_this.onItemUnshare();break;case'History Setting':_this.onHistorySettingToggle();break;case'API Token':_this.onAPITokenToggle();break;case'Share Admin':_this.toggleRepoShareAdminDialog();break;case'Change Password':_this.onChangePasswordToggle();break;case'Reset Password':_this.onResetPasswordToggle();break;case'Watch File Changes':_this.watchFileChanges();break;case'Unwatch File Changes':_this.unwatchFileChanges();break;case'Old Files Auto Delete':_this.toggleOldFilesAutoDelDialog();break;case'SeaTable integration':_this.onSeaTableIntegrationToggle();break;// no default\n}};_this.watchFileChanges=function(){var repo=_this.props.repo;seafileAPI.monitorRepo(repo.repo_id).then(function(){_this.props.onMonitorRepo(repo,true);}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this.unwatchFileChanges=function(){var repo=_this.props.repo;seafileAPI.unMonitorRepo(repo.repo_id).then(function(){_this.props.onMonitorRepo(repo,false);}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this.onItemRenameToggle=function(){_this.props.onFreezedItem();_this.setState({isRenaming:!_this.state.isRenaming,isOperationShow:!_this.state.isOperationShow});};_this.onRenameConfirm=function(name){_this.props.onItemRename(_this.props.repo,name);_this.onRenameCancel();};_this.onRenameCancel=function(){_this.props.onUnfreezedItem();_this.setState({isRenaming:!_this.state.isRenaming});};_this.onItemFolderPermissionToggle=function(){_this.setState({isFolderPermissionDialogOpen:!_this.state.isFolderPermissionDialogOpen});};_this.onHistorySettingToggle=function(){_this.setState({isHistorySettingDialogShow:!_this.state.isHistorySettingDialogShow});};_this.onItemDetails=function(){_this.props.onItemDetails(_this.props.repo);};_this.onItemShare=function(e){e.preventDefault();_this.setState({isShowSharedDialog:true});};_this.onItemUnshare=function(e){e.preventDefault();_this.props.onItemUnshare(_this.props.repo);};_this.onItemDeleteToggle=function(e){e.preventDefault();_this.setState({isDeleteDialogShow:!_this.state.isDeleteDialogShow});};_this.onItemDelete=function(){var _this$props=_this.props,currentGroup=_this$props.currentGroup,repo=_this$props.repo;if(!currentGroup){// repo can not be deleted in share all module\nreturn;}var groupID=currentGroup.id;seafileAPI.deleteGroupOwnedLibrary(groupID,repo.repo_id).then(function(){_this.setState({isRepoDeleted:true,isDeleteDialogShow:false});_this.props.onItemDelete(repo);var name=repo.repo_name;var msg=gettext('Successfully deleted {name}.').replace('{name}',name);toaster.success(msg);}).catch(function(error){var errMessage=Utils.getErrorMsg(error);if(errMessage===gettext('Error')){var name=repo.repo_name;errMessage=gettext('Failed to delete {name}.').replace('{name}',name);}toaster.danger(errMessage);_this.setState({isRepoDeleted:false});});};_this.toggleShareDialog=function(){_this.setState({isShowSharedDialog:false});};_this.toggleRepoShareAdminDialog=function(){_this.setState({isRepoShareAdminDialogOpen:!_this.state.isRepoShareAdminDialogOpen});};_this.toggleOldFilesAutoDelDialog=function(){_this.setState({isOldFilesAutoDelDialogOpen:!_this.state.isOldFilesAutoDelDialogOpen});};_this.onSeaTableIntegrationToggle=function(){_this.setState({isSeaTableIntegrationShow:!_this.state.isSeaTableIntegrationShow});};_this.onAPITokenToggle=function(){_this.setState({isAPITokenDialogShow:!_this.state.isAPITokenDialogShow});};_this.onChangePasswordToggle=function(){_this.setState({isChangePasswordDialogShow:!_this.state.isChangePasswordDialogShow});};_this.onResetPasswordToggle=function(){_this.setState({isResetPasswordDialogShow:!_this.state.isResetPasswordDialogShow});};_this.translateMenuItem=function(menuItem){var translateResult='';switch(menuItem){case'Rename':translateResult=gettext('Rename');break;case'Folder Permission':translateResult=gettext('Folder Permission');break;case'Details':translateResult=gettext('Details');break;case'Unshare':translateResult=gettext('Unshare');break;case'Share':translateResult=gettext('Share');break;case'History Setting':translateResult=gettext('History Setting');break;case'Share Admin':translateResult=gettext('Share Admin');break;case'Change Password':translateResult=gettext('Change Password');break;case'Reset Password':translateResult=gettext('Reset Password');break;case'Watch File Changes':translateResult=gettext('Watch File Changes');break;case'Unwatch File Changes':translateResult=gettext('Unwatch File Changes');break;case'Old Files Auto Delete':translateResult=gettext('Auto Deletion Setting');break;case'API Token':translateResult='API Token';// translation is not needed here\nbreak;case'Advanced':translateResult=gettext('Advanced');break;case'SeaTable integration':translateResult=gettext('SeaTable integration');break;default:break;}return translateResult;};_this.getAdvancedOperations=function(){var operations=[];operations.push('API Token');if(enableRepoAutoDel){operations.push('Old Files Auto Delete');}if(enableSeaTableIntegration){operations.push('SeaTable integration');}return operations;};_this.generatorOperations=function(){var _this$props2=_this.props,repo=_this$props2.repo,currentGroup=_this$props2.currentGroup;//todo this have a bug; use current api is not return admins param;\nvar isStaff=currentGroup&&currentGroup.admins&&currentGroup.admins.indexOf(username)>-1;//for group repolist;\nvar isRepoOwner=repo.owner_email===username;var isAdmin=repo.is_admin;var operations=[];if(isPro){if(repo.owner_email.indexOf('@seafile_group')!=-1){// is group admin\nif(isStaff){if(repo.owner_email==currentGroup.id+'@seafile_group'){_this.isDeparementOnwerGroupMember=true;operations=['Rename'];if(folderPermEnabled){operations.push('Folder Permission');}operations.push('Share Admin','Divider');if(repo.encrypted){operations.push('Change Password');}if(repo.encrypted&&enableResetEncryptedRepoPassword&&isEmailConfigured){operations.push('Reset Password');}if(repo.permission=='r'||repo.permission=='rw'){var monitorOp=repo.monitored?'Unwatch File Changes':'Watch File Changes';operations.push(monitorOp);}operations.push('Divider','History Setting','Details');if(Utils.isDesktop()){operations.push('Advanced');}return operations;}else{operations.push('Unshare');}}}else{if(isRepoOwner||isAdmin){operations.push('Share');}if(isStaff||isRepoOwner||isAdmin){operations.push('Unshare');}}if(repo.permission=='r'||repo.permission=='rw'){var _monitorOp=repo.monitored?'Unwatch File Changes':'Watch File Changes';operations.push(_monitorOp);}}else{if(isRepoOwner){operations.push('Share');}if(isStaff||isRepoOwner){operations.push('Unshare');}}return operations;};_this.generatorMobileMenu=function(){var operations=[];if(_this.props.libraryType&&_this.props.libraryType==='public'){var isRepoOwner=_this.props.repo.owner_email===username;if(isSystemStaff||isRepoOwner){operations.push('Unshare');}}else{operations=_this.generatorOperations();if(_this.isDeparementOnwerGroupMember){operations.unshift('Unshare');operations.unshift('Share');}}if(!operations.length){return null;}return/*#__PURE__*/_jsxs(Dropdown,{isOpen:_this.state.isItemMenuShow,toggle:_this.toggleOperationMenu,children:[/*#__PURE__*/_jsx(DropdownToggle,{tag:\"i\",className:\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\",title:gettext('More operations'),\"aria-label\":gettext('More operations'),\"data-toggle\":\"dropdown\",\"aria-expanded\":_this.state.isItemMenuShow,onClick:_this.clickOperationMenuToggle}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(_this.state.isItemMenuShow?'':'d-none'),onClick:_this.toggleOperationMenu,children:[/*#__PURE__*/_jsx(\"div\",{className:\"mobile-operation-menu-bg-layer\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mobile-operation-menu\",children:operations.map(function(item,index){return/*#__PURE__*/_jsx(DropdownItem,{\"data-toggle\":item,onClick:_this.onMenuItemClick,children:_this.translateMenuItem(item)},index);})})]})]});};_this.generatorPCMenu=function(){var operations=[];if(_this.props.libraryType&&_this.props.libraryType==='public'){var isRepoOwner=_this.props.repo.owner_email===username;if(isSystemStaff||isRepoOwner){operations.push('Unshare');}}else{operations=_this.generatorOperations();}var shareOperation=/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"op-icon sf2-icon-share\",title:gettext('Share'),role:\"button\",\"aria-label\":gettext('Share'),onClick:_this.onItemShare});var unshareOperation=/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"op-icon sf2-icon-x3\",title:gettext('Unshare'),role:\"button\",\"aria-label\":gettext('Unshare'),onClick:_this.onItemUnshare});var deleteOperation=/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"op-icon sf2-icon-delete\",title:gettext('Delete'),role:\"button\",\"aria-label\":gettext('Delete'),onClick:_this.onItemDeleteToggle});if(_this.isDeparementOnwerGroupMember){var advancedOperations=_this.getAdvancedOperations();return/*#__PURE__*/_jsxs(Fragment,{children:[shareOperation,deleteOperation,/*#__PURE__*/_jsxs(Dropdown,{isOpen:_this.state.isItemMenuShow,toggle:_this.toggleOperationMenu,children:[/*#__PURE__*/_jsx(DropdownToggle,{className:\"sf-dropdown-toggle sf2-icon-caret-down border-0 p-0\",title:gettext('More operations'),\"aria-label\":gettext('More operations'),\"data-toggle\":\"dropdown\",\"aria-expanded\":_this.state.isItemMenuShow,\"aria-haspopup\":true,style:{'minWidth':'0'},onClick:_this.clickOperationMenuToggle,onKeyDown:_this.onDropdownToggleKeyDown}),/*#__PURE__*/_jsx(DropdownMenu,{onMouseMove:_this.onDropDownMouseMove,children:operations.map(function(item,index){if(item=='Divider'){return/*#__PURE__*/_jsx(DropdownItem,{divider:true},index);}else if(item=='Advanced'){return/*#__PURE__*/_jsxs(Dropdown,{direction:\"right\",className:\"w-100\",isOpen:_this.state.isAdvancedMenuShown,toggle:_this.toggleAdvancedMenu,onMouseMove:function onMouseMove(e){e.stopPropagation();},children:[/*#__PURE__*/_jsx(DropdownToggle,{caret:true,className:\"dropdown-item font-weight-normal rounded-0 d-flex justify-content-between align-items-center pr-2\",onMouseEnter:_this.toggleAdvancedMenuShown,children:_this.translateMenuItem(item)}),/*#__PURE__*/_jsx(DropdownMenu,{children:advancedOperations.map(function(item,index){return/*#__PURE__*/_jsx(DropdownItem,{\"data-toggle\":item,onClick:_this.onMenuItemClick,onKeyDown:_this.onMenuItemKeyDown,children:_this.translateMenuItem(item)},index);})})]},index);}else{return/*#__PURE__*/_jsx(DropdownItem,{\"data-toggle\":item,onClick:_this.onMenuItemClick,onKeyDown:_this.onMenuItemKeyDown,children:_this.translateMenuItem(item)},index);}})})]})]});}else{return/*#__PURE__*/_jsx(Fragment,{children:operations.map(function(item){switch(item){case'Share':return/*#__PURE__*/_jsx(Fragment,{children:shareOperation},item);case'Unshare':return/*#__PURE__*/_jsx(Fragment,{children:unshareOperation},item);case'Watch File Changes':case'Unwatch File Changes':return/*#__PURE__*/_jsxs(Dropdown,{isOpen:_this.state.isItemMenuShow,toggle:_this.toggleOperationMenu,children:[/*#__PURE__*/_jsx(DropdownToggle,{className:\"sf-dropdown-toggle sf2-icon-caret-down border-0 p-0\",title:gettext('More operations'),\"aria-label\":gettext('More operations'),\"data-toggle\":\"dropdown\",\"aria-expanded\":_this.state.isItemMenuShow,\"aria-haspopup\":true,style:{'minWidth':'0'},onClick:_this.clickOperationMenuToggle,onKeyDown:_this.onDropdownToggleKeyDown}),/*#__PURE__*/_jsx(DropdownMenu,{children:[item].map(function(item,index){return/*#__PURE__*/_jsx(DropdownItem,{\"data-toggle\":item,onClick:_this.onMenuItemClick,onKeyDown:_this.onMenuItemKeyDown,children:_this.translateMenuItem(item)},index);})})]},item);// no default\ndefault:return null;}})});}};_this.onToggleStarRepo=function(e){e.preventDefault();var repoName=_this.props.repo.repo_name;if(_this.state.isStarred){seafileAPI.unstarItem(_this.props.repo.repo_id,'/').then(function(){_this.setState({isStarred:!_this.state.isStarred});var msg=gettext('Successfully unstarred {library_name_placeholder}.').replace('{library_name_placeholder}',repoName);toaster.success(msg);}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});}else{seafileAPI.starItem(_this.props.repo.repo_id,'/').then(function(){_this.setState({isStarred:!_this.state.isStarred});var msg=gettext('Successfully starred {library_name_placeholder}.').replace('{library_name_placeholder}',repoName);toaster.success(msg);}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});}};_this.renderPCUI=function(){var _this$getRepoComputeP=_this.getRepoComputeParams(),iconUrl=_this$getRepoComputeP.iconUrl,iconTitle=_this$getRepoComputeP.iconTitle,libPath=_this$getRepoComputeP.libPath;var repo=_this.props.repo;return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"tr\",{className:_this.state.highlight?'tr-highlight':'',onMouseEnter:_this.onMouseEnter,onMouseOver:_this.onMouseOver,onMouseLeave:_this.onMouseLeave,onFocus:_this.onMouseEnter,children:[/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",role:\"button\",\"aria-label\":_this.state.isStarred?gettext('Unstar'):gettext('Star'),onClick:_this.onToggleStarRepo,children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-star \".concat(_this.state.isStarred?'fas':'far star-empty')})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:iconUrl,title:iconTitle,alt:iconTitle,width:\"24\"})}),/*#__PURE__*/_jsx(\"td\",{children:_this.state.isRenaming?/*#__PURE__*/_jsx(Rename,{name:repo.repo_name,onRenameConfirm:_this.onRenameConfirm,onRenameCancel:_this.onRenameCancel}):/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:libPath,children:repo.repo_name}),repo.monitored&&/*#__PURE__*/_jsx(RepoMonitoredIcon,{repoID:repo.repo_id})]})}),/*#__PURE__*/_jsx(\"td\",{children:_this.state.isOperationShow&&_this.generatorPCMenu()}),/*#__PURE__*/_jsx(\"td\",{children:repo.size}),/*#__PURE__*/_jsx(\"td\",{title:moment(repo.last_modified).format('llll'),children:moment(repo.last_modified).fromNow()}),/*#__PURE__*/_jsx(\"td\",{title:repo.owner_contact_email,children:repo.owner_name})]})});};_this.visitRepo=function(){if(!_this.state.isRenaming){navigate(_this.repoURL);}};_this.renderMobileUI=function(){var _this$getRepoComputeP2=_this.getRepoComputeParams(),iconUrl=_this$getRepoComputeP2.iconUrl,iconTitle=_this$getRepoComputeP2.iconTitle,libPath=_this$getRepoComputeP2.libPath;var repo=_this.props.repo;_this.repoURL=libPath;return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"tr\",{className:_this.state.highlight?'tr-highlight':'',onMouseEnter:_this.onMouseEnter,onMouseOver:_this.onMouseOver,onMouseLeave:_this.onMouseLeave,children:[/*#__PURE__*/_jsx(\"td\",{onClick:_this.visitRepo,children:/*#__PURE__*/_jsx(\"img\",{src:iconUrl,title:iconTitle,width:\"24\",alt:iconTitle})}),/*#__PURE__*/_jsxs(\"td\",{onClick:_this.visitRepo,children:[_this.state.isRenaming?/*#__PURE__*/_jsx(Rename,{name:repo.repo_name,onRenameConfirm:_this.onRenameConfirm,onRenameCancel:_this.onRenameCancel}):/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:libPath,children:repo.repo_name}),repo.monitored&&/*#__PURE__*/_jsx(RepoMonitoredIcon,{repoID:repo.repo_id})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"item-meta-info\",title:repo.owner_contact_email,children:repo.owner_name}),/*#__PURE__*/_jsx(\"span\",{className:\"item-meta-info\",children:repo.size}),/*#__PURE__*/_jsx(\"span\",{className:\"item-meta-info\",title:moment(repo.last_modified).format('llll'),children:moment(repo.last_modified).fromNow()})]}),/*#__PURE__*/_jsx(\"td\",{children:_this.generatorMobileMenu()})]})});};_this.state={highlight:false,isOperationShow:false,isItemMenuShow:false,isAdvancedMenuShown:false,isShowSharedDialog:false,isRenaming:false,isStarred:_this.props.repo.starred,isFolderPermissionDialogOpen:false,isHistorySettingDialogShow:false,isDeleteDialogShow:false,isAPITokenDialogShow:false,isRepoShareAdminDialogOpen:false,isRepoDeleted:false,isChangePasswordDialogShow:false,isResetPasswordDialogShow:false,isOldFilesAutoDelDialogOpen:false,isSeaTableIntegrationShow:false};_this.isDeparementOnwerGroupMember=false;return _this;}_createClass(SharedRepoListItem,[{key:\"render\",value:function render(){var repo=this.props.repo;var isGroupOwnedRepo=repo.owner_email.indexOf('@seafile_group')>-1;return/*#__PURE__*/_jsxs(Fragment,{children:[Utils.isDesktop()?this.renderPCUI():this.renderMobileUI(),this.state.isShowSharedDialog&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(ShareDialog,{itemType:'library',itemName:repo.repo_name,itemPath:'/',repoID:repo.repo_id,repoEncrypted:repo.encrypted,enableDirPrivateShare:true,userPerm:repo.permission,isAdmin:repo.is_admin,isGroupOwnedRepo:isGroupOwnedRepo,toggleDialog:this.toggleShareDialog})}),this.state.isFolderPermissionDialogOpen&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(LibSubFolderPermissionDialog,{toggleDialog:this.onItemFolderPermissionToggle,repoID:repo.repo_id,repoName:repo.repo_name,isDepartmentRepo:true})}),this.state.isDeleteDialogShow&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(DeleteRepoDialog,{repo:this.props.repo,isRepoDeleted:this.state.isRepoDeleted,onDeleteRepo:this.onItemDelete,toggle:this.onItemDeleteToggle})}),this.state.isHistorySettingDialogShow&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(LibHistorySettingDialog,{repoID:repo.repo_id,itemName:repo.repo_name,toggleDialog:this.onHistorySettingToggle})}),this.state.isAPITokenDialogShow&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(RepoAPITokenDialog,{repo:repo,onRepoAPITokenToggle:this.onAPITokenToggle})}),this.state.isRepoShareAdminDialogOpen&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(RepoShareAdminDialog,{repo:repo,toggleDialog:this.toggleRepoShareAdminDialog})}),this.state.isChangePasswordDialogShow&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(ChangeRepoPasswordDialog,{repoID:repo.repo_id,repoName:repo.repo_name,toggleDialog:this.onChangePasswordToggle})}),this.state.isResetPasswordDialogShow&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(ResetEncryptedRepoPasswordDialog,{repoID:repo.repo_id,toggleDialog:this.onResetPasswordToggle})}),this.state.isOldFilesAutoDelDialogOpen&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(LibOldFilesAutoDelDialog,{repoID:repo.repo_id,toggleDialog:this.toggleOldFilesAutoDelDialog})}),this.state.isSeaTableIntegrationShow&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(RepoSeaTableIntegrationDialog,{repo:repo,onSeaTableIntegrationToggle:this.onSeaTableIntegrationToggle})})]});}}]);return SharedRepoListItem;}(React.Component);export default SharedRepoListItem;","map":{"version":3,"names":["React","Fragment","moment","Dropdown","DropdownMenu","DropdownToggle","DropdownItem","Link","navigate","Utils","gettext","siteRoot","isPro","username","folderPermEnabled","isSystemStaff","enableResetEncryptedRepoPassword","isEmailConfigured","enableRepoAutoDel","enableSeaTableIntegration","ModalPortal","ShareDialog","LibSubFolderPermissionDialog","DeleteRepoDialog","ChangeRepoPasswordDialog","ResetEncryptedRepoPasswordDialog","LibOldFilesAutoDelDialog","RepoSeaTableIntegrationDialog","Rename","seafileAPI","LibHistorySettingDialog","toaster","RepoAPITokenDialog","RepoShareAdminDialog","RepoMonitoredIcon","jsx","_jsx","jsxs","_jsxs","SharedRepoListItem","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","onMouseEnter","isItemFreezed","setState","highlight","isOperationShow","onMouseOver","onMouseLeave","clickOperationMenuToggle","e","toggleOperationMenu","onDropdownToggleKeyDown","key","dataset","target","toggle","isItemMenuShow","state","onFreezedItem","onUnfreezedItem","toggleAdvancedMenuShown","isAdvancedMenuShown","toggleAdvancedMenu","stopPropagation","onDropDownMouseMove","className","getRepoComputeParams","repo","iconUrl","getLibIconUrl","iconTitle","getLibIconTitle","libPath","concat","repo_id","encodePath","repo_name","onMenuItemKeyDown","onMenuItemClick","operation","onItemRenameToggle","onItemFolderPermissionToggle","onItemDetails","onItemShare","onItemUnshare","onHistorySettingToggle","onAPITokenToggle","toggleRepoShareAdminDialog","onChangePasswordToggle","onResetPasswordToggle","watchFileChanges","unwatchFileChanges","toggleOldFilesAutoDelDialog","onSeaTableIntegrationToggle","monitorRepo","then","onMonitorRepo","catch","error","errMessage","getErrorMsg","danger","unMonitorRepo","isRenaming","onRenameConfirm","name","onItemRename","onRenameCancel","isFolderPermissionDialogOpen","isHistorySettingDialogShow","preventDefault","isShowSharedDialog","onItemDeleteToggle","isDeleteDialogShow","onItemDelete","_this$props","currentGroup","groupID","id","deleteGroupOwnedLibrary","isRepoDeleted","msg","replace","success","toggleShareDialog","isRepoShareAdminDialogOpen","isOldFilesAutoDelDialogOpen","isSeaTableIntegrationShow","isAPITokenDialogShow","isChangePasswordDialogShow","isResetPasswordDialogShow","translateMenuItem","menuItem","translateResult","getAdvancedOperations","operations","push","generatorOperations","_this$props2","isStaff","admins","indexOf","isRepoOwner","owner_email","isAdmin","is_admin","isDeparementOnwerGroupMember","encrypted","permission","monitorOp","monitored","isDesktop","generatorMobileMenu","libraryType","unshift","length","isOpen","children","tag","title","onClick","map","item","index","generatorPCMenu","shareOperation","href","role","unshareOperation","deleteOperation","advancedOperations","style","onKeyDown","onMouseMove","divider","direction","caret","onToggleStarRepo","repoName","isStarred","unstarItem","starItem","renderPCUI","_this$getRepoComputeP","onFocus","src","alt","width","to","repoID","size","last_modified","format","fromNow","owner_contact_email","owner_name","visitRepo","repoURL","renderMobileUI","_this$getRepoComputeP2","starred","_createClass","value","render","isGroupOwnedRepo","itemType","itemName","itemPath","repoEncrypted","enableDirPrivateShare","userPerm","toggleDialog","isDepartmentRepo","onDeleteRepo","onRepoAPITokenToggle","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/shared-repo-list-view/shared-repo-list-item.js"],"sourcesContent":["import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, isPro, username, folderPermEnabled, isSystemStaff, enableResetEncryptedRepoPassword, isEmailConfigured, enableRepoAutoDel, enableSeaTableIntegration } from '../../utils/constants';\nimport ModalPortal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport LibSubFolderPermissionDialog from '../../components/dialog/lib-sub-folder-permission-dialog';\nimport DeleteRepoDialog from '../../components/dialog/delete-repo-dialog';\nimport ChangeRepoPasswordDialog from '../../components/dialog/change-repo-password-dialog';\nimport ResetEncryptedRepoPasswordDialog from '../../components/dialog/reset-encrypted-repo-password-dialog';\nimport LibOldFilesAutoDelDialog from '../../components/dialog/lib-old-files-auto-del-dialog';\nimport RepoSeaTableIntegrationDialog from '../../components/dialog/repo-seatable-integration-dialog';\nimport Rename from '../rename';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport LibHistorySettingDialog from '../dialog/lib-history-setting-dialog';\nimport toaster from '../toast';\nimport RepoAPITokenDialog from '../dialog/repo-api-token-dialog';\nimport RepoShareAdminDialog from '../dialog/repo-share-admin-dialog';\nimport RepoMonitoredIcon from '../../components/repo-monitored-icon';\n\nconst propTypes = {\n  currentGroup: PropTypes.object,\n  libraryType: PropTypes.string,\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onItemUnshare: PropTypes.func.isRequired,\n  onItemDetails: PropTypes.func,\n  onItemRename: PropTypes.func,\n  onItemDelete: PropTypes.func,\n  onMonitorRepo: PropTypes.func\n};\n\nclass SharedRepoListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOperationShow: false,\n      isItemMenuShow: false,\n      isAdvancedMenuShown: false,\n      isShowSharedDialog: false,\n      isRenaming: false,\n      isStarred: this.props.repo.starred,\n      isFolderPermissionDialogOpen: false,\n      isHistorySettingDialogShow: false,\n      isDeleteDialogShow: false,\n      isAPITokenDialogShow: false,\n      isRepoShareAdminDialogOpen: false,\n      isRepoDeleted: false,\n      isChangePasswordDialogShow: false,\n      isResetPasswordDialogShow: false,\n      isOldFilesAutoDelDialogOpen: false,\n      isSeaTableIntegrationShow: false,\n    };\n    this.isDeparementOnwerGroupMember = false;\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n  };\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      });\n    }\n  };\n\n  clickOperationMenuToggle = (e) => {\n    this.toggleOperationMenu(e);\n  };\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.clickOperationMenuToggle(e);\n    }\n  };\n\n  toggleOperationMenu = (e) => {\n    let dataset = e.target ? e.target.dataset : null;\n    if (dataset && dataset.toggle && dataset.toggle === 'Rename') {\n      this.setState({isItemMenuShow: !this.state.isItemMenuShow});\n      return;\n    }\n\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.props.onUnfreezedItem();\n          this.setState({\n            highlight: false,\n            isOperationShow: false,\n          });\n        }\n      }\n    );\n  };\n\n  toggleAdvancedMenuShown = (e) => {\n    this.setState({ isAdvancedMenuShown: true });\n  };\n\n  toggleAdvancedMenu = (e) => {\n    e.stopPropagation();\n    this.setState({ isAdvancedMenuShown: !this.state.isAdvancedMenuShown }, () => {\n      this.toggleOperationMenu(e);\n    });\n  };\n\n  onDropDownMouseMove = (e) => {\n    if (this.state.isAdvancedMenuShown && e.target && e.target.className === 'dropdown-item') {\n      this.setState({\n        isAdvancedMenuShown: false\n      });\n    }\n  };\n\n  getRepoComputeParams = () => {\n    let repo = this.props.repo;\n\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let libPath = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n\n    return { iconUrl, iconTitle, libPath };\n  };\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onMenuItemClick(e);\n    }\n  };\n\n  onMenuItemClick = (e) => {\n    let operation = e.target.dataset.toggle;\n    switch(operation) {\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Folder Permission':\n        this.onItemFolderPermissionToggle();\n        break;\n      case 'Details':\n        this.onItemDetails();\n        break;\n      case 'Share':\n        this.onItemShare();\n        break;\n      case 'Unshare':\n        this.onItemUnshare();\n        break;\n      case 'History Setting':\n        this.onHistorySettingToggle();\n        break;\n      case 'API Token':\n        this.onAPITokenToggle();\n        break;\n      case 'Share Admin':\n        this.toggleRepoShareAdminDialog();\n        break;\n      case 'Change Password':\n        this.onChangePasswordToggle();\n        break;\n      case 'Reset Password':\n        this.onResetPasswordToggle();\n        break;\n      case 'Watch File Changes':\n        this.watchFileChanges();\n        break;\n      case 'Unwatch File Changes':\n        this.unwatchFileChanges();\n        break;\n      case 'Old Files Auto Delete':\n        this.toggleOldFilesAutoDelDialog();\n        break;\n      case 'SeaTable integration':\n        this.onSeaTableIntegrationToggle();\n        break;\n      // no default\n    }\n  };\n\n  watchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.monitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  unwatchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.unMonitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onItemRenameToggle = () => {\n    this.props.onFreezedItem();\n    this.setState({\n      isRenaming: !this.state.isRenaming,\n      isOperationShow: !this.state.isOperationShow\n    });\n  };\n\n  onRenameConfirm = (name) => {\n    this.props.onItemRename(this.props.repo, name);\n    this.onRenameCancel();\n  };\n\n  onRenameCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  };\n\n  onItemFolderPermissionToggle = () => {\n    this.setState({isFolderPermissionDialogOpen: !this.state.isFolderPermissionDialogOpen});\n  };\n\n  onHistorySettingToggle = () => {\n    this.setState({isHistorySettingDialogShow: !this.state.isHistorySettingDialogShow});\n  };\n\n  onItemDetails = () => {\n    this.props.onItemDetails(this.props.repo);\n  };\n\n  onItemShare = (e) => {\n    e.preventDefault();\n    this.setState({isShowSharedDialog: true});\n  };\n\n  onItemUnshare = (e) => {\n    e.preventDefault();\n    this.props.onItemUnshare(this.props.repo);\n  };\n\n  onItemDeleteToggle = (e) => {\n    e.preventDefault();\n    this.setState({isDeleteDialogShow: !this.state.isDeleteDialogShow});\n  };\n\n  onItemDelete = () => {\n    const { currentGroup, repo } = this.props;\n    if (!currentGroup) {  // repo can not be deleted in share all module\n      return;\n    }\n\n    const groupID = currentGroup.id;\n\n    seafileAPI.deleteGroupOwnedLibrary(groupID, repo.repo_id).then(() => {\n\n      this.setState({\n        isRepoDeleted: true,\n        isDeleteDialogShow: false,\n      });\n\n      this.props.onItemDelete(repo);\n      let name = repo.repo_name;\n      var msg = gettext('Successfully deleted {name}.').replace('{name}', name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = repo.repo_name;\n        errMessage = gettext('Failed to delete {name}.').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n\n      this.setState({isRepoDeleted: false});\n    });\n  };\n\n  toggleShareDialog = () => {\n    this.setState({isShowSharedDialog: false});\n  };\n\n  toggleRepoShareAdminDialog = () => {\n    this.setState({isRepoShareAdminDialogOpen: !this.state.isRepoShareAdminDialogOpen});\n  };\n\n  toggleOldFilesAutoDelDialog = () => {\n    this.setState({isOldFilesAutoDelDialogOpen: !this.state.isOldFilesAutoDelDialogOpen});\n  };\n\n  onSeaTableIntegrationToggle = () => {\n    this.setState({isSeaTableIntegrationShow: !this.state.isSeaTableIntegrationShow});\n  };\n\n  onAPITokenToggle = () => {\n    this.setState({isAPITokenDialogShow: !this.state.isAPITokenDialogShow});\n  };\n\n  onChangePasswordToggle = () => {\n    this.setState({isChangePasswordDialogShow: !this.state.isChangePasswordDialogShow});\n  };\n\n  onResetPasswordToggle = () => {\n    this.setState({isResetPasswordDialogShow: !this.state.isResetPasswordDialogShow});\n  };\n\n  translateMenuItem = (menuItem) => {\n    let translateResult = '';\n    switch(menuItem) {\n      case 'Rename':\n        translateResult = gettext('Rename');\n        break;\n      case 'Folder Permission':\n        translateResult = gettext('Folder Permission');\n        break;\n      case 'Details':\n        translateResult = gettext('Details');\n        break;\n      case 'Unshare':\n        translateResult = gettext('Unshare');\n        break;\n      case 'Share':\n        translateResult = gettext('Share');\n        break;\n      case 'History Setting':\n        translateResult = gettext('History Setting');\n        break;\n      case 'Share Admin':\n        translateResult = gettext('Share Admin');\n        break;\n      case 'Change Password':\n        translateResult = gettext('Change Password');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n      case 'Watch File Changes':\n        translateResult = gettext('Watch File Changes');\n        break;\n      case 'Unwatch File Changes':\n        translateResult = gettext('Unwatch File Changes');\n        break;\n      case 'Old Files Auto Delete':\n        translateResult = gettext('Auto Deletion Setting');\n        break;\n      case 'API Token':\n        translateResult = 'API Token'; // translation is not needed here\n        break;\n      case 'Advanced':\n        translateResult = gettext('Advanced');\n        break;\n      case 'SeaTable integration':\n        translateResult = gettext('SeaTable integration');\n        break;\n      default:\n        break;\n    }\n    return translateResult;\n  };\n\n  getAdvancedOperations = () => {\n    const operations = [];\n    operations.push('API Token');\n    if (enableRepoAutoDel) {\n      operations.push('Old Files Auto Delete');\n    }\n    if (enableSeaTableIntegration) {\n      operations.push('SeaTable integration');\n    }\n    return operations;\n  };\n\n  generatorOperations = () => {\n    let { repo, currentGroup } = this.props;\n    //todo this have a bug; use current api is not return admins param;\n    let isStaff = currentGroup && currentGroup.admins && currentGroup.admins.indexOf(username) > -1; //for group repolist;\n    let isRepoOwner = repo.owner_email === username;\n    let isAdmin = repo.is_admin;\n    let operations = [];\n    if (isPro) {\n      if (repo.owner_email.indexOf('@seafile_group') != -1) {\n        // is group admin\n        if (isStaff) {\n          if (repo.owner_email == currentGroup.id + '@seafile_group') {\n            this.isDeparementOnwerGroupMember = true;\n            operations = ['Rename'];\n            if (folderPermEnabled) {\n              operations.push('Folder Permission');\n            }\n            operations.push('Share Admin', 'Divider');\n            if (repo.encrypted) {\n              operations.push('Change Password');\n            }\n            if (repo.encrypted && enableResetEncryptedRepoPassword && isEmailConfigured) {\n              operations.push('Reset Password');\n            }\n            if (repo.permission == 'r' || repo.permission == 'rw') {\n              const monitorOp = repo.monitored ? 'Unwatch File Changes' : 'Watch File Changes';\n              operations.push(monitorOp);\n            }\n            operations.push('Divider', 'History Setting', 'Details');\n            if (Utils.isDesktop()) {\n              operations.push('Advanced');\n            }\n            return operations;\n          } else {\n            operations.push('Unshare');\n          }\n        }\n      } else {\n        if (isRepoOwner || isAdmin) {\n          operations.push('Share');\n        }\n        if (isStaff || isRepoOwner || isAdmin) {\n          operations.push('Unshare');\n        }\n      }\n      if (repo.permission == 'r' || repo.permission == 'rw') {\n        const monitorOp = repo.monitored ? 'Unwatch File Changes' : 'Watch File Changes';\n        operations.push(monitorOp);\n      }\n    } else {\n      if (isRepoOwner) {\n        operations.push('Share');\n      }\n      if (isStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    }\n    return operations;\n  };\n\n  generatorMobileMenu = () => {\n    let operations = [];\n    if (this.props.libraryType && this.props.libraryType === 'public') {\n      let isRepoOwner = this.props.repo.owner_email === username;\n      if (isSystemStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    } else {\n      operations = this.generatorOperations();\n      if (this.isDeparementOnwerGroupMember) {\n        operations.unshift('Unshare');\n        operations.unshift('Share');\n      }\n    }\n\n    if (!operations.length) {\n      return null;\n    }\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n          title={gettext('More operations')}\n          aria-label={gettext('More operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n          onClick={this.clickOperationMenuToggle}\n        />\n        <div className={`${this.state.isItemMenuShow?'':'d-none'}`} onClick={this.toggleOperationMenu}>\n          <div className=\"mobile-operation-menu-bg-layer\"></div>\n          <div className=\"mobile-operation-menu\">\n            {operations.map((item, index) => {\n              return (\n                <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick}>{this.translateMenuItem(item)}</DropdownItem>\n              );\n            })}\n          </div>\n        </div>\n      </Dropdown>\n    );\n  };\n\n  generatorPCMenu = () => {\n    let operations = [];\n    if (this.props.libraryType && this.props.libraryType === 'public') {\n      let isRepoOwner = this.props.repo.owner_email === username;\n      if (isSystemStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    } else {\n      operations = this.generatorOperations();\n    }\n    const shareOperation   = <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.onItemShare}></a>;\n    const unshareOperation = <a href=\"#\" className=\"op-icon sf2-icon-x3\" title={gettext('Unshare')} role=\"button\" aria-label={gettext('Unshare')} onClick={this.onItemUnshare}></a>;\n    const deleteOperation  = <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} role=\"button\" aria-label={gettext('Delete')} onClick={this.onItemDeleteToggle}></a>;\n\n    if (this.isDeparementOnwerGroupMember) {\n      const advancedOperations = this.getAdvancedOperations();\n      return (\n        <Fragment>\n          {shareOperation}\n          {deleteOperation}\n          <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n            <DropdownToggle\n              className=\"sf-dropdown-toggle sf2-icon-caret-down border-0 p-0\"\n              title={gettext('More operations')}\n              aria-label={gettext('More operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isItemMenuShow}\n              aria-haspopup={true}\n              style={{'minWidth': '0'}}\n              onClick={this.clickOperationMenuToggle}\n              onKeyDown={this.onDropdownToggleKeyDown}\n            />\n            <DropdownMenu onMouseMove={this.onDropDownMouseMove}>\n              {operations.map((item, index)=> {\n                if (item == 'Divider') {\n                  return <DropdownItem key={index} divider />;\n                } else if (item == 'Advanced') {\n                  return (\n                    <Dropdown\n                      key={index}\n                      direction=\"right\"\n                      className=\"w-100\"\n                      isOpen={this.state.isAdvancedMenuShown}\n                      toggle={this.toggleAdvancedMenu}\n                      onMouseMove={(e) => {e.stopPropagation();}}\n                    >\n                      <DropdownToggle\n                        caret\n                        className=\"dropdown-item font-weight-normal rounded-0 d-flex justify-content-between align-items-center pr-2\"\n                        onMouseEnter={this.toggleAdvancedMenuShown}\n                      >\n                        {this.translateMenuItem(item)}\n                      </DropdownToggle>\n                      <DropdownMenu>\n                        {advancedOperations.map((item, index)=> {\n                          return (<DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateMenuItem(item)}</DropdownItem>);\n                        })}\n                      </DropdownMenu>\n                    </Dropdown>\n                  );\n                } else {\n                  return (<DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateMenuItem(item)}</DropdownItem>);\n                }\n              })}\n            </DropdownMenu>\n          </Dropdown>\n        </Fragment>\n      );\n    } else {\n      return (\n        <Fragment>\n          {operations.map(item => {\n            switch (item) {\n              case 'Share':\n                return <Fragment key={item}>{shareOperation}</Fragment>;\n              case 'Unshare':\n                return <Fragment key={item}>{unshareOperation}</Fragment>;\n              case 'Watch File Changes':\n              case 'Unwatch File Changes':\n                return (\n                  <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu} key={item}>\n                    <DropdownToggle\n                      className=\"sf-dropdown-toggle sf2-icon-caret-down border-0 p-0\"\n                      title={gettext('More operations')}\n                      aria-label={gettext('More operations')}\n                      data-toggle=\"dropdown\"\n                      aria-expanded={this.state.isItemMenuShow}\n                      aria-haspopup={true}\n                      style={{'minWidth': '0'}}\n                      onClick={this.clickOperationMenuToggle}\n                      onKeyDown={this.onDropdownToggleKeyDown}\n                    />\n                    <DropdownMenu>\n                      {[item].map((item, index) => {\n                        return <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateMenuItem(item)}</DropdownItem>;\n                      })}\n                    </DropdownMenu>\n                  </Dropdown>\n                );\n              // no default\n              default:\n                return null;\n            }\n          })}\n        </Fragment>\n      );\n    }\n  };\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const { repo_name: repoName } = this.props.repo;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  renderPCUI = () => {\n    let { iconUrl, iconTitle, libPath } = this.getRepoComputeParams();\n    let { repo } = this.props;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseOver={this.onMouseOver} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n          <td className=\"text-center\">\n            <a href=\"#\" role=\"button\" aria-label={this.state.isStarred ? gettext('Unstar') : gettext('Star')} onClick={this.onToggleStarRepo}>\n              <i className={`fa-star ${this.state.isStarred ? 'fas' : 'far star-empty'}`}></i>\n            </a>\n          </td>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            {this.state.isRenaming ?\n              <Rename name={repo.repo_name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel}/> :\n              <Fragment>\n                <Link to={libPath}>{repo.repo_name}</Link>\n                {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n              </Fragment>\n            }\n          </td>\n          <td>{this.state.isOperationShow && this.generatorPCMenu()}</td>\n          <td>{repo.size}</td>\n          <td title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</td>\n          <td title={repo.owner_contact_email}>{repo.owner_name}</td>\n        </tr>\n      </Fragment>\n    );\n  };\n\n  visitRepo = () => {\n    if (!this.state.isRenaming) {\n      navigate(this.repoURL);\n    }\n  };\n\n  renderMobileUI = () => {\n    let { iconUrl, iconTitle, libPath } = this.getRepoComputeParams();\n    let { repo } = this.props;\n    this.repoURL = libPath;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''}  onMouseEnter={this.onMouseEnter} onMouseOver={this.onMouseOver} onMouseLeave={this.onMouseLeave}>\n          <td onClick={this.visitRepo}><img src={iconUrl} title={iconTitle} width=\"24\" alt={iconTitle}/></td>\n          <td onClick={this.visitRepo}>\n            {this.state.isRenaming ?\n              <Rename name={repo.repo_name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel} /> :\n              <Fragment>\n                <Link to={libPath}>{repo.repo_name}</Link>\n                {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n              </Fragment>\n            }\n            <br />\n            <span className=\"item-meta-info\" title={repo.owner_contact_email}>{repo.owner_name}</span>\n            <span className=\"item-meta-info\">{repo.size}</span>\n            <span className=\"item-meta-info\" title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</span>\n          </td>\n          <td>{this.generatorMobileMenu()}</td>\n        </tr>\n      </Fragment>\n    );\n  };\n\n  render() {\n    let { repo } = this.props;\n    let isGroupOwnedRepo = repo.owner_email.indexOf('@seafile_group') > -1;\n    return (\n      <Fragment>\n        {Utils.isDesktop() ? this.renderPCUI() : this.renderMobileUI()}\n        {this.state.isShowSharedDialog && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={repo.repo_name}\n              itemPath={'/'}\n              repoID={repo.repo_id}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              isAdmin={repo.is_admin}\n              isGroupOwnedRepo={isGroupOwnedRepo}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isFolderPermissionDialogOpen && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onItemFolderPermissionToggle}\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              isDepartmentRepo={true}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isDeleteDialogShow &&\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={this.props.repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onItemDelete}\n              toggle={this.onItemDeleteToggle}\n            />\n          </ModalPortal>\n        }\n        {this.state.isHistorySettingDialogShow && (\n          <ModalPortal>\n            <LibHistorySettingDialog\n              repoID={repo.repo_id}\n              itemName={repo.repo_name}\n              toggleDialog={this.onHistorySettingToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isAPITokenDialogShow && (\n          <ModalPortal>\n            <RepoAPITokenDialog\n              repo={repo}\n              onRepoAPITokenToggle={this.onAPITokenToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isRepoShareAdminDialogOpen && (\n          <ModalPortal>\n            <RepoShareAdminDialog\n              repo={repo}\n              toggleDialog={this.toggleRepoShareAdminDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isChangePasswordDialogShow && (\n          <ModalPortal>\n            <ChangeRepoPasswordDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onChangePasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isResetPasswordDialogShow && (\n          <ModalPortal>\n            <ResetEncryptedRepoPasswordDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.onResetPasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isOldFilesAutoDelDialogOpen && (\n          <ModalPortal>\n            <LibOldFilesAutoDelDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.toggleOldFilesAutoDelDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isSeaTableIntegrationShow && (\n          <ModalPortal>\n            <RepoSeaTableIntegrationDialog\n              repo={repo}\n              onSeaTableIntegrationToggle={this.onSeaTableIntegrationToggle}\n            />\n          </ModalPortal>\n        )}\n\n\n      </Fragment>\n    );\n  }\n}\n\nSharedRepoListItem.propTypes = propTypes;\n\nexport default SharedRepoListItem;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}