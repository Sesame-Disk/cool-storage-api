{"ast":null,"code":"import _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useCallback, useRef, useState } from 'react';\nimport { UncontrolledPopover } from 'reactstrap';\nimport DropdownMenuItem from '../../../../../../basic-sdk/extension/commons/dropdown-menu-item';\nimport { eventStopPropagation } from '../../../../../../basic-sdk/utils/mouse-event';\nimport './index.css';\nvar RevisionOperation = function RevisionOperation(_ref) {\n  var isActive = _ref.isActive,\n    isOperating = _ref.isOperating,\n    revision = _ref.revision,\n    updateOperatingRevision = _ref.updateOperatingRevision,\n    onDeleteOtherRevision = _ref.onDeleteOtherRevision;\n  var targetId = \"sdoc-revision-\".concat(revision.id);\n  var popoverRef = useRef(null);\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isPopoverShow = _useState2[0],\n    setPopoverShow = _useState2[1];\n  var toggle = useCallback(function () {\n    popoverRef.current.toggle();\n    var nextPopoverShow = !isPopoverShow;\n    setPopoverShow(nextPopoverShow);\n    updateOperatingRevision(nextPopoverShow ? revision.id : '');\n  }, [isPopoverShow, updateOperatingRevision, revision]);\n  var deleteRevision = useCallback(function (event) {\n    eventStopPropagation(event);\n    onDeleteOtherRevision();\n    popoverRef.current.toggle();\n  }, [onDeleteOtherRevision]);\n  if (!isActive && !isOperating) return null;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"sdocfont sdoc-more sdoc-revision-operation-toggle\",\n    id: targetId\n  }), /*#__PURE__*/React.createElement(UncontrolledPopover, {\n    target: targetId,\n    className: \"sdoc-menu-popover sdoc-dropdown-menu sdoc-revision-menu-popover\",\n    trigger: \"legacy\",\n    placement: \"bottom-start\",\n    hideArrow: true,\n    toggle: toggle,\n    fade: false,\n    modifiers: {\n      preventOverflow: {\n        boundariesElement: document.body\n      }\n    },\n    ref: popoverRef\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-dropdown-menu-container\"\n  }, /*#__PURE__*/React.createElement(DropdownMenuItem, {\n    onClick: deleteRevision,\n    menuConfig: {\n      iconClass: 'sdocfont sdoc-delete',\n      text: 'Delete'\n    }\n  }))));\n};\nexport default RevisionOperation;","map":{"version":3,"names":["React","useCallback","useRef","useState","UncontrolledPopover","DropdownMenuItem","eventStopPropagation","RevisionOperation","_ref","isActive","isOperating","revision","updateOperatingRevision","onDeleteOtherRevision","targetId","concat","id","popoverRef","_useState","_useState2","_slicedToArray","isPopoverShow","setPopoverShow","toggle","current","nextPopoverShow","deleteRevision","event","createElement","Fragment","className","target","trigger","placement","hideArrow","fade","modifiers","preventOverflow","boundariesElement","document","body","ref","onClick","menuConfig","iconClass","text"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/components/doc-operations/revision-operations/revisions/revisions-dialog/revision-operation/index.js"],"sourcesContent":["import React, { useCallback, useRef, useState } from 'react';\nimport { UncontrolledPopover } from 'reactstrap';\nimport DropdownMenuItem from '../../../../../../basic-sdk/extension/commons/dropdown-menu-item';\nimport { eventStopPropagation } from '../../../../../../basic-sdk/utils/mouse-event';\nimport './index.css';\nconst RevisionOperation = _ref => {\n  let {\n    isActive,\n    isOperating,\n    revision,\n    updateOperatingRevision,\n    onDeleteOtherRevision\n  } = _ref;\n  const targetId = \"sdoc-revision-\".concat(revision.id);\n  const popoverRef = useRef(null);\n  const [isPopoverShow, setPopoverShow] = useState(false);\n  const toggle = useCallback(() => {\n    popoverRef.current.toggle();\n    const nextPopoverShow = !isPopoverShow;\n    setPopoverShow(nextPopoverShow);\n    updateOperatingRevision(nextPopoverShow ? revision.id : '');\n  }, [isPopoverShow, updateOperatingRevision, revision]);\n  const deleteRevision = useCallback(event => {\n    eventStopPropagation(event);\n    onDeleteOtherRevision();\n    popoverRef.current.toggle();\n  }, [onDeleteOtherRevision]);\n  if (!isActive && !isOperating) return null;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"sdocfont sdoc-more sdoc-revision-operation-toggle\",\n    id: targetId\n  }), /*#__PURE__*/React.createElement(UncontrolledPopover, {\n    target: targetId,\n    className: \"sdoc-menu-popover sdoc-dropdown-menu sdoc-revision-menu-popover\",\n    trigger: \"legacy\",\n    placement: \"bottom-start\",\n    hideArrow: true,\n    toggle: toggle,\n    fade: false,\n    modifiers: {\n      preventOverflow: {\n        boundariesElement: document.body\n      }\n    },\n    ref: popoverRef\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-dropdown-menu-container\"\n  }, /*#__PURE__*/React.createElement(DropdownMenuItem, {\n    onClick: deleteRevision,\n    menuConfig: {\n      iconClass: 'sdocfont sdoc-delete',\n      text: 'Delete'\n    }\n  }))));\n};\nexport default RevisionOperation;"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,WAAW,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC5D,SAASC,mBAAmB,QAAQ,YAAY;AAChD,OAAOC,gBAAgB,MAAM,kEAAkE;AAC/F,SAASC,oBAAoB,QAAQ,+CAA+C;AACpF,OAAO,aAAa;AACpB,IAAMC,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAGC,IAAI,EAAI;EAChC,IACEC,QAAQ,GAKND,IAAI,CALNC,QAAQ;IACRC,WAAW,GAITF,IAAI,CAJNE,WAAW;IACXC,QAAQ,GAGNH,IAAI,CAHNG,QAAQ;IACRC,uBAAuB,GAErBJ,IAAI,CAFNI,uBAAuB;IACvBC,qBAAqB,GACnBL,IAAI,CADNK,qBAAqB;EAEvB,IAAMC,QAAQ,GAAG,gBAAgB,CAACC,MAAM,CAACJ,QAAQ,CAACK,EAAE,CAAC;EACrD,IAAMC,UAAU,GAAGf,MAAM,CAAC,IAAI,CAAC;EAC/B,IAAAgB,SAAA,GAAwCf,QAAQ,CAAC,KAAK,CAAC;IAAAgB,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAhDG,aAAa,GAAAF,UAAA;IAAEG,cAAc,GAAAH,UAAA;EACpC,IAAMI,MAAM,GAAGtB,WAAW,CAAC,YAAM;IAC/BgB,UAAU,CAACO,OAAO,CAACD,MAAM,CAAC,CAAC;IAC3B,IAAME,eAAe,GAAG,CAACJ,aAAa;IACtCC,cAAc,CAACG,eAAe,CAAC;IAC/Bb,uBAAuB,CAACa,eAAe,GAAGd,QAAQ,CAACK,EAAE,GAAG,EAAE,CAAC;EAC7D,CAAC,EAAE,CAACK,aAAa,EAAET,uBAAuB,EAAED,QAAQ,CAAC,CAAC;EACtD,IAAMe,cAAc,GAAGzB,WAAW,CAAC,UAAA0B,KAAK,EAAI;IAC1CrB,oBAAoB,CAACqB,KAAK,CAAC;IAC3Bd,qBAAqB,CAAC,CAAC;IACvBI,UAAU,CAACO,OAAO,CAACD,MAAM,CAAC,CAAC;EAC7B,CAAC,EAAE,CAACV,qBAAqB,CAAC,CAAC;EAC3B,IAAI,CAACJ,QAAQ,IAAI,CAACC,WAAW,EAAE,OAAO,IAAI;EAC1C,OAAO,aAAaV,KAAK,CAAC4B,aAAa,CAAC5B,KAAK,CAAC6B,QAAQ,EAAE,IAAI,EAAE,aAAa7B,KAAK,CAAC4B,aAAa,CAAC,GAAG,EAAE;IAClGE,SAAS,EAAE,mDAAmD;IAC9Dd,EAAE,EAAEF;EACN,CAAC,CAAC,EAAE,aAAad,KAAK,CAAC4B,aAAa,CAACxB,mBAAmB,EAAE;IACxD2B,MAAM,EAAEjB,QAAQ;IAChBgB,SAAS,EAAE,iEAAiE;IAC5EE,OAAO,EAAE,QAAQ;IACjBC,SAAS,EAAE,cAAc;IACzBC,SAAS,EAAE,IAAI;IACfX,MAAM,EAAEA,MAAM;IACdY,IAAI,EAAE,KAAK;IACXC,SAAS,EAAE;MACTC,eAAe,EAAE;QACfC,iBAAiB,EAAEC,QAAQ,CAACC;MAC9B;IACF,CAAC;IACDC,GAAG,EAAExB;EACP,CAAC,EAAE,aAAajB,KAAK,CAAC4B,aAAa,CAAC,KAAK,EAAE;IACzCE,SAAS,EAAE;EACb,CAAC,EAAE,aAAa9B,KAAK,CAAC4B,aAAa,CAACvB,gBAAgB,EAAE;IACpDqC,OAAO,EAAEhB,cAAc;IACvBiB,UAAU,EAAE;MACVC,SAAS,EAAE,sBAAsB;MACjCC,IAAI,EAAE;IACR;EACF,CAAC,CAAC,CAAC,CAAC,CAAC;AACP,CAAC;AACD,eAAetC,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}