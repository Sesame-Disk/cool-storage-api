{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setHeaderType = exports.isMenuDisabled = exports.getHeaderType = void 0;\nvar _slate = require(\"slate\");\nvar _queries = require(\"../../core/queries\");\nvar _constants = require(\"../../constants\");\nvar _core = require(\"../../core\");\nvar isMenuDisabled = function isMenuDisabled(editor) {\n  var readonly = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  if (readonly) return true;\n  if (!editor.selection) return true;\n  var _slate$Editor$nodes = _slate.Editor.nodes(editor, {\n      match: function match(node, path) {\n        var type = (0, _queries.getNodeType)(node);\n        if (!type && (0, _queries.isTextNode)(node) && node.id) {\n          var parentNode = (0, _queries.getParentNode)(node, node.id);\n          type = (0, _queries.getNodeType)(parentNode);\n        }\n        if (type === _constants.ELementTypes.PARAGRAPH) return true;\n        if (type && type.startsWith(_constants.ELementTypes.HEADER)) return true;\n        return false;\n      },\n      universal: true,\n      mode: 'highest'\n    }),\n    _slate$Editor$nodes2 = _slicedToArray(_slate$Editor$nodes, 1),\n    match = _slate$Editor$nodes2[0];\n  return !match;\n};\nexports.isMenuDisabled = isMenuDisabled;\nvar getHeaderType = function getHeaderType(editor) {\n  var _slate$Editor$nodes3 = _slate.Editor.nodes(editor, {\n      match: function match(node) {\n        if (_slate.Element.isElement(node) && _slate.Editor.isBlock(editor, node)) {\n          var type = (0, _queries.getNodeType)(node);\n          if (type && type.startsWith(_constants.ELementTypes.HEADER)) return true;\n        }\n        return false;\n      },\n      universal: true\n    }),\n    _slate$Editor$nodes4 = _slicedToArray(_slate$Editor$nodes3, 1),\n    match = _slate$Editor$nodes4[0];\n  if (!match) return;\n  var _match = _slicedToArray(match, 1),\n    matchedNode = _match[0];\n  return (0, _queries.getNodeType)(matchedNode);\n};\nexports.getHeaderType = getHeaderType;\nvar setHeaderType = function setHeaderType(editor, type) {\n  if (!type) return;\n  _slate.Transforms.setNodes(editor, {\n    type: type\n  });\n  (0, _core.focusEditor)(editor);\n};\nexports.setHeaderType = setHeaderType;","map":{"version":3,"names":["_slicedToArray","require","default","Object","defineProperty","exports","value","setHeaderType","isMenuDisabled","getHeaderType","_slate","_queries","_constants","_core","editor","readonly","arguments","length","undefined","selection","_slate$Editor$nodes","Editor","nodes","match","node","path","type","getNodeType","isTextNode","id","parentNode","getParentNode","ELementTypes","PARAGRAPH","startsWith","HEADER","universal","mode","_slate$Editor$nodes2","_slate$Editor$nodes3","Element","isElement","isBlock","_slate$Editor$nodes4","_match","matchedNode","Transforms","setNodes","focusEditor"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/extension/plugins/header/helper.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setHeaderType = exports.isMenuDisabled = exports.getHeaderType = void 0;\nvar _slate = require(\"slate\");\nvar _queries = require(\"../../core/queries\");\nvar _constants = require(\"../../constants\");\nvar _core = require(\"../../core\");\nconst isMenuDisabled = function (editor) {\n  let readonly = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  if (readonly) return true;\n  if (!editor.selection) return true;\n  const [match] = _slate.Editor.nodes(editor, {\n    match(node, path) {\n      let type = (0, _queries.getNodeType)(node);\n      if (!type && (0, _queries.isTextNode)(node) && node.id) {\n        const parentNode = (0, _queries.getParentNode)(node, node.id);\n        type = (0, _queries.getNodeType)(parentNode);\n      }\n      if (type === _constants.ELementTypes.PARAGRAPH) return true;\n      if (type && type.startsWith(_constants.ELementTypes.HEADER)) return true;\n      return false;\n    },\n    universal: true,\n    mode: 'highest'\n  });\n  return !match;\n};\nexports.isMenuDisabled = isMenuDisabled;\nconst getHeaderType = editor => {\n  const [match] = _slate.Editor.nodes(editor, {\n    match: node => {\n      if (_slate.Element.isElement(node) && _slate.Editor.isBlock(editor, node)) {\n        const type = (0, _queries.getNodeType)(node);\n        if (type && type.startsWith(_constants.ELementTypes.HEADER)) return true;\n      }\n      return false;\n    },\n    universal: true\n  });\n  if (!match) return;\n  const [matchedNode] = match;\n  return (0, _queries.getNodeType)(matchedNode);\n};\nexports.getHeaderType = getHeaderType;\nconst setHeaderType = (editor, type) => {\n  if (!type) return;\n  _slate.Transforms.setNodes(editor, {\n    type\n  });\n  (0, _core.focusEditor)(editor);\n};\nexports.setHeaderType = setHeaderType;"],"mappings":"AAAA,YAAY;;AAAC,IAAAA,cAAA,GAAAC,OAAA,0HAAAC,OAAA;AAEbC,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAC3CC,KAAK,EAAE;AACT,CAAC,CAAC;AACFD,OAAO,CAACE,aAAa,GAAGF,OAAO,CAACG,cAAc,GAAGH,OAAO,CAACI,aAAa,GAAG,KAAK,CAAC;AAC/E,IAAIC,MAAM,GAAGT,OAAO,CAAC,OAAO,CAAC;AAC7B,IAAIU,QAAQ,GAAGV,OAAO,CAAC,oBAAoB,CAAC;AAC5C,IAAIW,UAAU,GAAGX,OAAO,CAAC,iBAAiB,CAAC;AAC3C,IAAIY,KAAK,GAAGZ,OAAO,CAAC,YAAY,CAAC;AACjC,IAAMO,cAAc,GAAG,SAAjBA,cAAcA,CAAaM,MAAM,EAAE;EACvC,IAAIC,QAAQ,GAAGC,SAAS,CAACC,MAAM,GAAG,CAAC,IAAID,SAAS,CAAC,CAAC,CAAC,KAAKE,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC,GAAG,KAAK;EACxF,IAAID,QAAQ,EAAE,OAAO,IAAI;EACzB,IAAI,CAACD,MAAM,CAACK,SAAS,EAAE,OAAO,IAAI;EAClC,IAAAC,mBAAA,GAAgBV,MAAM,CAACW,MAAM,CAACC,KAAK,CAACR,MAAM,EAAE;MAC1CS,KAAK,WAAAA,MAACC,IAAI,EAAEC,IAAI,EAAE;QAChB,IAAIC,IAAI,GAAG,CAAC,CAAC,EAAEf,QAAQ,CAACgB,WAAW,EAAEH,IAAI,CAAC;QAC1C,IAAI,CAACE,IAAI,IAAI,CAAC,CAAC,EAAEf,QAAQ,CAACiB,UAAU,EAAEJ,IAAI,CAAC,IAAIA,IAAI,CAACK,EAAE,EAAE;UACtD,IAAMC,UAAU,GAAG,CAAC,CAAC,EAAEnB,QAAQ,CAACoB,aAAa,EAAEP,IAAI,EAAEA,IAAI,CAACK,EAAE,CAAC;UAC7DH,IAAI,GAAG,CAAC,CAAC,EAAEf,QAAQ,CAACgB,WAAW,EAAEG,UAAU,CAAC;QAC9C;QACA,IAAIJ,IAAI,KAAKd,UAAU,CAACoB,YAAY,CAACC,SAAS,EAAE,OAAO,IAAI;QAC3D,IAAIP,IAAI,IAAIA,IAAI,CAACQ,UAAU,CAACtB,UAAU,CAACoB,YAAY,CAACG,MAAM,CAAC,EAAE,OAAO,IAAI;QACxE,OAAO,KAAK;MACd,CAAC;MACDC,SAAS,EAAE,IAAI;MACfC,IAAI,EAAE;IACR,CAAC,CAAC;IAAAC,oBAAA,GAAAtC,cAAA,CAAAoB,mBAAA;IAbKG,KAAK,GAAAe,oBAAA;EAcZ,OAAO,CAACf,KAAK;AACf,CAAC;AACDlB,OAAO,CAACG,cAAc,GAAGA,cAAc;AACvC,IAAMC,aAAa,GAAG,SAAhBA,aAAaA,CAAGK,MAAM,EAAI;EAC9B,IAAAyB,oBAAA,GAAgB7B,MAAM,CAACW,MAAM,CAACC,KAAK,CAACR,MAAM,EAAE;MAC1CS,KAAK,EAAE,SAAAA,MAAAC,IAAI,EAAI;QACb,IAAId,MAAM,CAAC8B,OAAO,CAACC,SAAS,CAACjB,IAAI,CAAC,IAAId,MAAM,CAACW,MAAM,CAACqB,OAAO,CAAC5B,MAAM,EAAEU,IAAI,CAAC,EAAE;UACzE,IAAME,IAAI,GAAG,CAAC,CAAC,EAAEf,QAAQ,CAACgB,WAAW,EAAEH,IAAI,CAAC;UAC5C,IAAIE,IAAI,IAAIA,IAAI,CAACQ,UAAU,CAACtB,UAAU,CAACoB,YAAY,CAACG,MAAM,CAAC,EAAE,OAAO,IAAI;QAC1E;QACA,OAAO,KAAK;MACd,CAAC;MACDC,SAAS,EAAE;IACb,CAAC,CAAC;IAAAO,oBAAA,GAAA3C,cAAA,CAAAuC,oBAAA;IATKhB,KAAK,GAAAoB,oBAAA;EAUZ,IAAI,CAACpB,KAAK,EAAE;EACZ,IAAAqB,MAAA,GAAA5C,cAAA,CAAsBuB,KAAK;IAApBsB,WAAW,GAAAD,MAAA;EAClB,OAAO,CAAC,CAAC,EAAEjC,QAAQ,CAACgB,WAAW,EAAEkB,WAAW,CAAC;AAC/C,CAAC;AACDxC,OAAO,CAACI,aAAa,GAAGA,aAAa;AACrC,IAAMF,aAAa,GAAG,SAAhBA,aAAaA,CAAIO,MAAM,EAAEY,IAAI,EAAK;EACtC,IAAI,CAACA,IAAI,EAAE;EACXhB,MAAM,CAACoC,UAAU,CAACC,QAAQ,CAACjC,MAAM,EAAE;IACjCY,IAAI,EAAJA;EACF,CAAC,CAAC;EACF,CAAC,CAAC,EAAEb,KAAK,CAACmC,WAAW,EAAElC,MAAM,CAAC;AAChC,CAAC;AACDT,OAAO,CAACE,aAAa,GAAGA,aAAa"},"metadata":{},"sourceType":"script","externalDependencies":[]}