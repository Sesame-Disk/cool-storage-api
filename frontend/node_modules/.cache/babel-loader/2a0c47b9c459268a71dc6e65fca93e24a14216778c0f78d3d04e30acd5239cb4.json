{"ast":null,"code":"\"use strict\";\n\nvar _objectSpread = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/objectSpread2.js\").default;\nvar _slicedToArray = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.insertListItem = void 0;\nvar _slate = require(\"slate\");\nvar _core = require(\"../../../core\");\nvar _elementTypes = require(\"../../../constants/element-types\");\nvar insertListItem = function insertListItem(editor) {\n  var licEntry = (0, _core.getAboveNode)(editor, {\n    match: {\n      type: _elementTypes.PARAGRAPH\n    }\n  });\n  if (!licEntry) return false;\n  var _licEntry = _slicedToArray(licEntry, 2),\n    paragraphPath = _licEntry[1];\n  var listItemEntry = _slate.Editor.parent(editor, paragraphPath);\n  if (!listItemEntry) return false;\n  var _listItemEntry = _slicedToArray(listItemEntry, 2),\n    listItemNode = _listItemEntry[0],\n    listItemPath = _listItemEntry[1];\n  if (listItemNode.type !== _elementTypes.LIST_ITEM) return false;\n  var success = false;\n  _slate.Editor.withoutNormalizing(editor, function () {\n    var _editor$selection;\n    if (!_slate.Range.isCollapsed(editor.selection)) {\n      // Delete selected text\n      _slate.Transforms.delete(editor, {\n        at: editor.selection\n      });\n    }\n    var _isStartPoint = (0, _core.isStartPoint)(editor, (_editor$selection = editor.selection) === null || _editor$selection === void 0 ? void 0 : _editor$selection.focus, paragraphPath);\n    var isEndPoint = (0, _core.isBlockTextEmptyAfterSelection)(editor);\n    var nextParagraphPath = _slate.Path.next(paragraphPath);\n    var nextListItemPath = _slate.Path.next(listItemPath);\n    if (_isStartPoint) {\n      // List item has content, cursor at start\n      var licItem = (0, _core.generateElement)(_elementTypes.PARAGRAPH);\n      _slate.Transforms.insertNodes(editor, licItem, {\n        at: listItemPath\n      });\n      var listItem = (0, _core.generateElement)(_elementTypes.LIST_ITEM, {\n        childrenOrText: []\n      });\n      _slate.Transforms.wrapNodes(editor, listItem, {\n        at: listItemPath\n      });\n      success = true;\n      return;\n    }\n    if (!isEndPoint) {\n      // List item has content, cursor at middle\n      _slate.Transforms.splitNodes(editor);\n      var _listItem = (0, _core.generateElement)(_elementTypes.LIST_ITEM, {\n        childrenOrText: []\n      });\n      _slate.Transforms.wrapNodes(editor, _listItem, {\n        at: nextParagraphPath\n      });\n      _slate.Transforms.moveNodes(editor, {\n        at: nextParagraphPath,\n        to: nextListItemPath\n      });\n      _slate.Transforms.select(editor, nextListItemPath);\n      _slate.Transforms.collapse(editor, {\n        edge: 'start'\n      });\n      success = true;\n    } else {\n      var _Editor$marks;\n      // List item has content, cursor at end\n      var marks = (_Editor$marks = _slate.Editor.marks(editor)) === null || _Editor$marks === void 0 ? void 0 : _Editor$marks.key;\n      var _licItem = (0, _core.generateElement)(_elementTypes.PARAGRAPH);\n      _slate.Transforms.insertNodes(editor, _objectSpread(_objectSpread({}, _licItem), marks), {\n        at: nextListItemPath\n      });\n      var _listItem2 = (0, _core.generateElement)(_elementTypes.LIST_ITEM, {\n        childrenOrText: []\n      });\n      _slate.Transforms.wrapNodes(editor, _listItem2, {\n        at: nextListItemPath\n      });\n      _slate.Transforms.select(editor, nextListItemPath);\n      success = true;\n    }\n    if (listItemNode.children.length > 1) {\n      _slate.Transforms.moveNodes(editor, {\n        at: nextParagraphPath,\n        to: nextListItemPath.concat(1)\n      });\n      success = true;\n    }\n  });\n  return success;\n};\nexports.insertListItem = insertListItem;","map":{"version":3,"names":["_objectSpread","require","default","_slicedToArray","Object","defineProperty","exports","value","insertListItem","_slate","_core","_elementTypes","editor","licEntry","getAboveNode","match","type","PARAGRAPH","_licEntry","paragraphPath","listItemEntry","Editor","parent","_listItemEntry","listItemNode","listItemPath","LIST_ITEM","success","withoutNormalizing","_editor$selection","Range","isCollapsed","selection","Transforms","delete","at","_isStartPoint","isStartPoint","focus","isEndPoint","isBlockTextEmptyAfterSelection","nextParagraphPath","Path","next","nextListItemPath","licItem","generateElement","insertNodes","listItem","childrenOrText","wrapNodes","splitNodes","moveNodes","to","select","collapse","edge","_Editor$marks","marks","key","children","length","concat"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/extension/plugins/list/transforms/insert-list-item.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.insertListItem = void 0;\nvar _slate = require(\"slate\");\nvar _core = require(\"../../../core\");\nvar _elementTypes = require(\"../../../constants/element-types\");\nconst insertListItem = editor => {\n  const licEntry = (0, _core.getAboveNode)(editor, {\n    match: {\n      type: _elementTypes.PARAGRAPH\n    }\n  });\n  if (!licEntry) return false;\n  const [, paragraphPath] = licEntry;\n  const listItemEntry = _slate.Editor.parent(editor, paragraphPath);\n  if (!listItemEntry) return false;\n  const [listItemNode, listItemPath] = listItemEntry;\n  if (listItemNode.type !== _elementTypes.LIST_ITEM) return false;\n  let success = false;\n  _slate.Editor.withoutNormalizing(editor, () => {\n    var _editor$selection;\n    if (!_slate.Range.isCollapsed(editor.selection)) {\n      // Delete selected text\n      _slate.Transforms.delete(editor, {\n        at: editor.selection\n      });\n    }\n    const _isStartPoint = (0, _core.isStartPoint)(editor, (_editor$selection = editor.selection) === null || _editor$selection === void 0 ? void 0 : _editor$selection.focus, paragraphPath);\n    const isEndPoint = (0, _core.isBlockTextEmptyAfterSelection)(editor);\n    const nextParagraphPath = _slate.Path.next(paragraphPath);\n    const nextListItemPath = _slate.Path.next(listItemPath);\n    if (_isStartPoint) {\n      // List item has content, cursor at start\n      const licItem = (0, _core.generateElement)(_elementTypes.PARAGRAPH);\n      _slate.Transforms.insertNodes(editor, licItem, {\n        at: listItemPath\n      });\n      const listItem = (0, _core.generateElement)(_elementTypes.LIST_ITEM, {\n        childrenOrText: []\n      });\n      _slate.Transforms.wrapNodes(editor, listItem, {\n        at: listItemPath\n      });\n      success = true;\n      return;\n    }\n    if (!isEndPoint) {\n      // List item has content, cursor at middle\n      _slate.Transforms.splitNodes(editor);\n      const listItem = (0, _core.generateElement)(_elementTypes.LIST_ITEM, {\n        childrenOrText: []\n      });\n      _slate.Transforms.wrapNodes(editor, listItem, {\n        at: nextParagraphPath\n      });\n      _slate.Transforms.moveNodes(editor, {\n        at: nextParagraphPath,\n        to: nextListItemPath\n      });\n      _slate.Transforms.select(editor, nextListItemPath);\n      _slate.Transforms.collapse(editor, {\n        edge: 'start'\n      });\n      success = true;\n    } else {\n      var _Editor$marks;\n      // List item has content, cursor at end\n      const marks = (_Editor$marks = _slate.Editor.marks(editor)) === null || _Editor$marks === void 0 ? void 0 : _Editor$marks.key;\n      const licItem = (0, _core.generateElement)(_elementTypes.PARAGRAPH);\n      _slate.Transforms.insertNodes(editor, {\n        ...licItem,\n        ...marks\n      }, {\n        at: nextListItemPath\n      });\n      const listItem = (0, _core.generateElement)(_elementTypes.LIST_ITEM, {\n        childrenOrText: []\n      });\n      _slate.Transforms.wrapNodes(editor, listItem, {\n        at: nextListItemPath\n      });\n      _slate.Transforms.select(editor, nextListItemPath);\n      success = true;\n    }\n    if (listItemNode.children.length > 1) {\n      _slate.Transforms.moveNodes(editor, {\n        at: nextParagraphPath,\n        to: nextListItemPath.concat(1)\n      });\n      success = true;\n    }\n  });\n  return success;\n};\nexports.insertListItem = insertListItem;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}