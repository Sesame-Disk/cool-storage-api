{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import moment from'moment';import{Utils}from'../../utils/utils';import{siteRoot,gettext}from'../../utils/constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ResultsItem=/*#__PURE__*/function(_React$Component){_inherits(ResultsItem,_React$Component);var _super=_createSuper(ResultsItem);function ResultsItem(props){var _this;_classCallCheck(this,ResultsItem);_this=_super.call(this,props);_this.handlerFileURL=function(item){return item.is_dir?siteRoot+'library/'+item.repo_id+'/'+item.repo_name+item.fullpath:siteRoot+'lib/'+item.repo_id+'/file'+Utils.encodePath(item.fullpath);};_this.handlerParentDirPath=function(item){var index=item.is_dir?item.fullpath.length-item.name.length-1:item.fullpath.length-item.name.length;return item.fullpath.substring(0,index);};_this.handlerParentDirURL=function(item){return siteRoot+'library/'+item.repo_id+'/'+item.repo_name+_this.handlerParentDirPath(item);};return _this;}_createClass(ResultsItem,[{key:\"render\",value:function render(){var item=this.props.item;var linkContent=decodeURI(item.fullpath).substring(1);var folderIconUrl=linkContent?Utils.getFolderIconUrl(false,192):Utils.getDefaultLibIconUrl(true);var fileIconUrl=item.is_dir?folderIconUrl:Utils.getFileIconUrl(item.name,192);if(item.thumbnail_url!==''){fileIconUrl=item.thumbnail_url;}return/*#__PURE__*/_jsxs(\"li\",{className:\"search-result-item\",children:[/*#__PURE__*/_jsx(\"img\",{className:linkContent?'item-img':'lib-item-img',src:fileIconUrl,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"item-name ellipsis\",children:/*#__PURE__*/_jsx(\"a\",{href:this.handlerFileURL(item),target:\"_blank\",title:item.name,rel:\"noreferrer\",children:item.name})}),/*#__PURE__*/_jsx(\"div\",{className:\"item-link ellipsis\",children:/*#__PURE__*/_jsxs(\"a\",{href:this.handlerParentDirURL(item),target:\"_blank\",rel:\"noreferrer\",children:[item.repo_name,this.handlerParentDirPath(item)]})}),/*#__PURE__*/_jsx(\"div\",{className:\"item-link ellipsis\",children:Utils.bytesToSize(item.size)+' '+moment(item.last_modified*1000).format('YYYY-MM-DD')}),/*#__PURE__*/_jsx(\"div\",{className:\"item-text ellipsis\",dangerouslySetInnerHTML:{__html:item.content_highlight}})]})]});}}]);return ResultsItem;}(React.Component);var SearchResults=/*#__PURE__*/function(_React$Component2){_inherits(SearchResults,_React$Component2);var _super2=_createSuper(SearchResults);function SearchResults(props){_classCallCheck(this,SearchResults);return _super2.call(this,props);}_createClass(SearchResults,[{key:\"render\",value:function render(){var _this$props=this.props,resultItems=_this$props.resultItems,total=_this$props.total;return/*#__PURE__*/_jsxs(\"div\",{className:\"search-result-container position-static\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"tip\",children:total>0?total+' '+(total===1?gettext('result'):gettext('results')):gettext('No result')}),/*#__PURE__*/_jsx(\"ul\",{className:\"search-result-list\",children:resultItems.map(function(item,index){return/*#__PURE__*/_jsx(ResultsItem,{item:item},index);})})]});}}]);return SearchResults;}(React.Component);export default SearchResults;","map":{"version":3,"names":["React","moment","Utils","siteRoot","gettext","jsx","_jsx","jsxs","_jsxs","ResultsItem","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","handlerFileURL","item","is_dir","repo_id","repo_name","fullpath","encodePath","handlerParentDirPath","index","length","name","substring","handlerParentDirURL","_createClass","key","value","render","linkContent","decodeURI","folderIconUrl","getFolderIconUrl","getDefaultLibIconUrl","fileIconUrl","getFileIconUrl","thumbnail_url","className","children","src","alt","href","target","title","rel","bytesToSize","size","last_modified","format","dangerouslySetInnerHTML","__html","content_highlight","Component","SearchResults","_React$Component2","_super2","_this$props","resultItems","total","map"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/search/search-results.js"],"sourcesContent":["import React from 'react';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { siteRoot, gettext } from '../../utils/constants';\n\nclass ResultsItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  handlerFileURL= (item) => {\n    return item.is_dir ? siteRoot + 'library/' + item.repo_id + '/' + item.repo_name + item.fullpath :\n      siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(item.fullpath);\n  };\n\n  handlerParentDirPath= (item) => {\n    let index = item.is_dir ? item.fullpath.length - item.name.length - 1 : item.fullpath.length - item.name.length;\n    return item.fullpath.substring(0, index);\n  };\n\n  handlerParentDirURL= (item) => {\n    return siteRoot + 'library/' + item.repo_id + '/' + item.repo_name + this.handlerParentDirPath(item);\n  };\n\n  render() {\n    let item = this.props.item;\n    let linkContent = decodeURI(item.fullpath).substring(1);\n    let folderIconUrl = linkContent ? Utils.getFolderIconUrl(false, 192) : Utils.getDefaultLibIconUrl(true);\n    let fileIconUrl = item.is_dir ? folderIconUrl : Utils.getFileIconUrl(item.name, 192);\n\n    if (item.thumbnail_url !== '') {\n      fileIconUrl = item.thumbnail_url;\n    }\n\n    return (\n      <li className=\"search-result-item\">\n        <img className={linkContent ? 'item-img' : 'lib-item-img'} src={fileIconUrl} alt=\"\"/>\n        <div className=\"item-content\">\n          <div className=\"item-name ellipsis\">\n            <a href={this.handlerFileURL(item)} target=\"_blank\" title={item.name} rel=\"noreferrer\">{item.name}</a>\n          </div>\n          <div className=\"item-link ellipsis\">\n            <a href={this.handlerParentDirURL(item)} target=\"_blank\" rel=\"noreferrer\" >{item.repo_name}{this.handlerParentDirPath(item)}</a>\n          </div>\n          <div className=\"item-link ellipsis\">\n            {Utils.bytesToSize(item.size) + ' ' + moment(item.last_modified * 1000).format('YYYY-MM-DD')}\n          </div>\n          <div className=\"item-text ellipsis\" dangerouslySetInnerHTML={{__html: item.content_highlight}}></div>\n        </div>\n      </li>\n    );\n  }\n}\n\nconst resultsItemPropTypes = {\n  item: PropTypes.object.isRequired,\n};\n\nResultsItem.propTypes = resultsItemPropTypes;\n\nclass SearchResults extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { resultItems, total } = this.props;\n    return (\n      <div className=\"search-result-container position-static\">\n        <p className=\"tip\">{total > 0 ? (total + ' ' + (total === 1 ? gettext('result') : gettext('results'))) : gettext('No result')}</p>\n        <ul className=\"search-result-list\">\n          {resultItems.map((item, index) => {\n            return <ResultsItem key={index} item={item}/>;\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nconst searchResultsPropTypes = {\n  resultItems: PropTypes.array.isRequired,\n  total: PropTypes.number.isRequired\n};\n\nSearchResults.propTypes = searchResultsPropTypes;\n\nexport default SearchResults;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}