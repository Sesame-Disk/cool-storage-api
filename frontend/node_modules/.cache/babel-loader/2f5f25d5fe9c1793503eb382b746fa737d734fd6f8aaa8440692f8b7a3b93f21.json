{"ast":null,"code":"import _toConsumableArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport deepCopy from 'deep-copy';\nexport var formatCommentsData = function formatCommentsData(comments) {\n  var formatComments = [];\n  var dupComments = deepCopy(comments);\n  for (var i = 0; i < dupComments.length; i++) {\n    var item = dupComments[i];\n\n    // the comment is not in sdoc document\n    if (!item.detail) continue;\n    try {\n      item.detail = JSON.parse(item.detail);\n      formatComments.push(item);\n    } catch (err) {\n      continue;\n    }\n  }\n  return formatComments;\n};\nexport var initElementCommentsMap = function initElementCommentsMap(comments) {\n  var elementCommentsMap = {};\n  var formatComments = formatCommentsData(comments);\n  for (var i = 0; i < formatComments.length; i++) {\n    var item = formatComments[i];\n    var element_id = item.detail.element_id;\n    if (!elementCommentsMap[element_id]) {\n      elementCommentsMap[element_id] = [];\n    }\n    elementCommentsMap[element_id].push(item);\n  }\n  return elementCommentsMap;\n};\nexport var initCommentList = function initCommentList(comments) {\n  // format comments\n  var formatComments = formatCommentsData(comments);\n\n  // sort comments by update time\n  return sortCommentList(formatComments);\n};\nexport var sortCommentList = function sortCommentList(commentList) {\n  var newComments = commentList.map(function (item) {\n    var updated_at = item.updated_at,\n      replies = item.replies;\n    var replayUpdatedTimes = replies.map(function (item) {\n      return item.updated_at;\n    });\n    var updatedTimes = [updated_at].concat(_toConsumableArray(replayUpdatedTimes));\n    updatedTimes.sort(function (a, b) {\n      return new Date(a).getTime() <= new Date(b).getTime() ? 1 : -1;\n    });\n    item.updated_time = updatedTimes[0];\n    return item;\n  });\n  var unresolvedComments = [];\n  var resolvedComments = [];\n  // Differentiate between resolved and unresolved comments\n  newComments.forEach(function (item) {\n    if (item.resolved) {\n      resolvedComments.push(item);\n    } else {\n      unresolvedComments.push(item);\n    }\n  });\n  unresolvedComments.sort(function (a, b) {\n    return new Date(a.updated_time).getTime() <= new Date(b.updated_time).getTime() ? 1 : -1;\n  });\n  resolvedComments.sort(function (a, b) {\n    return new Date(a.updated_time).getTime() <= new Date(b.updated_time).getTime() ? 1 : -1;\n  });\n  return [].concat(unresolvedComments, resolvedComments);\n};\nexport var initCommentsInfo = {\n  isFetching: true,\n  comment_list: [],\n  element_comments_map: {},\n  error: false\n};\nexport var commentReducer = function commentReducer(state, action) {\n  switch (action.type) {\n    case 'FETCHING_STATE':\n      {\n        return initCommentsInfo;\n      }\n    case 'RECEIVE_STATE':\n      {\n        var commentList = initCommentList(action.payload);\n        return {\n          isFetching: false,\n          comment_list: commentList,\n          element_comments_map: initElementCommentsMap(action.payload),\n          error: false\n        };\n      }\n    case 'FETCHING_ERROR':\n      {\n        return {\n          isFetching: false,\n          element_comments_map: {},\n          error: true\n        };\n      }\n    case 'INSERT_COMMENT':\n      {\n        var element_comments_map = state.element_comments_map,\n          comment_list = state.comment_list;\n        var _action$payload = action.payload,\n          element_id = _action$payload.element_id,\n          comment = _action$payload.comment;\n        if (!element_comments_map[element_id]) {\n          element_comments_map[element_id] = [];\n        }\n        element_comments_map[element_id] = [].concat(_toConsumableArray(element_comments_map[element_id]), [comment]);\n        var _commentList = [deepCopy(comment)].concat(_toConsumableArray(comment_list));\n        return _objectSpread(_objectSpread({}, state), {}, {\n          element_comments_map: _objectSpread({}, element_comments_map),\n          comment_list: _commentList\n        });\n      }\n    case 'DELETE_COMMENT':\n      {\n        var _element_comments_map = state.element_comments_map,\n          _comment_list = state.comment_list;\n        var _action$payload2 = action.payload,\n          _element_id = _action$payload2.element_id,\n          comment_id = _action$payload2.comment_id;\n        if (_element_comments_map[_element_id]) {\n          _element_comments_map[_element_id] = _element_comments_map[_element_id].filter(function (item) {\n            return item.id !== comment_id;\n          });\n        }\n        var _commentList2 = _comment_list.filter(function (item) {\n          return item.id !== comment_id;\n        });\n        return _objectSpread(_objectSpread({}, state), {}, {\n          element_comments_map: _objectSpread({}, _element_comments_map),\n          comment_list: _commentList2\n        });\n      }\n    case 'UPDATE_COMMENT':\n      {\n        var _element_comments_map2 = state.element_comments_map,\n          _comment_list2 = state.comment_list;\n        var _action$payload3 = action.payload,\n          _element_id2 = _action$payload3.element_id,\n          _comment_id = _action$payload3.comment_id,\n          _comment = _action$payload3.comment;\n        _element_comments_map2[_element_id2] = _element_comments_map2[_element_id2].map(function (item) {\n          if (item.id === _comment_id) {\n            item.comment = _comment.comment;\n            item.detail = _comment.detail;\n            item.updated_at = _comment.updated_at;\n            return item;\n          }\n          return item;\n        });\n        var _commentList3 = _comment_list2.map(function (item) {\n          if (item.id === _comment_id) {\n            item.comment = _comment.comment;\n            item.detail = _comment.detail;\n            item.updated_at = _comment.updated_at;\n            return item;\n          }\n          return item;\n        });\n        return _objectSpread(_objectSpread({}, state), {}, {\n          element_comments_map: _objectSpread({}, _element_comments_map2),\n          comment_list: _commentList3\n        });\n      }\n    case 'UPDATE_COMMENT_STATE':\n      {\n        var _element_comments_map3 = state.element_comments_map,\n          _comment_list3 = state.comment_list;\n        var _action$payload4 = action.payload,\n          _element_id3 = _action$payload4.element_id,\n          _comment_id2 = _action$payload4.comment_id,\n          _comment2 = _action$payload4.comment;\n\n        // modify comment state\n        _element_comments_map3[_element_id3] = _element_comments_map3[_element_id3].map(function (item) {\n          if (item.id === _comment_id2) {\n            item.resolved = _comment2.resolved;\n            return item;\n          }\n          return item;\n        });\n        var _commentList4 = _comment_list3.map(function (item) {\n          if (item.id === _comment_id2) {\n            item.resolved = _comment2.resolved;\n            return item;\n          }\n          return item;\n        });\n        return _objectSpread(_objectSpread({}, state), {}, {\n          element_comments_map: _objectSpread({}, _element_comments_map3),\n          comment_list: sortCommentList(_commentList4)\n        });\n      }\n    case 'INSERT_REPLY':\n      {\n        var _element_comments_map4 = state.element_comments_map,\n          _comment_list4 = state.comment_list;\n        var _action$payload5 = action.payload,\n          _element_id4 = _action$payload5.element_id,\n          _comment_id3 = _action$payload5.comment_id,\n          reply = _action$payload5.reply;\n        _element_comments_map4[_element_id4] = _element_comments_map4[_element_id4].map(function (item) {\n          if (item.id === _comment_id3) {\n            item.replies = [].concat(_toConsumableArray(item.replies), [deepCopy(reply)]);\n            return item;\n          }\n          return item;\n        });\n        var _commentList5 = _comment_list4.map(function (item) {\n          if (item.id === _comment_id3) {\n            item.replies = [].concat(_toConsumableArray(item.replies), [reply]);\n            return item;\n          }\n          return item;\n        });\n        return _objectSpread(_objectSpread({}, state), {}, {\n          element_comments_map: _objectSpread({}, _element_comments_map4),\n          comment_list: _commentList5\n        });\n      }\n    case 'DELETE_REPLY':\n      {\n        var _element_comments_map5 = state.element_comments_map,\n          _comment_list5 = state.comment_list;\n        var _action$payload6 = action.payload,\n          _element_id5 = _action$payload6.element_id,\n          _comment_id4 = _action$payload6.comment_id,\n          reply_id = _action$payload6.reply_id;\n        _element_comments_map5[_element_id5] = _element_comments_map5[_element_id5].map(function (item) {\n          if (item.id === _comment_id4) {\n            item.replies = item.replies.filter(function (reply) {\n              return reply.id !== reply_id;\n            });\n            return item;\n          }\n          return item;\n        });\n        var _commentList6 = _comment_list5.map(function (item) {\n          if (item.id === _comment_id4) {\n            item.replies = item.replies.filter(function (reply) {\n              return reply.id !== reply_id;\n            });\n            return item;\n          }\n          return item;\n        });\n        return _objectSpread(_objectSpread({}, state), {}, {\n          element_comments_map: _objectSpread({}, _element_comments_map5),\n          comment_list: _commentList6\n        });\n      }\n    case 'UPDATE_REPLY':\n      {\n        var _element_comments_map6 = state.element_comments_map,\n          _comment_list6 = state.comment_list;\n        var _action$payload7 = action.payload,\n          _element_id6 = _action$payload7.element_id,\n          _comment_id5 = _action$payload7.comment_id,\n          _reply_id = _action$payload7.reply_id,\n          _reply = _action$payload7.reply;\n        _element_comments_map6[_element_id6] = _element_comments_map6[_element_id6].map(function (item) {\n          if (item.id === _comment_id5) {\n            item.replies = item.replies.map(function (replyItem) {\n              if (replyItem.id === _reply_id) {\n                // need update replay updated_at\n                return _objectSpread(_objectSpread({}, replyItem), _reply);\n              }\n              return replyItem;\n            });\n            return item;\n          }\n          return item;\n        });\n        var _commentList7 = _comment_list6.map(function (item) {\n          if (item.id === _comment_id5) {\n            item.replies = item.replies.map(function (replyItem) {\n              if (replyItem.id === _reply_id) {\n                // need update replay updated_at\n                return _objectSpread(_objectSpread({}, replyItem), _reply);\n              }\n              return replyItem;\n            });\n            return item;\n          }\n          return item;\n        });\n        return _objectSpread(_objectSpread({}, state), {}, {\n          element_comments_map: _objectSpread({}, _element_comments_map6),\n          comment_list: _commentList7\n        });\n      }\n    default:\n      return state;\n  }\n};","map":{"version":3,"names":["_objectSpread","deepCopy","formatCommentsData","comments","formatComments","dupComments","i","length","item","detail","JSON","parse","push","err","initElementCommentsMap","elementCommentsMap","element_id","initCommentList","sortCommentList","commentList","newComments","map","updated_at","replies","replayUpdatedTimes","updatedTimes","concat","_toConsumableArray","sort","a","b","Date","getTime","updated_time","unresolvedComments","resolvedComments","forEach","resolved","initCommentsInfo","isFetching","comment_list","element_comments_map","error","commentReducer","state","action","type","payload","_action$payload","comment","_action$payload2","comment_id","filter","id","_action$payload3","_action$payload4","_action$payload5","reply","_action$payload6","reply_id","_action$payload7","replyItem"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/comment/reducer/comment-reducer.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport deepCopy from 'deep-copy';\nexport const formatCommentsData = comments => {\n  const formatComments = [];\n  const dupComments = deepCopy(comments);\n  for (let i = 0; i < dupComments.length; i++) {\n    const item = dupComments[i];\n\n    // the comment is not in sdoc document\n    if (!item.detail) continue;\n    try {\n      item.detail = JSON.parse(item.detail);\n      formatComments.push(item);\n    } catch (err) {\n      continue;\n    }\n  }\n  return formatComments;\n};\nexport const initElementCommentsMap = comments => {\n  const elementCommentsMap = {};\n  const formatComments = formatCommentsData(comments);\n  for (let i = 0; i < formatComments.length; i++) {\n    const item = formatComments[i];\n    const {\n      element_id\n    } = item.detail;\n    if (!elementCommentsMap[element_id]) {\n      elementCommentsMap[element_id] = [];\n    }\n    elementCommentsMap[element_id].push(item);\n  }\n  return elementCommentsMap;\n};\nexport const initCommentList = comments => {\n  // format comments\n  const formatComments = formatCommentsData(comments);\n\n  // sort comments by update time\n  return sortCommentList(formatComments);\n};\nexport const sortCommentList = commentList => {\n  const newComments = commentList.map(item => {\n    const {\n      updated_at,\n      replies\n    } = item;\n    const replayUpdatedTimes = replies.map(item => item.updated_at);\n    const updatedTimes = [updated_at, ...replayUpdatedTimes];\n    updatedTimes.sort((a, b) => {\n      return new Date(a).getTime() <= new Date(b).getTime() ? 1 : -1;\n    });\n    item.updated_time = updatedTimes[0];\n    return item;\n  });\n  const unresolvedComments = [];\n  const resolvedComments = [];\n  // Differentiate between resolved and unresolved comments\n  newComments.forEach(item => {\n    if (item.resolved) {\n      resolvedComments.push(item);\n    } else {\n      unresolvedComments.push(item);\n    }\n  });\n  unresolvedComments.sort((a, b) => {\n    return new Date(a.updated_time).getTime() <= new Date(b.updated_time).getTime() ? 1 : -1;\n  });\n  resolvedComments.sort((a, b) => {\n    return new Date(a.updated_time).getTime() <= new Date(b.updated_time).getTime() ? 1 : -1;\n  });\n  return [...unresolvedComments, ...resolvedComments];\n};\nexport const initCommentsInfo = {\n  isFetching: true,\n  comment_list: [],\n  element_comments_map: {},\n  error: false\n};\nexport const commentReducer = (state, action) => {\n  switch (action.type) {\n    case 'FETCHING_STATE':\n      {\n        return initCommentsInfo;\n      }\n    case 'RECEIVE_STATE':\n      {\n        const commentList = initCommentList(action.payload);\n        return {\n          isFetching: false,\n          comment_list: commentList,\n          element_comments_map: initElementCommentsMap(action.payload),\n          error: false\n        };\n      }\n    case 'FETCHING_ERROR':\n      {\n        return {\n          isFetching: false,\n          element_comments_map: {},\n          error: true\n        };\n      }\n    case 'INSERT_COMMENT':\n      {\n        const {\n          element_comments_map,\n          comment_list\n        } = state;\n        const {\n          element_id,\n          comment\n        } = action.payload;\n        if (!element_comments_map[element_id]) {\n          element_comments_map[element_id] = [];\n        }\n        element_comments_map[element_id] = [...element_comments_map[element_id], comment];\n        const commentList = [deepCopy(comment), ...comment_list];\n        return _objectSpread(_objectSpread({}, state), {}, {\n          element_comments_map: _objectSpread({}, element_comments_map),\n          comment_list: commentList\n        });\n      }\n    case 'DELETE_COMMENT':\n      {\n        const {\n          element_comments_map,\n          comment_list\n        } = state;\n        const {\n          element_id,\n          comment_id\n        } = action.payload;\n        if (element_comments_map[element_id]) {\n          element_comments_map[element_id] = element_comments_map[element_id].filter(item => item.id !== comment_id);\n        }\n        const commentList = comment_list.filter(item => item.id !== comment_id);\n        return _objectSpread(_objectSpread({}, state), {}, {\n          element_comments_map: _objectSpread({}, element_comments_map),\n          comment_list: commentList\n        });\n      }\n    case 'UPDATE_COMMENT':\n      {\n        const {\n          element_comments_map,\n          comment_list\n        } = state;\n        const {\n          element_id,\n          comment_id,\n          comment\n        } = action.payload;\n        element_comments_map[element_id] = element_comments_map[element_id].map(item => {\n          if (item.id === comment_id) {\n            item.comment = comment.comment;\n            item.detail = comment.detail;\n            item.updated_at = comment.updated_at;\n            return item;\n          }\n          return item;\n        });\n        const commentList = comment_list.map(item => {\n          if (item.id === comment_id) {\n            item.comment = comment.comment;\n            item.detail = comment.detail;\n            item.updated_at = comment.updated_at;\n            return item;\n          }\n          return item;\n        });\n        return _objectSpread(_objectSpread({}, state), {}, {\n          element_comments_map: _objectSpread({}, element_comments_map),\n          comment_list: commentList\n        });\n      }\n    case 'UPDATE_COMMENT_STATE':\n      {\n        const {\n          element_comments_map,\n          comment_list\n        } = state;\n        const {\n          element_id,\n          comment_id,\n          comment\n        } = action.payload;\n\n        // modify comment state\n        element_comments_map[element_id] = element_comments_map[element_id].map(item => {\n          if (item.id === comment_id) {\n            item.resolved = comment.resolved;\n            return item;\n          }\n          return item;\n        });\n        const commentList = comment_list.map(item => {\n          if (item.id === comment_id) {\n            item.resolved = comment.resolved;\n            return item;\n          }\n          return item;\n        });\n        return _objectSpread(_objectSpread({}, state), {}, {\n          element_comments_map: _objectSpread({}, element_comments_map),\n          comment_list: sortCommentList(commentList)\n        });\n      }\n    case 'INSERT_REPLY':\n      {\n        const {\n          element_comments_map,\n          comment_list\n        } = state;\n        const {\n          element_id,\n          comment_id,\n          reply\n        } = action.payload;\n        element_comments_map[element_id] = element_comments_map[element_id].map(item => {\n          if (item.id === comment_id) {\n            item.replies = [...item.replies, deepCopy(reply)];\n            return item;\n          }\n          return item;\n        });\n        const commentList = comment_list.map(item => {\n          if (item.id === comment_id) {\n            item.replies = [...item.replies, reply];\n            return item;\n          }\n          return item;\n        });\n        return _objectSpread(_objectSpread({}, state), {}, {\n          element_comments_map: _objectSpread({}, element_comments_map),\n          comment_list: commentList\n        });\n      }\n    case 'DELETE_REPLY':\n      {\n        const {\n          element_comments_map,\n          comment_list\n        } = state;\n        const {\n          element_id,\n          comment_id,\n          reply_id\n        } = action.payload;\n        element_comments_map[element_id] = element_comments_map[element_id].map(item => {\n          if (item.id === comment_id) {\n            item.replies = item.replies.filter(reply => reply.id !== reply_id);\n            return item;\n          }\n          return item;\n        });\n        const commentList = comment_list.map(item => {\n          if (item.id === comment_id) {\n            item.replies = item.replies.filter(reply => reply.id !== reply_id);\n            return item;\n          }\n          return item;\n        });\n        return _objectSpread(_objectSpread({}, state), {}, {\n          element_comments_map: _objectSpread({}, element_comments_map),\n          comment_list: commentList\n        });\n      }\n    case 'UPDATE_REPLY':\n      {\n        const {\n          element_comments_map,\n          comment_list\n        } = state;\n        const {\n          element_id,\n          comment_id,\n          reply_id,\n          reply\n        } = action.payload;\n        element_comments_map[element_id] = element_comments_map[element_id].map(item => {\n          if (item.id === comment_id) {\n            item.replies = item.replies.map(replyItem => {\n              if (replyItem.id === reply_id) {\n                // need update replay updated_at\n                return _objectSpread(_objectSpread({}, replyItem), reply);\n              }\n              return replyItem;\n            });\n            return item;\n          }\n          return item;\n        });\n        const commentList = comment_list.map(item => {\n          if (item.id === comment_id) {\n            item.replies = item.replies.map(replyItem => {\n              if (replyItem.id === reply_id) {\n                // need update replay updated_at\n                return _objectSpread(_objectSpread({}, replyItem), reply);\n              }\n              return replyItem;\n            });\n            return item;\n          }\n          return item;\n        });\n        return _objectSpread(_objectSpread({}, state), {}, {\n          element_comments_map: _objectSpread({}, element_comments_map),\n          comment_list: commentList\n        });\n      }\n    default:\n      return state;\n  }\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}