{"ast":null,"code":"import _objectSpread from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import CodeMirror from'@uiw/react-codemirror';import{EditorView}from'@codemirror/view';import{loadLanguage}from'@uiw/codemirror-extensions-langs';import{Utils}from'../../utils/utils';import'./style.css';import{jsx as _jsx}from\"react/jsx-runtime\";var DEFAULT_CODEMIRROR_OPTIONS={lineNumbers:true,highlightActiveLineGutter:false,highlightActiveLine:false};var SeafileCodeMirror=/*#__PURE__*/function(_React$Component){_inherits(SeafileCodeMirror,_React$Component);var _super=_createSuper(SeafileCodeMirror);function SeafileCodeMirror(props){var _this;_classCallCheck(this,SeafileCodeMirror);_this=_super.call(this,props);_this.getOptions=function(){if(_this.options)return _this.options;var _this$props=_this.props,fileExt=_this$props.fileExt,readOnly=_this$props.readOnly;var mode=Utils.chooseLanguage(fileExt);var extensions=loadLanguage(mode);if(extensions){return{theme:'light',readOnly:readOnly,extensions:extensions};}return{theme:'light',readOnly:readOnly};};_this.onChange=function(value){_this.props.onChange&&_this.props.onChange(value);};_this.options=null;return _this;}_createClass(SeafileCodeMirror,[{key:\"render\",value:function render(){var value=this.props.value;var options=this.getOptions();return/*#__PURE__*/_jsx(\"div\",{className:\"seafile-code-mirror-container\",children:/*#__PURE__*/_jsx(CodeMirror,_objectSpread(_objectSpread({ref:\"code-mirror-editor\",value:value},options),{},{onChange:this.onChange,basicSetup:DEFAULT_CODEMIRROR_OPTIONS,extensions:[EditorView.lineWrapping]}))});}}]);return SeafileCodeMirror;}(React.Component);SeafileCodeMirror.defaultProps={readOnly:true};export default SeafileCodeMirror;","map":{"version":3,"names":["React","CodeMirror","EditorView","loadLanguage","Utils","jsx","_jsx","DEFAULT_CODEMIRROR_OPTIONS","lineNumbers","highlightActiveLineGutter","highlightActiveLine","SeafileCodeMirror","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","getOptions","options","_this$props","fileExt","readOnly","mode","chooseLanguage","extensions","theme","onChange","value","_createClass","key","render","className","children","_objectSpread","ref","basicSetup","lineWrapping","Component","defaultProps"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/seafile-codemirror/index.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport CodeMirror from '@uiw/react-codemirror';\nimport { EditorView } from '@codemirror/view';\nimport { loadLanguage } from '@uiw/codemirror-extensions-langs';\nimport { Utils } from '../../utils/utils';\n\nimport './style.css';\n\nconst DEFAULT_CODEMIRROR_OPTIONS = {\n  lineNumbers: true,\n  highlightActiveLineGutter: false,\n  highlightActiveLine: false,\n};\n\nconst propTypes = {\n  fileExt: PropTypes.string,\n  value: PropTypes.string,\n  readOnly: PropTypes.bool,\n  onChange: PropTypes.func,\n};\n\nclass SeafileCodeMirror extends React.Component {\n\n  static defaultProps = {\n    readOnly: true,\n  };\n\n  constructor(props) {\n    super(props);\n    this.options = null;\n  }\n\n  getOptions = () => {\n    if (this.options) return this.options;\n\n    const { fileExt, readOnly } = this.props;\n    const mode = Utils.chooseLanguage(fileExt);\n    const extensions = loadLanguage(mode);\n    if (extensions) {\n      return {\n        theme: 'light',\n        readOnly: readOnly,\n        extensions: extensions,\n      };\n    }\n    return {\n      theme: 'light',\n      readOnly: readOnly,\n    };\n  };\n\n  onChange = (value) => {\n    this.props.onChange && this.props.onChange(value);\n  };\n\n  render() {\n    const { value } = this.props;\n    const options = this.getOptions();\n    return (\n      <div className='seafile-code-mirror-container'>\n        <CodeMirror\n          ref=\"code-mirror-editor\"\n          value={value}\n          {...options}\n          onChange={this.onChange}\n          basicSetup={DEFAULT_CODEMIRROR_OPTIONS}\n          extensions={[EditorView.lineWrapping]}\n        />\n      </div>\n    );\n  }\n}\n\nSeafileCodeMirror.propTypes = propTypes;\n\nexport default SeafileCodeMirror;\n"],"mappings":"6tBAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,MAAO,CAAAC,UAAU,KAAM,uBAAuB,CAC9C,OAASC,UAAU,KAAQ,kBAAkB,CAC7C,OAASC,YAAY,KAAQ,kCAAkC,CAC/D,OAASC,KAAK,KAAQ,mBAAmB,CAEzC,MAAO,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAErB,GAAM,CAAAC,0BAA0B,CAAG,CACjCC,WAAW,CAAE,IAAI,CACjBC,yBAAyB,CAAE,KAAK,CAChCC,mBAAmB,CAAE,KACvB,CAAC,CAAC,GASI,CAAAC,iBAAiB,uBAAAC,gBAAA,EAAAC,SAAA,CAAAF,iBAAA,CAAAC,gBAAA,MAAAE,MAAA,CAAAC,YAAA,CAAAJ,iBAAA,EAMrB,SAAAA,kBAAYK,KAAK,CAAE,KAAAC,KAAA,CAAAC,eAAA,MAAAP,iBAAA,EACjBM,KAAA,CAAAH,MAAA,CAAAK,IAAA,MAAMH,KAAK,EAAEC,KAAA,CAIfG,UAAU,CAAG,UAAM,CACjB,GAAIH,KAAA,CAAKI,OAAO,CAAE,MAAO,CAAAJ,KAAA,CAAKI,OAAO,CAErC,IAAAC,WAAA,CAA8BL,KAAA,CAAKD,KAAK,CAAhCO,OAAO,CAAAD,WAAA,CAAPC,OAAO,CAAEC,QAAQ,CAAAF,WAAA,CAARE,QAAQ,CACzB,GAAM,CAAAC,IAAI,CAAGrB,KAAK,CAACsB,cAAc,CAACH,OAAO,CAAC,CAC1C,GAAM,CAAAI,UAAU,CAAGxB,YAAY,CAACsB,IAAI,CAAC,CACrC,GAAIE,UAAU,CAAE,CACd,MAAO,CACLC,KAAK,CAAE,OAAO,CACdJ,QAAQ,CAAEA,QAAQ,CAClBG,UAAU,CAAEA,UACd,CAAC,CACH,CACA,MAAO,CACLC,KAAK,CAAE,OAAO,CACdJ,QAAQ,CAAEA,QACZ,CAAC,CACH,CAAC,CAAAP,KAAA,CAEDY,QAAQ,CAAG,SAACC,KAAK,CAAK,CACpBb,KAAA,CAAKD,KAAK,CAACa,QAAQ,EAAIZ,KAAA,CAAKD,KAAK,CAACa,QAAQ,CAACC,KAAK,CAAC,CACnD,CAAC,CAxBCb,KAAA,CAAKI,OAAO,CAAG,IAAI,CAAC,OAAAJ,KAAA,CACtB,CAACc,YAAA,CAAApB,iBAAA,GAAAqB,GAAA,UAAAF,KAAA,CAyBD,SAAAG,OAAA,CAAS,CACP,GAAQ,CAAAH,KAAK,CAAK,IAAI,CAACd,KAAK,CAApBc,KAAK,CACb,GAAM,CAAAT,OAAO,CAAG,IAAI,CAACD,UAAU,CAAC,CAAC,CACjC,mBACEd,IAAA,QAAK4B,SAAS,CAAC,+BAA+B,CAAAC,QAAA,cAC5C7B,IAAA,CAACL,UAAU,CAAAmC,aAAA,CAAAA,aAAA,EACTC,GAAG,CAAC,oBAAoB,CACxBP,KAAK,CAAEA,KAAM,EACTT,OAAO,MACXQ,QAAQ,CAAE,IAAI,CAACA,QAAS,CACxBS,UAAU,CAAE/B,0BAA2B,CACvCoB,UAAU,CAAE,CAACzB,UAAU,CAACqC,YAAY,CAAE,EACvC,CAAC,CACC,CAAC,CAEV,CAAC,WAAA5B,iBAAA,GAjD6BX,KAAK,CAACwC,SAAS,EAAzC7B,iBAAiB,CAEd8B,YAAY,CAAG,CACpBjB,QAAQ,CAAE,IACZ,CAAC,CAkDH,cAAe,CAAAb,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}