{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Fragment}from'react';import{Utils}from'../../utils/utils';import{gettext,siteRoot}from'../../utils/constants';import SeafileMarkdownViewer from'../seafile-markdown-viewer';import{jsx as _jsx}from\"react/jsx-runtime\";var DirColumnFile=/*#__PURE__*/function(_React$Component){_inherits(DirColumnFile,_React$Component);var _super=_createSuper(DirColumnFile);function DirColumnFile(){var _this;_classCallCheck(this,DirColumnFile);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.onEditClick=function(e){e.preventDefault();var _this$props=_this.props,path=_this$props.path,repoID=_this$props.repoID;var url=siteRoot+'lib/'+repoID+'/file'+Utils.encodePath(path)+'?mode=edit';window.open(url);};_this.onOpenFile=function(e){e.preventDefault();var _this$props2=_this.props,path=_this$props2.path,repoID=_this$props2.repoID;var newUrl=siteRoot+'lib/'+repoID+'/file'+Utils.encodePath(path);window.open(newUrl,'_blank');};return _this;}_createClass(DirColumnFile,[{key:\"componentDidMount\",value:function componentDidMount(){if(this.props.hash){var hash=this.props.hash;setTimeout(function(){window.location.hash=hash;},500);}}},{key:\"render\",value:function render(){if(this.props.isFileLoadedErr){return/*#__PURE__*/_jsx(\"div\",{className:\"message err-tip\",children:gettext('File does not exist.')});}return/*#__PURE__*/_jsx(SeafileMarkdownViewer,{isTOCShow:false,isFileLoading:this.props.isFileLoading,markdownContent:this.props.content,lastModified:this.props.lastModified,latestContributor:this.props.latestContributor,onLinkClick:this.props.onLinkClick,repoID:this.props.repoID,path:this.props.path,children:/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(\"span\",{className:\"wiki-open-file position-fixed\",onClick:this.onOpenFile,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-expand-arrows-alt\"})})})});}}]);return DirColumnFile;}(React.Component);export default DirColumnFile;","map":{"version":3,"names":["React","Fragment","Utils","gettext","siteRoot","SeafileMarkdownViewer","jsx","_jsx","DirColumnFile","_React$Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","onEditClick","e","preventDefault","_this$props","props","path","repoID","url","encodePath","window","open","onOpenFile","_this$props2","newUrl","_createClass","key","value","componentDidMount","hash","setTimeout","location","render","isFileLoadedErr","className","children","isTOCShow","isFileLoading","markdownContent","content","lastModified","latestContributor","onLinkClick","onClick","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dir-view-mode/dir-column-file.js"],"sourcesContent":["import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport SeafileMarkdownViewer from '../seafile-markdown-viewer';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  hash: PropTypes.string,\n  isFileLoading: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n};\n\nclass DirColumnFile extends React.Component {\n\n  componentDidMount() {\n    if (this.props.hash) {\n      let hash = this.props.hash;\n      setTimeout(function() {\n        window.location.hash = hash;\n      }, 500);\n    }\n  }\n\n  onEditClick = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path) + '?mode=edit';\n    window.open(url);\n  };\n\n  onOpenFile = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let newUrl = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path);\n    window.open(newUrl, '_blank');\n  };\n\n  render() {\n    if (this.props.isFileLoadedErr) {\n      return (\n        <div className=\"message err-tip\">{gettext('File does not exist.')}</div>\n      );\n    }\n    return (\n      <SeafileMarkdownViewer\n        isTOCShow={false}\n        isFileLoading={this.props.isFileLoading}\n        markdownContent={this.props.content}\n        lastModified = {this.props.lastModified}\n        latestContributor={this.props.latestContributor}\n        onLinkClick={this.props.onLinkClick}\n        repoID={this.props.repoID}\n        path={this.props.path}\n      >\n        <Fragment>\n          <span className='wiki-open-file position-fixed' onClick={this.onOpenFile}>\n            <i className=\"fas fa-expand-arrows-alt\"></i>\n          </span>\n        </Fragment>\n      </SeafileMarkdownViewer>\n    );\n  }\n}\n\nDirColumnFile.propTypes = propTypes;\n\nexport default DirColumnFile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}