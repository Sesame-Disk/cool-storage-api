{"ast":null,"code":"import _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { Transforms, Path, Editor, Element, Range } from '@seafile/slate';\nimport toaster from '../../../../components/toast';\nimport context from '../../../../context';\nimport EventBus from '../../../utils/event-bus';\nimport { insertImage, hasSdocImages, getImageData, queryCopyMoveProgressView, resetCursor, isSingleImage } from './helpers';\nimport { focusEditor, generateEmptyElement, isBlockAboveEmpty } from '../../core';\nimport { getErrorMsg } from '../../../../utils';\nimport { getSlateFragmentAttribute } from '../../../utils/document-utils';\nimport { INSERT_POSITION, CLIPBOARD_FORMAT_KEY, CLIPBOARD_ORIGIN_SDOC_KEY, IMAGE, IMAGE_BLOCK, PARAGRAPH } from '../../constants';\nimport { INTERNAL_EVENT } from '../../../constants';\nvar withImage = function withImage(editor) {\n  var isInline = editor.isInline,\n    isVoid = editor.isVoid,\n    insertData = editor.insertData,\n    deleteBackward = editor.deleteBackward,\n    insertFragment = editor.insertFragment,\n    insertBreak = editor.insertBreak;\n  var newEditor = editor;\n\n  // rewrite isInline\n  newEditor.isInline = function (elem) {\n    var type = elem.type;\n    if (type === IMAGE) {\n      return true;\n    }\n    return isInline(elem);\n  };\n\n  // rewrite isVoid\n  newEditor.isVoid = function (elem) {\n    var type = elem.type;\n    if (type === IMAGE) {\n      return true;\n    }\n    return isVoid(elem);\n  };\n  newEditor.insertData = function (data) {\n    var fragment = data.getData(\"application/\".concat(CLIPBOARD_FORMAT_KEY)) || getSlateFragmentAttribute(data);\n    var originSdocUuid = data.getData(\"text/\".concat(CLIPBOARD_ORIGIN_SDOC_KEY));\n    if (fragment && originSdocUuid) {\n      var decoded = decodeURIComponent(window.atob(fragment));\n      var fragmentData = JSON.parse(decoded);\n      if (hasSdocImages(originSdocUuid, fragmentData)) {\n        var imageData = getImageData(fragmentData);\n        context.copyImage(originSdocUuid, imageData).then(function (res) {\n          if (res.status === 200) {\n            // Task_id is an empty character and is copied from the same database.\n            if (res.data.task_id.length === 0) {\n              // Reload image\n              setTimeout(function () {\n                var eventBus = EventBus.getInstance();\n                eventBus.dispatch(INTERNAL_EVENT.RELOAD_IMAGE);\n              }, 300);\n            } else {\n              queryCopyMoveProgressView(res.data.task_id);\n            }\n          }\n        }).catch(function (error) {\n          var errorMessage = getErrorMsg(error);\n          toaster.danger(errorMessage);\n        });\n      }\n    }\n    if (data.types && data.types.includes('Files') && data.files[0].type.includes(IMAGE)) {\n      context.uploadLocalImage(data.files).then(function (fileUrl) {\n        insertImage(newEditor, fileUrl, editor.selection, INSERT_POSITION.CURRENT);\n        resetCursor(newEditor);\n      });\n      return;\n    }\n    insertData(data);\n  };\n  newEditor.insertFragment = function (data) {\n    if (isSingleImage(data)) {\n      resetCursor(newEditor);\n    }\n    return insertFragment(data);\n  };\n  newEditor.imageOnKeyDown = function (e) {\n    if (e.keyCode === 13) {\n      var selection = newEditor.selection;\n      var focus = selection.focus;\n      var parentPath = Path.parent(focus.path);\n      var nextPath = Path.next(parentPath);\n      var nextSelection = {\n        anchor: {\n          offset: 0,\n          path: nextPath\n        },\n        focus: {\n          offset: 0,\n          path: nextPath\n        }\n      };\n      Transforms.setSelection(editor, nextSelection);\n      return;\n    }\n  };\n  newEditor.deleteBackward = function (unit) {\n    var selection = editor.selection;\n    var focusPoint = Editor.before(editor, selection);\n    var point = Editor.before(editor, selection, {\n      distance: 1\n    });\n    if (!point) return deleteBackward(unit);\n    var _Editor$node = Editor.node(editor, [point.path[0], point.path[1]]),\n      _Editor$node2 = _slicedToArray(_Editor$node, 2),\n      node = _Editor$node2[0],\n      path = _Editor$node2[1];\n    var isPerviousNodeImage = node.type === IMAGE;\n    if (isPerviousNodeImage && Range.isCollapsed(selection) && isBlockAboveEmpty(editor) && !Path.isCommon(path, selection.anchor.path)) {\n      deleteBackward(unit);\n      focusEditor(newEditor, Editor.end(newEditor, focusPoint));\n      return;\n    }\n    if (Element.isElement(node) && node.type === IMAGE) {\n      // If the wrapping element is image_block, delete the wrapping element\n      var _Editor$node3 = Editor.node(editor, [path[0]]),\n        _Editor$node4 = _slicedToArray(_Editor$node3, 2),\n        parentNode = _Editor$node4[0],\n        p = _Editor$node4[1];\n      if (parentNode.type === IMAGE_BLOCK) {\n        Transforms.removeNodes(editor, {\n          at: p\n        });\n        return;\n      }\n      focusEditor(editor, Path.next(path));\n    }\n    deleteBackward(unit);\n  };\n  newEditor.insertBreak = function () {\n    var selection = editor.selection;\n    if (selection == null) return insertBreak();\n    var path = Editor.path(editor, selection);\n    var _Editor$node5 = Editor.node(editor, [path[0]]),\n      _Editor$node6 = _slicedToArray(_Editor$node5, 1),\n      node = _Editor$node6[0];\n    if (node.type === IMAGE_BLOCK) {\n      var p = generateEmptyElement(PARAGRAPH);\n      Transforms.insertNodes(editor, p, {\n        at: [path[0] + 1]\n      });\n      focusEditor(editor, [path[0] + 1]);\n      return;\n    }\n    insertBreak();\n  };\n  return newEditor;\n};\nexport default withImage;","map":{"version":3,"names":["Transforms","Path","Editor","Element","Range","toaster","context","EventBus","insertImage","hasSdocImages","getImageData","queryCopyMoveProgressView","resetCursor","isSingleImage","focusEditor","generateEmptyElement","isBlockAboveEmpty","getErrorMsg","getSlateFragmentAttribute","INSERT_POSITION","CLIPBOARD_FORMAT_KEY","CLIPBOARD_ORIGIN_SDOC_KEY","IMAGE","IMAGE_BLOCK","PARAGRAPH","INTERNAL_EVENT","withImage","editor","isInline","isVoid","insertData","deleteBackward","insertFragment","insertBreak","newEditor","elem","type","data","fragment","getData","concat","originSdocUuid","decoded","decodeURIComponent","window","atob","fragmentData","JSON","parse","imageData","copyImage","then","res","status","task_id","length","setTimeout","eventBus","getInstance","dispatch","RELOAD_IMAGE","catch","error","errorMessage","danger","types","includes","files","uploadLocalImage","fileUrl","selection","CURRENT","imageOnKeyDown","e","keyCode","focus","parentPath","parent","path","nextPath","next","nextSelection","anchor","offset","setSelection","unit","focusPoint","before","point","distance","_Editor$node","node","_Editor$node2","_slicedToArray","isPerviousNodeImage","isCollapsed","isCommon","end","isElement","_Editor$node3","_Editor$node4","parentNode","p","removeNodes","at","_Editor$node5","_Editor$node6","insertNodes"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/extension/plugins/image/plugin.js"],"sourcesContent":["import { Transforms, Path, Editor, Element, Range } from '@seafile/slate';\nimport toaster from '../../../../components/toast';\nimport context from '../../../../context';\nimport EventBus from '../../../utils/event-bus';\nimport { insertImage, hasSdocImages, getImageData, queryCopyMoveProgressView, resetCursor, isSingleImage } from './helpers';\nimport { focusEditor, generateEmptyElement, isBlockAboveEmpty } from '../../core';\nimport { getErrorMsg } from '../../../../utils';\nimport { getSlateFragmentAttribute } from '../../../utils/document-utils';\nimport { INSERT_POSITION, CLIPBOARD_FORMAT_KEY, CLIPBOARD_ORIGIN_SDOC_KEY, IMAGE, IMAGE_BLOCK, PARAGRAPH } from '../../constants';\nimport { INTERNAL_EVENT } from '../../../constants';\nconst withImage = editor => {\n  const {\n    isInline,\n    isVoid,\n    insertData,\n    deleteBackward,\n    insertFragment,\n    insertBreak\n  } = editor;\n  const newEditor = editor;\n\n  // rewrite isInline\n  newEditor.isInline = elem => {\n    const {\n      type\n    } = elem;\n    if (type === IMAGE) {\n      return true;\n    }\n    return isInline(elem);\n  };\n\n  // rewrite isVoid\n  newEditor.isVoid = elem => {\n    const {\n      type\n    } = elem;\n    if (type === IMAGE) {\n      return true;\n    }\n    return isVoid(elem);\n  };\n  newEditor.insertData = data => {\n    const fragment = data.getData(\"application/\".concat(CLIPBOARD_FORMAT_KEY)) || getSlateFragmentAttribute(data);\n    const originSdocUuid = data.getData(\"text/\".concat(CLIPBOARD_ORIGIN_SDOC_KEY));\n    if (fragment && originSdocUuid) {\n      const decoded = decodeURIComponent(window.atob(fragment));\n      const fragmentData = JSON.parse(decoded);\n      if (hasSdocImages(originSdocUuid, fragmentData)) {\n        const imageData = getImageData(fragmentData);\n        context.copyImage(originSdocUuid, imageData).then(res => {\n          if (res.status === 200) {\n            // Task_id is an empty character and is copied from the same database.\n            if (res.data.task_id.length === 0) {\n              // Reload image\n              setTimeout(() => {\n                const eventBus = EventBus.getInstance();\n                eventBus.dispatch(INTERNAL_EVENT.RELOAD_IMAGE);\n              }, 300);\n            } else {\n              queryCopyMoveProgressView(res.data.task_id);\n            }\n          }\n        }).catch(error => {\n          const errorMessage = getErrorMsg(error);\n          toaster.danger(errorMessage);\n        });\n      }\n    }\n    if (data.types && data.types.includes('Files') && data.files[0].type.includes(IMAGE)) {\n      context.uploadLocalImage(data.files).then(fileUrl => {\n        insertImage(newEditor, fileUrl, editor.selection, INSERT_POSITION.CURRENT);\n        resetCursor(newEditor);\n      });\n      return;\n    }\n    insertData(data);\n  };\n  newEditor.insertFragment = data => {\n    if (isSingleImage(data)) {\n      resetCursor(newEditor);\n    }\n    return insertFragment(data);\n  };\n  newEditor.imageOnKeyDown = e => {\n    if (e.keyCode === 13) {\n      const {\n        selection\n      } = newEditor;\n      const {\n        focus\n      } = selection;\n      const parentPath = Path.parent(focus.path);\n      const nextPath = Path.next(parentPath);\n      const nextSelection = {\n        anchor: {\n          offset: 0,\n          path: nextPath\n        },\n        focus: {\n          offset: 0,\n          path: nextPath\n        }\n      };\n      Transforms.setSelection(editor, nextSelection);\n      return;\n    }\n  };\n  newEditor.deleteBackward = unit => {\n    const {\n      selection\n    } = editor;\n    const focusPoint = Editor.before(editor, selection);\n    const point = Editor.before(editor, selection, {\n      distance: 1\n    });\n    if (!point) return deleteBackward(unit);\n    const [node, path] = Editor.node(editor, [point.path[0], point.path[1]]);\n    const isPerviousNodeImage = node.type === IMAGE;\n    if (isPerviousNodeImage && Range.isCollapsed(selection) && isBlockAboveEmpty(editor) && !Path.isCommon(path, selection.anchor.path)) {\n      deleteBackward(unit);\n      focusEditor(newEditor, Editor.end(newEditor, focusPoint));\n      return;\n    }\n    if (Element.isElement(node) && node.type === IMAGE) {\n      // If the wrapping element is image_block, delete the wrapping element\n      const [parentNode, p] = Editor.node(editor, [path[0]]);\n      if (parentNode.type === IMAGE_BLOCK) {\n        Transforms.removeNodes(editor, {\n          at: p\n        });\n        return;\n      }\n      focusEditor(editor, Path.next(path));\n    }\n    deleteBackward(unit);\n  };\n  newEditor.insertBreak = () => {\n    const {\n      selection\n    } = editor;\n    if (selection == null) return insertBreak();\n    const path = Editor.path(editor, selection);\n    const [node] = Editor.node(editor, [path[0]]);\n    if (node.type === IMAGE_BLOCK) {\n      const p = generateEmptyElement(PARAGRAPH);\n      Transforms.insertNodes(editor, p, {\n        at: [path[0] + 1]\n      });\n      focusEditor(editor, [path[0] + 1]);\n      return;\n    }\n    insertBreak();\n  };\n  return newEditor;\n};\nexport default withImage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}