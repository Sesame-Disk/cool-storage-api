{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{Alert,Modal,ModalHeader,ModalBody,ModalFooter,Button}from'reactstrap';import{gettext,siteRoot}from'../../../utils/constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SysAdminImportUserDialog=/*#__PURE__*/function(_React$Component){_inherits(SysAdminImportUserDialog,_React$Component);var _super=_createSuper(SysAdminImportUserDialog);function SysAdminImportUserDialog(props){var _this;_classCallCheck(this,SysAdminImportUserDialog);_this=_super.call(this,props);_this.toggle=function(){_this.props.toggle();};_this.openFileInput=function(){_this.fileInputRef.current.click();};_this.uploadFile=function(e){// no file selected\nif(!_this.fileInputRef.current.files.length){return;}// check file extension\nvar fileName=_this.fileInputRef.current.files[0].name;if(fileName.substr(fileName.lastIndexOf('.')+1)!='xlsx'){_this.setState({errorMsg:gettext('Please choose a .xlsx file.')});return;}var file=_this.fileInputRef.current.files[0];_this.props.importUserInBatch(file);_this.toggle();};_this.state={errorMsg:''};_this.fileInputRef=/*#__PURE__*/React.createRef();return _this;}_createClass(SysAdminImportUserDialog,[{key:\"render\",value:function render(){var errorMsg=this.state.errorMsg;return/*#__PURE__*/_jsxs(Modal,{isOpen:true,toggle:this.toggle,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:this.toggle,children:gettext('Import users from a .xlsx file')}),/*#__PURE__*/_jsxs(ModalBody,{children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"a\",{className:\"text-secondary small\",href:\"\".concat(siteRoot,\"useradmin/batchadduser/example/\"),children:gettext('Download an example file')})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-primary\",onClick:this.openFileInput,children:gettext('Upload file')}),/*#__PURE__*/_jsx(\"input\",{className:\"d-none\",type:\"file\",onChange:this.uploadFile,ref:this.fileInputRef}),errorMsg&&/*#__PURE__*/_jsx(Alert,{color:\"danger\",children:errorMsg})]}),/*#__PURE__*/_jsx(ModalFooter,{children:/*#__PURE__*/_jsx(Button,{color:\"secondary\",onClick:this.toggle,children:gettext('Cancel')})})]});}}]);return SysAdminImportUserDialog;}(React.Component);export default SysAdminImportUserDialog;","map":{"version":3,"names":["React","Alert","Modal","ModalHeader","ModalBody","ModalFooter","Button","gettext","siteRoot","jsx","_jsx","jsxs","_jsxs","SysAdminImportUserDialog","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","toggle","openFileInput","fileInputRef","current","click","uploadFile","e","files","length","fileName","name","substr","lastIndexOf","setState","errorMsg","file","importUserInBatch","state","createRef","_createClass","key","value","render","isOpen","children","className","href","concat","onClick","type","onChange","ref","color","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-import-user-dialog.js"],"sourcesContent":["\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, siteRoot } from '../../../utils/constants';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  importUserInBatch: PropTypes.func.isRequired,\n};\n\nclass SysAdminImportUserDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: ''\n    };\n    this.fileInputRef = React.createRef();\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  };\n\n  openFileInput = () => {\n    this.fileInputRef.current.click();\n  };\n\n  uploadFile = (e) => {\n    // no file selected\n    if (!this.fileInputRef.current.files.length) {\n      return;\n    }\n    // check file extension\n    let fileName = this.fileInputRef.current.files[0].name;\n    if(fileName.substr(fileName.lastIndexOf('.') + 1) != 'xlsx') {\n      this.setState({\n        errorMsg: gettext('Please choose a .xlsx file.')\n      });\n      return;\n    }\n    const file = this.fileInputRef.current.files[0];\n    this.props.importUserInBatch(file);\n    this.toggle();\n  };\n\n  render() {\n    let { errorMsg } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Import users from a .xlsx file')}</ModalHeader>\n        <ModalBody>\n          <p><a className=\"text-secondary small\" href={`${siteRoot}useradmin/batchadduser/example/`}>{gettext('Download an example file')}</a></p>\n          <button className=\"btn btn-outline-primary\" onClick={this.openFileInput}>{gettext('Upload file')}</button>\n          <input className=\"d-none\" type=\"file\" onChange={this.uploadFile} ref={this.fileInputRef} />\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminImportUserDialog.propTypes = propTypes;\n\nexport default SysAdminImportUserDialog;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}