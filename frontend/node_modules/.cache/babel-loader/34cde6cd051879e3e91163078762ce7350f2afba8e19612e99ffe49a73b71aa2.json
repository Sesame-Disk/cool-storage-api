{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar _assertThisInitialized = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/assertThisInitialized.js\").default;\nvar _inherits = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/inherits.js\").default;\nvar _createSuper = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/createSuper.js\").default;\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/esm/defineProperty\"));\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _loading = _interopRequireDefault(require(\"../../containers/loading\"));\nvar _slateConvert = require(\"../../slate-convert\");\nvar _slateViewer = _interopRequireDefault(require(\"../../editors/slate-viewer\"));\nrequire(\"./style.css\");\n// Windows old Wechat (3.0 or earlier) inner core is chrome 53 and don't support ECMA6, can't use seafile-editor markdownViewer\n// Windows new Wechat (lastest version 3.3.5) support seafile-editor markdownViewer\n// so use dangerouslySetInnerHTML to preview\nvar MarkdownPreview = /*#__PURE__*/function (_react$default$PureCo) {\n  _inherits(MarkdownPreview, _react$default$PureCo);\n  var _super = _createSuper(MarkdownPreview);\n  function MarkdownPreview(props) {\n    var _this;\n    _classCallCheck(this, MarkdownPreview);\n    _this = _super.call(this, props);\n    (0, _defineProperty2.default)(_assertThisInitialized(_this), \"convertMarkdown\", function (mdFile) {\n      _slateConvert.processor.process(mdFile).then(function (result) {\n        var innerHtml = String(result).replace(/<a /ig, '<a target=\"_blank\" tabindex=\"-1\"');\n        _this.setState({\n          innerHtml: innerHtml\n        });\n      });\n    });\n    _this.state = {\n      innerHtml: null\n    };\n    return _this;\n  }\n  _createClass(MarkdownPreview, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props = this.props,\n        isWindowsWechat = _this$props.isWindowsWechat,\n        value = _this$props.value;\n      if (isWindowsWechat) {\n        this.convertMarkdown(value);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n        isWindowsWechat = _this$props2.isWindowsWechat,\n        value = _this$props2.value,\n        isShowOutline = _this$props2.isShowOutline;\n      var innerHtml = this.state.innerHtml;\n      if (isWindowsWechat && innerHtml === null) {\n        return /*#__PURE__*/_react.default.createElement(_loading.default, null);\n      }\n      return /*#__PURE__*/_react.default.createElement(\"div\", {\n        className: \"longtext-preview-container\"\n      }, isWindowsWechat && /*#__PURE__*/_react.default.createElement(\"div\", {\n        className: \"article\",\n        dangerouslySetInnerHTML: {\n          __html: this.state.innerHtml\n        }\n      }), !isWindowsWechat && /*#__PURE__*/_react.default.createElement(_slateViewer.default, {\n        value: (0, _slateConvert.mdStringToSlate)(value),\n        isShowOutline: isShowOutline\n      }));\n    }\n  }]);\n  return MarkdownPreview;\n}(_react.default.PureComponent);\nvar _default = exports.default = MarkdownPreview;","map":{"version":3,"names":["_classCallCheck","require","default","_createClass","_assertThisInitialized","_inherits","_createSuper","_interopRequireDefault","Object","defineProperty","exports","value","_defineProperty2","_react","_loading","_slateConvert","_slateViewer","MarkdownPreview","_react$default$PureCo","_super","props","_this","call","mdFile","processor","process","then","result","innerHtml","String","replace","setState","state","key","componentDidMount","_this$props","isWindowsWechat","convertMarkdown","render","_this$props2","isShowOutline","createElement","className","dangerouslySetInnerHTML","__html","mdStringToSlate","PureComponent","_default"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/pages/markdown-preview/index.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/esm/defineProperty\"));\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _loading = _interopRequireDefault(require(\"../../containers/loading\"));\nvar _slateConvert = require(\"../../slate-convert\");\nvar _slateViewer = _interopRequireDefault(require(\"../../editors/slate-viewer\"));\nrequire(\"./style.css\");\n// Windows old Wechat (3.0 or earlier) inner core is chrome 53 and don't support ECMA6, can't use seafile-editor markdownViewer\n// Windows new Wechat (lastest version 3.3.5) support seafile-editor markdownViewer\n// so use dangerouslySetInnerHTML to preview\nclass MarkdownPreview extends _react.default.PureComponent {\n  constructor(props) {\n    super(props);\n    (0, _defineProperty2.default)(this, \"convertMarkdown\", mdFile => {\n      _slateConvert.processor.process(mdFile).then(result => {\n        let innerHtml = String(result).replace(/<a /ig, '<a target=\"_blank\" tabindex=\"-1\"');\n        this.setState({\n          innerHtml\n        });\n      });\n    });\n    this.state = {\n      innerHtml: null\n    };\n  }\n  componentDidMount() {\n    const {\n      isWindowsWechat,\n      value\n    } = this.props;\n    if (isWindowsWechat) {\n      this.convertMarkdown(value);\n    }\n  }\n  render() {\n    const {\n      isWindowsWechat,\n      value,\n      isShowOutline\n    } = this.props;\n    const {\n      innerHtml\n    } = this.state;\n    if (isWindowsWechat && innerHtml === null) {\n      return /*#__PURE__*/_react.default.createElement(_loading.default, null);\n    }\n    return /*#__PURE__*/_react.default.createElement(\"div\", {\n      className: \"longtext-preview-container\"\n    }, isWindowsWechat && /*#__PURE__*/_react.default.createElement(\"div\", {\n      className: \"article\",\n      dangerouslySetInnerHTML: {\n        __html: this.state.innerHtml\n      }\n    }), !isWindowsWechat && /*#__PURE__*/_react.default.createElement(_slateViewer.default, {\n      value: (0, _slateConvert.mdStringToSlate)(value),\n      isShowOutline: isShowOutline\n    }));\n  }\n}\nvar _default = exports.default = MarkdownPreview;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}