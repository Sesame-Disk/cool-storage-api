{"ast":null,"code":"import _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport classnames from 'classnames';\nimport { TIP_TYPE, TIP_TITLE, TIP_CONTENT } from '../../constants';\nimport CommonLoading from '../common-loading';\nimport ContentReplaced from '../../assets/images/content-replaced.png';\nimport './index.css';\nvar NOT_CLOSE_DIALOG_TIP_TYPE = [TIP_TYPE.HAS_BEEN_REPLACED, TIP_TYPE.HAS_BEEN_PUBLISHED, TIP_TYPE.CHECKING, TIP_TYPE.PUBLISHING];\nvar TipDialog = function TipDialog(_ref) {\n  var className = _ref.className,\n    tipType = _ref.tipType,\n    onClose = _ref.onClose,\n    propsOnSubmit = _ref.onSubmit,\n    _ref$zIndex = _ref.zIndex,\n    zIndex = _ref$zIndex === void 0 ? 1071 : _ref$zIndex,\n    children = _ref.children;\n  var _useTranslation = useTranslation(),\n    t = _useTranslation.t;\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    isSubmitting = _useState2[0],\n    setSubmitting = _useState2[1];\n  var closeDialog = useCallback(function () {\n    if (NOT_CLOSE_DIALOG_TIP_TYPE.includes(tipType)) return;\n    if (isSubmitting) return;\n    onClose && onClose();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tipType, isSubmitting]);\n  var onSubmit = useCallback(function () {\n    if ([TIP_TYPE.HAS_CONFLICT_BEFORE_VIEW_CHANGES, TIP_TYPE.HAS_CONFLICT_BEFORE_PUBLISH].includes(tipType)) {\n      closeDialog();\n      return;\n    }\n    setSubmitting(true);\n    propsOnSubmit && propsOnSubmit();\n  }, [closeDialog, propsOnSubmit, tipType]);\n  useEffect(function () {\n    if (isSubmitting) {\n      var timer = setTimeout(function () {\n        setSubmitting(false);\n      }, 3000);\n      return function () {\n        clearTimeout(timer);\n      };\n    }\n  }, [isSubmitting]);\n  var refreshPage = useCallback(function () {\n    window.location.reload();\n  }, []);\n  var renderTip = useCallback(function () {\n    if (tipType === TIP_TYPE.HAS_BEEN_REPLACED) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sdoc-tip-dialog-custom-container\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sdoc-tip-img-container\"\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: ContentReplaced,\n        alt: \"\",\n        height: \"140\"\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sdoc-tip-content\"\n      }, t(TIP_CONTENT[tipType])), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sdoc-tip-operations-container\"\n      }, /*#__PURE__*/React.createElement(Button, {\n        color: \"primary\",\n        className: \"highlight-bg-color sdoc-tip-operation-btn\",\n        onClick: refreshPage\n      }, t('Refresh'))));\n    }\n    if (tipType === TIP_TYPE.PUBLISHING) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sdoc-tip-dialog-custom-container publishing\"\n      }, /*#__PURE__*/React.createElement(CommonLoading, null), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sdoc-tip-content\"\n      }, t(TIP_CONTENT[tipType])));\n    }\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ModalHeader, {\n      toggle: NOT_CLOSE_DIALOG_TIP_TYPE.includes(tipType) ? undefined : closeDialog\n    }, t(TIP_TITLE[tipType])), /*#__PURE__*/React.createElement(ModalBody, {\n      className: \"sdoc-tip-body\"\n    }, children ? children : /*#__PURE__*/React.createElement(React.Fragment, null, t(TIP_CONTENT[tipType]))), !NOT_CLOSE_DIALOG_TIP_TYPE.includes(tipType) && /*#__PURE__*/React.createElement(ModalFooter, null, /*#__PURE__*/React.createElement(Button, {\n      color: \"secondary\",\n      className: \"mr-2\",\n      onClick: closeDialog\n    }, t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n      color: \"primary\",\n      className: classnames('highlight-bg-color', {\n        'd-flex align-items-center': isSubmitting\n      }),\n      disabled: isSubmitting,\n      onClick: onSubmit\n    }, isSubmitting && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"submit-loading-container mr-2\"\n    }, /*#__PURE__*/React.createElement(CommonLoading, null)), t('Confirm'))));\n  }, [children, closeDialog, isSubmitting, onSubmit, t, tipType, refreshPage]);\n  return /*#__PURE__*/React.createElement(Modal, {\n    isOpen: true,\n    autoFocus: false,\n    zIndex: zIndex,\n    returnFocusAfterClose: false,\n    toggle: closeDialog,\n    className: classnames('sdoc-tip-dialog', className),\n    contentClassName: \"sdoc-tip-modal\"\n  }, renderTip());\n};\nexport default TipDialog;","map":{"version":3,"names":["React","useCallback","useEffect","useState","useTranslation","Modal","ModalHeader","ModalBody","ModalFooter","Button","classnames","TIP_TYPE","TIP_TITLE","TIP_CONTENT","CommonLoading","ContentReplaced","NOT_CLOSE_DIALOG_TIP_TYPE","HAS_BEEN_REPLACED","HAS_BEEN_PUBLISHED","CHECKING","PUBLISHING","TipDialog","_ref","className","tipType","onClose","propsOnSubmit","onSubmit","_ref$zIndex","zIndex","children","_useTranslation","t","_useState","_useState2","_slicedToArray","isSubmitting","setSubmitting","closeDialog","includes","HAS_CONFLICT_BEFORE_VIEW_CHANGES","HAS_CONFLICT_BEFORE_PUBLISH","timer","setTimeout","clearTimeout","refreshPage","window","location","reload","renderTip","createElement","src","alt","height","color","onClick","Fragment","toggle","undefined","disabled","isOpen","autoFocus","returnFocusAfterClose","contentClassName"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/components/tip-dialog/index.js"],"sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport classnames from 'classnames';\nimport { TIP_TYPE, TIP_TITLE, TIP_CONTENT } from '../../constants';\nimport CommonLoading from '../common-loading';\nimport ContentReplaced from '../../assets/images/content-replaced.png';\nimport './index.css';\nconst NOT_CLOSE_DIALOG_TIP_TYPE = [TIP_TYPE.HAS_BEEN_REPLACED, TIP_TYPE.HAS_BEEN_PUBLISHED, TIP_TYPE.CHECKING, TIP_TYPE.PUBLISHING];\nconst TipDialog = _ref => {\n  let {\n    className,\n    tipType,\n    onClose,\n    onSubmit: propsOnSubmit,\n    zIndex = 1071,\n    children\n  } = _ref;\n  const {\n    t\n  } = useTranslation();\n  const [isSubmitting, setSubmitting] = useState();\n  const closeDialog = useCallback(() => {\n    if (NOT_CLOSE_DIALOG_TIP_TYPE.includes(tipType)) return;\n    if (isSubmitting) return;\n    onClose && onClose();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tipType, isSubmitting]);\n  const onSubmit = useCallback(() => {\n    if ([TIP_TYPE.HAS_CONFLICT_BEFORE_VIEW_CHANGES, TIP_TYPE.HAS_CONFLICT_BEFORE_PUBLISH].includes(tipType)) {\n      closeDialog();\n      return;\n    }\n    setSubmitting(true);\n    propsOnSubmit && propsOnSubmit();\n  }, [closeDialog, propsOnSubmit, tipType]);\n  useEffect(() => {\n    if (isSubmitting) {\n      const timer = setTimeout(() => {\n        setSubmitting(false);\n      }, 3000);\n      return () => {\n        clearTimeout(timer);\n      };\n    }\n  }, [isSubmitting]);\n  const refreshPage = useCallback(() => {\n    window.location.reload();\n  }, []);\n  const renderTip = useCallback(() => {\n    if (tipType === TIP_TYPE.HAS_BEEN_REPLACED) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sdoc-tip-dialog-custom-container\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sdoc-tip-img-container\"\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: ContentReplaced,\n        alt: \"\",\n        height: \"140\"\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sdoc-tip-content\"\n      }, t(TIP_CONTENT[tipType])), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sdoc-tip-operations-container\"\n      }, /*#__PURE__*/React.createElement(Button, {\n        color: \"primary\",\n        className: \"highlight-bg-color sdoc-tip-operation-btn\",\n        onClick: refreshPage\n      }, t('Refresh'))));\n    }\n    if (tipType === TIP_TYPE.PUBLISHING) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sdoc-tip-dialog-custom-container publishing\"\n      }, /*#__PURE__*/React.createElement(CommonLoading, null), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sdoc-tip-content\"\n      }, t(TIP_CONTENT[tipType])));\n    }\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ModalHeader, {\n      toggle: NOT_CLOSE_DIALOG_TIP_TYPE.includes(tipType) ? undefined : closeDialog\n    }, t(TIP_TITLE[tipType])), /*#__PURE__*/React.createElement(ModalBody, {\n      className: \"sdoc-tip-body\"\n    }, children ? children : /*#__PURE__*/React.createElement(React.Fragment, null, t(TIP_CONTENT[tipType]))), !NOT_CLOSE_DIALOG_TIP_TYPE.includes(tipType) && /*#__PURE__*/React.createElement(ModalFooter, null, /*#__PURE__*/React.createElement(Button, {\n      color: \"secondary\",\n      className: \"mr-2\",\n      onClick: closeDialog\n    }, t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n      color: \"primary\",\n      className: classnames('highlight-bg-color', {\n        'd-flex align-items-center': isSubmitting\n      }),\n      disabled: isSubmitting,\n      onClick: onSubmit\n    }, isSubmitting && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"submit-loading-container mr-2\"\n    }, /*#__PURE__*/React.createElement(CommonLoading, null)), t('Confirm'))));\n  }, [children, closeDialog, isSubmitting, onSubmit, t, tipType, refreshPage]);\n  return /*#__PURE__*/React.createElement(Modal, {\n    isOpen: true,\n    autoFocus: false,\n    zIndex: zIndex,\n    returnFocusAfterClose: false,\n    toggle: closeDialog,\n    className: classnames('sdoc-tip-dialog', className),\n    contentClassName: \"sdoc-tip-modal\"\n  }, renderTip());\n};\nexport default TipDialog;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}