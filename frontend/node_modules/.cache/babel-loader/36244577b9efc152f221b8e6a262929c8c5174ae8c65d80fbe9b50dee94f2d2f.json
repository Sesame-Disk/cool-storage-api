{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{Alert,Modal,ModalHeader,ModalBody,ModalFooter,Button}from'reactstrap';import{gettext,siteRoot,groupImportMembersExtraMsg}from'../../utils/constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ImportMembersDialog=/*#__PURE__*/function(_React$Component){_inherits(ImportMembersDialog,_React$Component);var _super=_createSuper(ImportMembersDialog);function ImportMembersDialog(props){var _this;_classCallCheck(this,ImportMembersDialog);_this=_super.call(this,props);_this.toggle=function(){_this.props.toggleImportMembersDialog();};_this.openFileInput=function(){_this.fileInputRef.current.click();};_this.uploadFile=function(e){// no file selected\nif(!_this.fileInputRef.current.files.length){return;}// check file extension\nvar fileName=_this.fileInputRef.current.files[0].name;if(fileName.substr(fileName.lastIndexOf('.')+1)!='xlsx'){_this.setState({errorMsg:gettext('Please choose a .xlsx file.')});return;}var file=_this.fileInputRef.current.files[0];_this.props.importMembersInBatch(file);_this.toggle();};_this.state={errorMsg:''};_this.fileInputRef=/*#__PURE__*/React.createRef();return _this;}_createClass(ImportMembersDialog,[{key:\"render\",value:function render(){var errorMsg=this.state.errorMsg;return/*#__PURE__*/_jsxs(Modal,{isOpen:true,toggle:this.toggle,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:this.toggle,children:gettext('Import members from a .xlsx file')}),/*#__PURE__*/_jsxs(ModalBody,{children:[/*#__PURE__*/_jsx(\"p\",{children:groupImportMembersExtraMsg}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"a\",{className:\"text-secondary small\",href:\"\".concat(siteRoot,\"api/v2.1/group-members-import-example/\"),children:gettext('Download an example file')})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-primary\",onClick:this.openFileInput,children:gettext('Upload file')}),/*#__PURE__*/_jsx(\"input\",{className:\"d-none\",type:\"file\",onChange:this.uploadFile,ref:this.fileInputRef}),errorMsg&&/*#__PURE__*/_jsx(Alert,{color:\"danger\",children:errorMsg})]}),/*#__PURE__*/_jsx(ModalFooter,{children:/*#__PURE__*/_jsx(Button,{color:\"secondary\",onClick:this.toggle,children:gettext('Cancel')})})]});}}]);return ImportMembersDialog;}(React.Component);export default ImportMembersDialog;","map":{"version":3,"names":["React","Alert","Modal","ModalHeader","ModalBody","ModalFooter","Button","gettext","siteRoot","groupImportMembersExtraMsg","jsx","_jsx","jsxs","_jsxs","ImportMembersDialog","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","toggle","toggleImportMembersDialog","openFileInput","fileInputRef","current","click","uploadFile","e","files","length","fileName","name","substr","lastIndexOf","setState","errorMsg","file","importMembersInBatch","state","createRef","_createClass","key","value","render","isOpen","children","className","href","concat","onClick","type","onChange","ref","color","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/import-members-dialog.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, siteRoot, groupImportMembersExtraMsg } from '../../utils/constants';\n\nconst propTypes = {\n  toggleImportMembersDialog: PropTypes.func.isRequired,\n  importMembersInBatch: PropTypes.func.isRequired,\n};\n\nclass ImportMembersDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: ''\n    };\n    this.fileInputRef = React.createRef();\n  }\n\n  toggle = () => {\n    this.props.toggleImportMembersDialog();\n  };\n\n  openFileInput = () => {\n    this.fileInputRef.current.click();\n  };\n\n  uploadFile = (e) => {\n    // no file selected\n    if (!this.fileInputRef.current.files.length) {\n      return;\n    }\n    // check file extension\n    let fileName = this.fileInputRef.current.files[0].name;\n    if(fileName.substr(fileName.lastIndexOf('.') + 1) != 'xlsx') {\n      this.setState({\n        errorMsg: gettext('Please choose a .xlsx file.')\n      });\n      return;\n    }\n    const file = this.fileInputRef.current.files[0];\n    this.props.importMembersInBatch(file);\n    this.toggle();\n  };\n\n  render() {\n    let { errorMsg } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Import members from a .xlsx file')}</ModalHeader>\n\n        <ModalBody>\n          <p>{groupImportMembersExtraMsg}</p>\n          <p><a className=\"text-secondary small\" href={`${siteRoot}api/v2.1/group-members-import-example/`}>{gettext('Download an example file')}</a></p>\n          <button className=\"btn btn-outline-primary\" onClick={this.openFileInput}>{gettext('Upload file')}</button>\n          <input className=\"d-none\" type=\"file\" onChange={this.uploadFile} ref={this.fileInputRef} />\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nImportMembersDialog.propTypes = propTypes;\n\nexport default ImportMembersDialog;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}