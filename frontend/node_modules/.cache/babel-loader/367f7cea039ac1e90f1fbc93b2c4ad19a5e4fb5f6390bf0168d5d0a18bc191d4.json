{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\nvar _asyncToGenerator = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nvar _slicedToArray = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _reactI18next = require(\"react-i18next\");\nvar _imageMenuDialog = _interopRequireDefault(require(\"./image-menu-dialog\"));\nvar _eventBus = _interopRequireDefault(require(\"../../../../utils/event-bus\"));\nvar _eventTypes = require(\"../../../../constants/event-types\");\nvar _helper = require(\"../helper\");\nvar _constants = require(\"../../../../constants\");\nrequire(\"./style.css\");\nvar ImageMenuPopover = /*#__PURE__*/_react.default.forwardRef(function (_ref, ref) {\n  var editor = _ref.editor,\n    handelClosePopover = _ref.handelClosePopover,\n    isSupportInsertSeafileImage = _ref.isSupportInsertSeafileImage;\n  var _ref2 = (0, _react.useState)(false),\n    _ref3 = _slicedToArray(_ref2, 2),\n    isShowInternetImageModal = _ref3[0],\n    setIsShowInternetImageModal = _ref3[1];\n  var _ref4 = (0, _reactI18next.useTranslation)(_constants.TRANSLATE_NAMESPACE),\n    t = _ref4.t;\n  var handleInsertNetworkImage = function handleInsertNetworkImage(e) {\n    e.stopPropagation();\n    e.nativeEvent.stopImmediatePropagation();\n    setIsShowInternetImageModal(true);\n  };\n  var handleClickFileInput = (0, _react.useCallback)(function (e) {\n    e.stopPropagation();\n    e.target.value = null;\n    e.nativeEvent.stopImmediatePropagation();\n  }, []);\n  var handleUploadLocalImage = (0, _react.useCallback)( /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(e) {\n      var file;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            file = e.target.files[0];\n            (0, _helper.handleUpdateImage)(editor, file);\n            handelClosePopover();\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    return function (_x) {\n      return _ref5.apply(this, arguments);\n    };\n  }(), [editor, handelClosePopover]);\n  var onToggleImageDialog = (0, _react.useCallback)(function () {\n    setIsShowInternetImageModal(false);\n    handelClosePopover();\n  }, [handelClosePopover]);\n  var handleInsertLibraryImage = function handleInsertLibraryImage(e) {\n    e.nativeEvent.stopImmediatePropagation();\n    e.stopPropagation();\n    var eventBus = _eventBus.default.getInstance();\n    eventBus.dispatch(_eventTypes.EXTERNAL_EVENTS.ON_INSERT_IMAGE, editor.selection);\n    handelClosePopover();\n  };\n  return /*#__PURE__*/_react.default.createElement(_react.Fragment, null, /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"sf-image-popover\",\n    ref: ref\n  }, /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"sf-image-popover-item\",\n    onClick: handleInsertNetworkImage\n  }, t('Insert_network_image')), /*#__PURE__*/_react.default.createElement(\"label\", {\n    htmlFor: \"sf-image-uploader\",\n    className: \"sf-image-popover-item\",\n    onClick: handleClickFileInput\n  }, t('Upload_local_image')), /*#__PURE__*/_react.default.createElement(\"input\", {\n    onClick: handleClickFileInput,\n    onChange: handleUploadLocalImage,\n    type: \"file\",\n    accept: \"image/*\",\n    className: \"sf-image-uploader\",\n    id: \"sf-image-uploader\"\n  }), isSupportInsertSeafileImage && /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"sf-image-popover-item\",\n    onClick: handleInsertLibraryImage\n  }, t('Insert_library_image'))), isShowInternetImageModal && /*#__PURE__*/_react.default.createElement(_imageMenuDialog.default, {\n    editor: editor,\n    onToggleImageDialog: onToggleImageDialog\n  }));\n});\nImageMenuPopover.defaultProps = {};\nvar _default = exports.default = ImageMenuPopover;","map":{"version":3,"names":["_regeneratorRuntime","require","default","_asyncToGenerator","_slicedToArray","_interopRequireDefault","_interopRequireWildcard","Object","defineProperty","exports","value","_react","_reactI18next","_imageMenuDialog","_eventBus","_eventTypes","_helper","_constants","ImageMenuPopover","forwardRef","_ref","ref","editor","handelClosePopover","isSupportInsertSeafileImage","_ref2","useState","_ref3","isShowInternetImageModal","setIsShowInternetImageModal","_ref4","useTranslation","TRANSLATE_NAMESPACE","t","handleInsertNetworkImage","e","stopPropagation","nativeEvent","stopImmediatePropagation","handleClickFileInput","useCallback","target","handleUploadLocalImage","_ref5","mark","_callee","file","wrap","_callee$","_context","prev","next","files","handleUpdateImage","stop","_x","apply","arguments","onToggleImageDialog","handleInsertLibraryImage","eventBus","getInstance","dispatch","EXTERNAL_EVENTS","ON_INSERT_IMAGE","selection","createElement","Fragment","className","onClick","htmlFor","onChange","type","accept","id","defaultProps","_default"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/extension/plugins/image/menu/image-menu-popover.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _reactI18next = require(\"react-i18next\");\nvar _imageMenuDialog = _interopRequireDefault(require(\"./image-menu-dialog\"));\nvar _eventBus = _interopRequireDefault(require(\"../../../../utils/event-bus\"));\nvar _eventTypes = require(\"../../../../constants/event-types\");\nvar _helper = require(\"../helper\");\nvar _constants = require(\"../../../../constants\");\nrequire(\"./style.css\");\nconst ImageMenuPopover = /*#__PURE__*/_react.default.forwardRef((_ref, ref) => {\n  let {\n    editor,\n    handelClosePopover,\n    isSupportInsertSeafileImage\n  } = _ref;\n  const [isShowInternetImageModal, setIsShowInternetImageModal] = (0, _react.useState)(false);\n  const {\n    t\n  } = (0, _reactI18next.useTranslation)(_constants.TRANSLATE_NAMESPACE);\n  const handleInsertNetworkImage = e => {\n    e.stopPropagation();\n    e.nativeEvent.stopImmediatePropagation();\n    setIsShowInternetImageModal(true);\n  };\n  const handleClickFileInput = (0, _react.useCallback)(e => {\n    e.stopPropagation();\n    e.target.value = null;\n    e.nativeEvent.stopImmediatePropagation();\n  }, []);\n  const handleUploadLocalImage = (0, _react.useCallback)(async e => {\n    const file = e.target.files[0];\n    (0, _helper.handleUpdateImage)(editor, file);\n    handelClosePopover();\n  }, [editor, handelClosePopover]);\n  const onToggleImageDialog = (0, _react.useCallback)(() => {\n    setIsShowInternetImageModal(false);\n    handelClosePopover();\n  }, [handelClosePopover]);\n  const handleInsertLibraryImage = e => {\n    e.nativeEvent.stopImmediatePropagation();\n    e.stopPropagation();\n    const eventBus = _eventBus.default.getInstance();\n    eventBus.dispatch(_eventTypes.EXTERNAL_EVENTS.ON_INSERT_IMAGE, editor.selection);\n    handelClosePopover();\n  };\n  return /*#__PURE__*/_react.default.createElement(_react.Fragment, null, /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"sf-image-popover\",\n    ref: ref\n  }, /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"sf-image-popover-item\",\n    onClick: handleInsertNetworkImage\n  }, t('Insert_network_image')), /*#__PURE__*/_react.default.createElement(\"label\", {\n    htmlFor: \"sf-image-uploader\",\n    className: \"sf-image-popover-item\",\n    onClick: handleClickFileInput\n  }, t('Upload_local_image')), /*#__PURE__*/_react.default.createElement(\"input\", {\n    onClick: handleClickFileInput,\n    onChange: handleUploadLocalImage,\n    type: \"file\",\n    accept: \"image/*\",\n    className: \"sf-image-uploader\",\n    id: \"sf-image-uploader\"\n  }), isSupportInsertSeafileImage && /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"sf-image-popover-item\",\n    onClick: handleInsertLibraryImage\n  }, t('Insert_library_image'))), isShowInternetImageModal && /*#__PURE__*/_react.default.createElement(_imageMenuDialog.default, {\n    editor: editor,\n    onToggleImageDialog: onToggleImageDialog\n  }));\n});\nImageMenuPopover.defaultProps = {};\nvar _default = exports.default = ImageMenuPopover;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}