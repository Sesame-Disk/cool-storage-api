{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setBlockQuoteType = exports.isMenuDisabled = exports.getBlockQuoteType = void 0;\nvar _slate = require(\"slate\");\nvar _slugid = _interopRequireDefault(require(\"slugid\"));\nvar _elementTypes = require(\"../../constants/element-types\");\nvar _core = require(\"../../core\");\nvar isMenuDisabled = function isMenuDisabled(editor, readonly) {\n  if (readonly) return true;\n  if (editor.selection == null) return true;\n  var _slate$Editor$nodes = _slate.Editor.nodes(editor, {\n      match: function match(n) {\n        var type = (0, _core.getNodeType)(n);\n\n        // Only available for p and blockquote\n        if (type === _elementTypes.PARAGRAPH) return true;\n        if (type === _elementTypes.BLOCKQUOTE) return true;\n        if (type === _elementTypes.UNORDERED_LIST) return true;\n        if (type === _elementTypes.ORDERED_LIST) return true;\n        if (type === _elementTypes.CHECK_LIST_ITEM) return true;\n        if (type && type.startWith && type.startWith('header')) return true;\n        if (type === _elementTypes.IMAGE) return true;\n        return false;\n      },\n      universal: true,\n      mode: 'highest' // Match top level\n    }),\n    _slate$Editor$nodes2 = _slicedToArray(_slate$Editor$nodes, 1),\n    nodeEntry = _slate$Editor$nodes2[0];\n\n  // Match to p blockquote, do not disable\n  if (nodeEntry) {\n    return false;\n  }\n  return true;\n};\nexports.isMenuDisabled = isMenuDisabled;\nvar getBlockQuoteType = function getBlockQuoteType(editor) {\n  var _slate$Editor$nodes3 = _slate.Editor.nodes(editor, {\n      match: function match(n) {\n        return (0, _core.getNodeType)(n) === _elementTypes.BLOCKQUOTE;\n      },\n      universal: true\n    }),\n    _slate$Editor$nodes4 = _slicedToArray(_slate$Editor$nodes3, 1),\n    match = _slate$Editor$nodes4[0];\n  if (!match) return _elementTypes.PARAGRAPH;\n  var _match = _slicedToArray(match, 1),\n    n = _match[0];\n  return (0, _core.getNodeType)(n);\n};\nexports.getBlockQuoteType = getBlockQuoteType;\nvar setBlockQuoteType = function setBlockQuoteType(editor, active) {\n  if (!active) {\n    var blockquoteNode = {\n      id: _slugid.default.nice(),\n      type: _elementTypes.BLOCKQUOTE\n    };\n    _slate.Transforms.wrapNodes(editor, blockquoteNode, {\n      mode: 'highest',\n      match: function match(n) {\n        return _slate.Element.isElement(n) && _slate.Editor.isBlock(editor, n);\n      }\n    });\n  } else {\n    _slate.Transforms.unwrapNodes(editor, {\n      mode: 'highest',\n      match: function match(n) {\n        return _slate.Element.isElement(n) && _slate.Editor.isBlock(editor, n);\n      }\n    });\n  }\n  (0, _core.focusEditor)(editor);\n};\nexports.setBlockQuoteType = setBlockQuoteType;","map":{"version":3,"names":["_slicedToArray","require","default","_interopRequireDefault","Object","defineProperty","exports","value","setBlockQuoteType","isMenuDisabled","getBlockQuoteType","_slate","_slugid","_elementTypes","_core","editor","readonly","selection","_slate$Editor$nodes","Editor","nodes","match","n","type","getNodeType","PARAGRAPH","BLOCKQUOTE","UNORDERED_LIST","ORDERED_LIST","CHECK_LIST_ITEM","startWith","IMAGE","universal","mode","_slate$Editor$nodes2","nodeEntry","_slate$Editor$nodes3","_slate$Editor$nodes4","_match","active","blockquoteNode","id","nice","Transforms","wrapNodes","Element","isElement","isBlock","unwrapNodes","focusEditor"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/extension/plugins/blockquote/helpers.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setBlockQuoteType = exports.isMenuDisabled = exports.getBlockQuoteType = void 0;\nvar _slate = require(\"slate\");\nvar _slugid = _interopRequireDefault(require(\"slugid\"));\nvar _elementTypes = require(\"../../constants/element-types\");\nvar _core = require(\"../../core\");\nconst isMenuDisabled = (editor, readonly) => {\n  if (readonly) return true;\n  if (editor.selection == null) return true;\n  const [nodeEntry] = _slate.Editor.nodes(editor, {\n    match: n => {\n      const type = (0, _core.getNodeType)(n);\n\n      // Only available for p and blockquote\n      if (type === _elementTypes.PARAGRAPH) return true;\n      if (type === _elementTypes.BLOCKQUOTE) return true;\n      if (type === _elementTypes.UNORDERED_LIST) return true;\n      if (type === _elementTypes.ORDERED_LIST) return true;\n      if (type === _elementTypes.CHECK_LIST_ITEM) return true;\n      if (type && type.startWith && type.startWith('header')) return true;\n      if (type === _elementTypes.IMAGE) return true;\n      return false;\n    },\n    universal: true,\n    mode: 'highest' // Match top level\n  });\n\n  // Match to p blockquote, do not disable\n  if (nodeEntry) {\n    return false;\n  }\n  return true;\n};\nexports.isMenuDisabled = isMenuDisabled;\nconst getBlockQuoteType = editor => {\n  const [match] = _slate.Editor.nodes(editor, {\n    match: n => (0, _core.getNodeType)(n) === _elementTypes.BLOCKQUOTE,\n    universal: true\n  });\n  if (!match) return _elementTypes.PARAGRAPH;\n  const [n] = match;\n  return (0, _core.getNodeType)(n);\n};\nexports.getBlockQuoteType = getBlockQuoteType;\nconst setBlockQuoteType = (editor, active) => {\n  if (!active) {\n    const blockquoteNode = {\n      id: _slugid.default.nice(),\n      type: _elementTypes.BLOCKQUOTE\n    };\n    _slate.Transforms.wrapNodes(editor, blockquoteNode, {\n      mode: 'highest',\n      match: n => _slate.Element.isElement(n) && _slate.Editor.isBlock(editor, n)\n    });\n  } else {\n    _slate.Transforms.unwrapNodes(editor, {\n      mode: 'highest',\n      match: n => _slate.Element.isElement(n) && _slate.Editor.isBlock(editor, n)\n    });\n  }\n  (0, _core.focusEditor)(editor);\n};\nexports.setBlockQuoteType = setBlockQuoteType;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}