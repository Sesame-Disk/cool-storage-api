{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var TreeNode=/*#__PURE__*/function(){function TreeNode(_ref){var name=_ref.name,href=_ref.href,parentNode=_ref.parentNode;_classCallCheck(this,TreeNode);this.name=name;this.href=href;this.parentNode=parentNode||null;this.children=[];}_createClass(TreeNode,[{key:\"setParent\",value:function setParent(parentNode){this.parentNode=parentNode;}},{key:\"addChildren\",value:function addChildren(nodeList){// nodeList.forEach((node) => {\n//   node.setParent(this);\n// });\nthis.children=nodeList;}}]);return TreeNode;}();var setNodePath=function setNodePath(node,parentNodePath){var name=node.name;var path=parentNodePath==='/'?parentNodePath+name:parentNodePath+'/'+name;node.path=path;if(node.children.length>0){node.children.forEach(function(child){setNodePath(child,path);});}};// translate slate_paragraph_node to treeNode\nvar transParagraph=function transParagraph(paragraphNode){var treeNode;if(paragraphNode.children[1]&&paragraphNode.children[1].type==='link'){// paragraph node is a link node\nvar linkNode=paragraphNode.children[1];var textNode=linkNode.children[0];var name=textNode?textNode.text:'';treeNode=new TreeNode({name:name,href:linkNode.url});}else if(paragraphNode.children[0]){// paragraph first child node is a text node, then get node name\nvar _textNode=paragraphNode.children[0];var _name=_textNode.text?_textNode.text:'';treeNode=new TreeNode({name:_name,href:''});}else{treeNode=new TreeNode({name:'',href:''});}return treeNode;};// slateNodes is list items of an unordered list or ordered list, translate them to treeNode and add to parentTreeNode\nvar transSlateToTree=function transSlateToTree(slateNodes,parentTreeNode){var treeNodes=slateNodes.map(function(slateNode){// item has children(unordered list)\nif(slateNode.children.length===2&&(slateNode.children[1].type==='unordered_list'||slateNode.children[1].type==='ordered_list')){// slateNode.nodes[0] is paragraph, create TreeNode, set name and href\nvar paragraphNode=slateNode.children[0];var treeNode=transParagraph(paragraphNode);// slateNode.nodes[1] is list, set it as TreeNode's children\nvar listNode=slateNode.children[1];// Add sub list items to the tree node\nreturn transSlateToTree(listNode.children,treeNode);}else{// item doesn't have children list\nif(slateNode.children[0]&&slateNode.children[0].type==='paragraph'){return transParagraph(slateNode.children[0]);}else{// list item contain table/code_block/blockqupta\nreturn new TreeNode({name:'',href:''});}}});parentTreeNode.addChildren(treeNodes);return parentTreeNode;};export var generateNavItems=function generateNavItems(slateNodes){var treeRoot=new TreeNode({name:'',href:''});slateNodes.forEach(function(node){if(node.type==='unordered_list'||node.type==='ordered_list'){treeRoot=transSlateToTree(node.children,treeRoot);setNodePath(treeRoot,'/');}});return treeRoot;};","map":{"version":3,"names":["TreeNode","_ref","name","href","parentNode","_classCallCheck","children","_createClass","key","value","setParent","addChildren","nodeList","setNodePath","node","parentNodePath","path","length","forEach","child","transParagraph","paragraphNode","treeNode","type","linkNode","textNode","text","url","transSlateToTree","slateNodes","parentTreeNode","treeNodes","map","slateNode","listNode","generateNavItems","treeRoot"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/wiki/utils/generate-navs.js"],"sourcesContent":["class TreeNode {\n\n  constructor({ name, href, parentNode }) {\n    this.name = name;\n    this.href = href;\n    this.parentNode = parentNode || null;\n    this.children = [];\n  }\n\n  setParent(parentNode) {\n    this.parentNode = parentNode;\n  }\n\n  addChildren(nodeList) {\n    // nodeList.forEach((node) => {\n    //   node.setParent(this);\n    // });\n    this.children = nodeList;\n  }\n}\n\nconst setNodePath = (node, parentNodePath) => {\n  let name = node.name;\n  let path = parentNodePath === '/' ? parentNodePath + name : parentNodePath + '/' + name;\n  node.path = path;\n  if (node.children.length > 0) {\n    node.children.forEach(child => {\n      setNodePath(child, path);\n    });\n  }\n};\n\n// translate slate_paragraph_node to treeNode\nconst transParagraph = (paragraphNode) => {\n  let treeNode;\n  if (paragraphNode.children[1] && paragraphNode.children[1].type === 'link') {\n    // paragraph node is a link node\n    const linkNode = paragraphNode.children[1];\n    const textNode = linkNode.children[0];\n    const name = textNode ? textNode.text : '';\n    treeNode = new TreeNode({ name: name, href: linkNode.url });\n  } else if (paragraphNode.children[0]) {\n    // paragraph first child node is a text node, then get node name\n    const textNode = paragraphNode.children[0];\n    const name = textNode.text ? textNode.text : '';\n    treeNode = new TreeNode({ name: name, href: '' });\n  } else {\n    treeNode = new TreeNode({ name: '', href: '' });\n  }\n  return treeNode;\n};\n\n// slateNodes is list items of an unordered list or ordered list, translate them to treeNode and add to parentTreeNode\nconst transSlateToTree = (slateNodes, parentTreeNode) => {\n  let treeNodes = slateNodes.map((slateNode) => {\n    // item has children(unordered list)\n    if (slateNode.children.length === 2 && (slateNode.children[1].type === 'unordered_list' || slateNode.children[1].type === 'ordered_list')) {\n      // slateNode.nodes[0] is paragraph, create TreeNode, set name and href\n      const paragraphNode = slateNode.children[0];\n      const treeNode = transParagraph(paragraphNode);\n      // slateNode.nodes[1] is list, set it as TreeNode's children\n      const listNode = slateNode.children[1];\n      // Add sub list items to the tree node\n      return transSlateToTree(listNode.children, treeNode);\n    } else {\n      // item doesn't have children list\n      if (slateNode.children[0] && (slateNode.children[0].type === 'paragraph')) {\n        return transParagraph(slateNode.children[0]);\n      } else {\n        // list item contain table/code_block/blockqupta\n        return new TreeNode({ name: '', href: '' });\n      }\n    }\n  });\n  parentTreeNode.addChildren(treeNodes);\n  return parentTreeNode;\n};\n\nexport const generateNavItems = (slateNodes) => {\n  let treeRoot = new TreeNode({ name: '', href: '' });\n  slateNodes.forEach((node) => {\n    if (node.type === 'unordered_list' || node.type === 'ordered_list') {\n      treeRoot = transSlateToTree(node.children, treeRoot);\n      setNodePath(treeRoot, '/');\n    }\n  });\n  return treeRoot;\n};\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}