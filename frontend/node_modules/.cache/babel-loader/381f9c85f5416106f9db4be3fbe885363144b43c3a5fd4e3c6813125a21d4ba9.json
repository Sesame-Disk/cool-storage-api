{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Fragment}from'react';import moment from'moment';import{FormGroup,Label,Input,InputGroup,InputGroupAddon,InputGroupText,FormText}from'reactstrap';import{gettext}from'../utils/constants';import{Utils}from'../utils/utils';import DateTimePicker from'./date-and-time-picker';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var inputWidth=Utils.isDesktop()?250:210;var SetLinkExpiration=/*#__PURE__*/function(_React$Component){_inherits(SetLinkExpiration,_React$Component);var _super=_createSuper(SetLinkExpiration);function SetLinkExpiration(props){var _this;_classCallCheck(this,SetLinkExpiration);_this=_super.call(this,props);_this.disabledDate=function(current){if(!current){// allow empty select\nreturn false;}if(_this.isExpireDaysNoLimit){return current.isBefore(moment(),'day');}var _this$props=_this.props,minDays=_this$props.minDays,maxDays=_this$props.maxDays;var startDay=moment().add(minDays,'days');var endDay=moment().add(maxDays,'days');if(minDays!==0&&maxDays!==0){return current.isBefore(startDay,'day')||current.isAfter(endDay,'day');}else if(minDays!==0&&maxDays===0){return current.isBefore(startDay,'day');}else if(minDays===0&&maxDays!==0){return current.isBefore(moment(),'day')||current.isAfter(endDay,'day');}};var _this$props2=_this.props,_minDays=_this$props2.minDays,_maxDays=_this$props2.maxDays,defaultDays=_this$props2.defaultDays;_this.isExpireDaysNoLimit=_minDays===0&&_maxDays===0&&defaultDays==0;var expirationLimitTip='';if(_minDays!==0&&_maxDays!==0){expirationLimitTip=gettext('{minDays_placeholder} - {maxDays_placeholder} days').replace('{minDays_placeholder}',_minDays).replace('{maxDays_placeholder}',_maxDays);}else if(_minDays!==0&&_maxDays===0){expirationLimitTip=gettext('Greater than or equal to {minDays_placeholder} days').replace('{minDays_placeholder}',_minDays);}else if(_minDays===0&&_maxDays!==0){expirationLimitTip=gettext('Less than or equal to {maxDays_placeholder} days').replace('{maxDays_placeholder}',_maxDays);}_this.expirationLimitTip=expirationLimitTip;return _this;}_createClass(SetLinkExpiration,[{key:\"render\",value:function render(){var _this$props3=this.props,expType=_this$props3.expType,setExpType=_this$props3.setExpType,expireDays=_this$props3.expireDays,onExpireDaysChanged=_this$props3.onExpireDaysChanged,expDate=_this$props3.expDate,onExpDateChanged=_this$props3.onExpDateChanged;return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(FormGroup,{check:true,children:[/*#__PURE__*/_jsxs(Label,{check:true,children:[/*#__PURE__*/_jsx(Input,{type:\"radio\",name:\"set-exp\",value:\"by-days\",checked:expType=='by-days',onChange:setExpType,className:\"mr-1\"}),/*#__PURE__*/_jsx(\"span\",{children:gettext('Expiration days')})]}),expType=='by-days'&&/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(InputGroup,{style:{width:inputWidth},children:[/*#__PURE__*/_jsx(Input,{type:\"text\",value:expireDays,onChange:onExpireDaysChanged}),/*#__PURE__*/_jsx(InputGroupAddon,{addonType:\"append\",children:/*#__PURE__*/_jsx(InputGroupText,{children:gettext('days')})})]}),!this.isExpireDaysNoLimit&&/*#__PURE__*/_jsx(FormText,{color:\"muted\",children:this.expirationLimitTip})]})]}),/*#__PURE__*/_jsxs(FormGroup,{check:true,children:[/*#__PURE__*/_jsxs(Label,{check:true,children:[/*#__PURE__*/_jsx(Input,{type:\"radio\",name:\"set-exp\",value:\"by-date\",checked:expType=='by-date',onChange:setExpType,className:\"mr-1\"}),/*#__PURE__*/_jsx(\"span\",{children:gettext('Expiration time')})]}),expType=='by-date'&&/*#__PURE__*/_jsx(DateTimePicker,{inputWidth:inputWidth,disabledDate:this.disabledDate,value:expDate,onChange:onExpDateChanged})]})]});}}]);return SetLinkExpiration;}(React.Component);export default SetLinkExpiration;","map":{"version":3,"names":["React","Fragment","moment","FormGroup","Label","Input","InputGroup","InputGroupAddon","InputGroupText","FormText","gettext","Utils","DateTimePicker","jsx","_jsx","jsxs","_jsxs","inputWidth","isDesktop","SetLinkExpiration","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","disabledDate","current","isExpireDaysNoLimit","isBefore","_this$props","minDays","maxDays","startDay","add","endDay","isAfter","_this$props2","defaultDays","expirationLimitTip","replace","_createClass","key","value","render","_this$props3","expType","setExpType","expireDays","onExpireDaysChanged","expDate","onExpDateChanged","children","check","type","name","checked","onChange","className","style","width","addonType","color","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/set-link-expiration.js"],"sourcesContent":["import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { FormGroup, Label, Input, InputGroup, InputGroupAddon, InputGroupText, FormText } from 'reactstrap';\nimport { gettext } from '../utils/constants';\nimport { Utils } from '../utils/utils';\nimport DateTimePicker from './date-and-time-picker';\n\nconst propTypes = {\n  minDays: PropTypes.number.isRequired,\n  maxDays: PropTypes.number.isRequired,\n  defaultDays: PropTypes.number.isRequired,\n  expType: PropTypes.string.isRequired,\n  setExpType: PropTypes.func.isRequired,\n  expireDays: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number\n  ]),\n  onExpireDaysChanged: PropTypes.func.isRequired,\n  expDate: PropTypes.object,\n  onExpDateChanged: PropTypes.func.isRequired\n};\n\nconst inputWidth = Utils.isDesktop() ? 250 : 210;\n\nclass SetLinkExpiration extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    const { minDays, maxDays, defaultDays } = this.props;\n    this.isExpireDaysNoLimit = (minDays === 0 && maxDays === 0 && defaultDays == 0);\n\n    let expirationLimitTip = '';\n    if (minDays !== 0 && maxDays !== 0) {\n      expirationLimitTip = gettext('{minDays_placeholder} - {maxDays_placeholder} days')\n        .replace('{minDays_placeholder}', minDays)\n        .replace('{maxDays_placeholder}', maxDays);\n    } else if (minDays !== 0 && maxDays === 0) {\n      expirationLimitTip = gettext('Greater than or equal to {minDays_placeholder} days')\n        .replace('{minDays_placeholder}', minDays);\n    } else if (minDays === 0 && maxDays !== 0) {\n      expirationLimitTip = gettext('Less than or equal to {maxDays_placeholder} days')\n        .replace('{maxDays_placeholder}', maxDays);\n    }\n    this.expirationLimitTip = expirationLimitTip;\n  }\n\n  disabledDate = (current) => {\n    if (!current) {\n      // allow empty select\n      return false;\n    }\n\n    if (this.isExpireDaysNoLimit) {\n      return current.isBefore(moment(), 'day');\n    }\n\n    const { minDays, maxDays } = this.props;\n    const startDay = moment().add(minDays, 'days');\n    const endDay = moment().add(maxDays, 'days');\n    if (minDays !== 0 && maxDays !== 0) {\n      return current.isBefore(startDay, 'day') || current.isAfter(endDay, 'day');\n    } else if (minDays !== 0 && maxDays === 0) {\n      return current.isBefore(startDay, 'day');\n    } else if (minDays === 0 && maxDays !== 0) {\n      return current.isBefore(moment(), 'day') || current.isAfter(endDay, 'day');\n    }\n  };\n\n  render() {\n    const {\n      expType, setExpType,\n      expireDays, onExpireDaysChanged,\n      expDate, onExpDateChanged\n    } = this.props;\n    return (\n      <Fragment>\n        <FormGroup check>\n          <Label check>\n            <Input type=\"radio\" name=\"set-exp\" value=\"by-days\" checked={expType == 'by-days'} onChange={setExpType} className=\"mr-1\" />\n            <span>{gettext('Expiration days')}</span>\n          </Label>\n          {expType == 'by-days' && (\n            <Fragment>\n              <InputGroup style={{width: inputWidth}}>\n                <Input type=\"text\" value={expireDays} onChange={onExpireDaysChanged} />\n                <InputGroupAddon addonType=\"append\">\n                  <InputGroupText>{gettext('days')}</InputGroupText>\n                </InputGroupAddon>\n              </InputGroup>\n              {!this.isExpireDaysNoLimit && (\n                <FormText color=\"muted\">{this.expirationLimitTip}</FormText>\n              )}\n            </Fragment>\n          )}\n        </FormGroup>\n        <FormGroup check>\n          <Label check>\n            <Input type=\"radio\" name=\"set-exp\" value=\"by-date\" checked={expType == 'by-date'} onChange={setExpType} className=\"mr-1\" />\n            <span>{gettext('Expiration time')}</span>\n          </Label>\n          {expType == 'by-date' && (\n            <DateTimePicker\n              inputWidth={inputWidth}\n              disabledDate={this.disabledDate}\n              value={expDate}\n              onChange={onExpDateChanged}\n            />\n          )}\n        </FormGroup>\n      </Fragment>\n    );\n  }\n}\n\nSetLinkExpiration.propTypes = propTypes;\n\nexport default SetLinkExpiration;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}