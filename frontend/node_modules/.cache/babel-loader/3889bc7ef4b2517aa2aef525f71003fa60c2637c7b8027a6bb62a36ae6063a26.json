{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{Utils}from'../../utils/utils';import Tree from'./tree';import TreeNode from'./tree-node';import Dirent from'../../models/dirent';var TreeHelper=/*#__PURE__*/function(){function TreeHelper(){_classCallCheck(this,TreeHelper);}_createClass(TreeHelper,[{key:\"expandNode\",value:function expandNode(tree,node){// This tree has been cloned\ntree.expandNode(node);}},{key:\"collapseNode\",value:function collapseNode(tree,node){var treeCopy=tree.clone();node=treeCopy.getNodeByPath(node.path);treeCopy.collapseNode(node);return treeCopy;}},{key:\"findNodeByPath\",value:function findNodeByPath(tree,nodePath){var treeCopy=tree.clone();var node=treeCopy.getNodeByPath(nodePath);return node;}},{key:\"getNodeChildrenObject\",value:function getNodeChildrenObject(tree,node){var sortType=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'name';var order=arguments.length>3&&arguments[3]!==undefined?arguments[3]:'asc';var objects=tree.getNodeChildrenObject(node);objects=Utils.sortDirents(objects,sortType,order);return objects;}},{key:\"addNodeToParent\",value:function addNodeToParent(tree,node,parentNode){tree.addNodeToParentNode(node,parentNode);return tree;}},{key:\"addNodeListToParent\",value:function addNodeListToParent(tree,nodeList,parentNode){tree.addNodeListToParent(nodeList,parentNode);return tree;}},{key:\"addNodeToParentByPath\",value:function addNodeToParentByPath(tree,node,parentPath){var treeCopy=tree.clone();var parentNode=treeCopy.getNodeByPath(parentPath);treeCopy.addNodeToParent(node,parentNode);return treeCopy;}},{key:\"deleteNodeByPath\",value:function deleteNodeByPath(tree,nodePath){var treeCopy=tree.clone();var node=treeCopy.getNodeByPath(nodePath);treeCopy.deleteNode(node);return treeCopy;}},{key:\"deleteNodeListByPaths\",value:function deleteNodeListByPaths(tree,nodePaths){var treeCopy=tree.clone();nodePaths.forEach(function(nodePath){var node=treeCopy.getNodeByPath(nodePath);treeCopy.deleteNode(node);});return treeCopy;}},{key:\"renameNodeByPath\",value:function renameNodeByPath(tree,nodePath,newName){var treeCopy=tree.clone();var node=treeCopy.getNodeByPath(nodePath);treeCopy.renameNode(node,newName);return treeCopy;}},{key:\"updateNodeByPath\",value:function updateNodeByPath(tree,nodePath,keys,newValues){var treeCopy=tree.clone();var node=treeCopy.getNodeByPath(nodePath);treeCopy.updateNode(node,keys,newValues);return treeCopy;}},{key:\"moveNodeByPath\",value:function moveNodeByPath(tree,nodePath,destPath,nodeName){var treeCopy=tree.clone();var node=treeCopy.getNodeByPath(nodePath);var destNode=treeCopy.getNodeByPath(destPath);if(destNode&&node){// node has loaded\nnode.object.name=nodeName;// need not update path\ntreeCopy.moveNode(node,destNode);}if(!destNode&&node){treeCopy.deleteNode(node);}return treeCopy;}},{key:\"moveNodeListByPaths\",value:function moveNodeListByPaths(tree,nodePaths,destPath){var treeCopy=tree.clone();var destNode=treeCopy.getNodeByPath(destPath);if(destNode){nodePaths.forEach(function(nodePath){var node=treeCopy.getNodeByPath(nodePath);treeCopy.moveNode(node,destNode);});}else{nodePaths.forEach(function(nodePath){var node=treeCopy.getNodeByPath(nodePath);treeCopy.delete(node);});}return treeCopy;}},{key:\"copyNodeByPath\",value:function copyNodeByPath(tree,nodePath,destPath,nodeName){var treeCopy=tree.clone();var destNode=treeCopy.getNodeByPath(destPath);var treeNode=treeCopy.getNodeByPath(nodePath);if(destNode){var node=treeNode.clone();// need a dup\nnode.object.name=nodeName;// need not update path\ntreeCopy.copyNode(node,destNode);}return treeCopy;}},{key:\"copyNodeListByPaths\",value:function copyNodeListByPaths(tree,nodePaths,destPath){var treeCopy=tree.clone();var destNode=treeCopy.getNodeByPath(destPath);if(destNode){nodePaths.forEach(function(nodePath){var node=treeCopy.getNodeByPath(nodePath);treeCopy.copyNode(node,destNode);});}return treeCopy;}},{key:\"buildTree\",value:function buildTree(){var tree=new Tree();var object=new Dirent({name:'/'});var root=new TreeNode({object:object,isLoaded:false,isExpanded:true});tree.setRoot(root);return tree;}}]);return TreeHelper;}();var treeHelper=new TreeHelper();export default treeHelper;","map":{"version":3,"names":["Utils","Tree","TreeNode","Dirent","TreeHelper","_classCallCheck","_createClass","key","value","expandNode","tree","node","collapseNode","treeCopy","clone","getNodeByPath","path","findNodeByPath","nodePath","getNodeChildrenObject","sortType","arguments","length","undefined","order","objects","sortDirents","addNodeToParent","parentNode","addNodeToParentNode","addNodeListToParent","nodeList","addNodeToParentByPath","parentPath","deleteNodeByPath","deleteNode","deleteNodeListByPaths","nodePaths","forEach","renameNodeByPath","newName","renameNode","updateNodeByPath","keys","newValues","updateNode","moveNodeByPath","destPath","nodeName","destNode","object","name","moveNode","moveNodeListByPaths","delete","copyNodeByPath","treeNode","copyNode","copyNodeListByPaths","buildTree","root","isLoaded","isExpanded","setRoot","treeHelper"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/tree-view/tree-helper.js"],"sourcesContent":["import { Utils } from '../../utils/utils';\nimport Tree from './tree';\nimport TreeNode from './tree-node';\nimport Dirent from '../../models/dirent';\n\nclass TreeHelper {\n\n  expandNode(tree, node) {  // This tree has been cloned\n    tree.expandNode(node);\n  }\n\n  collapseNode(tree, node) {\n    let treeCopy = tree.clone();\n    node = treeCopy.getNodeByPath(node.path);\n    treeCopy.collapseNode(node);\n    return treeCopy;\n  }\n\n  findNodeByPath(tree, nodePath) {\n    let treeCopy = tree.clone();\n    let node = treeCopy.getNodeByPath(nodePath);\n    return node;\n  }\n\n  getNodeChildrenObject(tree, node, sortType = 'name', order = 'asc') {\n    let objects = tree.getNodeChildrenObject(node);\n    objects = Utils.sortDirents(objects, sortType, order);\n    return objects;\n  }\n\n  addNodeToParent(tree, node, parentNode) {\n    tree.addNodeToParentNode(node, parentNode);\n    return tree;\n  }\n\n  addNodeListToParent(tree, nodeList, parentNode) {\n    tree.addNodeListToParent(nodeList, parentNode);\n    return tree;\n  }\n\n  addNodeToParentByPath(tree, node, parentPath) {\n    let treeCopy = tree.clone();\n    let parentNode = treeCopy.getNodeByPath(parentPath);\n    treeCopy.addNodeToParent(node, parentNode);\n    return treeCopy;\n  }\n\n  deleteNodeByPath(tree, nodePath) {\n    let treeCopy = tree.clone();\n    let node = treeCopy.getNodeByPath(nodePath);\n    treeCopy.deleteNode(node);\n    return treeCopy;\n  }\n\n  deleteNodeListByPaths(tree, nodePaths) {\n    let treeCopy = tree.clone();\n    nodePaths.forEach(nodePath => {\n      let node = treeCopy.getNodeByPath(nodePath);\n      treeCopy.deleteNode(node);\n    });\n    return treeCopy;\n  }\n\n  renameNodeByPath(tree, nodePath, newName) {\n    let treeCopy = tree.clone();\n    let node = treeCopy.getNodeByPath(nodePath);\n    treeCopy.renameNode(node, newName);\n    return treeCopy;\n  }\n\n  updateNodeByPath(tree, nodePath, keys, newValues) {\n    let treeCopy = tree.clone();\n    let node = treeCopy.getNodeByPath(nodePath);\n    treeCopy.updateNode(node, keys, newValues);\n    return treeCopy;\n  }\n\n  moveNodeByPath(tree, nodePath, destPath, nodeName) {\n    let treeCopy = tree.clone();\n    let node = treeCopy.getNodeByPath(nodePath);\n    let destNode = treeCopy.getNodeByPath(destPath);\n    if (destNode && node) {        // node has loaded\n      node.object.name = nodeName; // need not update path\n      treeCopy.moveNode(node, destNode);\n    }\n    if (!destNode && node){\n      treeCopy.deleteNode(node);\n    }\n    return treeCopy;\n  }\n\n  moveNodeListByPaths(tree, nodePaths, destPath) {\n    let treeCopy = tree.clone();\n    let destNode = treeCopy.getNodeByPath(destPath);\n    if (destNode) {\n      nodePaths.forEach(nodePath => {\n        let node = treeCopy.getNodeByPath(nodePath);\n        treeCopy.moveNode(node, destNode);\n      });\n    } else {\n      nodePaths.forEach(nodePath=> {\n        let node = treeCopy.getNodeByPath(nodePath);\n        treeCopy.delete(node);\n      });\n    }\n    return treeCopy;\n  }\n\n  copyNodeByPath(tree, nodePath, destPath, nodeName) {\n    let treeCopy = tree.clone();\n    let destNode = treeCopy.getNodeByPath(destPath);\n    let treeNode = treeCopy.getNodeByPath(nodePath);\n    if (destNode) {\n      let node = treeNode.clone();  // need a dup\n      node.object.name = nodeName;  // need not update path\n      treeCopy.copyNode(node, destNode);\n    }\n    return treeCopy;\n  }\n\n  copyNodeListByPaths(tree, nodePaths, destPath) {\n    let treeCopy = tree.clone();\n    let destNode = treeCopy.getNodeByPath(destPath);\n    if (destNode) {\n      nodePaths.forEach(nodePath => {\n        let node = treeCopy.getNodeByPath(nodePath);\n        treeCopy.copyNode(node, destNode);\n      });\n    }\n    return treeCopy;\n  }\n\n  buildTree() {\n    let tree = new Tree();\n    let object = new Dirent({name: '/'});\n    let root = new TreeNode({object, isLoaded: false, isExpanded: true});\n    tree.setRoot(root);\n    return tree;\n  }\n}\n\nlet treeHelper = new TreeHelper();\n\nexport default treeHelper;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}