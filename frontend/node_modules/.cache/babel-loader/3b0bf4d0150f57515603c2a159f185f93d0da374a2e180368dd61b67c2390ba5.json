{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.htmlDeserializer = void 0;\nvar _slateHyperscript = require(\"slate-hyperscript\");\nvar _elementTypes = require(\"../extension/constants/element-types\");\nvar _model = require(\"../extension/plugins/table/model\");\nvar _core = require(\"../extension/core\");\nvar ELEMENT_TAGS = {\n  A: function A(el) {\n    return {\n      type: _elementTypes.LINK,\n      data: {\n        href: el.getAttribute('href')\n      }\n    };\n  },\n  BLOCKQUOTE: function BLOCKQUOTE() {\n    return {\n      type: _elementTypes.BLOCKQUOTE\n    };\n  },\n  H1: function H1() {\n    return {\n      type: _elementTypes.HEADER1\n    };\n  },\n  H2: function H2() {\n    return {\n      type: _elementTypes.HEADER2\n    };\n  },\n  H3: function H3() {\n    return {\n      type: _elementTypes.HEADER3\n    };\n  },\n  H4: function H4() {\n    return {\n      type: _elementTypes.HEADER4\n    };\n  },\n  H5: function H5() {\n    return {\n      type: _elementTypes.HEADER5\n    };\n  },\n  H6: function H6() {\n    return {\n      type: _elementTypes.HEADER6\n    };\n  },\n  IMG: function IMG(el) {\n    return {\n      type: _elementTypes.IMAGE,\n      children: [{\n        text: ''\n      }],\n      data: {\n        src: el.getAttribute('src')\n      }\n    };\n  },\n  LI: function LI() {\n    return {\n      type: _elementTypes.LIST_ITEM,\n      data: {}\n    };\n  },\n  OL: function OL() {\n    return {\n      type: _elementTypes.ORDERED_LIST\n    };\n  },\n  P: function P() {\n    return {\n      type: _elementTypes.PARAGRAPH\n    };\n  },\n  UL: function UL() {\n    return {\n      type: _elementTypes.UNORDERED_LIST\n    };\n  },\n  TABLE: function TABLE() {\n    return {\n      type: _elementTypes.TABLE\n    };\n  },\n  BR: function BR() {\n    return {\n      text: ''\n    };\n  }\n};\nvar HEADER_LIST = ['H1', 'H2', 'H3', 'H4', 'H5', 'H6'];\nvar TEXT_TAGS = {\n  CODE: function CODE() {\n    return {\n      CODE: true\n    };\n  },\n  DEL: function DEL() {\n    return {\n      DELETE: true\n    };\n  },\n  EM: function EM() {\n    return {\n      ITALIC: true\n    };\n  },\n  I: function I() {\n    return {\n      ITALIC: true\n    };\n  },\n  STRONG: function STRONG() {\n    return {\n      BOLD: true\n    };\n  },\n  INS: function INS() {\n    return {\n      INS: true\n    };\n  }\n};\nvar parseTable = function parseTable(el) {\n  if (el.parentNode.nodeName !== 'BODY') {\n    return null;\n  }\n  var tableWidth = 0;\n  Array.from(el.rows[0].childNodes).forEach(function (cell, index) {\n    if (cell.nodeName === 'TD' || cell.nodeName === 'TH') {\n      tableWidth += Number(cell.getAttribute('colspan')) || 1;\n    }\n  });\n  var rowList = [];\n  for (var rowIndex = 0; rowIndex < el.rows.length; rowIndex++) {\n    var cells = el.rows[rowIndex].cells;\n    var cellsList = [];\n    for (var columnIndex = 0; columnIndex < cells.length; columnIndex++) {\n      var cell = cells[columnIndex];\n      cellsList.push((0, _model.generateTableCell)({\n        childrenOrText: [(0, _core.generateElement)(_elementTypes.PARAGRAPH, {\n          childrenOrText: cell.textContent\n        })]\n      }));\n    }\n    if (cellsList.length < tableWidth) {\n      var count = tableWidth - cellsList.length;\n      for (var i = 0; i < count; i++) {\n        cellsList.push((0, _model.generateTableCell)({\n          childrenOrText: [(0, _core.generateElement)(_elementTypes.PARAGRAPH)]\n        }));\n      }\n    }\n    rowList.push((0, _model.generateTableRow)({\n      childrenOrText: cellsList\n    }));\n  }\n  return rowList;\n};\nvar deserializeHtml = function deserializeHtml(el) {\n  if (el.nodeType === 3) {\n    // remove \\n character\n    if (el.textContent === '\\n' || el.textContent === '\\r') {\n      return null;\n    }\n    if (el.parentElement.nodeName === 'BODY') {\n      var text = el.textContent.replace(/(\\n|\\r\\n)/g, '');\n      if (text.length === 0) return null;\n      return {\n        type: _elementTypes.PARAGRAPH,\n        children: [{\n          text: text\n        }]\n      };\n    }\n    return el.textContent;\n  } else if (el.nodeType !== 1) {\n    return null;\n  }\n  var nodeName = el.nodeName;\n  var parent = el;\n  var children = Array.from(parent.childNodes).map(deserializeHtml).flat();\n\n  // deserialize task list\n  if (nodeName === 'LI') {\n    if (el.className && el.className.indexOf('task-list-item') >= 0) {\n      return (0, _slateHyperscript.jsx)('element', {\n        data: {\n          checked: false\n        },\n        type: 'list_item'\n      }, children);\n    }\n  }\n  if (nodeName === 'PRE' && el.childNodes[0] && el.childNodes[0].nodeName === 'CODE') {\n    // deserialize code block\n    var code = el.childNodes[0];\n    var codeChildren = [];\n    code.childNodes.forEach(function (codeLine, index) {\n      if (codeLine.innerText) {\n        codeChildren.push({\n          type: 'code_line',\n          children: [{\n            text: codeLine.innerText\n          }]\n        });\n      }\n    });\n    return {\n      data: {\n        syntax: null\n      },\n      children: codeChildren,\n      type: 'code_block'\n    };\n  }\n  if (el.nodeName === 'BODY') {\n    return (0, _slateHyperscript.jsx)('fragment', {}, children);\n  }\n  if (ELEMENT_TAGS[nodeName]) {\n    var attrs = ELEMENT_TAGS[nodeName](el);\n    if (nodeName === 'IMG') {\n      return (0, _slateHyperscript.jsx)('element', attrs, [{\n        text: ''\n      }]);\n    }\n\n    // modify BR into an empty text node\n    if (nodeName === 'BR') {\n      return '';\n    }\n    if (nodeName === 'TABLE') {\n      return (0, _slateHyperscript.jsx)('element', attrs, parseTable(el));\n    }\n    if (nodeName === 'A' || HEADER_LIST.includes(nodeName)) {\n      return (0, _slateHyperscript.jsx)('element', attrs, [{\n        text: el.textContent\n      }]);\n    }\n    return (0, _slateHyperscript.jsx)('element', attrs, children);\n  }\n  if (TEXT_TAGS[nodeName]) {\n    var _attrs = TEXT_TAGS[nodeName](el);\n    return children.map(function (child) {\n      return (0, _slateHyperscript.jsx)('text', _attrs, child);\n    });\n  }\n  return children;\n};\nvar htmlDeserializer = function htmlDeserializer(html) {\n  var parsed = new DOMParser().parseFromString(html, 'text/html');\n  return deserializeHtml(parsed.body);\n};\nexports.htmlDeserializer = htmlDeserializer;","map":{"version":3,"names":["Object","defineProperty","exports","value","htmlDeserializer","_slateHyperscript","require","_elementTypes","_model","_core","ELEMENT_TAGS","A","el","type","LINK","data","href","getAttribute","BLOCKQUOTE","H1","HEADER1","H2","HEADER2","H3","HEADER3","H4","HEADER4","H5","HEADER5","H6","HEADER6","IMG","IMAGE","children","text","src","LI","LIST_ITEM","OL","ORDERED_LIST","P","PARAGRAPH","UL","UNORDERED_LIST","TABLE","BR","HEADER_LIST","TEXT_TAGS","CODE","DEL","DELETE","EM","ITALIC","I","STRONG","BOLD","INS","parseTable","parentNode","nodeName","tableWidth","Array","from","rows","childNodes","forEach","cell","index","Number","rowList","rowIndex","length","cells","cellsList","columnIndex","push","generateTableCell","childrenOrText","generateElement","textContent","count","i","generateTableRow","deserializeHtml","nodeType","parentElement","replace","parent","map","flat","className","indexOf","jsx","checked","code","codeChildren","codeLine","innerText","syntax","attrs","includes","child","html","parsed","DOMParser","parseFromString","body"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/utils/deserialize-html.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.htmlDeserializer = void 0;\nvar _slateHyperscript = require(\"slate-hyperscript\");\nvar _elementTypes = require(\"../extension/constants/element-types\");\nvar _model = require(\"../extension/plugins/table/model\");\nvar _core = require(\"../extension/core\");\nconst ELEMENT_TAGS = {\n  A: el => ({\n    type: _elementTypes.LINK,\n    data: {\n      href: el.getAttribute('href')\n    }\n  }),\n  BLOCKQUOTE: () => ({\n    type: _elementTypes.BLOCKQUOTE\n  }),\n  H1: () => ({\n    type: _elementTypes.HEADER1\n  }),\n  H2: () => ({\n    type: _elementTypes.HEADER2\n  }),\n  H3: () => ({\n    type: _elementTypes.HEADER3\n  }),\n  H4: () => ({\n    type: _elementTypes.HEADER4\n  }),\n  H5: () => ({\n    type: _elementTypes.HEADER5\n  }),\n  H6: () => ({\n    type: _elementTypes.HEADER6\n  }),\n  IMG: el => ({\n    type: _elementTypes.IMAGE,\n    children: [{\n      text: ''\n    }],\n    data: {\n      src: el.getAttribute('src')\n    }\n  }),\n  LI: () => ({\n    type: _elementTypes.LIST_ITEM,\n    data: {}\n  }),\n  OL: () => ({\n    type: _elementTypes.ORDERED_LIST\n  }),\n  P: () => ({\n    type: _elementTypes.PARAGRAPH\n  }),\n  UL: () => ({\n    type: _elementTypes.UNORDERED_LIST\n  }),\n  TABLE: () => ({\n    type: _elementTypes.TABLE\n  }),\n  BR: () => ({\n    text: ''\n  })\n};\nconst HEADER_LIST = ['H1', 'H2', 'H3', 'H4', 'H5', 'H6'];\nconst TEXT_TAGS = {\n  CODE: () => ({\n    CODE: true\n  }),\n  DEL: () => ({\n    DELETE: true\n  }),\n  EM: () => ({\n    ITALIC: true\n  }),\n  I: () => ({\n    ITALIC: true\n  }),\n  STRONG: () => ({\n    BOLD: true\n  }),\n  INS: () => ({\n    INS: true\n  })\n};\nconst parseTable = el => {\n  if (el.parentNode.nodeName !== 'BODY') {\n    return null;\n  }\n  let tableWidth = 0;\n  Array.from(el.rows[0].childNodes).forEach((cell, index) => {\n    if (cell.nodeName === 'TD' || cell.nodeName === 'TH') {\n      tableWidth += Number(cell.getAttribute('colspan')) || 1;\n    }\n  });\n  let rowList = [];\n  for (let rowIndex = 0; rowIndex < el.rows.length; rowIndex++) {\n    let cells = el.rows[rowIndex].cells;\n    const cellsList = [];\n    for (let columnIndex = 0; columnIndex < cells.length; columnIndex++) {\n      const cell = cells[columnIndex];\n      cellsList.push((0, _model.generateTableCell)({\n        childrenOrText: [(0, _core.generateElement)(_elementTypes.PARAGRAPH, {\n          childrenOrText: cell.textContent\n        })]\n      }));\n    }\n    if (cellsList.length < tableWidth) {\n      let count = tableWidth - cellsList.length;\n      for (let i = 0; i < count; i++) {\n        cellsList.push((0, _model.generateTableCell)({\n          childrenOrText: [(0, _core.generateElement)(_elementTypes.PARAGRAPH)]\n        }));\n      }\n    }\n    rowList.push((0, _model.generateTableRow)({\n      childrenOrText: cellsList\n    }));\n  }\n  return rowList;\n};\nconst deserializeHtml = el => {\n  if (el.nodeType === 3) {\n    // remove \\n character\n    if (el.textContent === '\\n' || el.textContent === '\\r') {\n      return null;\n    }\n    if (el.parentElement.nodeName === 'BODY') {\n      let text = el.textContent.replace(/(\\n|\\r\\n)/g, '');\n      if (text.length === 0) return null;\n      return {\n        type: _elementTypes.PARAGRAPH,\n        children: [{\n          text\n        }]\n      };\n    }\n    return el.textContent;\n  } else if (el.nodeType !== 1) {\n    return null;\n  }\n  const {\n    nodeName\n  } = el;\n  let parent = el;\n  let children = Array.from(parent.childNodes).map(deserializeHtml).flat();\n\n  // deserialize task list\n  if (nodeName === 'LI') {\n    if (el.className && el.className.indexOf('task-list-item') >= 0) {\n      return (0, _slateHyperscript.jsx)('element', {\n        data: {\n          checked: false\n        },\n        type: 'list_item'\n      }, children);\n    }\n  }\n  if (nodeName === 'PRE' && el.childNodes[0] && el.childNodes[0].nodeName === 'CODE') {\n    // deserialize code block\n    const code = el.childNodes[0];\n    const codeChildren = [];\n    code.childNodes.forEach((codeLine, index) => {\n      if (codeLine.innerText) {\n        codeChildren.push({\n          type: 'code_line',\n          children: [{\n            text: codeLine.innerText\n          }]\n        });\n      }\n    });\n    return {\n      data: {\n        syntax: null\n      },\n      children: codeChildren,\n      type: 'code_block'\n    };\n  }\n  if (el.nodeName === 'BODY') {\n    return (0, _slateHyperscript.jsx)('fragment', {}, children);\n  }\n  if (ELEMENT_TAGS[nodeName]) {\n    const attrs = ELEMENT_TAGS[nodeName](el);\n    if (nodeName === 'IMG') {\n      return (0, _slateHyperscript.jsx)('element', attrs, [{\n        text: ''\n      }]);\n    }\n\n    // modify BR into an empty text node\n    if (nodeName === 'BR') {\n      return '';\n    }\n    if (nodeName === 'TABLE') {\n      return (0, _slateHyperscript.jsx)('element', attrs, parseTable(el));\n    }\n    if (nodeName === 'A' || HEADER_LIST.includes(nodeName)) {\n      return (0, _slateHyperscript.jsx)('element', attrs, [{\n        text: el.textContent\n      }]);\n    }\n    return (0, _slateHyperscript.jsx)('element', attrs, children);\n  }\n  if (TEXT_TAGS[nodeName]) {\n    const attrs = TEXT_TAGS[nodeName](el);\n    return children.map(child => (0, _slateHyperscript.jsx)('text', attrs, child));\n  }\n  return children;\n};\nconst htmlDeserializer = html => {\n  const parsed = new DOMParser().parseFromString(html, 'text/html');\n  return deserializeHtml(parsed.body);\n};\nexports.htmlDeserializer = htmlDeserializer;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}