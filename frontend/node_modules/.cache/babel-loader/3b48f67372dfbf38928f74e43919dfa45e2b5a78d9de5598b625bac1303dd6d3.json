{"ast":null,"code":"import _objectSpread from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint-disable */import React,{useState,useRef,useEffect}from'react';import{gettext}from'../utils/constants';import{FormGroup}from'reactstrap';import ShareLinkPanel from'./share-link-panel';import RenderShareButtons from'./share-social-media';import ChinaShareInfo from'./china-share-info';import'./css.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function GenerateShareLinkWithPassword(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var panelRef=useRef(null);// Contar solo los links de China (que tienen password)\nvar chinaLinksCount=(props.shareLinks||[]).filter(function(link){return link.password&&link.password!=='';}).length;// Determinar el texto del bot√≥n seg√∫n si hay links o no\nvar getButtonText=function getButtonText(){if(show){return'‚ñº Hide';}if(chinaLinksCount===0){return'‚ñ∂ Create Password-Protected Link';}if(chinaLinksCount===1){return\"\\u25B6 View Link (\".concat(chinaLinksCount,\")\");}return\"\\u25B6 View Links (\".concat(chinaLinksCount,\")\");};// Manejar el click del bot√≥n con l√≥gica inteligente\nvar handleToggle=function handleToggle(e){e.preventDefault();if(chinaLinksCount===0&&!show){// Si no hay links, abrir panel Y activar modo creaci√≥n\nsetShow(true);// Usar setTimeout para asegurarse de que el panel se ha renderizado\nsetTimeout(function(){if(panelRef.current&&panelRef.current.setMode){panelRef.current.setMode('singleLinkCreation');}},0);}else{// Si hay links o ya est√° abierto, solo expandir/colapsar\nsetShow(!show);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"china-share-wrapper\",children:[chinaLinksCount==0&&/*#__PURE__*/_jsx(ChinaShareInfo,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"china-share-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"china-share-title\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"china-flag-icon\",children:\"\\uD83C\\uDDE8\\uD83C\\uDDF3\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"china-title-text\",children:[gettext('Share in China'),/*#__PURE__*/_jsxs(\"small\",{style:{display:'block',fontSize:'11px',opacity:0.7,fontWeight:'normal',marginTop:'2px'},children:[\"\\uD83D\\uDD0D \",gettext('Filtered view: password-protected links')]})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"china-toggle-btn\",onClick:handleToggle,\"aria-expanded\":show,children:getButtonText()})]}),show&&/*#__PURE__*/_jsxs(\"div\",{className:\"china-share-panel\",children:[chinaLinksCount===0&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:'12px',background:'#f0f8ff',borderRadius:'4px',marginBottom:'12px',fontSize:'13px',color:'#666'},children:[\"\\u2139\\uFE0F \",gettext('Create your first password-protected link to share with users in China')]}),/*#__PURE__*/_jsx(ShareLinkPanel,_objectSpread(_objectSpread({},props),{},{hideBatchButton:true,ref:panelRef}))]}),/*#__PURE__*/_jsxs(FormGroup,{className:\"mb-0 mt-3\",children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-secondary font-weight-normal\",children:gettext('Share in social media:')}),/*#__PURE__*/_jsx(\"dd\",{children:/*#__PURE__*/_jsx(RenderShareButtons,_objectSpread({},props))})]})]});}export default GenerateShareLinkWithPassword;","map":{"version":3,"names":["React","useState","useRef","useEffect","gettext","FormGroup","ShareLinkPanel","RenderShareButtons","ChinaShareInfo","jsx","_jsx","jsxs","_jsxs","GenerateShareLinkWithPassword","props","_useState","_useState2","_slicedToArray","show","setShow","panelRef","chinaLinksCount","shareLinks","filter","link","password","length","getButtonText","concat","handleToggle","e","preventDefault","setTimeout","current","setMode","className","children","style","display","fontSize","opacity","fontWeight","marginTop","onClick","padding","background","borderRadius","marginBottom","color","_objectSpread","hideBatchButton","ref"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/services/generate-share-link-with-password.js"],"sourcesContent":["/* eslint-disable */\nimport React, { useState, useRef, useEffect } from 'react';\nimport { gettext } from '../utils/constants';\nimport { FormGroup } from 'reactstrap';\nimport ShareLinkPanel from './share-link-panel';\nimport RenderShareButtons from './share-social-media';\nimport ChinaShareInfo from './china-share-info';\nimport './css.css';\n\nfunction GenerateShareLinkWithPassword(props) {\n  const [show, setShow] = useState(false);\n  const panelRef = useRef(null);\n\n  // Contar solo los links de China (que tienen password)\n  const chinaLinksCount = (props.shareLinks || []).filter(link => link.password && link.password !== '').length;\n\n  // Determinar el texto del bot√≥n seg√∫n si hay links o no\n  const getButtonText = () => {\n    if (show) {\n      return '‚ñº Hide';\n    }\n    if (chinaLinksCount === 0) {\n      return '‚ñ∂ Create Password-Protected Link';\n    }\n    if (chinaLinksCount === 1) {\n      return `‚ñ∂ View Link (${chinaLinksCount})`;\n    }\n    return `‚ñ∂ View Links (${chinaLinksCount})`;\n  };\n\n  // Manejar el click del bot√≥n con l√≥gica inteligente\n  const handleToggle = (e) => {\n    e.preventDefault();\n\n    if (chinaLinksCount === 0 && !show) {\n      // Si no hay links, abrir panel Y activar modo creaci√≥n\n      setShow(true);\n      // Usar setTimeout para asegurarse de que el panel se ha renderizado\n      setTimeout(() => {\n        if (panelRef.current && panelRef.current.setMode) {\n          panelRef.current.setMode('singleLinkCreation');\n        }\n      }, 0);\n    } else {\n      // Si hay links o ya est√° abierto, solo expandir/colapsar\n      setShow(!show);\n    }\n  };\n\n  return (\n    <div className=\"china-share-wrapper\">\n      {/* Alert informativo de China */}\n      {chinaLinksCount == 0 && <ChinaShareInfo />}\n\n      {/* T√≠tulo simple para China */}\n      <div className=\"china-share-header\">\n        <div className=\"china-share-title\">\n          <span className=\"china-flag-icon\">üá®üá≥</span>\n          <span className=\"china-title-text\">\n            {gettext('Share in China')}\n            <small style={{ display: 'block', fontSize: '11px', opacity: 0.7, fontWeight: 'normal', marginTop: '2px' }}>\n              üîç {gettext('Filtered view: password-protected links')}\n            </small>\n          </span>\n        </div>\n        <button\n          className=\"china-toggle-btn\"\n          onClick={handleToggle}\n          aria-expanded={show}\n        >\n          {getButtonText()}\n        </button>\n      </div>\n\n      {/* Panel de generaci√≥n de links para China */}\n      {show && (\n        <div className=\"china-share-panel\">\n          {chinaLinksCount === 0 && (\n            <div style={{\n              padding: '12px',\n              background: '#f0f8ff',\n              borderRadius: '4px',\n              marginBottom: '12px',\n              fontSize: '13px',\n              color: '#666'\n            }}>\n              ‚ÑπÔ∏è {gettext('Create your first password-protected link to share with users in China')}\n            </div>\n          )}\n          <ShareLinkPanel {...props} hideBatchButton={true} ref={panelRef} />\n        </div>\n      )}\n\n      {/* Redes sociales */}\n      <FormGroup className=\"mb-0 mt-3\">\n        <dt className=\"text-secondary font-weight-normal\">{gettext('Share in social media:')}</dt>\n        <dd><RenderShareButtons {...props} /></dd>\n      </FormGroup>\n    </div>\n  );\n}\n\nexport default GenerateShareLinkWithPassword;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}