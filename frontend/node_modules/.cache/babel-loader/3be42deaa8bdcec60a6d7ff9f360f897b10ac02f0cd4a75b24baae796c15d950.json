{"ast":null,"code":"import _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport classnames from 'classnames';\nimport { Editor, Path, Transforms } from '@seafile/slate';\nimport { ReactEditor, useSlateStatic } from '@seafile/slate-react';\nimport SideMenu from './side-menu';\nimport EventBus from '../../../utils/event-bus';\nimport { useScrollContext } from '../../../hooks/use-scroll-context';\nimport { focusEditor } from '../../core';\nimport { getDomTopHeight, setSelection, isVoidNode, getNodeEntry, isBlockquote, isList, onWrapListItem } from './helpers';\nimport { insertImageFiles } from '../../plugins/image/helpers';\nimport { INTERNAL_EVENT } from '../../../constants';\nimport { CODE_BLOCK, TABLE, BLOCKQUOTE, CHECK_LIST_ITEM, CALL_OUT, TABLE_DRAG_KEY } from '../../constants';\nimport { getCalloutEntry } from '../../plugins/callout/helper';\nimport './index.css';\nvar sourceElement = null;\nvar targetElement = null;\nvar SideToolbar = function SideToolbar() {\n  var editor = useSlateStatic();\n  var scrollRef = useScrollContext();\n  var menuRef = useRef(null);\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    slateNode = _useState2[0],\n    setSlateNode = _useState2[1];\n  var _useState3 = useState({}),\n    _useState4 = _slicedToArray(_useState3, 2),\n    sidePosition = _useState4[0],\n    setSidePosition = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    isNodeEmpty = _useState6[0],\n    setNodeEmpty = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    isShowSideMenu = _useState8[0],\n    setShowSideMenu = _useState8[1];\n  var _useState9 = useState({}),\n    _useState10 = _slicedToArray(_useState9, 2),\n    menuPosition = _useState10[0],\n    setMenuPosition = _useState10[1];\n  var onReset = useCallback(function () {\n    setShowSideMenu(false);\n    setMenuPosition({});\n    setSlateNode(null);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useEffect(function () {\n    var observerRefValue;\n    if (isShowSideMenu) {\n      scrollRef.current.addEventListener('scroll', onReset);\n      observerRefValue = scrollRef.current;\n    } else {\n      scrollRef.current.removeEventListener('scroll', onReset);\n      observerRefValue = null;\n    }\n    return function () {\n      if (observerRefValue) {\n        observerRefValue.removeEventListener('scroll', onReset);\n        focusEditor(editor);\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isShowSideMenu]);\n  useEffect(function () {\n    var handleMouseEnter = function handleMouseEnter(e) {\n      if (isShowSideMenu) return;\n      var dom = e.target;\n      while (((_dom = dom) === null || _dom === void 0 ? void 0 : (_dom$dataset = _dom.dataset) === null || _dom$dataset === void 0 ? void 0 : _dom$dataset.root) !== 'true') {\n        var _dom, _dom$dataset;\n        if (!dom.parentNode) return;\n        dom = dom.parentNode;\n      }\n      var node = ReactEditor.toSlateNode(editor, dom);\n      var top = getDomTopHeight(editor, dom, node);\n      var isEmpty = isVoidNode(node);\n      setSidePosition({\n        top: top + scrollRef.current.scrollTop,\n        left: 20\n      });\n      setSlateNode(node);\n      setNodeEmpty(isEmpty);\n    };\n    var eventBus = EventBus.getInstance();\n    var unSubscribeMouseEnter = eventBus.subscribe(INTERNAL_EVENT.ON_MOUSE_ENTER_BLOCK, handleMouseEnter);\n    return unSubscribeMouseEnter;\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [editor, isShowSideMenu, scrollRef]);\n  var onShowSideMenuToggle = useCallback(function () {\n    setSelection(editor, slateNode);\n    var _menuRef$current$getB = menuRef.current.getBoundingClientRect(),\n      top = _menuRef$current$getB.top,\n      left = _menuRef$current$getB.left;\n    setShowSideMenu(!isShowSideMenu);\n    setMenuPosition({\n      top: top,\n      left: left\n    });\n  }, [editor, isShowSideMenu, slateNode]);\n  var dragStart = useCallback(function (event) {\n    sourceElement = ReactEditor.toDOMNode(editor, slateNode);\n    var path = ReactEditor.findPath(editor, slateNode);\n\n    // Dragging the first element within the blockquote drags the entire blockquote by default.\n    if (isBlockquote(editor, [path[0]]) && path.slice(1).every(function (p) {\n      return p === 0;\n    })) {\n      var nodeEntry = Editor.node(editor, [path[0]]);\n      sourceElement = ReactEditor.toDOMNode(editor, nodeEntry[0]);\n    }\n    event.dataTransfer.setDragImage(sourceElement, 0, 0);\n  }, [editor, slateNode]);\n  var dragOver = useCallback(function (event) {\n    var overElement = event.currentTarget;\n    if (!overElement.classList.contains('sdoc-draging')) {\n      overElement.classList.add('sdoc-draging');\n    }\n  }, []);\n  var dragLeave = useCallback(function (event) {\n    var leaveElement = event.currentTarget;\n    leaveElement.classList.remove('sdoc-draging');\n  }, []);\n  var drop = useCallback(function (event) {\n    var dragTypes = event.dataTransfer.types;\n    targetElement = event.currentTarget;\n    targetElement.classList.remove('sdoc-draging');\n    // Prevent dragging table data to the editor\n    if (dragTypes.includes(TABLE_DRAG_KEY)) return;\n    // Drag local image files to sdoc\n    if (event.dataTransfer.files.length > 0) {\n      var _getNodeEntry = getNodeEntry(editor, targetElement),\n        _getNodeEntry2 = _slicedToArray(_getNodeEntry, 2),\n        _targetPath = _getNodeEntry2[1];\n      insertImageFiles(event.dataTransfer.files, editor, _targetPath);\n      return;\n    }\n    var _getNodeEntry3 = getNodeEntry(editor, sourceElement),\n      _getNodeEntry4 = _slicedToArray(_getNodeEntry3, 2),\n      sourceNode = _getNodeEntry4[0],\n      sourcePath = _getNodeEntry4[1];\n    var _getNodeEntry5 = getNodeEntry(editor, targetElement),\n      _getNodeEntry6 = _slicedToArray(_getNodeEntry5, 2),\n      targetPath = _getNodeEntry6[1];\n\n    // Dragging into a quoteBlock is not supported\n    if ([CODE_BLOCK, TABLE, BLOCKQUOTE].includes(sourceNode.type) && isBlockquote(editor, [targetPath[0]]) && targetPath.length > 1) {\n      return;\n    }\n\n    // Dragging into a list is not supported\n    if ([CODE_BLOCK, TABLE, BLOCKQUOTE, CHECK_LIST_ITEM].includes(sourceNode.type) && isList(editor, targetPath)) {\n      return;\n    }\n\n    // Drag into callout is not supported\n    if ([CALL_OUT, CODE_BLOCK, TABLE].includes(sourceNode.type) && getCalloutEntry(editor, targetPath)) {\n      return;\n    }\n\n    // Drag list\n    if (isList(editor, sourcePath)) {\n      // ordinary list items\n      if (!isBlockquote(editor, [sourcePath[0]])) {\n        // Drag ordinary list items to places other than list and quoteBlock\n        if (!isList(editor, targetPath) && !isBlockquote(editor, [targetPath[0]])) {\n          onWrapListItem(editor, targetPath, sourcePath);\n          return;\n        }\n\n        // Drag ordinary list items into the quoteBlock\n        if (isBlockquote(editor, [targetPath[0]])) {\n          // Drag and drop ordinary list items onto the list within the quoteBlock\n          if (isList(editor, targetPath)) {\n            Transforms.moveNodes(editor, {\n              at: sourcePath,\n              to: Path.next(targetPath)\n            });\n            return;\n          }\n          onWrapListItem(editor, targetPath, sourcePath);\n          return;\n        }\n      }\n\n      // quoteBlock list items\n      if (isBlockquote(editor, [sourcePath[0]])) {\n        // Drag quoteBlock list items to places other than list and quoteBlock\n        if (!isList(editor, targetPath) && !isBlockquote(editor, [targetPath[0]])) {\n          onWrapListItem(editor, targetPath, sourcePath);\n          return;\n        }\n\n        // Drag quoteBlock list items into the quoteBlock\n        if (isBlockquote(editor, [targetPath[0]])) {\n          // Drag and drop ordinary list items onto the list within the quoteBlock\n          if (isList(editor, targetPath)) {\n            Transforms.moveNodes(editor, {\n              at: sourcePath,\n              to: Path.next(targetPath)\n            });\n            return;\n          }\n          onWrapListItem(editor, targetPath, sourcePath);\n          return;\n        }\n      }\n    }\n\n    // Drag backward\n    if (Path.isAfter(targetPath, sourcePath)) {\n      var toPath = targetPath.slice(0);\n\n      // Drag elements outside the quoteBlock into the quoteBlock\n      if (!isBlockquote(editor, [sourcePath[0]]) && isBlockquote(editor, [targetPath[0]]) && targetPath.length > 1) {\n        toPath = Path.next(targetPath);\n      }\n\n      // Drag into list\n      if (isList(editor, targetPath)) {\n        toPath = Path.next(targetPath);\n      }\n      Transforms.moveNodes(editor, {\n        at: sourcePath,\n        to: toPath\n      });\n    }\n\n    // Drag forward\n    if (Path.isBefore(targetPath, sourcePath)) {\n      var _toPath = Path.next(targetPath);\n      Transforms.moveNodes(editor, {\n        at: sourcePath,\n        to: _toPath\n      });\n    }\n\n    // reset\n    sourceElement = null;\n    targetElement = null;\n  }, [editor]);\n  useEffect(function () {\n    var eventBus = EventBus.getInstance();\n    var unSubscribeDragOver = eventBus.subscribe(INTERNAL_EVENT.ON_DRAG_OVER_BLOCK, dragOver);\n    var unSubscribeDragLeave = eventBus.subscribe(INTERNAL_EVENT.ON_DRAG_LEAVE_BLOCK, dragLeave);\n    var unSubscribeDrop = eventBus.subscribe(INTERNAL_EVENT.ON_DRAG_DROP_BLOCK, drop);\n    return function () {\n      unSubscribeDragOver();\n      unSubscribeDragLeave();\n      unSubscribeDrop();\n    };\n  }, [dragLeave, dragOver, drop]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-side-toolbar-container\",\n    style: sidePosition\n  }, slateNode && /*#__PURE__*/React.createElement(\"div\", {\n    ref: menuRef,\n    draggable: true,\n    onDragStart: dragStart,\n    className: \"sdoc-side-op-icon\",\n    onClick: onShowSideMenuToggle\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: classnames('sdocfont', {\n      'sdoc-more-vertical': !isNodeEmpty,\n      'sdoc-append': isNodeEmpty\n    })\n  })), isShowSideMenu && /*#__PURE__*/React.createElement(SideMenu, {\n    slateNode: slateNode,\n    isNodeEmpty: isNodeEmpty,\n    menuPosition: menuPosition,\n    onReset: onReset\n  }));\n};\nexport default SideToolbar;","map":{"version":3,"names":["React","useCallback","useEffect","useRef","useState","classnames","Editor","Path","Transforms","ReactEditor","useSlateStatic","SideMenu","EventBus","useScrollContext","focusEditor","getDomTopHeight","setSelection","isVoidNode","getNodeEntry","isBlockquote","isList","onWrapListItem","insertImageFiles","INTERNAL_EVENT","CODE_BLOCK","TABLE","BLOCKQUOTE","CHECK_LIST_ITEM","CALL_OUT","TABLE_DRAG_KEY","getCalloutEntry","sourceElement","targetElement","SideToolbar","editor","scrollRef","menuRef","_useState","_useState2","_slicedToArray","slateNode","setSlateNode","_useState3","_useState4","sidePosition","setSidePosition","_useState5","_useState6","isNodeEmpty","setNodeEmpty","_useState7","_useState8","isShowSideMenu","setShowSideMenu","_useState9","_useState10","menuPosition","setMenuPosition","onReset","observerRefValue","current","addEventListener","removeEventListener","handleMouseEnter","e","dom","target","_dom","_dom$dataset","dataset","root","parentNode","node","toSlateNode","top","isEmpty","scrollTop","left","eventBus","getInstance","unSubscribeMouseEnter","subscribe","ON_MOUSE_ENTER_BLOCK","onShowSideMenuToggle","_menuRef$current$getB","getBoundingClientRect","dragStart","event","toDOMNode","path","findPath","slice","every","p","nodeEntry","dataTransfer","setDragImage","dragOver","overElement","currentTarget","classList","contains","add","dragLeave","leaveElement","remove","drop","dragTypes","types","includes","files","length","_getNodeEntry","_getNodeEntry2","targetPath","_getNodeEntry3","_getNodeEntry4","sourceNode","sourcePath","_getNodeEntry5","_getNodeEntry6","type","moveNodes","at","to","next","isAfter","toPath","isBefore","unSubscribeDragOver","ON_DRAG_OVER_BLOCK","unSubscribeDragLeave","ON_DRAG_LEAVE_BLOCK","unSubscribeDrop","ON_DRAG_DROP_BLOCK","createElement","className","style","ref","draggable","onDragStart","onClick"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/extension/toolbar/side-toolbar/index.js"],"sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport classnames from 'classnames';\nimport { Editor, Path, Transforms } from '@seafile/slate';\nimport { ReactEditor, useSlateStatic } from '@seafile/slate-react';\nimport SideMenu from './side-menu';\nimport EventBus from '../../../utils/event-bus';\nimport { useScrollContext } from '../../../hooks/use-scroll-context';\nimport { focusEditor } from '../../core';\nimport { getDomTopHeight, setSelection, isVoidNode, getNodeEntry, isBlockquote, isList, onWrapListItem } from './helpers';\nimport { insertImageFiles } from '../../plugins/image/helpers';\nimport { INTERNAL_EVENT } from '../../../constants';\nimport { CODE_BLOCK, TABLE, BLOCKQUOTE, CHECK_LIST_ITEM, CALL_OUT, TABLE_DRAG_KEY } from '../../constants';\nimport { getCalloutEntry } from '../../plugins/callout/helper';\nimport './index.css';\nlet sourceElement = null;\nlet targetElement = null;\nconst SideToolbar = () => {\n  const editor = useSlateStatic();\n  const scrollRef = useScrollContext();\n  const menuRef = useRef(null);\n  const [slateNode, setSlateNode] = useState(null);\n  const [sidePosition, setSidePosition] = useState({});\n  const [isNodeEmpty, setNodeEmpty] = useState(false);\n  const [isShowSideMenu, setShowSideMenu] = useState(false);\n  const [menuPosition, setMenuPosition] = useState({});\n  const onReset = useCallback(() => {\n    setShowSideMenu(false);\n    setMenuPosition({});\n    setSlateNode(null);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useEffect(() => {\n    let observerRefValue;\n    if (isShowSideMenu) {\n      scrollRef.current.addEventListener('scroll', onReset);\n      observerRefValue = scrollRef.current;\n    } else {\n      scrollRef.current.removeEventListener('scroll', onReset);\n      observerRefValue = null;\n    }\n    return () => {\n      if (observerRefValue) {\n        observerRefValue.removeEventListener('scroll', onReset);\n        focusEditor(editor);\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isShowSideMenu]);\n  useEffect(() => {\n    const handleMouseEnter = e => {\n      if (isShowSideMenu) return;\n      let dom = e.target;\n      while (((_dom = dom) === null || _dom === void 0 ? void 0 : (_dom$dataset = _dom.dataset) === null || _dom$dataset === void 0 ? void 0 : _dom$dataset.root) !== 'true') {\n        var _dom, _dom$dataset;\n        if (!dom.parentNode) return;\n        dom = dom.parentNode;\n      }\n      const node = ReactEditor.toSlateNode(editor, dom);\n      const top = getDomTopHeight(editor, dom, node);\n      const isEmpty = isVoidNode(node);\n      setSidePosition({\n        top: top + scrollRef.current.scrollTop,\n        left: 20\n      });\n      setSlateNode(node);\n      setNodeEmpty(isEmpty);\n    };\n    const eventBus = EventBus.getInstance();\n    const unSubscribeMouseEnter = eventBus.subscribe(INTERNAL_EVENT.ON_MOUSE_ENTER_BLOCK, handleMouseEnter);\n    return unSubscribeMouseEnter;\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [editor, isShowSideMenu, scrollRef]);\n  const onShowSideMenuToggle = useCallback(() => {\n    setSelection(editor, slateNode);\n    const {\n      top,\n      left\n    } = menuRef.current.getBoundingClientRect();\n    setShowSideMenu(!isShowSideMenu);\n    setMenuPosition({\n      top,\n      left\n    });\n  }, [editor, isShowSideMenu, slateNode]);\n  const dragStart = useCallback(event => {\n    sourceElement = ReactEditor.toDOMNode(editor, slateNode);\n    const path = ReactEditor.findPath(editor, slateNode);\n\n    // Dragging the first element within the blockquote drags the entire blockquote by default.\n    if (isBlockquote(editor, [path[0]]) && path.slice(1).every(p => p === 0)) {\n      const nodeEntry = Editor.node(editor, [path[0]]);\n      sourceElement = ReactEditor.toDOMNode(editor, nodeEntry[0]);\n    }\n    event.dataTransfer.setDragImage(sourceElement, 0, 0);\n  }, [editor, slateNode]);\n  const dragOver = useCallback(event => {\n    const overElement = event.currentTarget;\n    if (!overElement.classList.contains('sdoc-draging')) {\n      overElement.classList.add('sdoc-draging');\n    }\n  }, []);\n  const dragLeave = useCallback(event => {\n    const leaveElement = event.currentTarget;\n    leaveElement.classList.remove('sdoc-draging');\n  }, []);\n  const drop = useCallback(event => {\n    const dragTypes = event.dataTransfer.types;\n    targetElement = event.currentTarget;\n    targetElement.classList.remove('sdoc-draging');\n    // Prevent dragging table data to the editor\n    if (dragTypes.includes(TABLE_DRAG_KEY)) return;\n    // Drag local image files to sdoc\n    if (event.dataTransfer.files.length > 0) {\n      const [, targetPath] = getNodeEntry(editor, targetElement);\n      insertImageFiles(event.dataTransfer.files, editor, targetPath);\n      return;\n    }\n    const [sourceNode, sourcePath] = getNodeEntry(editor, sourceElement);\n    const [, targetPath] = getNodeEntry(editor, targetElement);\n\n    // Dragging into a quoteBlock is not supported\n    if ([CODE_BLOCK, TABLE, BLOCKQUOTE].includes(sourceNode.type) && isBlockquote(editor, [targetPath[0]]) && targetPath.length > 1) {\n      return;\n    }\n\n    // Dragging into a list is not supported\n    if ([CODE_BLOCK, TABLE, BLOCKQUOTE, CHECK_LIST_ITEM].includes(sourceNode.type) && isList(editor, targetPath)) {\n      return;\n    }\n\n    // Drag into callout is not supported\n    if ([CALL_OUT, CODE_BLOCK, TABLE].includes(sourceNode.type) && getCalloutEntry(editor, targetPath)) {\n      return;\n    }\n\n    // Drag list\n    if (isList(editor, sourcePath)) {\n      // ordinary list items\n      if (!isBlockquote(editor, [sourcePath[0]])) {\n        // Drag ordinary list items to places other than list and quoteBlock\n        if (!isList(editor, targetPath) && !isBlockquote(editor, [targetPath[0]])) {\n          onWrapListItem(editor, targetPath, sourcePath);\n          return;\n        }\n\n        // Drag ordinary list items into the quoteBlock\n        if (isBlockquote(editor, [targetPath[0]])) {\n          // Drag and drop ordinary list items onto the list within the quoteBlock\n          if (isList(editor, targetPath)) {\n            Transforms.moveNodes(editor, {\n              at: sourcePath,\n              to: Path.next(targetPath)\n            });\n            return;\n          }\n          onWrapListItem(editor, targetPath, sourcePath);\n          return;\n        }\n      }\n\n      // quoteBlock list items\n      if (isBlockquote(editor, [sourcePath[0]])) {\n        // Drag quoteBlock list items to places other than list and quoteBlock\n        if (!isList(editor, targetPath) && !isBlockquote(editor, [targetPath[0]])) {\n          onWrapListItem(editor, targetPath, sourcePath);\n          return;\n        }\n\n        // Drag quoteBlock list items into the quoteBlock\n        if (isBlockquote(editor, [targetPath[0]])) {\n          // Drag and drop ordinary list items onto the list within the quoteBlock\n          if (isList(editor, targetPath)) {\n            Transforms.moveNodes(editor, {\n              at: sourcePath,\n              to: Path.next(targetPath)\n            });\n            return;\n          }\n          onWrapListItem(editor, targetPath, sourcePath);\n          return;\n        }\n      }\n    }\n\n    // Drag backward\n    if (Path.isAfter(targetPath, sourcePath)) {\n      let toPath = targetPath.slice(0);\n\n      // Drag elements outside the quoteBlock into the quoteBlock\n      if (!isBlockquote(editor, [sourcePath[0]]) && isBlockquote(editor, [targetPath[0]]) && targetPath.length > 1) {\n        toPath = Path.next(targetPath);\n      }\n\n      // Drag into list\n      if (isList(editor, targetPath)) {\n        toPath = Path.next(targetPath);\n      }\n      Transforms.moveNodes(editor, {\n        at: sourcePath,\n        to: toPath\n      });\n    }\n\n    // Drag forward\n    if (Path.isBefore(targetPath, sourcePath)) {\n      const toPath = Path.next(targetPath);\n      Transforms.moveNodes(editor, {\n        at: sourcePath,\n        to: toPath\n      });\n    }\n\n    // reset\n    sourceElement = null;\n    targetElement = null;\n  }, [editor]);\n  useEffect(() => {\n    const eventBus = EventBus.getInstance();\n    const unSubscribeDragOver = eventBus.subscribe(INTERNAL_EVENT.ON_DRAG_OVER_BLOCK, dragOver);\n    const unSubscribeDragLeave = eventBus.subscribe(INTERNAL_EVENT.ON_DRAG_LEAVE_BLOCK, dragLeave);\n    const unSubscribeDrop = eventBus.subscribe(INTERNAL_EVENT.ON_DRAG_DROP_BLOCK, drop);\n    return () => {\n      unSubscribeDragOver();\n      unSubscribeDragLeave();\n      unSubscribeDrop();\n    };\n  }, [dragLeave, dragOver, drop]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-side-toolbar-container\",\n    style: sidePosition\n  }, slateNode && /*#__PURE__*/React.createElement(\"div\", {\n    ref: menuRef,\n    draggable: true,\n    onDragStart: dragStart,\n    className: \"sdoc-side-op-icon\",\n    onClick: onShowSideMenuToggle\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: classnames('sdocfont', {\n      'sdoc-more-vertical': !isNodeEmpty,\n      'sdoc-append': isNodeEmpty\n    })\n  })), isShowSideMenu && /*#__PURE__*/React.createElement(SideMenu, {\n    slateNode: slateNode,\n    isNodeEmpty: isNodeEmpty,\n    menuPosition: menuPosition,\n    onReset: onReset\n  }));\n};\nexport default SideToolbar;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}