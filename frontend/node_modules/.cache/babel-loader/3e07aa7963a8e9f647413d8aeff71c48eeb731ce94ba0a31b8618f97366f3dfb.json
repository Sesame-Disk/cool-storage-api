{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Fragment}from'react';import{Button,ModalHeader,ModalBody,ModalFooter,Input}from'reactstrap';import{gettext}from'../../utils/constants';import{TAG_COLORS}from'../../constants';import{seafileAPI}from'../../utils/seafile-api';import{Utils}from'../../utils/utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreateTagDialog=/*#__PURE__*/function(_React$Component){_inherits(CreateTagDialog,_React$Component);var _super=_createSuper(CreateTagDialog);function CreateTagDialog(props){var _this;_classCallCheck(this,CreateTagDialog);_this=_super.call(this,props);_this.inputNewName=function(e){_this.setState({tagName:e.target.value});if(_this.state.errorMsg){_this.setState({errorMsg:''});}};_this.selectTagcolor=function(e){_this.setState({tagColor:e.target.value});};_this.createTag=function(){var name=_this.state.tagName;var color=_this.state.tagColor;var repoID=_this.props.repoID;seafileAPI.createRepoTag(repoID,name,color).then(function(res){var repoTagID=res.data.repo_tag.repo_tag_id;if(_this.props.onRepoTagCreated)_this.props.onRepoTagCreated(repoTagID);_this.props.toggleCancel();}).catch(function(error){var errMessage;if(error.response.status===500){errMessage=gettext('Internal Server Error');}else if(error.response.status===400){errMessage=gettext('Tag \"{name}\" already exists.');errMessage=errMessage.replace('{name}',Utils.HTMLescape(name));}_this.setState({errorMsg:errMessage});});};_this.handleKeyDown=function(e){if(e.key==='Enter'){_this.createTag();}};_this.state={tagName:'',tagColor:TAG_COLORS[0],newTag:{},errorMsg:''};return _this;}_createClass(CreateTagDialog,[{key:\"render\",value:function render(){var _this2=this;var canSave=this.state.tagName.trim()?true:false;return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(ModalHeader,{toggle:this.props.onClose,children:[/*#__PURE__*/_jsx(\"span\",{className:\"tag-dialog-back fas fa-sm fa-arrow-left\",onClick:this.props.toggleCancel,\"aria-label\":gettext('Back')}),gettext('New Tag')]}),/*#__PURE__*/_jsx(ModalBody,{children:/*#__PURE__*/_jsxs(\"div\",{role:\"form\",className:\"tag-create\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:gettext('Name')}),/*#__PURE__*/_jsx(Input,{onKeyDown:this.handleKeyDown,autoFocus:true,value:this.state.tagName,onChange:this.inputNewName}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:this.state.errorMsg})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:gettext('Select a color')}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-between\",children:TAG_COLORS.map(function(item,index){return/*#__PURE__*/_jsx(\"div\",{className:\"tag-color-option\",onChange:_this2.selectTagcolor,children:/*#__PURE__*/_jsxs(\"label\",{className:\"colorinput\",children:[index===0?/*#__PURE__*/_jsx(\"input\",{name:\"color\",type:\"radio\",value:item,className:\"colorinput-input\",defaultChecked:true,onClick:_this2.selectTagcolor}):/*#__PURE__*/_jsx(\"input\",{name:\"color\",type:\"radio\",value:item,className:\"colorinput-input\",onClick:_this2.selectTagcolor}),/*#__PURE__*/_jsx(\"span\",{className:\"colorinput-color rounded-circle d-flex align-items-center justify-content-center\",style:{backgroundColor:item},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check color-selected\"})})]})},index);})})]})]})}),/*#__PURE__*/_jsxs(ModalFooter,{children:[/*#__PURE__*/_jsx(Button,{color:\"secondary\",onClick:this.props.toggleCancel,children:gettext('Cancel')}),canSave?/*#__PURE__*/_jsx(Button,{color:\"primary\",onClick:this.createTag,children:gettext('Save')}):/*#__PURE__*/_jsx(Button,{color:\"primary\",disabled:true,children:gettext('Save')})]})]});}}]);return CreateTagDialog;}(React.Component);export default CreateTagDialog;","map":{"version":3,"names":["React","Fragment","Button","ModalHeader","ModalBody","ModalFooter","Input","gettext","TAG_COLORS","seafileAPI","Utils","jsx","_jsx","jsxs","_jsxs","CreateTagDialog","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","inputNewName","e","setState","tagName","target","value","state","errorMsg","selectTagcolor","tagColor","createTag","name","color","repoID","createRepoTag","then","res","repoTagID","data","repo_tag","repo_tag_id","onRepoTagCreated","toggleCancel","catch","error","errMessage","response","status","replace","HTMLescape","handleKeyDown","key","newTag","_createClass","render","_this2","canSave","trim","children","toggle","onClose","className","onClick","role","onKeyDown","autoFocus","onChange","map","item","index","type","defaultChecked","style","backgroundColor","disabled","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/create-tag-dialog.js"],"sourcesContent":["import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ModalHeader, ModalBody, ModalFooter, Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { TAG_COLORS } from '../../constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  onRepoTagCreated: PropTypes.func,\n  toggleCancel: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired\n};\n\nclass CreateTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagName: '',\n      tagColor: TAG_COLORS[0],\n      newTag: {},\n      errorMsg: '',\n    };\n  }\n\n  inputNewName = (e) => {\n    this.setState({\n      tagName: e.target.value,\n    });\n    if (this.state.errorMsg) {\n      this.setState({errorMsg: ''});\n    }\n  };\n\n  selectTagcolor = (e) => {\n    this.setState({\n      tagColor: e.target.value,\n    });\n  };\n\n  createTag = () => {\n    let name = this.state.tagName;\n    let color = this.state.tagColor;\n    let repoID = this.props.repoID;\n    seafileAPI.createRepoTag(repoID, name, color).then((res) => {\n      let repoTagID = res.data.repo_tag.repo_tag_id;\n      if (this.props.onRepoTagCreated) this.props.onRepoTagCreated(repoTagID);\n      this.props.toggleCancel();\n    }).catch((error) => {\n      let errMessage;\n      if (error.response.status === 500) {\n        errMessage = gettext('Internal Server Error');\n      } else if (error.response.status === 400) {\n        errMessage = gettext('Tag \"{name}\" already exists.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(name));\n      }\n      this.setState({errorMsg: errMessage});\n    });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.createTag();\n    }\n  };\n\n  render() {\n    let canSave = this.state.tagName.trim() ? true : false;\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.props.onClose}>\n          <span className=\"tag-dialog-back fas fa-sm fa-arrow-left\" onClick={this.props.toggleCancel} aria-label={gettext('Back')}></span>\n          {gettext('New Tag')}\n        </ModalHeader>\n        <ModalBody>\n          <div role=\"form\" className=\"tag-create\">\n            <div className=\"form-group\">\n              <label className=\"form-label\">{gettext('Name')}</label>\n              <Input onKeyDown={this.handleKeyDown} autoFocus={true} value={this.state.tagName} onChange={this.inputNewName}/>\n              <div className=\"mt-2\"><span className=\"error\">{this.state.errorMsg}</span></div>\n            </div>\n            <div className=\"form-group\">\n              <label className=\"form-label\">{gettext('Select a color')}</label>\n              <div className=\"d-flex justify-content-between\">\n                {TAG_COLORS.map((item, index)=>{\n                  return (\n                    <div key={index} className=\"tag-color-option\" onChange={this.selectTagcolor}>\n                      <label className=\"colorinput\">\n                        {index===0 ?\n                          <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" defaultChecked onClick={this.selectTagcolor}></input> :\n                          <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" onClick={this.selectTagcolor}></input>}\n                        <span className=\"colorinput-color rounded-circle d-flex align-items-center justify-content-center\" style={{backgroundColor:item}}>\n                          <i className=\"fas fa-check color-selected\"></i>\n                        </span>\n                      </label>\n                    </div>\n                  );\n                })\n                }\n              </div>\n            </div>\n          </div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Cancel')}</Button>\n          {canSave ?\n            <Button color=\"primary\" onClick={this.createTag}>{gettext('Save')}</Button> :\n            <Button color=\"primary\" disabled>{gettext('Save')}</Button>\n          }\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nCreateTagDialog.propTypes = propTypes;\n\nexport default CreateTagDialog;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}