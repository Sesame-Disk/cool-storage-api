{"ast":null,"code":"import _toConsumableArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"children\", \"className\"];\nimport React, { useEffect } from 'react';\nimport classnames from 'classnames';\nimport context from '../context';\nimport { LocalStorage } from '../utils';\nvar Layout = function Layout(_ref) {\n  var children = _ref.children,\n    className = _ref.className,\n    restProps = _objectWithoutProperties(_ref, _excluded);\n  var cacheHistoryfiles = function cacheHistoryfiles() {\n    var docUuid = context.getSetting('docUuid');\n    var docName = context.getSetting('docName');\n    var rencentFiles = LocalStorage.getItem('sdoc-recent-files', []);\n    var arr = [];\n    var newFile = {\n      doc_uuid: docUuid,\n      name: docName\n    };\n    if (rencentFiles.length > 0) {\n      var isExist = rencentFiles.find(function (item) {\n        return item.doc_uuid === docUuid;\n      });\n      if (isExist) return;\n      if (!isExist) {\n        var newRencentFiles = rencentFiles.slice(0);\n        if (rencentFiles.length === 10) {\n          newRencentFiles.shift();\n        }\n        arr = [newFile].concat(_toConsumableArray(newRencentFiles));\n      }\n    } else {\n      arr.push(newFile);\n    }\n    LocalStorage.setItem('sdoc-recent-files', arr);\n  };\n  useEffect(function () {\n    setTimeout(function () {\n      var url = window.location.href;\n      var id = url.slice(url.indexOf('#') + 1);\n      if (id) {\n        var element = document.getElementById(id);\n        element && element.scrollIntoView(true);\n      }\n    }, 500);\n    cacheHistoryfiles();\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", Object.assign({\n    className: classnames('sdoc-editor-page-wrapper', className)\n  }, restProps), children);\n};\nexport default Layout;","map":{"version":3,"names":["_objectWithoutProperties","_excluded","React","useEffect","classnames","context","LocalStorage","Layout","_ref","children","className","restProps","cacheHistoryfiles","docUuid","getSetting","docName","rencentFiles","getItem","arr","newFile","doc_uuid","name","length","isExist","find","item","newRencentFiles","slice","shift","concat","_toConsumableArray","push","setItem","setTimeout","url","window","location","href","id","indexOf","element","document","getElementById","scrollIntoView","createElement","Object","assign"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/layout/layout.js"],"sourcesContent":["import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nconst _excluded = [\"children\", \"className\"];\nimport React, { useEffect } from 'react';\nimport classnames from 'classnames';\nimport context from '../context';\nimport { LocalStorage } from '../utils';\nconst Layout = _ref => {\n  let {\n      children,\n      className\n    } = _ref,\n    restProps = _objectWithoutProperties(_ref, _excluded);\n  const cacheHistoryfiles = () => {\n    const docUuid = context.getSetting('docUuid');\n    const docName = context.getSetting('docName');\n    const rencentFiles = LocalStorage.getItem('sdoc-recent-files', []);\n    let arr = [];\n    const newFile = {\n      doc_uuid: docUuid,\n      name: docName\n    };\n    if (rencentFiles.length > 0) {\n      const isExist = rencentFiles.find(item => item.doc_uuid === docUuid);\n      if (isExist) return;\n      if (!isExist) {\n        let newRencentFiles = rencentFiles.slice(0);\n        if (rencentFiles.length === 10) {\n          newRencentFiles.shift();\n        }\n        arr = [newFile, ...newRencentFiles];\n      }\n    } else {\n      arr.push(newFile);\n    }\n    LocalStorage.setItem('sdoc-recent-files', arr);\n  };\n  useEffect(() => {\n    setTimeout(() => {\n      const url = window.location.href;\n      const id = url.slice(url.indexOf('#') + 1);\n      if (id) {\n        const element = document.getElementById(id);\n        element && element.scrollIntoView(true);\n      }\n    }, 500);\n    cacheHistoryfiles();\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", Object.assign({\n    className: classnames('sdoc-editor-page-wrapper', className)\n  }, restProps), children);\n};\nexport default Layout;"],"mappings":";AAAA,OAAOA,wBAAwB,MAAM,oDAAoD;AACzF,IAAMC,SAAS,GAAG,CAAC,UAAU,EAAE,WAAW,CAAC;AAC3C,OAAOC,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,OAAOC,UAAU,MAAM,YAAY;AACnC,OAAOC,OAAO,MAAM,YAAY;AAChC,SAASC,YAAY,QAAQ,UAAU;AACvC,IAAMC,MAAM,GAAG,SAATA,MAAMA,CAAGC,IAAI,EAAI;EACrB,IACIC,QAAQ,GAEND,IAAI,CAFNC,QAAQ;IACRC,SAAS,GACPF,IAAI,CADNE,SAAS;IAEXC,SAAS,GAAGX,wBAAwB,CAACQ,IAAI,EAAEP,SAAS,CAAC;EACvD,IAAMW,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAA,EAAS;IAC9B,IAAMC,OAAO,GAAGR,OAAO,CAACS,UAAU,CAAC,SAAS,CAAC;IAC7C,IAAMC,OAAO,GAAGV,OAAO,CAACS,UAAU,CAAC,SAAS,CAAC;IAC7C,IAAME,YAAY,GAAGV,YAAY,CAACW,OAAO,CAAC,mBAAmB,EAAE,EAAE,CAAC;IAClE,IAAIC,GAAG,GAAG,EAAE;IACZ,IAAMC,OAAO,GAAG;MACdC,QAAQ,EAAEP,OAAO;MACjBQ,IAAI,EAAEN;IACR,CAAC;IACD,IAAIC,YAAY,CAACM,MAAM,GAAG,CAAC,EAAE;MAC3B,IAAMC,OAAO,GAAGP,YAAY,CAACQ,IAAI,CAAC,UAAAC,IAAI;QAAA,OAAIA,IAAI,CAACL,QAAQ,KAAKP,OAAO;MAAA,EAAC;MACpE,IAAIU,OAAO,EAAE;MACb,IAAI,CAACA,OAAO,EAAE;QACZ,IAAIG,eAAe,GAAGV,YAAY,CAACW,KAAK,CAAC,CAAC,CAAC;QAC3C,IAAIX,YAAY,CAACM,MAAM,KAAK,EAAE,EAAE;UAC9BI,eAAe,CAACE,KAAK,CAAC,CAAC;QACzB;QACAV,GAAG,IAAIC,OAAO,EAAAU,MAAA,CAAAC,kBAAA,CAAKJ,eAAe,EAAC;MACrC;IACF,CAAC,MAAM;MACLR,GAAG,CAACa,IAAI,CAACZ,OAAO,CAAC;IACnB;IACAb,YAAY,CAAC0B,OAAO,CAAC,mBAAmB,EAAEd,GAAG,CAAC;EAChD,CAAC;EACDf,SAAS,CAAC,YAAM;IACd8B,UAAU,CAAC,YAAM;MACf,IAAMC,GAAG,GAAGC,MAAM,CAACC,QAAQ,CAACC,IAAI;MAChC,IAAMC,EAAE,GAAGJ,GAAG,CAACP,KAAK,CAACO,GAAG,CAACK,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;MAC1C,IAAID,EAAE,EAAE;QACN,IAAME,OAAO,GAAGC,QAAQ,CAACC,cAAc,CAACJ,EAAE,CAAC;QAC3CE,OAAO,IAAIA,OAAO,CAACG,cAAc,CAAC,IAAI,CAAC;MACzC;IACF,CAAC,EAAE,GAAG,CAAC;IACP/B,iBAAiB,CAAC,CAAC;EACrB,CAAC,EAAE,EAAE,CAAC;EACN,OAAO,aAAaV,KAAK,CAAC0C,aAAa,CAAC,KAAK,EAAEC,MAAM,CAACC,MAAM,CAAC;IAC3DpC,SAAS,EAAEN,UAAU,CAAC,0BAA0B,EAAEM,SAAS;EAC7D,CAAC,EAAEC,SAAS,CAAC,EAAEF,QAAQ,CAAC;AAC1B,CAAC;AACD,eAAeF,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}