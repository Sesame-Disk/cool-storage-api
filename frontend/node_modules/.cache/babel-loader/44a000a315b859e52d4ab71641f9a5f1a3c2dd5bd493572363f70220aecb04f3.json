{"ast":null,"code":"\"use strict\";\n\nvar _objectSpread = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/objectSpread2.js\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _slateReact = require(\"slate-react\");\nvar _reactI18next = require(\"react-i18next\");\nvar _commons = require(\"../../commons\");\nvar _column = require(\"./constants/column\");\nvar _helpers = require(\"./helpers\");\nvar _constants = require(\"../../../constants\");\nvar NOT_SUPPORT_COLUMN_TYPES = ['button', 'file'];\nvar Column = function Column(_ref) {\n  var attributes = _ref.attributes,\n    children = _ref.children,\n    element = _ref.element;\n  var editor = (0, _slateReact.useSlateStatic)();\n  var isSelected = (0, _slateReact.useSelected)();\n  var _ref2 = (0, _reactI18next.useTranslation)(_constants.TRANSLATE_NAMESPACE),\n    t = _ref2.t;\n  var columns = (0, _react.useMemo)(function () {\n    if (!editor.columns) return [];\n    return editor.columns.filter(function (column) {\n      return !NOT_SUPPORT_COLUMN_TYPES.includes(column.type);\n    });\n  }, [editor.columns]);\n  var options = (0, _react.useMemo)(function () {\n    return columns.map(function (item) {\n      var iconClass = _column.COLUMNS_ICON_CONFIG[item.type];\n      return {\n        value: item.key,\n        label: item.name,\n        bold: false,\n        italic: false,\n        iconClass: iconClass\n      };\n    });\n  }, [columns]);\n  var onColumnChanged = (0, _react.useCallback)(function (option) {\n    var data = element.data;\n    var key = option.value,\n      name = option.label,\n      bold = option.bold,\n      italic = option.italic;\n    var newData = _objectSpread(_objectSpread({}, data), {\n      key: key,\n      name: name,\n      bold: bold,\n      italic: italic\n    });\n    (0, _helpers.setSeaTableColumn)(editor, newData);\n  }, [editor, element]);\n  var defaultValue = (0, _react.useMemo)(function () {\n    var _ref3 = element || {},\n      data = _ref3.data; // column model\n    var column = (0, _helpers.getColumnByKey)(columns, data.key);\n    var value = column && column.key || '';\n    var optionIndex = options.findIndex(function (item) {\n      return item.value === value;\n    });\n    if (optionIndex === -1) return null;\n\n    // used the old properties\n    var option = options[optionIndex];\n    var currentOption = _objectSpread(_objectSpread({}, option), {\n      bold: data.bold,\n      italic: data.italic\n    });\n    options.splice(optionIndex, 1, currentOption);\n    return currentOption;\n  }, [columns, element, options]);\n  var props = {\n    isSelected: isSelected,\n    placeholder: t('Select_field'),\n    value: defaultValue,\n    options: options,\n    onChange: onColumnChanged\n  };\n  return /*#__PURE__*/_react.default.createElement(\"span\", attributes, /*#__PURE__*/_react.default.createElement(_commons.Select, props), children);\n};\nvar renderColumn = function renderColumn(props) {\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  var isReadOnly = (0, _slateReact.useReadOnly)();\n  if (isReadOnly) {\n    var attributes = props.attributes,\n      element = props.element;\n    var data = element.data || {};\n    var columnName = data.name;\n    var displayValue = columnName ? \"{\".concat(columnName, \"}\") : '';\n    return /*#__PURE__*/_react.default.createElement(\"span\", attributes, displayValue);\n  }\n  return /*#__PURE__*/_react.default.createElement(Column, props);\n};\nvar _default = exports.default = renderColumn;","map":{"version":3,"names":["_objectSpread","require","default","_interopRequireWildcard","Object","defineProperty","exports","value","_react","_slateReact","_reactI18next","_commons","_column","_helpers","_constants","NOT_SUPPORT_COLUMN_TYPES","Column","_ref","attributes","children","element","editor","useSlateStatic","isSelected","useSelected","_ref2","useTranslation","TRANSLATE_NAMESPACE","t","columns","useMemo","filter","column","includes","type","options","map","item","iconClass","COLUMNS_ICON_CONFIG","key","label","name","bold","italic","onColumnChanged","useCallback","option","data","newData","setSeaTableColumn","defaultValue","_ref3","getColumnByKey","optionIndex","findIndex","currentOption","splice","props","placeholder","onChange","createElement","Select","renderColumn","isReadOnly","useReadOnly","columnName","displayValue","concat","_default"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/extension/plugins/column/render-elem.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _slateReact = require(\"slate-react\");\nvar _reactI18next = require(\"react-i18next\");\nvar _commons = require(\"../../commons\");\nvar _column = require(\"./constants/column\");\nvar _helpers = require(\"./helpers\");\nvar _constants = require(\"../../../constants\");\nconst NOT_SUPPORT_COLUMN_TYPES = ['button', 'file'];\nconst Column = _ref => {\n  let {\n    attributes,\n    children,\n    element\n  } = _ref;\n  const editor = (0, _slateReact.useSlateStatic)();\n  const isSelected = (0, _slateReact.useSelected)();\n  const {\n    t\n  } = (0, _reactI18next.useTranslation)(_constants.TRANSLATE_NAMESPACE);\n  const columns = (0, _react.useMemo)(() => {\n    if (!editor.columns) return [];\n    return editor.columns.filter(column => !NOT_SUPPORT_COLUMN_TYPES.includes(column.type));\n  }, [editor.columns]);\n  const options = (0, _react.useMemo)(() => {\n    return columns.map(item => {\n      const iconClass = _column.COLUMNS_ICON_CONFIG[item.type];\n      return {\n        value: item.key,\n        label: item.name,\n        bold: false,\n        italic: false,\n        iconClass\n      };\n    });\n  }, [columns]);\n  const onColumnChanged = (0, _react.useCallback)(option => {\n    const {\n      data\n    } = element;\n    const {\n      value: key,\n      label: name,\n      bold,\n      italic\n    } = option;\n    const newData = {\n      ...data,\n      ...{\n        key,\n        name,\n        bold,\n        italic\n      }\n    };\n    (0, _helpers.setSeaTableColumn)(editor, newData);\n  }, [editor, element]);\n  const defaultValue = (0, _react.useMemo)(() => {\n    const {\n      data\n    } = element || {}; // column model\n    const column = (0, _helpers.getColumnByKey)(columns, data.key);\n    const value = column && column.key || '';\n    const optionIndex = options.findIndex(item => item.value === value);\n    if (optionIndex === -1) return null;\n\n    // used the old properties\n    const option = options[optionIndex];\n    const currentOption = {\n      ...option,\n      ...{\n        bold: data.bold,\n        italic: data.italic\n      }\n    };\n    options.splice(optionIndex, 1, currentOption);\n    return currentOption;\n  }, [columns, element, options]);\n  const props = {\n    isSelected: isSelected,\n    placeholder: t('Select_field'),\n    value: defaultValue,\n    options,\n    onChange: onColumnChanged\n  };\n  return /*#__PURE__*/_react.default.createElement(\"span\", attributes, /*#__PURE__*/_react.default.createElement(_commons.Select, props), children);\n};\nconst renderColumn = props => {\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  const isReadOnly = (0, _slateReact.useReadOnly)();\n  if (isReadOnly) {\n    const {\n      attributes,\n      element\n    } = props;\n    const data = element.data || {};\n    const columnName = data.name;\n    const displayValue = columnName ? \"{\".concat(columnName, \"}\") : '';\n    return /*#__PURE__*/_react.default.createElement(\"span\", attributes, displayValue);\n  }\n  return /*#__PURE__*/_react.default.createElement(Column, props);\n};\nvar _default = exports.default = renderColumn;"],"mappings":"AAAA,YAAY;;AAAC,IAAAA,aAAA,GAAAC,OAAA,0HAAAC,OAAA;AAEb,IAAIC,uBAAuB,GAAGF,OAAO,CAAC,+CAA+C,CAAC,CAACC,OAAO;AAC9FE,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAC3CC,KAAK,EAAE;AACT,CAAC,CAAC;AACFD,OAAO,CAACJ,OAAO,GAAG,KAAK,CAAC;AACxB,IAAIM,MAAM,GAAGL,uBAAuB,CAACF,OAAO,CAAC,OAAO,CAAC,CAAC;AACtD,IAAIQ,WAAW,GAAGR,OAAO,CAAC,aAAa,CAAC;AACxC,IAAIS,aAAa,GAAGT,OAAO,CAAC,eAAe,CAAC;AAC5C,IAAIU,QAAQ,GAAGV,OAAO,CAAC,eAAe,CAAC;AACvC,IAAIW,OAAO,GAAGX,OAAO,CAAC,oBAAoB,CAAC;AAC3C,IAAIY,QAAQ,GAAGZ,OAAO,CAAC,WAAW,CAAC;AACnC,IAAIa,UAAU,GAAGb,OAAO,CAAC,oBAAoB,CAAC;AAC9C,IAAMc,wBAAwB,GAAG,CAAC,QAAQ,EAAE,MAAM,CAAC;AACnD,IAAMC,MAAM,GAAG,SAATA,MAAMA,CAAGC,IAAI,EAAI;EACrB,IACEC,UAAU,GAGRD,IAAI,CAHNC,UAAU;IACVC,QAAQ,GAENF,IAAI,CAFNE,QAAQ;IACRC,OAAO,GACLH,IAAI,CADNG,OAAO;EAET,IAAMC,MAAM,GAAG,CAAC,CAAC,EAAEZ,WAAW,CAACa,cAAc,EAAE,CAAC;EAChD,IAAMC,UAAU,GAAG,CAAC,CAAC,EAAEd,WAAW,CAACe,WAAW,EAAE,CAAC;EACjD,IAAAC,KAAA,GAEI,CAAC,CAAC,EAAEf,aAAa,CAACgB,cAAc,EAAEZ,UAAU,CAACa,mBAAmB,CAAC;IADnEC,CAAC,GAAAH,KAAA,CAADG,CAAC;EAEH,IAAMC,OAAO,GAAG,CAAC,CAAC,EAAErB,MAAM,CAACsB,OAAO,EAAE,YAAM;IACxC,IAAI,CAACT,MAAM,CAACQ,OAAO,EAAE,OAAO,EAAE;IAC9B,OAAOR,MAAM,CAACQ,OAAO,CAACE,MAAM,CAAC,UAAAC,MAAM;MAAA,OAAI,CAACjB,wBAAwB,CAACkB,QAAQ,CAACD,MAAM,CAACE,IAAI,CAAC;IAAA,EAAC;EACzF,CAAC,EAAE,CAACb,MAAM,CAACQ,OAAO,CAAC,CAAC;EACpB,IAAMM,OAAO,GAAG,CAAC,CAAC,EAAE3B,MAAM,CAACsB,OAAO,EAAE,YAAM;IACxC,OAAOD,OAAO,CAACO,GAAG,CAAC,UAAAC,IAAI,EAAI;MACzB,IAAMC,SAAS,GAAG1B,OAAO,CAAC2B,mBAAmB,CAACF,IAAI,CAACH,IAAI,CAAC;MACxD,OAAO;QACL3B,KAAK,EAAE8B,IAAI,CAACG,GAAG;QACfC,KAAK,EAAEJ,IAAI,CAACK,IAAI;QAChBC,IAAI,EAAE,KAAK;QACXC,MAAM,EAAE,KAAK;QACbN,SAAS,EAATA;MACF,CAAC;IACH,CAAC,CAAC;EACJ,CAAC,EAAE,CAACT,OAAO,CAAC,CAAC;EACb,IAAMgB,eAAe,GAAG,CAAC,CAAC,EAAErC,MAAM,CAACsC,WAAW,EAAE,UAAAC,MAAM,EAAI;IACxD,IACEC,IAAI,GACF5B,OAAO,CADT4B,IAAI;IAEN,IACSR,GAAG,GAIRO,MAAM,CAJRxC,KAAK;MACEmC,IAAI,GAGTK,MAAM,CAHRN,KAAK;MACLE,IAAI,GAEFI,MAAM,CAFRJ,IAAI;MACJC,MAAM,GACJG,MAAM,CADRH,MAAM;IAER,IAAMK,OAAO,GAAAjD,aAAA,CAAAA,aAAA,KACRgD,IAAI,GACJ;MACDR,GAAG,EAAHA,GAAG;MACHE,IAAI,EAAJA,IAAI;MACJC,IAAI,EAAJA,IAAI;MACJC,MAAM,EAANA;IACF,CAAC,CACF;IACD,CAAC,CAAC,EAAE/B,QAAQ,CAACqC,iBAAiB,EAAE7B,MAAM,EAAE4B,OAAO,CAAC;EAClD,CAAC,EAAE,CAAC5B,MAAM,EAAED,OAAO,CAAC,CAAC;EACrB,IAAM+B,YAAY,GAAG,CAAC,CAAC,EAAE3C,MAAM,CAACsB,OAAO,EAAE,YAAM;IAC7C,IAAAsB,KAAA,GAEIhC,OAAO,IAAI,CAAC,CAAC;MADf4B,IAAI,GAAAI,KAAA,CAAJJ,IAAI,CACY,CAAC;IACnB,IAAMhB,MAAM,GAAG,CAAC,CAAC,EAAEnB,QAAQ,CAACwC,cAAc,EAAExB,OAAO,EAAEmB,IAAI,CAACR,GAAG,CAAC;IAC9D,IAAMjC,KAAK,GAAGyB,MAAM,IAAIA,MAAM,CAACQ,GAAG,IAAI,EAAE;IACxC,IAAMc,WAAW,GAAGnB,OAAO,CAACoB,SAAS,CAAC,UAAAlB,IAAI;MAAA,OAAIA,IAAI,CAAC9B,KAAK,KAAKA,KAAK;IAAA,EAAC;IACnE,IAAI+C,WAAW,KAAK,CAAC,CAAC,EAAE,OAAO,IAAI;;IAEnC;IACA,IAAMP,MAAM,GAAGZ,OAAO,CAACmB,WAAW,CAAC;IACnC,IAAME,aAAa,GAAAxD,aAAA,CAAAA,aAAA,KACd+C,MAAM,GACN;MACDJ,IAAI,EAAEK,IAAI,CAACL,IAAI;MACfC,MAAM,EAAEI,IAAI,CAACJ;IACf,CAAC,CACF;IACDT,OAAO,CAACsB,MAAM,CAACH,WAAW,EAAE,CAAC,EAAEE,aAAa,CAAC;IAC7C,OAAOA,aAAa;EACtB,CAAC,EAAE,CAAC3B,OAAO,EAAET,OAAO,EAAEe,OAAO,CAAC,CAAC;EAC/B,IAAMuB,KAAK,GAAG;IACZnC,UAAU,EAAEA,UAAU;IACtBoC,WAAW,EAAE/B,CAAC,CAAC,cAAc,CAAC;IAC9BrB,KAAK,EAAE4C,YAAY;IACnBhB,OAAO,EAAPA,OAAO;IACPyB,QAAQ,EAAEf;EACZ,CAAC;EACD,OAAO,aAAarC,MAAM,CAACN,OAAO,CAAC2D,aAAa,CAAC,MAAM,EAAE3C,UAAU,EAAE,aAAaV,MAAM,CAACN,OAAO,CAAC2D,aAAa,CAAClD,QAAQ,CAACmD,MAAM,EAAEJ,KAAK,CAAC,EAAEvC,QAAQ,CAAC;AACnJ,CAAC;AACD,IAAM4C,YAAY,GAAG,SAAfA,YAAYA,CAAGL,KAAK,EAAI;EAC5B;EACA,IAAMM,UAAU,GAAG,CAAC,CAAC,EAAEvD,WAAW,CAACwD,WAAW,EAAE,CAAC;EACjD,IAAID,UAAU,EAAE;IACd,IACE9C,UAAU,GAERwC,KAAK,CAFPxC,UAAU;MACVE,OAAO,GACLsC,KAAK,CADPtC,OAAO;IAET,IAAM4B,IAAI,GAAG5B,OAAO,CAAC4B,IAAI,IAAI,CAAC,CAAC;IAC/B,IAAMkB,UAAU,GAAGlB,IAAI,CAACN,IAAI;IAC5B,IAAMyB,YAAY,GAAGD,UAAU,GAAG,GAAG,CAACE,MAAM,CAACF,UAAU,EAAE,GAAG,CAAC,GAAG,EAAE;IAClE,OAAO,aAAa1D,MAAM,CAACN,OAAO,CAAC2D,aAAa,CAAC,MAAM,EAAE3C,UAAU,EAAEiD,YAAY,CAAC;EACpF;EACA,OAAO,aAAa3D,MAAM,CAACN,OAAO,CAAC2D,aAAa,CAAC7C,MAAM,EAAE0C,KAAK,CAAC;AACjE,CAAC;AACD,IAAIW,QAAQ,GAAG/D,OAAO,CAACJ,OAAO,GAAG6D,YAAY"},"metadata":{},"sourceType":"script","externalDependencies":[]}