{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.toggleTextStyle = exports.removeMark = exports.isMenuDisabled = exports.isMarkActive = exports.addMark = void 0;\nvar _slate = require(\"slate\");\nvar _helpers = require(\"../code-block/helpers\");\nvar _constants = require(\"../../constants\");\nvar _core = require(\"../../core\");\nvar isMenuDisabled = function isMenuDisabled(editor, isReadonly) {\n  if (isReadonly) return true;\n  var selection = editor.selection;\n  if (!selection) return true;\n  if ((0, _helpers.isInCodeBlock)(editor)) return true;\n  return false;\n};\nexports.isMenuDisabled = isMenuDisabled;\nvar isMarkActive = function isMarkActive(editor, mark) {\n  var selection = editor.selection;\n  if (!selection) return false;\n  var marks = _slate.Editor.marks(editor);\n\n  // If curMarks exists, you need to set this parameter manually. curMarks prevails\n  if (marks && Object.keys(marks).length > 0) {\n    return !!marks[mark];\n  } else {\n    var _slate$Editor$nodes = _slate.Editor.nodes(editor, {\n        match: function match(n) {\n          return n[mark] === true;\n        }\n      }),\n      _slate$Editor$nodes2 = _slicedToArray(_slate$Editor$nodes, 1),\n      match = _slate$Editor$nodes2[0];\n    return !!match;\n  }\n};\nexports.isMarkActive = isMarkActive;\nvar addMark = function addMark(editor, type) {\n  _slate.Editor.addMark(editor, type, true);\n};\nexports.addMark = addMark;\nvar removeMark = function removeMark(editor, type) {\n  _slate.Editor.removeMark(editor, type);\n};\nexports.removeMark = removeMark;\nvar toggleTextStyle = function toggleTextStyle(editor, type) {\n  var isActive = isMarkActive(editor, type);\n  isActive ? removeMark(editor, type) : addMark(editor, type);\n  if (type === _constants.TEXT_STYLE_MAP.CODE) {\n    if (_slate.Range.isCollapsed(editor.selection)) {\n      _slate.Editor.insertText(editor, '');\n    }\n    (0, _core.focusEditor)(editor);\n  }\n};\nexports.toggleTextStyle = toggleTextStyle;","map":{"version":3,"names":["_slicedToArray","require","default","Object","defineProperty","exports","value","toggleTextStyle","removeMark","isMenuDisabled","isMarkActive","addMark","_slate","_helpers","_constants","_core","editor","isReadonly","selection","isInCodeBlock","mark","marks","Editor","keys","length","_slate$Editor$nodes","nodes","match","n","_slate$Editor$nodes2","type","isActive","TEXT_STYLE_MAP","CODE","Range","isCollapsed","insertText","focusEditor"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/extension/plugins/text-style/helpers.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.toggleTextStyle = exports.removeMark = exports.isMenuDisabled = exports.isMarkActive = exports.addMark = void 0;\nvar _slate = require(\"slate\");\nvar _helpers = require(\"../code-block/helpers\");\nvar _constants = require(\"../../constants\");\nvar _core = require(\"../../core\");\nconst isMenuDisabled = (editor, isReadonly) => {\n  if (isReadonly) return true;\n  const {\n    selection\n  } = editor;\n  if (!selection) return true;\n  if ((0, _helpers.isInCodeBlock)(editor)) return true;\n  return false;\n};\nexports.isMenuDisabled = isMenuDisabled;\nconst isMarkActive = (editor, mark) => {\n  const {\n    selection\n  } = editor;\n  if (!selection) return false;\n  const marks = _slate.Editor.marks(editor);\n\n  // If curMarks exists, you need to set this parameter manually. curMarks prevails\n  if (marks && Object.keys(marks).length > 0) {\n    return !!marks[mark];\n  } else {\n    const [match] = _slate.Editor.nodes(editor, {\n      match: n => n[mark] === true\n    });\n    return !!match;\n  }\n};\nexports.isMarkActive = isMarkActive;\nconst addMark = (editor, type) => {\n  _slate.Editor.addMark(editor, type, true);\n};\nexports.addMark = addMark;\nconst removeMark = (editor, type) => {\n  _slate.Editor.removeMark(editor, type);\n};\nexports.removeMark = removeMark;\nconst toggleTextStyle = (editor, type) => {\n  const isActive = isMarkActive(editor, type);\n  isActive ? removeMark(editor, type) : addMark(editor, type);\n  if (type === _constants.TEXT_STYLE_MAP.CODE) {\n    if (_slate.Range.isCollapsed(editor.selection)) {\n      _slate.Editor.insertText(editor, '');\n    }\n    (0, _core.focusEditor)(editor);\n  }\n};\nexports.toggleTextStyle = toggleTextStyle;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}