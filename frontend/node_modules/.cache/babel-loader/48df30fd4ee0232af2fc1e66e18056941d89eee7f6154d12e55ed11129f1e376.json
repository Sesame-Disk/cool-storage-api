{"ast":null,"code":"import _objectWithoutProperties from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";import _objectSpread from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _createForOfIteratorHelper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";var _excluded=[\"id\",\"description\"];import React from'react';import{css}from'glamor';import Toast from'./toast';import{jsx as _jsx}from\"react/jsx-runtime\";var wrapperClass=css({maxWidth:560,margin:'0 auto',top:0,left:0,right:0,position:'fixed',zIndex:999999});var hasCustomId=function hasCustomId(settings){return Object.hasOwnProperty.call(settings,'id');};var ToastManager=/*#__PURE__*/function(_React$PureComponent){_inherits(ToastManager,_React$PureComponent);var _super=_createSuper(ToastManager);function ToastManager(props,context){var _this;_classCallCheck(this,ToastManager);_this=_super.call(this,props,context);_this.getToasts=function(){return _this.state.toasts;};_this.closeAll=function(){_this.getToasts().forEach(function(toast){return toast.close();});};_this.notify=function(title,settings){// If there's a custom toast ID passed, close existing toasts with the same custom ID\nif(hasCustomId(settings)){var _iterator=_createForOfIteratorHelper(_this.state.toasts),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var toast=_step.value;// Since unique ID is still appended to a custom ID, skip the unique ID and check only prefix\nif(String(toast.id).startsWith(settings.id)){_this.closeToast(toast.id);}}}catch(err){_iterator.e(err);}finally{_iterator.f();}}var instance=_this.createToastInstance(title,settings);_this.setState(function(previousState){return{toasts:[instance].concat(_toConsumableArray(previousState.toasts))};});return instance;};_this.createToastInstance=function(title,settings){var uniqueId=++ToastManager.idCounter;var id=hasCustomId(settings)?\"\".concat(settings.id,\"-\").concat(uniqueId):uniqueId;return{id:id,title:title,description:settings.description,hasCloseButton:settings.hasCloseButton||true,duration:settings.duration||2,close:function close(){return _this.closeToast(id);},intent:settings.intent};};/**\n   * This will set isShown on the Toast which will close the toast.\n   * It won't remove the toast until onExited triggers onRemove.\n   */_this.closeToast=function(id){_this.setState(function(previousState){return{toasts:previousState.toasts.map(function(toast){if(toast.id===id){return _objectSpread(_objectSpread({},toast),{},{isShown:false});}return toast;})};});};_this.removeToast=function(id){_this.setState(function(previousState){return{toasts:previousState.toasts.filter(function(toast){return toast.id!==id;})};});};props.bindNotify(_this.notify);props.bindGetToasts(_this.getToasts);props.bindCloseAll(_this.closeAll);_this.state={toasts:[]};return _this;}_createClass(ToastManager,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsx(\"span\",{className:wrapperClass,children:this.state.toasts.map(function(_ref){var id=_ref.id,description=_ref.description,props=_objectWithoutProperties(_ref,_excluded);return/*#__PURE__*/_jsx(Toast,_objectSpread(_objectSpread({onRemove:function onRemove(){return _this2.removeToast(id);}},props),{},{children:description}),id);})});}}]);return ToastManager;}(React.PureComponent);ToastManager.idCounter=0;export{ToastManager as default};","map":{"version":3,"names":["React","css","Toast","jsx","_jsx","wrapperClass","maxWidth","margin","top","left","right","position","zIndex","hasCustomId","settings","Object","hasOwnProperty","call","ToastManager","_React$PureComponent","_inherits","_super","_createSuper","props","context","_this","_classCallCheck","getToasts","state","toasts","closeAll","forEach","toast","close","notify","title","_iterator","_createForOfIteratorHelper","_step","s","n","done","value","String","id","startsWith","closeToast","err","e","f","instance","createToastInstance","setState","previousState","concat","_toConsumableArray","uniqueId","idCounter","description","hasCloseButton","duration","intent","map","_objectSpread","isShown","removeToast","filter","bindNotify","bindGetToasts","bindCloseAll","_createClass","key","render","_this2","className","children","_ref","_objectWithoutProperties","_excluded","onRemove","PureComponent","default"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toast/toastManager.js"],"sourcesContent":["import React from 'react';\nimport { css } from 'glamor';\nimport PropTypes from 'prop-types';\n\nimport Toast from './toast';\n\nconst wrapperClass = css({\n  maxWidth: 560,\n  margin: '0 auto',\n  top: 0,\n  left: 0,\n  right: 0,\n  position: 'fixed',\n  zIndex: 999999,\n});\n\n\nconst hasCustomId = settings => Object.hasOwnProperty.call(settings, 'id');\n\nexport default class ToastManager extends React.PureComponent {\n  static propTypes = {\n    /**\n     * Function called with the `this.notify` function.\n     */\n    bindNotify: PropTypes.func.isRequired,\n\n    /**\n     * Function called with the `this.getToasts` function.\n     */\n    bindGetToasts: PropTypes.func.isRequired,\n\n    /**\n     * Function called with the `this.closeAll` function.\n     */\n    bindCloseAll: PropTypes.func.isRequired\n  };\n\n  static idCounter = 0;\n\n  constructor(props, context) {\n    super(props, context);\n\n    props.bindNotify(this.notify);\n    props.bindGetToasts(this.getToasts);\n    props.bindCloseAll(this.closeAll);\n\n    this.state = {\n      toasts: []\n    };\n  }\n\n  getToasts = () => {\n    return this.state.toasts;\n  };\n\n  closeAll = () => {\n    this.getToasts().forEach(toast => toast.close());\n  };\n\n  notify = (title, settings) => {\n    // If there's a custom toast ID passed, close existing toasts with the same custom ID\n    if (hasCustomId(settings)) {\n      for (const toast of this.state.toasts) {\n        // Since unique ID is still appended to a custom ID, skip the unique ID and check only prefix\n        if (String(toast.id).startsWith(settings.id)) {\n          this.closeToast(toast.id);\n        }\n      }\n    }\n\n    const instance = this.createToastInstance(title, settings);\n\n    this.setState(previousState => {\n      return {\n        toasts: [instance, ...previousState.toasts]\n      };\n    });\n\n    return instance;\n  };\n\n  createToastInstance = (title, settings) => {\n    const uniqueId = ++ToastManager.idCounter;\n    const id = hasCustomId(settings) ? `${settings.id}-${uniqueId}` : uniqueId;\n\n    return {\n      id,\n      title,\n      description: settings.description,\n      hasCloseButton: settings.hasCloseButton || true,\n      duration: settings.duration || 2,\n      close: () => this.closeToast(id),\n      intent: settings.intent\n    };\n  };\n\n  /**\n   * This will set isShown on the Toast which will close the toast.\n   * It won't remove the toast until onExited triggers onRemove.\n   */\n  closeToast = id => {\n    this.setState(previousState => {\n      return {\n        toasts: previousState.toasts.map(toast => {\n          if (toast.id === id) {\n            return {\n              ...toast,\n              isShown: false\n            };\n          }\n          return toast;\n        })\n      };\n    });\n  };\n\n  removeToast = id => {\n    this.setState(previousState => {\n      return {\n        toasts: previousState.toasts.filter(toast => toast.id !== id)\n      };\n    });\n  };\n\n  render() {\n    return (\n      <span className={wrapperClass}>\n        {this.state.toasts.map(({ id, description, ...props }) => {\n          return (\n            <Toast key={id} onRemove={() => this.removeToast(id)} {...props}>\n              {description}\n            </Toast>\n          );\n        })}\n      </span>\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}