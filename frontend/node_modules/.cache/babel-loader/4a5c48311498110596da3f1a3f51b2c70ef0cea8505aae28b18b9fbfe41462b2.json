{"ast":null,"code":"import { WIKI_EDITOR } from '../constants';\nexport var getDomHeight = function getDomHeight(dom) {\n  var styles = window.getComputedStyle(dom);\n  var rect = dom.getBoundingClientRect();\n  var marginTop = styles['marginTop'];\n  // margin-bottom overlaps margin-top\n  // const marginBottom = styles['marginBottom'];\n  var height = rect.height;\n  return height + parseInt(marginTop);\n};\nexport var getDomMarginTop = function getDomMarginTop(dom) {\n  var styles = window.getComputedStyle(dom);\n  var marginTop = styles['marginTop'];\n  return parseInt(marginTop);\n};\nexport var getSelectionRange = function getSelectionRange() {\n  if (window.getSelection) {\n    var sel = window.getSelection();\n    if (sel.getRangeAt && sel.rangeCount) {\n      return sel.getRangeAt(0);\n    }\n  } else if (document.selection && document.selection.createRange) {\n    return document.selection.createRange();\n  }\n  return null;\n};\nexport var getCursorPosition = function getCursorPosition() {\n  var isScrollUp = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n  var x = 0;\n  var y = 0;\n  var range = getSelectionRange();\n  if (range) {\n    var rect = range.getBoundingClientRect();\n    var headerHeight = 100;\n    x = rect.x || 0;\n    if (isScrollUp) {\n      y = rect.y - headerHeight;\n    } else {\n      y = rect.y - headerHeight + rect.height;\n    }\n  }\n  return {\n    x: x,\n    y: y\n  };\n};\n\n/**\n * Get the height of the header of the editor\n * @param {Editor} editor\n * @returns {Number} height of the header\n */\nexport var getHeaderHeight = function getHeaderHeight(editor) {\n  var editorType = editor.editorType;\n  switch (editorType) {\n    case WIKI_EDITOR:\n      // sdoc-editor-page-header height = 49\n      return 49;\n    default:\n      // sdoc-editor-page-header height = 56\n      // sdoc-editor-toolbar height = 37\n      return 56 + 37;\n  }\n};","map":{"version":3,"names":["WIKI_EDITOR","getDomHeight","dom","styles","window","getComputedStyle","rect","getBoundingClientRect","marginTop","height","parseInt","getDomMarginTop","getSelectionRange","getSelection","sel","getRangeAt","rangeCount","document","selection","createRange","getCursorPosition","isScrollUp","arguments","length","undefined","x","y","range","headerHeight","getHeaderHeight","editor","editorType"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/utils/dom-utils.js"],"sourcesContent":["import { WIKI_EDITOR } from '../constants';\nexport const getDomHeight = dom => {\n  const styles = window.getComputedStyle(dom);\n  const rect = dom.getBoundingClientRect();\n  const marginTop = styles['marginTop'];\n  // margin-bottom overlaps margin-top\n  // const marginBottom = styles['marginBottom'];\n  const {\n    height\n  } = rect;\n  return height + parseInt(marginTop);\n};\nexport const getDomMarginTop = dom => {\n  const styles = window.getComputedStyle(dom);\n  const marginTop = styles['marginTop'];\n  return parseInt(marginTop);\n};\nexport const getSelectionRange = () => {\n  if (window.getSelection) {\n    const sel = window.getSelection();\n    if (sel.getRangeAt && sel.rangeCount) {\n      return sel.getRangeAt(0);\n    }\n  } else if (document.selection && document.selection.createRange) {\n    return document.selection.createRange();\n  }\n  return null;\n};\nexport const getCursorPosition = function () {\n  let isScrollUp = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n  let x = 0;\n  let y = 0;\n  let range = getSelectionRange();\n  if (range) {\n    const rect = range.getBoundingClientRect();\n    const headerHeight = 100;\n    x = rect.x || 0;\n    if (isScrollUp) {\n      y = rect.y - headerHeight;\n    } else {\n      y = rect.y - headerHeight + rect.height;\n    }\n  }\n  return {\n    x: x,\n    y: y\n  };\n};\n\n/**\n * Get the height of the header of the editor\n * @param {Editor} editor\n * @returns {Number} height of the header\n */\nexport const getHeaderHeight = editor => {\n  const {\n    editorType\n  } = editor;\n  switch (editorType) {\n    case WIKI_EDITOR:\n      // sdoc-editor-page-header height = 49\n      return 49;\n    default:\n      // sdoc-editor-page-header height = 56\n      // sdoc-editor-toolbar height = 37\n      return 56 + 37;\n  }\n};"],"mappings":"AAAA,SAASA,WAAW,QAAQ,cAAc;AAC1C,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CAAGC,GAAG,EAAI;EACjC,IAAMC,MAAM,GAAGC,MAAM,CAACC,gBAAgB,CAACH,GAAG,CAAC;EAC3C,IAAMI,IAAI,GAAGJ,GAAG,CAACK,qBAAqB,CAAC,CAAC;EACxC,IAAMC,SAAS,GAAGL,MAAM,CAAC,WAAW,CAAC;EACrC;EACA;EACA,IACEM,MAAM,GACJH,IAAI,CADNG,MAAM;EAER,OAAOA,MAAM,GAAGC,QAAQ,CAACF,SAAS,CAAC;AACrC,CAAC;AACD,OAAO,IAAMG,eAAe,GAAG,SAAlBA,eAAeA,CAAGT,GAAG,EAAI;EACpC,IAAMC,MAAM,GAAGC,MAAM,CAACC,gBAAgB,CAACH,GAAG,CAAC;EAC3C,IAAMM,SAAS,GAAGL,MAAM,CAAC,WAAW,CAAC;EACrC,OAAOO,QAAQ,CAACF,SAAS,CAAC;AAC5B,CAAC;AACD,OAAO,IAAMI,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAA,EAAS;EACrC,IAAIR,MAAM,CAACS,YAAY,EAAE;IACvB,IAAMC,GAAG,GAAGV,MAAM,CAACS,YAAY,CAAC,CAAC;IACjC,IAAIC,GAAG,CAACC,UAAU,IAAID,GAAG,CAACE,UAAU,EAAE;MACpC,OAAOF,GAAG,CAACC,UAAU,CAAC,CAAC,CAAC;IAC1B;EACF,CAAC,MAAM,IAAIE,QAAQ,CAACC,SAAS,IAAID,QAAQ,CAACC,SAAS,CAACC,WAAW,EAAE;IAC/D,OAAOF,QAAQ,CAACC,SAAS,CAACC,WAAW,CAAC,CAAC;EACzC;EACA,OAAO,IAAI;AACb,CAAC;AACD,OAAO,IAAMC,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAA,EAAe;EAC3C,IAAIC,UAAU,GAAGC,SAAS,CAACC,MAAM,GAAG,CAAC,IAAID,SAAS,CAAC,CAAC,CAAC,KAAKE,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI;EACzF,IAAIG,CAAC,GAAG,CAAC;EACT,IAAIC,CAAC,GAAG,CAAC;EACT,IAAIC,KAAK,GAAGf,iBAAiB,CAAC,CAAC;EAC/B,IAAIe,KAAK,EAAE;IACT,IAAMrB,IAAI,GAAGqB,KAAK,CAACpB,qBAAqB,CAAC,CAAC;IAC1C,IAAMqB,YAAY,GAAG,GAAG;IACxBH,CAAC,GAAGnB,IAAI,CAACmB,CAAC,IAAI,CAAC;IACf,IAAIJ,UAAU,EAAE;MACdK,CAAC,GAAGpB,IAAI,CAACoB,CAAC,GAAGE,YAAY;IAC3B,CAAC,MAAM;MACLF,CAAC,GAAGpB,IAAI,CAACoB,CAAC,GAAGE,YAAY,GAAGtB,IAAI,CAACG,MAAM;IACzC;EACF;EACA,OAAO;IACLgB,CAAC,EAAEA,CAAC;IACJC,CAAC,EAAEA;EACL,CAAC;AACH,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,OAAO,IAAMG,eAAe,GAAG,SAAlBA,eAAeA,CAAGC,MAAM,EAAI;EACvC,IACEC,UAAU,GACRD,MAAM,CADRC,UAAU;EAEZ,QAAQA,UAAU;IAChB,KAAK/B,WAAW;MACd;MACA,OAAO,EAAE;IACX;MACE;MACA;MACA,OAAO,EAAE,GAAG,EAAE;EAClB;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}