{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import'../../css/repo-tag.css';import{jsx as _jsx}from\"react/jsx-runtime\";var VirtualTagName=/*#__PURE__*/function(_React$Component){_inherits(VirtualTagName,_React$Component);var _super=_createSuper(VirtualTagName);function VirtualTagName(props){var _this;_classCallCheck(this,VirtualTagName);_this=_super.call(this,props);_this.toggleMode=function(){_this.setState({isEditing:!_this.state.isEditing});};_this.updateTagName=function(e){var newName=e.target.value;_this.props.updateVirtualTag(_this.props.tag,{name:newName});_this.setState({tagName:newName});};_this.onInputKeyDown=function(e){if(e.key=='Enter'){_this.toggleMode();_this.updateTagName(e);}else if(e.key=='Escape'){e.nativeEvent.stopImmediatePropagation();_this.toggleMode();}};_this.onInputBlur=function(e){_this.toggleMode();_this.updateTagName(e);};_this.state={tagName:_this.props.tag.name,isEditing:true};_this.input=/*#__PURE__*/React.createRef();return _this;}_createClass(VirtualTagName,[{key:\"UNSAFE_componentWillReceiveProps\",value:function UNSAFE_componentWillReceiveProps(nextProps){if(nextProps.tag.name!==this.props.tag.name){this.setState({tagName:nextProps.tag.name});}}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;setTimeout(function(){_this2.input.current.focus();},1);}},{key:\"render\",value:function render(){var _this$state=this.state,isEditing=_this$state.isEditing,tagName=_this$state.tagName;return/*#__PURE__*/_jsx(\"div\",{className:\"mx-2 flex-fill d-flex\",children:isEditing?/*#__PURE__*/_jsx(\"input\",{type:\"text\",ref:this.input,defaultValue:tagName,onBlur:this.onInputBlur,onKeyDown:this.onInputKeyDown,className:\"flex-fill form-control-sm form-control\"}):/*#__PURE__*/_jsx(\"span\",{onClick:this.toggleMode,className:\"cursor-pointer flex-fill\",style:{width:100,height:20},children:tagName})});}}]);return VirtualTagName;}(React.Component);export{VirtualTagName as default};","map":{"version":3,"names":["React","jsx","_jsx","VirtualTagName","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","toggleMode","setState","isEditing","state","updateTagName","e","newName","target","value","updateVirtualTag","tag","name","tagName","onInputKeyDown","key","nativeEvent","stopImmediatePropagation","onInputBlur","input","createRef","_createClass","UNSAFE_componentWillReceiveProps","nextProps","componentDidMount","_this2","setTimeout","current","focus","render","_this$state","className","children","type","ref","defaultValue","onBlur","onKeyDown","onClick","style","width","height","Component","default"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/popover/virtual-tag-name.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport '../../css/repo-tag.css';\n\nexport default class VirtualTagName extends React.Component {\n\n  static propTypes = {\n    updateVirtualTag: PropTypes.func.isRequired,\n    tag: PropTypes.object.isRequired,\n    repoID: PropTypes.string.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagName: this.props.tag.name,\n      isEditing: true,\n    };\n    this.input = React.createRef();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.tag.name !== this.props.tag.name) {\n      this.setState({\n        tagName: nextProps.tag.name,\n      });\n    }\n  }\n\n  componentDidMount() {\n    setTimeout(() => {\n      this.input.current.focus();\n    }, 1);\n  }\n\n  toggleMode = () => {\n    this.setState({\n      isEditing: !this.state.isEditing\n    });\n  };\n\n  updateTagName = (e) => {\n    const newName = e.target.value;\n    this.props.updateVirtualTag(this.props.tag, { name: newName });\n    this.setState({\n      tagName: newName\n    });\n  };\n\n  onInputKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      this.toggleMode();\n      this.updateTagName(e);\n    }\n    else if (e.key == 'Escape') {\n      e.nativeEvent.stopImmediatePropagation();\n      this.toggleMode();\n    }\n  };\n\n  onInputBlur = (e) => {\n    this.toggleMode();\n    this.updateTagName(e);\n  };\n\n  render() {\n    const { isEditing, tagName } = this.state;\n    return (\n      <div className=\"mx-2 flex-fill d-flex\">\n        {isEditing ?\n          <input\n            type=\"text\"\n            ref={this.input}\n            defaultValue={tagName}\n            onBlur={this.onInputBlur}\n            onKeyDown={this.onInputKeyDown}\n            className=\"flex-fill form-control-sm form-control\"\n          /> :\n          <span\n            onClick={this.toggleMode}\n            className=\"cursor-pointer flex-fill\"\n            style={{width: 100, height: 20}}\n          >{tagName}</span>\n        }\n      </div>\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}