{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = SlateViewer;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _extension = require(\"../../extension\");\nvar _slateReact = require(\"slate-react\");\nvar _outline = _interopRequireDefault(require(\"../../containers/outline\"));\nvar _useScrollContext = require(\"../../hooks/use-scroll-context\");\nvar _userLinkClick = _interopRequireDefault(require(\"../../hooks/user-link-click\"));\nvar _common = require(\"../../utils/common\");\nrequire(\"./style.css\");\nvar isMacOS = (0, _common.isMac)();\nfunction SlateViewer(_ref) {\n  var value = _ref.value,\n    isShowOutline = _ref.isShowOutline,\n    externalScrollRef = _ref.scrollRef,\n    onLinkClick = _ref.onLinkClick;\n  var scrollRef = (0, _react.useRef)(null);\n  var editor = (0, _react.useMemo)(function () {\n    return (0, _extension.createSlateEditor)();\n  }, []);\n  var containerScrollRef = externalScrollRef ? externalScrollRef : scrollRef;\n  var decorate = (0, _extension.useHighlight)(editor);\n  (0, _userLinkClick.default)(onLinkClick);\n\n  // willUnmount\n  (0, _react.useEffect)(function () {\n    return function () {\n      editor.selection = null;\n      editor.history = {\n        redos: [],\n        undos: []\n      };\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return /*#__PURE__*/_react.default.createElement(_slateReact.Slate, {\n    editor: editor,\n    initialValue: value\n  }, /*#__PURE__*/_react.default.createElement(_useScrollContext.ScrollContext.Provider, {\n    value: {\n      scrollRef: containerScrollRef\n    }\n  }, /*#__PURE__*/_react.default.createElement(\"div\", {\n    ref: scrollRef,\n    className: \"sf-slate-viewer-scroll-container \".concat(isMacOS ? '' : 'isWin', \" \").concat(isShowOutline ? 'outline' : '')\n  }, /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"sf-slate-viewer-article-container\"\n  }, /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"article\"\n  }, /*#__PURE__*/_react.default.createElement(_extension.SetNodeToDecorations, null), /*#__PURE__*/_react.default.createElement(_slateReact.Editable, {\n    readOnly: true,\n    decorate: decorate,\n    renderElement: _extension.renderElement,\n    renderLeaf: _extension.renderLeaf\n  }))), isShowOutline && /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"sf-slate-viewer-outline\"\n  }, /*#__PURE__*/_react.default.createElement(_outline.default, {\n    editor: editor\n  })))));\n}","map":{"version":3,"names":["_interopRequireDefault","require","default","_interopRequireWildcard","Object","defineProperty","exports","value","SlateViewer","_react","_extension","_slateReact","_outline","_useScrollContext","_userLinkClick","_common","isMacOS","isMac","_ref","isShowOutline","externalScrollRef","scrollRef","onLinkClick","useRef","editor","useMemo","createSlateEditor","containerScrollRef","decorate","useHighlight","useEffect","selection","history","redos","undos","createElement","Slate","initialValue","ScrollContext","Provider","ref","className","concat","SetNodeToDecorations","Editable","readOnly","renderElement","renderLeaf"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/editors/slate-viewer/index.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = SlateViewer;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _extension = require(\"../../extension\");\nvar _slateReact = require(\"slate-react\");\nvar _outline = _interopRequireDefault(require(\"../../containers/outline\"));\nvar _useScrollContext = require(\"../../hooks/use-scroll-context\");\nvar _userLinkClick = _interopRequireDefault(require(\"../../hooks/user-link-click\"));\nvar _common = require(\"../../utils/common\");\nrequire(\"./style.css\");\nconst isMacOS = (0, _common.isMac)();\nfunction SlateViewer(_ref) {\n  let {\n    value,\n    isShowOutline,\n    scrollRef: externalScrollRef,\n    onLinkClick\n  } = _ref;\n  const scrollRef = (0, _react.useRef)(null);\n  const editor = (0, _react.useMemo)(() => {\n    return (0, _extension.createSlateEditor)();\n  }, []);\n  const containerScrollRef = externalScrollRef ? externalScrollRef : scrollRef;\n  const decorate = (0, _extension.useHighlight)(editor);\n  (0, _userLinkClick.default)(onLinkClick);\n\n  // willUnmount\n  (0, _react.useEffect)(() => {\n    return () => {\n      editor.selection = null;\n      editor.history = {\n        redos: [],\n        undos: []\n      };\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return /*#__PURE__*/_react.default.createElement(_slateReact.Slate, {\n    editor: editor,\n    initialValue: value\n  }, /*#__PURE__*/_react.default.createElement(_useScrollContext.ScrollContext.Provider, {\n    value: {\n      scrollRef: containerScrollRef\n    }\n  }, /*#__PURE__*/_react.default.createElement(\"div\", {\n    ref: scrollRef,\n    className: \"sf-slate-viewer-scroll-container \".concat(isMacOS ? '' : 'isWin', \" \").concat(isShowOutline ? 'outline' : '')\n  }, /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"sf-slate-viewer-article-container\"\n  }, /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"article\"\n  }, /*#__PURE__*/_react.default.createElement(_extension.SetNodeToDecorations, null), /*#__PURE__*/_react.default.createElement(_slateReact.Editable, {\n    readOnly: true,\n    decorate: decorate,\n    renderElement: _extension.renderElement,\n    renderLeaf: _extension.renderLeaf\n  }))), isShowOutline && /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"sf-slate-viewer-outline\"\n  }, /*#__PURE__*/_react.default.createElement(_outline.default, {\n    editor: editor\n  })))));\n}"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}