{"ast":null,"code":"\"use strict\";\n\nvar _objectSpread = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/objectSpread2.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.replaceColumnData = void 0;\n// root -> paragraph ->\nvar replaceColumnData = function replaceColumnData(mdNodes, columns, getCellValue, updateImgUrl) {\n  var _loop = function _loop() {\n    var node = mdNodes[i];\n    if (node.type === 'column') {\n      var data = node.data;\n      var column = columns.find(function (column) {\n        return column.key === data.key;\n      });\n      var value = column ? getCellValue && getCellValue(column) : '';\n      // change column node to text node\n      var newNode = {\n        'text': value,\n        'bold': data.bold,\n        'italic': data.italic\n      };\n      if (column.type === 'long-text') {\n        newNode = {\n          type: 'html',\n          value: value\n        };\n      }\n      mdNodes.splice(i, 1, newNode);\n      return 1; // continue\n    }\n    // replace image node's src\n    if (node.type === 'image') {\n      var _data = node.data || {\n        src: ''\n      };\n      if (updateImgUrl && typeof updateImgUrl === 'function') {\n        var src = updateImgUrl(_data.src);\n        var newData = _objectSpread(_objectSpread({}, _data), {\n          src: src\n        });\n        node.data = newData;\n      }\n    }\n    // if node has children, traverse node's children\n    if (node.children) {\n      var nodes = node.children;\n      replaceColumnData(nodes, columns, getCellValue, updateImgUrl);\n    }\n  };\n  for (var i = 0; i < mdNodes.length; i++) {\n    if (_loop()) continue;\n  }\n};\nexports.replaceColumnData = replaceColumnData;","map":{"version":3,"names":["_objectSpread","require","default","Object","defineProperty","exports","value","replaceColumnData","mdNodes","columns","getCellValue","updateImgUrl","_loop","node","i","type","data","column","find","key","newNode","bold","italic","splice","src","newData","children","nodes","length"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/utils/replace-slate-nodes.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.replaceColumnData = void 0;\n// root -> paragraph ->\nconst replaceColumnData = (mdNodes, columns, getCellValue, updateImgUrl) => {\n  for (let i = 0; i < mdNodes.length; i++) {\n    const node = mdNodes[i];\n    if (node.type === 'column') {\n      const data = node.data;\n      const column = columns.find(column => column.key === data.key);\n      const value = column ? getCellValue && getCellValue(column) : '';\n      // change column node to text node\n      let newNode = {\n        'text': value,\n        'bold': data.bold,\n        'italic': data.italic\n      };\n      if (column.type === 'long-text') {\n        newNode = {\n          type: 'html',\n          value: value\n        };\n      }\n      mdNodes.splice(i, 1, newNode);\n      continue;\n    }\n    // replace image node's src\n    if (node.type === 'image') {\n      const data = node.data || {\n        src: ''\n      };\n      if (updateImgUrl && typeof updateImgUrl === 'function') {\n        const src = updateImgUrl(data.src);\n        const newData = {\n          ...data,\n          ...{\n            src\n          }\n        };\n        node.data = newData;\n      }\n    }\n    // if node has children, traverse node's children\n    if (node.children) {\n      const nodes = node.children;\n      replaceColumnData(nodes, columns, getCellValue, updateImgUrl);\n    }\n  }\n};\nexports.replaceColumnData = replaceColumnData;"],"mappings":"AAAA,YAAY;;AAAC,IAAAA,aAAA,GAAAC,OAAA,0HAAAC,OAAA;AAEbC,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAC3CC,KAAK,EAAE;AACT,CAAC,CAAC;AACFD,OAAO,CAACE,iBAAiB,GAAG,KAAK,CAAC;AAClC;AACA,IAAMA,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAIC,OAAO,EAAEC,OAAO,EAAEC,YAAY,EAAEC,YAAY,EAAK;EAAA,IAAAC,KAAA,YAAAA,MAAA,EACjC;IACvC,IAAMC,IAAI,GAAGL,OAAO,CAACM,CAAC,CAAC;IACvB,IAAID,IAAI,CAACE,IAAI,KAAK,QAAQ,EAAE;MAC1B,IAAMC,IAAI,GAAGH,IAAI,CAACG,IAAI;MACtB,IAAMC,MAAM,GAAGR,OAAO,CAACS,IAAI,CAAC,UAAAD,MAAM;QAAA,OAAIA,MAAM,CAACE,GAAG,KAAKH,IAAI,CAACG,GAAG;MAAA,EAAC;MAC9D,IAAMb,KAAK,GAAGW,MAAM,GAAGP,YAAY,IAAIA,YAAY,CAACO,MAAM,CAAC,GAAG,EAAE;MAChE;MACA,IAAIG,OAAO,GAAG;QACZ,MAAM,EAAEd,KAAK;QACb,MAAM,EAAEU,IAAI,CAACK,IAAI;QACjB,QAAQ,EAAEL,IAAI,CAACM;MACjB,CAAC;MACD,IAAIL,MAAM,CAACF,IAAI,KAAK,WAAW,EAAE;QAC/BK,OAAO,GAAG;UACRL,IAAI,EAAE,MAAM;UACZT,KAAK,EAAEA;QACT,CAAC;MACH;MACAE,OAAO,CAACe,MAAM,CAACT,CAAC,EAAE,CAAC,EAAEM,OAAO,CAAC;MAAC;IAEhC;IACA;IACA,IAAIP,IAAI,CAACE,IAAI,KAAK,OAAO,EAAE;MACzB,IAAMC,KAAI,GAAGH,IAAI,CAACG,IAAI,IAAI;QACxBQ,GAAG,EAAE;MACP,CAAC;MACD,IAAIb,YAAY,IAAI,OAAOA,YAAY,KAAK,UAAU,EAAE;QACtD,IAAMa,GAAG,GAAGb,YAAY,CAACK,KAAI,CAACQ,GAAG,CAAC;QAClC,IAAMC,OAAO,GAAAzB,aAAA,CAAAA,aAAA,KACRgB,KAAI,GACJ;UACDQ,GAAG,EAAHA;QACF,CAAC,CACF;QACDX,IAAI,CAACG,IAAI,GAAGS,OAAO;MACrB;IACF;IACA;IACA,IAAIZ,IAAI,CAACa,QAAQ,EAAE;MACjB,IAAMC,KAAK,GAAGd,IAAI,CAACa,QAAQ;MAC3BnB,iBAAiB,CAACoB,KAAK,EAAElB,OAAO,EAAEC,YAAY,EAAEC,YAAY,CAAC;IAC/D;EACF,CAAC;EA1CD,KAAK,IAAIG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGN,OAAO,CAACoB,MAAM,EAAEd,CAAC,EAAE;IAAA,IAAAF,KAAA,IAmBnC;EAAS;AAwBf,CAAC;AACDP,OAAO,CAACE,iBAAiB,GAAGA,iBAAiB"},"metadata":{},"sourceType":"script","externalDependencies":[]}