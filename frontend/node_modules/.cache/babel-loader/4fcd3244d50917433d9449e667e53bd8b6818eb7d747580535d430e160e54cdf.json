{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Fragment}from'react';import{gettext}from'../../utils/constants';import OpIcon from'../op-icon';import{SeahubSelect}from'../common/select';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RepoAPITokenPermissionEditor=/*#__PURE__*/function(_React$Component){_inherits(RepoAPITokenPermissionEditor,_React$Component);var _super=_createSuper(RepoAPITokenPermissionEditor);function RepoAPITokenPermissionEditor(props){var _this;_classCallCheck(this,RepoAPITokenPermissionEditor);_this=_super.call(this,props);_this.onHideSelect=function(){_this.setState({isEditing:false});};_this.onEditPermission=function(e){e.nativeEvent.stopImmediatePropagation();_this.setState({isEditing:true});};_this.onPermissionChanged=function(e){if(e.value!==_this.props.currentPermission){_this.props.onPermissionChanged(e.value);}_this.setState({isEditing:false});};_this.onSelectHandler=function(e){e.nativeEvent.stopImmediatePropagation();};_this.state={isEditing:false};_this.options=[{value:'rw',label:/*#__PURE__*/_jsx(\"div\",{children:gettext('Read-Write')})},{value:'r',label:/*#__PURE__*/_jsx(\"div\",{children:gettext('Read-Only')})}];return _this;}_createClass(RepoAPITokenPermissionEditor,[{key:\"componentDidMount\",value:function componentDidMount(){document.addEventListener('click',this.onHideSelect);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){document.removeEventListener('click',this.onHideSelect);}},{key:\"render\",value:function render(){var _this$props=this.props,currentPermission=_this$props.currentPermission,isTextMode=_this$props.isTextMode;var optionTranslation=currentPermission==='rw'?gettext('Read-Write'):gettext('Read-Only');return/*#__PURE__*/_jsx(\"div\",{onClick:this.onSelectHandler,children:isTextMode&&!this.state.isEditing?/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{children:optionTranslation}),this.props.isEditIconShow&&/*#__PURE__*/_jsx(OpIcon,{title:gettext('Edit'),className:\"fa fa-pencil-alt attr-action-icon\",op:this.onEditPermission})]}):/*#__PURE__*/_jsx(SeahubSelect,{options:this.options,placeholder:optionTranslation,onChange:this.onPermissionChanged,captureMenuScroll:false,value:this.options.find(function(opt){return opt.value===currentPermission;})||null})});}}]);return RepoAPITokenPermissionEditor;}(React.Component);export default RepoAPITokenPermissionEditor;","map":{"version":3,"names":["React","Fragment","gettext","OpIcon","SeahubSelect","jsx","_jsx","jsxs","_jsxs","RepoAPITokenPermissionEditor","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","onHideSelect","setState","isEditing","onEditPermission","e","nativeEvent","stopImmediatePropagation","onPermissionChanged","value","currentPermission","onSelectHandler","state","options","label","children","_createClass","key","componentDidMount","document","addEventListener","componentWillUnmount","removeEventListener","render","_this$props","isTextMode","optionTranslation","onClick","isEditIconShow","title","className","op","placeholder","onChange","captureMenuScroll","find","opt","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/select-editor/repo-api-token-permission-editor.js"],"sourcesContent":["import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport OpIcon from '../op-icon';\nimport { SeahubSelect } from '../common/select';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  currentPermission: PropTypes.string.isRequired,\n  onPermissionChanged: PropTypes.func.isRequired,\n};\n\nclass RepoAPITokenPermissionEditor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEditing: false,\n    };\n    this.options = [\n      { value: 'rw', label: <div>{gettext('Read-Write')}</div> },\n      { value: 'r', label: <div>{gettext('Read-Only')}</div> }\n    ];\n  }\n\n  componentDidMount() {\n    document.addEventListener('click', this.onHideSelect);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.onHideSelect);\n  }\n\n  onHideSelect = () => {\n    this.setState({ isEditing: false });\n  };\n\n  onEditPermission = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({ isEditing: true });\n  };\n\n  onPermissionChanged = (e) => {\n    if (e.value !== this.props.currentPermission) {\n      this.props.onPermissionChanged(e.value);\n    }\n    this.setState({ isEditing: false });\n  };\n\n  onSelectHandler = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n  };\n\n  render() {\n    const { currentPermission, isTextMode } = this.props;\n    let optionTranslation = currentPermission === 'rw' ? gettext('Read-Write') : gettext('Read-Only');\n    return (\n      <div onClick={this.onSelectHandler}>\n        {(isTextMode && !this.state.isEditing) ?\n          <Fragment>\n            <span>{optionTranslation}</span>\n            {this.props.isEditIconShow &&\n              <OpIcon title={gettext('Edit')} className=\"fa fa-pencil-alt attr-action-icon\" op={this.onEditPermission} />\n            }\n          </Fragment>\n          :\n          <SeahubSelect\n            options={this.options}\n            placeholder={optionTranslation}\n            onChange={this.onPermissionChanged}\n            captureMenuScroll={false}\n            value={this.options.find(opt => opt.value === currentPermission) || null}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nRepoAPITokenPermissionEditor.propTypes = propTypes;\n\nexport default RepoAPITokenPermissionEditor;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}