{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Fragment}from'react';import moment from'moment';import{Link}from'@gatsbyjs/reach-router';import{seafileAPI}from'../../utils/seafile-api';import{Utils}from'../../utils/utils';import toaster from'../../components/toast';import MainPanelTopbar from'./main-panel-topbar';import ModalPortal from'../../components/modal-portal';import RoleSelector from'../../components/single-selector';import AddDepartDialog from'../../components/dialog/org-add-department-dialog';import AddMemberDialog from'../../components/dialog/org-add-member-dialog';import DeleteMemberDialog from'../../components/dialog/org-delete-member-dialog';import AddRepoDialog from'../../components/dialog/org-add-repo-dialog';import DeleteRepoDialog from'../../components/dialog/org-delete-repo-dialog';import DeleteDepartDialog from'../../components/dialog/org-delete-department-dialog';import SetGroupQuotaDialog from'../../components/dialog/org-set-group-quota-dialog';import RenameDepartmentDialog from'../../components/dialog/org-rename-department-dialog';import OpMenu from'../../components/dialog/op-menu';import{serviceURL,siteRoot,gettext,orgID,lang}from'../../utils/constants';import'../../css/org-department-item.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";moment.locale(lang);var OrgDepartmentItem=/*#__PURE__*/function(_React$Component){_inherits(OrgDepartmentItem,_React$Component);var _super=_createSuper(OrgDepartmentItem);function OrgDepartmentItem(props){var _this;_classCallCheck(this,OrgDepartmentItem);_this=_super.call(this,props);_this.listOrgGroupRepo=function(groupID){seafileAPI.orgAdminListGroupRepos(orgID,groupID).then(function(res){_this.setState({repos:res.data.libraries});}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this.listOrgMembers=function(groupID){seafileAPI.orgAdminListGroupInfo(orgID,groupID,true).then(function(res){_this.setState({members:res.data.members,groups:res.data.groups,ancestorGroups:res.data.ancestor_groups,groupName:res.data.name});}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this.listSubDepartGroups=function(groupID){seafileAPI.orgAdminListGroupInfo(orgID,groupID,true).then(function(res){_this.setState({groups:res.data.groups});}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this.toggleCancel=function(){_this.setState({showDeleteMemberDialog:false,showDeleteRepoDialog:false,showDeleteDepartDialog:false,showSetGroupQuotaDialog:false});};_this.onFreezedDepart=function(){_this.setState({isDepartFreezed:true});};_this.onUnfreezedDepart=function(){_this.setState({isDepartFreezed:false});};_this.onDepartmentNameChanged=function(dept){_this.setState({groups:_this.state.groups.map(function(item){if(item.id==dept.id){item.name=dept.name;}return item;})});};_this.onSubDepartChanged=function(){_this.listSubDepartGroups(_this.props.groupID);};_this.onRepoChanged=function(){_this.listOrgGroupRepo(_this.props.groupID);};_this.onMemberChanged=function(){_this.listOrgMembers(_this.props.groupID);};_this.toggleItemFreezed=function(isFreezed){_this.setState({isItemFreezed:isFreezed});};_this.showDeleteMemberDialog=function(member){_this.setState({showDeleteMemberDialog:true,deletedMember:member});};_this.showDeleteRepoDialog=function(repo){_this.setState({showDeleteRepoDialog:true,deletedRepo:repo});};_this.toggleAddRepoDialog=function(){_this.setState({isShowAddRepoDialog:!_this.state.isShowAddRepoDialog});};_this.toggleAddMemberDialog=function(){_this.setState({isShowAddMemberDialog:!_this.state.isShowAddMemberDialog});};_this.toggleAddDepartDialog=function(){_this.setState({isShowAddDepartDialog:!_this.state.isShowAddDepartDialog});};_this.showDeleteDepartDialog=function(subGroup){_this.setState({showDeleteDepartDialog:true,subGroupID:subGroup.id,subGroupName:subGroup.name});};_this.showSetGroupQuotaDialog=function(subGroupID){_this.setState({showSetGroupQuotaDialog:true,subGroupID:subGroupID});};_this.state={groupName:'',isItemFreezed:false,isDepartFreezed:false,ancestorGroups:[],members:[],deletedMember:{},isShowAddMemberDialog:false,showDeleteMemberDialog:false,repos:[],deletedRepo:{},isShowAddRepoDialog:false,showDeleteRepoDialog:false,groups:[],subGroupID:'',subGroupName:'',isShowAddDepartDialog:false,showDeleteDepartDialog:false,showSetGroupQuotaDialog:false};return _this;}_createClass(OrgDepartmentItem,[{key:\"componentDidMount\",value:function componentDidMount(){var groupID=this.props.groupID;this.listOrgGroupRepo(groupID);this.listOrgMembers(groupID);}},{key:\"UNSAFE_componentWillReceiveProps\",value:function UNSAFE_componentWillReceiveProps(nextProps){if(this.props.groupID!==nextProps.groupID){this.listOrgGroupRepo(nextProps.groupID);this.listOrgMembers(nextProps.groupID);}}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,members=_this$state.members,repos=_this$state.repos,groups=_this$state.groups;var groupID=this.props.groupID;var topBtn='btn btn-secondary operation-item';var topbarChildren=/*#__PURE__*/_jsxs(Fragment,{children:[groupID&&/*#__PURE__*/_jsx(\"button\",{className:topBtn,title:gettext('New Sub-department'),onClick:this.toggleAddDepartDialog,children:gettext('New Sub-department')}),groupID&&/*#__PURE__*/_jsx(\"button\",{className:topBtn,title:gettext('Add Member'),onClick:this.toggleAddMemberDialog,children:gettext('Add Member')}),groupID&&/*#__PURE__*/_jsx(\"button\",{className:topBtn,onClick:this.toggleAddRepoDialog,title:gettext('New Library'),children:gettext('New Library')}),this.state.isShowAddMemberDialog&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(AddMemberDialog,{toggle:this.toggleAddMemberDialog,onMemberChanged:this.onMemberChanged,groupID:groupID})}),this.state.isShowAddRepoDialog&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(AddRepoDialog,{toggle:this.toggleAddRepoDialog,onRepoChanged:this.onRepoChanged,groupID:groupID})}),this.state.isShowAddDepartDialog&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(AddDepartDialog,{onDepartChanged:this.onSubDepartChanged,parentGroupID:groupID,toggle:this.toggleAddDepartDialog})})]});return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MainPanelTopbar,{children:topbarChildren}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-panel-center flex-row h-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cur-view-container o-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cur-view-path\",children:/*#__PURE__*/_jsx(\"div\",{className:\"fleft\",children:/*#__PURE__*/_jsxs(\"h3\",{className:\"sf-heading\",children:[groupID?/*#__PURE__*/_jsx(Link,{to:siteRoot+'org/departmentadmin/',children:gettext('Departments')}):/*#__PURE__*/_jsx(\"span\",{children:gettext('Departments')}),this.state.ancestorGroups.map(function(ancestor){var newHref=siteRoot+'org/departmentadmin/groups/'+ancestor.id+'/';return/*#__PURE__*/_jsxs(\"span\",{children:[' / ',/*#__PURE__*/_jsx(Link,{to:newHref,children:ancestor.name})]},ancestor.id);}),groupID&&/*#__PURE__*/_jsxs(\"span\",{children:[' / ',this.state.groupName]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"cur-view-subcontainer org-groups\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cur-view-path\",children:/*#__PURE__*/_jsx(\"div\",{className:\"fleft\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"sf-heading\",children:gettext('Sub-departments')})})}),/*#__PURE__*/_jsx(\"div\",{className:\"cur-view-content\",children:groups&&groups.length>0?/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{width:\"40%\",children:gettext('Name')}),/*#__PURE__*/_jsx(\"th\",{width:\"25%\",children:gettext('Created At')}),/*#__PURE__*/_jsx(\"th\",{width:\"20%\",children:gettext('Quota')}),/*#__PURE__*/_jsx(\"th\",{width:\"15%\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:groups.map(function(group,index){return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(GroupItem,{group:group,isItemFreezed:_this2.state.isDepartFreezed,onFreezedItem:_this2.onFreezedDepart,onUnfreezedItem:_this2.onUnfreezedDepart,onDepartmentNameChanged:_this2.onDepartmentNameChanged,showDeleteDepartDialog:_this2.showDeleteDepartDialog,showSetGroupQuotaDialog:_this2.showSetGroupQuotaDialog})},group.id);})})]}):/*#__PURE__*/_jsx(\"p\",{className:\"no-group\",children:gettext('No sub-departments')})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cur-view-subcontainer org-members\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cur-view-path\",children:/*#__PURE__*/_jsx(\"div\",{className:\"fleft\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"sf-heading\",children:gettext('Members')})})}),/*#__PURE__*/_jsx(\"div\",{className:\"cur-view-content\",children:!members||members.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"no-member\",children:gettext('No members')}):/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{width:\"5%\"}),/*#__PURE__*/_jsx(\"th\",{width:\"50%\",children:gettext('Name')}),/*#__PURE__*/_jsx(\"th\",{width:\"15%\",children:gettext('Role')}),/*#__PURE__*/_jsx(\"th\",{width:\"30%\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:members.map(function(member,index){return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(MemberItem,{member:member,showDeleteMemberDialog:_this2.showDeleteMemberDialog,isItemFreezed:_this2.state.isItemFreezed,onMemberChanged:_this2.onMemberChanged,toggleItemFreezed:_this2.toggleItemFreezed,groupID:groupID})},index);})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cur-view-subcontainer org-libriries\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cur-view-path\",children:/*#__PURE__*/_jsx(\"div\",{className:\"fleft\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"sf-heading\",children:gettext('Libraries')})})}),repos.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"cur-view-content\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{width:\"5%\"}),/*#__PURE__*/_jsx(\"th\",{width:\"50%\",children:gettext('Name')}),/*#__PURE__*/_jsx(\"th\",{width:\"30%\",children:gettext('Size')}),/*#__PURE__*/_jsx(\"th\",{width:\"15%\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:repos.map(function(repo,index){return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(RepoItem,{repo:repo,showDeleteRepoDialog:_this2.showDeleteRepoDialog})},index);})})]})}):/*#__PURE__*/_jsx(\"p\",{className:\"no-libraty\",children:gettext('No libraries')})]})]}),/*#__PURE__*/_jsxs(React.Fragment,{children:[this.state.showDeleteMemberDialog&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(DeleteMemberDialog,{toggle:this.toggleCancel,onMemberChanged:this.onMemberChanged,member:this.state.deletedMember,groupID:groupID})}),this.state.showDeleteRepoDialog&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(DeleteRepoDialog,{toggle:this.toggleCancel,onRepoChanged:this.onRepoChanged,repo:this.state.deletedRepo,groupID:groupID})}),this.state.showDeleteDepartDialog&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(DeleteDepartDialog,{toggle:this.toggleCancel,groupID:this.state.subGroupID,groupName:this.state.subGroupName,onDepartChanged:this.onSubDepartChanged})}),this.state.showSetGroupQuotaDialog&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(SetGroupQuotaDialog,{toggle:this.toggleCancel,groupID:this.state.subGroupID,onDepartChanged:this.onSubDepartChanged})})]})]})]});}}]);return OrgDepartmentItem;}(React.Component);var MemberItem=/*#__PURE__*/function(_React$Component2){_inherits(MemberItem,_React$Component2);var _super2=_createSuper(MemberItem);function MemberItem(props){var _this3;_classCallCheck(this,MemberItem);_this3=_super2.call(this,props);_this3.onMouseEnter=function(){if(_this3.props.isItemFreezed)return;_this3.setState({highlight:true});};_this3.onMouseLeave=function(){if(_this3.props.isItemFreezed)return;_this3.setState({highlight:false});};_this3.onChangeUserRole=function(roleOption){var isAdmin=roleOption.value==='Admin'?true:false;seafileAPI.orgAdminSetGroupMemberRole(orgID,_this3.props.groupID,_this3.props.member.email,isAdmin).then(function(res){_this3.props.onMemberChanged();}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});_this3.setState({highlight:false});};_this3.state={highlight:false};_this3.roleOptions=[{value:'Admin',text:gettext('Admin'),isSelected:false},{value:'Member',text:gettext('Member'),isSelected:false}];return _this3;}_createClass(MemberItem,[{key:\"render\",value:function render(){var member=this.props.member;var highlight=this.state.highlight;var memberLink=serviceURL+'/org/useradmin/info/'+member.email+'/';if(member.role==='Owner')return null;this.roleOptions=this.roleOptions.map(function(item){item.isSelected=item.value==member.role;return item;});var currentSelectedOption=this.roleOptions.filter(function(item){return item.isSelected;})[0];return/*#__PURE__*/_jsxs(\"tr\",{className:highlight?'tr-highlight':'',onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:member.avatar_url,alt:\"member-header\",width:\"24\",className:\"avatar\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"a\",{href:memberLink,children:member.name})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(RoleSelector,{isDropdownToggleShown:highlight,currentSelectedOption:currentSelectedOption,options:this.roleOptions,selectOption:this.onChangeUserRole,toggleItemFreezed:this.props.toggleItemFreezed})}),/*#__PURE__*/_jsx(\"td\",{className:\"cursor-pointer text-center\",onClick:this.props.showDeleteMemberDialog.bind(this,member),children:/*#__PURE__*/_jsx(\"span\",{className:\"sf2-icon-x3 action-icon \".concat(highlight?'':'vh'),title:\"Delete\"})})]});}}]);return MemberItem;}(React.Component);var RepoItem=/*#__PURE__*/function(_React$Component3){_inherits(RepoItem,_React$Component3);var _super3=_createSuper(RepoItem);function RepoItem(props){var _this4;_classCallCheck(this,RepoItem);_this4=_super3.call(this,props);_this4.onMouseEnter=function(){_this4.setState({highlight:true});};_this4.onMouseLeave=function(){_this4.setState({highlight:false});};_this4.state={highlight:false};return _this4;}_createClass(RepoItem,[{key:\"render\",value:function render(){var repo=this.props.repo;var highlight=this.state.highlight;var iconUrl=Utils.getLibIconUrl(repo);return/*#__PURE__*/_jsxs(\"tr\",{className:highlight?'tr-highlight':'',onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:iconUrl,width:\"24\",alt:gettext('icon')})}),/*#__PURE__*/_jsx(\"td\",{children:repo.name}),/*#__PURE__*/_jsxs(\"td\",{children:[Utils.bytesToSize(repo.size),' ']}),/*#__PURE__*/_jsx(\"td\",{className:\"cursor-pointer text-center\",onClick:this.props.showDeleteRepoDialog.bind(this,repo),children:/*#__PURE__*/_jsx(\"span\",{className:\"sf2-icon-delete action-icon \".concat(highlight?'':'vh'),title:\"Delete\"})})]});}}]);return RepoItem;}(React.Component);var GroupItem=/*#__PURE__*/function(_React$Component4){_inherits(GroupItem,_React$Component4);var _super4=_createSuper(GroupItem);function GroupItem(props){var _this5;_classCallCheck(this,GroupItem);_this5=_super4.call(this,props);_this5.onMouseEnter=function(){if(!_this5.props.isItemFreezed){_this5.setState({isOpIconShown:true,highlight:true});}};_this5.onMouseLeave=function(){if(!_this5.props.isItemFreezed){_this5.setState({isOpIconShown:false,highlight:false});}};_this5.translateOperations=function(item){var translateResult='';switch(item){case'Rename':translateResult=gettext('Rename');break;case'Delete':translateResult=gettext('Delete');break;default:break;}return translateResult;};_this5.onMenuItemClick=function(operation){var group=_this5.props.group;switch(operation){case'Rename':_this5.toggleRenameDialog();break;case'Delete':_this5.props.showDeleteDepartDialog(group);break;default:break;}};_this5.onUnfreezedItem=function(){_this5.setState({highlight:false,isOpIconShow:false});_this5.props.onUnfreezedItem();};_this5.toggleRenameDialog=function(){_this5.setState({isRenameDialogOpen:!_this5.state.isRenameDialogOpen});};_this5.state={highlight:false,isOpIconShown:false,isRenameDialogOpen:false};return _this5;}_createClass(GroupItem,[{key:\"render\",value:function render(){var group=this.props.group;var _this$state2=this.state,highlight=_this$state2.highlight,isOpIconShown=_this$state2.isOpIconShown,isRenameDialogOpen=_this$state2.isRenameDialogOpen;var newHref=siteRoot+'org/departmentadmin/groups/'+group.id+'/';return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(\"tr\",{className:highlight?'tr-highlight':'',onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:newHref,children:group.name})}),/*#__PURE__*/_jsx(\"td\",{children:moment(group.created_at).fromNow()}),/*#__PURE__*/_jsxs(\"td\",{onClick:this.props.showSetGroupQuotaDialog.bind(this,group.id),children:[Utils.bytesToSize(group.quota),' ',/*#__PURE__*/_jsx(\"span\",{title:\"Edit Quota\",className:\"fa fa-pencil-alt attr-action-icon \".concat(highlight?'':'vh')})]}),/*#__PURE__*/_jsx(\"td\",{children:isOpIconShown&&/*#__PURE__*/_jsx(OpMenu,{operations:['Rename','Delete'],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})})]}),isRenameDialogOpen&&/*#__PURE__*/_jsx(RenameDepartmentDialog,{orgID:orgID,groupID:group.id,name:group.name,toggle:this.toggleRenameDialog,onDepartmentNameChanged:this.props.onDepartmentNameChanged})]});}}]);return GroupItem;}(React.Component);export default OrgDepartmentItem;","map":{"version":3,"names":["React","Fragment","moment","Link","seafileAPI","Utils","toaster","MainPanelTopbar","ModalPortal","RoleSelector","AddDepartDialog","AddMemberDialog","DeleteMemberDialog","AddRepoDialog","DeleteRepoDialog","DeleteDepartDialog","SetGroupQuotaDialog","RenameDepartmentDialog","OpMenu","serviceURL","siteRoot","gettext","orgID","lang","jsx","_jsx","jsxs","_jsxs","locale","OrgDepartmentItem","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","listOrgGroupRepo","groupID","orgAdminListGroupRepos","then","res","setState","repos","data","libraries","catch","error","errMessage","getErrorMsg","danger","listOrgMembers","orgAdminListGroupInfo","members","groups","ancestorGroups","ancestor_groups","groupName","name","listSubDepartGroups","toggleCancel","showDeleteMemberDialog","showDeleteRepoDialog","showDeleteDepartDialog","showSetGroupQuotaDialog","onFreezedDepart","isDepartFreezed","onUnfreezedDepart","onDepartmentNameChanged","dept","state","map","item","id","onSubDepartChanged","onRepoChanged","onMemberChanged","toggleItemFreezed","isFreezed","isItemFreezed","member","deletedMember","repo","deletedRepo","toggleAddRepoDialog","isShowAddRepoDialog","toggleAddMemberDialog","isShowAddMemberDialog","toggleAddDepartDialog","isShowAddDepartDialog","subGroup","subGroupID","subGroupName","_createClass","key","value","componentDidMount","UNSAFE_componentWillReceiveProps","nextProps","render","_this2","_this$state","topBtn","topbarChildren","children","className","title","onClick","toggle","onDepartChanged","parentGroupID","to","ancestor","newHref","length","width","group","index","GroupItem","onFreezedItem","onUnfreezedItem","MemberItem","RepoItem","Component","_React$Component2","_super2","_this3","onMouseEnter","highlight","onMouseLeave","onChangeUserRole","roleOption","isAdmin","orgAdminSetGroupMemberRole","email","roleOptions","text","isSelected","memberLink","role","currentSelectedOption","filter","src","avatar_url","alt","href","isDropdownToggleShown","options","selectOption","bind","concat","_React$Component3","_super3","_this4","iconUrl","getLibIconUrl","bytesToSize","size","_React$Component4","_super4","_this5","isOpIconShown","translateOperations","translateResult","onMenuItemClick","operation","toggleRenameDialog","isOpIconShow","isRenameDialogOpen","_this$state2","created_at","fromNow","quota","operations"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-department-item.js"],"sourcesContent":["import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport MainPanelTopbar from './main-panel-topbar';\nimport ModalPortal from '../../components/modal-portal';\nimport RoleSelector from '../../components/single-selector';\nimport AddDepartDialog from '../../components/dialog/org-add-department-dialog';\nimport AddMemberDialog from '../../components/dialog/org-add-member-dialog';\nimport DeleteMemberDialog from '../../components/dialog/org-delete-member-dialog';\nimport AddRepoDialog from '../../components/dialog/org-add-repo-dialog';\nimport DeleteRepoDialog from '../../components/dialog/org-delete-repo-dialog';\nimport DeleteDepartDialog from '../../components/dialog/org-delete-department-dialog';\nimport SetGroupQuotaDialog from '../../components/dialog/org-set-group-quota-dialog';\nimport RenameDepartmentDialog from '../../components/dialog/org-rename-department-dialog';\nimport OpMenu from '../../components/dialog/op-menu';\nimport { serviceURL, siteRoot, gettext, orgID, lang } from '../../utils/constants';\nimport '../../css/org-department-item.css';\n\nmoment.locale(lang);\n\nclass OrgDepartmentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupName: '',\n      isItemFreezed: false,\n      isDepartFreezed: false,\n      ancestorGroups: [],\n      members: [],\n      deletedMember: {},\n      isShowAddMemberDialog: false,\n      showDeleteMemberDialog: false,\n      repos: [],\n      deletedRepo: {},\n      isShowAddRepoDialog: false,\n      showDeleteRepoDialog: false,\n      groups: [],\n      subGroupID: '',\n      subGroupName: '',\n      isShowAddDepartDialog: false,\n      showDeleteDepartDialog: false,\n      showSetGroupQuotaDialog: false,\n    };\n  }\n\n  componentDidMount() {\n    const groupID = this.props.groupID;\n    this.listOrgGroupRepo(groupID);\n    this.listOrgMembers(groupID);\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (this.props.groupID !== nextProps.groupID) {\n      this.listOrgGroupRepo(nextProps.groupID);\n      this.listOrgMembers(nextProps.groupID);\n    }\n  }\n\n  listOrgGroupRepo = (groupID) => {\n    seafileAPI.orgAdminListGroupRepos(orgID, groupID).then(res => {\n      this.setState({ repos: res.data.libraries });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  listOrgMembers = (groupID) => {\n    seafileAPI.orgAdminListGroupInfo(orgID, groupID, true).then(res => {\n      this.setState({\n        members: res.data.members,\n        groups: res.data.groups,\n        ancestorGroups: res.data.ancestor_groups,\n        groupName: res.data.name,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  listSubDepartGroups = (groupID) => {\n    seafileAPI.orgAdminListGroupInfo(orgID, groupID, true).then(res => {\n      this.setState({ groups: res.data.groups });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  toggleCancel = () => {\n    this.setState({\n      showDeleteMemberDialog: false,\n      showDeleteRepoDialog: false,\n      showDeleteDepartDialog: false,\n      showSetGroupQuotaDialog: false,\n    });\n  };\n\n  onFreezedDepart = () => {\n    this.setState({isDepartFreezed: true});\n  };\n\n  onUnfreezedDepart = () => {\n    this.setState({isDepartFreezed: false});\n  };\n\n  onDepartmentNameChanged = (dept) => {\n    this.setState({\n      groups: this.state.groups.map(item => {\n        if (item.id == dept.id) {\n          item.name = dept.name;\n        }\n        return item;\n      })\n    });\n  };\n\n  onSubDepartChanged = () => {\n    this.listSubDepartGroups(this.props.groupID);\n  };\n\n  onRepoChanged = () => {\n    this.listOrgGroupRepo(this.props.groupID);\n  };\n\n  onMemberChanged = () => {\n    this.listOrgMembers(this.props.groupID);\n  };\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({ isItemFreezed: isFreezed });\n  };\n\n  showDeleteMemberDialog = (member) => {\n    this.setState({ showDeleteMemberDialog: true, deletedMember: member });\n  };\n\n  showDeleteRepoDialog = (repo) => {\n    this.setState({ showDeleteRepoDialog: true, deletedRepo: repo });\n  };\n\n  toggleAddRepoDialog = () => {\n    this.setState({ isShowAddRepoDialog: !this.state.isShowAddRepoDialog });\n  };\n\n  toggleAddMemberDialog = () => {\n    this.setState({ isShowAddMemberDialog: !this.state.isShowAddMemberDialog });\n  };\n\n  toggleAddDepartDialog = () => {\n    this.setState({ isShowAddDepartDialog: !this.state.isShowAddDepartDialog});\n  };\n\n  showDeleteDepartDialog = (subGroup) => {\n    this.setState({\n      showDeleteDepartDialog: true,\n      subGroupID: subGroup.id,\n      subGroupName: subGroup.name\n    });\n  };\n\n  showSetGroupQuotaDialog = (subGroupID) => {\n    this.setState({\n      showSetGroupQuotaDialog: true,\n      subGroupID: subGroupID\n    });\n  };\n\n  render() {\n    const { members, repos, groups } = this.state;\n    const groupID = this.props.groupID;\n    const topBtn = 'btn btn-secondary operation-item';\n    const topbarChildren = (\n      <Fragment>\n        {groupID &&\n          <button className={topBtn} title={gettext('New Sub-department')} onClick={this.toggleAddDepartDialog}>{gettext('New Sub-department')}</button>\n        }\n        {groupID &&\n          <button className={topBtn} title={gettext('Add Member')} onClick={this.toggleAddMemberDialog}>{gettext('Add Member')}</button>\n        }\n        {groupID &&\n          <button className={topBtn} onClick={this.toggleAddRepoDialog} title={gettext('New Library')}>{gettext('New Library')}</button>\n        }\n        {this.state.isShowAddMemberDialog && (\n          <ModalPortal>\n            <AddMemberDialog\n              toggle={this.toggleAddMemberDialog}\n              onMemberChanged={this.onMemberChanged}\n              groupID={groupID}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowAddRepoDialog && (\n          <ModalPortal>\n            <AddRepoDialog\n              toggle={this.toggleAddRepoDialog}\n              onRepoChanged={this.onRepoChanged}\n              groupID={groupID}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowAddDepartDialog && (\n          <ModalPortal>\n            <AddDepartDialog\n              onDepartChanged={this.onSubDepartChanged}\n              parentGroupID={groupID}\n              toggle={this.toggleAddDepartDialog}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n\n    return (\n      <Fragment>\n        <MainPanelTopbar children={topbarChildren} />\n        <div className=\"main-panel-center flex-row h-100\">\n          <div className=\"cur-view-container o-auto\">\n            <div className=\"cur-view-path\">\n              <div className=\"fleft\">\n                <h3 className=\"sf-heading\">\n                  {groupID ?\n                    <Link to={siteRoot + 'org/departmentadmin/'}>{gettext('Departments')}</Link>\n                    : <span>{gettext('Departments')}</span>\n                  }\n                  {this.state.ancestorGroups.map(ancestor => {\n                    let newHref = siteRoot + 'org/departmentadmin/groups/' + ancestor.id + '/';\n                    return <span key={ancestor.id}>{' / '}<Link to={newHref}>{ancestor.name}</Link></span>;\n                  })}\n                  {groupID && <span>{' / '}{this.state.groupName}</span>}\n                </h3>\n              </div>\n            </div>\n\n            <div className=\"cur-view-subcontainer org-groups\">\n              <div className=\"cur-view-path\">\n                <div className=\"fleft\"><h3 className=\"sf-heading\">{gettext('Sub-departments')}</h3></div>\n              </div>\n              <div className=\"cur-view-content\">\n                {groups && groups.length > 0 ?\n                  <table>\n                    <thead>\n                      <tr>\n                        <th width=\"40%\">{gettext('Name')}</th>\n                        <th width=\"25%\">{gettext('Created At')}</th>\n                        <th width=\"20%\">{gettext('Quota')}</th>\n                        <th width=\"15%\"></th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {groups.map((group, index) => {\n                        return(\n                          <React.Fragment key={group.id}>\n                            <GroupItem\n                              group={group}\n                              isItemFreezed={this.state.isDepartFreezed}\n                              onFreezedItem={this.onFreezedDepart}\n                              onUnfreezedItem={this.onUnfreezedDepart}\n                              onDepartmentNameChanged={this.onDepartmentNameChanged}\n                              showDeleteDepartDialog={this.showDeleteDepartDialog}\n                              showSetGroupQuotaDialog={this.showSetGroupQuotaDialog}\n                            />\n                          </React.Fragment>\n                        );\n                      })}\n                    </tbody>\n                  </table>\n                  : <p className=\"no-group\">{gettext('No sub-departments')}</p>\n                }\n              </div>\n            </div>\n\n            <div className=\"cur-view-subcontainer org-members\">\n              <div className=\"cur-view-path\">\n                <div className=\"fleft\"><h3 className=\"sf-heading\">{gettext('Members')}</h3></div>\n              </div>\n              <div className=\"cur-view-content\">\n                {(!members || members.length === 0) ?\n                  <p className=\"no-member\">{gettext('No members')}</p> :\n                  <table>\n                    <thead>\n                      <tr>\n                        <th width=\"5%\"></th>\n                        <th width=\"50%\">{gettext('Name')}</th>\n                        <th width=\"15%\">{gettext('Role')}</th>\n                        <th width=\"30%\"></th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {members.map((member, index) => {\n                        return (\n                          <React.Fragment key={index}>\n                            <MemberItem\n                              member={member}\n                              showDeleteMemberDialog={this.showDeleteMemberDialog}\n                              isItemFreezed={this.state.isItemFreezed}\n                              onMemberChanged={this.onMemberChanged}\n                              toggleItemFreezed={this.toggleItemFreezed}\n                              groupID={groupID}\n                            />\n                          </React.Fragment>\n                        );\n                      })}\n                    </tbody>\n                  </table>\n                }\n              </div>\n            </div>\n\n            <div className=\"cur-view-subcontainer org-libriries\">\n              <div className=\"cur-view-path\">\n                <div className=\"fleft\"><h3 className=\"sf-heading\">{gettext('Libraries')}</h3></div>\n              </div>\n              { repos.length > 0 ?\n                <div className=\"cur-view-content\">\n                  <table>\n                    <thead>\n                      <tr>\n                        <th width=\"5%\"></th>\n                        <th width=\"50%\">{gettext('Name')}</th>\n                        <th width=\"30%\">{gettext('Size')}</th>\n                        <th width=\"15%\"></th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {repos.map((repo, index) => {\n                        return(\n                          <React.Fragment key={index}>\n                            <RepoItem repo={repo} showDeleteRepoDialog={this.showDeleteRepoDialog}/>\n                          </React.Fragment>\n                        );\n                      })}\n                    </tbody>\n                  </table>\n                </div>\n                : <p className=\"no-libraty\">{gettext('No libraries')}</p>\n              }\n            </div>\n\n          </div>\n          <React.Fragment>\n            {this.state.showDeleteMemberDialog && (\n              <ModalPortal>\n                <DeleteMemberDialog\n                  toggle={this.toggleCancel}\n                  onMemberChanged={this.onMemberChanged}\n                  member={this.state.deletedMember}\n                  groupID={groupID}\n                />\n              </ModalPortal>\n            )}\n            {this.state.showDeleteRepoDialog && (\n              <ModalPortal>\n                <DeleteRepoDialog\n                  toggle={this.toggleCancel}\n                  onRepoChanged={this.onRepoChanged}\n                  repo={this.state.deletedRepo}\n                  groupID={groupID}\n                />\n              </ModalPortal>\n            )}\n            {this.state.showDeleteDepartDialog && (\n              <ModalPortal>\n                <DeleteDepartDialog\n                  toggle={this.toggleCancel}\n                  groupID={this.state.subGroupID}\n                  groupName={this.state.subGroupName}\n                  onDepartChanged={this.onSubDepartChanged}\n                />\n              </ModalPortal>\n            )}\n            {this.state.showSetGroupQuotaDialog && (\n              <ModalPortal>\n                <SetGroupQuotaDialog\n                  toggle={this.toggleCancel}\n                  groupID={this.state.subGroupID}\n                  onDepartChanged={this.onSubDepartChanged}\n                />\n              </ModalPortal>\n            )}\n          </React.Fragment>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nclass MemberItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false\n    };\n    this.roleOptions = [\n      { value: 'Admin', text: gettext('Admin'), isSelected: false },\n      { value: 'Member', text: gettext('Member'), isSelected: false }\n    ];\n  }\n\n  onMouseEnter = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({ highlight: true });\n  };\n\n  onMouseLeave = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({ highlight: false });\n  };\n\n  onChangeUserRole = (roleOption) => {\n    let isAdmin = roleOption.value === 'Admin' ? true : false;\n    seafileAPI.orgAdminSetGroupMemberRole(orgID, this.props.groupID, this.props.member.email, isAdmin).then((res) => {\n      this.props.onMemberChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n    this.setState({\n      highlight: false,\n    });\n  };\n\n  render() {\n    const member = this.props.member;\n    const highlight = this.state.highlight;\n    let memberLink = serviceURL + '/org/useradmin/info/' + member.email + '/';\n    if (member.role === 'Owner') return null;\n\n    this.roleOptions = this.roleOptions.map(item => {\n      item.isSelected = item.value == member.role;\n      return item;\n    });\n    const currentSelectedOption = this.roleOptions.filter(item => item.isSelected)[0];\n\n    return (\n      <tr className={highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={member.avatar_url} alt=\"member-header\" width=\"24\" className=\"avatar\"/></td>\n        <td><a href={memberLink}>{member.name}</a></td>\n        <td>\n          <RoleSelector\n            isDropdownToggleShown={highlight}\n            currentSelectedOption={currentSelectedOption}\n            options={this.roleOptions}\n            selectOption={this.onChangeUserRole}\n            toggleItemFreezed={this.props.toggleItemFreezed}\n          />\n        </td>\n        <td className=\"cursor-pointer text-center\" onClick={this.props.showDeleteMemberDialog.bind(this, member)}>\n          <span className={`sf2-icon-x3 action-icon ${highlight ? '' : 'vh'}`} title=\"Delete\"></span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nconst MemberItemPropTypes = {\n  groupID: PropTypes.string,\n  member: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onMemberChanged: PropTypes.func.isRequired,\n  showDeleteMemberDialog: PropTypes.func.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n};\n\nMemberItem.propTypes = MemberItemPropTypes;\n\nclass RepoItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({ highlight: true });\n  };\n\n  onMouseLeave = () => {\n    this.setState({ highlight: false });\n  };\n\n  render() {\n    const repo = this.props.repo;\n    const highlight = this.state.highlight;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    return (\n      <tr className={highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={iconUrl} width=\"24\" alt={gettext('icon')}/></td>\n        <td>{repo.name}</td>\n        <td>{Utils.bytesToSize(repo.size)}{' '}</td>\n        <td className=\"cursor-pointer text-center\" onClick={this.props.showDeleteRepoDialog.bind(this, repo)}>\n          <span className={`sf2-icon-delete action-icon ${highlight ? '' : 'vh'}`} title=\"Delete\"></span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nconst RepoItemPropTypes = {\n  repo: PropTypes.object.isRequired,\n  showDeleteRepoDialog: PropTypes.func.isRequired,\n};\n\nRepoItem.propTypes = RepoItemPropTypes;\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOpIconShown: false,\n      isRenameDialogOpen: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  };\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Rename':\n        translateResult = gettext('Rename');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  };\n\n  onMenuItemClick = (operation) => {\n    const { group } = this.props;\n    switch(operation) {\n      case 'Rename':\n        this.toggleRenameDialog();\n        break;\n      case 'Delete':\n        this.props.showDeleteDepartDialog(group);\n        break;\n      default:\n        break;\n    }\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  toggleRenameDialog = () => {\n    this.setState({\n      isRenameDialogOpen: !this.state.isRenameDialogOpen\n    });\n  };\n\n  render() {\n    const group = this.props.group;\n    const { highlight, isOpIconShown, isRenameDialogOpen } = this.state;\n    const newHref = siteRoot+ 'org/departmentadmin/groups/' + group.id + '/';\n    return (\n      <Fragment>\n        <tr className={highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n          <td><Link to={newHref}>{group.name}</Link></td>\n          <td>{moment(group.created_at).fromNow()}</td>\n          <td onClick={this.props.showSetGroupQuotaDialog.bind(this, group.id)}>\n            {Utils.bytesToSize(group.quota)}{' '}\n            <span title=\"Edit Quota\" className={`fa fa-pencil-alt attr-action-icon ${highlight ? '' : 'vh'}`}></span>\n          </td>\n          <td>\n            {isOpIconShown &&\n              <OpMenu\n                operations={['Rename', 'Delete']}\n                translateOperations={this.translateOperations}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            }\n          </td>\n        </tr>\n        {isRenameDialogOpen && (\n          <RenameDepartmentDialog\n            orgID={orgID}\n            groupID={group.id}\n            name={group.name}\n            toggle={this.toggleRenameDialog}\n            onDepartmentNameChanged={this.props.onDepartmentNameChanged}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nconst GroupItemPropTypes = {\n  group: PropTypes.object.isRequired,\n  groupID: PropTypes.string,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onDepartmentNameChanged: PropTypes.func.isRequired,\n  showSetGroupQuotaDialog: PropTypes.func.isRequired,\n  showDeleteDepartDialog: PropTypes.func.isRequired,\n  isSubdepartChanged: PropTypes.bool,\n};\n\nGroupItem.propTypes = GroupItemPropTypes;\n\n\nconst OrgDepartmentItemPropTypes = {\n  groupID: PropTypes.string,\n};\n\nOrgDepartmentItem.propTypes = OrgDepartmentItemPropTypes;\n\nexport default OrgDepartmentItem;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}