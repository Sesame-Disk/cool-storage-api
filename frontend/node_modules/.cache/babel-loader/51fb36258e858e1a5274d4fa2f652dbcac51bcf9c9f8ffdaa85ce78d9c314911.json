{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{KeyCodes}from'../../../../constants';import{jsx as _jsx}from\"react/jsx-runtime\";var SimpleText=/*#__PURE__*/function(_React$Component){_inherits(SimpleText,_React$Component);var _super=_createSuper(SimpleText);function SimpleText(props){var _this;_classCallCheck(this,SimpleText);_this=_super.call(this,props);_this.blurInput=function(){setTimeout(function(){_this.inputRef.current&&_this.inputRef.current.blur();},1);};_this.onBlur=function(){var _this$props=_this.props,column=_this$props.column,onCommit=_this$props.onCommit;var updated={};updated[column.key]=_this.state.value.trim();onCommit(updated,column);};_this.onChange=function(e){var value=e.target.value;if(value===_this.state.value)return;_this.setState({value:value});};_this.onCut=function(e){e.stopPropagation();};_this.onPaste=function(e){e.stopPropagation();};_this.onKeyDown=function(e){if(e.keyCode===KeyCodes.Esc){e.stopPropagation();_this.blurInput();return;}var _e$currentTarget=e.currentTarget,selectionStart=_e$currentTarget.selectionStart,selectionEnd=_e$currentTarget.selectionEnd,value=_e$currentTarget.value;if(e.keyCode===KeyCodes.ChineseInputMethod||e.keyCode===KeyCodes.LeftArrow&&selectionStart===0||e.keyCode===KeyCodes.RightArrow&&selectionEnd===value.length){e.stopPropagation();}};_this.state={value:props.row[props.column.key]||''};_this.inputRef=/*#__PURE__*/React.createRef();return _this;}_createClass(SimpleText,[{key:\"UNSAFE_componentWillReceiveProps\",value:function UNSAFE_componentWillReceiveProps(nextProps){var nextValue=nextProps.row[nextProps.column.key];if(nextValue!==this.state.value){this.setState({value:nextValue});}}},{key:\"render\",value:function render(){var column=this.props.column;var value=this.state.value;return/*#__PURE__*/_jsx(\"input\",{type:\"text\",onBlur:this.onBlur,onCut:this.onCut,onPaste:this.onPaste,onChange:this.onChange,className:\"form-control\",value:value||'',onKeyDown:this.onKeyDown,disabled:!column.editable,ref:this.inputRef});}}]);return SimpleText;}(React.Component);export default SimpleText;","map":{"version":3,"names":["React","KeyCodes","jsx","_jsx","SimpleText","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","blurInput","setTimeout","inputRef","current","blur","onBlur","_this$props","column","onCommit","updated","key","state","value","trim","onChange","e","target","setState","onCut","stopPropagation","onPaste","onKeyDown","keyCode","Esc","_e$currentTarget","currentTarget","selectionStart","selectionEnd","ChineseInputMethod","LeftArrow","RightArrow","length","row","createRef","_createClass","UNSAFE_componentWillReceiveProps","nextProps","nextValue","render","type","className","disabled","editable","ref","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/extra-attributes-dialog/editor/simple-text.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { KeyCodes } from '../../../../constants';\n\nclass SimpleText extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: props.row[props.column.key] || '',\n    };\n    this.inputRef = React.createRef();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    const nextValue = nextProps.row[nextProps.column.key];\n    if (nextValue !== this.state.value) {\n      this.setState({ value: nextValue });\n    }\n  }\n\n  blurInput = () => {\n    setTimeout(() => {\n      this.inputRef.current && this.inputRef.current.blur();\n    }, 1);\n  };\n\n  onBlur = () => {\n    let { column, onCommit } = this.props;\n    const updated = {};\n    updated[column.key] = this.state.value.trim();\n    onCommit(updated, column);\n  };\n\n  onChange = (e) => {\n    let value = e.target.value;\n    if (value === this.state.value) return;\n    this.setState({value});\n  };\n\n  onCut = (e) => {\n    e.stopPropagation();\n  };\n\n  onPaste = (e) => {\n    e.stopPropagation();\n  };\n\n  onKeyDown = (e) => {\n    if (e.keyCode === KeyCodes.Esc) {\n      e.stopPropagation();\n      this.blurInput();\n      return;\n    }\n    let { selectionStart, selectionEnd, value } = e.currentTarget;\n    if (\n      (e.keyCode === KeyCodes.ChineseInputMethod) ||\n      (e.keyCode === KeyCodes.LeftArrow && selectionStart === 0) ||\n      (e.keyCode === KeyCodes.RightArrow && selectionEnd === value.length)\n    ) {\n      e.stopPropagation();\n    }\n  };\n\n  render() {\n    const { column } = this.props;\n    const { value } = this.state;\n\n    return (\n      <input\n        type=\"text\"\n        onBlur={this.onBlur}\n        onCut={this.onCut}\n        onPaste={this.onPaste}\n        onChange={this.onChange}\n        className=\"form-control\"\n        value={value || ''}\n        onKeyDown={this.onKeyDown}\n        disabled={!column.editable}\n        ref={this.inputRef}\n      />\n    );\n  }\n}\n\nSimpleText.propTypes = {\n  column: PropTypes.object,\n  row: PropTypes.object,\n  onCommit: PropTypes.func.isRequired,\n};\n\nexport default SimpleText;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}