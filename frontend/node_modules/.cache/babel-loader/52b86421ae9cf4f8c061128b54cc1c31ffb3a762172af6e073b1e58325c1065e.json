{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{Modal,ModalHeader,ModalBody}from'reactstrap';import moment from'moment';import{gettext}from'../../utils/constants';import{seafileAPI}from'../../utils/seafile-api';import{Utils}from'../../utils/utils';import Loading from'../loading';import'../../css/commit-details.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CommitDetails=/*#__PURE__*/function(_React$Component){_inherits(CommitDetails,_React$Component);var _super=_createSuper(CommitDetails);function CommitDetails(props){var _this;_classCallCheck(this,CommitDetails);_this=_super.call(this,props);_this.state={isLoading:true,errorMsg:''};return _this;}_createClass(CommitDetails,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var _this$props=this.props,repoID=_this$props.repoID,commitID=_this$props.commitID;seafileAPI.getCommitDetails(repoID,commitID).then(function(res){_this2.setState({isLoading:false,errorMsg:'',commitDetails:res.data});}).catch(function(error){var errorMsg=Utils.getErrorMsg(error);_this2.setState({isLoading:false,errorMsg:errorMsg});});}},{key:\"render\",value:function render(){var _this$props2=this.props,toggleDialog=_this$props2.toggleDialog,commitTime=_this$props2.commitTime;return/*#__PURE__*/_jsxs(Modal,{isOpen:true,centered:true,toggle:toggleDialog,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:toggleDialog,children:gettext('Modification Details')}),/*#__PURE__*/_jsxs(ModalBody,{children:[/*#__PURE__*/_jsx(\"p\",{className:\"small\",children:moment(commitTime).format('YYYY-MM-DD HH:mm:ss')}),/*#__PURE__*/_jsx(Content,{data:this.state})]})]});}}]);return CommitDetails;}(React.Component);var Content=/*#__PURE__*/function(_React$Component2){_inherits(Content,_React$Component2);var _super2=_createSuper(Content);function Content(){var _this3;_classCallCheck(this,Content);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this3=_super2.call.apply(_super2,[this].concat(args));_this3.renderDetails=function(data){var detailsData=[{type:'new',title:gettext('New files')},{type:'removed',title:gettext('Deleted files')},{type:'renamed',title:gettext('Renamed or Moved files')},{type:'modified',title:gettext('Modified files')},{type:'newdir',title:gettext('New directories')},{type:'deldir',title:gettext('Deleted directories')}];var showDesc=true;for(var i=0,len=detailsData.length;i<len;i++){if(data[detailsData[i].type].length){showDesc=false;break;}}if(showDesc){return/*#__PURE__*/_jsx(\"p\",{children:data.cmt_desc});}return/*#__PURE__*/_jsx(React.Fragment,{children:detailsData.map(function(item,index){if(!data[item.type].length){return null;}return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"h6\",{children:item.title}),/*#__PURE__*/_jsx(\"ul\",{children:data[item.type].map(function(item,index){return/*#__PURE__*/_jsx(\"li\",{dangerouslySetInnerHTML:{__html:item},className:\"commit-detail-item text-truncate\"},index);})})]},index);})});};return _this3;}_createClass(Content,[{key:\"render\",value:function render(){var _this$props$data=this.props.data,isLoading=_this$props$data.isLoading,errorMsg=_this$props$data.errorMsg,commitDetails=_this$props$data.commitDetails;if(isLoading){return/*#__PURE__*/_jsx(Loading,{});}if(errorMsg){return/*#__PURE__*/_jsx(\"p\",{className:\"error mt-4 text-center\",children:errorMsg});}return this.renderDetails(commitDetails);}}]);return Content;}(React.Component);export default CommitDetails;","map":{"version":3,"names":["React","Modal","ModalHeader","ModalBody","moment","gettext","seafileAPI","Utils","Loading","jsx","_jsx","jsxs","_jsxs","CommitDetails","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","state","isLoading","errorMsg","_createClass","key","value","componentDidMount","_this2","_this$props","repoID","commitID","getCommitDetails","then","res","setState","commitDetails","data","catch","error","getErrorMsg","render","_this$props2","toggleDialog","commitTime","isOpen","centered","toggle","children","className","format","Content","Component","_React$Component2","_super2","_this3","_len","arguments","length","args","Array","_key","apply","concat","renderDetails","detailsData","type","title","showDesc","i","len","cmt_desc","Fragment","map","item","index","dangerouslySetInnerHTML","__html","_this$props$data"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/commit-details.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\n\nimport '../../css/commit-details.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  commitID: PropTypes.string.isRequired,\n  commitTime: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass CommitDetails extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n    };\n  }\n\n  componentDidMount() {\n    const {repoID, commitID} = this.props;\n    seafileAPI.getCommitDetails(repoID, commitID).then((res) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: '',\n        commitDetails: res.data\n      });\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  render() {\n    const { toggleDialog, commitTime} = this.props;\n    return (\n      <Modal isOpen={true} centered={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Modification Details')}</ModalHeader>\n        <ModalBody>\n          <p className=\"small\">{moment(commitTime).format('YYYY-MM-DD HH:mm:ss')}</p>\n          <Content data={this.state} />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  renderDetails = (data) => {\n    const detailsData = [\n      {type: 'new', title: gettext('New files')},\n      {type: 'removed', title: gettext('Deleted files')},\n      {type: 'renamed', title: gettext('Renamed or Moved files')},\n      {type: 'modified', title: gettext('Modified files')},\n      {type: 'newdir', title: gettext('New directories')},\n      {type: 'deldir', title: gettext('Deleted directories')}\n    ];\n\n    let showDesc = true;\n    for (let i = 0, len = detailsData.length; i < len; i++) {\n      if (data[detailsData[i].type].length) {\n        showDesc = false;\n        break;\n      }\n    }\n    if (showDesc) {\n      return <p>{data.cmt_desc}</p>;\n    }\n\n    return (\n      <React.Fragment>\n        {detailsData.map((item, index) => {\n          if (!data[item.type].length) {\n            return null;\n          }\n          return (\n            <React.Fragment key={index}>\n              <h6>{item.title}</h6>\n              <ul>\n                {\n                  data[item.type].map((item, index) => {\n                    return <li key={index} dangerouslySetInnerHTML={{__html: item}} className=\"commit-detail-item text-truncate\"></li>;\n                  })\n                }\n              </ul>\n            </React.Fragment>\n          );\n        })}\n      </React.Fragment>\n    );\n  };\n\n  render() {\n    const {isLoading, errorMsg, commitDetails} = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-4 text-center\">{errorMsg}</p>;\n    }\n\n    return this.renderDetails(commitDetails);\n  }\n}\n\nContent.propTypes = {\n  data: PropTypes.object.isRequired,\n};\n\nCommitDetails.propTypes = propTypes;\n\nexport default CommitDetails;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}