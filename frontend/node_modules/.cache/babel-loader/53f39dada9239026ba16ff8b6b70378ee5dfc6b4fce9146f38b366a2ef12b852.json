{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { Node } from '@seafile/slate';\nimport isLastCharPunctuation from '../../utils/is-punctuation-mark';\nvar generateDefaultText = function generateDefaultText(value) {\n  return {\n    type: 'text',\n    value: value || ''\n  };\n};\nvar transformTextNode = function transformTextNode(textNode) {\n  var mdNode = {\n    type: 'text',\n    value: textNode.text\n  };\n\n  // code = true, override text type\n  if (textNode['code']) {\n    mdNode = _objectSpread(_objectSpread({}, mdNode), {}, {\n      type: 'inlineCode'\n    });\n  }\n\n  // blob = true, add strong parent\n  if (textNode['bold']) {\n    mdNode['value'] = mdNode.value ? mdNode.value.trim() : '';\n    if (isLastCharPunctuation(mdNode.value)) {\n      // https://symbl.cc/en/200B/\n      mdNode['value'] = mdNode.value + '​';\n    }\n    mdNode = {\n      type: 'strong',\n      children: [mdNode]\n    };\n  }\n\n  // italic = true, add emphasis parent\n  if (textNode['italic'] && mdNode.type === 'strong') {\n    mdNode = {\n      type: 'emphasis',\n      children: [mdNode]\n    };\n  } else if (textNode['italic']) {\n    mdNode['value'] = mdNode.value ? mdNode.value.trim() : '';\n    if (isLastCharPunctuation(mdNode.value)) {\n      // https://symbl.cc/en/200B/\n      mdNode['value'] = mdNode.value + '​';\n    }\n    mdNode = {\n      type: 'emphasis',\n      children: [mdNode]\n    };\n  }\n  return mdNode;\n};\nvar transformInlineChildren = function transformInlineChildren(result, item) {\n  // image\n  if (item.type && item.type === 'image') {\n    var data = item.data;\n    var image = {\n      type: 'image',\n      url: data.src,\n      alt: data.alt || null,\n      title: data.title || null\n    };\n    if (data.height || data.width) {\n      image = {\n        type: 'html',\n        value: \"<img src=\\\"\".concat(data.src, \"\\\" alt=\\\"\").concat(data.alt, \"\\\" title=\\\"\").concat(data.title, \"\\\" width=\\\"\").concat(data.width, \"\\\" height=\\\"\").concat(data.height, \"\\\" />\")\n      };\n    }\n    result.push(image);\n    return result;\n  }\n\n  // link\n  if (item.type && item.type === 'link') {\n    var link = {\n      type: 'link',\n      url: item.href,\n      title: item.title || null,\n      children: [transformTextNode(item.children[0])]\n    };\n    result.push(link);\n    return result;\n  }\n\n  // mention\n  if (item.type && item.type === 'mention') {\n    var text = item.children[0].text;\n    var username = item.username;\n    var mention = {\n      type: 'link',\n      // eslint-disable-next-line no-script-url\n      url: 'javascript:void(0)',\n      title: \"__sdoc_mention__username\".concat(username),\n      children: [{\n        type: 'text',\n        value: text\n      }]\n    };\n    result.push(mention);\n    return result;\n  }\n  if (item.type && item.type === 'column') {\n    var _data = item.data;\n    var newNode = {\n      text: \"{\".concat(_data.name, \"}\")\n    };\n    var column = transformTextNode(newNode);\n    result.push(column);\n    return result;\n  }\n\n  // text\n  var nodes = transformTextNode(item);\n  result.push(nodes);\n  return result;\n};\nvar transformNodeWithInlineChildren = function transformNodeWithInlineChildren(node) {\n  var children = node.children;\n  var defaultChildren = [generateDefaultText()];\n  if (!children || !Array.isArray(children) || children.length === 0) {\n    return defaultChildren;\n  }\n  var result = [];\n  children.forEach(function (item) {\n    return transformInlineChildren(result, item);\n  });\n  return result.flat();\n};\nvar transformHeader = function transformHeader(node) {\n  var level = node.type.replace('header', '');\n  return {\n    type: 'heading',\n    depth: parseInt(level),\n    children: transformNodeWithInlineChildren(node)\n  };\n};\nvar transformParagraph = function transformParagraph(node) {\n  var children = node.children;\n  if (!Array.isArray(children) || children.length === 0) {\n    return {\n      type: 'paragraph',\n      children: transformNodeWithInlineChildren(node)\n    };\n  }\n  var voidNodeTypes = ['image', 'column', 'formula'];\n  var hasBlock = children.some(function (item) {\n    return voidNodeTypes.includes(item.type);\n  });\n  if (!hasBlock && Node.string(node).length === 0) {\n    return {\n      type: 'paragraph',\n      children: [\n      // https://symbl.cc/en/200B/\n      generateDefaultText('​')]\n    };\n  }\n  return {\n    type: 'paragraph',\n    children: transformNodeWithInlineChildren(node)\n  };\n};\nvar transformBlockquote = function transformBlockquote(node) {\n  var children = node.children;\n  return {\n    type: 'blockquote',\n    children: children.map(function (child) {\n      var handler = elementHandlers[child.type];\n      return handler(child);\n    }).flat() // flat\n  };\n};\n\nvar transformCheckList = function transformCheckList(node) {\n  return {\n    type: 'list',\n    ordered: false,\n    start: null,\n    spread: false,\n    children: [{\n      type: 'listItem',\n      spread: false,\n      checked: node.checked ? true : false,\n      children: [transformParagraph(node)]\n    }]\n  };\n};\nvar transformListContent = function transformListContent(node) {\n  return transformParagraph(node);\n};\nvar transformListItem = function transformListItem(node) {\n  var loose = false;\n  var children = node.children;\n  // eslint-disable-next-line array-callback-return\n  var newChildren = children.map(function (child) {\n    if (child.type === 'paragraph') {\n      return transformListContent(child);\n    }\n    if (child.type === 'code_block') {\n      return transformCodeBlock(child);\n    }\n    if (child.type === 'blockquote') {\n      return transformBlockquote(child);\n    }\n    if (child.type === 'unordered_list' || child.type === 'ordered_list') {\n      return transformList(child);\n    }\n  });\n  if (newChildren.length === 1) {\n    loose = false;\n  } else if (newChildren.length === 2 && newChildren[1].type === 'list') {\n    loose = true;\n  } else {\n    loose = true;\n  }\n  return {\n    type: 'listItem',\n    loose: loose,\n    checked: null,\n    children: newChildren\n  };\n};\nvar transformList = function transformList(node) {\n  var children = node.children;\n  var newChildren = children.map(function (child) {\n    return transformListItem(child);\n  });\n  var loose = false;\n  var _iterator = _createForOfIteratorHelper(newChildren),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _node = _step.value;\n      if (_node.loose === true) {\n        loose = true;\n        break;\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return {\n    type: 'list',\n    ordered: node.type === 'ordered_list',\n    // ordered_list | unordered_list\n    start: 1,\n    loose: loose,\n    children: newChildren\n  };\n};\nvar transformTableCell = function transformTableCell(cell) {\n  return {\n    type: 'tableCell',\n    children: transformNodeWithInlineChildren(cell)\n  };\n};\nvar transformTableRow = function transformTableRow(row) {\n  var cells = row.children;\n  return {\n    type: 'tableRow',\n    children: cells.map(function (cell) {\n      return transformTableCell(cell);\n    })\n  };\n};\nvar transformTable = function transformTable(node) {\n  var rows = node.children;\n  var align = rows.map(function (row) {\n    var _cells$;\n    var cells = row.children;\n    return ((_cells$ = cells[0]) === null || _cells$ === void 0 ? void 0 : _cells$.align) || null;\n  });\n  return {\n    type: 'table',\n    align: align,\n    children: rows.map(function (row) {\n      return transformTableRow(row);\n    })\n  };\n};\nvar transformCodeLine = function transformCodeLine(node) {\n  var _node$children$;\n  var text = ((_node$children$ = node.children[0]) === null || _node$children$ === void 0 ? void 0 : _node$children$.text) || '';\n  return text;\n};\nvar transformCodeBlock = function transformCodeBlock(node) {\n  var children = node.children;\n  return {\n    type: 'code',\n    lang: node.lang ? node.lang : null,\n    value: children.map(function (child) {\n      return transformCodeLine(child);\n    }).join('\\n')\n  };\n};\nvar transformFormula = function transformFormula(node) {\n  var data = node.data;\n  return {\n    type: 'math',\n    value: data.formula\n  };\n};\nvar transformMention = function transformMention(node) {\n  var data = node.data;\n  return {\n    type: 'mention',\n    value: data.value\n  };\n};\nvar elementHandlers = {\n  'paragraph': transformParagraph,\n  'header1': transformHeader,\n  'header2': transformHeader,\n  'header3': transformHeader,\n  'header4': transformHeader,\n  'header5': transformHeader,\n  'header6': transformHeader,\n  'blockquote': transformBlockquote,\n  'table': transformTable,\n  'check_list_item': transformCheckList,\n  'ordered_list': transformList,\n  'unordered_list': transformList,\n  'code_block': transformCodeBlock,\n  'formula': transformFormula,\n  'mention': transformMention\n};\nexport var formatSlateToMd = function formatSlateToMd(children) {\n  var validChildren = children.filter(function (child) {\n    return elementHandlers[child.type];\n  });\n  return validChildren.map(function (child) {\n    var handler = elementHandlers[child.type];\n    return handler(child);\n  }).flat();\n};","map":{"version":3,"names":["_objectSpread","Node","isLastCharPunctuation","generateDefaultText","value","type","transformTextNode","textNode","mdNode","text","trim","children","transformInlineChildren","result","item","data","image","url","src","alt","title","height","width","concat","push","link","href","username","mention","newNode","name","column","nodes","transformNodeWithInlineChildren","node","defaultChildren","Array","isArray","length","forEach","flat","transformHeader","level","replace","depth","parseInt","transformParagraph","voidNodeTypes","hasBlock","some","includes","string","transformBlockquote","map","child","handler","elementHandlers","transformCheckList","ordered","start","spread","checked","transformListContent","transformListItem","loose","newChildren","transformCodeBlock","transformList","_iterator","_createForOfIteratorHelper","_step","s","n","done","err","e","f","transformTableCell","cell","transformTableRow","row","cells","transformTable","rows","align","_cells$","transformCodeLine","_node$children$","lang","join","transformFormula","formula","transformMention","formatSlateToMd","validChildren","filter"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/slate-convert/slate-to-md/transform.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { Node } from '@seafile/slate';\nimport isLastCharPunctuation from '../../utils/is-punctuation-mark';\nconst generateDefaultText = value => {\n  return {\n    type: 'text',\n    value: value || ''\n  };\n};\nconst transformTextNode = textNode => {\n  let mdNode = {\n    type: 'text',\n    value: textNode.text\n  };\n\n  // code = true, override text type\n  if (textNode['code']) {\n    mdNode = _objectSpread(_objectSpread({}, mdNode), {}, {\n      type: 'inlineCode'\n    });\n  }\n\n  // blob = true, add strong parent\n  if (textNode['bold']) {\n    mdNode['value'] = mdNode.value ? mdNode.value.trim() : '';\n    if (isLastCharPunctuation(mdNode.value)) {\n      // https://symbl.cc/en/200B/\n      mdNode['value'] = mdNode.value + '​';\n    }\n    mdNode = {\n      type: 'strong',\n      children: [mdNode]\n    };\n  }\n\n  // italic = true, add emphasis parent\n  if (textNode['italic'] && mdNode.type === 'strong') {\n    mdNode = {\n      type: 'emphasis',\n      children: [mdNode]\n    };\n  } else if (textNode['italic']) {\n    mdNode['value'] = mdNode.value ? mdNode.value.trim() : '';\n    if (isLastCharPunctuation(mdNode.value)) {\n      // https://symbl.cc/en/200B/\n      mdNode['value'] = mdNode.value + '​';\n    }\n    mdNode = {\n      type: 'emphasis',\n      children: [mdNode]\n    };\n  }\n  return mdNode;\n};\nconst transformInlineChildren = (result, item) => {\n  // image\n  if (item.type && item.type === 'image') {\n    const {\n      data\n    } = item;\n    let image = {\n      type: 'image',\n      url: data.src,\n      alt: data.alt || null,\n      title: data.title || null\n    };\n    if (data.height || data.width) {\n      image = {\n        type: 'html',\n        value: \"<img src=\\\"\".concat(data.src, \"\\\" alt=\\\"\").concat(data.alt, \"\\\" title=\\\"\").concat(data.title, \"\\\" width=\\\"\").concat(data.width, \"\\\" height=\\\"\").concat(data.height, \"\\\" />\")\n      };\n    }\n    result.push(image);\n    return result;\n  }\n\n  // link\n  if (item.type && item.type === 'link') {\n    const link = {\n      type: 'link',\n      url: item.href,\n      title: item.title || null,\n      children: [transformTextNode(item.children[0])]\n    };\n    result.push(link);\n    return result;\n  }\n\n  // mention\n  if (item.type && item.type === 'mention') {\n    const text = item.children[0].text;\n    const username = item.username;\n    const mention = {\n      type: 'link',\n      // eslint-disable-next-line no-script-url\n      url: 'javascript:void(0)',\n      title: \"__sdoc_mention__username\".concat(username),\n      children: [{\n        type: 'text',\n        value: text\n      }]\n    };\n    result.push(mention);\n    return result;\n  }\n  if (item.type && item.type === 'column') {\n    const data = item.data;\n    const newNode = {\n      text: \"{\".concat(data.name, \"}\")\n    };\n    const column = transformTextNode(newNode);\n    result.push(column);\n    return result;\n  }\n\n  // text\n  const nodes = transformTextNode(item);\n  result.push(nodes);\n  return result;\n};\nconst transformNodeWithInlineChildren = node => {\n  const {\n    children\n  } = node;\n  const defaultChildren = [generateDefaultText()];\n  if (!children || !Array.isArray(children) || children.length === 0) {\n    return defaultChildren;\n  }\n  const result = [];\n  children.forEach(item => transformInlineChildren(result, item));\n  return result.flat();\n};\nconst transformHeader = node => {\n  const level = node.type.replace('header', '');\n  return {\n    type: 'heading',\n    depth: parseInt(level),\n    children: transformNodeWithInlineChildren(node)\n  };\n};\nconst transformParagraph = node => {\n  const {\n    children\n  } = node;\n  if (!Array.isArray(children) || children.length === 0) {\n    return {\n      type: 'paragraph',\n      children: transformNodeWithInlineChildren(node)\n    };\n  }\n  const voidNodeTypes = ['image', 'column', 'formula'];\n  const hasBlock = children.some(item => voidNodeTypes.includes(item.type));\n  if (!hasBlock && Node.string(node).length === 0) {\n    return {\n      type: 'paragraph',\n      children: [\n      // https://symbl.cc/en/200B/\n      generateDefaultText('​')]\n    };\n  }\n  return {\n    type: 'paragraph',\n    children: transformNodeWithInlineChildren(node)\n  };\n};\nconst transformBlockquote = node => {\n  const {\n    children\n  } = node;\n  return {\n    type: 'blockquote',\n    children: children.map(child => {\n      const handler = elementHandlers[child.type];\n      return handler(child);\n    }).flat() // flat\n  };\n};\n\nconst transformCheckList = node => {\n  return {\n    type: 'list',\n    ordered: false,\n    start: null,\n    spread: false,\n    children: [{\n      type: 'listItem',\n      spread: false,\n      checked: node.checked ? true : false,\n      children: [transformParagraph(node)]\n    }]\n  };\n};\nconst transformListContent = node => {\n  return transformParagraph(node);\n};\nconst transformListItem = node => {\n  let loose = false;\n  const {\n    children\n  } = node;\n  // eslint-disable-next-line array-callback-return\n  const newChildren = children.map(child => {\n    if (child.type === 'paragraph') {\n      return transformListContent(child);\n    }\n    if (child.type === 'code_block') {\n      return transformCodeBlock(child);\n    }\n    if (child.type === 'blockquote') {\n      return transformBlockquote(child);\n    }\n    if (child.type === 'unordered_list' || child.type === 'ordered_list') {\n      return transformList(child);\n    }\n  });\n  if (newChildren.length === 1) {\n    loose = false;\n  } else if (newChildren.length === 2 && newChildren[1].type === 'list') {\n    loose = true;\n  } else {\n    loose = true;\n  }\n  return {\n    type: 'listItem',\n    loose: loose,\n    checked: null,\n    children: newChildren\n  };\n};\nconst transformList = node => {\n  const {\n    children\n  } = node;\n  const newChildren = children.map(child => transformListItem(child));\n  let loose = false;\n  for (let node of newChildren) {\n    if (node.loose === true) {\n      loose = true;\n      break;\n    }\n  }\n  return {\n    type: 'list',\n    ordered: node.type === 'ordered_list',\n    // ordered_list | unordered_list\n    start: 1,\n    loose: loose,\n    children: newChildren\n  };\n};\nconst transformTableCell = cell => {\n  return {\n    type: 'tableCell',\n    children: transformNodeWithInlineChildren(cell)\n  };\n};\nconst transformTableRow = row => {\n  const {\n    children: cells\n  } = row;\n  return {\n    type: 'tableRow',\n    children: cells.map(cell => transformTableCell(cell))\n  };\n};\nconst transformTable = node => {\n  const {\n    children: rows\n  } = node;\n  const align = rows.map(row => {\n    var _cells$;\n    const {\n      children: cells\n    } = row;\n    return ((_cells$ = cells[0]) === null || _cells$ === void 0 ? void 0 : _cells$.align) || null;\n  });\n  return {\n    type: 'table',\n    align: align,\n    children: rows.map(row => transformTableRow(row))\n  };\n};\nconst transformCodeLine = node => {\n  var _node$children$;\n  const text = ((_node$children$ = node.children[0]) === null || _node$children$ === void 0 ? void 0 : _node$children$.text) || '';\n  return text;\n};\nconst transformCodeBlock = node => {\n  const {\n    children\n  } = node;\n  return {\n    type: 'code',\n    lang: node.lang ? node.lang : null,\n    value: children.map(child => transformCodeLine(child)).join('\\n')\n  };\n};\nconst transformFormula = node => {\n  const data = node.data;\n  return {\n    type: 'math',\n    value: data.formula\n  };\n};\nconst transformMention = node => {\n  const data = node.data;\n  return {\n    type: 'mention',\n    value: data.value\n  };\n};\nconst elementHandlers = {\n  'paragraph': transformParagraph,\n  'header1': transformHeader,\n  'header2': transformHeader,\n  'header3': transformHeader,\n  'header4': transformHeader,\n  'header5': transformHeader,\n  'header6': transformHeader,\n  'blockquote': transformBlockquote,\n  'table': transformTable,\n  'check_list_item': transformCheckList,\n  'ordered_list': transformList,\n  'unordered_list': transformList,\n  'code_block': transformCodeBlock,\n  'formula': transformFormula,\n  'mention': transformMention\n};\nexport const formatSlateToMd = children => {\n  const validChildren = children.filter(child => elementHandlers[child.type]);\n  return validChildren.map(child => {\n    const handler = elementHandlers[child.type];\n    return handler(child);\n  }).flat();\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}