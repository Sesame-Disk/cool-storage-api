{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar _assertThisInitialized = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/assertThisInitialized.js\").default;\nvar _inherits = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/inherits.js\").default;\nvar _createSuper = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/createSuper.js\").default;\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/esm/defineProperty\"));\nvar _react = _interopRequireDefault(require(\"react\"));\n/**\n * Detecting outside click on a react component is surprisingly hard.\n * A general approach is to have a global click handler on the document\n * which checks if the click target is inside the editor container or\n * not using editorContainer.contains(e.target). This approach works well\n * until portals are used for editors. Portals render children into a DOM\n * node that exists outside the DOM hierarchy of the parent component so\n * editorContainer.contains(e.target) does not work. Here are some examples\n * of the DOM structure with different types of editors\n *\n *\n * SimpleEditor for example Texbox (No Portals)\n *   <div react-data-grid>..<div>\n *   <div portal-created-by-the-grid-for-editors>\n *      <div editor-container>\n *        <div simple-editor>..</div>\n *      </div>\n *   <div>\n *\n * ComplexEditor for example Modals (using Portals)\n *   <div react-data-grid>..<div>\n *   <div portal-created-by-the-grid-for-editors>\n *      <div editor-container>\n *        // Nothing here\n *      </div>\n *   <div>\n *   <div portal-created-by-the-editor>\n *     <div complex-editor>..</div>\n *   </div>\n *\n *\n * One approach to detect outside click is to use event bubbling through\n * portals. An event fired from inside a portal will propagate to ancestors\n * in the containing React tree, even if those elements are not ancestors\n * in the DOM tree. This means a click handler can be attached on the document\n * and on the editor container. The editor container can set a flag to notify\n * that the click was inside the editor and the document click handler can use\n * this flag to call onClickOutside. This approach however has a few caveats\n * - Click handler on the document is set using document.addEventListener\n * - Click handler on the editor container is set using onClick prop\n *\n * This means if a child component inside the editor calls e.stopPropagation\n * then the click handler on the editor container will not be called whereas\n * document click handler will be called.\n * https://github.com/facebook/react/issues/12518\n *\n * To solve this issue onClickCapture event is used.\n */\nvar ClickOutside = /*#__PURE__*/function (_react$default$Compon) {\n  _inherits(ClickOutside, _react$default$Compon);\n  var _super = _createSuper(ClickOutside);\n  function ClickOutside() {\n    var _this;\n    _classCallCheck(this, ClickOutside);\n    _this = _super.apply(this, arguments);\n    (0, _defineProperty2.default)(_assertThisInitialized(_this), \"isClickedInside\", false);\n    (0, _defineProperty2.default)(_assertThisInitialized(_this), \"handleDocumentClick\", function (e) {\n      if (_this.isClickedInside) {\n        _this.isClickedInside = false;\n        return;\n      }\n      _this.props.onClickOutside(e);\n    });\n    (0, _defineProperty2.default)(_assertThisInitialized(_this), \"handleMouseDown\", function () {\n      _this.isClickedInside = true;\n    });\n    return _this;\n  }\n  _createClass(ClickOutside, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      document.addEventListener('mousedown', this.handleDocumentClick);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener('mousedown', this.handleDocumentClick);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/_react.default.cloneElement(_react.default.Children.only(this.props.children), {\n        onMouseDownCapture: this.handleMouseDown\n      });\n    }\n  }]);\n  return ClickOutside;\n}(_react.default.Component);\nvar _default = exports.default = ClickOutside;","map":{"version":3,"names":["_classCallCheck","require","default","_createClass","_assertThisInitialized","_inherits","_createSuper","_interopRequireDefault","Object","defineProperty","exports","value","_defineProperty2","_react","ClickOutside","_react$default$Compon","_super","_this","apply","arguments","e","isClickedInside","props","onClickOutside","key","componentDidMount","document","addEventListener","handleDocumentClick","componentWillUnmount","removeEventListener","render","cloneElement","Children","only","children","onMouseDownCapture","handleMouseDown","Component","_default"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/pages/longtext-inline-editor/click-outside.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/esm/defineProperty\"));\nvar _react = _interopRequireDefault(require(\"react\"));\n/**\n * Detecting outside click on a react component is surprisingly hard.\n * A general approach is to have a global click handler on the document\n * which checks if the click target is inside the editor container or\n * not using editorContainer.contains(e.target). This approach works well\n * until portals are used for editors. Portals render children into a DOM\n * node that exists outside the DOM hierarchy of the parent component so\n * editorContainer.contains(e.target) does not work. Here are some examples\n * of the DOM structure with different types of editors\n *\n *\n * SimpleEditor for example Texbox (No Portals)\n *   <div react-data-grid>..<div>\n *   <div portal-created-by-the-grid-for-editors>\n *      <div editor-container>\n *        <div simple-editor>..</div>\n *      </div>\n *   <div>\n *\n * ComplexEditor for example Modals (using Portals)\n *   <div react-data-grid>..<div>\n *   <div portal-created-by-the-grid-for-editors>\n *      <div editor-container>\n *        // Nothing here\n *      </div>\n *   <div>\n *   <div portal-created-by-the-editor>\n *     <div complex-editor>..</div>\n *   </div>\n *\n *\n * One approach to detect outside click is to use event bubbling through\n * portals. An event fired from inside a portal will propagate to ancestors\n * in the containing React tree, even if those elements are not ancestors\n * in the DOM tree. This means a click handler can be attached on the document\n * and on the editor container. The editor container can set a flag to notify\n * that the click was inside the editor and the document click handler can use\n * this flag to call onClickOutside. This approach however has a few caveats\n * - Click handler on the document is set using document.addEventListener\n * - Click handler on the editor container is set using onClick prop\n *\n * This means if a child component inside the editor calls e.stopPropagation\n * then the click handler on the editor container will not be called whereas\n * document click handler will be called.\n * https://github.com/facebook/react/issues/12518\n *\n * To solve this issue onClickCapture event is used.\n */\n\nclass ClickOutside extends _react.default.Component {\n  constructor() {\n    super(...arguments);\n    (0, _defineProperty2.default)(this, \"isClickedInside\", false);\n    (0, _defineProperty2.default)(this, \"handleDocumentClick\", e => {\n      if (this.isClickedInside) {\n        this.isClickedInside = false;\n        return;\n      }\n      this.props.onClickOutside(e);\n    });\n    (0, _defineProperty2.default)(this, \"handleMouseDown\", () => {\n      this.isClickedInside = true;\n    });\n  }\n  componentDidMount() {\n    document.addEventListener('mousedown', this.handleDocumentClick);\n  }\n  componentWillUnmount() {\n    document.removeEventListener('mousedown', this.handleDocumentClick);\n  }\n  render() {\n    return /*#__PURE__*/_react.default.cloneElement(_react.default.Children.only(this.props.children), {\n      onMouseDownCapture: this.handleMouseDown\n    });\n  }\n}\nvar _default = exports.default = ClickOutside;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}