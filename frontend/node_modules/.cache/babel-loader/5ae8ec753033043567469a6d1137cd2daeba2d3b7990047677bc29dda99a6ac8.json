{"ast":null,"code":"import _objectSpread from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{seafileAPI}from'../../utils/seafile-api';import{gettext}from'../../utils/constants';import{Utils}from'../../utils/utils';import MainPanelTopbar from'./main-panel-topbar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Table=/*#__PURE__*/function(_Component){_inherits(Table,_Component);var _super=_createSuper(Table);function Table(){_classCallCheck(this,Table);return _super.apply(this,arguments);}_createClass(Table,[{key:\"render\",value:function render(){var _this$props=this.props,loading=_this$props.loading,errorMsg=_this$props.errorMsg,records=_this$props.records;if(loading){return/*#__PURE__*/_jsx(\"span\",{className:\"loading-icon loading-tip\"});}else if(errorMsg){return/*#__PURE__*/_jsx(\"p\",{className:\"error text-center\",children:errorMsg});}else{return/*#__PURE__*/_jsxs(\"table\",{width:\"100%\",className:\"table table-hover table-vcenter\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{width:\"16%\",children:gettext('Library')}),/*#__PURE__*/_jsx(\"th\",{width:\"30%\",children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{width:\"30%\",children:gettext('Path')}),/*#__PURE__*/_jsx(\"th\",{width:\"12%\",children:gettext('Label')}),/*#__PURE__*/_jsx(\"th\",{width:\"12%\",children:gettext('Suggestion')})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:records.map(function(record,index){return/*#__PURE__*/_jsx(Item,{record:record},index);})})]});}}}]);return Table;}(Component);var Item=/*#__PURE__*/function(_Component2){_inherits(Item,_Component2);var _super2=_createSuper(Item);function Item(props){var _this;_classCallCheck(this,Item);_this=_super2.call(this,props);_this.state={};return _this;}_createClass(Item,[{key:\"render\",value:function render(){var record=this.props.record;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:record.repo_name}),/*#__PURE__*/_jsx(\"td\",{children:record.repo_id}),/*#__PURE__*/_jsx(\"td\",{children:record.path}),/*#__PURE__*/_jsx(\"td\",{children:record.detail.label}),/*#__PURE__*/_jsx(\"td\",{children:record.detail.suggestion})]});}}]);return Item;}(Component);var FileScanRecords=/*#__PURE__*/function(_Component3){_inherits(FileScanRecords,_Component3);var _super3=_createSuper(FileScanRecords);function FileScanRecords(props){var _this2;_classCallCheck(this,FileScanRecords);_this2=_super3.call(this,props);_this2.state={loading:true,errorMsg:'',records:[]};return _this2;}_createClass(FileScanRecords,[{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;seafileAPI.listFileScanRecords().then(function(res){_this3.setState({loading:false,records:res.data.record_list});}).catch(function(error){_this3.setState({loading:false,errorMsg:Utils.getErrorMsg(error,true)// true: show login tip if 403\n});});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(MainPanelTopbar,_objectSpread({},this.props)),/*#__PURE__*/_jsx(\"div\",{className:\"main-panel-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cur-view-container\",id:\"content-scan-records\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cur-view-path\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"sf-heading\",children:gettext('Content Scan Records')})}),/*#__PURE__*/_jsx(\"div\",{className:\"cur-view-content\",children:/*#__PURE__*/_jsx(Table,{loading:this.state.loading,errorMsg:this.state.errorMsg,records:this.state.records})})]})})]});}}]);return FileScanRecords;}(Component);export default FileScanRecords;","map":{"version":3,"names":["React","Component","seafileAPI","gettext","Utils","MainPanelTopbar","jsx","_jsx","jsxs","_jsxs","Table","_Component","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","key","value","render","_this$props","props","loading","errorMsg","records","className","children","width","map","record","index","Item","_Component2","_super2","_this","call","state","repo_name","repo_id","path","detail","label","suggestion","FileScanRecords","_Component3","_super3","_this2","componentDidMount","_this3","listFileScanRecords","then","res","setState","data","record_list","catch","error","getErrorMsg","Fragment","_objectSpread","id"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/file-scan-records.js"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport MainPanelTopbar from './main-panel-topbar';\n\n\nconst tablePropTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  records: PropTypes.array.isRequired,\n};\n\nclass Table extends Component {\n\n  render() {\n    let { loading, errorMsg, records } = this.props;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      return (\n        <table width=\"100%\" className=\"table table-hover table-vcenter\">\n          <thead>\n            <tr>\n              <th width=\"16%\">{gettext('Library')}</th>\n              <th width=\"30%\">ID</th>\n              <th width=\"30%\">{gettext('Path')}</th>\n              <th width=\"12%\">{gettext('Label')}</th>\n              <th width=\"12%\">{gettext('Suggestion')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {records.map((record, index) => {\n              return (\n                <Item key={index} record={record} />\n              );\n            })}\n          </tbody>\n        </table>\n      );\n    }\n  }\n}\n\nTable.propTypes = tablePropTypes;\n\n\nconst itemPropTypes = {\n  record: PropTypes.object.isRequired,\n};\n\nclass Item extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  render() {\n    let record = this.props.record;\n\n    return (\n      <tr>\n        <td>{record.repo_name}</td>\n        <td>{record.repo_id}</td>\n        <td>{record.path}</td>\n        <td>{record.detail.label}</td>\n        <td>{record.detail.suggestion}</td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\n\nclass FileScanRecords extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      records: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listFileScanRecords().then((res) => {\n      this.setState({\n        loading: false,\n        records: res.data.record_list,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\" id=\"content-scan-records\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Content Scan Records')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Table\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                records={this.state.records}\n              />\n            </div>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default FileScanRecords;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}