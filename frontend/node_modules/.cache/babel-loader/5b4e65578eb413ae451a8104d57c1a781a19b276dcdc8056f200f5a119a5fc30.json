{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Fragment}from'react';import{siteRoot,username,enableSeadoc,thumbnailSizeForOriginal}from'../../utils/constants';import{Utils}from'../../utils/utils';import{seafileAPI}from'../../utils/seafile-api';import URLDecorator from'../../utils/url-decorator';import Loading from'../loading';import ModalPortal from'../modal-portal';import ImageDialog from'../../components/dialog/image-dialog';import DirentGridItem from'../../components/dirent-grid-view/dirent-grid-item';import ContextMenu from'../context-menu/context-menu';import{hideMenu,showMenu}from'../context-menu/actions';import TextTranslation from'../../utils/text-translation';import MoveDirentDialog from'../dialog/move-dirent-dialog';import CopyDirentDialog from'../dialog/copy-dirent-dialog';import ShareDialog from'../dialog/share-dialog';import ZipDownloadDialog from'../dialog/zip-download-dialog';import EditFileTagDialog from'../dialog/edit-filetag-dialog';import Rename from'../../components/dialog/rename-dirent';import CreateFile from'../dialog/create-file-dialog';import CreateFolder from'../dialog/create-folder-dialog';import LibSubFolderPermissionDialog from'../dialog/lib-sub-folder-permission-dialog';import toaster from'../toast';import'../../css/grid-view.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DirentGridView=/*#__PURE__*/function(_React$Component){_inherits(DirentGridView,_React$Component);var _super=_createSuper(DirentGridView);function DirentGridView(props){var _this;_classCallCheck(this,DirentGridView);_this=_super.call(this,props);_this.onCreateFileToggle=function(fileType){_this.setState({isCreateFileDialogShow:!_this.state.isCreateFileDialogShow,fileType:fileType||''});};_this.onGridItemClick=function(dirent){hideMenu();_this.setState({activeDirent:dirent});_this.props.onGridItemClick(dirent);};_this.onMoveToggle=function(){_this.setState({isMoveDialogShow:!_this.state.isMoveDialogShow});};_this.onCopyToggle=function(){_this.setState({isCopyDialogShow:!_this.state.isCopyDialogShow});};_this.onAddFolder=function(dirPath){_this.setState({isCreateFolderDialogShow:false});_this.props.onAddFolder(dirPath);};_this.onItemShare=function(e){e.nativeEvent.stopImmediatePropagation();//for document event\n_this.setState({isShareDialogShow:!_this.state.isShareDialogShow});};_this.closeSharedDialog=function(){_this.setState({isShareDialogShow:!_this.state.isShareDialogShow});};_this.onItemDelete=function(currentObject,e){e.nativeEvent.stopImmediatePropagation();//for document event\n_this.props.onItemDelete(currentObject);};_this.onItemConvert=function(currentObject,e,dstType){e.nativeEvent.stopImmediatePropagation();//for document event\n_this.props.onItemConvert(currentObject,dstType);};_this.exportDocx=function(){var serviceUrl=window.app.config.serviceURL;var repoID=_this.props.repoID;var filePath=_this.getDirentPath(_this.props.dirent);var exportToDocxUrl=serviceUrl+'/repo/sdoc_export_to_docx/'+repoID+'/?file_path='+filePath;window.location.href=exportToDocxUrl;};_this.onMenuItemClick=function(operation,currentObject,event){hideMenu();switch(operation){case'Download':_this.onItemDownload(currentObject,event);break;case'Share':_this.onItemShare(event);break;case'Delete':_this.onItemDelete(currentObject,event);break;case'Rename':_this.onItemRenameToggle();break;case'Move':_this.onItemMoveToggle();break;case'Copy':_this.onItemCopyToggle();break;case'Unfreeze Document':_this.onUnlockItem(currentObject);break;case'Freeze Document':_this.onFreezeDocument(currentObject);break;case'Convert to Markdown':_this.onItemConvert(currentObject,event,'markdown');break;case'Convert to docx':_this.onItemConvert(currentObject,event,'docx');break;case'Export docx':_this.exportDocx();break;case'Convert to sdoc':_this.onItemConvert(currentObject,event,'sdoc');break;case'Tags':_this.onEditFileTagToggle();break;case'Permission':_this.onPermissionItem();break;case'Unlock':_this.onUnlockItem(currentObject);break;case'Lock':_this.onLockItem(currentObject);break;case'History':_this.onHistory(currentObject);break;case'New Folder':_this.onCreateFolderToggle(currentObject);break;case'New File':_this.onCreateFileToggle('');break;case'New Markdown File':_this.onCreateFileToggle('.md');break;case'New Excel File':_this.onCreateFileToggle('.xlsx');break;case'New PowerPoint File':_this.onCreateFileToggle('.pptx');break;case'New Word File':_this.onCreateFileToggle('.docx');break;case'New SeaDoc File':_this.onCreateFileToggle('.sdoc');break;case'Access Log':_this.onAccessLog(currentObject);break;case'Properties':_this.props.showDirentDetail('info');break;case'Open via Client':_this.onOpenViaClient(currentObject);break;default:break;}};_this.onEditFileTagToggle=function(){_this.setState({isEditFileTagShow:!_this.state.isEditFileTagShow});};_this.onFileTagChanged=function(){var dirent=_this.state.activeDirent?_this.state.activeDirent:'';var direntPath=Utils.joinPath(_this.props.path,dirent.name);_this.props.onFileTagChanged(dirent,direntPath);};_this.getDirentPath=function(dirent){var path=_this.props.path;return path==='/'?path+dirent.name:path+'/'+dirent.name;};_this.closeZipDialog=function(){_this.setState({isZipDialogOpen:false});};_this.onItemDownload=function(currentObject,e){e.nativeEvent.stopImmediatePropagation();var dirent=currentObject;var repoID=_this.props.repoID;var direntPath=_this.getDirentPath(dirent);if(dirent.type==='dir'){_this.setState({isZipDialogOpen:true});}else{var url=URLDecorator.getUrl({type:'download_file_url',repoID:repoID,filePath:direntPath});location.href=url;}};_this.onCreateFolderToggle=function(){_this.setState({isCreateFolderDialogShow:!_this.state.isCreateFolderDialogShow});};_this.onItemRenameToggle=function(){_this.setState({isRenameDialogShow:!_this.state.isRenameDialogShow});};_this.onItemMoveToggle=function(){_this.setState({isMoveDialogShow:!_this.state.isMoveDialogShow});};_this.onItemCopyToggle=function(){_this.setState({isCopyDialogShow:!_this.state.isCopyDialogShow});};_this.onPermissionItem=function(){_this.setState({isPermissionDialogOpen:!_this.state.isPermissionDialogOpen});};_this.onLockItem=function(currentObject){var repoID=_this.props.repoID;var filePath=_this.getDirentPath(currentObject);seafileAPI.lockfile(repoID,filePath).then(function(){_this.props.updateDirent(currentObject,'is_locked',true);_this.props.updateDirent(currentObject,'locked_by_me',true);var lockName=username.split('@');_this.props.updateDirent(currentObject,'lock_owner_name',lockName[0]);}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this.onFreezeDocument=function(currentObject){var repoID=_this.props.repoID;var filePath=_this.getDirentPath(currentObject);seafileAPI.lockfile(repoID,filePath,-1).then(function(){_this.props.updateDirent(currentObject,'is_freezed',true);_this.props.updateDirent(currentObject,'is_locked',true);_this.props.updateDirent(currentObject,'locked_by_me',true);var lockName=username.split('@');_this.props.updateDirent(currentObject,'lock_owner_name',lockName[0]);}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this.onUnlockItem=function(currentObject){var repoID=_this.props.repoID;var filePath=_this.getDirentPath(currentObject);seafileAPI.unlockfile(repoID,filePath).then(function(){_this.props.updateDirent(currentObject,'is_locked',false);_this.props.updateDirent(currentObject,'locked_by_me',false);_this.props.updateDirent(currentObject,'lock_owner_name','');}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this.onHistory=function(currentObject){var repoID=_this.props.repoID;var filePath=_this.getDirentPath(currentObject);var url=URLDecorator.getUrl({type:'file_revisions',repoID:repoID,filePath:filePath});location.href=url;};_this.onAccessLog=function(currentObject){var filePath=_this.getDirentPath(currentObject);var path=siteRoot+'repo/file-access/'+_this.props.repoID+'/?p='+encodeURIComponent(filePath);window.open(path);};_this.onOpenViaClient=function(currentObject){var repoID=_this.props.repoID;var filePath=_this.getDirentPath(currentObject);var url=URLDecorator.getUrl({type:'open_via_client',repoID:repoID,filePath:filePath});location.href=url;};_this.onItemRename=function(newName){_this.props.onItemRename(_this.state.activeDirent,newName);};_this.prepareImageItem=function(item){var name=item.name;var repoID=_this.props.repoID;var path=Utils.encodePath(Utils.joinPath(_this.props.path,name));var fileExt=name.substr(name.lastIndexOf('.')+1).toLowerCase();var isTIFF=fileExt=='tiff';var src='';if(isTIFF){src=\"\".concat(siteRoot,\"thumbnail/\").concat(repoID,\"/\").concat(thumbnailSizeForOriginal).concat(path);}else{src=\"\".concat(siteRoot,\"repo/\").concat(repoID,\"/raw\").concat(path);}return{'name':name,'url':\"\".concat(siteRoot,\"lib/\").concat(repoID,\"/file\").concat(path),'src':src};};_this.showImagePopup=function(curItem){var items=_this.props.fullDirentList.filter(function(item){return Utils.imageCheck(item.name);});var imageItems=items.map(function(item){return _this.prepareImageItem(item);});_this.setState({isImagePopupOpen:true,imageItems:imageItems,imageIndex:items.indexOf(curItem)});};_this.closeImagePopup=function(){_this.setState({isImagePopupOpen:false});};_this.moveToPrevImage=function(){var imageItemsLength=_this.state.imageItems.length;_this.setState(function(prevState){return{imageIndex:(prevState.imageIndex+imageItemsLength-1)%imageItemsLength};});};_this.moveToNextImage=function(){var imageItemsLength=_this.state.imageItems.length;_this.setState(function(prevState){return{imageIndex:(prevState.imageIndex+1)%imageItemsLength};});};_this.checkDuplicatedName=function(newName){return Utils.checkDuplicatedNameInList(_this.props.direntList,newName);};// common contextmenu handle\n_this.onMouseDown=function(event){event.stopPropagation();if(event.button===2){return;}};_this.onGridContainerMouseDown=function(event){_this.onMouseDown(event);};_this.onGridItemMouseDown=function(event){_this.onMouseDown(event);};_this.gridContainerClick=function(){hideMenu();if(!_this.props.isDirentDetailShow){_this.onGridItemClick(null);}};_this.onGridContainerContextMenu=function(event){event.preventDefault();// Display menu items based on the permissions of the current path\nvar permission=_this.props.userPerm;if(permission!=='admin'&&permission!=='rw'){return;}var id='dirent-grid-container-menu';var NEW_FOLDER=TextTranslation.NEW_FOLDER,NEW_FILE=TextTranslation.NEW_FILE,NEW_MARKDOWN_FILE=TextTranslation.NEW_MARKDOWN_FILE,NEW_EXCEL_FILE=TextTranslation.NEW_EXCEL_FILE,NEW_POWERPOINT_FILE=TextTranslation.NEW_POWERPOINT_FILE,NEW_WORD_FILE=TextTranslation.NEW_WORD_FILE,NEW_SEADOC_FILE=TextTranslation.NEW_SEADOC_FILE;var menuList=[NEW_FOLDER,NEW_FILE,'Divider',NEW_MARKDOWN_FILE,NEW_EXCEL_FILE,NEW_POWERPOINT_FILE,NEW_WORD_FILE];var currentRepoInfo=_this.props.currentRepoInfo;if(enableSeadoc&&!currentRepoInfo.encrypted){menuList.push(NEW_SEADOC_FILE);}_this.handleContextClick(event,id,menuList);};_this.onGridItemContextMenu=function(event,dirent){// Display menu items according to the current dirent permission\nvar id='grid-item-contextmenu';var menuList=_this.getDirentItemMenuList(dirent,true);_this.handleContextClick(event,id,menuList,dirent);_this.props.onGridItemClick&&_this.props.onGridItemClick(dirent);};_this.handleContextClick=function(event,id,menuList){var currentObject=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;event.preventDefault();event.stopPropagation();var x=event.clientX||event.touches&&event.touches[0].pageX;var y=event.clientY||event.touches&&event.touches[0].pageY;if(_this.props.posX){x-=_this.props.posX;}if(_this.props.posY){y-=_this.props.posY;}hideMenu();_this.setState({activeDirent:currentObject});var showMenuConfig={id:id,position:{x:x,y:y},target:event.target,currentObject:currentObject,menuList:menuList};if(menuList.length===0){return;}showMenu(showMenuConfig);};_this.getDirentItemMenuList=function(dirent,isContextmenu){var isRepoOwner=_this.isRepoOwner;var currentRepoInfo=_this.props.currentRepoInfo;return Utils.getDirentOperationList(isRepoOwner,currentRepoInfo,dirent,isContextmenu);};_this.state={isImagePopupOpen:false,imageItems:[],imageIndex:0,// onmenuClick\nisShareDialogShow:false,isMoveDialogShow:false,isCopyDialogShow:false,isEditFileTagShow:false,isZipDialogOpen:false,isRenameDialogShow:false,isCreateFolderDialogShow:false,isCreateFileDialogShow:false,fileType:'',isPermissionDialogOpen:false,isMutipleOperation:false,isGridItemFreezed:false,activeDirent:null};_this.isRepoOwner=props.currentRepoInfo.owner_email===username;return _this;}_createClass(DirentGridView,[{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,direntList=_this$props.direntList,path=_this$props.path;var dirent=this.state.activeDirent?this.state.activeDirent:'';var direntPath=Utils.joinPath(path,dirent.name);if(this.props.isDirentListLoading){return/*#__PURE__*/_jsx(Loading,{});}return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"ul\",{className:\"grid-view\",onClick:this.gridContainerClick,onContextMenu:this.onGridContainerContextMenu,onMouseDown:this.onGridContainerMouseDown,children:direntList.length!==0&&direntList.map(function(dirent,index){return/*#__PURE__*/_jsx(DirentGridItem,{dirent:dirent,repoID:_this2.props.repoID,path:_this2.props.path,onItemClick:_this2.props.onItemClick,currentRepoInfo:_this2.props.currentRepoInfo,showImagePopup:_this2.showImagePopup,onGridItemContextMenu:_this2.onGridItemContextMenu,onItemMove:_this2.props.onItemMove,onGridItemMouseDown:_this2.onGridItemMouseDown,onGridItemClick:_this2.onGridItemClick,activeDirent:_this2.state.activeDirent},index);})}),/*#__PURE__*/_jsx(ContextMenu,{id:'grid-item-contextmenu',onMenuItemClick:this.onMenuItemClick}),/*#__PURE__*/_jsx(ContextMenu,{id:'dirent-grid-container-menu',onMenuItemClick:this.onMenuItemClick}),this.state.isCreateFolderDialogShow&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(CreateFolder,{parentPath:this.props.path,onAddFolder:this.onAddFolder,checkDuplicatedName:this.checkDuplicatedName,addFolderCancel:this.onCreateFolderToggle})}),this.state.isCreateFileDialogShow&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(CreateFile,{parentPath:this.props.path,fileType:this.state.fileType,onAddFile:this.props.onAddFile,checkDuplicatedName:this.checkDuplicatedName,toggleDialog:this.onCreateFileToggle})}),this.state.isMoveDialogShow&&/*#__PURE__*/_jsx(MoveDirentDialog,{path:this.props.path,repoID:this.props.repoID,repoEncrypted:this.props.currentRepoInfo.encrypted,isMutipleOperation:this.state.isMutipleOperation,onItemMove:this.props.onItemMove,onCancelMove:this.onMoveToggle,dirent:this.state.activeDirent}),this.state.isZipDialogOpen&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(ZipDownloadDialog,{repoID:this.props.repoID,path:this.props.path,target:dirent.name,toggleDialog:this.closeZipDialog})}),this.state.isCopyDialogShow&&/*#__PURE__*/_jsx(CopyDirentDialog,{path:this.props.path,repoID:this.props.repoID,repoEncrypted:this.props.currentRepoInfo.encrypted,isMutipleOperation:this.state.isMutipleOperation,onItemCopy:this.props.onItemCopy,onCancelCopy:this.onCopyToggle,dirent:this.state.activeDirent}),this.state.isEditFileTagShow&&/*#__PURE__*/_jsx(EditFileTagDialog,{repoID:this.props.repoID,fileTagList:dirent.file_tags,filePath:direntPath,toggleCancel:this.onEditFileTagToggle,repoTags:this.props.repoTags,onFileTagChanged:this.onFileTagChanged}),this.state.isShareDialogShow&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(ShareDialog,{itemType:dirent.type,itemName:dirent.name,itemPath:direntPath,userPerm:dirent.permission,repoID:this.props.repoID,repoEncrypted:false,enableDirPrivateShare:this.props.enableDirPrivateShare,isGroupOwnedRepo:this.props.isGroupOwnedRepo,toggleDialog:this.closeSharedDialog})}),this.state.isRenameDialogShow&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(Rename,{dirent:this.state.activeDirent,onRename:this.onItemRename,checkDuplicatedName:this.checkDuplicatedName,toggleCancel:this.onItemRenameToggle})}),this.state.isPermissionDialogOpen&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(LibSubFolderPermissionDialog,{toggleDialog:this.onPermissionItem,repoID:this.props.repoID,folderPath:direntPath,folderName:dirent.name,isDepartmentRepo:this.props.isGroupOwnedRepo})}),this.state.isImagePopupOpen&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(ImageDialog,{imageItems:this.state.imageItems,imageIndex:this.state.imageIndex,closeImagePopup:this.closeImagePopup,moveToPrevImage:this.moveToPrevImage,moveToNextImage:this.moveToNextImage})})]});}}]);return DirentGridView;}(React.Component);export default DirentGridView;","map":{"version":3,"names":["React","Fragment","siteRoot","username","enableSeadoc","thumbnailSizeForOriginal","Utils","seafileAPI","URLDecorator","Loading","ModalPortal","ImageDialog","DirentGridItem","ContextMenu","hideMenu","showMenu","TextTranslation","MoveDirentDialog","CopyDirentDialog","ShareDialog","ZipDownloadDialog","EditFileTagDialog","Rename","CreateFile","CreateFolder","LibSubFolderPermissionDialog","toaster","jsx","_jsx","jsxs","_jsxs","DirentGridView","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","onCreateFileToggle","fileType","setState","isCreateFileDialogShow","state","onGridItemClick","dirent","activeDirent","onMoveToggle","isMoveDialogShow","onCopyToggle","isCopyDialogShow","onAddFolder","dirPath","isCreateFolderDialogShow","onItemShare","e","nativeEvent","stopImmediatePropagation","isShareDialogShow","closeSharedDialog","onItemDelete","currentObject","onItemConvert","dstType","exportDocx","serviceUrl","window","app","config","serviceURL","repoID","filePath","getDirentPath","exportToDocxUrl","location","href","onMenuItemClick","operation","event","onItemDownload","onItemRenameToggle","onItemMoveToggle","onItemCopyToggle","onUnlockItem","onFreezeDocument","onEditFileTagToggle","onPermissionItem","onLockItem","onHistory","onCreateFolderToggle","onAccessLog","showDirentDetail","onOpenViaClient","isEditFileTagShow","onFileTagChanged","direntPath","joinPath","path","name","closeZipDialog","isZipDialogOpen","type","url","getUrl","isRenameDialogShow","isPermissionDialogOpen","lockfile","then","updateDirent","lockName","split","catch","error","errMessage","getErrorMsg","danger","unlockfile","encodeURIComponent","open","onItemRename","newName","prepareImageItem","item","encodePath","fileExt","substr","lastIndexOf","toLowerCase","isTIFF","src","concat","showImagePopup","curItem","items","fullDirentList","filter","imageCheck","imageItems","map","isImagePopupOpen","imageIndex","indexOf","closeImagePopup","moveToPrevImage","imageItemsLength","length","prevState","moveToNextImage","checkDuplicatedName","checkDuplicatedNameInList","direntList","onMouseDown","stopPropagation","button","onGridContainerMouseDown","onGridItemMouseDown","gridContainerClick","isDirentDetailShow","onGridContainerContextMenu","preventDefault","permission","userPerm","id","NEW_FOLDER","NEW_FILE","NEW_MARKDOWN_FILE","NEW_EXCEL_FILE","NEW_POWERPOINT_FILE","NEW_WORD_FILE","NEW_SEADOC_FILE","menuList","currentRepoInfo","encrypted","push","handleContextClick","onGridItemContextMenu","getDirentItemMenuList","arguments","undefined","x","clientX","touches","pageX","y","clientY","pageY","posX","posY","showMenuConfig","position","target","isContextmenu","isRepoOwner","getDirentOperationList","isMutipleOperation","isGridItemFreezed","owner_email","_createClass","key","value","render","_this2","_this$props","isDirentListLoading","children","className","onClick","onContextMenu","index","onItemClick","onItemMove","parentPath","addFolderCancel","onAddFile","toggleDialog","repoEncrypted","onCancelMove","onItemCopy","onCancelCopy","fileTagList","file_tags","toggleCancel","repoTags","itemType","itemName","itemPath","enableDirPrivateShare","isGroupOwnedRepo","onRename","folderPath","folderName","isDepartmentRepo","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dirent-grid-view/dirent-grid-view.js"],"sourcesContent":["import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, username, enableSeadoc, thumbnailSizeForOriginal } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport Loading from '../loading';\nimport ModalPortal from '../modal-portal';\nimport ImageDialog from '../../components/dialog/image-dialog';\nimport DirentGridItem from '../../components/dirent-grid-view/dirent-grid-item';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport TextTranslation from '../../utils/text-translation';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport Rename from '../../components/dialog/rename-dirent';\nimport CreateFile from '../dialog/create-file-dialog';\nimport CreateFolder from '../dialog/create-folder-dialog';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport toaster from '../toast';\n\nimport '../../css/grid-view.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object,\n  direntList: PropTypes.array.isRequired,\n  fullDirentList: PropTypes.array,\n  onAddFile: PropTypes.func,\n  onItemDelete: PropTypes.func,\n  onItemCopy: PropTypes.func.isRequired,\n  onItemConvert: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string, // current path's user permission\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  onGridItemClick: PropTypes.func,\n  repoTags: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func,\n  onAddFolder: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  posX: PropTypes.number,\n  posY: PropTypes.number,\n  dirent: PropTypes.object,\n};\n\nclass DirentGridView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isImagePopupOpen: false,\n      imageItems: [],\n      imageIndex: 0,\n      // onmenuClick\n      isShareDialogShow: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isEditFileTagShow: false,\n      isZipDialogOpen: false,\n      isRenameDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isCreateFileDialogShow: false,\n      fileType: '',\n      isPermissionDialogOpen: false,\n\n      isMutipleOperation: false,\n      isGridItemFreezed: false,\n      activeDirent: null,\n    };\n    this.isRepoOwner = props.currentRepoInfo.owner_email === username;\n  }\n\n  onCreateFileToggle = (fileType) => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: fileType || ''\n    });\n  };\n\n  onGridItemClick = (dirent) => {\n    hideMenu();\n    this.setState({activeDirent: dirent});\n    this.props.onGridItemClick(dirent);\n  };\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  };\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  };\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  };\n\n  onItemShare = (e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  };\n\n  closeSharedDialog = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  };\n\n  onItemDelete = (currentObject, e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemDelete(currentObject);\n  };\n\n  onItemConvert = (currentObject, e, dstType) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemConvert(currentObject, dstType);\n  };\n\n  exportDocx = () => {\n    const serviceUrl = window.app.config.serviceURL;\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let exportToDocxUrl = serviceUrl + '/repo/sdoc_export_to_docx/' + repoID + '/?file_path=' + filePath;\n    window.location.href = exportToDocxUrl;\n  };\n\n  onMenuItemClick = (operation, currentObject, event) => {\n    hideMenu();\n    switch(operation) {\n      case 'Download':\n        this.onItemDownload(currentObject, event);\n        break;\n      case 'Share':\n        this.onItemShare(event);\n        break;\n      case 'Delete':\n        this.onItemDelete(currentObject, event);\n        break;\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Move':\n        this.onItemMoveToggle();\n        break;\n      case 'Copy':\n        this.onItemCopyToggle();\n        break;\n      case 'Unfreeze Document':\n        this.onUnlockItem(currentObject);\n        break;\n      case 'Freeze Document':\n        this.onFreezeDocument(currentObject);\n        break;\n      case 'Convert to Markdown':\n        this.onItemConvert(currentObject, event, 'markdown');\n        break;\n      case 'Convert to docx':\n        this.onItemConvert(currentObject, event, 'docx');\n        break;\n      case 'Export docx':\n        this.exportDocx();\n        break;\n      case 'Convert to sdoc':\n        this.onItemConvert(currentObject, event, 'sdoc');\n        break;\n      case 'Tags':\n        this.onEditFileTagToggle();\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Unlock':\n        this.onUnlockItem(currentObject);\n        break;\n      case 'Lock':\n        this.onLockItem(currentObject);\n        break;\n      case 'History':\n        this.onHistory(currentObject);\n        break;\n      case 'New Folder':\n        this.onCreateFolderToggle(currentObject);\n        break;\n      case 'New File':\n        this.onCreateFileToggle('');\n        break;\n      case 'New Markdown File':\n        this.onCreateFileToggle('.md');\n        break;\n      case 'New Excel File':\n        this.onCreateFileToggle('.xlsx');\n        break;\n      case 'New PowerPoint File':\n        this.onCreateFileToggle('.pptx');\n        break;\n      case 'New Word File':\n        this.onCreateFileToggle('.docx');\n        break;\n      case 'New SeaDoc File':\n        this.onCreateFileToggle('.sdoc');\n        break;\n      case 'Access Log':\n        this.onAccessLog(currentObject);\n        break;\n      case 'Properties':\n        this.props.showDirentDetail('info');\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient(currentObject);\n        break;\n      default:\n        break;\n    }\n  };\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  };\n\n  onFileTagChanged = () => {\n    let dirent = this.state.activeDirent ? this.state.activeDirent : '';\n    let direntPath = Utils.joinPath(this.props.path, dirent.name);\n    this.props.onFileTagChanged(dirent, direntPath);\n  };\n\n  getDirentPath = (dirent) => {\n    let path = this.props.path;\n    return path === '/' ? path + dirent.name : path + '/' + dirent.name;\n  };\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  };\n\n  onItemDownload = (currentObject, e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let dirent = currentObject;\n    let repoID = this.props.repoID;\n    let direntPath = this.getDirentPath(dirent);\n    if (dirent.type === 'dir') {\n      this.setState({\n        isZipDialogOpen: true\n      });\n    } else {\n      let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n      location.href = url;\n    }\n  };\n\n  onCreateFolderToggle = () => {\n    this.setState({\n      isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow,\n    });\n  };\n\n  onItemRenameToggle = () => {\n    this.setState({\n      isRenameDialogShow: !this.state.isRenameDialogShow,\n    });\n  };\n\n  onItemMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  };\n\n  onItemCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  };\n\n  onPermissionItem = () => {\n    this.setState({isPermissionDialogOpen: !this.state.isPermissionDialogOpen});\n  };\n\n  onLockItem = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.lockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(currentObject, 'is_locked', true);\n      this.props.updateDirent(currentObject, 'locked_by_me', true);\n      let lockName = username.split('@');\n      this.props.updateDirent(currentObject, 'lock_owner_name', lockName[0]);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onFreezeDocument = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.lockfile(repoID, filePath, -1).then(() => {\n      this.props.updateDirent(currentObject, 'is_freezed', true);\n      this.props.updateDirent(currentObject, 'is_locked', true);\n      this.props.updateDirent(currentObject, 'locked_by_me', true);\n      let lockName = username.split('@');\n      this.props.updateDirent(currentObject, 'lock_owner_name', lockName[0]);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onUnlockItem = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.unlockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(currentObject, 'is_locked', false);\n      this.props.updateDirent(currentObject, 'locked_by_me', false);\n      this.props.updateDirent(currentObject, 'lock_owner_name', '');\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onHistory = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    let url = URLDecorator.getUrl({type: 'file_revisions', repoID: repoID, filePath: filePath});\n    location.href = url;\n  };\n\n  onAccessLog = (currentObject) => {\n    let filePath = this.getDirentPath(currentObject);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  };\n\n  onOpenViaClient = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    let url = URLDecorator.getUrl({type: 'open_via_client', repoID: repoID, filePath: filePath});\n    location.href = url;\n  };\n\n  onItemRename = (newName) => {\n    this.props.onItemRename(this.state.activeDirent, newName);\n  };\n\n  prepareImageItem = (item) => {\n    const name = item.name;\n    const repoID = this.props.repoID;\n    const path = Utils.encodePath(Utils.joinPath(this.props.path, name));\n\n    const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n    const isTIFF = fileExt == 'tiff';\n    let src = '';\n    if (isTIFF) {\n      src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n    } else {\n      src = `${siteRoot}repo/${repoID}/raw${path}`;\n    }\n\n    return {\n      'name': name,\n      'url': `${siteRoot}lib/${repoID}/file${path}`,\n      'src': src\n    };\n  };\n\n  showImagePopup = (curItem) => {\n    let items = this.props.fullDirentList.filter((item) => {\n      return Utils.imageCheck(item.name);\n    });\n\n    const imageItems = items.map((item) => {\n      return this.prepareImageItem(item);\n    });\n\n    this.setState({\n      isImagePopupOpen: true,\n      imageItems: imageItems,\n      imageIndex: items.indexOf(curItem)\n    });\n  };\n\n  closeImagePopup = () => {\n    this.setState({isImagePopupOpen: false});\n  };\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  };\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  };\n\n  checkDuplicatedName = (newName) => {\n    return Utils.checkDuplicatedNameInList(this.props.direntList, newName);\n  };\n\n  // common contextmenu handle\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  };\n\n  onGridContainerMouseDown = (event) => {\n    this.onMouseDown(event);\n  };\n\n  onGridItemMouseDown = (event) => {\n    this.onMouseDown(event);\n  };\n\n  gridContainerClick = () => {\n    hideMenu();\n    if (!this.props.isDirentDetailShow) {\n      this.onGridItemClick(null);\n    }\n  };\n\n  onGridContainerContextMenu = (event) => {\n    event.preventDefault();\n    // Display menu items based on the permissions of the current path\n    let permission = this.props.userPerm;\n    if (permission !== 'admin' && permission !== 'rw') {\n      return;\n    }\n    let id = 'dirent-grid-container-menu';\n    const {\n      NEW_FOLDER, NEW_FILE,\n      NEW_MARKDOWN_FILE,\n      NEW_EXCEL_FILE,\n      NEW_POWERPOINT_FILE,\n      NEW_WORD_FILE,\n      NEW_SEADOC_FILE\n    } = TextTranslation;\n\n    const menuList = [\n      NEW_FOLDER, NEW_FILE, 'Divider',\n      NEW_MARKDOWN_FILE,\n      NEW_EXCEL_FILE,\n      NEW_POWERPOINT_FILE,\n      NEW_WORD_FILE\n    ];\n    const { currentRepoInfo } = this.props;\n    if (enableSeadoc && !currentRepoInfo.encrypted) {\n      menuList.push(NEW_SEADOC_FILE);\n    }\n    this.handleContextClick(event, id, menuList);\n  };\n\n  onGridItemContextMenu = (event, dirent) => {\n    // Display menu items according to the current dirent permission\n    let id = 'grid-item-contextmenu';\n    let menuList = this.getDirentItemMenuList(dirent, true);\n    this.handleContextClick(event, id, menuList, dirent);\n    this.props.onGridItemClick && this.props.onGridItemClick(dirent);\n  };\n\n  handleContextClick = (event, id, menuList, currentObject = null) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    this.setState({activeDirent: currentObject});\n\n    let showMenuConfig = {\n      id: id,\n      position: { x, y },\n      target: event.target,\n      currentObject: currentObject,\n      menuList: menuList,\n    };\n\n    if (menuList.length === 0) {\n      return;\n    }\n\n    showMenu(showMenuConfig);\n  };\n\n  getDirentItemMenuList = (dirent, isContextmenu) => {\n    const isRepoOwner = this.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    return Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n  };\n\n  render() {\n    let {direntList, path} = this.props;\n    let dirent = this.state.activeDirent ? this.state.activeDirent : '';\n    let direntPath = Utils.joinPath(path, dirent.name);\n\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    return (\n      <Fragment>\n        <ul className=\"grid-view\" onClick={this.gridContainerClick} onContextMenu={this.onGridContainerContextMenu} onMouseDown={this.onGridContainerMouseDown}>\n          {\n            direntList.length !== 0 && direntList.map((dirent, index) => {\n              return (\n                <DirentGridItem\n                  key={index}\n                  dirent={dirent}\n                  repoID={this.props.repoID}\n                  path={this.props.path}\n                  onItemClick={this.props.onItemClick}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  showImagePopup={this.showImagePopup}\n                  onGridItemContextMenu={this.onGridItemContextMenu}\n                  onItemMove={this.props.onItemMove}\n                  onGridItemMouseDown={this.onGridItemMouseDown}\n                  onGridItemClick={this.onGridItemClick}\n                  activeDirent={this.state.activeDirent}\n                />\n              );\n            })\n          }\n        </ul>\n        <ContextMenu\n          id={'grid-item-contextmenu'}\n          onMenuItemClick={this.onMenuItemClick}\n        />\n        <ContextMenu\n          id={'dirent-grid-container-menu'}\n          onMenuItemClick={this.onMenuItemClick}\n        />\n        {this.state.isCreateFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.props.path}\n              onAddFolder={this.onAddFolder}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onCreateFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              fileType={this.state.fileType}\n              onAddFile={this.props.onAddFile}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleDialog={this.onCreateFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isMoveDialogShow &&\n          <MoveDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.currentRepoInfo.encrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemMove={this.props.onItemMove}\n            onCancelMove={this.onMoveToggle}\n            dirent={this.state.activeDirent}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n          <ModalPortal>\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={dirent.name}\n              toggleDialog={this.closeZipDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isCopyDialogShow &&\n          <CopyDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.currentRepoInfo.encrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemCopy={this.props.onItemCopy}\n            onCancelCopy={this.onCopyToggle}\n            dirent={this.state.activeDirent}\n          />\n        }\n        {this.state.isEditFileTagShow &&\n          <EditFileTagDialog\n            repoID={this.props.repoID}\n            fileTagList={dirent.file_tags}\n            filePath={direntPath}\n            toggleCancel={this.onEditFileTagToggle}\n            repoTags={this.props.repoTags}\n            onFileTagChanged={this.onFileTagChanged}\n          />\n        }\n        {this.state.isShareDialogShow &&\n          <ModalPortal>\n            <ShareDialog\n              itemType={dirent.type}\n              itemName={dirent.name}\n              itemPath={direntPath}\n              userPerm={dirent.permission}\n              repoID={this.props.repoID}\n              repoEncrypted={false}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.closeSharedDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isRenameDialogShow && (\n          <ModalPortal>\n            <Rename\n              dirent={this.state.activeDirent}\n              onRename={this.onItemRename}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleCancel={this.onItemRenameToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isPermissionDialogOpen &&\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onPermissionItem}\n              repoID={this.props.repoID}\n              folderPath={direntPath}\n              folderName={dirent.name}\n              isDepartmentRepo={this.props.isGroupOwnedRepo}\n            />\n          </ModalPortal>\n        }\n        {this.state.isImagePopupOpen && (\n          <ModalPortal>\n            <ImageDialog\n              imageItems={this.state.imageItems}\n              imageIndex={this.state.imageIndex}\n              closeImagePopup={this.closeImagePopup}\n              moveToPrevImage={this.moveToPrevImage}\n              moveToNextImage={this.moveToNextImage}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentGridView.propTypes = propTypes;\n\nexport default DirentGridView;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}