{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\nvar _asyncToGenerator = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nvar _objectSpread = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/objectSpread2.js\").default;\nvar _slicedToArray = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.upsertLinkText = exports.updateLink = exports.unWrapLinkNode = exports.isMenuDisabled = exports.isLinkType = exports.insertSeafileLink = exports.insertLink = exports.getLinkInfo = exports.generateLinkNode = void 0;\nvar _slate = require(\"slate\");\nvar _slugid = _interopRequireDefault(require(\"slugid\"));\nvar _queries = require(\"../../core/queries\");\nvar _focusEditor = require(\"../../core/transforms/focus-editor\");\nvar _constants = require(\"../../constants\");\nvar _utils = require(\"../../core/utils\");\nvar _replaceNodeChildren = require(\"../../core/transforms/replace-node-children\");\nvar isMenuDisabled = function isMenuDisabled(editor) {\n  var readonly = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  if (readonly) return true;\n  var selection = editor.selection;\n  if (!selection) return false;\n  var selectedElems = (0, _queries.getSelectedElems)(editor);\n  // Check if the selected element is illegal\n  var isSelectedIllegalElement = selectedElems.some(function (elem) {\n    var type = elem.type;\n    if (editor.isVoid(elem)) return true;\n    if ([_constants.ELementTypes.CODE_BLOCK, _constants.ELementTypes.CODE_LINE].includes(type)) return true;\n    return false;\n  });\n  if (isSelectedIllegalElement) return true;\n  return false;\n};\nexports.isMenuDisabled = isMenuDisabled;\nvar isLinkType = function isLinkType(editor) {\n  var _slate$Editor$nodes = _slate.Editor.nodes(editor, {\n      match: function match(n) {\n        return (0, _queries.getNodeType)(n) === _constants.ELementTypes.LINK;\n      },\n      universal: true\n    }),\n    _slate$Editor$nodes2 = _slicedToArray(_slate$Editor$nodes, 1),\n    match = _slate$Editor$nodes2[0];\n  return !!match;\n};\nexports.isLinkType = isLinkType;\nvar generateLinkNode = function generateLinkNode(url, title) {\n  var linkNode = {\n    type: _constants.ELementTypes.LINK,\n    url: url,\n    title: title,\n    id: _slugid.default.nice(),\n    children: [{\n      id: _slugid.default.nice(),\n      text: title || ''\n    }]\n  };\n  return linkNode;\n};\n\n/**\n * @param {Object} props\n * @param {Object} props.editor\n * @param {String} props.url\n * @param {String} props.title\n * @param {InsertPosition} props.insertPosition\n * @param {Object | undefined} props.slateNode\n */\nexports.generateLinkNode = generateLinkNode;\nvar insertLink = function insertLink(props) {\n  var editor = props.editor,\n    url = props.url,\n    title = props.title,\n    _props$insertPosition = props.insertPosition,\n    insertPosition = _props$insertPosition === void 0 ? _constants.INSERT_POSITION.CURRENT : _props$insertPosition,\n    slateNode = props.slateNode;\n  var selection = editor.selection;\n  if (insertPosition === _constants.INSERT_POSITION.CURRENT && isMenuDisabled(editor)) return;\n  // We had validated in modal,here we do it again for safety\n  if (!title || !url) return;\n  if (!selection) return;\n  var linkNode = generateLinkNode(url, title);\n  if (insertPosition === _constants.INSERT_POSITION.AFTER) {\n    var path = _slate.Editor.path(editor, selection);\n    if (slateNode && (slateNode === null || slateNode === void 0 ? void 0 : slateNode.type) === _constants.ELementTypes.LIST_ITEM) {\n      path = (0, _queries.findPath)(editor, slateNode, []);\n      var nextPath = _slate.Path.next(path);\n      _slate.Editor.insertNodes(editor, linkNode, {\n        at: nextPath\n      });\n      return;\n    }\n    var linkNodeWrapper = (0, _utils.generateEmptyElement)(_constants.ELementTypes.PARAGRAPH);\n    // LinkNode should be wrapped by p and within text nodes in order to be editable\n    linkNodeWrapper.children.push(linkNode, (0, _utils.generateDefaultText)());\n    _slate.Transforms.insertNodes(editor, linkNodeWrapper, {\n      at: [path[0] + 1]\n    });\n    (0, _focusEditor.focusEditor)(editor);\n    return;\n  }\n  var isCollapsed = _slate.Range.isCollapsed(selection);\n  if (isCollapsed) {\n    // If selection is collapsed, we insert a space and then insert link node that help operation easier\n    editor.insertText('');\n    _slate.Editor.insertFragment(editor, [linkNode]);\n    // Using insertText directly causes the added Spaces to be added to the linked text, as in the issue above, so replaced by insertFragment\n    _slate.Editor.insertFragment(editor, [{\n      id: _slugid.default.nice(),\n      text: ''\n    }]);\n    (0, _focusEditor.focusEditor)(editor);\n    return;\n  } else {\n    var selectedText = _slate.Editor.string(editor, selection); // Selected text\n    if (selectedText !== title) {\n      // Replace the selected text with the link node if the selected text is different from the entered text\n      editor.deleteFragment();\n      _slate.Transforms.insertNodes(editor, linkNode);\n    } else {\n      // Wrap the selected text with the link node if the selected text is the same as the entered text\n      _slate.Transforms.wrapNodes(editor, linkNode, {\n        split: true,\n        at: selection\n      });\n      _slate.Transforms.collapse(editor, {\n        edge: 'end'\n      });\n    }\n  }\n  (0, _focusEditor.focusEditor)(editor);\n};\nexports.insertLink = insertLink;\nvar insertSeafileLink = function insertSeafileLink(_ref) {\n  var editor = _ref.editor,\n    url = _ref.url,\n    title = _ref.title,\n    selection = _ref.selection;\n  (0, _focusEditor.focusEditor)(editor, selection);\n  var linkNode = generateLinkNode(url, title);\n  var isCollapsed = _slate.Range.isCollapsed(selection);\n  if (isCollapsed) {\n    // If selection is collapsed, we insert a space and then insert link node that help operation easier\n    editor.insertText('');\n    _slate.Editor.insertFragment(editor, [linkNode]);\n    // Using insertText directly causes the added Spaces to be added to the linked text, as in the issue above, so replaced by insertFragment\n    _slate.Editor.insertFragment(editor, [{\n      id: _slugid.default.nice(),\n      text: ''\n    }]);\n    (0, _focusEditor.focusEditor)(editor);\n    return;\n  } else {\n    var selectedText = _slate.Editor.string(editor, selection); // Selected text\n    if (selectedText !== title) {\n      // Replace the selected text with the link node if the selected text is different from the entered text\n      editor.deleteFragment();\n      _slate.Transforms.insertNodes(editor, linkNode);\n    } else {\n      // Wrap the selected text with the link node if the selected text is the same as the entered text\n      _slate.Transforms.wrapNodes(editor, linkNode, {\n        split: true,\n        at: selection\n      });\n      _slate.Transforms.collapse(editor, {\n        edge: 'end'\n      });\n    }\n  }\n};\nexports.insertSeafileLink = insertSeafileLink;\nvar getLinkInfo = function getLinkInfo(editor) {\n  var isLinkNode = isLinkType(editor);\n  if (!isLinkNode) return null;\n  var _slate$Editor$nodes3 = _slate.Editor.nodes(editor, {\n      match: function match(n) {\n        return (0, _queries.getNodeType)(n) === _constants.ELementTypes.LINK;\n      },\n      universal: true\n    }),\n    _slate$Editor$nodes4 = _slicedToArray(_slate$Editor$nodes3, 1),\n    match = _slate$Editor$nodes4[0];\n  if (!match) return null;\n  var _match = _slicedToArray(match, 2),\n    node = _match[0],\n    path = _match[1];\n  var showedText = (0, _queries.getEditorString)(editor, path);\n  return {\n    linkUrl: node.url,\n    linkTitle: showedText || node.title,\n    path: path\n  };\n};\nexports.getLinkInfo = getLinkInfo;\nvar updateLink = function updateLink(editor, newUrl, newText) {\n  var linkAbove = (0, _queries.getAboveNode)(editor, {\n    match: {\n      type: _constants.ELementTypes.LINK\n    }\n  });\n  if (!linkAbove) return;\n  var _ref3 = linkAbove[0] || {},\n    oldUrl = _ref3.href,\n    oldText = _ref3.title;\n  if (oldUrl !== newUrl || oldText !== newText) {\n    _slate.Transforms.setNodes(editor, {\n      url: newUrl,\n      title: newText\n    }, {\n      at: linkAbove[1]\n    });\n  }\n  upsertLinkText(editor, {\n    text: newText\n  });\n};\nexports.updateLink = updateLink;\nvar upsertLinkText = function upsertLinkText(editor, _ref2) {\n  var text = _ref2.text;\n  var newLink = (0, _queries.getAboveNode)(editor, {\n    match: {\n      type: _constants.ELementTypes.LINK\n    }\n  });\n  if (!newLink) return;\n  var _newLink = _slicedToArray(newLink, 2),\n    newLInkNode = _newLink[0],\n    newLinkPath = _newLink[1];\n  if (text && text.length && text !== (0, _queries.getEditorString)(editor, newLinkPath)) {\n    var firstText = newLInkNode.children[0];\n    (0, _replaceNodeChildren.replaceNodeChildren)(editor, {\n      at: newLinkPath,\n      nodes: _objectSpread(_objectSpread({}, firstText), {}, {\n        text: text\n      }),\n      insertOptions: {\n        select: true\n      }\n    });\n  }\n};\nexports.upsertLinkText = upsertLinkText;\nvar unWrapLinkNode = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(editor) {\n    var _slate$Editor$nodes5, _slate$Editor$nodes6, linkNode;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          if (!(editor.selection == null)) {\n            _context.next = 2;\n            break;\n          }\n          return _context.abrupt(\"return\");\n        case 2:\n          _slate$Editor$nodes5 = _slate.Editor.nodes(editor, {\n            match: function match(n) {\n              return (0, _queries.getNodeType)(n) === _constants.ELementTypes.LINK;\n            },\n            universal: true\n          }), _slate$Editor$nodes6 = _slicedToArray(_slate$Editor$nodes5, 1), linkNode = _slate$Editor$nodes6[0]; // Check selection is link node\n          if (!(!linkNode || !linkNode[0])) {\n            _context.next = 5;\n            break;\n          }\n          return _context.abrupt(\"return\");\n        case 5:\n          _slate.Transforms.unwrapNodes(editor, {\n            match: function match(n) {\n              return (0, _queries.getNodeType)(n) === _constants.ELementTypes.LINK;\n            }\n          });\n        case 6:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function unWrapLinkNode(_x) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nexports.unWrapLinkNode = unWrapLinkNode;","map":{"version":3,"names":["_regeneratorRuntime","require","default","_asyncToGenerator","_objectSpread","_slicedToArray","_interopRequireDefault","Object","defineProperty","exports","value","upsertLinkText","updateLink","unWrapLinkNode","isMenuDisabled","isLinkType","insertSeafileLink","insertLink","getLinkInfo","generateLinkNode","_slate","_slugid","_queries","_focusEditor","_constants","_utils","_replaceNodeChildren","editor","readonly","arguments","length","undefined","selection","selectedElems","getSelectedElems","isSelectedIllegalElement","some","elem","type","isVoid","ELementTypes","CODE_BLOCK","CODE_LINE","includes","_slate$Editor$nodes","Editor","nodes","match","n","getNodeType","LINK","universal","_slate$Editor$nodes2","url","title","linkNode","id","nice","children","text","props","_props$insertPosition","insertPosition","INSERT_POSITION","CURRENT","slateNode","AFTER","path","LIST_ITEM","findPath","nextPath","Path","next","insertNodes","at","linkNodeWrapper","generateEmptyElement","PARAGRAPH","push","generateDefaultText","Transforms","focusEditor","isCollapsed","Range","insertText","insertFragment","selectedText","string","deleteFragment","wrapNodes","split","collapse","edge","_ref","isLinkNode","_slate$Editor$nodes3","_slate$Editor$nodes4","_match","node","showedText","getEditorString","linkUrl","linkTitle","newUrl","newText","linkAbove","getAboveNode","_ref3","oldUrl","href","oldText","setNodes","_ref2","newLink","_newLink","newLInkNode","newLinkPath","firstText","replaceNodeChildren","insertOptions","select","_ref4","mark","_callee","_slate$Editor$nodes5","_slate$Editor$nodes6","wrap","_callee$","_context","prev","abrupt","unwrapNodes","stop","_x","apply"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/extension/plugins/link/helper.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.upsertLinkText = exports.updateLink = exports.unWrapLinkNode = exports.isMenuDisabled = exports.isLinkType = exports.insertSeafileLink = exports.insertLink = exports.getLinkInfo = exports.generateLinkNode = void 0;\nvar _slate = require(\"slate\");\nvar _slugid = _interopRequireDefault(require(\"slugid\"));\nvar _queries = require(\"../../core/queries\");\nvar _focusEditor = require(\"../../core/transforms/focus-editor\");\nvar _constants = require(\"../../constants\");\nvar _utils = require(\"../../core/utils\");\nvar _replaceNodeChildren = require(\"../../core/transforms/replace-node-children\");\nconst isMenuDisabled = function (editor) {\n  let readonly = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  if (readonly) return true;\n  const {\n    selection\n  } = editor;\n  if (!selection) return false;\n  const selectedElems = (0, _queries.getSelectedElems)(editor);\n  // Check if the selected element is illegal\n  const isSelectedIllegalElement = selectedElems.some(elem => {\n    const {\n      type\n    } = elem;\n    if (editor.isVoid(elem)) return true;\n    if ([_constants.ELementTypes.CODE_BLOCK, _constants.ELementTypes.CODE_LINE].includes(type)) return true;\n    return false;\n  });\n  if (isSelectedIllegalElement) return true;\n  return false;\n};\nexports.isMenuDisabled = isMenuDisabled;\nconst isLinkType = editor => {\n  const [match] = _slate.Editor.nodes(editor, {\n    match: n => (0, _queries.getNodeType)(n) === _constants.ELementTypes.LINK,\n    universal: true\n  });\n  return !!match;\n};\nexports.isLinkType = isLinkType;\nconst generateLinkNode = (url, title) => {\n  const linkNode = {\n    type: _constants.ELementTypes.LINK,\n    url: url,\n    title: title,\n    id: _slugid.default.nice(),\n    children: [{\n      id: _slugid.default.nice(),\n      text: title || ''\n    }]\n  };\n  return linkNode;\n};\n\n/**\n * @param {Object} props\n * @param {Object} props.editor\n * @param {String} props.url\n * @param {String} props.title\n * @param {InsertPosition} props.insertPosition\n * @param {Object | undefined} props.slateNode\n */\nexports.generateLinkNode = generateLinkNode;\nconst insertLink = props => {\n  const {\n    editor,\n    url,\n    title,\n    insertPosition = _constants.INSERT_POSITION.CURRENT,\n    slateNode\n  } = props;\n  const {\n    selection\n  } = editor;\n  if (insertPosition === _constants.INSERT_POSITION.CURRENT && isMenuDisabled(editor)) return;\n  // We had validated in modal,here we do it again for safety\n  if (!title || !url) return;\n  if (!selection) return;\n  const linkNode = generateLinkNode(url, title);\n  if (insertPosition === _constants.INSERT_POSITION.AFTER) {\n    let path = _slate.Editor.path(editor, selection);\n    if (slateNode && (slateNode === null || slateNode === void 0 ? void 0 : slateNode.type) === _constants.ELementTypes.LIST_ITEM) {\n      path = (0, _queries.findPath)(editor, slateNode, []);\n      const nextPath = _slate.Path.next(path);\n      _slate.Editor.insertNodes(editor, linkNode, {\n        at: nextPath\n      });\n      return;\n    }\n    const linkNodeWrapper = (0, _utils.generateEmptyElement)(_constants.ELementTypes.PARAGRAPH);\n    // LinkNode should be wrapped by p and within text nodes in order to be editable\n    linkNodeWrapper.children.push(linkNode, (0, _utils.generateDefaultText)());\n    _slate.Transforms.insertNodes(editor, linkNodeWrapper, {\n      at: [path[0] + 1]\n    });\n    (0, _focusEditor.focusEditor)(editor);\n    return;\n  }\n  const isCollapsed = _slate.Range.isCollapsed(selection);\n  if (isCollapsed) {\n    // If selection is collapsed, we insert a space and then insert link node that help operation easier\n    editor.insertText('');\n    _slate.Editor.insertFragment(editor, [linkNode]);\n    // Using insertText directly causes the added Spaces to be added to the linked text, as in the issue above, so replaced by insertFragment\n    _slate.Editor.insertFragment(editor, [{\n      id: _slugid.default.nice(),\n      text: ''\n    }]);\n    (0, _focusEditor.focusEditor)(editor);\n    return;\n  } else {\n    const selectedText = _slate.Editor.string(editor, selection); // Selected text\n    if (selectedText !== title) {\n      // Replace the selected text with the link node if the selected text is different from the entered text\n      editor.deleteFragment();\n      _slate.Transforms.insertNodes(editor, linkNode);\n    } else {\n      // Wrap the selected text with the link node if the selected text is the same as the entered text\n      _slate.Transforms.wrapNodes(editor, linkNode, {\n        split: true,\n        at: selection\n      });\n      _slate.Transforms.collapse(editor, {\n        edge: 'end'\n      });\n    }\n  }\n  (0, _focusEditor.focusEditor)(editor);\n};\nexports.insertLink = insertLink;\nconst insertSeafileLink = _ref => {\n  let {\n    editor,\n    url,\n    title,\n    selection\n  } = _ref;\n  (0, _focusEditor.focusEditor)(editor, selection);\n  const linkNode = generateLinkNode(url, title);\n  const isCollapsed = _slate.Range.isCollapsed(selection);\n  if (isCollapsed) {\n    // If selection is collapsed, we insert a space and then insert link node that help operation easier\n    editor.insertText('');\n    _slate.Editor.insertFragment(editor, [linkNode]);\n    // Using insertText directly causes the added Spaces to be added to the linked text, as in the issue above, so replaced by insertFragment\n    _slate.Editor.insertFragment(editor, [{\n      id: _slugid.default.nice(),\n      text: ''\n    }]);\n    (0, _focusEditor.focusEditor)(editor);\n    return;\n  } else {\n    const selectedText = _slate.Editor.string(editor, selection); // Selected text\n    if (selectedText !== title) {\n      // Replace the selected text with the link node if the selected text is different from the entered text\n      editor.deleteFragment();\n      _slate.Transforms.insertNodes(editor, linkNode);\n    } else {\n      // Wrap the selected text with the link node if the selected text is the same as the entered text\n      _slate.Transforms.wrapNodes(editor, linkNode, {\n        split: true,\n        at: selection\n      });\n      _slate.Transforms.collapse(editor, {\n        edge: 'end'\n      });\n    }\n  }\n};\nexports.insertSeafileLink = insertSeafileLink;\nconst getLinkInfo = editor => {\n  const isLinkNode = isLinkType(editor);\n  if (!isLinkNode) return null;\n  const [match] = _slate.Editor.nodes(editor, {\n    match: n => (0, _queries.getNodeType)(n) === _constants.ELementTypes.LINK,\n    universal: true\n  });\n  if (!match) return null;\n  const [node, path] = match;\n  const showedText = (0, _queries.getEditorString)(editor, path);\n  return {\n    linkUrl: node.url,\n    linkTitle: showedText || node.title,\n    path: path\n  };\n};\nexports.getLinkInfo = getLinkInfo;\nconst updateLink = (editor, newUrl, newText) => {\n  const linkAbove = (0, _queries.getAboveNode)(editor, {\n    match: {\n      type: _constants.ELementTypes.LINK\n    }\n  });\n  if (!linkAbove) return;\n  const {\n    href: oldUrl,\n    title: oldText\n  } = linkAbove[0] || {};\n  if (oldUrl !== newUrl || oldText !== newText) {\n    _slate.Transforms.setNodes(editor, {\n      url: newUrl,\n      title: newText\n    }, {\n      at: linkAbove[1]\n    });\n  }\n  upsertLinkText(editor, {\n    text: newText\n  });\n};\nexports.updateLink = updateLink;\nconst upsertLinkText = (editor, _ref2) => {\n  let {\n    text\n  } = _ref2;\n  const newLink = (0, _queries.getAboveNode)(editor, {\n    match: {\n      type: _constants.ELementTypes.LINK\n    }\n  });\n  if (!newLink) return;\n  const [newLInkNode, newLinkPath] = newLink;\n  if (text && text.length && text !== (0, _queries.getEditorString)(editor, newLinkPath)) {\n    const firstText = newLInkNode.children[0];\n    (0, _replaceNodeChildren.replaceNodeChildren)(editor, {\n      at: newLinkPath,\n      nodes: {\n        ...firstText,\n        text\n      },\n      insertOptions: {\n        select: true\n      }\n    });\n  }\n};\nexports.upsertLinkText = upsertLinkText;\nconst unWrapLinkNode = async editor => {\n  if (editor.selection == null) return;\n  const [linkNode] = _slate.Editor.nodes(editor, {\n    match: n => (0, _queries.getNodeType)(n) === _constants.ELementTypes.LINK,\n    universal: true\n  });\n  // Check selection is link node\n  if (!linkNode || !linkNode[0]) return;\n  _slate.Transforms.unwrapNodes(editor, {\n    match: n => (0, _queries.getNodeType)(n) === _constants.ELementTypes.LINK\n  });\n};\nexports.unWrapLinkNode = unWrapLinkNode;"],"mappings":"AAAA,YAAY;;AAAC,IAAAA,mBAAA,GAAAC,OAAA,+HAAAC,OAAA;AAAA,IAAAC,iBAAA,GAAAF,OAAA,6HAAAC,OAAA;AAAA,IAAAE,aAAA,GAAAH,OAAA,0HAAAC,OAAA;AAAA,IAAAG,cAAA,GAAAJ,OAAA,0HAAAC,OAAA;AAEb,IAAII,sBAAsB,GAAGL,OAAO,CAAC,8CAA8C,CAAC,CAACC,OAAO;AAC5FK,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAC3CC,KAAK,EAAE;AACT,CAAC,CAAC;AACFD,OAAO,CAACE,cAAc,GAAGF,OAAO,CAACG,UAAU,GAAGH,OAAO,CAACI,cAAc,GAAGJ,OAAO,CAACK,cAAc,GAAGL,OAAO,CAACM,UAAU,GAAGN,OAAO,CAACO,iBAAiB,GAAGP,OAAO,CAACQ,UAAU,GAAGR,OAAO,CAACS,WAAW,GAAGT,OAAO,CAACU,gBAAgB,GAAG,KAAK,CAAC;AAC7N,IAAIC,MAAM,GAAGnB,OAAO,CAAC,OAAO,CAAC;AAC7B,IAAIoB,OAAO,GAAGf,sBAAsB,CAACL,OAAO,CAAC,QAAQ,CAAC,CAAC;AACvD,IAAIqB,QAAQ,GAAGrB,OAAO,CAAC,oBAAoB,CAAC;AAC5C,IAAIsB,YAAY,GAAGtB,OAAO,CAAC,oCAAoC,CAAC;AAChE,IAAIuB,UAAU,GAAGvB,OAAO,CAAC,iBAAiB,CAAC;AAC3C,IAAIwB,MAAM,GAAGxB,OAAO,CAAC,kBAAkB,CAAC;AACxC,IAAIyB,oBAAoB,GAAGzB,OAAO,CAAC,6CAA6C,CAAC;AACjF,IAAMa,cAAc,GAAG,SAAjBA,cAAcA,CAAaa,MAAM,EAAE;EACvC,IAAIC,QAAQ,GAAGC,SAAS,CAACC,MAAM,GAAG,CAAC,IAAID,SAAS,CAAC,CAAC,CAAC,KAAKE,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC,GAAG,KAAK;EACxF,IAAID,QAAQ,EAAE,OAAO,IAAI;EACzB,IACEI,SAAS,GACPL,MAAM,CADRK,SAAS;EAEX,IAAI,CAACA,SAAS,EAAE,OAAO,KAAK;EAC5B,IAAMC,aAAa,GAAG,CAAC,CAAC,EAAEX,QAAQ,CAACY,gBAAgB,EAAEP,MAAM,CAAC;EAC5D;EACA,IAAMQ,wBAAwB,GAAGF,aAAa,CAACG,IAAI,CAAC,UAAAC,IAAI,EAAI;IAC1D,IACEC,IAAI,GACFD,IAAI,CADNC,IAAI;IAEN,IAAIX,MAAM,CAACY,MAAM,CAACF,IAAI,CAAC,EAAE,OAAO,IAAI;IACpC,IAAI,CAACb,UAAU,CAACgB,YAAY,CAACC,UAAU,EAAEjB,UAAU,CAACgB,YAAY,CAACE,SAAS,CAAC,CAACC,QAAQ,CAACL,IAAI,CAAC,EAAE,OAAO,IAAI;IACvG,OAAO,KAAK;EACd,CAAC,CAAC;EACF,IAAIH,wBAAwB,EAAE,OAAO,IAAI;EACzC,OAAO,KAAK;AACd,CAAC;AACD1B,OAAO,CAACK,cAAc,GAAGA,cAAc;AACvC,IAAMC,UAAU,GAAG,SAAbA,UAAUA,CAAGY,MAAM,EAAI;EAC3B,IAAAiB,mBAAA,GAAgBxB,MAAM,CAACyB,MAAM,CAACC,KAAK,CAACnB,MAAM,EAAE;MAC1CoB,KAAK,EAAE,SAAAA,MAAAC,CAAC;QAAA,OAAI,CAAC,CAAC,EAAE1B,QAAQ,CAAC2B,WAAW,EAAED,CAAC,CAAC,KAAKxB,UAAU,CAACgB,YAAY,CAACU,IAAI;MAAA;MACzEC,SAAS,EAAE;IACb,CAAC,CAAC;IAAAC,oBAAA,GAAA/C,cAAA,CAAAuC,mBAAA;IAHKG,KAAK,GAAAK,oBAAA;EAIZ,OAAO,CAAC,CAACL,KAAK;AAChB,CAAC;AACDtC,OAAO,CAACM,UAAU,GAAGA,UAAU;AAC/B,IAAMI,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAIkC,GAAG,EAAEC,KAAK,EAAK;EACvC,IAAMC,QAAQ,GAAG;IACfjB,IAAI,EAAEd,UAAU,CAACgB,YAAY,CAACU,IAAI;IAClCG,GAAG,EAAEA,GAAG;IACRC,KAAK,EAAEA,KAAK;IACZE,EAAE,EAAEnC,OAAO,CAACnB,OAAO,CAACuD,IAAI,CAAC,CAAC;IAC1BC,QAAQ,EAAE,CAAC;MACTF,EAAE,EAAEnC,OAAO,CAACnB,OAAO,CAACuD,IAAI,CAAC,CAAC;MAC1BE,IAAI,EAAEL,KAAK,IAAI;IACjB,CAAC;EACH,CAAC;EACD,OAAOC,QAAQ;AACjB,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA9C,OAAO,CAACU,gBAAgB,GAAGA,gBAAgB;AAC3C,IAAMF,UAAU,GAAG,SAAbA,UAAUA,CAAG2C,KAAK,EAAI;EAC1B,IACEjC,MAAM,GAKJiC,KAAK,CALPjC,MAAM;IACN0B,GAAG,GAIDO,KAAK,CAJPP,GAAG;IACHC,KAAK,GAGHM,KAAK,CAHPN,KAAK;IAAAO,qBAAA,GAGHD,KAAK,CAFPE,cAAc;IAAdA,cAAc,GAAAD,qBAAA,cAAGrC,UAAU,CAACuC,eAAe,CAACC,OAAO,GAAAH,qBAAA;IACnDI,SAAS,GACPL,KAAK,CADPK,SAAS;EAEX,IACEjC,SAAS,GACPL,MAAM,CADRK,SAAS;EAEX,IAAI8B,cAAc,KAAKtC,UAAU,CAACuC,eAAe,CAACC,OAAO,IAAIlD,cAAc,CAACa,MAAM,CAAC,EAAE;EACrF;EACA,IAAI,CAAC2B,KAAK,IAAI,CAACD,GAAG,EAAE;EACpB,IAAI,CAACrB,SAAS,EAAE;EAChB,IAAMuB,QAAQ,GAAGpC,gBAAgB,CAACkC,GAAG,EAAEC,KAAK,CAAC;EAC7C,IAAIQ,cAAc,KAAKtC,UAAU,CAACuC,eAAe,CAACG,KAAK,EAAE;IACvD,IAAIC,IAAI,GAAG/C,MAAM,CAACyB,MAAM,CAACsB,IAAI,CAACxC,MAAM,EAAEK,SAAS,CAAC;IAChD,IAAIiC,SAAS,IAAI,CAACA,SAAS,KAAK,IAAI,IAAIA,SAAS,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,SAAS,CAAC3B,IAAI,MAAMd,UAAU,CAACgB,YAAY,CAAC4B,SAAS,EAAE;MAC7HD,IAAI,GAAG,CAAC,CAAC,EAAE7C,QAAQ,CAAC+C,QAAQ,EAAE1C,MAAM,EAAEsC,SAAS,EAAE,EAAE,CAAC;MACpD,IAAMK,QAAQ,GAAGlD,MAAM,CAACmD,IAAI,CAACC,IAAI,CAACL,IAAI,CAAC;MACvC/C,MAAM,CAACyB,MAAM,CAAC4B,WAAW,CAAC9C,MAAM,EAAE4B,QAAQ,EAAE;QAC1CmB,EAAE,EAAEJ;MACN,CAAC,CAAC;MACF;IACF;IACA,IAAMK,eAAe,GAAG,CAAC,CAAC,EAAElD,MAAM,CAACmD,oBAAoB,EAAEpD,UAAU,CAACgB,YAAY,CAACqC,SAAS,CAAC;IAC3F;IACAF,eAAe,CAACjB,QAAQ,CAACoB,IAAI,CAACvB,QAAQ,EAAE,CAAC,CAAC,EAAE9B,MAAM,CAACsD,mBAAmB,EAAE,CAAC,CAAC;IAC1E3D,MAAM,CAAC4D,UAAU,CAACP,WAAW,CAAC9C,MAAM,EAAEgD,eAAe,EAAE;MACrDD,EAAE,EAAE,CAACP,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC;IAClB,CAAC,CAAC;IACF,CAAC,CAAC,EAAE5C,YAAY,CAAC0D,WAAW,EAAEtD,MAAM,CAAC;IACrC;EACF;EACA,IAAMuD,WAAW,GAAG9D,MAAM,CAAC+D,KAAK,CAACD,WAAW,CAAClD,SAAS,CAAC;EACvD,IAAIkD,WAAW,EAAE;IACf;IACAvD,MAAM,CAACyD,UAAU,CAAC,EAAE,CAAC;IACrBhE,MAAM,CAACyB,MAAM,CAACwC,cAAc,CAAC1D,MAAM,EAAE,CAAC4B,QAAQ,CAAC,CAAC;IAChD;IACAnC,MAAM,CAACyB,MAAM,CAACwC,cAAc,CAAC1D,MAAM,EAAE,CAAC;MACpC6B,EAAE,EAAEnC,OAAO,CAACnB,OAAO,CAACuD,IAAI,CAAC,CAAC;MAC1BE,IAAI,EAAE;IACR,CAAC,CAAC,CAAC;IACH,CAAC,CAAC,EAAEpC,YAAY,CAAC0D,WAAW,EAAEtD,MAAM,CAAC;IACrC;EACF,CAAC,MAAM;IACL,IAAM2D,YAAY,GAAGlE,MAAM,CAACyB,MAAM,CAAC0C,MAAM,CAAC5D,MAAM,EAAEK,SAAS,CAAC,CAAC,CAAC;IAC9D,IAAIsD,YAAY,KAAKhC,KAAK,EAAE;MAC1B;MACA3B,MAAM,CAAC6D,cAAc,CAAC,CAAC;MACvBpE,MAAM,CAAC4D,UAAU,CAACP,WAAW,CAAC9C,MAAM,EAAE4B,QAAQ,CAAC;IACjD,CAAC,MAAM;MACL;MACAnC,MAAM,CAAC4D,UAAU,CAACS,SAAS,CAAC9D,MAAM,EAAE4B,QAAQ,EAAE;QAC5CmC,KAAK,EAAE,IAAI;QACXhB,EAAE,EAAE1C;MACN,CAAC,CAAC;MACFZ,MAAM,CAAC4D,UAAU,CAACW,QAAQ,CAAChE,MAAM,EAAE;QACjCiE,IAAI,EAAE;MACR,CAAC,CAAC;IACJ;EACF;EACA,CAAC,CAAC,EAAErE,YAAY,CAAC0D,WAAW,EAAEtD,MAAM,CAAC;AACvC,CAAC;AACDlB,OAAO,CAACQ,UAAU,GAAGA,UAAU;AAC/B,IAAMD,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAG6E,IAAI,EAAI;EAChC,IACElE,MAAM,GAIJkE,IAAI,CAJNlE,MAAM;IACN0B,GAAG,GAGDwC,IAAI,CAHNxC,GAAG;IACHC,KAAK,GAEHuC,IAAI,CAFNvC,KAAK;IACLtB,SAAS,GACP6D,IAAI,CADN7D,SAAS;EAEX,CAAC,CAAC,EAAET,YAAY,CAAC0D,WAAW,EAAEtD,MAAM,EAAEK,SAAS,CAAC;EAChD,IAAMuB,QAAQ,GAAGpC,gBAAgB,CAACkC,GAAG,EAAEC,KAAK,CAAC;EAC7C,IAAM4B,WAAW,GAAG9D,MAAM,CAAC+D,KAAK,CAACD,WAAW,CAAClD,SAAS,CAAC;EACvD,IAAIkD,WAAW,EAAE;IACf;IACAvD,MAAM,CAACyD,UAAU,CAAC,EAAE,CAAC;IACrBhE,MAAM,CAACyB,MAAM,CAACwC,cAAc,CAAC1D,MAAM,EAAE,CAAC4B,QAAQ,CAAC,CAAC;IAChD;IACAnC,MAAM,CAACyB,MAAM,CAACwC,cAAc,CAAC1D,MAAM,EAAE,CAAC;MACpC6B,EAAE,EAAEnC,OAAO,CAACnB,OAAO,CAACuD,IAAI,CAAC,CAAC;MAC1BE,IAAI,EAAE;IACR,CAAC,CAAC,CAAC;IACH,CAAC,CAAC,EAAEpC,YAAY,CAAC0D,WAAW,EAAEtD,MAAM,CAAC;IACrC;EACF,CAAC,MAAM;IACL,IAAM2D,YAAY,GAAGlE,MAAM,CAACyB,MAAM,CAAC0C,MAAM,CAAC5D,MAAM,EAAEK,SAAS,CAAC,CAAC,CAAC;IAC9D,IAAIsD,YAAY,KAAKhC,KAAK,EAAE;MAC1B;MACA3B,MAAM,CAAC6D,cAAc,CAAC,CAAC;MACvBpE,MAAM,CAAC4D,UAAU,CAACP,WAAW,CAAC9C,MAAM,EAAE4B,QAAQ,CAAC;IACjD,CAAC,MAAM;MACL;MACAnC,MAAM,CAAC4D,UAAU,CAACS,SAAS,CAAC9D,MAAM,EAAE4B,QAAQ,EAAE;QAC5CmC,KAAK,EAAE,IAAI;QACXhB,EAAE,EAAE1C;MACN,CAAC,CAAC;MACFZ,MAAM,CAAC4D,UAAU,CAACW,QAAQ,CAAChE,MAAM,EAAE;QACjCiE,IAAI,EAAE;MACR,CAAC,CAAC;IACJ;EACF;AACF,CAAC;AACDnF,OAAO,CAACO,iBAAiB,GAAGA,iBAAiB;AAC7C,IAAME,WAAW,GAAG,SAAdA,WAAWA,CAAGS,MAAM,EAAI;EAC5B,IAAMmE,UAAU,GAAG/E,UAAU,CAACY,MAAM,CAAC;EACrC,IAAI,CAACmE,UAAU,EAAE,OAAO,IAAI;EAC5B,IAAAC,oBAAA,GAAgB3E,MAAM,CAACyB,MAAM,CAACC,KAAK,CAACnB,MAAM,EAAE;MAC1CoB,KAAK,EAAE,SAAAA,MAAAC,CAAC;QAAA,OAAI,CAAC,CAAC,EAAE1B,QAAQ,CAAC2B,WAAW,EAAED,CAAC,CAAC,KAAKxB,UAAU,CAACgB,YAAY,CAACU,IAAI;MAAA;MACzEC,SAAS,EAAE;IACb,CAAC,CAAC;IAAA6C,oBAAA,GAAA3F,cAAA,CAAA0F,oBAAA;IAHKhD,KAAK,GAAAiD,oBAAA;EAIZ,IAAI,CAACjD,KAAK,EAAE,OAAO,IAAI;EACvB,IAAAkD,MAAA,GAAA5F,cAAA,CAAqB0C,KAAK;IAAnBmD,IAAI,GAAAD,MAAA;IAAE9B,IAAI,GAAA8B,MAAA;EACjB,IAAME,UAAU,GAAG,CAAC,CAAC,EAAE7E,QAAQ,CAAC8E,eAAe,EAAEzE,MAAM,EAAEwC,IAAI,CAAC;EAC9D,OAAO;IACLkC,OAAO,EAAEH,IAAI,CAAC7C,GAAG;IACjBiD,SAAS,EAAEH,UAAU,IAAID,IAAI,CAAC5C,KAAK;IACnCa,IAAI,EAAEA;EACR,CAAC;AACH,CAAC;AACD1D,OAAO,CAACS,WAAW,GAAGA,WAAW;AACjC,IAAMN,UAAU,GAAG,SAAbA,UAAUA,CAAIe,MAAM,EAAE4E,MAAM,EAAEC,OAAO,EAAK;EAC9C,IAAMC,SAAS,GAAG,CAAC,CAAC,EAAEnF,QAAQ,CAACoF,YAAY,EAAE/E,MAAM,EAAE;IACnDoB,KAAK,EAAE;MACLT,IAAI,EAAEd,UAAU,CAACgB,YAAY,CAACU;IAChC;EACF,CAAC,CAAC;EACF,IAAI,CAACuD,SAAS,EAAE;EAChB,IAAAE,KAAA,GAGIF,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;IAFdG,MAAM,GAAAD,KAAA,CAAZE,IAAI;IACGC,OAAO,GAAAH,KAAA,CAAdrD,KAAK;EAEP,IAAIsD,MAAM,KAAKL,MAAM,IAAIO,OAAO,KAAKN,OAAO,EAAE;IAC5CpF,MAAM,CAAC4D,UAAU,CAAC+B,QAAQ,CAACpF,MAAM,EAAE;MACjC0B,GAAG,EAAEkD,MAAM;MACXjD,KAAK,EAAEkD;IACT,CAAC,EAAE;MACD9B,EAAE,EAAE+B,SAAS,CAAC,CAAC;IACjB,CAAC,CAAC;EACJ;EACA9F,cAAc,CAACgB,MAAM,EAAE;IACrBgC,IAAI,EAAE6C;EACR,CAAC,CAAC;AACJ,CAAC;AACD/F,OAAO,CAACG,UAAU,GAAGA,UAAU;AAC/B,IAAMD,cAAc,GAAG,SAAjBA,cAAcA,CAAIgB,MAAM,EAAEqF,KAAK,EAAK;EACxC,IACErD,IAAI,GACFqD,KAAK,CADPrD,IAAI;EAEN,IAAMsD,OAAO,GAAG,CAAC,CAAC,EAAE3F,QAAQ,CAACoF,YAAY,EAAE/E,MAAM,EAAE;IACjDoB,KAAK,EAAE;MACLT,IAAI,EAAEd,UAAU,CAACgB,YAAY,CAACU;IAChC;EACF,CAAC,CAAC;EACF,IAAI,CAAC+D,OAAO,EAAE;EACd,IAAAC,QAAA,GAAA7G,cAAA,CAAmC4G,OAAO;IAAnCE,WAAW,GAAAD,QAAA;IAAEE,WAAW,GAAAF,QAAA;EAC/B,IAAIvD,IAAI,IAAIA,IAAI,CAAC7B,MAAM,IAAI6B,IAAI,KAAK,CAAC,CAAC,EAAErC,QAAQ,CAAC8E,eAAe,EAAEzE,MAAM,EAAEyF,WAAW,CAAC,EAAE;IACtF,IAAMC,SAAS,GAAGF,WAAW,CAACzD,QAAQ,CAAC,CAAC,CAAC;IACzC,CAAC,CAAC,EAAEhC,oBAAoB,CAAC4F,mBAAmB,EAAE3F,MAAM,EAAE;MACpD+C,EAAE,EAAE0C,WAAW;MACftE,KAAK,EAAA1C,aAAA,CAAAA,aAAA,KACAiH,SAAS;QACZ1D,IAAI,EAAJA;MAAI,EACL;MACD4D,aAAa,EAAE;QACbC,MAAM,EAAE;MACV;IACF,CAAC,CAAC;EACJ;AACF,CAAC;AACD/G,OAAO,CAACE,cAAc,GAAGA,cAAc;AACvC,IAAME,cAAc;EAAA,IAAA4G,KAAA,GAAAtH,iBAAA,eAAAH,mBAAA,GAAA0H,IAAA,CAAG,SAAAC,QAAMhG,MAAM;IAAA,IAAAiG,oBAAA,EAAAC,oBAAA,EAAAtE,QAAA;IAAA,OAAAvD,mBAAA,GAAA8H,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAxD,IAAA;QAAA;UAAA,MAC7B7C,MAAM,CAACK,SAAS,IAAI,IAAI;YAAAgG,QAAA,CAAAxD,IAAA;YAAA;UAAA;UAAA,OAAAwD,QAAA,CAAAE,MAAA;QAAA;UAAAN,oBAAA,GACTxG,MAAM,CAACyB,MAAM,CAACC,KAAK,CAACnB,MAAM,EAAE;YAC7CoB,KAAK,EAAE,SAAAA,MAAAC,CAAC;cAAA,OAAI,CAAC,CAAC,EAAE1B,QAAQ,CAAC2B,WAAW,EAAED,CAAC,CAAC,KAAKxB,UAAU,CAACgB,YAAY,CAACU,IAAI;YAAA;YACzEC,SAAS,EAAE;UACb,CAAC,CAAC,EAAA0E,oBAAA,GAAAxH,cAAA,CAAAuH,oBAAA,MAHKrE,QAAQ,GAAAsE,oBAAA,KAIf;UAAA,MACI,CAACtE,QAAQ,IAAI,CAACA,QAAQ,CAAC,CAAC,CAAC;YAAAyE,QAAA,CAAAxD,IAAA;YAAA;UAAA;UAAA,OAAAwD,QAAA,CAAAE,MAAA;QAAA;UAC7B9G,MAAM,CAAC4D,UAAU,CAACmD,WAAW,CAACxG,MAAM,EAAE;YACpCoB,KAAK,EAAE,SAAAA,MAAAC,CAAC;cAAA,OAAI,CAAC,CAAC,EAAE1B,QAAQ,CAAC2B,WAAW,EAAED,CAAC,CAAC,KAAKxB,UAAU,CAACgB,YAAY,CAACU,IAAI;YAAA;UAC3E,CAAC,CAAC;QAAC;QAAA;UAAA,OAAA8E,QAAA,CAAAI,IAAA;MAAA;IAAA,GAAAT,OAAA;EAAA,CACJ;EAAA,gBAXK9G,cAAcA,CAAAwH,EAAA;IAAA,OAAAZ,KAAA,CAAAa,KAAA,OAAAzG,SAAA;EAAA;AAAA,GAWnB;AACDpB,OAAO,CAACI,cAAc,GAAGA,cAAc"},"metadata":{},"sourceType":"script","externalDependencies":[]}