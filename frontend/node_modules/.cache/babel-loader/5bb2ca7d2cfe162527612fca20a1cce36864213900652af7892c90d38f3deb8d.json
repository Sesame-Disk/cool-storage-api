{"ast":null,"code":"import _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useTranslation } from 'react-i18next';\nimport isHotkey from 'is-hotkey';\nimport { Input, Label } from 'reactstrap';\nimport debounce from '../../../../utils/debounce';\nimport { handleReplaceKeyword, getHighlightInfos, drawHighlights } from '../helper';\nimport ReplaceAllConfirmModal from './replace-all-confirm-modal';\nimport EventBus from '../../../../utils/event-bus';\nimport { INTERNAL_EVENT } from '../../../../constants';\nimport context from '../../../../../context';\nimport './index.css';\nvar SearchReplacePopover = function SearchReplacePopover(_ref) {\n  var editor = _ref.editor,\n    closePopover = _ref.closePopover,\n    readonly = _ref.readonly;\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    searchContent = _useState2[0],\n    setSearchContent = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    replacementContent = _useState4[0],\n    setReplacementContent = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    highlightInfos = _useState6[0],\n    setHighlightInfos = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    isMoving = _useState8[0],\n    setIsMoving = _useState8[1];\n  var _useState9 = useState({\n      x: 0,\n      y: 100\n    }),\n    _useState10 = _slicedToArray(_useState9, 2),\n    popoverPosition = _useState10[0],\n    setPopoverPosition = _useState10[1];\n  var _useState11 = useState(0),\n    _useState12 = _slicedToArray(_useState11, 2),\n    currentSelectIndex = _useState12[0],\n    setCurrentSelectIndex = _useState12[1];\n  var _useState13 = useState(false),\n    _useState14 = _slicedToArray(_useState13, 2),\n    isOpenReplaceAllModal = _useState14[0],\n    setIsOpenReplaceAllModal = _useState14[1];\n  var pageInnerSizeRef = useRef({\n    x: window.innerWidth,\n    y: window.innerHeight\n  });\n  var shouldScrollIntoView = useRef(false);\n  var popoverContainerRef = useRef(null);\n  var searchInputRef = useRef(null);\n  var _useTranslation = useTranslation(),\n    t = _useTranslation.t;\n  var searchInputSuffixContent = useMemo(function () {\n    if (!!searchContent.length && !highlightInfos.length) return t('Search_not_found');\n    if (highlightInfos.length) return \"\".concat(currentSelectIndex + 1, \" / \").concat(highlightInfos.length);\n  }, [currentSelectIndex, highlightInfos.length, searchContent.length, t]);\n  useEffect(function () {\n    setPopoverPosition({\n      x: pageInnerSizeRef.current.x - 420,\n      y: 95\n    });\n  }, []);\n  var isOwnReplacePermission = useMemo(function () {\n    if (readonly) return false;\n    var isFreezed = context.getSetting('isFreezed');\n    if (isFreezed) return false;\n    var isPublished = context.getSetting('isPublished');\n    var isSdocRevision = context.getSetting('isSdocRevision');\n    if (isSdocRevision && isPublished) return false;\n    var docPerm = context.getSetting('docPerm');\n    if (docPerm === 'rw') return true;\n    return false;\n  }, [readonly]);\n  var handleDrawHighlight = useCallback(function (editor, keyword) {\n    var newHighlightInfos = getHighlightInfos(editor, keyword);\n    setHighlightInfos(newHighlightInfos);\n    var newSelectIndex = currentSelectIndex;\n    if (!shouldScrollIntoView.current && newHighlightInfos.length !== highlightInfos.length) {\n      newSelectIndex = 0;\n    }\n    if (newSelectIndex >= newHighlightInfos.length) {\n      newSelectIndex = newHighlightInfos.length - 1;\n    }\n    if (newSelectIndex < 0 && newHighlightInfos.length) {\n      newSelectIndex = 0;\n    }\n    setCurrentSelectIndex(newSelectIndex);\n  }, [currentSelectIndex, highlightInfos.length, shouldScrollIntoView]);\n  var handleDrawHighlightLister = useCallback(function () {\n    handleDrawHighlight(editor, searchContent);\n    pageInnerSizeRef.current = {\n      x: window.innerWidth,\n      y: window.innerHeight\n    };\n  }, [editor, handleDrawHighlight, searchContent]);\n  useEffect(function () {\n    var highlightInfos = getHighlightInfos(editor, searchContent);\n    drawHighlights(editor, highlightInfos, currentSelectIndex, shouldScrollIntoView.current);\n    shouldScrollIntoView.current = false;\n  }, [currentSelectIndex, editor, searchContent, highlightInfos, shouldScrollIntoView]);\n  useEffect(function () {\n    var eventBus = EventBus.getInstance();\n    var unSubscribe = eventBus.subscribe(INTERNAL_EVENT.UPDATE_SEARCH_REPLACE_HIGHLIGHT, handleDrawHighlightLister);\n    return function () {\n      unSubscribe();\n    };\n  }, [editor, handleDrawHighlight, handleDrawHighlightLister, highlightInfos.length, searchContent]);\n  var handleSearchInputChange = useCallback(function (e) {\n    var keyword = e.target.value;\n    shouldScrollIntoView.current = true;\n    setSearchContent(keyword);\n    handleDrawHighlight(editor, keyword);\n    setCurrentSelectIndex(0);\n  }, [editor, handleDrawHighlight]);\n  var handleLast = useCallback(function () {\n    var currentIndex = currentSelectIndex === 0 ? highlightInfos.length - 1 : currentSelectIndex - 1;\n    setCurrentSelectIndex(currentIndex);\n    shouldScrollIntoView.current = true;\n  }, [currentSelectIndex, highlightInfos.length]);\n  var handleNext = useCallback(function () {\n    var currentIndex = currentSelectIndex === highlightInfos.length - 1 ? 0 : currentSelectIndex + 1;\n    setCurrentSelectIndex(currentIndex);\n    shouldScrollIntoView.current = true;\n  }, [currentSelectIndex, highlightInfos.length]);\n  var handleOpenReplaceAllModal = useCallback(function () {\n    setIsOpenReplaceAllModal(true);\n  }, []);\n  var handleCloseReplaceAllModal = useCallback(function () {\n    setIsOpenReplaceAllModal(false);\n  }, []);\n  var handleReplace = useCallback(function () {\n    handleReplaceKeyword(editor, [highlightInfos[currentSelectIndex]], replacementContent);\n    shouldScrollIntoView.current = true;\n  }, [currentSelectIndex, editor, highlightInfos, replacementContent]);\n  var handleReplaceAll = useCallback(function () {\n    handleReplaceKeyword(editor, highlightInfos, replacementContent);\n    handleCloseReplaceAllModal();\n  }, [editor, handleCloseReplaceAllModal, highlightInfos, replacementContent]);\n  var handleStartMove = useCallback(function (e) {\n    if (!e.target.className.includes('sdoc-search-replace-popover-container')) return;\n    setIsMoving(true);\n  }, []);\n  var handleMouseMove = useCallback(function (e) {\n    if (!isMoving) return;\n    var _popoverContainerRef$ = popoverContainerRef.current.getBoundingClientRect(),\n      width = _popoverContainerRef$.width,\n      height = _popoverContainerRef$.height;\n    var movementX = e.movementX,\n      movementY = e.movementY;\n    var x = popoverPosition.x + movementX;\n    var y = popoverPosition.y + movementY;\n    if (x <= 0) x = 0;\n    if (y < 0) y = 0;\n    if (x + width >= pageInnerSizeRef.current.x) x = pageInnerSizeRef.current.x - width;\n    if (y + height >= pageInnerSizeRef.current.y) y = pageInnerSizeRef.current.y - height;\n    setPopoverPosition({\n      x: x,\n      y: y\n    });\n  }, [isMoving, popoverPosition.x, popoverPosition.y]);\n  var handleFinishMove = useCallback(function () {\n    setIsMoving(false);\n  }, []);\n  var handleInputKeyDown = function handleInputKeyDown(e) {\n    if (!highlightInfos.length) return;\n    if (isHotkey('enter', e)) handleNext();\n    if (isHotkey('enter+shift', e)) handleLast();\n  };\n  return createPortal( /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-search-replace-popover-container\",\n    onMouseDown: handleStartMove,\n    onMouseMove: handleMouseMove,\n    onMouseUp: handleFinishMove,\n    onMouseLeave: handleFinishMove,\n    ref: popoverContainerRef,\n    style: {\n      left: popoverPosition.x,\n      top: popoverPosition.y\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-search-replace-popover-title\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sdoc-search-replace-title-text\"\n  }, t('Search_and_replace')), /*#__PURE__*/React.createElement(\"i\", {\n    onClick: closePopover,\n    className: \"sdocfont sdoc-sm-close sdoc-search-replace-title-close\"\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-search-replace-popover-body\"\n  }, /*#__PURE__*/React.createElement(Label, {\n    for: \"sdoc-search-replace-search-ipt\"\n  }, t('Search')), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-replace-ipt-container\"\n  }, /*#__PURE__*/React.createElement(Input, {\n    ref: searchInputRef,\n    autoFocus: true,\n    onKeyUp: handleInputKeyDown,\n    onChange: debounce(handleSearchInputChange, 300),\n    id: \"sdoc-search-replace-search-ipt\",\n    placeholder: t('Type_search_content')\n  }), searchInputSuffixContent && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-replace-ipt-tip\"\n  }, searchInputSuffixContent)), /*#__PURE__*/React.createElement(Label, {\n    className: \"sdoc-replace-ipt-label\",\n    for: \"sdoc-search-replace-replace-ipt\"\n  }, t('Replace_as')), /*#__PURE__*/React.createElement(Input, {\n    onChange: function onChange(e) {\n      return setReplacementContent(e.target.value);\n    },\n    id: \"sdoc-search-replace-replace-ipt\",\n    placeholder: t('Type_replace_content')\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-search-replace-popover-btn-group\"\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    disabled: !highlightInfos.length,\n    onClick: handleLast,\n    className: \"btn btn-secondary\"\n  }, t('Prevs')), /*#__PURE__*/React.createElement(\"button\", {\n    disabled: !highlightInfos.length,\n    onClick: handleNext,\n    className: \"btn btn-secondary\"\n  }, t('Next')), /*#__PURE__*/React.createElement(\"button\", {\n    disabled: !highlightInfos.length || !isOwnReplacePermission,\n    onClick: handleReplace,\n    className: \"btn btn-primary\"\n  }, t('Replace')), /*#__PURE__*/React.createElement(\"button\", {\n    disabled: !highlightInfos.length || !isOwnReplacePermission,\n    onClick: handleOpenReplaceAllModal,\n    className: \"btn btn-primary\"\n  }, t('Replace_all'))))), /*#__PURE__*/React.createElement(ReplaceAllConfirmModal, {\n    isOpen: isOpenReplaceAllModal,\n    handleConfirm: handleReplaceAll,\n    handleCancel: handleCloseReplaceAllModal,\n    number: highlightInfos.length,\n    originalWord: searchContent,\n    replacedWord: replacementContent\n  })), document.body);\n};\nexport default SearchReplacePopover;","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","useRef","useState","createPortal","useTranslation","isHotkey","Input","Label","debounce","handleReplaceKeyword","getHighlightInfos","drawHighlights","ReplaceAllConfirmModal","EventBus","INTERNAL_EVENT","context","SearchReplacePopover","_ref","editor","closePopover","readonly","_useState","_useState2","_slicedToArray","searchContent","setSearchContent","_useState3","_useState4","replacementContent","setReplacementContent","_useState5","_useState6","highlightInfos","setHighlightInfos","_useState7","_useState8","isMoving","setIsMoving","_useState9","x","y","_useState10","popoverPosition","setPopoverPosition","_useState11","_useState12","currentSelectIndex","setCurrentSelectIndex","_useState13","_useState14","isOpenReplaceAllModal","setIsOpenReplaceAllModal","pageInnerSizeRef","window","innerWidth","innerHeight","shouldScrollIntoView","popoverContainerRef","searchInputRef","_useTranslation","t","searchInputSuffixContent","length","concat","current","isOwnReplacePermission","isFreezed","getSetting","isPublished","isSdocRevision","docPerm","handleDrawHighlight","keyword","newHighlightInfos","newSelectIndex","handleDrawHighlightLister","eventBus","getInstance","unSubscribe","subscribe","UPDATE_SEARCH_REPLACE_HIGHLIGHT","handleSearchInputChange","e","target","value","handleLast","currentIndex","handleNext","handleOpenReplaceAllModal","handleCloseReplaceAllModal","handleReplace","handleReplaceAll","handleStartMove","className","includes","handleMouseMove","_popoverContainerRef$","getBoundingClientRect","width","height","movementX","movementY","handleFinishMove","handleInputKeyDown","createElement","Fragment","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","ref","style","left","top","onClick","for","autoFocus","onKeyUp","onChange","id","placeholder","disabled","isOpen","handleConfirm","handleCancel","number","originalWord","replacedWord","document","body"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/extension/plugins/search-replace/popover/index.js"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useTranslation } from 'react-i18next';\nimport isHotkey from 'is-hotkey';\nimport { Input, Label } from 'reactstrap';\nimport debounce from '../../../../utils/debounce';\nimport { handleReplaceKeyword, getHighlightInfos, drawHighlights } from '../helper';\nimport ReplaceAllConfirmModal from './replace-all-confirm-modal';\nimport EventBus from '../../../../utils/event-bus';\nimport { INTERNAL_EVENT } from '../../../../constants';\nimport context from '../../../../../context';\nimport './index.css';\nconst SearchReplacePopover = _ref => {\n  let {\n    editor,\n    closePopover,\n    readonly\n  } = _ref;\n  const [searchContent, setSearchContent] = useState('');\n  const [replacementContent, setReplacementContent] = useState('');\n  const [highlightInfos, setHighlightInfos] = useState([]);\n  const [isMoving, setIsMoving] = useState(false);\n  const [popoverPosition, setPopoverPosition] = useState({\n    x: 0,\n    y: 100\n  });\n  const [currentSelectIndex, setCurrentSelectIndex] = useState(0);\n  const [isOpenReplaceAllModal, setIsOpenReplaceAllModal] = useState(false);\n  const pageInnerSizeRef = useRef({\n    x: window.innerWidth,\n    y: window.innerHeight\n  });\n  const shouldScrollIntoView = useRef(false);\n  const popoverContainerRef = useRef(null);\n  const searchInputRef = useRef(null);\n  const {\n    t\n  } = useTranslation();\n  const searchInputSuffixContent = useMemo(() => {\n    if (!!searchContent.length && !highlightInfos.length) return t('Search_not_found');\n    if (highlightInfos.length) return \"\".concat(currentSelectIndex + 1, \" / \").concat(highlightInfos.length);\n  }, [currentSelectIndex, highlightInfos.length, searchContent.length, t]);\n  useEffect(() => {\n    setPopoverPosition({\n      x: pageInnerSizeRef.current.x - 420,\n      y: 95\n    });\n  }, []);\n  const isOwnReplacePermission = useMemo(() => {\n    if (readonly) return false;\n    const isFreezed = context.getSetting('isFreezed');\n    if (isFreezed) return false;\n    const isPublished = context.getSetting('isPublished');\n    const isSdocRevision = context.getSetting('isSdocRevision');\n    if (isSdocRevision && isPublished) return false;\n    const docPerm = context.getSetting('docPerm');\n    if (docPerm === 'rw') return true;\n    return false;\n  }, [readonly]);\n  const handleDrawHighlight = useCallback((editor, keyword) => {\n    const newHighlightInfos = getHighlightInfos(editor, keyword);\n    setHighlightInfos(newHighlightInfos);\n    let newSelectIndex = currentSelectIndex;\n    if (!shouldScrollIntoView.current && newHighlightInfos.length !== highlightInfos.length) {\n      newSelectIndex = 0;\n    }\n    if (newSelectIndex >= newHighlightInfos.length) {\n      newSelectIndex = newHighlightInfos.length - 1;\n    }\n    if (newSelectIndex < 0 && newHighlightInfos.length) {\n      newSelectIndex = 0;\n    }\n    setCurrentSelectIndex(newSelectIndex);\n  }, [currentSelectIndex, highlightInfos.length, shouldScrollIntoView]);\n  const handleDrawHighlightLister = useCallback(() => {\n    handleDrawHighlight(editor, searchContent);\n    pageInnerSizeRef.current = {\n      x: window.innerWidth,\n      y: window.innerHeight\n    };\n  }, [editor, handleDrawHighlight, searchContent]);\n  useEffect(() => {\n    const highlightInfos = getHighlightInfos(editor, searchContent);\n    drawHighlights(editor, highlightInfos, currentSelectIndex, shouldScrollIntoView.current);\n    shouldScrollIntoView.current = false;\n  }, [currentSelectIndex, editor, searchContent, highlightInfos, shouldScrollIntoView]);\n  useEffect(() => {\n    const eventBus = EventBus.getInstance();\n    const unSubscribe = eventBus.subscribe(INTERNAL_EVENT.UPDATE_SEARCH_REPLACE_HIGHLIGHT, handleDrawHighlightLister);\n    return () => {\n      unSubscribe();\n    };\n  }, [editor, handleDrawHighlight, handleDrawHighlightLister, highlightInfos.length, searchContent]);\n  const handleSearchInputChange = useCallback(e => {\n    const keyword = e.target.value;\n    shouldScrollIntoView.current = true;\n    setSearchContent(keyword);\n    handleDrawHighlight(editor, keyword);\n    setCurrentSelectIndex(0);\n  }, [editor, handleDrawHighlight]);\n  const handleLast = useCallback(() => {\n    const currentIndex = currentSelectIndex === 0 ? highlightInfos.length - 1 : currentSelectIndex - 1;\n    setCurrentSelectIndex(currentIndex);\n    shouldScrollIntoView.current = true;\n  }, [currentSelectIndex, highlightInfos.length]);\n  const handleNext = useCallback(() => {\n    const currentIndex = currentSelectIndex === highlightInfos.length - 1 ? 0 : currentSelectIndex + 1;\n    setCurrentSelectIndex(currentIndex);\n    shouldScrollIntoView.current = true;\n  }, [currentSelectIndex, highlightInfos.length]);\n  const handleOpenReplaceAllModal = useCallback(() => {\n    setIsOpenReplaceAllModal(true);\n  }, []);\n  const handleCloseReplaceAllModal = useCallback(() => {\n    setIsOpenReplaceAllModal(false);\n  }, []);\n  const handleReplace = useCallback(() => {\n    handleReplaceKeyword(editor, [highlightInfos[currentSelectIndex]], replacementContent);\n    shouldScrollIntoView.current = true;\n  }, [currentSelectIndex, editor, highlightInfos, replacementContent]);\n  const handleReplaceAll = useCallback(() => {\n    handleReplaceKeyword(editor, highlightInfos, replacementContent);\n    handleCloseReplaceAllModal();\n  }, [editor, handleCloseReplaceAllModal, highlightInfos, replacementContent]);\n  const handleStartMove = useCallback(e => {\n    if (!e.target.className.includes('sdoc-search-replace-popover-container')) return;\n    setIsMoving(true);\n  }, []);\n  const handleMouseMove = useCallback(e => {\n    if (!isMoving) return;\n    const {\n      width,\n      height\n    } = popoverContainerRef.current.getBoundingClientRect();\n    const {\n      movementX,\n      movementY\n    } = e;\n    let x = popoverPosition.x + movementX;\n    let y = popoverPosition.y + movementY;\n    if (x <= 0) x = 0;\n    if (y < 0) y = 0;\n    if (x + width >= pageInnerSizeRef.current.x) x = pageInnerSizeRef.current.x - width;\n    if (y + height >= pageInnerSizeRef.current.y) y = pageInnerSizeRef.current.y - height;\n    setPopoverPosition({\n      x,\n      y\n    });\n  }, [isMoving, popoverPosition.x, popoverPosition.y]);\n  const handleFinishMove = useCallback(() => {\n    setIsMoving(false);\n  }, []);\n  const handleInputKeyDown = e => {\n    if (!highlightInfos.length) return;\n    if (isHotkey('enter', e)) handleNext();\n    if (isHotkey('enter+shift', e)) handleLast();\n  };\n  return createPortal( /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-search-replace-popover-container\",\n    onMouseDown: handleStartMove,\n    onMouseMove: handleMouseMove,\n    onMouseUp: handleFinishMove,\n    onMouseLeave: handleFinishMove,\n    ref: popoverContainerRef,\n    style: {\n      left: popoverPosition.x,\n      top: popoverPosition.y\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-search-replace-popover-title\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sdoc-search-replace-title-text\"\n  }, t('Search_and_replace')), /*#__PURE__*/React.createElement(\"i\", {\n    onClick: closePopover,\n    className: \"sdocfont sdoc-sm-close sdoc-search-replace-title-close\"\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-search-replace-popover-body\"\n  }, /*#__PURE__*/React.createElement(Label, {\n    for: \"sdoc-search-replace-search-ipt\"\n  }, t('Search')), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-replace-ipt-container\"\n  }, /*#__PURE__*/React.createElement(Input, {\n    ref: searchInputRef,\n    autoFocus: true,\n    onKeyUp: handleInputKeyDown,\n    onChange: debounce(handleSearchInputChange, 300),\n    id: \"sdoc-search-replace-search-ipt\",\n    placeholder: t('Type_search_content')\n  }), searchInputSuffixContent && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-replace-ipt-tip\"\n  }, searchInputSuffixContent)), /*#__PURE__*/React.createElement(Label, {\n    className: \"sdoc-replace-ipt-label\",\n    for: \"sdoc-search-replace-replace-ipt\"\n  }, t('Replace_as')), /*#__PURE__*/React.createElement(Input, {\n    onChange: e => setReplacementContent(e.target.value),\n    id: \"sdoc-search-replace-replace-ipt\",\n    placeholder: t('Type_replace_content')\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-search-replace-popover-btn-group\"\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    disabled: !highlightInfos.length,\n    onClick: handleLast,\n    className: \"btn btn-secondary\"\n  }, t('Prevs')), /*#__PURE__*/React.createElement(\"button\", {\n    disabled: !highlightInfos.length,\n    onClick: handleNext,\n    className: \"btn btn-secondary\"\n  }, t('Next')), /*#__PURE__*/React.createElement(\"button\", {\n    disabled: !highlightInfos.length || !isOwnReplacePermission,\n    onClick: handleReplace,\n    className: \"btn btn-primary\"\n  }, t('Replace')), /*#__PURE__*/React.createElement(\"button\", {\n    disabled: !highlightInfos.length || !isOwnReplacePermission,\n    onClick: handleOpenReplaceAllModal,\n    className: \"btn btn-primary\"\n  }, t('Replace_all'))))), /*#__PURE__*/React.createElement(ReplaceAllConfirmModal, {\n    isOpen: isOpenReplaceAllModal,\n    handleConfirm: handleReplaceAll,\n    handleCancel: handleCloseReplaceAllModal,\n    number: highlightInfos.length,\n    originalWord: searchContent,\n    replacedWord: replacementContent\n  })), document.body);\n};\nexport default SearchReplacePopover;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}