{"ast":null,"code":"import _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport React, { useState, useRef, useCallback } from 'react';\nimport classnames from 'classnames';\nimport { useSlateStatic } from '@seafile/slate-react';\nimport { TableRootContext, TableRootScrollLeftContext, useContextMenu } from './hooks';\nimport { TableContextMenu } from '../menu';\nvar TableRoot = function TableRoot(_ref) {\n  var attributes = _ref.attributes,\n    _ref$columns = _ref.columns,\n    columns = _ref$columns === void 0 ? [] : _ref$columns,\n    children = _ref.children;\n  var editor = useSlateStatic();\n  var tableScrollWrapper = useRef(null);\n  var _useState = useState(0),\n    _useState2 = _slicedToArray(_useState, 2),\n    scrollLeft = _useState2[0],\n    setScrollLeft = _useState2[1];\n  var allWidth = columns.reduce(function (pre, cur) {\n    return pre + cur.width;\n  }, 0);\n  var onScroll = useCallback(function (event) {\n    setScrollLeft(event.target.scrollLeft);\n  }, []);\n  var _useContextMenu = useContextMenu(tableScrollWrapper),\n    isShowContextMenu = _useContextMenu.isShowContextMenu,\n    menuPosition = _useContextMenu.menuPosition,\n    onContextMenu = _useContextMenu.onContextMenu;\n  return /*#__PURE__*/React.createElement(TableRootContext.Provider, {\n    value: tableScrollWrapper.current\n  }, /*#__PURE__*/React.createElement(TableRootScrollLeftContext.Provider, {\n    value: scrollLeft\n  }, /*#__PURE__*/React.createElement(\"div\", Object.assign({}, attributes, {\n    className: classnames('sdoc-table-wrapper position-relative', attributes.className, {\n      'scroll': allWidth > editor.width\n    }),\n    style: _objectSpread(_objectSpread({}, attributes.style), {}, {\n      maxWidth: editor.width ? editor.width : '100%'\n    })\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classnames('sdoc-table-scroll-wrapper', {\n      'scroll-at-center': scrollLeft + editor.width !== allWidth && scrollLeft > 0,\n      'scroll-at-right': scrollLeft + editor.width === allWidth,\n      'scroll-at-left': scrollLeft === 0\n    }),\n    ref: tableScrollWrapper,\n    onScroll: onScroll,\n    onContextMenu: onContextMenu\n  }, children)), isShowContextMenu && /*#__PURE__*/React.createElement(TableContextMenu, {\n    editor: editor,\n    contextMenuPosition: menuPosition\n  })));\n};\nexport default TableRoot;","map":{"version":3,"names":["_objectSpread","React","useState","useRef","useCallback","classnames","useSlateStatic","TableRootContext","TableRootScrollLeftContext","useContextMenu","TableContextMenu","TableRoot","_ref","attributes","_ref$columns","columns","children","editor","tableScrollWrapper","_useState","_useState2","_slicedToArray","scrollLeft","setScrollLeft","allWidth","reduce","pre","cur","width","onScroll","event","target","_useContextMenu","isShowContextMenu","menuPosition","onContextMenu","createElement","Provider","value","current","Object","assign","className","style","maxWidth","ref","contextMenuPosition"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/extension/plugins/table/render/table-root.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport React, { useState, useRef, useCallback } from 'react';\nimport classnames from 'classnames';\nimport { useSlateStatic } from '@seafile/slate-react';\nimport { TableRootContext, TableRootScrollLeftContext, useContextMenu } from './hooks';\nimport { TableContextMenu } from '../menu';\nconst TableRoot = _ref => {\n  let {\n    attributes,\n    columns = [],\n    children\n  } = _ref;\n  const editor = useSlateStatic();\n  const tableScrollWrapper = useRef(null);\n  const [scrollLeft, setScrollLeft] = useState(0);\n  const allWidth = columns.reduce((pre, cur) => pre + cur.width, 0);\n  const onScroll = useCallback(event => {\n    setScrollLeft(event.target.scrollLeft);\n  }, []);\n  const {\n    isShowContextMenu,\n    menuPosition,\n    onContextMenu\n  } = useContextMenu(tableScrollWrapper);\n  return /*#__PURE__*/React.createElement(TableRootContext.Provider, {\n    value: tableScrollWrapper.current\n  }, /*#__PURE__*/React.createElement(TableRootScrollLeftContext.Provider, {\n    value: scrollLeft\n  }, /*#__PURE__*/React.createElement(\"div\", Object.assign({}, attributes, {\n    className: classnames('sdoc-table-wrapper position-relative', attributes.className, {\n      'scroll': allWidth > editor.width\n    }),\n    style: _objectSpread(_objectSpread({}, attributes.style), {}, {\n      maxWidth: editor.width ? editor.width : '100%'\n    })\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classnames('sdoc-table-scroll-wrapper', {\n      'scroll-at-center': scrollLeft + editor.width !== allWidth && scrollLeft > 0,\n      'scroll-at-right': scrollLeft + editor.width === allWidth,\n      'scroll-at-left': scrollLeft === 0\n    }),\n    ref: tableScrollWrapper,\n    onScroll: onScroll,\n    onContextMenu: onContextMenu\n  }, children)), isShowContextMenu && /*#__PURE__*/React.createElement(TableContextMenu, {\n    editor: editor,\n    contextMenuPosition: menuPosition\n  })));\n};\nexport default TableRoot;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}