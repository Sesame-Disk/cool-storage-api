{"ast":null,"code":"import React, { useCallback } from 'react';\nimport { UncontrolledPopover } from 'reactstrap';\nimport { withTranslation } from 'react-i18next';\nimport { ReactEditor, useSlateStatic } from '@seafile/slate-react';\nimport { onSetNodeType } from './helpers';\nimport { SIDE_TRANSFORM_MENUS_CONFIG, LIST_ITEM_SUPPORTED_TRANSFORMATION, LIST_ITEM_CORRELATION_TYPE, BLOCKQUOTE, CALL_OUT, HEADERS } from '../../constants';\nimport DropdownMenuItem from '../../commons/dropdown-menu-item';\nvar TransformMenus = function TransformMenus(_ref) {\n  var target = _ref.target,\n    slateNode = _ref.slateNode,\n    onReset = _ref.onReset,\n    t = _ref.t;\n  var editor = useSlateStatic();\n  var onSetType = useCallback(function (newType) {\n    onSetNodeType(editor, slateNode, newType);\n    onReset();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  var getSideMenusConfig = useCallback(function (SIDE_TRANSFORM_MENUS_CONFIG) {\n    var newSideMenusConfig = SIDE_TRANSFORM_MENUS_CONFIG;\n    if (LIST_ITEM_CORRELATION_TYPE.includes(slateNode.type)) {\n      newSideMenusConfig = SIDE_TRANSFORM_MENUS_CONFIG.filter(function (item) {\n        return LIST_ITEM_SUPPORTED_TRANSFORMATION.includes(item.type);\n      });\n    }\n    var path = ReactEditor.findPath(editor, slateNode);\n    if (path) {\n      var nodeIndex = path[0];\n      var highestNode = editor.children[nodeIndex];\n      if (path.length > 1) {\n        if (highestNode.type === BLOCKQUOTE) {\n          newSideMenusConfig = SIDE_TRANSFORM_MENUS_CONFIG.filter(function (item) {\n            return item.type !== CALL_OUT;\n          });\n        }\n      }\n\n      // headers can't be nested by quote block\n      if (HEADERS.includes(highestNode.type)) {\n        newSideMenusConfig = SIDE_TRANSFORM_MENUS_CONFIG.filter(function (item) {\n          return item.type !== BLOCKQUOTE;\n        });\n      }\n    }\n    return newSideMenusConfig;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [slateNode]);\n  return /*#__PURE__*/React.createElement(UncontrolledPopover, {\n    boundariesElement: \"viewport\",\n    target: target,\n    className: \"sdoc-side-operation-translate-popover sdoc-sub-dropdown-menu sdoc-dropdown-menu\",\n    trigger: \"hover\",\n    placement: \"right-start\",\n    hideArrow: true,\n    fade: false\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-dropdown-menu-container\"\n  }, getSideMenusConfig(SIDE_TRANSFORM_MENUS_CONFIG).map(function (item) {\n    return /*#__PURE__*/React.createElement(DropdownMenuItem, {\n      key: item.id,\n      menuConfig: item,\n      onClick: function onClick() {\n        return onSetType(item.type);\n      }\n    });\n  })));\n};\nexport default withTranslation('sdoc-editor')(TransformMenus);","map":{"version":3,"names":["React","useCallback","UncontrolledPopover","withTranslation","ReactEditor","useSlateStatic","onSetNodeType","SIDE_TRANSFORM_MENUS_CONFIG","LIST_ITEM_SUPPORTED_TRANSFORMATION","LIST_ITEM_CORRELATION_TYPE","BLOCKQUOTE","CALL_OUT","HEADERS","DropdownMenuItem","TransformMenus","_ref","target","slateNode","onReset","t","editor","onSetType","newType","getSideMenusConfig","newSideMenusConfig","includes","type","filter","item","path","findPath","nodeIndex","highestNode","children","length","createElement","boundariesElement","className","trigger","placement","hideArrow","fade","map","key","id","menuConfig","onClick"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/extension/toolbar/side-toolbar/transform-menus.js"],"sourcesContent":["import React, { useCallback } from 'react';\nimport { UncontrolledPopover } from 'reactstrap';\nimport { withTranslation } from 'react-i18next';\nimport { ReactEditor, useSlateStatic } from '@seafile/slate-react';\nimport { onSetNodeType } from './helpers';\nimport { SIDE_TRANSFORM_MENUS_CONFIG, LIST_ITEM_SUPPORTED_TRANSFORMATION, LIST_ITEM_CORRELATION_TYPE, BLOCKQUOTE, CALL_OUT, HEADERS } from '../../constants';\nimport DropdownMenuItem from '../../commons/dropdown-menu-item';\nconst TransformMenus = _ref => {\n  let {\n    target,\n    slateNode,\n    onReset,\n    t\n  } = _ref;\n  const editor = useSlateStatic();\n  const onSetType = useCallback(newType => {\n    onSetNodeType(editor, slateNode, newType);\n    onReset();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const getSideMenusConfig = useCallback(SIDE_TRANSFORM_MENUS_CONFIG => {\n    let newSideMenusConfig = SIDE_TRANSFORM_MENUS_CONFIG;\n    if (LIST_ITEM_CORRELATION_TYPE.includes(slateNode.type)) {\n      newSideMenusConfig = SIDE_TRANSFORM_MENUS_CONFIG.filter(item => LIST_ITEM_SUPPORTED_TRANSFORMATION.includes(item.type));\n    }\n    const path = ReactEditor.findPath(editor, slateNode);\n    if (path) {\n      const nodeIndex = path[0];\n      const highestNode = editor.children[nodeIndex];\n      if (path.length > 1) {\n        if (highestNode.type === BLOCKQUOTE) {\n          newSideMenusConfig = SIDE_TRANSFORM_MENUS_CONFIG.filter(item => item.type !== CALL_OUT);\n        }\n      }\n\n      // headers can't be nested by quote block\n      if (HEADERS.includes(highestNode.type)) {\n        newSideMenusConfig = SIDE_TRANSFORM_MENUS_CONFIG.filter(item => item.type !== BLOCKQUOTE);\n      }\n    }\n    return newSideMenusConfig;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [slateNode]);\n  return /*#__PURE__*/React.createElement(UncontrolledPopover, {\n    boundariesElement: \"viewport\",\n    target: target,\n    className: \"sdoc-side-operation-translate-popover sdoc-sub-dropdown-menu sdoc-dropdown-menu\",\n    trigger: \"hover\",\n    placement: \"right-start\",\n    hideArrow: true,\n    fade: false\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-dropdown-menu-container\"\n  }, getSideMenusConfig(SIDE_TRANSFORM_MENUS_CONFIG).map(item => {\n    return /*#__PURE__*/React.createElement(DropdownMenuItem, {\n      key: item.id,\n      menuConfig: item,\n      onClick: () => onSetType(item.type)\n    });\n  })));\n};\nexport default withTranslation('sdoc-editor')(TransformMenus);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}