{"ast":null,"code":"import _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport context from '../../../../context';\nimport RevisionsDialog from './revisions-dialog';\nimport { getErrorMsg } from '../../../../utils';\nimport toaster from '../../../toast';\nimport './index.css';\nvar Revisions = function Revisions() {\n  var _useTranslation = useTranslation(),\n    t = _useTranslation.t;\n  var _useState = useState(0),\n    _useState2 = _slicedToArray(_useState, 2),\n    revisionsCount = _useState2[0],\n    setRevisionsCount = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isShowRevisions = _useState4[0],\n    setShowRevisions = _useState4[1];\n\n  // did mount\n  useEffect(function () {\n    context.getSdocRevisionsCount().then(function (res) {\n      var count = res.data.count;\n      setRevisionsCount(count);\n    }).catch(function (error) {\n      var errorMessage = getErrorMsg(error);\n      toaster.danger(t(errorMessage));\n    });\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  var showRevisions = useCallback(function () {\n    setShowRevisions(true);\n  }, []);\n  var closeRevisions = useCallback(function () {\n    setShowRevisions(false);\n  }, []);\n  if (revisionsCount === 0) return null;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-revisions-count\",\n    onClick: showRevisions\n  }, revisionsCount === 1 && /*#__PURE__*/React.createElement(React.Fragment, null, t('1_revision')), revisionsCount > 1 && /*#__PURE__*/React.createElement(React.Fragment, null, t('x_revisions', {\n    count: revisionsCount\n  }))), isShowRevisions && /*#__PURE__*/React.createElement(RevisionsDialog, {\n    updateRevisionsCount: setRevisionsCount,\n    toggle: closeRevisions\n  }));\n};\nexport default Revisions;","map":{"version":3,"names":["React","useCallback","useEffect","useState","useTranslation","context","RevisionsDialog","getErrorMsg","toaster","Revisions","_useTranslation","t","_useState","_useState2","_slicedToArray","revisionsCount","setRevisionsCount","_useState3","_useState4","isShowRevisions","setShowRevisions","getSdocRevisionsCount","then","res","count","data","catch","error","errorMessage","danger","showRevisions","closeRevisions","createElement","Fragment","className","onClick","updateRevisionsCount","toggle"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/components/doc-operations/revision-operations/revisions/index.js"],"sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport context from '../../../../context';\nimport RevisionsDialog from './revisions-dialog';\nimport { getErrorMsg } from '../../../../utils';\nimport toaster from '../../../toast';\nimport './index.css';\nconst Revisions = () => {\n  const {\n    t\n  } = useTranslation();\n  const [revisionsCount, setRevisionsCount] = useState(0);\n  const [isShowRevisions, setShowRevisions] = useState(false);\n\n  // did mount\n  useEffect(() => {\n    context.getSdocRevisionsCount().then(res => {\n      const count = res.data.count;\n      setRevisionsCount(count);\n    }).catch(error => {\n      const errorMessage = getErrorMsg(error);\n      toaster.danger(t(errorMessage));\n    });\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const showRevisions = useCallback(() => {\n    setShowRevisions(true);\n  }, []);\n  const closeRevisions = useCallback(() => {\n    setShowRevisions(false);\n  }, []);\n  if (revisionsCount === 0) return null;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-revisions-count\",\n    onClick: showRevisions\n  }, revisionsCount === 1 && /*#__PURE__*/React.createElement(React.Fragment, null, t('1_revision')), revisionsCount > 1 && /*#__PURE__*/React.createElement(React.Fragment, null, t('x_revisions', {\n    count: revisionsCount\n  }))), isShowRevisions && /*#__PURE__*/React.createElement(RevisionsDialog, {\n    updateRevisionsCount: setRevisionsCount,\n    toggle: closeRevisions\n  }));\n};\nexport default Revisions;"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,WAAW,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC/D,SAASC,cAAc,QAAQ,eAAe;AAC9C,OAAOC,OAAO,MAAM,qBAAqB;AACzC,OAAOC,eAAe,MAAM,oBAAoB;AAChD,SAASC,WAAW,QAAQ,mBAAmB;AAC/C,OAAOC,OAAO,MAAM,gBAAgB;AACpC,OAAO,aAAa;AACpB,IAAMC,SAAS,GAAG,SAAZA,SAASA,CAAA,EAAS;EACtB,IAAAC,eAAA,GAEIN,cAAc,CAAC,CAAC;IADlBO,CAAC,GAAAD,eAAA,CAADC,CAAC;EAEH,IAAAC,SAAA,GAA4CT,QAAQ,CAAC,CAAC,CAAC;IAAAU,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAhDG,cAAc,GAAAF,UAAA;IAAEG,iBAAiB,GAAAH,UAAA;EACxC,IAAAI,UAAA,GAA4Cd,QAAQ,CAAC,KAAK,CAAC;IAAAe,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAApDE,eAAe,GAAAD,UAAA;IAAEE,gBAAgB,GAAAF,UAAA;;EAExC;EACAhB,SAAS,CAAC,YAAM;IACdG,OAAO,CAACgB,qBAAqB,CAAC,CAAC,CAACC,IAAI,CAAC,UAAAC,GAAG,EAAI;MAC1C,IAAMC,KAAK,GAAGD,GAAG,CAACE,IAAI,CAACD,KAAK;MAC5BR,iBAAiB,CAACQ,KAAK,CAAC;IAC1B,CAAC,CAAC,CAACE,KAAK,CAAC,UAAAC,KAAK,EAAI;MAChB,IAAMC,YAAY,GAAGrB,WAAW,CAACoB,KAAK,CAAC;MACvCnB,OAAO,CAACqB,MAAM,CAAClB,CAAC,CAACiB,YAAY,CAAC,CAAC;IACjC,CAAC,CAAC;;IAEF;EACF,CAAC,EAAE,EAAE,CAAC;EACN,IAAME,aAAa,GAAG7B,WAAW,CAAC,YAAM;IACtCmB,gBAAgB,CAAC,IAAI,CAAC;EACxB,CAAC,EAAE,EAAE,CAAC;EACN,IAAMW,cAAc,GAAG9B,WAAW,CAAC,YAAM;IACvCmB,gBAAgB,CAAC,KAAK,CAAC;EACzB,CAAC,EAAE,EAAE,CAAC;EACN,IAAIL,cAAc,KAAK,CAAC,EAAE,OAAO,IAAI;EACrC,OAAO,aAAaf,KAAK,CAACgC,aAAa,CAAChC,KAAK,CAACiC,QAAQ,EAAE,IAAI,EAAE,aAAajC,KAAK,CAACgC,aAAa,CAAC,KAAK,EAAE;IACpGE,SAAS,EAAE,sBAAsB;IACjCC,OAAO,EAAEL;EACX,CAAC,EAAEf,cAAc,KAAK,CAAC,IAAI,aAAaf,KAAK,CAACgC,aAAa,CAAChC,KAAK,CAACiC,QAAQ,EAAE,IAAI,EAAEtB,CAAC,CAAC,YAAY,CAAC,CAAC,EAAEI,cAAc,GAAG,CAAC,IAAI,aAAaf,KAAK,CAACgC,aAAa,CAAChC,KAAK,CAACiC,QAAQ,EAAE,IAAI,EAAEtB,CAAC,CAAC,aAAa,EAAE;IAChMa,KAAK,EAAET;EACT,CAAC,CAAC,CAAC,CAAC,EAAEI,eAAe,IAAI,aAAanB,KAAK,CAACgC,aAAa,CAAC1B,eAAe,EAAE;IACzE8B,oBAAoB,EAAEpB,iBAAiB;IACvCqB,MAAM,EAAEN;EACV,CAAC,CAAC,CAAC;AACL,CAAC;AACD,eAAetB,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}