{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Fragment}from'react';import{siteRoot,gettext,username,enableSeadoc,thumbnailSizeForOriginal}from'../../utils/constants';import{Utils}from'../../utils/utils';import TextTranslation from'../../utils/text-translation';import URLDecorator from'../../utils/url-decorator';import Loading from'../loading';import toaster from'../toast';import ModalPortal from'../modal-portal';import CreateFile from'../dialog/create-file-dialog';import CreateFolder from'../dialog/create-folder-dialog';import ImageDialog from'../dialog/image-dialog';import ZipDownloadDialog from'../dialog/zip-download-dialog';import MoveDirentDialog from'../dialog/move-dirent-dialog';import CopyDirentDialog from'../dialog/copy-dirent-dialog';import DirentListItem from'./dirent-list-item';import ContextMenu from'../context-menu/context-menu';import{hideMenu,showMenu}from'../context-menu/actions';import DirentsDraggedPreview from'../draggable/dirents-dragged-preview';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DirentListView=/*#__PURE__*/function(_React$Component){_inherits(DirentListView,_React$Component);var _super=_createSuper(DirentListView);function DirentListView(props){var _this;_classCallCheck(this,DirentListView);_this=_super.call(this,props);_this.freezeItem=function(){_this.setState({isItemFreezed:true});};_this.unfreezeItem=function(){_this.setState({isItemFreezed:false});};_this.onItemRename=function(dirent,newName){var isDuplicated=_this.props.direntList.some(function(item){return item.name===newName;});if(isDuplicated){var errMessage=gettext('The name \"{name}\" is already taken. Please choose a different name.');errMessage=errMessage.replace('{name}',Utils.HTMLescape(newName));toaster.danger(errMessage);return false;}_this.props.onItemRename(dirent,newName);};_this.onItemRenameToggle=function(){_this.freezeItem();};_this.onItemSelected=function(dirent){_this.setState({activeDirent:null});_this.props.onItemSelected(dirent);};_this.onDirentClick=function(dirent){hideMenu();if(_this.props.selectedDirentList.length>0&&!_this.state.activeDirent){return;}_this.setState({activeDirent:dirent});_this.props.onDirentClick(dirent);};_this.sortByName=function(e){e.preventDefault();var sortBy='name';var sortOrder=_this.props.sortOrder=='asc'?'desc':'asc';_this.props.sortItems(sortBy,sortOrder);};_this.sortByTime=function(e){e.preventDefault();var sortBy='time';var sortOrder=_this.props.sortOrder=='asc'?'desc':'asc';_this.props.sortItems(sortBy,sortOrder);};_this.sortBySize=function(e){e.preventDefault();var sortBy='size';var sortOrder=_this.props.sortOrder=='asc'?'desc':'asc';_this.props.sortItems(sortBy,sortOrder);};// for image popup\n_this.prepareImageItem=function(item){var name=item.name;var repoID=_this.props.repoID;var path=Utils.encodePath(Utils.joinPath(_this.props.path,name));var fileExt=name.substr(name.lastIndexOf('.')+1).toLowerCase();var isTIFF=fileExt=='tiff';var src='';if(isTIFF){src=\"\".concat(siteRoot,\"thumbnail/\").concat(repoID,\"/\").concat(thumbnailSizeForOriginal).concat(path);}else{src=\"\".concat(siteRoot,\"repo/\").concat(repoID,\"/raw\").concat(path);}return{'name':name,'url':\"\".concat(siteRoot,\"lib/\").concat(repoID,\"/file\").concat(path),'src':src};};_this.showImagePopup=function(curItem){var items=_this.props.fullDirentList.filter(function(item){return Utils.imageCheck(item.name);});var imageItems=items.map(function(item){return _this.prepareImageItem(item);});_this.setState({isImagePopupOpen:true,imageItems:imageItems,imageIndex:items.indexOf(curItem)});};_this.moveToPrevImage=function(){var imageItemsLength=_this.state.imageItems.length;_this.setState(function(prevState){return{imageIndex:(prevState.imageIndex+imageItemsLength-1)%imageItemsLength};});};_this.moveToNextImage=function(){var imageItemsLength=_this.state.imageItems.length;_this.setState(function(prevState){return{imageIndex:(prevState.imageIndex+1)%imageItemsLength};});};_this.closeImagePopup=function(){_this.setState({isImagePopupOpen:false});};_this.onCreateFileToggle=function(fileType){_this.setState({isCreateFileDialogShow:!_this.state.isCreateFileDialogShow,fileType:fileType||''});};_this.onCreateFolderToggle=function(){_this.setState({isCreateFolderDialogShow:!_this.state.isCreateFolderDialogShow});};_this.onAddFolder=function(dirPath){_this.setState({isCreateFolderDialogShow:false});_this.props.onAddFolder(dirPath);};_this.checkDuplicatedName=function(newName){var direntList=_this.props.direntList;var isDuplicated=direntList.some(function(object){return object.name===newName;});return isDuplicated;};_this.onMoveToggle=function(){_this.setState({isMoveDialogShow:!_this.state.isMoveDialogShow});};_this.onCopyToggle=function(){_this.setState({isCopyDialogShow:!_this.state.isCopyDialogShow});};_this.onItemsDownload=function(){var _this$props=_this.props,path=_this$props.path,repoID=_this$props.repoID,selectedDirentList=_this$props.selectedDirentList;if(selectedDirentList.length){if(selectedDirentList.length===1&&!selectedDirentList[0].isDir()){var direntPath=Utils.joinPath(path,selectedDirentList[0].name);var url=URLDecorator.getUrl({type:'download_file_url',repoID:repoID,filePath:direntPath});location.href=url;return;}var selectedDirentNames=selectedDirentList.map(function(dirent){return dirent.name;});_this.setState({isProgressDialogShow:true,downloadItems:selectedDirentNames});}};_this.onCloseZipDownloadDialog=function(){_this.setState({isProgressDialogShow:false});};// common contextmenu handle\n_this.onMouseDown=function(event){if(event.button===2){event.stopPropagation();return;}};_this.handleContextClick=function(event,id,menuList){var currentObject=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;event.preventDefault();event.stopPropagation();var x=event.clientX||event.touches&&event.touches[0].pageX;var y=event.clientY||event.touches&&event.touches[0].pageY;if(_this.props.posX){x-=_this.props.posX;}if(_this.props.posY){y-=_this.props.posY;}hideMenu();var showMenuConfig={id:id,position:{x:x,y:y},target:event.target,currentObject:currentObject,menuList:menuList};if(menuList.length===0){return;}showMenu(showMenuConfig);};// table-container contextmenu handle\n_this.onContainerClick=function(){hideMenu();if(_this.state.activeDirent){_this.onDirentClick(null);}};_this.onContainerMouseDown=function(event){_this.onMouseDown(event);};_this.onContainerContextMenu=function(event){event.preventDefault();// Display menu items based on the permissions of the current path\nvar permission=_this.props.userPerm;var _Utils$getUserPermiss=Utils.getUserPermission(_this.props.userPerm),isCustomPermission=_Utils$getUserPermiss.isCustomPermission,customPermission=_Utils$getUserPermiss.customPermission;if(permission!=='admin'&&permission!=='rw'&&!isCustomPermission){return;}var NEW_FOLDER=TextTranslation.NEW_FOLDER,NEW_FILE=TextTranslation.NEW_FILE,NEW_MARKDOWN_FILE=TextTranslation.NEW_MARKDOWN_FILE,NEW_EXCEL_FILE=TextTranslation.NEW_EXCEL_FILE,NEW_POWERPOINT_FILE=TextTranslation.NEW_POWERPOINT_FILE,NEW_WORD_FILE=TextTranslation.NEW_WORD_FILE,NEW_SEADOC_FILE=TextTranslation.NEW_SEADOC_FILE;var direntsContainerMenuList=[NEW_FOLDER,NEW_FILE,'Divider',NEW_MARKDOWN_FILE,NEW_EXCEL_FILE,NEW_POWERPOINT_FILE,NEW_WORD_FILE];var currentRepoInfo=_this.props.currentRepoInfo;if(enableSeadoc&&!currentRepoInfo.encrypted){direntsContainerMenuList.push(NEW_SEADOC_FILE);}if(_this.props.selectedDirentList.length===0){var id='dirent-container-menu';// custom permission judgement\nif(isCustomPermission){var canCreate=customPermission.permission.create;if(!canCreate)return;}var menuList=direntsContainerMenuList;_this.handleContextClick(event,id,menuList);}else{if(_this.props.selectedDirentList.length===1){if(!_this.state.activeDirent){var _id='dirent-item-menu';var dirent=_this.props.selectedDirentList[0];var _menuList=_this.getDirentItemMenuList(dirent,true);_this.handleContextClick(event,_id,_menuList,dirent);}else{_this.onDirentClick(null);event.preventDefault();event.persist();// custom permission judgement\nif(isCustomPermission){var modify=customPermission.permission.modify;if(!modify)return;}setTimeout(function(){var id='dirent-container-menu';var menuList=direntsContainerMenuList;_this.handleContextClick(event,id,menuList);},0);}}else{var _id2='dirents-menu';var _menuList2=[];if(isCustomPermission){var _customPermission$per=customPermission.permission,canModify=_customPermission$per.modify,canCopy=_customPermission$per.copy,canDownload=_customPermission$per.download,canDelete=_customPermission$per.delete;canModify&&_menuList2.push(TextTranslation.MOVE);canCopy&&_menuList2.push(TextTranslation.COPY);canDownload&&_menuList2.push(TextTranslation.DOWNLOAD);canDelete&&_menuList2.push(TextTranslation.DELETE);}else{_menuList2=[TextTranslation.MOVE,TextTranslation.COPY,TextTranslation.DOWNLOAD,TextTranslation.DELETE];}_this.handleContextClick(event,_id2,_menuList2);}}};_this.onContainerMenuItemClick=function(operation){switch(operation){case'New Folder':_this.onCreateFolderToggle();break;case'New File':_this.onCreateFileToggle();break;case'New Markdown File':_this.onCreateFileToggle('.md');break;case'New Excel File':_this.onCreateFileToggle('.xlsx');break;case'New PowerPoint File':_this.onCreateFileToggle('.pptx');break;case'New Word File':_this.onCreateFileToggle('.docx');break;case'New SeaDoc File':_this.onCreateFileToggle('.sdoc');break;default:break;}hideMenu();};_this.onDirentsMenuItemClick=function(operation){switch(operation){case'Move':_this.onMoveToggle();break;case'Copy':_this.onCopyToggle();break;case'Download':_this.onItemsDownload();break;case'Delete':_this.props.onItemsDelete();break;default:break;}hideMenu();};// table-thread contextmenu handle -- Shield event\n_this.onThreadMouseDown=function(event){_this.onMouseDown(event);};_this.onThreadContextMenu=function(event){event.stopPropagation();};// table-dirent-item contextmenu handle\n_this.onItemMouseDown=function(event){_this.onMouseDown(event);};_this.onItemContextMenu=function(event,dirent){// Display menu items according to the current dirent permission\nif(_this.props.selectedDirentList.length>1){return;}_this.onDirentClick(dirent);var id='dirent-item-menu';var menuList=_this.getDirentItemMenuList(dirent,true);_this.handleContextClick(event,id,menuList,dirent);};_this.setDirentItemRef=function(index){return function(item){_this.direntItems[index]=item;};};_this.onMenuItemClick=function(operation,currentObject,event){var index=_this.getDirentIndex(currentObject);_this.direntItems[index].onMenuItemClick(operation,event);hideMenu();};_this.onShowMenu=function(e){_this.freezeItem();};_this.onHideMenu=function(e){_this.unfreezeItem();};// contextmenu utils\n_this.getDirentIndex=function(dirent){var direntList=_this.props.direntList;var index=0;for(var i=0;i<direntList.length;i++){if(direntList[i].name===dirent.name){index=i;break;}}return index;};_this.getDirentItemMenuList=function(dirent,isContextmenu){var isRepoOwner=_this.isRepoOwner;var currentRepoInfo=_this.props.currentRepoInfo;return Utils.getDirentOperationList(isRepoOwner,currentRepoInfo,dirent,isContextmenu);};_this.onTableDragEnter=function(e){if(Utils.isIEBrower()||!_this.canDrop){return false;}_this.enteredCounter++;if(_this.enteredCounter!==0){if(_this.state.isListDropTipShow){return;}_this.setState({isListDropTipShow:true});}};_this.onTableDragOver=function(e){if(Utils.isIEBrower()||!_this.canDrop){return false;}if(e.dataTransfer.dropEffect==='copy'){return;}e.preventDefault();e.dataTransfer.dropEffect='move';};_this.onTableDragLeave=function(e){if(Utils.isIEBrower()||!_this.canDrop){return false;}_this.enteredCounter--;if(_this.enteredCounter===0){_this.setState({isListDropTipShow:false});}};_this.tableDrop=function(e){if(Utils.isIEBrower()||!_this.canDrop){return false;}e.persist();_this.enteredCounter=0;_this.setState({isListDropTipShow:false});if(e.dataTransfer.files.length){// uploaded files\nreturn;}var dragStartItemData=e.dataTransfer.getData('applicaiton/drag-item-info');dragStartItemData=JSON.parse(dragStartItemData);var _dragStartItemData=dragStartItemData,nodeDirent=_dragStartItemData.nodeDirent,nodeParentPath=_dragStartItemData.nodeParentPath,nodeRootPath=_dragStartItemData.nodeRootPath;if(Array.isArray(dragStartItemData)){//selected items\nreturn;}if(nodeRootPath===_this.props.path||nodeParentPath===_this.props.path){return;}if(_this.props.path.indexOf(nodeRootPath)!==-1){return;}_this.props.onItemMove(_this.props.currentRepoInfo,nodeDirent,_this.props.path,nodeParentPath);};_this.onShowDirentsDraggablePreview=function(){_this.setState({isShowDirentsDraggablePreview:true});};_this.onHideDirentsDraggablePreview=function(){_this.setState({isShowDirentsDraggablePreview:false});};_this.state={isItemFreezed:false,isImagePopupOpen:false,imageItems:[],imageIndex:0,fileType:'',isCreateFileDialogShow:false,isCreateFolderDialogShow:false,isMoveDialogShow:false,isCopyDialogShow:false,isProgressDialogShow:false,downloadItems:[],isMutipleOperation:true,activeDirent:null,isListDropTipShow:false,isShowDirentsDraggablePreview:false};_this.enteredCounter=0;// Determine whether to enter the child element to avoid dragging bubbling bugs。\n_this.isRepoOwner=props.currentRepoInfo.owner_email===username;_this.isAdmin=props.currentRepoInfo.is_admin;_this.repoEncrypted=props.currentRepoInfo.encrypted;_this.clickedDirent=null;_this.direntItems=[];_this.currentItemRef=null;_this.zipToken=null;var userPerm=props.userPerm;_this.canDrop=userPerm==='rw';var _Utils$getUserPermiss2=Utils.getUserPermission(userPerm),_isCustomPermission=_Utils$getUserPermiss2.isCustomPermission,_customPermission=_Utils$getUserPermiss2.customPermission;if(_isCustomPermission){var modify=_customPermission.permission.modify;_this.canDrop=modify;}return _this;}_createClass(DirentListView,[{key:\"render\",value:function render(){var _this2=this;var _this$props2=this.props,direntList=_this$props2.direntList,sortBy=_this$props2.sortBy,sortOrder=_this$props2.sortOrder;if(this.props.isDirentListLoading){return/*#__PURE__*/_jsx(Loading,{});}// sort\nvar sortByName=sortBy=='name';var sortByTime=sortBy=='time';var sortBySize=sortBy=='size';var sortIcon=sortOrder=='asc'?/*#__PURE__*/_jsx(\"span\",{className:\"fas fa-caret-up\"}):/*#__PURE__*/_jsx(\"span\",{className:\"fas fa-caret-down\"});var isDesktop=Utils.isDesktop();return/*#__PURE__*/_jsxs(\"div\",{className:\"table-container \".concat(this.state.isListDropTipShow&&this.canDrop?'table-drop-active':''),onMouseDown:this.onContainerMouseDown,onContextMenu:this.onContainerContextMenu,onClick:this.onContainerClick,onDragEnter:this.onTableDragEnter,onDragOver:this.onTableDragOver,onDragLeave:this.onTableDragLeave,onDrop:this.tableDrop,children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table-hover \".concat(isDesktop?'':'table-thead-hidden'),children:[isDesktop?/*#__PURE__*/_jsx(\"thead\",{onMouseDown:this.onThreadMouseDown,onContextMenu:this.onThreadContextMenu,children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{width:\"3%\",className:\"pl10\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"vam\",onChange:this.props.onAllItemSelected,checked:this.props.isAllItemSelected,\"aria-label\":this.props.isAllItemSelected?gettext('Unselect all items'):gettext('Select all items')})}),/*#__PURE__*/_jsx(\"th\",{width:\"3%\",className:\"pl10\"}),/*#__PURE__*/_jsx(\"th\",{width:\"5%\",className:\"pl10\"}),/*#__PURE__*/_jsx(\"th\",{width:\"39%\",children:/*#__PURE__*/_jsxs(\"a\",{className:\"d-block table-sort-op\",href:\"#\",onClick:this.sortByName,children:[gettext('Name'),\" \",sortByName&&sortIcon]})}),/*#__PURE__*/_jsx(\"th\",{width:\"6%\"}),/*#__PURE__*/_jsx(\"th\",{width:\"18%\"}),/*#__PURE__*/_jsx(\"th\",{width:\"11%\",children:/*#__PURE__*/_jsxs(\"a\",{className:\"d-block table-sort-op\",href:\"#\",onClick:this.sortBySize,children:[gettext('Size'),\" \",sortBySize&&sortIcon]})}),/*#__PURE__*/_jsx(\"th\",{width:\"15%\",children:/*#__PURE__*/_jsxs(\"a\",{className:\"d-block table-sort-op\",href:\"#\",onClick:this.sortByTime,children:[gettext('Last Update'),\" \",sortByTime&&sortIcon]})})]})}):/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{width:\"12%\"}),/*#__PURE__*/_jsx(\"th\",{width:\"80%\"}),/*#__PURE__*/_jsx(\"th\",{width:\"8%\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:direntList.map(function(dirent,index){return/*#__PURE__*/_jsx(DirentListItem,{ref:_this2.setDirentItemRef(index),dirent:dirent,path:_this2.props.path,repoID:_this2.props.repoID,currentRepoInfo:_this2.props.currentRepoInfo,isAdmin:_this2.isAdmin,isRepoOwner:_this2.isRepoOwner,repoEncrypted:_this2.repoEncrypted,enableDirPrivateShare:_this2.props.enableDirPrivateShare,isGroupOwnedRepo:_this2.props.isGroupOwnedRepo,onItemClick:_this2.props.onItemClick,onItemRenameToggle:_this2.onItemRenameToggle,onItemSelected:_this2.onItemSelected,onItemDelete:_this2.props.onItemDelete,onItemRename:_this2.onItemRename,onItemMove:_this2.props.onItemMove,onItemCopy:_this2.props.onItemCopy,onItemConvert:_this2.props.onItemConvert,updateDirent:_this2.props.updateDirent,isItemFreezed:_this2.state.isItemFreezed,freezeItem:_this2.freezeItem,unfreezeItem:_this2.unfreezeItem,onDirentClick:_this2.onDirentClick,showImagePopup:_this2.showImagePopup,onItemMouseDown:_this2.onItemMouseDown,onItemContextMenu:_this2.onItemContextMenu,selectedDirentList:_this2.props.selectedDirentList,activeDirent:_this2.state.activeDirent,repoTags:_this2.props.repoTags,onFileTagChanged:_this2.props.onFileTagChanged,getDirentItemMenuList:_this2.getDirentItemMenuList,showDirentDetail:_this2.props.showDirentDetail,onItemsMove:_this2.props.onItemsMove,onShowDirentsDraggablePreview:_this2.onShowDirentsDraggablePreview,loadDirentList:_this2.props.loadDirentList},index);})})]}),/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(ContextMenu,{id:'dirent-container-menu',onMenuItemClick:this.onContainerMenuItemClick}),/*#__PURE__*/_jsx(ContextMenu,{id:'dirent-item-menu',onMenuItemClick:this.onMenuItemClick,onShowMenu:this.onShowMenu,onHideMenu:this.onHideMenu}),/*#__PURE__*/_jsx(ContextMenu,{id:'dirents-menu',onMenuItemClick:this.onDirentsMenuItemClick}),this.state.isShowDirentsDraggablePreview&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(DirentsDraggedPreview,{selectedDirentList:this.props.selectedDirentList,onHideDirentsDraggablePreview:this.onHideDirentsDraggablePreview,dragStartPosition:this.state.dragStartPosition})}),this.state.isImagePopupOpen&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(ImageDialog,{imageItems:this.state.imageItems,imageIndex:this.state.imageIndex,closeImagePopup:this.closeImagePopup,moveToPrevImage:this.moveToPrevImage,moveToNextImage:this.moveToNextImage})}),this.state.isCreateFolderDialogShow&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(CreateFolder,{parentPath:this.props.path,onAddFolder:this.onAddFolder,checkDuplicatedName:this.checkDuplicatedName,addFolderCancel:this.onCreateFolderToggle})}),this.state.isCreateFileDialogShow&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(CreateFile,{parentPath:this.props.path,fileType:this.state.fileType,onAddFile:this.props.onAddFile,checkDuplicatedName:this.checkDuplicatedName,toggleDialog:this.onCreateFileToggle})}),this.state.isMoveDialogShow&&/*#__PURE__*/_jsx(MoveDirentDialog,{path:this.props.path,repoID:this.props.repoID,repoEncrypted:this.props.currentRepoInfo.encrypted,isMutipleOperation:this.state.isMutipleOperation,selectedDirentList:this.props.selectedDirentList,onItemsMove:this.props.onItemsMove,onCancelMove:this.onMoveToggle}),this.state.isCopyDialogShow&&/*#__PURE__*/_jsx(CopyDirentDialog,{path:this.props.path,repoID:this.props.repoID,repoEncrypted:this.props.currentRepoInfo.encrypted,selectedDirentList:this.props.selectedDirentList,isMutipleOperation:this.state.isMutipleOperation,onItemsCopy:this.props.onItemsCopy,onCancelCopy:this.onCopyToggle}),this.state.isProgressDialogShow&&/*#__PURE__*/_jsx(ZipDownloadDialog,{repoID:this.props.repoID,path:this.props.path,target:this.state.downloadItems,toggleDialog:this.onCloseZipDownloadDialog})]})]});}}]);return DirentListView;}(React.Component);export default DirentListView;","map":{"version":3,"names":["React","Fragment","siteRoot","gettext","username","enableSeadoc","thumbnailSizeForOriginal","Utils","TextTranslation","URLDecorator","Loading","toaster","ModalPortal","CreateFile","CreateFolder","ImageDialog","ZipDownloadDialog","MoveDirentDialog","CopyDirentDialog","DirentListItem","ContextMenu","hideMenu","showMenu","DirentsDraggedPreview","jsx","_jsx","jsxs","_jsxs","DirentListView","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","freezeItem","setState","isItemFreezed","unfreezeItem","onItemRename","dirent","newName","isDuplicated","direntList","some","item","name","errMessage","replace","HTMLescape","danger","onItemRenameToggle","onItemSelected","activeDirent","onDirentClick","selectedDirentList","length","state","sortByName","e","preventDefault","sortBy","sortOrder","sortItems","sortByTime","sortBySize","prepareImageItem","repoID","path","encodePath","joinPath","fileExt","substr","lastIndexOf","toLowerCase","isTIFF","src","concat","showImagePopup","curItem","items","fullDirentList","filter","imageCheck","imageItems","map","isImagePopupOpen","imageIndex","indexOf","moveToPrevImage","imageItemsLength","prevState","moveToNextImage","closeImagePopup","onCreateFileToggle","fileType","isCreateFileDialogShow","onCreateFolderToggle","isCreateFolderDialogShow","onAddFolder","dirPath","checkDuplicatedName","object","onMoveToggle","isMoveDialogShow","onCopyToggle","isCopyDialogShow","onItemsDownload","_this$props","isDir","direntPath","url","getUrl","type","filePath","location","href","selectedDirentNames","isProgressDialogShow","downloadItems","onCloseZipDownloadDialog","onMouseDown","event","button","stopPropagation","handleContextClick","id","menuList","currentObject","arguments","undefined","x","clientX","touches","pageX","y","clientY","pageY","posX","posY","showMenuConfig","position","target","onContainerClick","onContainerMouseDown","onContainerContextMenu","permission","userPerm","_Utils$getUserPermiss","getUserPermission","isCustomPermission","customPermission","NEW_FOLDER","NEW_FILE","NEW_MARKDOWN_FILE","NEW_EXCEL_FILE","NEW_POWERPOINT_FILE","NEW_WORD_FILE","NEW_SEADOC_FILE","direntsContainerMenuList","currentRepoInfo","encrypted","push","canCreate","create","getDirentItemMenuList","persist","modify","setTimeout","_customPermission$per","canModify","canCopy","copy","canDownload","download","canDelete","delete","MOVE","COPY","DOWNLOAD","DELETE","onContainerMenuItemClick","operation","onDirentsMenuItemClick","onItemsDelete","onThreadMouseDown","onThreadContextMenu","onItemMouseDown","onItemContextMenu","setDirentItemRef","index","direntItems","onMenuItemClick","getDirentIndex","onShowMenu","onHideMenu","i","isContextmenu","isRepoOwner","getDirentOperationList","onTableDragEnter","isIEBrower","canDrop","enteredCounter","isListDropTipShow","onTableDragOver","dataTransfer","dropEffect","onTableDragLeave","tableDrop","files","dragStartItemData","getData","JSON","parse","_dragStartItemData","nodeDirent","nodeParentPath","nodeRootPath","Array","isArray","onItemMove","onShowDirentsDraggablePreview","isShowDirentsDraggablePreview","onHideDirentsDraggablePreview","isMutipleOperation","owner_email","isAdmin","is_admin","repoEncrypted","clickedDirent","currentItemRef","zipToken","_Utils$getUserPermiss2","_createClass","key","value","render","_this2","_this$props2","isDirentListLoading","sortIcon","className","isDesktop","onContextMenu","onClick","onDragEnter","onDragOver","onDragLeave","onDrop","children","width","onChange","onAllItemSelected","checked","isAllItemSelected","ref","enableDirPrivateShare","isGroupOwnedRepo","onItemClick","onItemDelete","onItemCopy","onItemConvert","updateDirent","repoTags","onFileTagChanged","showDirentDetail","onItemsMove","loadDirentList","dragStartPosition","parentPath","addFolderCancel","onAddFile","toggleDialog","onCancelMove","onItemsCopy","onCancelCopy","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dirent-list-view/dirent-list-view.js"],"sourcesContent":["import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, gettext, username, enableSeadoc, thumbnailSizeForOriginal } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport TextTranslation from '../../utils/text-translation';\nimport URLDecorator from '../../utils/url-decorator';\nimport Loading from '../loading';\nimport toaster from '../toast';\nimport ModalPortal from '../modal-portal';\nimport CreateFile from '../dialog/create-file-dialog';\nimport CreateFolder from '../dialog/create-folder-dialog';\nimport ImageDialog from '../dialog/image-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport DirentListItem from './dirent-list-item';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport DirentsDraggedPreview from '../draggable/dirents-dragged-preview';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemConvert: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  repoTags: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  showDirentDetail: PropTypes.func.isRequired,\n  loadDirentList: PropTypes.func,\n  fullDirentList: PropTypes.array,\n  posX: PropTypes.string,\n  posY: PropTypes.string,\n};\n\nclass DirentListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      isImagePopupOpen: false,\n      imageItems: [],\n      imageIndex: 0,\n      fileType: '',\n      isCreateFileDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isProgressDialogShow: false,\n      downloadItems: [],\n      isMutipleOperation: true,\n      activeDirent: null,\n      isListDropTipShow: false,\n      isShowDirentsDraggablePreview: false,\n    };\n\n    this.enteredCounter = 0; // Determine whether to enter the child element to avoid dragging bubbling bugs。\n    this.isRepoOwner = props.currentRepoInfo.owner_email === username;\n    this.isAdmin = props.currentRepoInfo.is_admin;\n    this.repoEncrypted = props.currentRepoInfo.encrypted;\n\n    this.clickedDirent = null;\n    this.direntItems = [];\n    this.currentItemRef = null;\n\n    this.zipToken = null;\n\n    const { userPerm } = props;\n    this.canDrop = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrop = modify;\n    }\n  }\n\n  freezeItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  unfreezeItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  onItemRename = (dirent, newName) => {\n    let isDuplicated = this.props.direntList.some(item => {\n      return item.name === newName;\n    });\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      toaster.danger(errMessage);\n      return false;\n    }\n    this.props.onItemRename(dirent, newName);\n  };\n\n  onItemRenameToggle = () => {\n    this.freezeItem();\n  };\n\n  onItemSelected = (dirent) => {\n    this.setState({activeDirent: null});\n    this.props.onItemSelected(dirent);\n  };\n\n  onDirentClick = (dirent) => {\n    hideMenu();\n    if (this.props.selectedDirentList.length > 0 && !this.state.activeDirent ) {\n      return;\n    }\n    this.setState({activeDirent: dirent});\n    this.props.onDirentClick(dirent);\n  };\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  // for image popup\n  prepareImageItem = (item) => {\n    const name = item.name;\n    const repoID = this.props.repoID;\n    const path = Utils.encodePath(Utils.joinPath(this.props.path, name));\n    const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n    const isTIFF = fileExt == 'tiff';\n    let src = '';\n    if (isTIFF) {\n      src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n    } else {\n      src = `${siteRoot}repo/${repoID}/raw${path}`;\n    }\n\n    return {\n      'name': name,\n      'url': `${siteRoot}lib/${repoID}/file${path}`,\n      'src': src\n    };\n  };\n\n  showImagePopup = (curItem) => {\n    let items = this.props.fullDirentList.filter((item) => {\n      return Utils.imageCheck(item.name);\n    });\n\n    const imageItems = items.map((item) => {\n      return this.prepareImageItem(item);\n    });\n\n    this.setState({\n      isImagePopupOpen: true,\n      imageItems: imageItems,\n      imageIndex: items.indexOf(curItem)\n    });\n  };\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  };\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  };\n\n  closeImagePopup = () => {\n    this.setState({isImagePopupOpen: false});\n  };\n\n  onCreateFileToggle = (fileType) => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: fileType || ''\n    });\n  };\n\n  onCreateFolderToggle = () => {\n    this.setState({isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow});\n  };\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  };\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.props.direntList;\n    let isDuplicated = direntList.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  };\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  };\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  };\n\n  onItemsDownload = () => {\n    let { path, repoID, selectedDirentList } = this.props;\n    if (selectedDirentList.length) {\n      if (selectedDirentList.length === 1 && !selectedDirentList[0].isDir()) {\n        let direntPath = Utils.joinPath(path, selectedDirentList[0].name);\n        let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n        location.href= url;\n        return;\n      }\n\n      let selectedDirentNames = selectedDirentList.map(dirent => {\n        return dirent.name;\n      });\n\n      this.setState({\n        isProgressDialogShow: true,\n        downloadItems: selectedDirentNames\n      });\n    }\n  };\n\n  onCloseZipDownloadDialog = () => {\n    this.setState({isProgressDialogShow: false});\n  };\n\n  // common contextmenu handle\n  onMouseDown = (event) => {\n    if (event.button === 2) {\n      event.stopPropagation();\n      return;\n    }\n  };\n\n  handleContextClick = (event, id, menuList, currentObject = null) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    let showMenuConfig = {\n      id: id,\n      position: { x, y },\n      target: event.target,\n      currentObject: currentObject,\n      menuList: menuList,\n    };\n\n    if (menuList.length === 0) {\n      return;\n    }\n\n    showMenu(showMenuConfig);\n  };\n\n  // table-container contextmenu handle\n  onContainerClick = () => {\n    hideMenu();\n    if (this.state.activeDirent) {\n      this.onDirentClick(null);\n    }\n  };\n\n  onContainerMouseDown = (event) => {\n    this.onMouseDown(event);\n  };\n\n  onContainerContextMenu = (event) => {\n    event.preventDefault();\n    // Display menu items based on the permissions of the current path\n    let permission = this.props.userPerm;\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(this.props.userPerm);\n    if (permission !== 'admin' && permission !== 'rw' && !isCustomPermission) {\n      return;\n    }\n\n    const {\n      NEW_FOLDER, NEW_FILE,\n      NEW_MARKDOWN_FILE,\n      NEW_EXCEL_FILE,\n      NEW_POWERPOINT_FILE,\n      NEW_WORD_FILE,\n      NEW_SEADOC_FILE\n    } = TextTranslation;\n\n    const direntsContainerMenuList = [\n      NEW_FOLDER, NEW_FILE, 'Divider',\n      NEW_MARKDOWN_FILE,\n      NEW_EXCEL_FILE,\n      NEW_POWERPOINT_FILE,\n      NEW_WORD_FILE\n    ];\n    const { currentRepoInfo } = this.props;\n    if (enableSeadoc && !currentRepoInfo.encrypted) {\n      direntsContainerMenuList.push(NEW_SEADOC_FILE);\n    }\n\n    if (this.props.selectedDirentList.length === 0) {\n      let id = 'dirent-container-menu';\n\n      // custom permission judgement\n      if (isCustomPermission) {\n        const { create: canCreate } = customPermission.permission;\n        if (!canCreate) return;\n      }\n\n      let menuList = direntsContainerMenuList;\n      this.handleContextClick(event, id, menuList);\n    } else {\n      if (this.props.selectedDirentList.length === 1) {\n        if (!this.state.activeDirent) {\n          let id = 'dirent-item-menu';\n          let dirent = this.props.selectedDirentList[0];\n          let menuList = this.getDirentItemMenuList(dirent, true);\n          this.handleContextClick(event, id, menuList, dirent);\n        } else {\n          this.onDirentClick(null);\n          event.preventDefault();\n          event.persist();\n\n          // custom permission judgement\n          if (isCustomPermission) {\n            const { modify } = customPermission.permission;\n            if (!modify) return;\n          }\n\n          setTimeout(() => {\n            let id = 'dirent-container-menu';\n\n            let menuList = direntsContainerMenuList;\n            this.handleContextClick(event, id, menuList);\n          }, 0);\n        }\n      } else {\n        let id = 'dirents-menu';\n        let menuList = [];\n        if (isCustomPermission) {\n          const { modify: canModify, copy: canCopy, download: canDownload, delete: canDelete } = customPermission.permission;\n          canModify && menuList.push(TextTranslation.MOVE);\n          canCopy && menuList.push(TextTranslation.COPY);\n          canDownload && menuList.push(TextTranslation.DOWNLOAD);\n          canDelete && menuList.push(TextTranslation.DELETE);\n        } else {\n          menuList = [TextTranslation.MOVE, TextTranslation.COPY, TextTranslation.DOWNLOAD, TextTranslation.DELETE];\n        }\n\n        this.handleContextClick(event, id, menuList);\n      }\n    }\n  };\n\n  onContainerMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'New Folder':\n        this.onCreateFolderToggle();\n        break;\n      case 'New File':\n        this.onCreateFileToggle();\n        break;\n      case 'New Markdown File':\n        this.onCreateFileToggle('.md');\n        break;\n      case 'New Excel File':\n        this.onCreateFileToggle('.xlsx');\n        break;\n      case 'New PowerPoint File':\n        this.onCreateFileToggle('.pptx');\n        break;\n      case 'New Word File':\n        this.onCreateFileToggle('.docx');\n        break;\n      case 'New SeaDoc File':\n        this.onCreateFileToggle('.sdoc');\n        break;\n      default:\n        break;\n    }\n\n    hideMenu();\n  };\n\n  onDirentsMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Move':\n        this.onMoveToggle();\n        break;\n      case 'Copy':\n        this.onCopyToggle();\n        break;\n      case 'Download':\n        this.onItemsDownload();\n        break;\n      case 'Delete':\n        this.props.onItemsDelete();\n        break;\n      default:\n        break;\n    }\n\n    hideMenu();\n  };\n\n  // table-thread contextmenu handle -- Shield event\n  onThreadMouseDown = (event) => {\n    this.onMouseDown(event);\n  };\n\n  onThreadContextMenu = (event) => {\n    event.stopPropagation();\n  };\n\n  // table-dirent-item contextmenu handle\n  onItemMouseDown = (event) => {\n    this.onMouseDown(event);\n  };\n\n  onItemContextMenu = (event, dirent) => {\n    // Display menu items according to the current dirent permission\n    if (this.props.selectedDirentList.length > 1) {\n      return;\n    }\n    this.onDirentClick(dirent);\n    let id = 'dirent-item-menu';\n    let menuList = this.getDirentItemMenuList(dirent, true);\n    this.handleContextClick(event, id, menuList, dirent);\n  };\n\n  setDirentItemRef = (index) => item => {\n    this.direntItems[index] = item;\n  };\n\n  onMenuItemClick = (operation, currentObject, event) => {\n    let index = this.getDirentIndex(currentObject);\n    this.direntItems[index].onMenuItemClick(operation, event);\n\n    hideMenu();\n  };\n\n  onShowMenu = (e) => {\n    this.freezeItem();\n  };\n\n  onHideMenu = (e) => {\n    this.unfreezeItem();\n  };\n\n  // contextmenu utils\n  getDirentIndex = (dirent) => {\n    let direntList = this.props.direntList;\n    let index = 0;\n    for (let i = 0; i < direntList.length; i++) {\n      if (direntList[i].name === dirent.name) {\n        index = i;\n        break;\n      }\n    }\n    return index;\n  };\n\n  getDirentItemMenuList = (dirent, isContextmenu) => {\n    const isRepoOwner = this.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    return Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n  };\n\n  onTableDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    this.enteredCounter++;\n    if (this.enteredCounter !== 0) {\n      if (this.state.isListDropTipShow) {\n        return ;\n      }\n      this.setState({isListDropTipShow: true});\n    }\n  };\n\n  onTableDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.dataTransfer.dropEffect === 'copy') {\n      return;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  };\n\n  onTableDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    this.enteredCounter--;\n    if (this.enteredCounter === 0) {\n      this.setState({isListDropTipShow: false});\n    }\n  };\n\n  tableDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.persist();\n    this.enteredCounter = 0;\n    this.setState({isListDropTipShow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n\n    let {nodeDirent, nodeParentPath, nodeRootPath} = dragStartItemData;\n\n    if (Array.isArray(dragStartItemData)) { //selected items\n      return;\n    }\n\n    if (nodeRootPath === this.props.path || nodeParentPath === this.props.path) {\n      return;\n    }\n\n    if (this.props.path.indexOf(nodeRootPath) !== -1) {\n      return;\n    }\n\n    this.props.onItemMove(this.props.currentRepoInfo, nodeDirent, this.props.path, nodeParentPath);\n  };\n\n  onShowDirentsDraggablePreview = () => {\n    this.setState({\n      isShowDirentsDraggablePreview: true,\n    });\n  };\n\n  onHideDirentsDraggablePreview = () => {\n    this.setState({\n      isShowDirentsDraggablePreview: false\n    });\n  };\n\n  render() {\n    const { direntList, sortBy, sortOrder } = this.props;\n\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    // sort\n    const sortByName = sortBy == 'name';\n    const sortByTime = sortBy == 'time';\n    const sortBySize = sortBy == 'size';\n    const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n    const isDesktop = Utils.isDesktop();\n\n    return (\n      <div\n        className={`table-container ${(this.state.isListDropTipShow && this.canDrop) ? 'table-drop-active' : ''}`}\n        onMouseDown={this.onContainerMouseDown}\n        onContextMenu={this.onContainerContextMenu}\n        onClick={this.onContainerClick}\n        onDragEnter={this.onTableDragEnter}\n        onDragOver={this.onTableDragOver}\n        onDragLeave={this.onTableDragLeave}\n        onDrop={this.tableDrop}\n      >\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? (\n            <thead onMouseDown={this.onThreadMouseDown} onContextMenu={this.onThreadContextMenu}>\n              <tr>\n                <th width=\"3%\" className=\"pl10\">\n                  <input type=\"checkbox\" className=\"vam\" onChange={this.props.onAllItemSelected} checked={this.props.isAllItemSelected} aria-label={this.props.isAllItemSelected ? gettext('Unselect all items') : gettext('Select all items')} />\n                </th>\n                <th width=\"3%\" className=\"pl10\">{/*icon */}</th>\n                <th width=\"5%\" className=\"pl10\">{/*star */}</th>\n                <th width=\"39%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"6%\">{/*tag */}</th>\n                <th width=\"18%\">{/*operation */}</th>\n                <th width=\"11%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n                <th width=\"15%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n              </tr>\n            </thead>\n          ) : (\n            <thead>\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            </thead>\n          )}\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return (\n                <DirentListItem\n                  ref={this.setDirentItemRef(index)}\n                  key={index}\n                  dirent={dirent}\n                  path={this.props.path}\n                  repoID={this.props.repoID}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  isAdmin={this.isAdmin}\n                  isRepoOwner={this.isRepoOwner}\n                  repoEncrypted={this.repoEncrypted}\n                  enableDirPrivateShare={this.props.enableDirPrivateShare}\n                  isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                  onItemClick={this.props.onItemClick}\n                  onItemRenameToggle={this.onItemRenameToggle}\n                  onItemSelected={this.onItemSelected}\n                  onItemDelete={this.props.onItemDelete}\n                  onItemRename={this.onItemRename}\n                  onItemMove={this.props.onItemMove}\n                  onItemCopy={this.props.onItemCopy}\n                  onItemConvert={this.props.onItemConvert}\n                  updateDirent={this.props.updateDirent}\n                  isItemFreezed={this.state.isItemFreezed}\n                  freezeItem={this.freezeItem}\n                  unfreezeItem={this.unfreezeItem}\n                  onDirentClick={this.onDirentClick}\n                  showImagePopup={this.showImagePopup}\n                  onItemMouseDown={this.onItemMouseDown}\n                  onItemContextMenu={this.onItemContextMenu}\n                  selectedDirentList={this.props.selectedDirentList}\n                  activeDirent={this.state.activeDirent}\n                  repoTags={this.props.repoTags}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                  getDirentItemMenuList={this.getDirentItemMenuList}\n                  showDirentDetail={this.props.showDirentDetail}\n                  onItemsMove={this.props.onItemsMove}\n                  onShowDirentsDraggablePreview={this.onShowDirentsDraggablePreview}\n                  loadDirentList={this.props.loadDirentList}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        <Fragment>\n          <ContextMenu\n            id={'dirent-container-menu'}\n            onMenuItemClick={this.onContainerMenuItemClick}\n          />\n          <ContextMenu\n            id={'dirent-item-menu'}\n            onMenuItemClick={this.onMenuItemClick}\n            onShowMenu={this.onShowMenu}\n            onHideMenu={this.onHideMenu}\n          />\n          <ContextMenu\n            id={'dirents-menu'}\n            onMenuItemClick={this.onDirentsMenuItemClick}\n          />\n          {this.state.isShowDirentsDraggablePreview &&\n            <ModalPortal>\n              <DirentsDraggedPreview\n                selectedDirentList={this.props.selectedDirentList}\n                onHideDirentsDraggablePreview={this.onHideDirentsDraggablePreview}\n                dragStartPosition={this.state.dragStartPosition}\n              />\n            </ModalPortal>\n          }\n          {this.state.isImagePopupOpen && (\n            <ModalPortal>\n              <ImageDialog\n                imageItems={this.state.imageItems}\n                imageIndex={this.state.imageIndex}\n                closeImagePopup={this.closeImagePopup}\n                moveToPrevImage={this.moveToPrevImage}\n                moveToNextImage={this.moveToNextImage}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isCreateFolderDialogShow && (\n            <ModalPortal>\n              <CreateFolder\n                parentPath={this.props.path}\n                onAddFolder={this.onAddFolder}\n                checkDuplicatedName={this.checkDuplicatedName}\n                addFolderCancel={this.onCreateFolderToggle}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isCreateFileDialogShow && (\n            <ModalPortal>\n              <CreateFile\n                parentPath={this.props.path}\n                fileType={this.state.fileType}\n                onAddFile={this.props.onAddFile}\n                checkDuplicatedName={this.checkDuplicatedName}\n                toggleDialog={this.onCreateFileToggle}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isMoveDialogShow &&\n            <MoveDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              isMutipleOperation={this.state.isMutipleOperation}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n              onCancelMove={this.onMoveToggle}\n            />\n          }\n          {this.state.isCopyDialogShow &&\n            <CopyDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              selectedDirentList={this.props.selectedDirentList}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemsCopy={this.props.onItemsCopy}\n              onCancelCopy={this.onCopyToggle}\n            />\n          }\n          {this.state.isProgressDialogShow &&\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={this.state.downloadItems}\n              toggleDialog={this.onCloseZipDownloadDialog}\n            />\n          }\n        </Fragment>\n      </div>\n    );\n  }\n}\n\nDirentListView.propTypes = propTypes;\n\nexport default DirentListView;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}