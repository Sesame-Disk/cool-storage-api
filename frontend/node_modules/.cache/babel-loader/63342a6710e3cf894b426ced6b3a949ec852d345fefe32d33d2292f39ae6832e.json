{"ast":null,"code":"import slugid from 'slugid';\nimport { deserializeHtml } from './helper';\nimport { getSelectedNodeByType } from '../../core';\nimport { CODE_BLOCK, CODE_LINE } from '../../constants';\nvar withHtml = function withHtml(editor) {\n  var insertData = editor.insertData;\n  var newEditor = editor;\n  newEditor.insertData = function (data) {\n    if (!newEditor.insertFragmentData(data)) {\n      // Other document paste content into code block\n      if (!data.types.includes('text/code-block') && getSelectedNodeByType(editor, CODE_BLOCK)) {\n        var plaintext = data.getData('text/plain') || '';\n        if (plaintext) {\n          var fragmentData = [];\n          plaintext.split('\\n').forEach(function (item) {\n            var codeLine = {\n              id: slugid.nice(),\n              type: CODE_LINE,\n              children: [{\n                text: item,\n                id: slugid.nice()\n              }]\n            };\n            fragmentData.push(codeLine);\n          });\n          newEditor.insertFragment(fragmentData);\n        }\n        return;\n      }\n      var htmlContent = data.getData('text/html') || '';\n      if (htmlContent) {\n        var content = deserializeHtml(htmlContent);\n        editor.insertFragment(content);\n        return;\n      }\n      insertData(data);\n    }\n  };\n  return newEditor;\n};\nexport default withHtml;","map":{"version":3,"names":["slugid","deserializeHtml","getSelectedNodeByType","CODE_BLOCK","CODE_LINE","withHtml","editor","insertData","newEditor","data","insertFragmentData","types","includes","plaintext","getData","fragmentData","split","forEach","item","codeLine","id","nice","type","children","text","push","insertFragment","htmlContent","content"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/extension/plugins/html/plugin.js"],"sourcesContent":["import slugid from 'slugid';\nimport { deserializeHtml } from './helper';\nimport { getSelectedNodeByType } from '../../core';\nimport { CODE_BLOCK, CODE_LINE } from '../../constants';\nconst withHtml = editor => {\n  const {\n    insertData\n  } = editor;\n  const newEditor = editor;\n  newEditor.insertData = data => {\n    if (!newEditor.insertFragmentData(data)) {\n      // Other document paste content into code block\n      if (!data.types.includes('text/code-block') && getSelectedNodeByType(editor, CODE_BLOCK)) {\n        const plaintext = data.getData('text/plain') || '';\n        if (plaintext) {\n          let fragmentData = [];\n          plaintext.split('\\n').forEach(item => {\n            const codeLine = {\n              id: slugid.nice(),\n              type: CODE_LINE,\n              children: [{\n                text: item,\n                id: slugid.nice()\n              }]\n            };\n            fragmentData.push(codeLine);\n          });\n          newEditor.insertFragment(fragmentData);\n        }\n        return;\n      }\n      const htmlContent = data.getData('text/html') || '';\n      if (htmlContent) {\n        const content = deserializeHtml(htmlContent);\n        editor.insertFragment(content);\n        return;\n      }\n      insertData(data);\n    }\n  };\n  return newEditor;\n};\nexport default withHtml;"],"mappings":"AAAA,OAAOA,MAAM,MAAM,QAAQ;AAC3B,SAASC,eAAe,QAAQ,UAAU;AAC1C,SAASC,qBAAqB,QAAQ,YAAY;AAClD,SAASC,UAAU,EAAEC,SAAS,QAAQ,iBAAiB;AACvD,IAAMC,QAAQ,GAAG,SAAXA,QAAQA,CAAGC,MAAM,EAAI;EACzB,IACEC,UAAU,GACRD,MAAM,CADRC,UAAU;EAEZ,IAAMC,SAAS,GAAGF,MAAM;EACxBE,SAAS,CAACD,UAAU,GAAG,UAAAE,IAAI,EAAI;IAC7B,IAAI,CAACD,SAAS,CAACE,kBAAkB,CAACD,IAAI,CAAC,EAAE;MACvC;MACA,IAAI,CAACA,IAAI,CAACE,KAAK,CAACC,QAAQ,CAAC,iBAAiB,CAAC,IAAIV,qBAAqB,CAACI,MAAM,EAAEH,UAAU,CAAC,EAAE;QACxF,IAAMU,SAAS,GAAGJ,IAAI,CAACK,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE;QAClD,IAAID,SAAS,EAAE;UACb,IAAIE,YAAY,GAAG,EAAE;UACrBF,SAAS,CAACG,KAAK,CAAC,IAAI,CAAC,CAACC,OAAO,CAAC,UAAAC,IAAI,EAAI;YACpC,IAAMC,QAAQ,GAAG;cACfC,EAAE,EAAEpB,MAAM,CAACqB,IAAI,CAAC,CAAC;cACjBC,IAAI,EAAElB,SAAS;cACfmB,QAAQ,EAAE,CAAC;gBACTC,IAAI,EAAEN,IAAI;gBACVE,EAAE,EAAEpB,MAAM,CAACqB,IAAI,CAAC;cAClB,CAAC;YACH,CAAC;YACDN,YAAY,CAACU,IAAI,CAACN,QAAQ,CAAC;UAC7B,CAAC,CAAC;UACFX,SAAS,CAACkB,cAAc,CAACX,YAAY,CAAC;QACxC;QACA;MACF;MACA,IAAMY,WAAW,GAAGlB,IAAI,CAACK,OAAO,CAAC,WAAW,CAAC,IAAI,EAAE;MACnD,IAAIa,WAAW,EAAE;QACf,IAAMC,OAAO,GAAG3B,eAAe,CAAC0B,WAAW,CAAC;QAC5CrB,MAAM,CAACoB,cAAc,CAACE,OAAO,CAAC;QAC9B;MACF;MACArB,UAAU,CAACE,IAAI,CAAC;IAClB;EACF,CAAC;EACD,OAAOD,SAAS;AAClB,CAAC;AACD,eAAeH,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}