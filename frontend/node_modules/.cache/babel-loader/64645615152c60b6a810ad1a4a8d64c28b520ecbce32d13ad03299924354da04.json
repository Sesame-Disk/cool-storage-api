{"ast":null,"code":"import _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { Node } from '@seafile/slate';\nexport var commentDecorate = function commentDecorate(editor) {\n  return function (_ref) {\n    var _editor$element_comme;\n    var _ref2 = _slicedToArray(_ref, 2),\n      node = _ref2[0],\n      path = _ref2[1];\n    var decorations = [];\n    var comments = ((_editor$element_comme = editor.element_comments_map) === null || _editor$element_comme === void 0 ? void 0 : _editor$element_comme[node.id]) || [];\n    var unresolvedComments = comments && comments.filter(function (item) {\n      return !item.resolved;\n    });\n    if (unresolvedComments && unresolvedComments.length > 0) {\n      var decoration = {\n        anchor: {\n          path: path,\n          offset: 0\n        },\n        focus: {\n          path: path,\n          offset: Node.string(node).length\n        }\n      };\n\n      // rgba prevents occlusion of the cursor\n      decoration['computed_background_color'] = 'rgba(129, 237, 247, 0.5)';\n      decoration['comment_count'] = unresolvedComments === null || unresolvedComments === void 0 ? void 0 : unresolvedComments.length;\n      decorations.push(decoration);\n    }\n    return decorations;\n  };\n};","map":{"version":3,"names":["Node","commentDecorate","editor","_ref","_editor$element_comme","_ref2","_slicedToArray","node","path","decorations","comments","element_comments_map","id","unresolvedComments","filter","item","resolved","length","decoration","anchor","offset","focus","string","push"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/comment/comment-decorate.js"],"sourcesContent":["import { Node } from '@seafile/slate';\nexport const commentDecorate = editor => _ref => {\n  var _editor$element_comme;\n  let [node, path] = _ref;\n  const decorations = [];\n  const comments = ((_editor$element_comme = editor.element_comments_map) === null || _editor$element_comme === void 0 ? void 0 : _editor$element_comme[node.id]) || [];\n  const unresolvedComments = comments && comments.filter(item => !item.resolved);\n  if (unresolvedComments && unresolvedComments.length > 0) {\n    let decoration = {\n      anchor: {\n        path,\n        offset: 0\n      },\n      focus: {\n        path: path,\n        offset: Node.string(node).length\n      }\n    };\n\n    // rgba prevents occlusion of the cursor\n    decoration['computed_background_color'] = 'rgba(129, 237, 247, 0.5)';\n    decoration['comment_count'] = unresolvedComments === null || unresolvedComments === void 0 ? void 0 : unresolvedComments.length;\n    decorations.push(decoration);\n  }\n  return decorations;\n};"],"mappings":";AAAA,SAASA,IAAI,QAAQ,gBAAgB;AACrC,OAAO,IAAMC,eAAe,GAAG,SAAlBA,eAAeA,CAAGC,MAAM;EAAA,OAAI,UAAAC,IAAI,EAAI;IAC/C,IAAIC,qBAAqB;IACzB,IAAAC,KAAA,GAAAC,cAAA,CAAmBH,IAAI;MAAlBI,IAAI,GAAAF,KAAA;MAAEG,IAAI,GAAAH,KAAA;IACf,IAAMI,WAAW,GAAG,EAAE;IACtB,IAAMC,QAAQ,GAAG,CAAC,CAACN,qBAAqB,GAAGF,MAAM,CAACS,oBAAoB,MAAM,IAAI,IAAIP,qBAAqB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,qBAAqB,CAACG,IAAI,CAACK,EAAE,CAAC,KAAK,EAAE;IACrK,IAAMC,kBAAkB,GAAGH,QAAQ,IAAIA,QAAQ,CAACI,MAAM,CAAC,UAAAC,IAAI;MAAA,OAAI,CAACA,IAAI,CAACC,QAAQ;IAAA,EAAC;IAC9E,IAAIH,kBAAkB,IAAIA,kBAAkB,CAACI,MAAM,GAAG,CAAC,EAAE;MACvD,IAAIC,UAAU,GAAG;QACfC,MAAM,EAAE;UACNX,IAAI,EAAJA,IAAI;UACJY,MAAM,EAAE;QACV,CAAC;QACDC,KAAK,EAAE;UACLb,IAAI,EAAEA,IAAI;UACVY,MAAM,EAAEpB,IAAI,CAACsB,MAAM,CAACf,IAAI,CAAC,CAACU;QAC5B;MACF,CAAC;;MAED;MACAC,UAAU,CAAC,2BAA2B,CAAC,GAAG,0BAA0B;MACpEA,UAAU,CAAC,eAAe,CAAC,GAAGL,kBAAkB,KAAK,IAAI,IAAIA,kBAAkB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,kBAAkB,CAACI,MAAM;MAC/HR,WAAW,CAACc,IAAI,CAACL,UAAU,CAAC;IAC9B;IACA,OAAOT,WAAW;EACpB,CAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}