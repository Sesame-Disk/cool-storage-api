{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import ReactDom from'react-dom';import axios from'axios';import{fileName,historyRepoID}from'./utils/constants';import SidePanel from'./pages/file-history/side-panel';import MainPanel from'./pages/file-history/main-panel';import{seafileAPI}from'./utils/seafile-api';import'./css/layout.css';import'./css/file-history.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FileHistory=/*#__PURE__*/function(_React$Component){_inherits(FileHistory,_React$Component);var _super=_createSuper(FileHistory);function FileHistory(props){var _this;_classCallCheck(this,FileHistory);_this=_super.call(this,props);_this.setDiffContent=function(newMarkdownContent,oldMarkdownContent){_this.setState({renderingContent:false,newMarkdownContent:newMarkdownContent,oldMarkdownContent:oldMarkdownContent});};_this.onHistoryItemClick=function(item,preItem){_this.setState({renderingContent:true});seafileAPI.getFileRevision(historyRepoID,item.commit_id,item.path).then(function(res){axios.all([seafileAPI.getFileContent(res.data)]).then(axios.spread(function(content1){_this.setDiffContent(content1.data,'');}));});};_this.onBackClick=function(event){event.preventDefault();window.history.back();};_this.state={renderingContent:true,newMarkdownContent:'',oldMarkdownContent:''};return _this;}_createClass(FileHistory,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"history-content flex-fill d-flex h-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-fill d-flex flex-column text-truncate\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"history-header file-history-header flex-shrink-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"title d-flex mw-100\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"go-back\",title:\"Back\",onClick:this.onBackClick,children:/*#__PURE__*/_jsx(\"span\",{className:\"fas fa-chevron-left\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"name text-truncate\",title:fileName,children:fileName})]})}),/*#__PURE__*/_jsx(MainPanel,{newMarkdownContent:this.state.newMarkdownContent,oldMarkdownContent:this.state.oldMarkdownContent,renderingContent:this.state.renderingContent})]}),/*#__PURE__*/_jsx(SidePanel,{onItemClick:this.onHistoryItemClick})]});}}]);return FileHistory;}(React.Component);ReactDom.render(/*#__PURE__*/_jsx(FileHistory,{}),document.getElementById('wrapper'));","map":{"version":3,"names":["React","ReactDom","axios","fileName","historyRepoID","SidePanel","MainPanel","seafileAPI","jsx","_jsx","jsxs","_jsxs","FileHistory","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","setDiffContent","newMarkdownContent","oldMarkdownContent","setState","renderingContent","onHistoryItemClick","item","preItem","getFileRevision","commit_id","path","then","res","all","getFileContent","data","spread","content1","onBackClick","event","preventDefault","window","history","back","state","_createClass","key","value","render","className","children","href","title","onClick","onItemClick","Component","document","getElementById"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/file-history.js"],"sourcesContent":["import React from 'react';\nimport ReactDom from 'react-dom';\nimport axios from 'axios';\nimport { fileName, historyRepoID } from './utils/constants';\nimport SidePanel from './pages/file-history/side-panel';\nimport MainPanel from './pages/file-history/main-panel';\nimport { seafileAPI } from './utils/seafile-api';\n\nimport './css/layout.css';\nimport './css/file-history.css';\n\nclass FileHistory extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      renderingContent: true,\n      newMarkdownContent: '',\n      oldMarkdownContent: ''\n    };\n  }\n\n  setDiffContent = (newMarkdownContent, oldMarkdownContent)=> {\n    this.setState({\n      renderingContent: false,\n      newMarkdownContent: newMarkdownContent,\n      oldMarkdownContent: oldMarkdownContent,\n    });\n  };\n\n\n  onHistoryItemClick = (item, preItem)=> {\n    this.setState({renderingContent: true});\n    seafileAPI.getFileRevision(historyRepoID, item.commit_id, item.path).then((res) => {\n      axios.all([\n        seafileAPI.getFileContent(res.data),\n      ]).then(axios.spread((content1) => {\n        this.setDiffContent(content1.data, '');\n      }));\n    });\n  };\n\n  onBackClick = (event) => {\n    event.preventDefault();\n    window.history.back();\n  };\n\n  render() {\n    return (\n      <div className=\"history-content flex-fill d-flex h-100\">\n        <div className=\"flex-fill d-flex flex-column text-truncate\">\n          <div className=\"history-header file-history-header flex-shrink-0\">\n            <div className=\"title d-flex mw-100\">\n              <a href=\"#\" className=\"go-back\" title=\"Back\" onClick={this.onBackClick}>\n                <span className=\"fas fa-chevron-left\"></span>\n              </a>\n              <span className=\"name text-truncate\" title={fileName}>{fileName}</span>\n            </div>\n          </div>\n          <MainPanel\n            newMarkdownContent={this.state.newMarkdownContent}\n            oldMarkdownContent={this.state.oldMarkdownContent}\n            renderingContent={this.state.renderingContent}\n          />\n        </div>\n        <SidePanel onItemClick={this.onHistoryItemClick}/>\n      </div>\n    );\n  }\n}\n\nReactDom.render(<FileHistory />, document.getElementById('wrapper'));\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}