{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _loading = _interopRequireDefault(require(\"../containers/loading\"));\nvar _slateConvert = require(\"../slate-convert\");\nvar _useMathjax = _interopRequireDefault(require(\"../hooks/use-mathjax\"));\nvar _simpleSlateEditor = _interopRequireDefault(require(\"../editors/simple-slate-editor\"));\nvar SeaTableEditor = /*#__PURE__*/(0, _react.forwardRef)(function (_ref, ref) {\n  var isFetching = _ref.isFetching,\n    value = _ref.value,\n    editorApi = _ref.editorApi,\n    mathJaxSource = _ref.mathJaxSource,\n    columns = _ref.columns,\n    propsOnSave = _ref.onSave,\n    propsOnContentChanged = _ref.onContentChanged;\n  var _ref2 = (0, _react.useState)([]),\n    _ref3 = _slicedToArray(_ref2, 2),\n    richValue = _ref3[0],\n    setRichValue = _ref3[1];\n  var _ref4 = (0, _react.useState)(true),\n    _ref5 = _slicedToArray(_ref4, 2),\n    isLoading = _ref5[0],\n    setIsLoading = _ref5[1];\n  var _ref6 = (0, _useMathjax.default)(mathJaxSource),\n    isLoadingMathJax = _ref6.isLoadingMathJax;\n  (0, _react.useImperativeHandle)(ref, function () {\n    return {\n      getValue: function getValue() {\n        var mdStringValue = (0, _slateConvert.slateToMdString)(richValue);\n        return mdStringValue;\n      },\n      getSlateValue: function getSlateValue() {\n        return richValue;\n      }\n    };\n  }, [richValue]);\n  (0, _react.useEffect)(function () {\n    if (!isFetching) {\n      var _richValue = value ? JSON.parse(value) : (0, _slateConvert.mdStringToSlate)('');\n      setRichValue(_richValue);\n      setIsLoading(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isFetching]);\n  var onContentChanged = (0, _react.useCallback)(function (content) {\n    setRichValue(content);\n    propsOnContentChanged && propsOnContentChanged();\n  }, [propsOnContentChanged]);\n  var props = {\n    isSupportFormula: !!mathJaxSource,\n    value: richValue,\n    editorApi: editorApi,\n    columns: columns,\n    onSave: propsOnSave,\n    onContentChanged: onContentChanged\n  };\n  if (isFetching || isLoading || isLoadingMathJax) {\n    return /*#__PURE__*/_react.default.createElement(_loading.default, null);\n  }\n  return /*#__PURE__*/_react.default.createElement(_simpleSlateEditor.default, props);\n});\nvar _default = exports.default = SeaTableEditor;","map":{"version":3,"names":["_slicedToArray","require","default","_interopRequireDefault","_interopRequireWildcard","Object","defineProperty","exports","value","_react","_loading","_slateConvert","_useMathjax","_simpleSlateEditor","SeaTableEditor","forwardRef","_ref","ref","isFetching","editorApi","mathJaxSource","columns","propsOnSave","onSave","propsOnContentChanged","onContentChanged","_ref2","useState","_ref3","richValue","setRichValue","_ref4","_ref5","isLoading","setIsLoading","_ref6","isLoadingMathJax","useImperativeHandle","getValue","mdStringValue","slateToMdString","getSlateValue","useEffect","JSON","parse","mdStringToSlate","useCallback","content","props","isSupportFormula","createElement","_default"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/pages/seatable-editor.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _loading = _interopRequireDefault(require(\"../containers/loading\"));\nvar _slateConvert = require(\"../slate-convert\");\nvar _useMathjax = _interopRequireDefault(require(\"../hooks/use-mathjax\"));\nvar _simpleSlateEditor = _interopRequireDefault(require(\"../editors/simple-slate-editor\"));\nconst SeaTableEditor = /*#__PURE__*/(0, _react.forwardRef)((_ref, ref) => {\n  let {\n    isFetching,\n    value,\n    editorApi,\n    mathJaxSource,\n    columns,\n    onSave: propsOnSave,\n    onContentChanged: propsOnContentChanged\n  } = _ref;\n  const [richValue, setRichValue] = (0, _react.useState)([]);\n  const [isLoading, setIsLoading] = (0, _react.useState)(true);\n  const {\n    isLoadingMathJax\n  } = (0, _useMathjax.default)(mathJaxSource);\n  (0, _react.useImperativeHandle)(ref, () => {\n    return {\n      getValue: () => {\n        const mdStringValue = (0, _slateConvert.slateToMdString)(richValue);\n        return mdStringValue;\n      },\n      getSlateValue: () => {\n        return richValue;\n      }\n    };\n  }, [richValue]);\n  (0, _react.useEffect)(() => {\n    if (!isFetching) {\n      const richValue = value ? JSON.parse(value) : (0, _slateConvert.mdStringToSlate)('');\n      setRichValue(richValue);\n      setIsLoading(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isFetching]);\n  const onContentChanged = (0, _react.useCallback)(content => {\n    setRichValue(content);\n    propsOnContentChanged && propsOnContentChanged();\n  }, [propsOnContentChanged]);\n  const props = {\n    isSupportFormula: !!mathJaxSource,\n    value: richValue,\n    editorApi: editorApi,\n    columns: columns,\n    onSave: propsOnSave,\n    onContentChanged: onContentChanged\n  };\n  if (isFetching || isLoading || isLoadingMathJax) {\n    return /*#__PURE__*/_react.default.createElement(_loading.default, null);\n  }\n  return /*#__PURE__*/_react.default.createElement(_simpleSlateEditor.default, props);\n});\nvar _default = exports.default = SeaTableEditor;"],"mappings":"AAAA,YAAY;;AAAC,IAAAA,cAAA,GAAAC,OAAA,0HAAAC,OAAA;AAEb,IAAIC,sBAAsB,GAAGF,OAAO,CAAC,8CAA8C,CAAC,CAACC,OAAO;AAC5F,IAAIE,uBAAuB,GAAGH,OAAO,CAAC,+CAA+C,CAAC,CAACC,OAAO;AAC9FG,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAC3CC,KAAK,EAAE;AACT,CAAC,CAAC;AACFD,OAAO,CAACL,OAAO,GAAG,KAAK,CAAC;AACxB,IAAIO,MAAM,GAAGL,uBAAuB,CAACH,OAAO,CAAC,OAAO,CAAC,CAAC;AACtD,IAAIS,QAAQ,GAAGP,sBAAsB,CAACF,OAAO,CAAC,uBAAuB,CAAC,CAAC;AACvE,IAAIU,aAAa,GAAGV,OAAO,CAAC,kBAAkB,CAAC;AAC/C,IAAIW,WAAW,GAAGT,sBAAsB,CAACF,OAAO,CAAC,sBAAsB,CAAC,CAAC;AACzE,IAAIY,kBAAkB,GAAGV,sBAAsB,CAACF,OAAO,CAAC,gCAAgC,CAAC,CAAC;AAC1F,IAAMa,cAAc,GAAG,aAAa,CAAC,CAAC,EAAEL,MAAM,CAACM,UAAU,EAAE,UAACC,IAAI,EAAEC,GAAG,EAAK;EACxE,IACEC,UAAU,GAORF,IAAI,CAPNE,UAAU;IACVV,KAAK,GAMHQ,IAAI,CANNR,KAAK;IACLW,SAAS,GAKPH,IAAI,CALNG,SAAS;IACTC,aAAa,GAIXJ,IAAI,CAJNI,aAAa;IACbC,OAAO,GAGLL,IAAI,CAHNK,OAAO;IACCC,WAAW,GAEjBN,IAAI,CAFNO,MAAM;IACYC,qBAAqB,GACrCR,IAAI,CADNS,gBAAgB;EAElB,IAAAC,KAAA,GAAkC,CAAC,CAAC,EAAEjB,MAAM,CAACkB,QAAQ,EAAE,EAAE,CAAC;IAAAC,KAAA,GAAA5B,cAAA,CAAA0B,KAAA;IAAnDG,SAAS,GAAAD,KAAA;IAAEE,YAAY,GAAAF,KAAA;EAC9B,IAAAG,KAAA,GAAkC,CAAC,CAAC,EAAEtB,MAAM,CAACkB,QAAQ,EAAE,IAAI,CAAC;IAAAK,KAAA,GAAAhC,cAAA,CAAA+B,KAAA;IAArDE,SAAS,GAAAD,KAAA;IAAEE,YAAY,GAAAF,KAAA;EAC9B,IAAAG,KAAA,GAEI,CAAC,CAAC,EAAEvB,WAAW,CAACV,OAAO,EAAEkB,aAAa,CAAC;IADzCgB,gBAAgB,GAAAD,KAAA,CAAhBC,gBAAgB;EAElB,CAAC,CAAC,EAAE3B,MAAM,CAAC4B,mBAAmB,EAAEpB,GAAG,EAAE,YAAM;IACzC,OAAO;MACLqB,QAAQ,EAAE,SAAAA,SAAA,EAAM;QACd,IAAMC,aAAa,GAAG,CAAC,CAAC,EAAE5B,aAAa,CAAC6B,eAAe,EAAEX,SAAS,CAAC;QACnE,OAAOU,aAAa;MACtB,CAAC;MACDE,aAAa,EAAE,SAAAA,cAAA,EAAM;QACnB,OAAOZ,SAAS;MAClB;IACF,CAAC;EACH,CAAC,EAAE,CAACA,SAAS,CAAC,CAAC;EACf,CAAC,CAAC,EAAEpB,MAAM,CAACiC,SAAS,EAAE,YAAM;IAC1B,IAAI,CAACxB,UAAU,EAAE;MACf,IAAMW,UAAS,GAAGrB,KAAK,GAAGmC,IAAI,CAACC,KAAK,CAACpC,KAAK,CAAC,GAAG,CAAC,CAAC,EAAEG,aAAa,CAACkC,eAAe,EAAE,EAAE,CAAC;MACpFf,YAAY,CAACD,UAAS,CAAC;MACvBK,YAAY,CAAC,KAAK,CAAC;IACrB;IACA;EACF,CAAC,EAAE,CAAChB,UAAU,CAAC,CAAC;EAChB,IAAMO,gBAAgB,GAAG,CAAC,CAAC,EAAEhB,MAAM,CAACqC,WAAW,EAAE,UAAAC,OAAO,EAAI;IAC1DjB,YAAY,CAACiB,OAAO,CAAC;IACrBvB,qBAAqB,IAAIA,qBAAqB,CAAC,CAAC;EAClD,CAAC,EAAE,CAACA,qBAAqB,CAAC,CAAC;EAC3B,IAAMwB,KAAK,GAAG;IACZC,gBAAgB,EAAE,CAAC,CAAC7B,aAAa;IACjCZ,KAAK,EAAEqB,SAAS;IAChBV,SAAS,EAAEA,SAAS;IACpBE,OAAO,EAAEA,OAAO;IAChBE,MAAM,EAAED,WAAW;IACnBG,gBAAgB,EAAEA;EACpB,CAAC;EACD,IAAIP,UAAU,IAAIe,SAAS,IAAIG,gBAAgB,EAAE;IAC/C,OAAO,aAAa3B,MAAM,CAACP,OAAO,CAACgD,aAAa,CAACxC,QAAQ,CAACR,OAAO,EAAE,IAAI,CAAC;EAC1E;EACA,OAAO,aAAaO,MAAM,CAACP,OAAO,CAACgD,aAAa,CAACrC,kBAAkB,CAACX,OAAO,EAAE8C,KAAK,CAAC;AACrF,CAAC,CAAC;AACF,IAAIG,QAAQ,GAAG5C,OAAO,CAACL,OAAO,GAAGY,cAAc"},"metadata":{},"sourceType":"script","externalDependencies":[]}