{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{Input}from'reactstrap';import{gettext}from'../../utils/constants';import'../../css/files-activities.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserSelector=/*#__PURE__*/function(_Component){_inherits(UserSelector,_Component);var _super=_createSuper(UserSelector);function UserSelector(props){var _this;_classCallCheck(this,UserSelector);_this=_super.call(this,props);_this.handleOutsideClick=function(e){var isPopoverOpen=_this.state.isPopoverOpen;if(isPopoverOpen&&!_this.userSelector.contains(e.target)){_this.togglePopover();}};_this.togglePopover=function(){_this.setState({isPopoverOpen:!_this.state.isPopoverOpen},function(){if(!_this.state.isPopoverOpen){var availableUsers=_this.props.availableUsers;var selectedUsers=availableUsers.filter(function(item){return item.isSelected;});_this.props.setTargetUsers(selectedUsers);}});};_this.onToggleClick=function(e){e.stopPropagation();_this.togglePopover();};_this.onQueryChange=function(e){_this.setState({query:e.target.value});};_this.toggleSelectItem=function(e,targetItem){e.stopPropagation();_this.props.toggleSelectUser(targetItem);};_this.state={isPopoverOpen:false,query:''};return _this;}_createClass(UserSelector,[{key:\"componentDidMount\",value:function componentDidMount(){document.addEventListener('click',this.handleOutsideClick);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){document.removeEventListener('click',this.handleOutsideClick);}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,isPopoverOpen=_this$state.isPopoverOpen,query=_this$state.query;var _this$props=this.props,currentSelectedUsers=_this$props.currentSelectedUsers,availableUsers=_this$props.availableUsers;var selectedUsers=availableUsers.filter(function(item){return item.isSelected;});var filteredAvailableUsers=query.trim()?availableUsers.filter(function(item){return item.contact_email.indexOf(query.trim())!=-1||item.name.indexOf(query.trim())!=-1;}):availableUsers;return/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 position-relative\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"cur-activity-modifiers d-inline-block p-2 rounded\",onClick:this.onToggleClick,children:[currentSelectedUsers.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{children:gettext('Modified by:')}),/*#__PURE__*/_jsx(\"span\",{className:\"d-inline-block ml-1\",children:currentSelectedUsers.map(function(item){return item.name;}).join(', ')})]}):gettext('Modified by'),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-caret-down ml-2 toggle-icon\"})]}),isPopoverOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"position-absolute activity-modifier-selector-container rounded shadow\",ref:function ref(_ref){return _this2.userSelector=_ref;},children:[/*#__PURE__*/_jsx(\"ul\",{className:\"activity-selected-modifiers px-3 py-1 list-unstyled\",children:selectedUsers.map(function(item,index){return/*#__PURE__*/_jsxs(\"li\",{className:\"activity-selected-modifier\",children:[/*#__PURE__*/_jsx(\"img\",{src:item.avatar_url,className:\"avatar w-5 h-5\",alt:\"\"}),/*#__PURE__*/_jsx(\"span\",{className:\"activity-user-name ml-2\",children:item.name}),/*#__PURE__*/_jsx(\"i\",{className:\"sf2-icon-close unselect-activity-user ml-2\",onClick:function onClick(e){_this2.toggleSelectItem(e,item);}})]},index);})}),/*#__PURE__*/_jsx(\"div\",{className:\"px-3 pt-3\",children:/*#__PURE__*/_jsx(Input,{type:\"text\",placeholder:gettext('Find modifiers'),value:query,onChange:this.onQueryChange})}),/*#__PURE__*/_jsx(\"ul\",{className:\"activity-user-list list-unstyled p-3 o-auto\",children:filteredAvailableUsers.map(function(item,index){return/*#__PURE__*/_jsxs(\"li\",{className:\"activity-user-item h-6 p-1 rounded d-flex justify-content-between align-items-center\",onClick:function onClick(e){_this2.toggleSelectItem(e,item);},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:item.avatar_url,className:\"avatar w-5 h-5\",alt:\"\"}),/*#__PURE__*/_jsx(\"span\",{className:\"activity-user-name ml-2\",children:item.name})]}),item.isSelected&&/*#__PURE__*/_jsx(\"i\",{className:\"sf2-icon-tick text-gray font-weight-bold\"})]},index);})})]})]});}}]);return UserSelector;}(Component);export default UserSelector;","map":{"version":3,"names":["React","Component","Input","gettext","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","UserSelector","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","handleOutsideClick","e","isPopoverOpen","state","userSelector","contains","target","togglePopover","setState","availableUsers","selectedUsers","filter","item","isSelected","setTargetUsers","onToggleClick","stopPropagation","onQueryChange","query","value","toggleSelectItem","targetItem","toggleSelectUser","_createClass","key","componentDidMount","document","addEventListener","componentWillUnmount","removeEventListener","render","_this2","_this$state","_this$props","currentSelectedUsers","filteredAvailableUsers","trim","contact_email","indexOf","name","className","children","onClick","length","map","join","ref","index","src","avatar_url","alt","type","placeholder","onChange"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/dashboard/user-selector.js"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nimport '../../css/files-activities.css';\n\nconst propTypes = {\n  availableUsers: PropTypes.array.isRequired,\n  currentSelectedUsers: PropTypes.array.isRequired,\n  setTargetUsers: PropTypes.func.isRequired,\n  toggleSelectUser: PropTypes.func.isRequired\n};\n\nclass UserSelector extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isPopoverOpen: false,\n      query: ''\n    };\n  }\n\n  componentDidMount() {\n    document.addEventListener('click', this.handleOutsideClick);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.handleOutsideClick);\n  }\n\n  handleOutsideClick = (e) => {\n    const { isPopoverOpen } = this.state;\n    if (isPopoverOpen && !this.userSelector.contains(e.target)) {\n      this.togglePopover();\n    }\n  };\n\n  togglePopover = () => {\n    this.setState({\n      isPopoverOpen: !this.state.isPopoverOpen\n    }, () => {\n      if (!this.state.isPopoverOpen) {\n        const { availableUsers } = this.props;\n        const selectedUsers = availableUsers.filter(item => item.isSelected);\n        this.props.setTargetUsers(selectedUsers);\n      }\n    });\n  };\n\n  onToggleClick = (e) => {\n    e.stopPropagation();\n    this.togglePopover();\n  };\n\n  onQueryChange = (e) => {\n    this.setState({\n      query: e.target.value\n    });\n  };\n\n  toggleSelectItem = (e, targetItem) => {\n    e.stopPropagation();\n    this.props.toggleSelectUser(targetItem);\n  };\n\n  render() {\n    const { isPopoverOpen, query } = this.state;\n    const { currentSelectedUsers, availableUsers } = this.props;\n    const selectedUsers = availableUsers.filter(item => item.isSelected);\n    const filteredAvailableUsers = query.trim() ? availableUsers.filter(item => item.contact_email.indexOf(query.trim()) != -1 || item.name.indexOf(query.trim()) != -1) : availableUsers;\n    return (\n      <div className=\"mt-4 position-relative\">\n        <span className=\"cur-activity-modifiers d-inline-block p-2 rounded\" onClick={this.onToggleClick}>\n          {currentSelectedUsers.length > 0 ? (\n            <>\n              <span>{gettext('Modified by:')}</span>\n              <span className=\"d-inline-block ml-1\">{currentSelectedUsers.map(item => item.name).join(', ')}</span>\n            </>\n          ) : gettext('Modified by')}\n          <i className=\"fas fa-caret-down ml-2 toggle-icon\"></i>\n        </span>\n        {isPopoverOpen && (\n          <div className=\"position-absolute activity-modifier-selector-container rounded shadow\" ref={ref => this.userSelector = ref}>\n            <ul className=\"activity-selected-modifiers px-3 py-1 list-unstyled\">\n              {selectedUsers.map((item, index) => {\n                return (\n                  <li key={index} className=\"activity-selected-modifier\">\n                    <img src={item.avatar_url} className=\"avatar w-5 h-5\" alt=\"\" />\n                    <span className=\"activity-user-name ml-2\">{item.name}</span>\n                    <i className=\"sf2-icon-close unselect-activity-user ml-2\" onClick={(e) => {this.toggleSelectItem(e, item);}}></i>\n                  </li>\n                );\n              })}\n            </ul>\n            <div className=\"px-3 pt-3\">\n              <Input\n                type=\"text\"\n                placeholder={gettext('Find modifiers')}\n                value={query}\n                onChange={this.onQueryChange}\n              />\n            </div>\n            <ul className=\"activity-user-list list-unstyled p-3 o-auto\">\n              {filteredAvailableUsers.map((item, index) => {\n                return (\n                  <li key={index} className=\"activity-user-item h-6 p-1 rounded d-flex justify-content-between align-items-center\" onClick={(e) => {this.toggleSelectItem(e, item);}}>\n                    <div>\n                      <img src={item.avatar_url} className=\"avatar w-5 h-5\" alt=\"\" />\n                      <span className=\"activity-user-name ml-2\">{item.name}</span>\n                    </div>\n                    {item.isSelected && <i className=\"sf2-icon-tick text-gray font-weight-bold\"></i>}\n                  </li>\n                );\n              })}\n            </ul>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nUserSelector.propTypes = propTypes;\n\nexport default UserSelector;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}