{"ast":null,"code":"import React,{Suspense}from'react';import ReactDom from'react-dom';import{SimpleViewer}from'@seafile/sdoc-editor';import{I18nextProvider}from'react-i18next';import i18n from'./_i18n/i18n-sdoc-editor';import Loading from'./components/loading';import{Utils}from'./utils/utils';import{jsx as _jsx}from\"react/jsx-runtime\";var _window$app$config=window.app.config,serviceURL=_window$app$config.serviceURL,siteRoot=_window$app$config.siteRoot,avatarURL=_window$app$config.avatarURL;var username=window.app.pageOptions.username;var _window$shared$pageOp=window.shared.pageOptions,repoID=_window$shared$pageOp.repoID,filePerm=_window$shared$pageOp.filePerm,canDownload=_window$shared$pageOp.canDownload,canEdit=_window$shared$pageOp.canEdit,trafficOverLimit=_window$shared$pageOp.trafficOverLimit,zipped=_window$shared$pageOp.zipped,docPath=_window$shared$pageOp.docPath,docName=_window$shared$pageOp.docName,docUuid=_window$shared$pageOp.docUuid,seadocAccessToken=_window$shared$pageOp.seadocAccessToken,seadocServerUrl=_window$shared$pageOp.seadocServerUrl,assetsUrl=_window$shared$pageOp.assetsUrl;// share permission of this sdoc\nvar sharePermission={'can_edit':canEdit,'can_download':canDownload,'can_upload':false};var sharePermissionStr=Utils.getShareLinkPermissionStr(sharePermission);var sharePermissionText=Utils.getShareLinkPermissionObject(sharePermissionStr).text;window.seafile={repoID:repoID,docPath:docPath,docName:docName,docUuid:docUuid,isOpenSocket:true,serviceUrl:serviceURL,accessToken:seadocAccessToken,sdocServer:seadocServerUrl,username:username,avatarURL:avatarURL,siteRoot:siteRoot,sharePermissionText:sharePermissionText,downloadURL:canDownload&&!trafficOverLimit?\"?\".concat(zipped?'p='+encodeURIComponent(docPath)+'&':'',\"dl=1\"):'',docPerm:filePerm,historyURL:Utils.generateHistoryURL(siteRoot,repoID,docPath),assetsUrl:assetsUrl};(function(){var fileIcon=Utils.getFileIconUrl(docName,192);document.getElementById('favicon').href=fileIcon;})();ReactDom.render(/*#__PURE__*/_jsx(I18nextProvider,{i18n:i18n,children:/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(Loading,{}),children:/*#__PURE__*/_jsx(SimpleViewer,{})})}),document.getElementById('wrapper'));","map":{"version":3,"names":["React","Suspense","ReactDom","SimpleViewer","I18nextProvider","i18n","Loading","Utils","jsx","_jsx","_window$app$config","window","app","config","serviceURL","siteRoot","avatarURL","username","pageOptions","_window$shared$pageOp","shared","repoID","filePerm","canDownload","canEdit","trafficOverLimit","zipped","docPath","docName","docUuid","seadocAccessToken","seadocServerUrl","assetsUrl","sharePermission","sharePermissionStr","getShareLinkPermissionStr","sharePermissionText","getShareLinkPermissionObject","text","seafile","isOpenSocket","serviceUrl","accessToken","sdocServer","downloadURL","concat","encodeURIComponent","docPerm","historyURL","generateHistoryURL","fileIcon","getFileIconUrl","document","getElementById","href","render","children","fallback"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/shared-file-view-sdoc.js"],"sourcesContent":["import React, { Suspense } from 'react';\nimport ReactDom from 'react-dom';\nimport { SimpleViewer } from '@seafile/sdoc-editor';\nimport { I18nextProvider } from 'react-i18next';\nimport i18n from './_i18n/i18n-sdoc-editor';\nimport Loading from './components/loading';\nimport { Utils } from './utils/utils';\n\nconst { serviceURL, siteRoot, avatarURL } = window.app.config;\nconst { username } = window.app.pageOptions;\nconst {\n  repoID, filePerm,\n  canDownload, canEdit,\n  trafficOverLimit, zipped,\n  docPath, docName, docUuid, seadocAccessToken, seadocServerUrl, assetsUrl\n} = window.shared.pageOptions;\n\n// share permission of this sdoc\nconst sharePermission = {'can_edit': canEdit, 'can_download': canDownload, 'can_upload': false};\nconst sharePermissionStr = Utils.getShareLinkPermissionStr(sharePermission);\nconst sharePermissionText = Utils.getShareLinkPermissionObject(sharePermissionStr).text;\n\nwindow.seafile = {\n  repoID,\n  docPath,\n  docName,\n  docUuid,\n  isOpenSocket: true,\n  serviceUrl: serviceURL,\n  accessToken: seadocAccessToken,\n  sdocServer: seadocServerUrl,\n  username,\n  avatarURL,\n  siteRoot,\n  sharePermissionText: sharePermissionText,\n  downloadURL: (canDownload && !trafficOverLimit) ? `?${zipped ? 'p=' + encodeURIComponent(docPath) + '&' : ''}dl=1` : '',\n  docPerm: filePerm,\n  historyURL: Utils.generateHistoryURL(siteRoot, repoID, docPath),\n  assetsUrl,\n};\n\n(function() {\n  const fileIcon = Utils.getFileIconUrl(docName, 192);\n  document.getElementById('favicon').href = fileIcon;\n})();\n\nReactDom.render(\n  <I18nextProvider i18n={ i18n } >\n    <Suspense fallback={<Loading />}>\n      <SimpleViewer />\n    </Suspense>\n  </I18nextProvider>,\n  document.getElementById('wrapper')\n);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}