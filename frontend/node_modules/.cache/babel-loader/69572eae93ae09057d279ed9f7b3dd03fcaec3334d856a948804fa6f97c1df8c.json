{"ast":null,"code":"import _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { Transforms, Path, Editor } from '@seafile/slate';\nimport { getListTypes } from '../queries';\nimport { generateEmptyList } from '../model';\nexport var movedListItemDown = function movedListItemDown(editor, _ref) {\n  var list = _ref.list,\n    listItem = _ref.listItem;\n  var moved = false;\n  var _list = _slicedToArray(list, 1),\n    listNode = _list[0];\n  var _listItem = _slicedToArray(listItem, 2),\n    listItemPath = _listItem[1];\n  var previousListItemPath = null;\n  try {\n    previousListItemPath = Path.previous(listItemPath);\n  } catch (e) {\n    return;\n  }\n  var previousSiblingItem = Editor.node(editor, previousListItemPath);\n  if (previousSiblingItem) {\n    var _previousSiblingItem = _slicedToArray(previousSiblingItem, 2),\n      previousNode = _previousSiblingItem[0],\n      previousPath = _previousSiblingItem[1];\n    var subList = previousNode.children.find(function (n) {\n      return getListTypes().includes(n.type);\n    });\n    var newPath = previousPath.concat(subList ? [1, subList.children.length] : [1]);\n    Editor.withoutNormalizing(editor, function () {\n      if (!subList) {\n        // Insert a list child element\n        var _list2 = generateEmptyList(listNode.type);\n        Transforms.wrapNodes(editor, _list2, {\n          at: listItemPath\n        });\n      }\n      Transforms.moveNodes(editor, {\n        at: listItemPath,\n        to: newPath\n      });\n      moved = true;\n    });\n  }\n  return moved;\n};","map":{"version":3,"names":["Transforms","Path","Editor","getListTypes","generateEmptyList","movedListItemDown","editor","_ref","list","listItem","moved","_list","_slicedToArray","listNode","_listItem","listItemPath","previousListItemPath","previous","e","previousSiblingItem","node","_previousSiblingItem","previousNode","previousPath","subList","children","find","n","includes","type","newPath","concat","length","withoutNormalizing","wrapNodes","at","moveNodes","to"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/extension/plugins/list/transforms/move-list-item-down.js"],"sourcesContent":["import { Transforms, Path, Editor } from '@seafile/slate';\nimport { getListTypes } from '../queries';\nimport { generateEmptyList } from '../model';\nexport const movedListItemDown = (editor, _ref) => {\n  let {\n    list,\n    listItem\n  } = _ref;\n  let moved = false;\n  const [listNode] = list;\n  const [, listItemPath] = listItem;\n  let previousListItemPath = null;\n  try {\n    previousListItemPath = Path.previous(listItemPath);\n  } catch (e) {\n    return;\n  }\n  const previousSiblingItem = Editor.node(editor, previousListItemPath);\n  if (previousSiblingItem) {\n    const [previousNode, previousPath] = previousSiblingItem;\n    const subList = previousNode.children.find(n => {\n      return getListTypes().includes(n.type);\n    });\n    const newPath = previousPath.concat(subList ? [1, subList.children.length] : [1]);\n    Editor.withoutNormalizing(editor, () => {\n      if (!subList) {\n        // Insert a list child element\n        const list = generateEmptyList(listNode.type);\n        Transforms.wrapNodes(editor, list, {\n          at: listItemPath\n        });\n      }\n      Transforms.moveNodes(editor, {\n        at: listItemPath,\n        to: newPath\n      });\n      moved = true;\n    });\n  }\n  return moved;\n};"],"mappings":";AAAA,SAASA,UAAU,EAAEC,IAAI,EAAEC,MAAM,QAAQ,gBAAgB;AACzD,SAASC,YAAY,QAAQ,YAAY;AACzC,SAASC,iBAAiB,QAAQ,UAAU;AAC5C,OAAO,IAAMC,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAIC,MAAM,EAAEC,IAAI,EAAK;EACjD,IACEC,IAAI,GAEFD,IAAI,CAFNC,IAAI;IACJC,QAAQ,GACNF,IAAI,CADNE,QAAQ;EAEV,IAAIC,KAAK,GAAG,KAAK;EACjB,IAAAC,KAAA,GAAAC,cAAA,CAAmBJ,IAAI;IAAhBK,QAAQ,GAAAF,KAAA;EACf,IAAAG,SAAA,GAAAF,cAAA,CAAyBH,QAAQ;IAAxBM,YAAY,GAAAD,SAAA;EACrB,IAAIE,oBAAoB,GAAG,IAAI;EAC/B,IAAI;IACFA,oBAAoB,GAAGf,IAAI,CAACgB,QAAQ,CAACF,YAAY,CAAC;EACpD,CAAC,CAAC,OAAOG,CAAC,EAAE;IACV;EACF;EACA,IAAMC,mBAAmB,GAAGjB,MAAM,CAACkB,IAAI,CAACd,MAAM,EAAEU,oBAAoB,CAAC;EACrE,IAAIG,mBAAmB,EAAE;IACvB,IAAAE,oBAAA,GAAAT,cAAA,CAAqCO,mBAAmB;MAAjDG,YAAY,GAAAD,oBAAA;MAAEE,YAAY,GAAAF,oBAAA;IACjC,IAAMG,OAAO,GAAGF,YAAY,CAACG,QAAQ,CAACC,IAAI,CAAC,UAAAC,CAAC,EAAI;MAC9C,OAAOxB,YAAY,CAAC,CAAC,CAACyB,QAAQ,CAACD,CAAC,CAACE,IAAI,CAAC;IACxC,CAAC,CAAC;IACF,IAAMC,OAAO,GAAGP,YAAY,CAACQ,MAAM,CAACP,OAAO,GAAG,CAAC,CAAC,EAAEA,OAAO,CAACC,QAAQ,CAACO,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACjF9B,MAAM,CAAC+B,kBAAkB,CAAC3B,MAAM,EAAE,YAAM;MACtC,IAAI,CAACkB,OAAO,EAAE;QACZ;QACA,IAAMhB,MAAI,GAAGJ,iBAAiB,CAACS,QAAQ,CAACgB,IAAI,CAAC;QAC7C7B,UAAU,CAACkC,SAAS,CAAC5B,MAAM,EAAEE,MAAI,EAAE;UACjC2B,EAAE,EAAEpB;QACN,CAAC,CAAC;MACJ;MACAf,UAAU,CAACoC,SAAS,CAAC9B,MAAM,EAAE;QAC3B6B,EAAE,EAAEpB,YAAY;QAChBsB,EAAE,EAAEP;MACN,CAAC,CAAC;MACFpB,KAAK,GAAG,IAAI;IACd,CAAC,CAAC;EACJ;EACA,OAAOA,KAAK;AACd,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}