{"ast":null,"code":"\"use strict\";\n\nvar _createForOfIteratorHelper = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\").default;\nvar _slicedToArray = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isMenuDisabled = exports.clearStyles = void 0;\nvar _slate = require(\"slate\");\nvar _elementTypes = require(\"../../constants/element-types\");\nvar _core = require(\"../../core\");\nvar isMenuDisabled = function isMenuDisabled(editor) {\n  var readonly = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  if (readonly) return true;\n  if (editor.selection == null) return true;\n  var _slate$Editor$nodes = _slate.Editor.nodes(editor, {\n      match: function match(n) {\n        var type = (0, _core.getNodeType)(n);\n        if ([_elementTypes.CODE_BLOCK, _elementTypes.CODE_LINE].includes(type)) return true; // code-block\n        if (_slate.Editor.isVoid(editor, n)) return true; // void node\n\n        return false;\n      },\n      universal: true\n    }),\n    _slate$Editor$nodes2 = _slicedToArray(_slate$Editor$nodes, 1),\n    match = _slate$Editor$nodes2[0];\n  if (match) return true;\n  return false;\n};\nexports.isMenuDisabled = isMenuDisabled;\nvar removeMarks = function removeMarks(editor, textNode) {\n  // Iterate text node properties, clearing styles\n  var keys = Object.keys(textNode);\n  keys.forEach(function (key) {\n    if (key === 'text') {\n      // Keep only the text attribute （Text attributes are necessary）\n      return;\n    }\n    // All other attributes are deleted\n    _slate.Editor.removeMark(editor, key);\n  });\n};\nvar clearStyles = function clearStyles(editor) {\n  var nodeEntries = _slate.Editor.nodes(editor, {\n    match: function match(n) {\n      return _slate.Text.isText(n);\n    },\n    universal: true\n  });\n  var _iterator = _createForOfIteratorHelper(nodeEntries),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var nodeEntry = _step.value;\n      // single text node\n      var n = nodeEntry[0];\n      removeMarks(editor, n);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n};\nexports.clearStyles = clearStyles;","map":{"version":3,"names":["_createForOfIteratorHelper","require","default","_slicedToArray","Object","defineProperty","exports","value","isMenuDisabled","clearStyles","_slate","_elementTypes","_core","editor","readonly","arguments","length","undefined","selection","_slate$Editor$nodes","Editor","nodes","match","n","type","getNodeType","CODE_BLOCK","CODE_LINE","includes","isVoid","universal","_slate$Editor$nodes2","removeMarks","textNode","keys","forEach","key","removeMark","nodeEntries","Text","isText","_iterator","_step","s","done","nodeEntry","err","e","f"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/extension/plugins/clear-format/helpers.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isMenuDisabled = exports.clearStyles = void 0;\nvar _slate = require(\"slate\");\nvar _elementTypes = require(\"../../constants/element-types\");\nvar _core = require(\"../../core\");\nconst isMenuDisabled = function (editor) {\n  let readonly = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  if (readonly) return true;\n  if (editor.selection == null) return true;\n  const [match] = _slate.Editor.nodes(editor, {\n    match: n => {\n      const type = (0, _core.getNodeType)(n);\n      if ([_elementTypes.CODE_BLOCK, _elementTypes.CODE_LINE].includes(type)) return true; // code-block\n      if (_slate.Editor.isVoid(editor, n)) return true; // void node\n\n      return false;\n    },\n    universal: true\n  });\n  if (match) return true;\n  return false;\n};\nexports.isMenuDisabled = isMenuDisabled;\nconst removeMarks = (editor, textNode) => {\n  // Iterate text node properties, clearing styles\n  const keys = Object.keys(textNode);\n  keys.forEach(key => {\n    if (key === 'text') {\n      // Keep only the text attribute （Text attributes are necessary）\n      return;\n    }\n    // All other attributes are deleted\n    _slate.Editor.removeMark(editor, key);\n  });\n};\nconst clearStyles = editor => {\n  const nodeEntries = _slate.Editor.nodes(editor, {\n    match: n => _slate.Text.isText(n),\n    universal: true\n  });\n  for (const nodeEntry of nodeEntries) {\n    // single text node\n    const n = nodeEntry[0];\n    removeMarks(editor, n);\n  }\n};\nexports.clearStyles = clearStyles;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}