{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import moment from'moment';import Calendar from'@seafile/seafile-calendar';import DatePicker from'@seafile/seafile-calendar/lib/Picker';import{translateCalendar}from'../utils/date-format-utils';import'@seafile/seafile-calendar/assets/index.css';import'../css/date-and-time-picker.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Picker=/*#__PURE__*/function(_React$Component){_inherits(Picker,_React$Component);var _super=_createSuper(Picker);function Picker(props){var _this;_classCallCheck(this,Picker);_this=_super.call(this,props);_this.getCalendarContainer=function(){return _this.calendarContainerRef.current;};_this.defaultCalendarValue=null;_this.calendarContainerRef=/*#__PURE__*/React.createRef();_this.inputRef=/*#__PURE__*/React.createRef();return _this;}_createClass(Picker,[{key:\"componentDidMount\",value:function componentDidMount(){var lang=window.app.config.lang;this.defaultCalendarValue=moment().locale(lang).clone();}},{key:\"render\",value:function render(){var _this2=this;var showHourAndMinute=true;// default: true\nif(this.props.showHourAndMinute!=undefined){showHourAndMinute=this.props.showHourAndMinute;}var FORMAT=showHourAndMinute?'YYYY-MM-DD HH:mm':'YYYY-MM-DD';var calendar=/*#__PURE__*/_jsx(Calendar,{defaultValue:this.defaultCalendarValue,disabledDate:this.props.disabledDate,format:FORMAT,locale:translateCalendar(),showHourAndMinute:showHourAndMinute});return/*#__PURE__*/_jsx(DatePicker,{disabled:this.props.disabled,getCalendarContainer:this.getCalendarContainer,calendar:calendar,value:this.props.value,onChange:this.props.onChange,children:function children(_ref){var value=_ref.value;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{placeholder:FORMAT,style:{width:_this2.props.inputWidth||250},tabIndex:\"-1\",disabled:_this2.props.disabled,readOnly:true,value:value&&value.format(FORMAT)||'',className:\"form-control\",ref:_this2.inputRef}),/*#__PURE__*/_jsx(\"div\",{ref:_this2.calendarContainerRef})]});}});}}]);return Picker;}(React.Component);export default Picker;","map":{"version":3,"names":["React","moment","Calendar","DatePicker","translateCalendar","jsx","_jsx","jsxs","_jsxs","Picker","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","getCalendarContainer","calendarContainerRef","current","defaultCalendarValue","createRef","inputRef","_createClass","key","value","componentDidMount","lang","window","app","config","locale","clone","render","_this2","showHourAndMinute","undefined","FORMAT","calendar","defaultValue","disabledDate","format","disabled","onChange","children","_ref","placeholder","style","width","inputWidth","tabIndex","readOnly","className","ref","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/date-and-time-picker.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport Calendar from '@seafile/seafile-calendar';\nimport DatePicker from '@seafile/seafile-calendar/lib/Picker';\nimport { translateCalendar } from '../utils/date-format-utils';\n\nimport '@seafile/seafile-calendar/assets/index.css';\nimport '../css/date-and-time-picker.css';\n\nclass Picker extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.defaultCalendarValue = null;\n    this.calendarContainerRef = React.createRef();\n    this.inputRef = React.createRef();\n  }\n\n  componentDidMount() {\n    let lang = window.app.config.lang;\n    this.defaultCalendarValue = moment().locale(lang).clone();\n\n  }\n\n  getCalendarContainer = () => {\n    return this.calendarContainerRef.current;\n  };\n\n  render() {\n    let showHourAndMinute = true; // default: true\n    if (this.props.showHourAndMinute != undefined) {\n      showHourAndMinute = this.props.showHourAndMinute;\n    }\n\n    const FORMAT = showHourAndMinute ? 'YYYY-MM-DD HH:mm' : 'YYYY-MM-DD';\n\n    const calendar = (<Calendar\n      defaultValue={this.defaultCalendarValue}\n      disabledDate={this.props.disabledDate}\n      format={FORMAT}\n      locale={translateCalendar()}\n      showHourAndMinute={showHourAndMinute}\n    />);\n    return (\n      <DatePicker\n        disabled={this.props.disabled}\n        getCalendarContainer={this.getCalendarContainer}\n        calendar={calendar}\n        value={this.props.value}\n        onChange={this.props.onChange}\n      >\n        {\n          ({value}) => {\n            return (\n              <div>\n                <input\n                  placeholder={FORMAT}\n                  style={{ width: this.props.inputWidth || 250 }}\n                  tabIndex=\"-1\"\n                  disabled={this.props.disabled}\n                  readOnly={true}\n                  value={value && value.format(FORMAT) || ''}\n                  className=\"form-control\"\n                  ref={this.inputRef}\n                />\n                <div ref={this.calendarContainerRef} />\n              </div>\n            );\n          }\n        }\n      </DatePicker>\n    );\n  }\n}\n\nPicker.propTypes = {\n  showHourAndMinute: PropTypes.bool.isRequired,\n  disabledDate: PropTypes.func.isRequired,\n  value: PropTypes.object,\n  disabled: PropTypes.func.isRequired,\n  inputWidth: PropTypes.number.isRequired,\n  onChange: PropTypes.func.isRequired\n};\n\nexport default Picker;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}