{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{gettext}from'../../utils/constants';import{seafileAPI}from'../../utils/seafile-api';import{Utils}from'../../utils/utils';import toaster from'../toast';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _window$app$pageOptio=window.app.pageOptions,fileUpdatesEmailInterval=_window$app$pageOptio.fileUpdatesEmailInterval,collaborateEmailInterval=_window$app$pageOptio.collaborateEmailInterval;var EmailNotice=/*#__PURE__*/function(_React$Component){_inherits(EmailNotice,_React$Component);var _super=_createSuper(EmailNotice);function EmailNotice(props){var _this;_classCallCheck(this,EmailNotice);_this=_super.call(this,props);// interval: in seconds\n_this.inputFileUpdatesEmailIntervalChange=function(e){if(e.target.checked){_this.setState({fileUpdatesEmailInterval:parseInt(e.target.value)});}};_this.inputCollaborateEmailIntervalChange=function(e){if(e.target.checked){_this.setState({collaborateEmailInterval:parseInt(e.target.value)});}};_this.formSubmit=function(e){e.preventDefault();var _this$state=_this.state,fileUpdatesEmailInterval=_this$state.fileUpdatesEmailInterval,collaborateEmailInterval=_this$state.collaborateEmailInterval;seafileAPI.updateEmailNotificationInterval(fileUpdatesEmailInterval,collaborateEmailInterval).then(function(res){toaster.success(gettext('Success'));}).catch(function(error){var errorMsg=Utils.getErrorMsg(error);toaster.danger(errorMsg);});};_this.fileUpdatesOptions=[{interval:0,text:gettext('Don\\'t send emails')},{interval:3600,text:gettext('Per hour')},{interval:14400,text:gettext('Per 4 hours')},{interval:86400,text:gettext('Per day')},{interval:604800,text:gettext('Per week')}];_this.collaborateOptions=[{interval:0,text:gettext('Don\\'t send emails')},{interval:3600,text:gettext('Per hour')+' ('+gettext('If notifications have not been read within one hour, they will be sent to your mailbox.')+')'}];_this.state={fileUpdatesEmailInterval:fileUpdatesEmailInterval,collaborateEmailInterval:collaborateEmailInterval};return _this;}_createClass(EmailNotice,[{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,fileUpdatesEmailInterval=_this$state2.fileUpdatesEmailInterval,collaborateEmailInterval=_this$state2.collaborateEmailInterval;return/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",id:\"email-notice\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"setting-item-heading\",children:gettext('Email Notification')}),/*#__PURE__*/_jsx(\"h6\",{className:\"\",children:gettext('Notifications of file changes')}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-1\",children:gettext('The list of added, deleted and modified files will be sent to your mailbox.')}),/*#__PURE__*/_jsx(\"form\",{method:\"post\",action:\"\",id:\"set-email-notice-interval-form\",onSubmit:this.formSubmit,children:this.fileUpdatesOptions.map(function(item,index){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"interval\",value:item.interval,className:\"align-middle\",id:\"file-updates-interval-option\".concat(index+1),checked:fileUpdatesEmailInterval==item.interval,onChange:_this2.inputFileUpdatesEmailIntervalChange}),/*#__PURE__*/_jsx(\"label\",{className:\"align-middle m-0 ml-2\",htmlFor:\"interval-option\".concat(index+1),children:item.text}),/*#__PURE__*/_jsx(\"br\",{})]},\"file-updates-\".concat(index));})}),/*#__PURE__*/_jsx(\"h6\",{className:\"mt-4\",children:gettext('Notifications of collaboration')}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-1\",children:gettext('Whether the notifications of collaboration such as sharing library or joining group should be sent to your mailbox.')}),/*#__PURE__*/_jsx(\"form\",{method:\"post\",action:\"\",id:\"set-email-notice-interval-form\",onSubmit:this.formSubmit,children:this.collaborateOptions.map(function(item,index){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"interval\",value:item.interval,className:\"align-middle\",id:\"collaborate-interval-option\".concat(index+1),checked:collaborateEmailInterval==item.interval,onChange:_this2.inputCollaborateEmailIntervalChange}),/*#__PURE__*/_jsx(\"label\",{className:\"align-middle m-0 ml-2\",htmlFor:\"interval-option\".concat(index+1),children:item.text}),/*#__PURE__*/_jsx(\"br\",{})]},\"collaborate-\".concat(index));})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-outline-primary mt-2\",onClick:this.formSubmit,children:gettext('Submit')})]});}}]);return EmailNotice;}(React.Component);export default EmailNotice;","map":{"version":3,"names":["React","gettext","seafileAPI","Utils","toaster","jsx","_jsx","jsxs","_jsxs","_window$app$pageOptio","window","app","pageOptions","fileUpdatesEmailInterval","collaborateEmailInterval","EmailNotice","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","inputFileUpdatesEmailIntervalChange","e","target","checked","setState","parseInt","value","inputCollaborateEmailIntervalChange","formSubmit","preventDefault","_this$state","state","updateEmailNotificationInterval","then","res","success","catch","error","errorMsg","getErrorMsg","danger","fileUpdatesOptions","interval","text","collaborateOptions","_createClass","key","render","_this2","_this$state2","className","id","children","method","action","onSubmit","map","item","index","Fragment","type","name","concat","onChange","htmlFor","onClick","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/email-notice.js"],"sourcesContent":["import React from 'react';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst {\n  fileUpdatesEmailInterval,\n  collaborateEmailInterval\n} = window.app.pageOptions;\n\nclass EmailNotice extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    // interval: in seconds\n    this.fileUpdatesOptions = [\n      {interval: 0, text: gettext('Don\\'t send emails')},\n      {interval: 3600, text: gettext('Per hour')},\n      {interval: 14400, text: gettext('Per 4 hours')},\n      {interval: 86400, text: gettext('Per day')},\n      {interval: 604800, text: gettext('Per week')}\n    ];\n\n    this.collaborateOptions = [\n      {interval: 0, text: gettext('Don\\'t send emails')},\n      {interval: 3600, text: gettext('Per hour') + ' (' + gettext('If notifications have not been read within one hour, they will be sent to your mailbox.') + ')'}\n    ];\n\n    this.state = {\n      fileUpdatesEmailInterval: fileUpdatesEmailInterval,\n      collaborateEmailInterval: collaborateEmailInterval\n    };\n  }\n\n  inputFileUpdatesEmailIntervalChange = (e) => {\n    if (e.target.checked) {\n      this.setState({\n        fileUpdatesEmailInterval: parseInt(e.target.value)\n      });\n    }\n  };\n\n  inputCollaborateEmailIntervalChange = (e) => {\n    if (e.target.checked) {\n      this.setState({\n        collaborateEmailInterval: parseInt(e.target.value)\n      });\n    }\n  };\n\n  formSubmit = (e) => {\n    e.preventDefault();\n    let { fileUpdatesEmailInterval, collaborateEmailInterval } = this.state;\n    seafileAPI.updateEmailNotificationInterval(fileUpdatesEmailInterval, collaborateEmailInterval).then((res) => {\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n    });\n  };\n\n  render() {\n    const { fileUpdatesEmailInterval, collaborateEmailInterval } = this.state;\n    return (\n      <div className=\"setting-item\" id=\"email-notice\">\n        <h3 className=\"setting-item-heading\">{gettext('Email Notification')}</h3>\n        <h6 className=\"\">{gettext('Notifications of file changes')}</h6>\n        <p className=\"mb-1\">{gettext('The list of added, deleted and modified files will be sent to your mailbox.')}</p>\n        <form method=\"post\" action=\"\" id=\"set-email-notice-interval-form\" onSubmit={this.formSubmit}>\n          {this.fileUpdatesOptions.map((item, index) => {\n            return (\n              <React.Fragment key={`file-updates-${index}`}>\n                <input type=\"radio\" name=\"interval\" value={item.interval} className=\"align-middle\" id={`file-updates-interval-option${index + 1}`} checked={fileUpdatesEmailInterval == item.interval} onChange={this.inputFileUpdatesEmailIntervalChange} />\n                <label className=\"align-middle m-0 ml-2\" htmlFor={`interval-option${index + 1}`}>{item.text}</label>\n                <br />\n              </React.Fragment>\n            );\n          })}\n        </form>\n\n        <h6 className=\"mt-4\">{gettext('Notifications of collaboration')}</h6>\n        <p className=\"mb-1\">{gettext('Whether the notifications of collaboration such as sharing library or joining group should be sent to your mailbox.')}</p>\n        <form method=\"post\" action=\"\" id=\"set-email-notice-interval-form\" onSubmit={this.formSubmit}>\n          {this.collaborateOptions.map((item, index) => {\n            return (\n              <React.Fragment key={`collaborate-${index}`}>\n                <input type=\"radio\" name=\"interval\" value={item.interval} className=\"align-middle\" id={`collaborate-interval-option${index + 1}`} checked={collaborateEmailInterval == item.interval} onChange={this.inputCollaborateEmailIntervalChange} />\n                <label className=\"align-middle m-0 ml-2\" htmlFor={`interval-option${index + 1}`}>{item.text}</label>\n                <br />\n              </React.Fragment>\n            );\n          })}\n        </form>\n        <button type=\"submit\" className=\"btn btn-outline-primary mt-2\" onClick={this.formSubmit}>{gettext('Submit')}</button>\n      </div>\n    );\n  }\n}\n\nexport default EmailNotice;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}