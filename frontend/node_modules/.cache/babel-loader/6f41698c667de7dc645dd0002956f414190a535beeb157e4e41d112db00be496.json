{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Fragment}from'react';import{Link}from'@gatsbyjs/reach-router';import moment from'moment';import{gettext}from'../../../utils/constants';import{Utils}from'../../../utils/utils';import Loading from'../../../components/loading';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DirentItem=/*#__PURE__*/function(_React$Component){_inherits(DirentItem,_React$Component);var _super=_createSuper(DirentItem);function DirentItem(props){var _this;_classCallCheck(this,DirentItem);_this=_super.call(this,props);_this.handleMouseOver=function(){_this.setState({isOpIconShown:true});};_this.handleMouseOut=function(){_this.setState({isOpIconShown:false});};_this.openFolder=function(){_this.props.openFolder(_this.props.dirent);};_this.deleteDirent=function(e){e.preventDefault();_this.props.deleteDirent(_this.props.dirent);};_this.downloadDirent=function(e){e.preventDefault();_this.props.downloadDirent(_this.props.dirent);};_this.state={isOpIconShown:false};return _this;}_createClass(DirentItem,[{key:\"render\",value:function render(){var isOpIconShown=this.state.isOpIconShown;var _this$props=this.props,dirent=_this$props.dirent,fromSystemRepo=_this$props.fromSystemRepo;var iconUrl=Utils.getDirentIcon(dirent);return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"tr\",{onMouseEnter:this.handleMouseOver,onMouseLeave:this.handleMouseOut,children:[/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"img\",{src:iconUrl,width:\"24\",alt:\"\"})}),/*#__PURE__*/_jsx(\"td\",{children:dirent.is_file?dirent.name:/*#__PURE__*/_jsx(Link,{to:\"#\",onClick:this.openFolder,children:dirent.name})}),/*#__PURE__*/_jsxs(\"td\",{children:[isOpIconShown&&fromSystemRepo&&/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"op-icon sf2-icon-delete\",title:gettext('Delete'),onClick:this.deleteDirent}),isOpIconShown&&dirent.is_file&&/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"op-icon sf2-icon-download\",title:gettext('Download'),onClick:this.downloadDirent})]}),/*#__PURE__*/_jsx(\"td\",{children:dirent.size}),/*#__PURE__*/_jsx(\"td\",{children:moment(dirent.mtime).fromNow()})]})});}}]);return DirentItem;}(React.Component);var DirContent=/*#__PURE__*/function(_React$Component2){_inherits(DirContent,_React$Component2);var _super2=_createSuper(DirContent);function DirContent(){_classCallCheck(this,DirContent);return _super2.apply(this,arguments);}_createClass(DirContent,[{key:\"render\",value:function render(){var _this2=this;var _this$props2=this.props,loading=_this$props2.loading,errorMsg=_this$props2.errorMsg,direntList=_this$props2.direntList;if(loading){return/*#__PURE__*/_jsx(Loading,{});}if(errorMsg){return/*#__PURE__*/_jsx(\"p\",{className:\"error text-center mt-4\",children:errorMsg});}return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"table\",{className:\"table-hover\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{width:\"5%\"}),/*#__PURE__*/_jsx(\"th\",{width:\"55%\",children:gettext('Name')}),/*#__PURE__*/_jsx(\"th\",{width:\"10%\"}),/*#__PURE__*/_jsx(\"th\",{width:\"15%\",children:gettext('Size')}),/*#__PURE__*/_jsx(\"th\",{width:\"15%\",children:gettext('Last Update')})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:direntList.map(function(dirent,index){return/*#__PURE__*/_jsx(DirentItem,{dirent:dirent,openFolder:_this2.props.openFolder,deleteDirent:_this2.props.deleteDirent,downloadDirent:_this2.props.downloadDirent,fromSystemRepo:_this2.props.fromSystemRepo},index);})})]})});}}]);return DirContent;}(React.Component);export default DirContent;","map":{"version":3,"names":["React","Fragment","Link","moment","gettext","Utils","Loading","jsx","_jsx","jsxs","_jsxs","DirentItem","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","handleMouseOver","setState","isOpIconShown","handleMouseOut","openFolder","dirent","deleteDirent","e","preventDefault","downloadDirent","state","_createClass","key","value","render","_this$props","fromSystemRepo","iconUrl","getDirentIcon","children","onMouseEnter","onMouseLeave","className","src","width","alt","is_file","name","to","onClick","href","title","size","mtime","fromNow","Component","DirContent","_React$Component2","_super2","apply","arguments","_this2","_this$props2","loading","errorMsg","direntList","map","index"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/repos/dir-content.js"],"sourcesContent":["import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport Loading from '../../../components/loading';\n\nclass DirentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  };\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  };\n\n  openFolder = () => {\n    this.props.openFolder(this.props.dirent);\n  };\n\n  deleteDirent = (e) => {\n    e.preventDefault();\n    this.props.deleteDirent(this.props.dirent);\n  };\n\n  downloadDirent = (e) => {\n    e.preventDefault();\n    this.props.downloadDirent(this.props.dirent);\n  };\n\n  render () {\n    let { isOpIconShown } = this.state;\n    let { dirent, fromSystemRepo } = this.props;\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n          <td>\n            {dirent.is_file ?\n              dirent.name :\n              <Link to=\"#\" onClick={this.openFolder}>{dirent.name}</Link>\n            }\n          </td>\n          <td>\n            {isOpIconShown && fromSystemRepo &&\n              <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} onClick={this.deleteDirent}></a>\n            }\n            {isOpIconShown && dirent.is_file &&\n            <a href=\"#\" className=\"op-icon sf2-icon-download\" title={gettext('Download')} onClick={this.downloadDirent}></a>\n            }\n          </td>\n          <td>{dirent.size}</td>\n          <td>{moment(dirent.mtime).fromNow()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\nDirentItem.propTypes = {\n  dirent: PropTypes.object.isRequired,\n  fromSystemRepo: PropTypes.bool.isRequired,\n  deleteDirent: PropTypes.func.isRequired,\n  openFolder: PropTypes.func.isRequired,\n  downloadDirent: PropTypes.func.isRequired,\n};\n\nclass DirContent extends React.Component {\n\n  render() {\n    let { loading, errorMsg, direntList } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    }\n\n    return (\n      <Fragment>\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"5%\">{/*icon*/}</th>\n              <th width=\"55%\">{gettext('Name')}</th>\n              <th width=\"10%\">{/*operation*/}</th>\n              <th width=\"15%\">{gettext('Size')}</th>\n              <th width=\"15%\">{gettext('Last Update')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return <DirentItem\n                key={index}\n                dirent={dirent}\n                openFolder={this.props.openFolder}\n                deleteDirent={this.props.deleteDirent}\n                downloadDirent={this.props.downloadDirent}\n                fromSystemRepo={this.props.fromSystemRepo}\n              />;\n            })}\n          </tbody>\n        </table>\n      </Fragment>\n    );\n  }\n}\n\nDirContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  openFolder: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  fromSystemRepo: PropTypes.bool.isRequired,\n  deleteDirent: PropTypes.func.isRequired,\n  downloadDirent: PropTypes.func.isRequired,\n};\n\nexport default DirContent;\n"],"mappings":"wkBAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CAEvC,OAASC,IAAI,KAAQ,wBAAwB,CAC7C,MAAO,CAAAC,MAAM,KAAM,QAAQ,CAC3B,OAASC,OAAO,KAAQ,0BAA0B,CAClD,OAASC,KAAK,KAAQ,sBAAsB,CAC5C,MAAO,CAAAC,OAAO,KAAM,6BAA6B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,4BAE5C,CAAAC,UAAU,uBAAAC,gBAAA,EAAAC,SAAA,CAAAF,UAAA,CAAAC,gBAAA,MAAAE,MAAA,CAAAC,YAAA,CAAAJ,UAAA,EAEd,SAAAA,WAAYK,KAAK,CAAE,KAAAC,KAAA,CAAAC,eAAA,MAAAP,UAAA,EACjBM,KAAA,CAAAH,MAAA,CAAAK,IAAA,MAAMH,KAAK,EAAEC,KAAA,CAMfG,eAAe,CAAG,UAAM,CACtBH,KAAA,CAAKI,QAAQ,CAAC,CACZC,aAAa,CAAE,IACjB,CAAC,CAAC,CACJ,CAAC,CAAAL,KAAA,CAEDM,cAAc,CAAG,UAAM,CACrBN,KAAA,CAAKI,QAAQ,CAAC,CACZC,aAAa,CAAE,KACjB,CAAC,CAAC,CACJ,CAAC,CAAAL,KAAA,CAEDO,UAAU,CAAG,UAAM,CACjBP,KAAA,CAAKD,KAAK,CAACQ,UAAU,CAACP,KAAA,CAAKD,KAAK,CAACS,MAAM,CAAC,CAC1C,CAAC,CAAAR,KAAA,CAEDS,YAAY,CAAG,SAACC,CAAC,CAAK,CACpBA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBX,KAAA,CAAKD,KAAK,CAACU,YAAY,CAACT,KAAA,CAAKD,KAAK,CAACS,MAAM,CAAC,CAC5C,CAAC,CAAAR,KAAA,CAEDY,cAAc,CAAG,SAACF,CAAC,CAAK,CACtBA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBX,KAAA,CAAKD,KAAK,CAACa,cAAc,CAACZ,KAAA,CAAKD,KAAK,CAACS,MAAM,CAAC,CAC9C,CAAC,CA7BCR,KAAA,CAAKa,KAAK,CAAG,CACXR,aAAa,CAAE,KACjB,CAAC,CAAC,OAAAL,KAAA,CACJ,CAACc,YAAA,CAAApB,UAAA,GAAAqB,GAAA,UAAAC,KAAA,CA4BD,SAAAC,OAAA,CAAU,CACR,GAAM,CAAAZ,aAAa,CAAK,IAAI,CAACQ,KAAK,CAA5BR,aAAa,CACnB,IAAAa,WAAA,CAAiC,IAAI,CAACnB,KAAK,CAArCS,MAAM,CAAAU,WAAA,CAANV,MAAM,CAAEW,cAAc,CAAAD,WAAA,CAAdC,cAAc,CAC5B,GAAI,CAAAC,OAAO,CAAGhC,KAAK,CAACiC,aAAa,CAACb,MAAM,CAAC,CAEzC,mBACEjB,IAAA,CAACP,QAAQ,EAAAsC,QAAA,cACP7B,KAAA,OAAI8B,YAAY,CAAE,IAAI,CAACpB,eAAgB,CAACqB,YAAY,CAAE,IAAI,CAAClB,cAAe,CAAAgB,QAAA,eACxE/B,IAAA,OAAIkC,SAAS,CAAC,aAAa,CAAAH,QAAA,cAAC/B,IAAA,QAAKmC,GAAG,CAAEN,OAAQ,CAACO,KAAK,CAAC,IAAI,CAACC,GAAG,CAAC,EAAE,CAAE,CAAC,CAAI,CAAC,cACxErC,IAAA,OAAA+B,QAAA,CACGd,MAAM,CAACqB,OAAO,CACbrB,MAAM,CAACsB,IAAI,cACXvC,IAAA,CAACN,IAAI,EAAC8C,EAAE,CAAC,GAAG,CAACC,OAAO,CAAE,IAAI,CAACzB,UAAW,CAAAe,QAAA,CAAEd,MAAM,CAACsB,IAAI,CAAO,CAAC,CAE3D,CAAC,cACLrC,KAAA,OAAA6B,QAAA,EACGjB,aAAa,EAAIc,cAAc,eAC9B5B,IAAA,MAAG0C,IAAI,CAAC,GAAG,CAACR,SAAS,CAAC,yBAAyB,CAACS,KAAK,CAAE/C,OAAO,CAAC,QAAQ,CAAE,CAAC6C,OAAO,CAAE,IAAI,CAACvB,YAAa,CAAI,CAAC,CAE3GJ,aAAa,EAAIG,MAAM,CAACqB,OAAO,eAChCtC,IAAA,MAAG0C,IAAI,CAAC,GAAG,CAACR,SAAS,CAAC,2BAA2B,CAACS,KAAK,CAAE/C,OAAO,CAAC,UAAU,CAAE,CAAC6C,OAAO,CAAE,IAAI,CAACpB,cAAe,CAAI,CAAC,EAE9G,CAAC,cACLrB,IAAA,OAAA+B,QAAA,CAAKd,MAAM,CAAC2B,IAAI,CAAK,CAAC,cACtB5C,IAAA,OAAA+B,QAAA,CAAKpC,MAAM,CAACsB,MAAM,CAAC4B,KAAK,CAAC,CAACC,OAAO,CAAC,CAAC,CAAK,CAAC,EACvC,CAAC,CACG,CAAC,CAEf,CAAC,WAAA3C,UAAA,GA/DsBX,KAAK,CAACuD,SAAS,KA0ElC,CAAAC,UAAU,uBAAAC,iBAAA,EAAA5C,SAAA,CAAA2C,UAAA,CAAAC,iBAAA,MAAAC,OAAA,CAAA3C,YAAA,CAAAyC,UAAA,WAAAA,WAAA,EAAAtC,eAAA,MAAAsC,UAAA,SAAAE,OAAA,CAAAC,KAAA,MAAAC,SAAA,GAAA7B,YAAA,CAAAyB,UAAA,GAAAxB,GAAA,UAAAC,KAAA,CAEd,SAAAC,OAAA,CAAS,KAAA2B,MAAA,MACP,IAAAC,YAAA,CAAwC,IAAI,CAAC9C,KAAK,CAA5C+C,OAAO,CAAAD,YAAA,CAAPC,OAAO,CAAEC,QAAQ,CAAAF,YAAA,CAARE,QAAQ,CAAEC,UAAU,CAAAH,YAAA,CAAVG,UAAU,CAEnC,GAAIF,OAAO,CAAE,CACX,mBAAOvD,IAAA,CAACF,OAAO,GAAE,CAAC,CACpB,CAEA,GAAI0D,QAAQ,CAAE,CACZ,mBAAOxD,IAAA,MAAGkC,SAAS,CAAC,wBAAwB,CAAAH,QAAA,CAAEyB,QAAQ,CAAI,CAAC,CAC7D,CAEA,mBACExD,IAAA,CAACP,QAAQ,EAAAsC,QAAA,cACP7B,KAAA,UAAOgC,SAAS,CAAC,aAAa,CAAAH,QAAA,eAC5B/B,IAAA,UAAA+B,QAAA,cACE7B,KAAA,OAAA6B,QAAA,eACE/B,IAAA,OAAIoC,KAAK,CAAC,IAAI,CAAe,CAAC,cAC9BpC,IAAA,OAAIoC,KAAK,CAAC,KAAK,CAAAL,QAAA,CAAEnC,OAAO,CAAC,MAAM,CAAC,CAAK,CAAC,cACtCI,IAAA,OAAIoC,KAAK,CAAC,KAAK,CAAoB,CAAC,cACpCpC,IAAA,OAAIoC,KAAK,CAAC,KAAK,CAAAL,QAAA,CAAEnC,OAAO,CAAC,MAAM,CAAC,CAAK,CAAC,cACtCI,IAAA,OAAIoC,KAAK,CAAC,KAAK,CAAAL,QAAA,CAAEnC,OAAO,CAAC,aAAa,CAAC,CAAK,CAAC,EAC3C,CAAC,CACA,CAAC,cACRI,IAAA,UAAA+B,QAAA,CACG0B,UAAU,CAACC,GAAG,CAAC,SAACzC,MAAM,CAAE0C,KAAK,CAAK,CACjC,mBAAO3D,IAAA,CAACG,UAAU,EAEhBc,MAAM,CAAEA,MAAO,CACfD,UAAU,CAAEqC,MAAI,CAAC7C,KAAK,CAACQ,UAAW,CAClCE,YAAY,CAAEmC,MAAI,CAAC7C,KAAK,CAACU,YAAa,CACtCG,cAAc,CAAEgC,MAAI,CAAC7C,KAAK,CAACa,cAAe,CAC1CO,cAAc,CAAEyB,MAAI,CAAC7C,KAAK,CAACoB,cAAe,EALrC+B,KAMN,CAAC,CACJ,CAAC,CAAC,CACG,CAAC,EACH,CAAC,CACA,CAAC,CAEf,CAAC,WAAAX,UAAA,GAxCsBxD,KAAK,CAACuD,SAAS,EAqDxC,cAAe,CAAAC,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}