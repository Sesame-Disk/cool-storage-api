{"ast":null,"code":"import _regeneratorRuntime from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useCallback, useEffect, useState, Fragment } from 'react';\nimport context from '../../../../context';\nimport Tooltip from '../../../tooltip';\nimport { EventBus } from '../../../../basic-sdk';\nimport { INTERNAL_EVENT } from '../../../../basic-sdk/constants';\nimport './index.css';\nvar FileTagQuickView = function FileTagQuickView() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    fileTagList = _useState2[0],\n    setFileTagList = _useState2[1];\n  useEffect(function () {\n    getTagList();\n    var eventBus = EventBus.getInstance();\n    var unsubscribe = eventBus.subscribe(INTERNAL_EVENT.UPDATE_TAG_VIEW, getTagList);\n    return function () {\n      unsubscribe();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  var getTagList = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    var _yield$context$getFil, file_tags;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return context.getFileTagList();\n        case 3:\n          _yield$context$getFil = _context.sent;\n          file_tags = _yield$context$getFil.data.file_tags;\n          setFileTagList(file_tags);\n          _context.next = 11;\n          break;\n        case 8:\n          _context.prev = 8;\n          _context.t0 = _context[\"catch\"](0);\n          return _context.abrupt(\"return\", null);\n        case 11:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 8]]);\n  })), []);\n\n  // Render nothing if there is no tag\n  if (fileTagList.length === 0) return null;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-file-tag-quick-review-container\"\n  }, fileTagList.map(function (tag, index) {\n    var file_tag_id = tag.file_tag_id,\n      tag_color = tag.tag_color,\n      tag_name = tag.tag_name;\n    // Id cannot start with number\n    var tagId = \"tag\".concat(file_tag_id);\n    var tagZindex = fileTagList.length - index;\n    return /*#__PURE__*/React.createElement(Fragment, {\n      key: tagId\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      id: tagId,\n      style: {\n        backgroundColor: tag_color,\n        zIndex: tagZindex\n      },\n      className: \"sdoc-review-circle\"\n    }), /*#__PURE__*/React.createElement(Tooltip, {\n      target: tagId\n    }, tag_name));\n  }));\n};\nexport default FileTagQuickView;","map":{"version":3,"names":["React","useCallback","useEffect","useState","Fragment","context","Tooltip","EventBus","INTERNAL_EVENT","FileTagQuickView","_useState","_useState2","_slicedToArray","fileTagList","setFileTagList","getTagList","eventBus","getInstance","unsubscribe","subscribe","UPDATE_TAG_VIEW","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$context$getFil","file_tags","wrap","_callee$","_context","prev","next","getFileTagList","sent","data","t0","abrupt","stop","length","createElement","className","map","tag","index","file_tag_id","tag_color","tag_name","tagId","concat","tagZindex","key","id","style","backgroundColor","zIndex","target"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/components/doc-operations/tag-operation/file-tag-quick-view/index.js"],"sourcesContent":["import React, { useCallback, useEffect, useState, Fragment } from 'react';\nimport context from '../../../../context';\nimport Tooltip from '../../../tooltip';\nimport { EventBus } from '../../../../basic-sdk';\nimport { INTERNAL_EVENT } from '../../../../basic-sdk/constants';\nimport './index.css';\nconst FileTagQuickView = () => {\n  const [fileTagList, setFileTagList] = useState([]);\n  useEffect(() => {\n    getTagList();\n    const eventBus = EventBus.getInstance();\n    const unsubscribe = eventBus.subscribe(INTERNAL_EVENT.UPDATE_TAG_VIEW, getTagList);\n    return () => {\n      unsubscribe();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const getTagList = useCallback(async () => {\n    try {\n      const {\n        data: {\n          file_tags\n        }\n      } = await context.getFileTagList();\n      setFileTagList(file_tags);\n    } catch (error) {\n      return null;\n    }\n  }, []);\n\n  // Render nothing if there is no tag\n  if (fileTagList.length === 0) return null;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-file-tag-quick-review-container\"\n  }, fileTagList.map((tag, index) => {\n    const {\n      file_tag_id,\n      tag_color,\n      tag_name\n    } = tag;\n    // Id cannot start with number\n    const tagId = \"tag\".concat(file_tag_id);\n    const tagZindex = fileTagList.length - index;\n    return /*#__PURE__*/React.createElement(Fragment, {\n      key: tagId\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      id: tagId,\n      style: {\n        backgroundColor: tag_color,\n        zIndex: tagZindex\n      },\n      className: \"sdoc-review-circle\"\n    }), /*#__PURE__*/React.createElement(Tooltip, {\n      target: tagId\n    }, tag_name));\n  }));\n};\nexport default FileTagQuickView;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}