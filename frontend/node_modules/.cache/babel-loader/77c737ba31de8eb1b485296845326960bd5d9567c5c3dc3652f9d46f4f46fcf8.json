{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import axios from'axios';import cookie from'react-cookies';import{siteRoot}from'./constants';var SubscriptionAPI=/*#__PURE__*/function(){function SubscriptionAPI(){_classCallCheck(this,SubscriptionAPI);}_createClass(SubscriptionAPI,[{key:\"init\",value:function init(_ref){var server=_ref.server,username=_ref.username,password=_ref.password,token=_ref.token;this.server=server;this.username=username;this.password=password;this.token=token;//none\nif(this.token&&this.server){this.req=axios.create({baseURL:this.server,headers:{'Authorization':'Token '+this.token}});}return this;}},{key:\"initForSeahubUsage\",value:function initForSeahubUsage(_ref2){var siteRoot=_ref2.siteRoot,xcsrfHeaders=_ref2.xcsrfHeaders;if(siteRoot&&siteRoot.charAt(siteRoot.length-1)==='/'){var server=siteRoot.substring(0,siteRoot.length-1);this.server=server;}else{this.server=siteRoot;}this.req=axios.create({headers:{'X-CSRFToken':xcsrfHeaders}});return this;}},{key:\"getSubscription\",value:function getSubscription(){var url=this.server+'/api/v2.1/subscription/';return this.req.get(url);}},{key:\"getSubscriptionPlans\",value:function getSubscriptionPlans(paymentType){var url=this.server+'/api/v2.1/subscription/plans/';var params={payment_type:paymentType};return this.req.get(url,{params:params});}},{key:\"getSubscriptionLogs\",value:function getSubscriptionLogs(){var url=this.server+'/api/v2.1/subscription/logs/';return this.req.get(url);}}]);return SubscriptionAPI;}();var subscriptionAPI=new SubscriptionAPI();var xcsrfHeaders=cookie.load('sfcsrftoken');subscriptionAPI.initForSeahubUsage({siteRoot:siteRoot,xcsrfHeaders:xcsrfHeaders});export{subscriptionAPI};","map":{"version":3,"names":["axios","cookie","siteRoot","SubscriptionAPI","_classCallCheck","_createClass","key","value","init","_ref","server","username","password","token","req","create","baseURL","headers","initForSeahubUsage","_ref2","xcsrfHeaders","charAt","length","substring","getSubscription","url","get","getSubscriptionPlans","paymentType","params","payment_type","getSubscriptionLogs","subscriptionAPI","load"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/subscription-api.js"],"sourcesContent":["import axios from 'axios';\nimport cookie from 'react-cookies';\nimport { siteRoot } from './constants';\n\nclass SubscriptionAPI {\n\n  init({ server, username, password, token }) {\n    this.server = server;\n    this.username = username;\n    this.password = password;\n    this.token = token;  //none\n    if (this.token && this.server) {\n      this.req = axios.create({\n        baseURL: this.server,\n        headers: { 'Authorization': 'Token ' + this.token },\n      });\n    }\n    return this;\n  }\n\n  initForSeahubUsage({ siteRoot, xcsrfHeaders }) {\n    if (siteRoot && siteRoot.charAt(siteRoot.length - 1) === '/') {\n      var server = siteRoot.substring(0, siteRoot.length - 1);\n      this.server = server;\n    } else {\n      this.server = siteRoot;\n    }\n\n    this.req = axios.create({\n      headers: {\n        'X-CSRFToken': xcsrfHeaders,\n      }\n    });\n    return this;\n  }\n\n  getSubscription() {\n    const url = this.server + '/api/v2.1/subscription/';\n    return this.req.get(url);\n  }\n\n  getSubscriptionPlans(paymentType) {\n    const url = this.server + '/api/v2.1/subscription/plans/';\n    let params = {\n      payment_type: paymentType,\n    };\n    return this.req.get(url, { params: params });\n  }\n\n  getSubscriptionLogs() {\n    const url = this.server + '/api/v2.1/subscription/logs/';\n    return this.req.get(url);\n  }\n\n}\n\nlet subscriptionAPI = new SubscriptionAPI();\nlet xcsrfHeaders = cookie.load('sfcsrftoken');\nsubscriptionAPI.initForSeahubUsage({ siteRoot, xcsrfHeaders });\n\nexport { subscriptionAPI };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}