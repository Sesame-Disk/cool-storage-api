{"ast":null,"code":"import _objectSpread from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component,Fragment}from'react';import{Link}from'@gatsbyjs/reach-router';import{Utils}from'../../../utils/utils';import{seafileAPI}from'../../../utils/seafile-api';import{gettext,siteRoot}from'../../../utils/constants';import Loading from'../../../components/loading';import MainPanelTopbar from'../main-panel-topbar';import ReposNav from'./repos-nav';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Content=/*#__PURE__*/function(_Component){_inherits(Content,_Component);var _super=_createSuper(Content);function Content(){_classCallCheck(this,Content);return _super.apply(this,arguments);}_createClass(Content,[{key:\"render\",value:function render(){var _this$props=this.props,loading=_this$props.loading,errorMsg=_this$props.errorMsg,items=_this$props.items;if(loading){return/*#__PURE__*/_jsx(Loading,{});}else if(errorMsg){return/*#__PURE__*/_jsx(\"p\",{className:\"error text-center\",children:errorMsg});}else{var table=/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"table\",{className:\"table-hover\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{width:\"33%\",children:gettext('Name')}),/*#__PURE__*/_jsx(\"th\",{width:\"34%\",children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{width:\"33%\",children:gettext('Description')})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:items.map(function(item,index){return/*#__PURE__*/_jsx(Item,{item:item},index);})})]})});return table;}}}]);return Content;}(Component);var Item=/*#__PURE__*/function(_Component2){_inherits(Item,_Component2);var _super2=_createSuper(Item);function Item(){_classCallCheck(this,Item);return _super2.apply(this,arguments);}_createClass(Item,[{key:\"render\",value:function render(){var item=this.props.item;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:\"\".concat(siteRoot,\"sys/libraries/\").concat(item.id,\"/\"),children:item.name})}),/*#__PURE__*/_jsx(\"td\",{children:item.id}),/*#__PURE__*/_jsx(\"td\",{children:item.description})]});}}]);return Item;}(Component);var SystemRepo=/*#__PURE__*/function(_Component3){_inherits(SystemRepo,_Component3);var _super3=_createSuper(SystemRepo);function SystemRepo(props){var _this;_classCallCheck(this,SystemRepo);_this=_super3.call(this,props);_this.state={loading:true,errorMsg:'',items:[]};return _this;}_createClass(SystemRepo,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;seafileAPI.sysAdminGetSystemRepoInfo().then(function(res){var items=[];items.push(res.data);_this2.setState({items:items,loading:false});}).catch(function(error){_this2.setState({loading:false,errorMsg:Utils.getErrorMsg(error,true)// true: show login tip if 403\n});});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MainPanelTopbar,_objectSpread({},this.props)),/*#__PURE__*/_jsx(\"div\",{className:\"main-panel-center flex-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cur-view-container\",children:[/*#__PURE__*/_jsx(ReposNav,{currentItem:\"system\"}),/*#__PURE__*/_jsx(\"div\",{className:\"cur-view-content\",children:/*#__PURE__*/_jsx(Content,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.items})})]})})]});}}]);return SystemRepo;}(Component);export default SystemRepo;","map":{"version":3,"names":["React","Component","Fragment","Link","Utils","seafileAPI","gettext","siteRoot","Loading","MainPanelTopbar","ReposNav","jsx","_jsx","jsxs","_jsxs","Content","_Component","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","key","value","render","_this$props","props","loading","errorMsg","items","className","children","table","width","map","item","index","Item","_Component2","_super2","to","concat","id","name","description","SystemRepo","_Component3","_super3","_this","call","state","componentDidMount","_this2","sysAdminGetSystemRepoInfo","then","res","push","data","setState","catch","error","getErrorMsg","_objectSpread","currentItem"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/repos/system-repo.js"],"sourcesContent":["import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport ReposNav from './repos-nav';\n\nclass Content extends Component {\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"33%\">{gettext('Name')}</th>\n                <th width=\"34%\">ID</th>\n                <th width=\"33%\">{gettext('Description')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item key={index} item={item}/>);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return table;\n    }\n  }\n}\n\n\nContent.propTypes = {\n  resetPerPage: PropTypes.func,\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  currentPage: PropTypes.number,\n  curPerPage: PropTypes.number,\n  hasNextPage: PropTypes.bool,\n};\n\nclass Item extends Component {\n  render() {\n    const item = this.props.item;\n    return (\n      <tr>\n        <td><Link to={`${siteRoot}sys/libraries/${item.id}/`}>{item.name}</Link></td>\n        <td>{item.id}</td>\n        <td>{item.description}</td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n};\n\nclass SystemRepo extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetSystemRepoInfo().then((res) => {\n      let items = [];\n      items.push(res.data);\n      this.setState({\n        items: items,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <ReposNav currentItem=\"system\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SystemRepo;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}