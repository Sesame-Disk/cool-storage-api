{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import io from'socket.io-client';import{name,username,contactEmail,seafileCollabServer}from'./constants';var socket=seafileCollabServer!==''?io(seafileCollabServer):undefined;var CollabServer=/*#__PURE__*/function(){function CollabServer(){_classCallCheck(this,CollabServer);}_createClass(CollabServer,[{key:\"watchRepo\",value:function watchRepo(repoID,fn){if(!socket){return;}socket.emit('repo_update',{request:'watch_update',repo_id:repoID,user:{name:name,username:username,contact_email:contactEmail}});socket.on('repo_update',fn);}},{key:\"unwatchRepo\",value:function unwatchRepo(repoID,fn){if(!socket){return;}socket.emit('repo_update',{request:'unwatch_update',repo_id:repoID,user:{name:name,username:username,contact_email:contactEmail}});socket.off('repo_update',fn);}}]);return CollabServer;}();var collabServer=new CollabServer();export default collabServer;","map":{"version":3,"names":["io","name","username","contactEmail","seafileCollabServer","socket","undefined","CollabServer","_classCallCheck","_createClass","key","value","watchRepo","repoID","fn","emit","request","repo_id","user","contact_email","on","unwatchRepo","off","collabServer"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/collab-server.js"],"sourcesContent":["import io from 'socket.io-client';\nimport { name, username, contactEmail, seafileCollabServer } from './constants';\n\nconst socket = (seafileCollabServer !== '') ? io(seafileCollabServer) : undefined;\n\nclass CollabServer {\n\n  watchRepo(repoID, fn) {\n    if (!socket) {\n      return;\n    }\n    socket.emit('repo_update', {\n      request: 'watch_update',\n      repo_id: repoID,\n      user: {\n        name: name,\n        username: username,\n        contact_email: contactEmail,\n      },\n    });\n    socket.on('repo_update', fn);\n  }\n\n  unwatchRepo(repoID, fn) {\n    if (!socket) {\n      return;\n    }\n    socket.emit('repo_update', {\n      request: 'unwatch_update',\n      repo_id: repoID,\n      user: {\n        name: name,\n        username: username,\n        contact_email: contactEmail,\n      },\n    });\n    socket.off('repo_update', fn);\n  }\n}\n\nconst collabServer = new CollabServer();\n\nexport default collabServer;\n"],"mappings":"0SAAA,MAAO,CAAAA,EAAE,KAAM,kBAAkB,CACjC,OAASC,IAAI,CAAEC,QAAQ,CAAEC,YAAY,CAAEC,mBAAmB,KAAQ,aAAa,CAE/E,GAAM,CAAAC,MAAM,CAAID,mBAAmB,GAAK,EAAE,CAAIJ,EAAE,CAACI,mBAAmB,CAAC,CAAGE,SAAS,CAAC,GAE5E,CAAAC,YAAY,kCAAAA,aAAA,EAAAC,eAAA,MAAAD,YAAA,GAAAE,YAAA,CAAAF,YAAA,GAAAG,GAAA,aAAAC,KAAA,CAEhB,SAAAC,UAAUC,MAAM,CAAEC,EAAE,CAAE,CACpB,GAAI,CAACT,MAAM,CAAE,CACX,OACF,CACAA,MAAM,CAACU,IAAI,CAAC,aAAa,CAAE,CACzBC,OAAO,CAAE,cAAc,CACvBC,OAAO,CAAEJ,MAAM,CACfK,IAAI,CAAE,CACJjB,IAAI,CAAEA,IAAI,CACVC,QAAQ,CAAEA,QAAQ,CAClBiB,aAAa,CAAEhB,YACjB,CACF,CAAC,CAAC,CACFE,MAAM,CAACe,EAAE,CAAC,aAAa,CAAEN,EAAE,CAAC,CAC9B,CAAC,GAAAJ,GAAA,eAAAC,KAAA,CAED,SAAAU,YAAYR,MAAM,CAAEC,EAAE,CAAE,CACtB,GAAI,CAACT,MAAM,CAAE,CACX,OACF,CACAA,MAAM,CAACU,IAAI,CAAC,aAAa,CAAE,CACzBC,OAAO,CAAE,gBAAgB,CACzBC,OAAO,CAAEJ,MAAM,CACfK,IAAI,CAAE,CACJjB,IAAI,CAAEA,IAAI,CACVC,QAAQ,CAAEA,QAAQ,CAClBiB,aAAa,CAAEhB,YACjB,CACF,CAAC,CAAC,CACFE,MAAM,CAACiB,GAAG,CAAC,aAAa,CAAER,EAAE,CAAC,CAC/B,CAAC,WAAAP,YAAA,KAGH,GAAM,CAAAgB,YAAY,CAAG,GAAI,CAAAhB,YAAY,CAAC,CAAC,CAEvC,cAAe,CAAAgB,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}