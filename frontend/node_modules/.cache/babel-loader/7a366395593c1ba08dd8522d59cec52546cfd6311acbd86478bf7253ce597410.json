{"ast":null,"code":"import _objectSpread from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component,Fragment}from'react';import{navigate}from'@gatsbyjs/reach-router';import{Button}from'reactstrap';import{Utils}from'../../../utils/utils';import{seafileAPI}from'../../../utils/seafile-api';import{isPro,gettext,siteRoot}from'../../../utils/constants';import toaster from'../../../components/toast';import SysAdminUserSetQuotaDialog from'../../../components/dialog/sysadmin-dialog/set-quota';import SysAdminImportUserDialog from'../../../components/dialog/sysadmin-dialog/sysadmin-import-user-dialog';import SysAdminAddUserDialog from'../../../components/dialog/sysadmin-dialog/sysadmin-add-user-dialog';import SysAdminBatchAddAdminDialog from'../../../components/dialog/sysadmin-dialog/sysadmin-batch-add-admin-dialog';import CommonOperationConfirmationDialog from'../../../components/dialog/common-operation-confirmation-dialog';import SysAdminUser from'../../../models/sysadmin-user';import SysAdminAdminUser from'../../../models/sysadmin-admin-user';import MainPanelTopbar from'../main-panel-topbar';import Search from'../search';import UsersNav from'./users-nav';import Content from'./users-content';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var availableRoles=window.sysadmin.pageOptions.availableRoles;var Users=/*#__PURE__*/function(_Component){_inherits(Users,_Component);var _super=_createSuper(Users);function Users(props){var _this;_classCallCheck(this,Users);_this=_super.call(this,props);_this.toggleImportUserDialog=function(){_this.setState({isImportUserDialogOpen:!_this.state.isImportUserDialogOpen});};_this.toggleAddUserDialog=function(){_this.setState({isAddUserDialogOpen:!_this.state.isAddUserDialogOpen});};_this.toggleBatchSetQuotaDialog=function(){_this.setState({isBatchSetQuotaDialogOpen:!_this.state.isBatchSetQuotaDialogOpen});};_this.toggleBatchDeleteUserDialog=function(){_this.setState({isBatchDeleteUserDialogOpen:!_this.state.isBatchDeleteUserDialogOpen});};_this.onUserSelected=function(item){var hasUserSelected=false;var selectedUserList=[];// traverse all users, toggle its selected status\nvar users=_this.state.userList.map(function(user){// toggle status\nif(user.email===item.email){user.isSelected=!user.isSelected;}// update selectedUserList\n// if current user is now selected, push it to selectedUserList\n// if current user is now not selected, drop it from selectedUserList\nif(user.isSelected==true){hasUserSelected=true;selectedUserList.push(user);}else{selectedUserList=selectedUserList.filter(function(thisuser){return thisuser.email!=user.email;});}return user;});// finally update state\n_this.setState({userList:users,hasUserSelected:hasUserSelected,selectedUserList:selectedUserList});};_this.toggleSelectAllUsers=function(){if(_this.state.isAllUsersSelected){// if previous state is allSelected, toggle to not select\nvar users=_this.state.userList.map(function(user){user.isSelected=false;return user;});_this.setState({userList:users,hasUserSelected:false,isAllUsersSelected:false,selectedUserList:[]});}else{// if previous state is not allSelected, toggle to selectAll\nvar _users=_this.state.userList.map(function(user){user.isSelected=true;return user;});_this.setState({userList:_users,hasUserSelected:true,isAllUsersSelected:true,selectedUserList:_users});}};_this.getUserList=function(){// get admins\nseafileAPI.sysAdminListAdmins().then(function(res){var users=res.data.admin_user_list.map(function(user){return new SysAdminAdminUser(user);});_this.setState({userList:users,loading:false});}).catch(function(error){_this.setState({loading:false,errorMsg:Utils.getErrorMsg(error,true)// true: show login tip if 403\n});});};_this.getUsersListByPage=function(page){var _this$state=_this.state,perPage=_this$state.perPage,sortBy=_this$state.sortBy,sortOrder=_this$state.sortOrder;var isLDAPImported=_this.props.isLDAPImported;seafileAPI.sysAdminListUsers(page,perPage,isLDAPImported,sortBy,sortOrder).then(function(res){var users=res.data.data.map(function(user){return new SysAdminUser(user);});_this.setState({userList:users,loading:false,hasNextPage:Utils.hasNextPage(page,perPage,res.data.total_count),currentPage:page});}).catch(function(error){_this.setState({loading:false,errorMsg:Utils.getErrorMsg(error,true)// true: show login tip if 403\n});});};_this.sortByQuotaUsage=function(){_this.setState({sortBy:'quota_usage',sortOrder:_this.state.sortOrder=='asc'?'desc':'asc',currentPage:1},function(){var url=new URL(location.href);var searchParams=new URLSearchParams(url.search);var _this$state2=_this.state,currentPage=_this$state2.currentPage,sortBy=_this$state2.sortBy,sortOrder=_this$state2.sortOrder;searchParams.set('page',currentPage);searchParams.set('order_by',sortBy);searchParams.set('direction',sortOrder);url.search=searchParams.toString();navigate(url.toString());_this.getUsersListByPage(currentPage);});};_this.deleteUser=function(email,username){seafileAPI.sysAdminDeleteUser(email).then(function(res){var newUserList=_this.state.userList.filter(function(item){return item.email!=email;});_this.setState({userList:newUserList});var msg=gettext('Deleted user %s');msg=msg.replace('%s',username);toaster.success(msg);}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this.setUserQuotaInBatch=function(quotaTotal){var emails=_this.state.selectedUserList.map(function(user){return user.email;});seafileAPI.sysAdminSetUserQuotaInBatch(emails,quotaTotal).then(function(res){var userList=_this.state.userList.map(function(item){res.data.success.forEach(function(resultUser){if(item.email==resultUser.email){item.quota_total=resultUser.quota_total;}});return item;});_this.setState({userList:userList});}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this.deleteUserInBatch=function(){var emails=_this.state.selectedUserList.map(function(user){return user.email;});seafileAPI.sysAdminDeleteUserInBatch(emails).then(function(res){if(res.data.success.length){var oldUserList=_this.state.userList;var newUserList=oldUserList.filter(function(oldUser){return!res.data.success.some(function(deletedUser){return deletedUser.email==oldUser.email;});});_this.setState({userList:newUserList,hasUserSelected:emails.length!=res.data.success.length});var length=res.data.success.length;var msg=length==1?gettext('Successfully deleted 1 user.'):gettext('Successfully deleted {user_number_placeholder} users.').replace('{user_number_placeholder}',length);toaster.success(msg);}res.data.failed.forEach(function(item){var msg=\"\".concat(item.email,\": \").concat(item.error_msg);toaster.danger(msg);});}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this.importUserInBatch=function(file){toaster.notify(gettext('It may take some time, please wait.'));seafileAPI.sysAdminImportUserViaFile(file).then(function(res){if(res.data.success.length){var users=res.data.success.map(function(item){if(item.institution==undefined){item.institution='';}return new SysAdminUser(item);});_this.setState({userList:users.concat(_this.state.userList)});}res.data.failed.forEach(function(item){var msg=\"\".concat(item.email,\": \").concat(item.error_msg);toaster.danger(msg);});}).catch(function(error){var errMsg=Utils.getErrorMsg(error);toaster.danger(errMsg);});};_this.addUser=function(data){toaster.notify(gettext('It may take some time, please wait.'));var email=data.email,name=data.name,role=data.role,password=data.password;seafileAPI.sysAdminAddUser(email,name,role,password).then(function(res){var userList=_this.state.userList;userList.unshift(res.data);_this.setState({userList:userList});toaster.success(res.data.add_user_tip);}).catch(function(error){var errMsg=Utils.getErrorMsg(error);toaster.danger(errMsg);});};_this.resetPerPage=function(perPage){_this.setState({perPage:perPage},function(){_this.getUsersListByPage(1);});};_this.updateUser=function(email,key,value){seafileAPI.sysAdminUpdateUser(email,key,value).then(function(res){var newUserList=_this.state.userList.map(function(item){if(item.email==email){item[key]=res.data[key];}return item;});_this.setState({userList:newUserList});var msg=key=='is_active'&&value?res.data.update_status_tip:gettext('Edit succeeded');toaster.success(msg);}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this.updateAdminRole=function(email,role){seafileAPI.sysAdminUpdateAdminRole(email,role).then(function(res){var newUserList=_this.state.userList.map(function(item){if(item.email==email){item.admin_role=res.data.role;}return item;});_this.setState({userList:newUserList});toaster.success(gettext('Edit succeeded'));}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this.revokeAdmin=function(email,name){seafileAPI.sysAdminUpdateUser(email,'is_staff',false).then(function(res){var userList=_this.state.userList.filter(function(item){return item.email!=email;});_this.setState({userList:userList});toaster.success(gettext('Successfully revoked the admin permission of {placeholder}.').replace('{placeholder}',name));}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this.getOperationsForAll=function(){var _this$props=_this.props,isAdmin=_this$props.isAdmin,isLDAPImported=_this$props.isLDAPImported;if(isAdmin){return/*#__PURE__*/_jsx(Button,{className:\"btn btn-secondary operation-item\",onClick:_this.toggleBatchAddAdminDialog,children:gettext('Add Admin')});}if(isLDAPImported){return/*#__PURE__*/_jsx(\"a\",{className:\"btn btn-secondary operation-item\",href:\"\".concat(siteRoot,\"sys/useradmin/export-excel/\"),children:gettext('Export Excel')});}// 'database'\nreturn/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Button,{className:\"btn btn-secondary operation-item\",onClick:_this.toggleImportUserDialog,children:gettext('Import Users')}),/*#__PURE__*/_jsx(Button,{className:\"btn btn-secondary operation-item\",onClick:_this.toggleAddUserDialog,children:gettext('Add User')}),/*#__PURE__*/_jsx(\"a\",{className:\"btn btn-secondary operation-item\",href:\"\".concat(siteRoot,\"sys/useradmin/export-excel/\"),children:gettext('Export Excel')})]});};_this.getCurrentNavItem=function(){var _this$props2=_this.props,isAdmin=_this$props2.isAdmin,isLDAPImported=_this$props2.isLDAPImported;var item='database';if(isAdmin){item='admin';}else if(isLDAPImported){item='ldap-imported';}return item;};_this.toggleBatchAddAdminDialog=function(){_this.setState({isBatchAddAdminDialogOpen:!_this.state.isBatchAddAdminDialogOpen});};_this.addAdminInBatch=function(emails){seafileAPI.sysAdminAddAdminInBatch(emails).then(function(res){var users=res.data.success.map(function(user){return new SysAdminAdminUser(user);});_this.setState({userList:users.concat(_this.state.userList)});res.data.failed.forEach(function(item){var msg=\"\".concat(item.email,\": \").concat(item.error_msg);toaster.danger(msg);});}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this.getSearch=function(){if(_this.props.isAdmin){return null;}// offer 'Search' for 'DB' & 'LDAPImported' users\nreturn/*#__PURE__*/_jsx(Search,{placeholder:gettext('Search users'),submit:_this.searchItems});};_this.searchItems=function(keyword){navigate(\"\".concat(siteRoot,\"sys/search-users/?query=\").concat(encodeURIComponent(keyword)));};_this.state={loading:true,errorMsg:'',userList:[],hasNextPage:false,currentPage:1,perPage:25,hasUserSelected:false,selectedUserList:[],isAllUsersSelected:false,isImportUserDialogOpen:false,isAddUserDialogOpen:false,isBatchSetQuotaDialogOpen:false,isBatchDeleteUserDialogOpen:false,isBatchAddAdminDialogOpen:false};return _this;}_createClass(Users,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(this.props.isAdmin){// 'Admin' page\nthis.getUserList();// no pagination\n}else{var urlParams=new URL(window.location).searchParams;var _this$state3=this.state,currentPage=_this$state3.currentPage,perPage=_this$state3.perPage,_this$state3$sortBy=_this$state3.sortBy,sortBy=_this$state3$sortBy===void 0?'':_this$state3$sortBy,_this$state3$sortOrde=_this$state3.sortOrder,sortOrder=_this$state3$sortOrde===void 0?'asc':_this$state3$sortOrde;this.setState({perPage:parseInt(urlParams.get('per_page')||perPage),currentPage:parseInt(urlParams.get('page')||currentPage),sortBy:urlParams.get('order_by')||sortBy,sortOrder:urlParams.get('direction')||sortOrder},function(){_this2.getUsersListByPage(_this2.state.currentPage);});}}},{key:\"render\",value:function render(){var _this$props3=this.props,isAdmin=_this$props3.isAdmin,isLDAPImported=_this$props3.isLDAPImported;var _this$state4=this.state,hasUserSelected=_this$state4.hasUserSelected,isImportUserDialogOpen=_this$state4.isImportUserDialogOpen,isAddUserDialogOpen=_this$state4.isAddUserDialogOpen,isBatchDeleteUserDialogOpen=_this$state4.isBatchDeleteUserDialogOpen,isBatchSetQuotaDialogOpen=_this$state4.isBatchSetQuotaDialogOpen,isBatchAddAdminDialogOpen=_this$state4.isBatchAddAdminDialogOpen;return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MainPanelTopbar,_objectSpread(_objectSpread({search:this.getSearch()},this.props),{},{children:hasUserSelected?/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Button,{className:\"btn btn-secondary operation-item\",onClick:this.toggleBatchSetQuotaDialog,children:gettext('Set Quota')}),/*#__PURE__*/_jsx(Button,{className:\"btn btn-secondary operation-item\",onClick:this.toggleBatchDeleteUserDialog,children:gettext('Delete Users')})]}):this.getOperationsForAll()})),/*#__PURE__*/_jsx(\"div\",{className:\"main-panel-center flex-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cur-view-container\",children:[/*#__PURE__*/_jsx(UsersNav,{currentItem:this.getCurrentNavItem()}),/*#__PURE__*/_jsx(\"div\",{className:\"cur-view-content\",children:/*#__PURE__*/_jsx(Content,{isAdmin:isAdmin,isLDAPImported:isLDAPImported,loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.userList,sortBy:this.state.sortBy,sortOrder:this.state.sortOrder,sortByQuotaUsage:this.sortByQuotaUsage,currentPage:this.state.currentPage,hasNextPage:this.state.hasNextPage,curPerPage:this.state.perPage,resetPerPage:this.resetPerPage,getListByPage:this.getUsersListByPage,updateUser:this.updateUser,deleteUser:this.deleteUser,updateAdminRole:this.updateAdminRole,revokeAdmin:this.revokeAdmin,onUserSelected:this.onUserSelected,isAllUsersSelected:this.isAllUsersSelected,toggleSelectAllUsers:this.toggleSelectAllUsers})})]})}),isImportUserDialogOpen&&/*#__PURE__*/_jsx(SysAdminImportUserDialog,{toggle:this.toggleImportUserDialog,importUserInBatch:this.importUserInBatch}),isAddUserDialogOpen&&/*#__PURE__*/_jsx(SysAdminAddUserDialog,{dialogTitle:gettext('Add User'),showRole:isPro,availableRoles:availableRoles,addUser:this.addUser,toggleDialog:this.toggleAddUserDialog}),isBatchSetQuotaDialogOpen&&/*#__PURE__*/_jsx(SysAdminUserSetQuotaDialog,{toggle:this.toggleBatchSetQuotaDialog,updateQuota:this.setUserQuotaInBatch}),isBatchDeleteUserDialogOpen&&/*#__PURE__*/_jsx(CommonOperationConfirmationDialog,{title:gettext('Delete Users'),message:gettext('Are you sure you want to delete the selected user(s) ?'),executeOperation:this.deleteUserInBatch,confirmBtnText:gettext('Delete'),toggleDialog:this.toggleBatchDeleteUserDialog}),isBatchAddAdminDialogOpen&&/*#__PURE__*/_jsx(SysAdminBatchAddAdminDialog,{addAdminInBatch:this.addAdminInBatch,toggle:this.toggleBatchAddAdminDialog})]});}}]);return Users;}(Component);export default Users;","map":{"version":3,"names":["React","Component","Fragment","navigate","Button","Utils","seafileAPI","isPro","gettext","siteRoot","toaster","SysAdminUserSetQuotaDialog","SysAdminImportUserDialog","SysAdminAddUserDialog","SysAdminBatchAddAdminDialog","CommonOperationConfirmationDialog","SysAdminUser","SysAdminAdminUser","MainPanelTopbar","Search","UsersNav","Content","jsx","_jsx","jsxs","_jsxs","availableRoles","window","sysadmin","pageOptions","Users","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","toggleImportUserDialog","setState","isImportUserDialogOpen","state","toggleAddUserDialog","isAddUserDialogOpen","toggleBatchSetQuotaDialog","isBatchSetQuotaDialogOpen","toggleBatchDeleteUserDialog","isBatchDeleteUserDialogOpen","onUserSelected","item","hasUserSelected","selectedUserList","users","userList","map","user","email","isSelected","push","filter","thisuser","toggleSelectAllUsers","isAllUsersSelected","getUserList","sysAdminListAdmins","then","res","data","admin_user_list","loading","catch","error","errorMsg","getErrorMsg","getUsersListByPage","page","_this$state","perPage","sortBy","sortOrder","isLDAPImported","sysAdminListUsers","hasNextPage","total_count","currentPage","sortByQuotaUsage","url","URL","location","href","searchParams","URLSearchParams","search","_this$state2","set","toString","deleteUser","username","sysAdminDeleteUser","newUserList","msg","replace","success","errMessage","danger","setUserQuotaInBatch","quotaTotal","emails","sysAdminSetUserQuotaInBatch","forEach","resultUser","quota_total","deleteUserInBatch","sysAdminDeleteUserInBatch","length","oldUserList","oldUser","some","deletedUser","failed","concat","error_msg","importUserInBatch","file","notify","sysAdminImportUserViaFile","institution","undefined","errMsg","addUser","name","role","password","sysAdminAddUser","unshift","add_user_tip","resetPerPage","updateUser","key","value","sysAdminUpdateUser","update_status_tip","updateAdminRole","sysAdminUpdateAdminRole","admin_role","revokeAdmin","getOperationsForAll","_this$props","isAdmin","className","onClick","toggleBatchAddAdminDialog","children","getCurrentNavItem","_this$props2","isBatchAddAdminDialogOpen","addAdminInBatch","sysAdminAddAdminInBatch","getSearch","placeholder","submit","searchItems","keyword","encodeURIComponent","_createClass","componentDidMount","_this2","urlParams","_this$state3","_this$state3$sortBy","_this$state3$sortOrde","parseInt","get","render","_this$props3","_this$state4","_objectSpread","currentItem","items","curPerPage","getListByPage","toggle","dialogTitle","showRole","toggleDialog","updateQuota","title","message","executeOperation","confirmBtnText"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/users/users.js"],"sourcesContent":["import React, { Component, Fragment } from 'react';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { Button } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { isPro, gettext, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport SysAdminUserSetQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport SysAdminImportUserDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-import-user-dialog';\nimport SysAdminAddUserDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-user-dialog';\nimport SysAdminBatchAddAdminDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-batch-add-admin-dialog';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport SysAdminUser from '../../../models/sysadmin-user';\nimport SysAdminAdminUser from '../../../models/sysadmin-admin-user';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Search from '../search';\nimport UsersNav from './users-nav';\nimport Content from './users-content';\n\nconst { availableRoles } = window.sysadmin.pageOptions;\n\nconst propTypes = {\n  isAdmin: PropTypes.bool,\n  isLDAPImported: PropTypes.bool\n};\n\nclass Users extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userList: [],\n      hasNextPage: false,\n      currentPage: 1,\n      perPage: 25,\n      hasUserSelected: false,\n      selectedUserList: [],\n      isAllUsersSelected: false,\n      isImportUserDialogOpen: false,\n      isAddUserDialogOpen: false,\n      isBatchSetQuotaDialogOpen: false,\n      isBatchDeleteUserDialogOpen: false,\n      isBatchAddAdminDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    if (this.props.isAdmin) { // 'Admin' page\n      this.getUserList(); // no pagination\n    } else {\n      let urlParams = (new URL(window.location)).searchParams;\n      const {\n        currentPage, perPage,\n        sortBy = '',\n        sortOrder = 'asc'\n      } = this.state;\n      this.setState({\n        perPage: parseInt(urlParams.get('per_page') || perPage),\n        currentPage: parseInt(urlParams.get('page') || currentPage),\n        sortBy: urlParams.get('order_by') || sortBy,\n        sortOrder: urlParams.get('direction') || sortOrder\n      }, () => {\n        this.getUsersListByPage(this.state.currentPage);\n      });\n    }\n  }\n\n  toggleImportUserDialog = () => {\n    this.setState({isImportUserDialogOpen: !this.state.isImportUserDialogOpen});\n  };\n\n  toggleAddUserDialog = () => {\n    this.setState({isAddUserDialogOpen: !this.state.isAddUserDialogOpen});\n  };\n\n  toggleBatchSetQuotaDialog = () => {\n    this.setState({isBatchSetQuotaDialogOpen: !this.state.isBatchSetQuotaDialogOpen});\n  };\n\n  toggleBatchDeleteUserDialog = () => {\n    this.setState({isBatchDeleteUserDialogOpen: !this.state.isBatchDeleteUserDialogOpen});\n  };\n\n  onUserSelected = (item) => {\n    let hasUserSelected = false;\n    let selectedUserList = [];\n    // traverse all users, toggle its selected status\n    let users = this.state.userList.map(user => {\n      // toggle status\n      if (user.email === item.email) {\n        user.isSelected = !user.isSelected;\n      }\n      // update selectedUserList\n      // if current user is now selected, push it to selectedUserList\n      // if current user is now not selected, drop it from selectedUserList\n      if (user.isSelected == true) {\n        hasUserSelected = true;\n        selectedUserList.push(user);\n      } else {\n        selectedUserList = selectedUserList.filter(thisuser => {\n          return thisuser.email != user.email;\n        });\n      }\n      return user;\n    });\n    // finally update state\n    this.setState({\n      userList: users,\n      hasUserSelected: hasUserSelected,\n      selectedUserList: selectedUserList,\n    });\n  };\n\n  toggleSelectAllUsers = () => {\n    if (this.state.isAllUsersSelected) {\n      // if previous state is allSelected, toggle to not select\n      let users = this.state.userList.map(user => {\n        user.isSelected = false;\n        return user;\n      });\n      this.setState({\n        userList: users,\n        hasUserSelected: false,\n        isAllUsersSelected: false,\n        selectedUserList: [],\n      });\n    } else {\n      // if previous state is not allSelected, toggle to selectAll\n      let users = this.state.userList.map(user => {\n        user.isSelected = true;\n        return user;\n      });\n      this.setState({\n        userList: users,\n        hasUserSelected: true,\n        isAllUsersSelected: true,\n        selectedUserList: users\n      });\n    }\n  };\n\n  getUserList = () => {\n  // get admins\n    seafileAPI.sysAdminListAdmins().then(res => {\n      let users = res.data.admin_user_list.map(user => {\n        return new SysAdminAdminUser(user);\n      });\n      this.setState({\n        userList: users,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  getUsersListByPage = (page) => {\n    const { perPage, sortBy, sortOrder } = this.state;\n    const { isLDAPImported } = this.props;\n    seafileAPI.sysAdminListUsers(page, perPage, isLDAPImported, sortBy, sortOrder).then(res => {\n      let users = res.data.data.map(user => {return new SysAdminUser(user);});\n      this.setState({\n        userList: users,\n        loading: false,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n        currentPage: page\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  sortByQuotaUsage = () => {\n    this.setState({\n      sortBy: 'quota_usage',\n      sortOrder: this.state.sortOrder == 'asc' ? 'desc' : 'asc',\n      currentPage: 1\n    }, () => {\n      let url = new URL(location.href);\n      let searchParams = new URLSearchParams(url.search);\n      const { currentPage, sortBy, sortOrder } = this.state;\n      searchParams.set('page', currentPage);\n      searchParams.set('order_by', sortBy);\n      searchParams.set('direction', sortOrder);\n      url.search = searchParams.toString();\n      navigate(url.toString());\n      this.getUsersListByPage(currentPage);\n    });\n  };\n\n  deleteUser = (email, username) => {\n    seafileAPI.sysAdminDeleteUser(email).then(res => {\n      let newUserList = this.state.userList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({userList: newUserList});\n      let msg = gettext('Deleted user %s');\n      msg = msg.replace('%s', username);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  setUserQuotaInBatch = (quotaTotal) => {\n    let emails = this.state.selectedUserList.map(user => {\n      return user.email;\n    });\n    seafileAPI.sysAdminSetUserQuotaInBatch(emails, quotaTotal).then(res => {\n      let userList = this.state.userList.map(item => {\n        res.data.success.forEach(resultUser => {\n          if (item.email == resultUser.email) {\n            item.quota_total = resultUser.quota_total;\n          }\n        });\n        return item;\n      });\n      this.setState({userList: userList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  deleteUserInBatch = () => {\n    let emails = this.state.selectedUserList.map(user => {\n      return user.email;\n    });\n    seafileAPI.sysAdminDeleteUserInBatch(emails).then(res => {\n      if (res.data.success.length) {\n        let oldUserList = this.state.userList;\n        let newUserList = oldUserList.filter(oldUser => {\n          return !res.data.success.some(deletedUser =>{\n            return deletedUser.email == oldUser.email;\n          });\n        });\n        this.setState({\n          userList: newUserList,\n          hasUserSelected: emails.length != res.data.success.length\n        });\n        const length = res.data.success.length;\n        const msg = length == 1 ?\n          gettext('Successfully deleted 1 user.') :\n          gettext('Successfully deleted {user_number_placeholder} users.')\n            .replace('{user_number_placeholder}', length);\n        toaster.success(msg);\n      }\n      res.data.failed.forEach(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  importUserInBatch = (file) => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    seafileAPI.sysAdminImportUserViaFile(file).then((res) => {\n      if (res.data.success.length) {\n        const users = res.data.success.map(item => {\n          if (item.institution == undefined) {\n            item.institution = '';\n          }\n          return new SysAdminUser(item);\n        });\n        this.setState({\n          userList: users.concat(this.state.userList)\n        });\n      }\n      res.data.failed.forEach(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  };\n\n  addUser = (data) => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    const { email, name, role, password } = data;\n    seafileAPI.sysAdminAddUser(email, name, role, password).then((res) => {\n      let userList = this.state.userList;\n      userList.unshift(res.data);\n      this.setState({\n        userList: userList\n      });\n      toaster.success(res.data.add_user_tip);\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  };\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getUsersListByPage(1);\n    });\n  };\n\n  updateUser = (email, key, value) => {\n    seafileAPI.sysAdminUpdateUser(email, key, value).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item[key]= res.data[key];\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n      const msg = (key == 'is_active' && value) ?\n        res.data.update_status_tip : gettext('Edit succeeded');\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  updateAdminRole = (email, role) => {\n    seafileAPI.sysAdminUpdateAdminRole(email, role).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item.admin_role = res.data.role;\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n      toaster.success(gettext('Edit succeeded'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  revokeAdmin = (email, name) => {\n    seafileAPI.sysAdminUpdateUser(email, 'is_staff', false).then(res => {\n      let userList = this.state.userList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({\n        userList: userList\n      });\n      toaster.success(gettext('Successfully revoked the admin permission of {placeholder}.').replace('{placeholder}', name));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  getOperationsForAll = () => {\n    const { isAdmin, isLDAPImported } = this.props;\n\n    if (isAdmin) {\n      return <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleBatchAddAdminDialog}>{gettext('Add Admin')}</Button>;\n    }\n\n    if (isLDAPImported) {\n      return <a className=\"btn btn-secondary operation-item\" href={`${siteRoot}sys/useradmin/export-excel/`}>{gettext('Export Excel')}</a>;\n    }\n\n    // 'database'\n    return (\n      <Fragment>\n        <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleImportUserDialog}>{gettext('Import Users')}</Button>\n        <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddUserDialog}>{gettext('Add User')}</Button>\n        <a className=\"btn btn-secondary operation-item\" href={`${siteRoot}sys/useradmin/export-excel/`}>{gettext('Export Excel')}</a>\n      </Fragment>\n    );\n  };\n\n  getCurrentNavItem = () => {\n    const { isAdmin, isLDAPImported } = this.props;\n    let item = 'database';\n    if (isAdmin) {\n      item = 'admin';\n    } else if (isLDAPImported) {\n      item = 'ldap-imported';\n    }\n    return item;\n  };\n\n  toggleBatchAddAdminDialog = () => {\n    this.setState({isBatchAddAdminDialogOpen: !this.state.isBatchAddAdminDialogOpen});\n  };\n\n  addAdminInBatch = (emails) => {\n    seafileAPI.sysAdminAddAdminInBatch(emails).then(res => {\n      let users = res.data.success.map(user => {\n        return new SysAdminAdminUser(user);\n      });\n      this.setState({\n        userList: users.concat(this.state.userList)\n      });\n      res.data.failed.forEach(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  getSearch = () => {\n    if (this.props.isAdmin) {\n      return null;\n    }\n    // offer 'Search' for 'DB' & 'LDAPImported' users\n    return <Search\n      placeholder={gettext('Search users')}\n      submit={this.searchItems}\n    />;\n  };\n\n  searchItems = (keyword) => {\n    navigate(`${siteRoot}sys/search-users/?query=${encodeURIComponent(keyword)}`);\n  };\n\n  render() {\n    const { isAdmin, isLDAPImported } = this.props;\n    const {\n      hasUserSelected,\n      isImportUserDialogOpen,\n      isAddUserDialogOpen,\n      isBatchDeleteUserDialogOpen,\n      isBatchSetQuotaDialogOpen,\n      isBatchAddAdminDialogOpen\n    } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar search={this.getSearch()} {...this.props}>\n          {hasUserSelected ?\n            <Fragment>\n              <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleBatchSetQuotaDialog}>{gettext('Set Quota')}</Button>\n              <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleBatchDeleteUserDialog}>{gettext('Delete Users')}</Button>\n            </Fragment>\n            : this.getOperationsForAll()\n          }\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <UsersNav currentItem={this.getCurrentNavItem()} />\n            <div className=\"cur-view-content\">\n              <Content\n                isAdmin={isAdmin}\n                isLDAPImported={isLDAPImported}\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.userList}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortByQuotaUsage={this.sortByQuotaUsage}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                getListByPage={this.getUsersListByPage}\n                updateUser={this.updateUser}\n                deleteUser={this.deleteUser}\n                updateAdminRole={this.updateAdminRole}\n                revokeAdmin={this.revokeAdmin}\n                onUserSelected={this.onUserSelected}\n                isAllUsersSelected={this.isAllUsersSelected}\n                toggleSelectAllUsers={this.toggleSelectAllUsers}\n              />\n            </div>\n          </div>\n        </div>\n        {isImportUserDialogOpen &&\n        <SysAdminImportUserDialog\n          toggle={this.toggleImportUserDialog}\n          importUserInBatch={this.importUserInBatch}\n        />\n        }\n        {isAddUserDialogOpen &&\n          <SysAdminAddUserDialog\n            dialogTitle={gettext('Add User')}\n            showRole={isPro}\n            availableRoles={availableRoles}\n            addUser={this.addUser}\n            toggleDialog={this.toggleAddUserDialog}\n          />\n        }\n        {isBatchSetQuotaDialogOpen &&\n          <SysAdminUserSetQuotaDialog\n            toggle={this.toggleBatchSetQuotaDialog}\n            updateQuota={this.setUserQuotaInBatch}\n          />\n        }\n        {isBatchDeleteUserDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Users')}\n            message={gettext('Are you sure you want to delete the selected user(s) ?')}\n            executeOperation={this.deleteUserInBatch}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleBatchDeleteUserDialog}\n          />\n        }\n        {isBatchAddAdminDialogOpen &&\n          <SysAdminBatchAddAdminDialog\n            addAdminInBatch={this.addAdminInBatch}\n            toggle={this.toggleBatchAddAdminDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nUsers.propTypes = propTypes;\n\nexport default Users;\n"],"mappings":"6tBAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,QAAQ,KAAQ,wBAAwB,CACjD,OAASC,MAAM,KAAQ,YAAY,CAEnC,OAASC,KAAK,KAAQ,sBAAsB,CAC5C,OAASC,UAAU,KAAQ,4BAA4B,CACvD,OAASC,KAAK,CAAEC,OAAO,CAAEC,QAAQ,KAAQ,0BAA0B,CACnE,MAAO,CAAAC,OAAO,KAAM,2BAA2B,CAC/C,MAAO,CAAAC,0BAA0B,KAAM,sDAAsD,CAC7F,MAAO,CAAAC,wBAAwB,KAAM,wEAAwE,CAC7G,MAAO,CAAAC,qBAAqB,KAAM,qEAAqE,CACvG,MAAO,CAAAC,2BAA2B,KAAM,4EAA4E,CACpH,MAAO,CAAAC,iCAAiC,KAAM,iEAAiE,CAC/G,MAAO,CAAAC,YAAY,KAAM,+BAA+B,CACxD,MAAO,CAAAC,iBAAiB,KAAM,qCAAqC,CACnE,MAAO,CAAAC,eAAe,KAAM,sBAAsB,CAClD,MAAO,CAAAC,MAAM,KAAM,WAAW,CAC9B,MAAO,CAAAC,QAAQ,KAAM,aAAa,CAClC,MAAO,CAAAC,OAAO,KAAM,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEtC,GAAQ,CAAAC,cAAc,CAAKC,MAAM,CAACC,QAAQ,CAACC,WAAW,CAA9CH,cAAc,CAAiC,GAOjD,CAAAI,KAAK,uBAAAC,UAAA,EAAAC,SAAA,CAAAF,KAAA,CAAAC,UAAA,MAAAE,MAAA,CAAAC,YAAA,CAAAJ,KAAA,EAET,SAAAA,MAAYK,KAAK,CAAE,KAAAC,KAAA,CAAAC,eAAA,MAAAP,KAAA,EACjBM,KAAA,CAAAH,MAAA,CAAAK,IAAA,MAAMH,KAAK,EAAEC,KAAA,CAwCfG,sBAAsB,CAAG,UAAM,CAC7BH,KAAA,CAAKI,QAAQ,CAAC,CAACC,sBAAsB,CAAE,CAACL,KAAA,CAAKM,KAAK,CAACD,sBAAsB,CAAC,CAAC,CAC7E,CAAC,CAAAL,KAAA,CAEDO,mBAAmB,CAAG,UAAM,CAC1BP,KAAA,CAAKI,QAAQ,CAAC,CAACI,mBAAmB,CAAE,CAACR,KAAA,CAAKM,KAAK,CAACE,mBAAmB,CAAC,CAAC,CACvE,CAAC,CAAAR,KAAA,CAEDS,yBAAyB,CAAG,UAAM,CAChCT,KAAA,CAAKI,QAAQ,CAAC,CAACM,yBAAyB,CAAE,CAACV,KAAA,CAAKM,KAAK,CAACI,yBAAyB,CAAC,CAAC,CACnF,CAAC,CAAAV,KAAA,CAEDW,2BAA2B,CAAG,UAAM,CAClCX,KAAA,CAAKI,QAAQ,CAAC,CAACQ,2BAA2B,CAAE,CAACZ,KAAA,CAAKM,KAAK,CAACM,2BAA2B,CAAC,CAAC,CACvF,CAAC,CAAAZ,KAAA,CAEDa,cAAc,CAAG,SAACC,IAAI,CAAK,CACzB,GAAI,CAAAC,eAAe,CAAG,KAAK,CAC3B,GAAI,CAAAC,gBAAgB,CAAG,EAAE,CACzB;AACA,GAAI,CAAAC,KAAK,CAAGjB,KAAA,CAAKM,KAAK,CAACY,QAAQ,CAACC,GAAG,CAAC,SAAAC,IAAI,CAAI,CAC1C;AACA,GAAIA,IAAI,CAACC,KAAK,GAAKP,IAAI,CAACO,KAAK,CAAE,CAC7BD,IAAI,CAACE,UAAU,CAAG,CAACF,IAAI,CAACE,UAAU,CACpC,CACA;AACA;AACA;AACA,GAAIF,IAAI,CAACE,UAAU,EAAI,IAAI,CAAE,CAC3BP,eAAe,CAAG,IAAI,CACtBC,gBAAgB,CAACO,IAAI,CAACH,IAAI,CAAC,CAC7B,CAAC,IAAM,CACLJ,gBAAgB,CAAGA,gBAAgB,CAACQ,MAAM,CAAC,SAAAC,QAAQ,CAAI,CACrD,MAAO,CAAAA,QAAQ,CAACJ,KAAK,EAAID,IAAI,CAACC,KAAK,CACrC,CAAC,CAAC,CACJ,CACA,MAAO,CAAAD,IAAI,CACb,CAAC,CAAC,CACF;AACApB,KAAA,CAAKI,QAAQ,CAAC,CACZc,QAAQ,CAAED,KAAK,CACfF,eAAe,CAAEA,eAAe,CAChCC,gBAAgB,CAAEA,gBACpB,CAAC,CAAC,CACJ,CAAC,CAAAhB,KAAA,CAED0B,oBAAoB,CAAG,UAAM,CAC3B,GAAI1B,KAAA,CAAKM,KAAK,CAACqB,kBAAkB,CAAE,CACjC;AACA,GAAI,CAAAV,KAAK,CAAGjB,KAAA,CAAKM,KAAK,CAACY,QAAQ,CAACC,GAAG,CAAC,SAAAC,IAAI,CAAI,CAC1CA,IAAI,CAACE,UAAU,CAAG,KAAK,CACvB,MAAO,CAAAF,IAAI,CACb,CAAC,CAAC,CACFpB,KAAA,CAAKI,QAAQ,CAAC,CACZc,QAAQ,CAAED,KAAK,CACfF,eAAe,CAAE,KAAK,CACtBY,kBAAkB,CAAE,KAAK,CACzBX,gBAAgB,CAAE,EACpB,CAAC,CAAC,CACJ,CAAC,IAAM,CACL;AACA,GAAI,CAAAC,MAAK,CAAGjB,KAAA,CAAKM,KAAK,CAACY,QAAQ,CAACC,GAAG,CAAC,SAAAC,IAAI,CAAI,CAC1CA,IAAI,CAACE,UAAU,CAAG,IAAI,CACtB,MAAO,CAAAF,IAAI,CACb,CAAC,CAAC,CACFpB,KAAA,CAAKI,QAAQ,CAAC,CACZc,QAAQ,CAAED,MAAK,CACfF,eAAe,CAAE,IAAI,CACrBY,kBAAkB,CAAE,IAAI,CACxBX,gBAAgB,CAAEC,MACpB,CAAC,CAAC,CACJ,CACF,CAAC,CAAAjB,KAAA,CAED4B,WAAW,CAAG,UAAM,CACpB;AACE1D,UAAU,CAAC2D,kBAAkB,CAAC,CAAC,CAACC,IAAI,CAAC,SAAAC,GAAG,CAAI,CAC1C,GAAI,CAAAd,KAAK,CAAGc,GAAG,CAACC,IAAI,CAACC,eAAe,CAACd,GAAG,CAAC,SAAAC,IAAI,CAAI,CAC/C,MAAO,IAAI,CAAAvC,iBAAiB,CAACuC,IAAI,CAAC,CACpC,CAAC,CAAC,CACFpB,KAAA,CAAKI,QAAQ,CAAC,CACZc,QAAQ,CAAED,KAAK,CACfiB,OAAO,CAAE,KACX,CAAC,CAAC,CACJ,CAAC,CAAC,CAACC,KAAK,CAAC,SAACC,KAAK,CAAK,CAClBpC,KAAA,CAAKI,QAAQ,CAAC,CACZ8B,OAAO,CAAE,KAAK,CACdG,QAAQ,CAAEpE,KAAK,CAACqE,WAAW,CAACF,KAAK,CAAE,IAAI,CAAE;AAC3C,CAAC,CAAC,CACJ,CAAC,CAAC,CACJ,CAAC,CAAApC,KAAA,CAEDuC,kBAAkB,CAAG,SAACC,IAAI,CAAK,CAC7B,IAAAC,WAAA,CAAuCzC,KAAA,CAAKM,KAAK,CAAzCoC,OAAO,CAAAD,WAAA,CAAPC,OAAO,CAAEC,MAAM,CAAAF,WAAA,CAANE,MAAM,CAAEC,SAAS,CAAAH,WAAA,CAATG,SAAS,CAClC,GAAQ,CAAAC,cAAc,CAAK7C,KAAA,CAAKD,KAAK,CAA7B8C,cAAc,CACtB3E,UAAU,CAAC4E,iBAAiB,CAACN,IAAI,CAAEE,OAAO,CAAEG,cAAc,CAAEF,MAAM,CAAEC,SAAS,CAAC,CAACd,IAAI,CAAC,SAAAC,GAAG,CAAI,CACzF,GAAI,CAAAd,KAAK,CAAGc,GAAG,CAACC,IAAI,CAACA,IAAI,CAACb,GAAG,CAAC,SAAAC,IAAI,CAAI,CAAC,MAAO,IAAI,CAAAxC,YAAY,CAACwC,IAAI,CAAC,CAAC,CAAC,CAAC,CACvEpB,KAAA,CAAKI,QAAQ,CAAC,CACZc,QAAQ,CAAED,KAAK,CACfiB,OAAO,CAAE,KAAK,CACda,WAAW,CAAE9E,KAAK,CAAC8E,WAAW,CAACP,IAAI,CAAEE,OAAO,CAAEX,GAAG,CAACC,IAAI,CAACgB,WAAW,CAAC,CACnEC,WAAW,CAAET,IACf,CAAC,CAAC,CACJ,CAAC,CAAC,CAACL,KAAK,CAAC,SAACC,KAAK,CAAK,CAClBpC,KAAA,CAAKI,QAAQ,CAAC,CACZ8B,OAAO,CAAE,KAAK,CACdG,QAAQ,CAAEpE,KAAK,CAACqE,WAAW,CAACF,KAAK,CAAE,IAAI,CAAE;AAC3C,CAAC,CAAC,CACJ,CAAC,CAAC,CACJ,CAAC,CAAApC,KAAA,CAEDkD,gBAAgB,CAAG,UAAM,CACvBlD,KAAA,CAAKI,QAAQ,CAAC,CACZuC,MAAM,CAAE,aAAa,CACrBC,SAAS,CAAE5C,KAAA,CAAKM,KAAK,CAACsC,SAAS,EAAI,KAAK,CAAG,MAAM,CAAG,KAAK,CACzDK,WAAW,CAAE,CACf,CAAC,CAAE,UAAM,CACP,GAAI,CAAAE,GAAG,CAAG,GAAI,CAAAC,GAAG,CAACC,QAAQ,CAACC,IAAI,CAAC,CAChC,GAAI,CAAAC,YAAY,CAAG,GAAI,CAAAC,eAAe,CAACL,GAAG,CAACM,MAAM,CAAC,CAClD,IAAAC,YAAA,CAA2C1D,KAAA,CAAKM,KAAK,CAA7C2C,WAAW,CAAAS,YAAA,CAAXT,WAAW,CAAEN,MAAM,CAAAe,YAAA,CAANf,MAAM,CAAEC,SAAS,CAAAc,YAAA,CAATd,SAAS,CACtCW,YAAY,CAACI,GAAG,CAAC,MAAM,CAAEV,WAAW,CAAC,CACrCM,YAAY,CAACI,GAAG,CAAC,UAAU,CAAEhB,MAAM,CAAC,CACpCY,YAAY,CAACI,GAAG,CAAC,WAAW,CAAEf,SAAS,CAAC,CACxCO,GAAG,CAACM,MAAM,CAAGF,YAAY,CAACK,QAAQ,CAAC,CAAC,CACpC7F,QAAQ,CAACoF,GAAG,CAACS,QAAQ,CAAC,CAAC,CAAC,CACxB5D,KAAA,CAAKuC,kBAAkB,CAACU,WAAW,CAAC,CACtC,CAAC,CAAC,CACJ,CAAC,CAAAjD,KAAA,CAED6D,UAAU,CAAG,SAACxC,KAAK,CAAEyC,QAAQ,CAAK,CAChC5F,UAAU,CAAC6F,kBAAkB,CAAC1C,KAAK,CAAC,CAACS,IAAI,CAAC,SAAAC,GAAG,CAAI,CAC/C,GAAI,CAAAiC,WAAW,CAAGhE,KAAA,CAAKM,KAAK,CAACY,QAAQ,CAACM,MAAM,CAAC,SAAAV,IAAI,CAAI,CACnD,MAAO,CAAAA,IAAI,CAACO,KAAK,EAAIA,KAAK,CAC5B,CAAC,CAAC,CACFrB,KAAA,CAAKI,QAAQ,CAAC,CAACc,QAAQ,CAAE8C,WAAW,CAAC,CAAC,CACtC,GAAI,CAAAC,GAAG,CAAG7F,OAAO,CAAC,iBAAiB,CAAC,CACpC6F,GAAG,CAAGA,GAAG,CAACC,OAAO,CAAC,IAAI,CAAEJ,QAAQ,CAAC,CACjCxF,OAAO,CAAC6F,OAAO,CAACF,GAAG,CAAC,CACtB,CAAC,CAAC,CAAC9B,KAAK,CAAC,SAACC,KAAK,CAAK,CAClB,GAAI,CAAAgC,UAAU,CAAGnG,KAAK,CAACqE,WAAW,CAACF,KAAK,CAAC,CACzC9D,OAAO,CAAC+F,MAAM,CAACD,UAAU,CAAC,CAC5B,CAAC,CAAC,CACJ,CAAC,CAAApE,KAAA,CAEDsE,mBAAmB,CAAG,SAACC,UAAU,CAAK,CACpC,GAAI,CAAAC,MAAM,CAAGxE,KAAA,CAAKM,KAAK,CAACU,gBAAgB,CAACG,GAAG,CAAC,SAAAC,IAAI,CAAI,CACnD,MAAO,CAAAA,IAAI,CAACC,KAAK,CACnB,CAAC,CAAC,CACFnD,UAAU,CAACuG,2BAA2B,CAACD,MAAM,CAAED,UAAU,CAAC,CAACzC,IAAI,CAAC,SAAAC,GAAG,CAAI,CACrE,GAAI,CAAAb,QAAQ,CAAGlB,KAAA,CAAKM,KAAK,CAACY,QAAQ,CAACC,GAAG,CAAC,SAAAL,IAAI,CAAI,CAC7CiB,GAAG,CAACC,IAAI,CAACmC,OAAO,CAACO,OAAO,CAAC,SAAAC,UAAU,CAAI,CACrC,GAAI7D,IAAI,CAACO,KAAK,EAAIsD,UAAU,CAACtD,KAAK,CAAE,CAClCP,IAAI,CAAC8D,WAAW,CAAGD,UAAU,CAACC,WAAW,CAC3C,CACF,CAAC,CAAC,CACF,MAAO,CAAA9D,IAAI,CACb,CAAC,CAAC,CACFd,KAAA,CAAKI,QAAQ,CAAC,CAACc,QAAQ,CAAEA,QAAQ,CAAC,CAAC,CACrC,CAAC,CAAC,CAACiB,KAAK,CAAC,SAACC,KAAK,CAAK,CAClB,GAAI,CAAAgC,UAAU,CAAGnG,KAAK,CAACqE,WAAW,CAACF,KAAK,CAAC,CACzC9D,OAAO,CAAC+F,MAAM,CAACD,UAAU,CAAC,CAC5B,CAAC,CAAC,CACJ,CAAC,CAAApE,KAAA,CAED6E,iBAAiB,CAAG,UAAM,CACxB,GAAI,CAAAL,MAAM,CAAGxE,KAAA,CAAKM,KAAK,CAACU,gBAAgB,CAACG,GAAG,CAAC,SAAAC,IAAI,CAAI,CACnD,MAAO,CAAAA,IAAI,CAACC,KAAK,CACnB,CAAC,CAAC,CACFnD,UAAU,CAAC4G,yBAAyB,CAACN,MAAM,CAAC,CAAC1C,IAAI,CAAC,SAAAC,GAAG,CAAI,CACvD,GAAIA,GAAG,CAACC,IAAI,CAACmC,OAAO,CAACY,MAAM,CAAE,CAC3B,GAAI,CAAAC,WAAW,CAAGhF,KAAA,CAAKM,KAAK,CAACY,QAAQ,CACrC,GAAI,CAAA8C,WAAW,CAAGgB,WAAW,CAACxD,MAAM,CAAC,SAAAyD,OAAO,CAAI,CAC9C,MAAO,CAAClD,GAAG,CAACC,IAAI,CAACmC,OAAO,CAACe,IAAI,CAAC,SAAAC,WAAW,CAAG,CAC1C,MAAO,CAAAA,WAAW,CAAC9D,KAAK,EAAI4D,OAAO,CAAC5D,KAAK,CAC3C,CAAC,CAAC,CACJ,CAAC,CAAC,CACFrB,KAAA,CAAKI,QAAQ,CAAC,CACZc,QAAQ,CAAE8C,WAAW,CACrBjD,eAAe,CAAEyD,MAAM,CAACO,MAAM,EAAIhD,GAAG,CAACC,IAAI,CAACmC,OAAO,CAACY,MACrD,CAAC,CAAC,CACF,GAAM,CAAAA,MAAM,CAAGhD,GAAG,CAACC,IAAI,CAACmC,OAAO,CAACY,MAAM,CACtC,GAAM,CAAAd,GAAG,CAAGc,MAAM,EAAI,CAAC,CACrB3G,OAAO,CAAC,8BAA8B,CAAC,CACvCA,OAAO,CAAC,uDAAuD,CAAC,CAC7D8F,OAAO,CAAC,2BAA2B,CAAEa,MAAM,CAAC,CACjDzG,OAAO,CAAC6F,OAAO,CAACF,GAAG,CAAC,CACtB,CACAlC,GAAG,CAACC,IAAI,CAACoD,MAAM,CAACV,OAAO,CAAC,SAAA5D,IAAI,CAAI,CAC9B,GAAM,CAAAmD,GAAG,IAAAoB,MAAA,CAAMvE,IAAI,CAACO,KAAK,OAAAgE,MAAA,CAAKvE,IAAI,CAACwE,SAAS,CAAE,CAC9ChH,OAAO,CAAC+F,MAAM,CAACJ,GAAG,CAAC,CACrB,CAAC,CAAC,CACJ,CAAC,CAAC,CAAC9B,KAAK,CAAC,SAACC,KAAK,CAAK,CAClB,GAAI,CAAAgC,UAAU,CAAGnG,KAAK,CAACqE,WAAW,CAACF,KAAK,CAAC,CACzC9D,OAAO,CAAC+F,MAAM,CAACD,UAAU,CAAC,CAC5B,CAAC,CAAC,CACJ,CAAC,CAAApE,KAAA,CAEDuF,iBAAiB,CAAG,SAACC,IAAI,CAAK,CAC5BlH,OAAO,CAACmH,MAAM,CAACrH,OAAO,CAAC,qCAAqC,CAAC,CAAC,CAC9DF,UAAU,CAACwH,yBAAyB,CAACF,IAAI,CAAC,CAAC1D,IAAI,CAAC,SAACC,GAAG,CAAK,CACvD,GAAIA,GAAG,CAACC,IAAI,CAACmC,OAAO,CAACY,MAAM,CAAE,CAC3B,GAAM,CAAA9D,KAAK,CAAGc,GAAG,CAACC,IAAI,CAACmC,OAAO,CAAChD,GAAG,CAAC,SAAAL,IAAI,CAAI,CACzC,GAAIA,IAAI,CAAC6E,WAAW,EAAIC,SAAS,CAAE,CACjC9E,IAAI,CAAC6E,WAAW,CAAG,EAAE,CACvB,CACA,MAAO,IAAI,CAAA/G,YAAY,CAACkC,IAAI,CAAC,CAC/B,CAAC,CAAC,CACFd,KAAA,CAAKI,QAAQ,CAAC,CACZc,QAAQ,CAAED,KAAK,CAACoE,MAAM,CAACrF,KAAA,CAAKM,KAAK,CAACY,QAAQ,CAC5C,CAAC,CAAC,CACJ,CACAa,GAAG,CAACC,IAAI,CAACoD,MAAM,CAACV,OAAO,CAAC,SAAA5D,IAAI,CAAI,CAC9B,GAAM,CAAAmD,GAAG,IAAAoB,MAAA,CAAMvE,IAAI,CAACO,KAAK,OAAAgE,MAAA,CAAKvE,IAAI,CAACwE,SAAS,CAAE,CAC9ChH,OAAO,CAAC+F,MAAM,CAACJ,GAAG,CAAC,CACrB,CAAC,CAAC,CACJ,CAAC,CAAC,CAAC9B,KAAK,CAAC,SAACC,KAAK,CAAK,CAClB,GAAI,CAAAyD,MAAM,CAAG5H,KAAK,CAACqE,WAAW,CAACF,KAAK,CAAC,CACrC9D,OAAO,CAAC+F,MAAM,CAACwB,MAAM,CAAC,CACxB,CAAC,CAAC,CACJ,CAAC,CAAA7F,KAAA,CAED8F,OAAO,CAAG,SAAC9D,IAAI,CAAK,CAClB1D,OAAO,CAACmH,MAAM,CAACrH,OAAO,CAAC,qCAAqC,CAAC,CAAC,CAC9D,GAAQ,CAAAiD,KAAK,CAA2BW,IAAI,CAApCX,KAAK,CAAE0E,IAAI,CAAqB/D,IAAI,CAA7B+D,IAAI,CAAEC,IAAI,CAAehE,IAAI,CAAvBgE,IAAI,CAAEC,QAAQ,CAAKjE,IAAI,CAAjBiE,QAAQ,CACnC/H,UAAU,CAACgI,eAAe,CAAC7E,KAAK,CAAE0E,IAAI,CAAEC,IAAI,CAAEC,QAAQ,CAAC,CAACnE,IAAI,CAAC,SAACC,GAAG,CAAK,CACpE,GAAI,CAAAb,QAAQ,CAAGlB,KAAA,CAAKM,KAAK,CAACY,QAAQ,CAClCA,QAAQ,CAACiF,OAAO,CAACpE,GAAG,CAACC,IAAI,CAAC,CAC1BhC,KAAA,CAAKI,QAAQ,CAAC,CACZc,QAAQ,CAAEA,QACZ,CAAC,CAAC,CACF5C,OAAO,CAAC6F,OAAO,CAACpC,GAAG,CAACC,IAAI,CAACoE,YAAY,CAAC,CACxC,CAAC,CAAC,CAACjE,KAAK,CAAC,SAACC,KAAK,CAAK,CAClB,GAAI,CAAAyD,MAAM,CAAG5H,KAAK,CAACqE,WAAW,CAACF,KAAK,CAAC,CACrC9D,OAAO,CAAC+F,MAAM,CAACwB,MAAM,CAAC,CACxB,CAAC,CAAC,CACJ,CAAC,CAAA7F,KAAA,CAEDqG,YAAY,CAAG,SAAC3D,OAAO,CAAK,CAC1B1C,KAAA,CAAKI,QAAQ,CAAC,CACZsC,OAAO,CAAEA,OACX,CAAC,CAAE,UAAM,CACP1C,KAAA,CAAKuC,kBAAkB,CAAC,CAAC,CAAC,CAC5B,CAAC,CAAC,CACJ,CAAC,CAAAvC,KAAA,CAEDsG,UAAU,CAAG,SAACjF,KAAK,CAAEkF,GAAG,CAAEC,KAAK,CAAK,CAClCtI,UAAU,CAACuI,kBAAkB,CAACpF,KAAK,CAAEkF,GAAG,CAAEC,KAAK,CAAC,CAAC1E,IAAI,CAAC,SAAAC,GAAG,CAAI,CAC3D,GAAI,CAAAiC,WAAW,CAAGhE,KAAA,CAAKM,KAAK,CAACY,QAAQ,CAACC,GAAG,CAAC,SAAAL,IAAI,CAAI,CAChD,GAAIA,IAAI,CAACO,KAAK,EAAIA,KAAK,CAAE,CACvBP,IAAI,CAACyF,GAAG,CAAC,CAAExE,GAAG,CAACC,IAAI,CAACuE,GAAG,CAAC,CAC1B,CACA,MAAO,CAAAzF,IAAI,CACb,CAAC,CAAC,CACFd,KAAA,CAAKI,QAAQ,CAAC,CAACc,QAAQ,CAAE8C,WAAW,CAAC,CAAC,CACtC,GAAM,CAAAC,GAAG,CAAIsC,GAAG,EAAI,WAAW,EAAIC,KAAK,CACtCzE,GAAG,CAACC,IAAI,CAAC0E,iBAAiB,CAAGtI,OAAO,CAAC,gBAAgB,CAAC,CACxDE,OAAO,CAAC6F,OAAO,CAACF,GAAG,CAAC,CACtB,CAAC,CAAC,CAAC9B,KAAK,CAAC,SAACC,KAAK,CAAK,CAClB,GAAI,CAAAgC,UAAU,CAAGnG,KAAK,CAACqE,WAAW,CAACF,KAAK,CAAC,CACzC9D,OAAO,CAAC+F,MAAM,CAACD,UAAU,CAAC,CAC5B,CAAC,CAAC,CACJ,CAAC,CAAApE,KAAA,CAED2G,eAAe,CAAG,SAACtF,KAAK,CAAE2E,IAAI,CAAK,CACjC9H,UAAU,CAAC0I,uBAAuB,CAACvF,KAAK,CAAE2E,IAAI,CAAC,CAAClE,IAAI,CAAC,SAAAC,GAAG,CAAI,CAC1D,GAAI,CAAAiC,WAAW,CAAGhE,KAAA,CAAKM,KAAK,CAACY,QAAQ,CAACC,GAAG,CAAC,SAAAL,IAAI,CAAI,CAChD,GAAIA,IAAI,CAACO,KAAK,EAAIA,KAAK,CAAE,CACvBP,IAAI,CAAC+F,UAAU,CAAG9E,GAAG,CAACC,IAAI,CAACgE,IAAI,CACjC,CACA,MAAO,CAAAlF,IAAI,CACb,CAAC,CAAC,CACFd,KAAA,CAAKI,QAAQ,CAAC,CAACc,QAAQ,CAAE8C,WAAW,CAAC,CAAC,CACtC1F,OAAO,CAAC6F,OAAO,CAAC/F,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAC5C,CAAC,CAAC,CAAC+D,KAAK,CAAC,SAACC,KAAK,CAAK,CAClB,GAAI,CAAAgC,UAAU,CAAGnG,KAAK,CAACqE,WAAW,CAACF,KAAK,CAAC,CACzC9D,OAAO,CAAC+F,MAAM,CAACD,UAAU,CAAC,CAC5B,CAAC,CAAC,CACJ,CAAC,CAAApE,KAAA,CAED8G,WAAW,CAAG,SAACzF,KAAK,CAAE0E,IAAI,CAAK,CAC7B7H,UAAU,CAACuI,kBAAkB,CAACpF,KAAK,CAAE,UAAU,CAAE,KAAK,CAAC,CAACS,IAAI,CAAC,SAAAC,GAAG,CAAI,CAClE,GAAI,CAAAb,QAAQ,CAAGlB,KAAA,CAAKM,KAAK,CAACY,QAAQ,CAACM,MAAM,CAAC,SAAAV,IAAI,CAAI,CAChD,MAAO,CAAAA,IAAI,CAACO,KAAK,EAAIA,KAAK,CAC5B,CAAC,CAAC,CACFrB,KAAA,CAAKI,QAAQ,CAAC,CACZc,QAAQ,CAAEA,QACZ,CAAC,CAAC,CACF5C,OAAO,CAAC6F,OAAO,CAAC/F,OAAO,CAAC,6DAA6D,CAAC,CAAC8F,OAAO,CAAC,eAAe,CAAE6B,IAAI,CAAC,CAAC,CACxH,CAAC,CAAC,CAAC5D,KAAK,CAAC,SAACC,KAAK,CAAK,CAClB,GAAI,CAAAgC,UAAU,CAAGnG,KAAK,CAACqE,WAAW,CAACF,KAAK,CAAC,CACzC9D,OAAO,CAAC+F,MAAM,CAACD,UAAU,CAAC,CAC5B,CAAC,CAAC,CACJ,CAAC,CAAApE,KAAA,CAED+G,mBAAmB,CAAG,UAAM,CAC1B,IAAAC,WAAA,CAAoChH,KAAA,CAAKD,KAAK,CAAtCkH,OAAO,CAAAD,WAAA,CAAPC,OAAO,CAAEpE,cAAc,CAAAmE,WAAA,CAAdnE,cAAc,CAE/B,GAAIoE,OAAO,CAAE,CACX,mBAAO9H,IAAA,CAACnB,MAAM,EAACkJ,SAAS,CAAC,kCAAkC,CAACC,OAAO,CAAEnH,KAAA,CAAKoH,yBAA0B,CAAAC,QAAA,CAAEjJ,OAAO,CAAC,WAAW,CAAC,CAAS,CAAC,CACtI,CAEA,GAAIyE,cAAc,CAAE,CAClB,mBAAO1D,IAAA,MAAG+H,SAAS,CAAC,kCAAkC,CAAC5D,IAAI,IAAA+B,MAAA,CAAKhH,QAAQ,+BAA8B,CAAAgJ,QAAA,CAAEjJ,OAAO,CAAC,cAAc,CAAC,CAAI,CAAC,CACtI,CAEA;AACA,mBACEiB,KAAA,CAACvB,QAAQ,EAAAuJ,QAAA,eACPlI,IAAA,CAACnB,MAAM,EAACkJ,SAAS,CAAC,kCAAkC,CAACC,OAAO,CAAEnH,KAAA,CAAKG,sBAAuB,CAAAkH,QAAA,CAAEjJ,OAAO,CAAC,cAAc,CAAC,CAAS,CAAC,cAC7He,IAAA,CAACnB,MAAM,EAACkJ,SAAS,CAAC,kCAAkC,CAACC,OAAO,CAAEnH,KAAA,CAAKO,mBAAoB,CAAA8G,QAAA,CAAEjJ,OAAO,CAAC,UAAU,CAAC,CAAS,CAAC,cACtHe,IAAA,MAAG+H,SAAS,CAAC,kCAAkC,CAAC5D,IAAI,IAAA+B,MAAA,CAAKhH,QAAQ,+BAA8B,CAAAgJ,QAAA,CAAEjJ,OAAO,CAAC,cAAc,CAAC,CAAI,CAAC,EACrH,CAAC,CAEf,CAAC,CAAA4B,KAAA,CAEDsH,iBAAiB,CAAG,UAAM,CACxB,IAAAC,YAAA,CAAoCvH,KAAA,CAAKD,KAAK,CAAtCkH,OAAO,CAAAM,YAAA,CAAPN,OAAO,CAAEpE,cAAc,CAAA0E,YAAA,CAAd1E,cAAc,CAC/B,GAAI,CAAA/B,IAAI,CAAG,UAAU,CACrB,GAAImG,OAAO,CAAE,CACXnG,IAAI,CAAG,OAAO,CAChB,CAAC,IAAM,IAAI+B,cAAc,CAAE,CACzB/B,IAAI,CAAG,eAAe,CACxB,CACA,MAAO,CAAAA,IAAI,CACb,CAAC,CAAAd,KAAA,CAEDoH,yBAAyB,CAAG,UAAM,CAChCpH,KAAA,CAAKI,QAAQ,CAAC,CAACoH,yBAAyB,CAAE,CAACxH,KAAA,CAAKM,KAAK,CAACkH,yBAAyB,CAAC,CAAC,CACnF,CAAC,CAAAxH,KAAA,CAEDyH,eAAe,CAAG,SAACjD,MAAM,CAAK,CAC5BtG,UAAU,CAACwJ,uBAAuB,CAAClD,MAAM,CAAC,CAAC1C,IAAI,CAAC,SAAAC,GAAG,CAAI,CACrD,GAAI,CAAAd,KAAK,CAAGc,GAAG,CAACC,IAAI,CAACmC,OAAO,CAAChD,GAAG,CAAC,SAAAC,IAAI,CAAI,CACvC,MAAO,IAAI,CAAAvC,iBAAiB,CAACuC,IAAI,CAAC,CACpC,CAAC,CAAC,CACFpB,KAAA,CAAKI,QAAQ,CAAC,CACZc,QAAQ,CAAED,KAAK,CAACoE,MAAM,CAACrF,KAAA,CAAKM,KAAK,CAACY,QAAQ,CAC5C,CAAC,CAAC,CACFa,GAAG,CAACC,IAAI,CAACoD,MAAM,CAACV,OAAO,CAAC,SAAA5D,IAAI,CAAI,CAC9B,GAAM,CAAAmD,GAAG,IAAAoB,MAAA,CAAMvE,IAAI,CAACO,KAAK,OAAAgE,MAAA,CAAKvE,IAAI,CAACwE,SAAS,CAAE,CAC9ChH,OAAO,CAAC+F,MAAM,CAACJ,GAAG,CAAC,CACrB,CAAC,CAAC,CACJ,CAAC,CAAC,CAAC9B,KAAK,CAAC,SAACC,KAAK,CAAK,CAClB,GAAI,CAAAgC,UAAU,CAAGnG,KAAK,CAACqE,WAAW,CAACF,KAAK,CAAC,CACzC9D,OAAO,CAAC+F,MAAM,CAACD,UAAU,CAAC,CAC5B,CAAC,CAAC,CACJ,CAAC,CAAApE,KAAA,CAED2H,SAAS,CAAG,UAAM,CAChB,GAAI3H,KAAA,CAAKD,KAAK,CAACkH,OAAO,CAAE,CACtB,MAAO,KAAI,CACb,CACA;AACA,mBAAO9H,IAAA,CAACJ,MAAM,EACZ6I,WAAW,CAAExJ,OAAO,CAAC,cAAc,CAAE,CACrCyJ,MAAM,CAAE7H,KAAA,CAAK8H,WAAY,CAC1B,CAAC,CACJ,CAAC,CAAA9H,KAAA,CAED8H,WAAW,CAAG,SAACC,OAAO,CAAK,CACzBhK,QAAQ,IAAAsH,MAAA,CAAIhH,QAAQ,6BAAAgH,MAAA,CAA2B2C,kBAAkB,CAACD,OAAO,CAAC,CAAE,CAAC,CAC/E,CAAC,CAhZC/H,KAAA,CAAKM,KAAK,CAAG,CACX4B,OAAO,CAAE,IAAI,CACbG,QAAQ,CAAE,EAAE,CACZnB,QAAQ,CAAE,EAAE,CACZ6B,WAAW,CAAE,KAAK,CAClBE,WAAW,CAAE,CAAC,CACdP,OAAO,CAAE,EAAE,CACX3B,eAAe,CAAE,KAAK,CACtBC,gBAAgB,CAAE,EAAE,CACpBW,kBAAkB,CAAE,KAAK,CACzBtB,sBAAsB,CAAE,KAAK,CAC7BG,mBAAmB,CAAE,KAAK,CAC1BE,yBAAyB,CAAE,KAAK,CAChCE,2BAA2B,CAAE,KAAK,CAClC4G,yBAAyB,CAAE,KAC7B,CAAC,CAAC,OAAAxH,KAAA,CACJ,CAACiI,YAAA,CAAAvI,KAAA,GAAA6G,GAAA,qBAAAC,KAAA,CAED,SAAA0B,kBAAA,CAAqB,KAAAC,MAAA,MACnB,GAAI,IAAI,CAACpI,KAAK,CAACkH,OAAO,CAAE,CAAE;AACxB,IAAI,CAACrF,WAAW,CAAC,CAAC,CAAE;AACtB,CAAC,IAAM,CACL,GAAI,CAAAwG,SAAS,CAAI,GAAI,CAAAhF,GAAG,CAAC7D,MAAM,CAAC8D,QAAQ,CAAC,CAAEE,YAAY,CACvD,IAAA8E,YAAA,CAII,IAAI,CAAC/H,KAAK,CAHZ2C,WAAW,CAAAoF,YAAA,CAAXpF,WAAW,CAAEP,OAAO,CAAA2F,YAAA,CAAP3F,OAAO,CAAA4F,mBAAA,CAAAD,YAAA,CACpB1F,MAAM,CAANA,MAAM,CAAA2F,mBAAA,UAAG,EAAE,CAAAA,mBAAA,CAAAC,qBAAA,CAAAF,YAAA,CACXzF,SAAS,CAATA,SAAS,CAAA2F,qBAAA,UAAG,KAAK,CAAAA,qBAAA,CAEnB,IAAI,CAACnI,QAAQ,CAAC,CACZsC,OAAO,CAAE8F,QAAQ,CAACJ,SAAS,CAACK,GAAG,CAAC,UAAU,CAAC,EAAI/F,OAAO,CAAC,CACvDO,WAAW,CAAEuF,QAAQ,CAACJ,SAAS,CAACK,GAAG,CAAC,MAAM,CAAC,EAAIxF,WAAW,CAAC,CAC3DN,MAAM,CAAEyF,SAAS,CAACK,GAAG,CAAC,UAAU,CAAC,EAAI9F,MAAM,CAC3CC,SAAS,CAAEwF,SAAS,CAACK,GAAG,CAAC,WAAW,CAAC,EAAI7F,SAC3C,CAAC,CAAE,UAAM,CACPuF,MAAI,CAAC5F,kBAAkB,CAAC4F,MAAI,CAAC7H,KAAK,CAAC2C,WAAW,CAAC,CACjD,CAAC,CAAC,CACJ,CACF,CAAC,GAAAsD,GAAA,UAAAC,KAAA,CA6WD,SAAAkC,OAAA,CAAS,CACP,IAAAC,YAAA,CAAoC,IAAI,CAAC5I,KAAK,CAAtCkH,OAAO,CAAA0B,YAAA,CAAP1B,OAAO,CAAEpE,cAAc,CAAA8F,YAAA,CAAd9F,cAAc,CAC/B,IAAA+F,YAAA,CAOI,IAAI,CAACtI,KAAK,CANZS,eAAe,CAAA6H,YAAA,CAAf7H,eAAe,CACfV,sBAAsB,CAAAuI,YAAA,CAAtBvI,sBAAsB,CACtBG,mBAAmB,CAAAoI,YAAA,CAAnBpI,mBAAmB,CACnBI,2BAA2B,CAAAgI,YAAA,CAA3BhI,2BAA2B,CAC3BF,yBAAyB,CAAAkI,YAAA,CAAzBlI,yBAAyB,CACzB8G,yBAAyB,CAAAoB,YAAA,CAAzBpB,yBAAyB,CAE3B,mBACEnI,KAAA,CAACvB,QAAQ,EAAAuJ,QAAA,eACPlI,IAAA,CAACL,eAAe,CAAA+J,aAAA,CAAAA,aAAA,EAACpF,MAAM,CAAE,IAAI,CAACkE,SAAS,CAAC,CAAE,EAAK,IAAI,CAAC5H,KAAK,MAAAsH,QAAA,CACtDtG,eAAe,cACd1B,KAAA,CAACvB,QAAQ,EAAAuJ,QAAA,eACPlI,IAAA,CAACnB,MAAM,EAACkJ,SAAS,CAAC,kCAAkC,CAACC,OAAO,CAAE,IAAI,CAAC1G,yBAA0B,CAAA4G,QAAA,CAAEjJ,OAAO,CAAC,WAAW,CAAC,CAAS,CAAC,cAC7He,IAAA,CAACnB,MAAM,EAACkJ,SAAS,CAAC,kCAAkC,CAACC,OAAO,CAAE,IAAI,CAACxG,2BAA4B,CAAA0G,QAAA,CAAEjJ,OAAO,CAAC,cAAc,CAAC,CAAS,CAAC,EAC1H,CAAC,CACT,IAAI,CAAC2I,mBAAmB,CAAC,CAAC,EAEf,CAAC,cAClB5H,IAAA,QAAK+H,SAAS,CAAC,4BAA4B,CAAAG,QAAA,cACzChI,KAAA,QAAK6H,SAAS,CAAC,oBAAoB,CAAAG,QAAA,eACjClI,IAAA,CAACH,QAAQ,EAAC8J,WAAW,CAAE,IAAI,CAACxB,iBAAiB,CAAC,CAAE,CAAE,CAAC,cACnDnI,IAAA,QAAK+H,SAAS,CAAC,kBAAkB,CAAAG,QAAA,cAC/BlI,IAAA,CAACF,OAAO,EACNgI,OAAO,CAAEA,OAAQ,CACjBpE,cAAc,CAAEA,cAAe,CAC/BX,OAAO,CAAE,IAAI,CAAC5B,KAAK,CAAC4B,OAAQ,CAC5BG,QAAQ,CAAE,IAAI,CAAC/B,KAAK,CAAC+B,QAAS,CAC9B0G,KAAK,CAAE,IAAI,CAACzI,KAAK,CAACY,QAAS,CAC3ByB,MAAM,CAAE,IAAI,CAACrC,KAAK,CAACqC,MAAO,CAC1BC,SAAS,CAAE,IAAI,CAACtC,KAAK,CAACsC,SAAU,CAChCM,gBAAgB,CAAE,IAAI,CAACA,gBAAiB,CACxCD,WAAW,CAAE,IAAI,CAAC3C,KAAK,CAAC2C,WAAY,CACpCF,WAAW,CAAE,IAAI,CAACzC,KAAK,CAACyC,WAAY,CACpCiG,UAAU,CAAE,IAAI,CAAC1I,KAAK,CAACoC,OAAQ,CAC/B2D,YAAY,CAAE,IAAI,CAACA,YAAa,CAChC4C,aAAa,CAAE,IAAI,CAAC1G,kBAAmB,CACvC+D,UAAU,CAAE,IAAI,CAACA,UAAW,CAC5BzC,UAAU,CAAE,IAAI,CAACA,UAAW,CAC5B8C,eAAe,CAAE,IAAI,CAACA,eAAgB,CACtCG,WAAW,CAAE,IAAI,CAACA,WAAY,CAC9BjG,cAAc,CAAE,IAAI,CAACA,cAAe,CACpCc,kBAAkB,CAAE,IAAI,CAACA,kBAAmB,CAC5CD,oBAAoB,CAAE,IAAI,CAACA,oBAAqB,CACjD,CAAC,CACC,CAAC,EACH,CAAC,CACH,CAAC,CACLrB,sBAAsB,eACvBlB,IAAA,CAACX,wBAAwB,EACvB0K,MAAM,CAAE,IAAI,CAAC/I,sBAAuB,CACpCoF,iBAAiB,CAAE,IAAI,CAACA,iBAAkB,CAC3C,CAAC,CAED/E,mBAAmB,eAClBrB,IAAA,CAACV,qBAAqB,EACpB0K,WAAW,CAAE/K,OAAO,CAAC,UAAU,CAAE,CACjCgL,QAAQ,CAAEjL,KAAM,CAChBmB,cAAc,CAAEA,cAAe,CAC/BwG,OAAO,CAAE,IAAI,CAACA,OAAQ,CACtBuD,YAAY,CAAE,IAAI,CAAC9I,mBAAoB,CACxC,CAAC,CAEHG,yBAAyB,eACxBvB,IAAA,CAACZ,0BAA0B,EACzB2K,MAAM,CAAE,IAAI,CAACzI,yBAA0B,CACvC6I,WAAW,CAAE,IAAI,CAAChF,mBAAoB,CACvC,CAAC,CAEH1D,2BAA2B,eAC1BzB,IAAA,CAACR,iCAAiC,EAChC4K,KAAK,CAAEnL,OAAO,CAAC,cAAc,CAAE,CAC/BoL,OAAO,CAAEpL,OAAO,CAAC,wDAAwD,CAAE,CAC3EqL,gBAAgB,CAAE,IAAI,CAAC5E,iBAAkB,CACzC6E,cAAc,CAAEtL,OAAO,CAAC,QAAQ,CAAE,CAClCiL,YAAY,CAAE,IAAI,CAAC1I,2BAA4B,CAChD,CAAC,CAEH6G,yBAAyB,eACxBrI,IAAA,CAACT,2BAA2B,EAC1B+I,eAAe,CAAE,IAAI,CAACA,eAAgB,CACtCyB,MAAM,CAAE,IAAI,CAAC9B,yBAA0B,CACxC,CAAC,EAEI,CAAC,CAEf,CAAC,WAAA1H,KAAA,GA9eiB7B,SAAS,EAmf7B,cAAe,CAAA6B,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}