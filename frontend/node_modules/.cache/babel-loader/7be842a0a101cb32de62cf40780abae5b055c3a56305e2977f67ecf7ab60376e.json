{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.moveListItems = void 0;\nvar _slate = require(\"slate\");\nvar _core = require(\"../../../core\");\nvar _queries = require(\"../queries\");\nvar _moveListItemDown = require(\"./move-list-item-down\");\nvar _moveListItemUp = require(\"./move-list-item-up\");\nvar _removeFirstListItem = require(\"./remove-first-list-item\");\nvar _elementTypes = require(\"../../../constants/element-types\");\nvar moveListItems = function moveListItems(editor) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n    _ref$increase = _ref.increase,\n    increase = _ref$increase === void 0 ? true : _ref$increase,\n    _ref$at = _ref.at,\n    at = _ref$at === void 0 ? editor.selection : _ref$at,\n    enableResetOnShiftTab = _ref.enableResetOnShiftTab;\n  var _nodes = (0, _core.getNodeEntries)(editor, {\n    at: at,\n    match: {\n      type: [_elementTypes.PARAGRAPH]\n    }\n  });\n  var lics = Array.from(_nodes);\n  if (!lics.length) return;\n  var highestLicPaths = [];\n  var highestLicPathRefs = [];\n  lics.forEach(function (lic) {\n    var licPath = lic[1];\n    var liPath = _slate.Path.parent(licPath);\n    var isAncestor = highestLicPaths.some(function (path) {\n      var highestLiPath = _slate.Path.parent(path);\n      return _slate.Path.isAncestor(highestLiPath, liPath);\n    });\n    if (!isAncestor) {\n      highestLicPaths.push(licPath);\n      highestLicPathRefs.push(_slate.Editor.pathRef(editor, licPath));\n    }\n  });\n  var licPathRefsToMove = increase ? highestLicPathRefs : highestLicPathRefs.reverse();\n  var moved = false;\n  licPathRefsToMove.forEach(function (licPathRef) {\n    var licPath = licPathRef.unref();\n    if (!licPath) return;\n    var listItem = _slate.Editor.parent(editor, licPath);\n    if (!listItem) return;\n    var parentList = _slate.Editor.parent(editor, listItem[1]);\n    if (!parentList) return;\n    var _moved = false;\n    if (increase) {\n      _moved = (0, _moveListItemDown.movedListItemDown)(editor, {\n        list: parentList,\n        listItem: listItem\n      });\n    } else if ((0, _queries.isListNested)(editor, parentList[1])) {\n      _moved = (0, _moveListItemUp.movedListItemUp)(editor, {\n        list: parentList,\n        listItem: listItem\n      });\n      return _moved;\n    } else if (enableResetOnShiftTab) {\n      _moved = (0, _removeFirstListItem.removeFirstListItem)(editor, {\n        list: parentList,\n        listItem: listItem\n      });\n    }\n    moved = _moved || moved;\n  });\n  return moved;\n};\nexports.moveListItems = moveListItems;","map":{"version":3,"names":["Object","defineProperty","exports","value","moveListItems","_slate","require","_core","_queries","_moveListItemDown","_moveListItemUp","_removeFirstListItem","_elementTypes","editor","_ref","arguments","length","undefined","_ref$increase","increase","_ref$at","at","selection","enableResetOnShiftTab","_nodes","getNodeEntries","match","type","PARAGRAPH","lics","Array","from","highestLicPaths","highestLicPathRefs","forEach","lic","licPath","liPath","Path","parent","isAncestor","some","path","highestLiPath","push","Editor","pathRef","licPathRefsToMove","reverse","moved","licPathRef","unref","listItem","parentList","_moved","movedListItemDown","list","isListNested","movedListItemUp","removeFirstListItem"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/extension/plugins/list/transforms/move-list-items.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.moveListItems = void 0;\nvar _slate = require(\"slate\");\nvar _core = require(\"../../../core\");\nvar _queries = require(\"../queries\");\nvar _moveListItemDown = require(\"./move-list-item-down\");\nvar _moveListItemUp = require(\"./move-list-item-up\");\nvar _removeFirstListItem = require(\"./remove-first-list-item\");\nvar _elementTypes = require(\"../../../constants/element-types\");\nconst moveListItems = function (editor) {\n  let {\n    increase = true,\n    at = editor.selection,\n    enableResetOnShiftTab\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const _nodes = (0, _core.getNodeEntries)(editor, {\n    at,\n    match: {\n      type: [_elementTypes.PARAGRAPH]\n    }\n  });\n  const lics = Array.from(_nodes);\n  if (!lics.length) return;\n  const highestLicPaths = [];\n  const highestLicPathRefs = [];\n  lics.forEach(lic => {\n    const licPath = lic[1];\n    const liPath = _slate.Path.parent(licPath);\n    const isAncestor = highestLicPaths.some(path => {\n      const highestLiPath = _slate.Path.parent(path);\n      return _slate.Path.isAncestor(highestLiPath, liPath);\n    });\n    if (!isAncestor) {\n      highestLicPaths.push(licPath);\n      highestLicPathRefs.push(_slate.Editor.pathRef(editor, licPath));\n    }\n  });\n  const licPathRefsToMove = increase ? highestLicPathRefs : highestLicPathRefs.reverse();\n  let moved = false;\n  licPathRefsToMove.forEach(licPathRef => {\n    const licPath = licPathRef.unref();\n    if (!licPath) return;\n    const listItem = _slate.Editor.parent(editor, licPath);\n    if (!listItem) return;\n    const parentList = _slate.Editor.parent(editor, listItem[1]);\n    if (!parentList) return;\n    let _moved = false;\n    if (increase) {\n      _moved = (0, _moveListItemDown.movedListItemDown)(editor, {\n        list: parentList,\n        listItem: listItem\n      });\n    } else if ((0, _queries.isListNested)(editor, parentList[1])) {\n      _moved = (0, _moveListItemUp.movedListItemUp)(editor, {\n        list: parentList,\n        listItem: listItem\n      });\n      return _moved;\n    } else if (enableResetOnShiftTab) {\n      _moved = (0, _removeFirstListItem.removeFirstListItem)(editor, {\n        list: parentList,\n        listItem: listItem\n      });\n    }\n    moved = _moved || moved;\n  });\n  return moved;\n};\nexports.moveListItems = moveListItems;"],"mappings":"AAAA,YAAY;;AAEZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAC3CC,KAAK,EAAE;AACT,CAAC,CAAC;AACFD,OAAO,CAACE,aAAa,GAAG,KAAK,CAAC;AAC9B,IAAIC,MAAM,GAAGC,OAAO,CAAC,OAAO,CAAC;AAC7B,IAAIC,KAAK,GAAGD,OAAO,CAAC,eAAe,CAAC;AACpC,IAAIE,QAAQ,GAAGF,OAAO,CAAC,YAAY,CAAC;AACpC,IAAIG,iBAAiB,GAAGH,OAAO,CAAC,uBAAuB,CAAC;AACxD,IAAII,eAAe,GAAGJ,OAAO,CAAC,qBAAqB,CAAC;AACpD,IAAIK,oBAAoB,GAAGL,OAAO,CAAC,0BAA0B,CAAC;AAC9D,IAAIM,aAAa,GAAGN,OAAO,CAAC,kCAAkC,CAAC;AAC/D,IAAMF,aAAa,GAAG,SAAhBA,aAAaA,CAAaS,MAAM,EAAE;EACtC,IAAAC,IAAA,GAIIC,SAAS,CAACC,MAAM,GAAG,CAAC,IAAID,SAAS,CAAC,CAAC,CAAC,KAAKE,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;IAAAG,aAAA,GAAAJ,IAAA,CAHxEK,QAAQ;IAARA,QAAQ,GAAAD,aAAA,cAAG,IAAI,GAAAA,aAAA;IAAAE,OAAA,GAAAN,IAAA,CACfO,EAAE;IAAFA,EAAE,GAAAD,OAAA,cAAGP,MAAM,CAACS,SAAS,GAAAF,OAAA;IACrBG,qBAAqB,GAAAT,IAAA,CAArBS,qBAAqB;EAEvB,IAAMC,MAAM,GAAG,CAAC,CAAC,EAAEjB,KAAK,CAACkB,cAAc,EAAEZ,MAAM,EAAE;IAC/CQ,EAAE,EAAFA,EAAE;IACFK,KAAK,EAAE;MACLC,IAAI,EAAE,CAACf,aAAa,CAACgB,SAAS;IAChC;EACF,CAAC,CAAC;EACF,IAAMC,IAAI,GAAGC,KAAK,CAACC,IAAI,CAACP,MAAM,CAAC;EAC/B,IAAI,CAACK,IAAI,CAACb,MAAM,EAAE;EAClB,IAAMgB,eAAe,GAAG,EAAE;EAC1B,IAAMC,kBAAkB,GAAG,EAAE;EAC7BJ,IAAI,CAACK,OAAO,CAAC,UAAAC,GAAG,EAAI;IAClB,IAAMC,OAAO,GAAGD,GAAG,CAAC,CAAC,CAAC;IACtB,IAAME,MAAM,GAAGhC,MAAM,CAACiC,IAAI,CAACC,MAAM,CAACH,OAAO,CAAC;IAC1C,IAAMI,UAAU,GAAGR,eAAe,CAACS,IAAI,CAAC,UAAAC,IAAI,EAAI;MAC9C,IAAMC,aAAa,GAAGtC,MAAM,CAACiC,IAAI,CAACC,MAAM,CAACG,IAAI,CAAC;MAC9C,OAAOrC,MAAM,CAACiC,IAAI,CAACE,UAAU,CAACG,aAAa,EAAEN,MAAM,CAAC;IACtD,CAAC,CAAC;IACF,IAAI,CAACG,UAAU,EAAE;MACfR,eAAe,CAACY,IAAI,CAACR,OAAO,CAAC;MAC7BH,kBAAkB,CAACW,IAAI,CAACvC,MAAM,CAACwC,MAAM,CAACC,OAAO,CAACjC,MAAM,EAAEuB,OAAO,CAAC,CAAC;IACjE;EACF,CAAC,CAAC;EACF,IAAMW,iBAAiB,GAAG5B,QAAQ,GAAGc,kBAAkB,GAAGA,kBAAkB,CAACe,OAAO,CAAC,CAAC;EACtF,IAAIC,KAAK,GAAG,KAAK;EACjBF,iBAAiB,CAACb,OAAO,CAAC,UAAAgB,UAAU,EAAI;IACtC,IAAMd,OAAO,GAAGc,UAAU,CAACC,KAAK,CAAC,CAAC;IAClC,IAAI,CAACf,OAAO,EAAE;IACd,IAAMgB,QAAQ,GAAG/C,MAAM,CAACwC,MAAM,CAACN,MAAM,CAAC1B,MAAM,EAAEuB,OAAO,CAAC;IACtD,IAAI,CAACgB,QAAQ,EAAE;IACf,IAAMC,UAAU,GAAGhD,MAAM,CAACwC,MAAM,CAACN,MAAM,CAAC1B,MAAM,EAAEuC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC5D,IAAI,CAACC,UAAU,EAAE;IACjB,IAAIC,MAAM,GAAG,KAAK;IAClB,IAAInC,QAAQ,EAAE;MACZmC,MAAM,GAAG,CAAC,CAAC,EAAE7C,iBAAiB,CAAC8C,iBAAiB,EAAE1C,MAAM,EAAE;QACxD2C,IAAI,EAAEH,UAAU;QAChBD,QAAQ,EAAEA;MACZ,CAAC,CAAC;IACJ,CAAC,MAAM,IAAI,CAAC,CAAC,EAAE5C,QAAQ,CAACiD,YAAY,EAAE5C,MAAM,EAAEwC,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE;MAC5DC,MAAM,GAAG,CAAC,CAAC,EAAE5C,eAAe,CAACgD,eAAe,EAAE7C,MAAM,EAAE;QACpD2C,IAAI,EAAEH,UAAU;QAChBD,QAAQ,EAAEA;MACZ,CAAC,CAAC;MACF,OAAOE,MAAM;IACf,CAAC,MAAM,IAAI/B,qBAAqB,EAAE;MAChC+B,MAAM,GAAG,CAAC,CAAC,EAAE3C,oBAAoB,CAACgD,mBAAmB,EAAE9C,MAAM,EAAE;QAC7D2C,IAAI,EAAEH,UAAU;QAChBD,QAAQ,EAAEA;MACZ,CAAC,CAAC;IACJ;IACAH,KAAK,GAAGK,MAAM,IAAIL,KAAK;EACzB,CAAC,CAAC;EACF,OAAOA,KAAK;AACd,CAAC;AACD/C,OAAO,CAACE,aAAa,GAAGA,aAAa"},"metadata":{},"sourceType":"script","externalDependencies":[]}