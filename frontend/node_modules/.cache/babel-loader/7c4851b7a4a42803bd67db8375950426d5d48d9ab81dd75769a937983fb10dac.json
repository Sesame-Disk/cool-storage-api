{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{Button,Modal,ModalHeader,ModalBody,ModalFooter,Input,InputGroupAddon,InputGroup}from'reactstrap';import{gettext}from'../../../utils/constants';import{seafileAPI}from'../../../utils/seafile-api';import{Utils}from'../../../utils/utils';import toaster from'../../toast';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SetGroupQuotaDialog=/*#__PURE__*/function(_React$Component){_inherits(SetGroupQuotaDialog,_React$Component);var _super=_createSuper(SetGroupQuotaDialog);function SetGroupQuotaDialog(props){var _this;_classCallCheck(this,SetGroupQuotaDialog);_this=_super.call(this,props);_this.setGroupQuota=function(){var numberReg=/^[1-9]\\d*$/im;var quota=_this.state.quota;if(quota.length&&numberReg.test(quota)||quota==-2){_this.setState({errMessage:''});var newQuota=_this.state.quota==-2?_this.state.quota:_this.state.quota*1000000;seafileAPI.sysAdminUpdateDepartmentQuota(_this.props.groupID,newQuota).then(function(res){_this.props.toggle();_this.props.onSetQuota(res.data);}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});}else{var err=gettext('Quota is invalid.');_this.setState({errMessage:err});}};_this.handleChange=function(e){var quota=e.target.value.trim();_this.setState({quota:quota});};_this.handleKeyDown=function(e){if(e.key==='Enter'){_this.setGroupQuota();e.preventDefault();}};_this.state={quota:'',errMessage:''};return _this;}_createClass(SetGroupQuotaDialog,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(Modal,{isOpen:true,toggle:this.props.toggle,autoFocus:false,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:this.props.toggle,children:gettext('Set Quota')}),/*#__PURE__*/_jsxs(ModalBody,{children:[/*#__PURE__*/_jsxs(InputGroup,{children:[/*#__PURE__*/_jsx(Input,{onKeyDown:this.handleKeyDown,value:this.state.quota,onChange:this.handleChange,autoFocus:true}),/*#__PURE__*/_jsx(InputGroupAddon,{addonType:\"append\",children:'MB'})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"tip\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{children:gettext('An integer that is greater than 0 or equal to -2.')}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{children:gettext('Tip: -2 means no limit.')})]}),this.state.errMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:this.state.errMessage})]}),/*#__PURE__*/_jsxs(ModalFooter,{children:[/*#__PURE__*/_jsx(Button,{color:\"secondary\",onClick:this.props.toggle,children:gettext('Cancel')}),/*#__PURE__*/_jsx(Button,{color:\"primary\",onClick:this.setGroupQuota,children:gettext('Submit')})]})]});}}]);return SetGroupQuotaDialog;}(React.Component);export default SetGroupQuotaDialog;","map":{"version":3,"names":["React","Button","Modal","ModalHeader","ModalBody","ModalFooter","Input","InputGroupAddon","InputGroup","gettext","seafileAPI","Utils","toaster","jsx","_jsx","jsxs","_jsxs","SetGroupQuotaDialog","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","setGroupQuota","numberReg","quota","state","length","test","setState","errMessage","newQuota","sysAdminUpdateDepartmentQuota","groupID","then","res","toggle","onSetQuota","data","catch","error","getErrorMsg","danger","err","handleChange","e","target","value","trim","handleKeyDown","key","preventDefault","_createClass","render","isOpen","autoFocus","children","onKeyDown","onChange","addonType","className","color","onClick","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-set-group-quota-dialog.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, InputGroupAddon, InputGroup } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  groupID: PropTypes.number.isRequired,\n  onSetQuota: PropTypes.func.isRequired,\n};\n\nclass SetGroupQuotaDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      quota: '',\n      errMessage: '',\n    };\n  }\n\n  setGroupQuota = () => {\n    const numberReg = /^[1-9]\\d*$/im;\n    let quota = this.state.quota;\n    if ((quota.length && numberReg.test(quota)) || quota == -2) {\n      this.setState({ errMessage: '' });\n      let newQuota = this.state.quota == -2 ? this.state.quota : this.state.quota * 1000000;\n      seafileAPI.sysAdminUpdateDepartmentQuota(this.props.groupID, newQuota).then((res) => {\n        this.props.toggle();\n        this.props.onSetQuota(res.data);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      const err = gettext('Quota is invalid.');\n      this.setState({ errMessage: err });\n    }\n  };\n\n  handleChange = (e) => {\n    const quota = e.target.value.trim();\n    this.setState({ quota: quota });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.setGroupQuota();\n      e.preventDefault();\n    }\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Set Quota')}</ModalHeader>\n        <ModalBody>\n          <InputGroup>\n            <Input\n              onKeyDown={this.handleKeyDown}\n              value={this.state.quota}\n              onChange={this.handleChange}\n              autoFocus={true}\n            />\n            <InputGroupAddon addonType=\"append\">{'MB'}</InputGroupAddon>\n          </InputGroup>\n          <p className=\"tip\">\n            <br/><span>{gettext('An integer that is greater than 0 or equal to -2.')}</span><br/>\n            <span>{gettext('Tip: -2 means no limit.')}</span>\n          </p>\n          {this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.setGroupQuota}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSetGroupQuotaDialog.propTypes = propTypes;\n\nexport default SetGroupQuotaDialog;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}