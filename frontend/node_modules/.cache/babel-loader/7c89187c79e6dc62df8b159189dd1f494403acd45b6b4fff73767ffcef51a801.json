{"ast":null,"code":"import _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useCallback, useEffect, useState } from 'react';\nimport RowDragHandler from './row-drag-handler';\nimport ColumnDragHandler from './column-drag-handler';\nimport EventBus from '../../../../../utils/event-bus';\nimport { INTERNAL_EVENT } from '../../../../../constants';\nimport { DRAG_HANDLER_ROW, DRAG_HANDLER_COLUMN } from '../../constants';\nvar DragHandlers = function DragHandlers(_ref) {\n  var table = _ref.table;\n  var _useState = useState({\n      top: 0,\n      left: 0\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    linePosition = _useState2[0],\n    setLinePosition = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    displayType = _useState4[0],\n    setDisplayType = _useState4[1];\n  var tableID = table.id;\n  var handleShowDragHandler = useCallback(function (_ref2) {\n    var displayType = _ref2.displayType,\n      left = _ref2.left,\n      top = _ref2.top,\n      tableId = _ref2.tableId;\n    if (tableId !== tableID) return;\n    var maskOffset = 2;\n    setLinePosition({\n      top: top,\n      left: left - maskOffset\n    });\n    setDisplayType(displayType);\n  }, [tableID]);\n  useEffect(function () {\n    var eventBus = EventBus.getInstance();\n    var unsubscribe = eventBus.subscribe(INTERNAL_EVENT.TABLE_SHOW_DRAG_HANDLER, handleShowDragHandler);\n    return function () {\n      unsubscribe();\n    };\n  }, [handleShowDragHandler]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, displayType === DRAG_HANDLER_ROW && /*#__PURE__*/React.createElement(RowDragHandler, {\n    top: linePosition.top\n  }), displayType === DRAG_HANDLER_COLUMN && /*#__PURE__*/React.createElement(ColumnDragHandler, {\n    left: linePosition.left\n  }));\n};\nexport default DragHandlers;","map":{"version":3,"names":["React","useCallback","useEffect","useState","RowDragHandler","ColumnDragHandler","EventBus","INTERNAL_EVENT","DRAG_HANDLER_ROW","DRAG_HANDLER_COLUMN","DragHandlers","_ref","table","_useState","top","left","_useState2","_slicedToArray","linePosition","setLinePosition","_useState3","_useState4","displayType","setDisplayType","tableID","id","handleShowDragHandler","_ref2","tableId","maskOffset","eventBus","getInstance","unsubscribe","subscribe","TABLE_SHOW_DRAG_HANDLER","createElement","Fragment"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/extension/plugins/table/render/drag-handlers/index.js"],"sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\nimport RowDragHandler from './row-drag-handler';\nimport ColumnDragHandler from './column-drag-handler';\nimport EventBus from '../../../../../utils/event-bus';\nimport { INTERNAL_EVENT } from '../../../../../constants';\nimport { DRAG_HANDLER_ROW, DRAG_HANDLER_COLUMN } from '../../constants';\nconst DragHandlers = _ref => {\n  let {\n    table\n  } = _ref;\n  const [linePosition, setLinePosition] = useState({\n    top: 0,\n    left: 0\n  });\n  const [displayType, setDisplayType] = useState('');\n  const tableID = table.id;\n  const handleShowDragHandler = useCallback(_ref2 => {\n    let {\n      displayType,\n      left,\n      top,\n      tableId\n    } = _ref2;\n    if (tableId !== tableID) return;\n    const maskOffset = 2;\n    setLinePosition({\n      top,\n      left: left - maskOffset\n    });\n    setDisplayType(displayType);\n  }, [tableID]);\n  useEffect(() => {\n    const eventBus = EventBus.getInstance();\n    const unsubscribe = eventBus.subscribe(INTERNAL_EVENT.TABLE_SHOW_DRAG_HANDLER, handleShowDragHandler);\n    return () => {\n      unsubscribe();\n    };\n  }, [handleShowDragHandler]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, displayType === DRAG_HANDLER_ROW && /*#__PURE__*/React.createElement(RowDragHandler, {\n    top: linePosition.top\n  }), displayType === DRAG_HANDLER_COLUMN && /*#__PURE__*/React.createElement(ColumnDragHandler, {\n    left: linePosition.left\n  }));\n};\nexport default DragHandlers;"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,WAAW,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC/D,OAAOC,cAAc,MAAM,oBAAoB;AAC/C,OAAOC,iBAAiB,MAAM,uBAAuB;AACrD,OAAOC,QAAQ,MAAM,gCAAgC;AACrD,SAASC,cAAc,QAAQ,0BAA0B;AACzD,SAASC,gBAAgB,EAAEC,mBAAmB,QAAQ,iBAAiB;AACvE,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CAAGC,IAAI,EAAI;EAC3B,IACEC,KAAK,GACHD,IAAI,CADNC,KAAK;EAEP,IAAAC,SAAA,GAAwCV,QAAQ,CAAC;MAC/CW,GAAG,EAAE,CAAC;MACNC,IAAI,EAAE;IACR,CAAC,CAAC;IAAAC,UAAA,GAAAC,cAAA,CAAAJ,SAAA;IAHKK,YAAY,GAAAF,UAAA;IAAEG,eAAe,GAAAH,UAAA;EAIpC,IAAAI,UAAA,GAAsCjB,QAAQ,CAAC,EAAE,CAAC;IAAAkB,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAA3CE,WAAW,GAAAD,UAAA;IAAEE,cAAc,GAAAF,UAAA;EAClC,IAAMG,OAAO,GAAGZ,KAAK,CAACa,EAAE;EACxB,IAAMC,qBAAqB,GAAGzB,WAAW,CAAC,UAAA0B,KAAK,EAAI;IACjD,IACEL,WAAW,GAITK,KAAK,CAJPL,WAAW;MACXP,IAAI,GAGFY,KAAK,CAHPZ,IAAI;MACJD,GAAG,GAEDa,KAAK,CAFPb,GAAG;MACHc,OAAO,GACLD,KAAK,CADPC,OAAO;IAET,IAAIA,OAAO,KAAKJ,OAAO,EAAE;IACzB,IAAMK,UAAU,GAAG,CAAC;IACpBV,eAAe,CAAC;MACdL,GAAG,EAAHA,GAAG;MACHC,IAAI,EAAEA,IAAI,GAAGc;IACf,CAAC,CAAC;IACFN,cAAc,CAACD,WAAW,CAAC;EAC7B,CAAC,EAAE,CAACE,OAAO,CAAC,CAAC;EACbtB,SAAS,CAAC,YAAM;IACd,IAAM4B,QAAQ,GAAGxB,QAAQ,CAACyB,WAAW,CAAC,CAAC;IACvC,IAAMC,WAAW,GAAGF,QAAQ,CAACG,SAAS,CAAC1B,cAAc,CAAC2B,uBAAuB,EAAER,qBAAqB,CAAC;IACrG,OAAO,YAAM;MACXM,WAAW,CAAC,CAAC;IACf,CAAC;EACH,CAAC,EAAE,CAACN,qBAAqB,CAAC,CAAC;EAC3B,OAAO,aAAa1B,KAAK,CAACmC,aAAa,CAACnC,KAAK,CAACoC,QAAQ,EAAE,IAAI,EAAEd,WAAW,KAAKd,gBAAgB,IAAI,aAAaR,KAAK,CAACmC,aAAa,CAAC/B,cAAc,EAAE;IACjJU,GAAG,EAAEI,YAAY,CAACJ;EACpB,CAAC,CAAC,EAAEQ,WAAW,KAAKb,mBAAmB,IAAI,aAAaT,KAAK,CAACmC,aAAa,CAAC9B,iBAAiB,EAAE;IAC7FU,IAAI,EAAEG,YAAY,CAACH;EACrB,CAAC,CAAC,CAAC;AACL,CAAC;AACD,eAAeL,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}