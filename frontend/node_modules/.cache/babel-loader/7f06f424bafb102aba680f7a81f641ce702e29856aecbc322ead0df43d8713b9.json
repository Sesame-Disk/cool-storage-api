{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Fragment}from'react';import{Button,Modal,ModalHeader,ModalBody,ModalFooter}from'reactstrap';import toaster from'../toast';import copy from'../copy-to-clipboard';import{gettext}from'../../utils/constants';import{seafileAPI}from'../../utils/seafile-api';import{Utils}from'../../utils/utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var InternalLinkDialog=/*#__PURE__*/function(_React$Component){_inherits(InternalLinkDialog,_React$Component);var _super=_createSuper(InternalLinkDialog);function InternalLinkDialog(props){var _this;_classCallCheck(this,InternalLinkDialog);_this=_super.call(this,props);_this.getInternalLink=function(){var repoID=_this.props.repoID;var path=_this.props.path;seafileAPI.getInternalLink(repoID,path).then(function(res){var smart_link=res.data.smart_link;_this.setState({isLoading:false,smartLink:smart_link});}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);_this.setState({isLoading:false});});};_this.copyToClipBoard=function(){copy(_this.state.smartLink);var message=gettext('Internal link has been copied to clipboard');toaster.success(message,{duration:2});_this.toggle();};_this.toggle=function(){_this.props.onInternalLinkDialogToggle({internalLink:''});};_this.state={smartLink:'',isLoading:true};return _this;}_createClass(InternalLinkDialog,[{key:\"componentDidMount\",value:function componentDidMount(){if(this.props.internalLink){this.setState({smartLink:this.props.internalLink});return;}this.getInternalLink();}},{key:\"render\",value:function render(){var tipMessage=gettext('An internal link is a link to a file or folder that can be accessed by users with read permission to the file or folder.');return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(Modal,{isOpen:true,toggle:this.toggle,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:this.toggle,children:gettext('Internal Link')}),/*#__PURE__*/_jsxs(ModalBody,{children:[/*#__PURE__*/_jsx(\"p\",{className:\"tip mb-1\",children:tipMessage}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"a\",{target:\"_blank\",href:this.state.smartLink,rel:\"noreferrer\",children:this.state.smartLink})})]}),/*#__PURE__*/_jsxs(ModalFooter,{children:[/*#__PURE__*/_jsx(Button,{color:\"secondary\",onClick:this.toggle,children:gettext('Cancel')}),/*#__PURE__*/_jsx(Button,{color:\"primary\",onClick:this.copyToClipBoard,children:gettext('Copy')})]})]})});}}]);return InternalLinkDialog;}(React.Component);export default InternalLinkDialog;","map":{"version":3,"names":["React","Fragment","Button","Modal","ModalHeader","ModalBody","ModalFooter","toaster","copy","gettext","seafileAPI","Utils","jsx","_jsx","jsxs","_jsxs","InternalLinkDialog","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","getInternalLink","repoID","path","then","res","smart_link","data","setState","isLoading","smartLink","catch","error","errMessage","getErrorMsg","danger","copyToClipBoard","state","message","success","duration","toggle","onInternalLinkDialogToggle","internalLink","_createClass","key","value","componentDidMount","render","tipMessage","children","isOpen","className","target","href","rel","color","onClick","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/internal-link-dialog.js"],"sourcesContent":["import React, { Fragment } from 'react';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport toaster from '../toast';\nimport copy from '../copy-to-clipboard';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  internalLink: PropTypes.string,\n  onInternalLinkDialogToggle: PropTypes.func.isRequired,\n};\n\nclass InternalLinkDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      smartLink: '',\n      isLoading: true,\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.internalLink) {\n      this.setState({smartLink: this.props.internalLink});\n      return;\n    }\n    this.getInternalLink();\n  }\n\n  getInternalLink = () => {\n    let repoID = this.props.repoID;\n    let path = this.props.path;\n    seafileAPI.getInternalLink(repoID, path).then(res => {\n      const { smart_link } = res.data;\n      this.setState({\n        isLoading: false,\n        smartLink: smart_link,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n      this.setState({isLoading: false});\n    });\n  };\n\n  copyToClipBoard = () => {\n    copy(this.state.smartLink);\n    const message = gettext('Internal link has been copied to clipboard');\n    toaster.success(message, {duration: 2});\n    this.toggle();\n  };\n\n  toggle = () => {\n    this.props.onInternalLinkDialogToggle({internalLink: ''});\n  };\n\n  render() {\n    const tipMessage = gettext('An internal link is a link to a file or folder that can be accessed by users with read permission to the file or folder.');\n    return (\n      <Fragment>\n        <Modal isOpen={true} toggle={this.toggle}>\n          <ModalHeader toggle={this.toggle}>{gettext('Internal Link')}</ModalHeader>\n          <ModalBody>\n            <p className=\"tip mb-1\">{tipMessage}</p>\n            <p>\n              <a target=\"_blank\" href={this.state.smartLink} rel='noreferrer'>{this.state.smartLink}</a>\n            </p>\n          </ModalBody>\n          <ModalFooter>\n            <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n            <Button color=\"primary\" onClick={this.copyToClipBoard}>{gettext('Copy')}</Button>\n          </ModalFooter>\n        </Modal>\n      </Fragment>\n    );\n  }\n}\n\nInternalLinkDialog.propTypes = propTypes;\n\nexport default InternalLinkDialog;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}