{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Fragment}from'react';import{gettext,isPro}from'../../utils/constants';import{Button}from'reactstrap';import{seafileAPI}from'../../utils/seafile-api';import{Utils}from'../../utils/utils';import toaster from'../toast';import UserSelect from'../user-select';import SharePermissionEditor from'../select-editor/share-permission-editor';import'../../css/invitations.css';import'../../css/share-to-user.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserItem=/*#__PURE__*/function(_React$Component){_inherits(UserItem,_React$Component);var _super=_createSuper(UserItem);function UserItem(props){var _this;_classCallCheck(this,UserItem);_this=_super.call(this,props);_this.onMouseEnter=function(){_this.setState({isOperationShow:true});};_this.onMouseLeave=function(){_this.setState({isOperationShow:false});};_this.userAvatarOnMouseEnter=function(){_this.setState({isUserDetailsPopoverOpen:true});};_this.userAvatarOnMouseLeave=function(){_this.setState({isUserDetailsPopoverOpen:false});};_this.deleteShareItem=function(){var item=_this.props.item;_this.props.deleteShareItem(item.user_info.name);};_this.onChangeUserPermission=function(permission){var item=_this.props.item;_this.props.onChangeUserPermission(item,permission);};_this.state={isOperationShow:false,isUserDetailsPopoverOpen:false};return _this;}_createClass(UserItem,[{key:\"render\",value:function render(){var item=this.props.item;var currentPermission=Utils.getSharedPermission(item);var isUserDetailsPopoverOpen=this.state.isUserDetailsPopoverOpen;return/*#__PURE__*/_jsxs(\"tr\",{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,tabIndex:\"0\",onFocus:this.onMouseEnter,children:[/*#__PURE__*/_jsx(\"td\",{className:\"name\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:item.user_info.avatar_url,width:\"24\",alt:item.user_info.nickname,className:\"rounded-circle mr-2 cursor-pointer\",onMouseEnter:this.userAvatarOnMouseEnter,onMouseLeave:this.userAvatarOnMouseLeave}),/*#__PURE__*/_jsx(\"span\",{children:item.user_info.nickname}),isUserDetailsPopoverOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"user-details-popover p-4 position-absolute w-100 mt-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-details-main pb-3\",children:[/*#__PURE__*/_jsx(\"img\",{src:item.user_info.avatar_url,width:\"40\",alt:item.user_info.nickname,className:\"rounded-circle mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"user-details-name\",children:item.user_info.nickname})]}),/*#__PURE__*/_jsxs(\"dl\",{className:\"m-0 mt-3 d-flex\",children:[/*#__PURE__*/_jsx(\"dt\",{className:\"m-0 mr-3\",children:gettext('Email')}),/*#__PURE__*/_jsx(\"dd\",{className:\"m-0\",children:item.user_info.contact_email})]})]})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(SharePermissionEditor,{repoID:this.props.repoID,isTextMode:true,autoFocus:true,isEditIconShow:this.state.isOperationShow,currentPermission:currentPermission,permissions:this.props.permissions,onPermissionChanged:this.onChangeUserPermission})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{tabIndex:\"0\",role:\"button\",className:\"sf2-icon-x3 action-icon \".concat(this.state.isOperationShow?'':'hide'),onClick:this.deleteShareItem,onKeyDown:Utils.onKeyDown,title:gettext('Delete'),\"aria-label\":gettext('Delete')})})]});}}]);return UserItem;}(React.Component);var UserList=/*#__PURE__*/function(_React$Component2){_inherits(UserList,_React$Component2);var _super2=_createSuper(UserList);function UserList(){_classCallCheck(this,UserList);return _super2.apply(this,arguments);}_createClass(UserList,[{key:\"render\",value:function render(){var _this2=this;var items=this.props.items;return/*#__PURE__*/_jsx(\"tbody\",{children:items.map(function(item,index){return/*#__PURE__*/_jsx(UserItem,{item:item,repoID:_this2.props.repoID,permissions:_this2.props.permissions,deleteShareItem:_this2.props.deleteShareItem,onChangeUserPermission:_this2.props.onChangeUserPermission},index);})});}}]);return UserList;}(React.Component);var ShareToUser=/*#__PURE__*/function(_React$Component3){_inherits(ShareToUser,_React$Component3);var _super3=_createSuper(ShareToUser);function ShareToUser(props){var _this3;_classCallCheck(this,ShareToUser);_this3=_super3.call(this,props);_this3.handleSelectChange=function(option){_this3.setState({selectedOption:option});_this3.options=[];};_this3.setPermission=function(permission){_this3.setState({permission:permission});};_this3.shareToUser=function(){var users=[];var path=_this3.props.itemPath;var repoID=_this3.props.repoID;if(_this3.state.selectedOption&&_this3.state.selectedOption.length>0){for(var i=0;i<_this3.state.selectedOption.length;i++){users[i]=_this3.state.selectedOption[i].email;}}if(_this3.props.isGroupOwnedRepo){seafileAPI.shareGroupOwnedRepoToUser(repoID,_this3.state.permission,users,path).then(function(res){var errorMsg=[];if(res.data.failed.length>0){for(var _i=0;_i<res.data.failed.length;_i++){errorMsg[_i]=res.data.failed[_i];}}// todo modify api\nvar items=res.data.success.map(function(item){var sharedItem={'user_info':{'nickname':item.user_name,'name':item.user_email},'permission':item.permission,'share_type':'user'};return sharedItem;});_this3.setState({errorMsg:errorMsg,sharedItems:_this3.state.sharedItems.concat(items),selectedOption:null,permission:'rw'});_this3.refs.userSelect.clearSelect();}).catch(function(error){if(error.response){var message=gettext('Library can not be shared to owner.');var errMessage=[];errMessage.push(message);_this3.setState({errorMsg:errMessage,selectedOption:null});}});}else{seafileAPI.shareFolder(repoID,path,'user',_this3.state.permission,users).then(function(res){var errorMsg=[];if(res.data.failed.length>0){for(var _i2=0;_i2<res.data.failed.length;_i2++){errorMsg[_i2]=res.data.failed[_i2];}}_this3.setState({errorMsg:errorMsg,sharedItems:_this3.state.sharedItems.concat(res.data.success),selectedOption:null,permission:'rw'});_this3.refs.userSelect.clearSelect();}).catch(function(error){if(error.response){var message=gettext('Library can not be shared to owner.');var errMessage=[];errMessage.push(message);_this3.setState({errorMsg:errMessage,selectedOption:null});}});}};_this3.deleteShareItem=function(username){var path=_this3.props.itemPath;var repoID=_this3.props.repoID;if(_this3.props.isGroupOwnedRepo){seafileAPI.deleteGroupOwnedRepoSharedUserItem(repoID,username,path).then(function(res){_this3.setState({sharedItems:_this3.state.sharedItems.filter(function(item){return item.user_info.name!==username;})});}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});}else{seafileAPI.deleteShareToUserItem(repoID,path,'user',username).then(function(res){_this3.setState({sharedItems:_this3.state.sharedItems.filter(function(item){return item.user_info.name!==username;})});}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});}};_this3.onChangeUserPermission=function(item,permission){var path=_this3.props.itemPath;var repoID=_this3.props.repoID;var username=item.user_info.name;if(_this3.props.isGroupOwnedRepo){seafileAPI.modifyGroupOwnedRepoUserSharedPermission(repoID,permission,username,path).then(function(){_this3.updateSharedItems(item,permission);}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});}else{seafileAPI.updateShareToUserItemPermission(repoID,path,'user',username,permission).then(function(){_this3.updateSharedItems(item,permission);}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});}};_this3.updateSharedItems=function(item,permission){var username=item.user_info.name;var sharedItems=_this3.state.sharedItems.map(function(sharedItem){var sharedItemUsername=sharedItem.user_info.name;if(username===sharedItemUsername){sharedItem.permission=permission;sharedItem.is_admin=permission==='admin'?true:false;}return sharedItem;});_this3.setState({sharedItems:sharedItems});};_this3.state={selectedOption:null,errorMsg:[],permission:'rw',sharedItems:[]};_this3.options=[];_this3.permissions=[];var itemType=props.itemType,isRepoOwner=props.isRepoOwner;if(itemType==='library'){_this3.permissions=isRepoOwner?['rw','r','admin','cloud-edit','preview']:['rw','r','cloud-edit','preview'];}else if(_this3.props.itemType==='dir'){_this3.permissions=['rw','r','cloud-edit','preview'];}if(!isPro){_this3.permissions=['rw','r'];}if(_this3.props.isGroupOwnedRepo){_this3.permissions=['rw','r','cloud-edit','preview'];}return _this3;}_createClass(ShareToUser,[{key:\"componentDidMount\",value:function componentDidMount(){var _this4=this;var path=this.props.itemPath;var repoID=this.props.repoID;seafileAPI.listSharedItems(repoID,path,'user').then(function(res){if(res.data.length!==0){_this4.setState({sharedItems:res.data});}}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});}},{key:\"render\",value:function render(){var sharedItems=this.state.sharedItems;var thead=/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{width:\"47%\",children:gettext('User')}),/*#__PURE__*/_jsx(\"th\",{width:\"35%\",children:gettext('Permission')}),/*#__PURE__*/_jsx(\"th\",{width:\"18%\"})]})});return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(\"table\",{className:\"w-xs-200\",children:[thead,/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(UserSelect,{ref:\"userSelect\",isMulti:true,className:\"reviewer-select\",placeholder:gettext('Search users'),onSelectChange:this.handleSelectChange})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(SharePermissionEditor,{repoID:this.props.repoID,isTextMode:false,isEditIconShow:false,currentPermission:this.state.permission,permissions:this.permissions,onPermissionChanged:this.setPermission,enableAddCustomPermission:isPro,onAddCustomPermissionToggle:this.props.onAddCustomPermissionToggle})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{onClick:this.shareToUser,children:gettext('Submit')})})]}),this.state.errorMsg.length>0&&this.state.errorMsg.map(function(item,index){var errMessage='';if(item.email){errMessage=item.email+': '+item.error_msg;}else{errMessage=item;}return/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:3,children:/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errMessage})})},index);})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"share-list-container\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table-thead-hidden w-xs-200\",children:[thead,/*#__PURE__*/_jsx(UserList,{repoID:this.props.repoID,items:sharedItems,permissions:this.permissions,deleteShareItem:this.deleteShareItem,onChangeUserPermission:this.onChangeUserPermission})]})})]});}}]);return ShareToUser;}(React.Component);export default ShareToUser;","map":{"version":3,"names":["React","Fragment","gettext","isPro","Button","seafileAPI","Utils","toaster","UserSelect","SharePermissionEditor","jsx","_jsx","jsxs","_jsxs","UserItem","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","onMouseEnter","setState","isOperationShow","onMouseLeave","userAvatarOnMouseEnter","isUserDetailsPopoverOpen","userAvatarOnMouseLeave","deleteShareItem","item","user_info","name","onChangeUserPermission","permission","state","_createClass","key","value","render","currentPermission","getSharedPermission","tabIndex","onFocus","children","className","src","avatar_url","width","alt","nickname","contact_email","repoID","isTextMode","autoFocus","isEditIconShow","permissions","onPermissionChanged","role","concat","onClick","onKeyDown","title","Component","UserList","_React$Component2","_super2","apply","arguments","_this2","items","map","index","ShareToUser","_React$Component3","_super3","_this3","handleSelectChange","option","selectedOption","options","setPermission","shareToUser","users","path","itemPath","length","i","email","isGroupOwnedRepo","shareGroupOwnedRepoToUser","then","res","errorMsg","data","failed","success","sharedItem","user_name","user_email","sharedItems","refs","userSelect","clearSelect","catch","error","response","message","errMessage","push","shareFolder","username","deleteGroupOwnedRepoSharedUserItem","filter","getErrorMsg","danger","deleteShareToUserItem","modifyGroupOwnedRepoUserSharedPermission","updateSharedItems","updateShareToUserItemPermission","sharedItemUsername","is_admin","itemType","isRepoOwner","componentDidMount","_this4","listSharedItems","thead","ref","isMulti","placeholder","onSelectChange","enableAddCustomPermission","onAddCustomPermissionToggle","error_msg","colSpan"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/share-to-user.js"],"sourcesContent":["import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, isPro } from '../../utils/constants';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport UserSelect from '../user-select';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\nimport '../../css/invitations.css';\n\nimport '../../css/share-to-user.css';\n\nclass UserItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false,\n      isUserDetailsPopoverOpen: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  userAvatarOnMouseEnter = () => {\n    this.setState({isUserDetailsPopoverOpen: true});\n  };\n\n  userAvatarOnMouseLeave = () => {\n    this.setState({isUserDetailsPopoverOpen: false});\n  };\n\n  deleteShareItem = () => {\n    let item = this.props.item;\n    this.props.deleteShareItem(item.user_info.name);\n  };\n\n  onChangeUserPermission = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeUserPermission(item, permission);\n  };\n\n  render() {\n    let item = this.props.item;\n    let currentPermission = Utils.getSharedPermission(item);\n    const { isUserDetailsPopoverOpen } = this.state;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} tabIndex=\"0\" onFocus={this.onMouseEnter}>\n        <td className=\"name\">\n          <div className=\"position-relative\">\n            <img src={item.user_info.avatar_url}\n              width=\"24\" alt={item.user_info.nickname}\n              className=\"rounded-circle mr-2 cursor-pointer\"\n              onMouseEnter={this.userAvatarOnMouseEnter}\n              onMouseLeave={this.userAvatarOnMouseLeave} />\n            <span>{item.user_info.nickname}</span>\n            {isUserDetailsPopoverOpen && (\n              <div className=\"user-details-popover p-4 position-absolute w-100 mt-1\">\n                <div className=\"user-details-main pb-3\">\n                  <img src={item.user_info.avatar_url} width=\"40\"\n                    alt={item.user_info.nickname}\n                    className=\"rounded-circle mr-2\" />\n                  <span className=\"user-details-name\">{item.user_info.nickname}</span>\n                </div>\n                <dl className=\"m-0 mt-3 d-flex\">\n                  <dt className=\"m-0 mr-3\">{gettext('Email')}</dt>\n                  <dd className=\"m-0\">{item.user_info.contact_email}</dd>\n                </dl>\n              </div>\n            )}\n          </div>\n        </td>\n        <td>\n          <SharePermissionEditor\n            repoID={this.props.repoID}\n            isTextMode={true}\n            autoFocus={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={currentPermission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeUserPermission}\n          />\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteShareItem}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nUserItem.propTypes = {\n  repoID: PropTypes.string.isRequired,\n  item: PropTypes.object.isRequired,\n  permissions: PropTypes.array.isRequired,\n  deleteShareItem: PropTypes.func.isRequired,\n  onChangeUserPermission: PropTypes.func.isRequired,\n};\n\nclass UserList extends React.Component {\n\n  render() {\n    let items = this.props.items;\n    return (\n      <tbody>\n        {items.map((item, index) => {\n          return (\n            <UserItem\n              key={index}\n              item={item}\n              repoID={this.props.repoID}\n              permissions={this.props.permissions}\n              deleteShareItem={this.props.deleteShareItem}\n              onChangeUserPermission={this.props.onChangeUserPermission}\n            />\n          );\n        })}\n      </tbody>\n    );\n  }\n}\n\nUserList.propTypes = {\n  repoID: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  permissions: PropTypes.array.isRequired,\n  deleteShareItem: PropTypes.func.isRequired,\n  onChangeUserPermission: PropTypes.func.isRequired,\n};\n\nconst propTypes = {\n  isGroupOwnedRepo: PropTypes.bool,\n  itemPath: PropTypes.string.isRequired,\n  itemType: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  onAddCustomPermissionToggle: PropTypes.func,\n};\n\nclass ShareToUser extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errorMsg: [],\n      permission: 'rw',\n      sharedItems: []\n    };\n    this.options = [];\n    this.permissions = [];\n    let { itemType, isRepoOwner } = props;\n    if (itemType === 'library') {\n      this.permissions = isRepoOwner ? ['rw', 'r', 'admin', 'cloud-edit', 'preview'] : ['rw', 'r', 'cloud-edit', 'preview'];\n    } else if (this.props.itemType === 'dir') {\n      this.permissions = ['rw', 'r', 'cloud-edit', 'preview'];\n    }\n    if (!isPro) {\n      this.permissions = ['rw', 'r'];\n    }\n    if (this.props.isGroupOwnedRepo) {\n      this.permissions = ['rw', 'r', 'cloud-edit', 'preview'];\n    }\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({selectedOption: option});\n    this.options = [];\n  };\n\n  componentDidMount() {\n    let path = this.props.itemPath;\n    let repoID = this.props.repoID;\n    seafileAPI.listSharedItems(repoID, path, 'user').then((res) => {\n      if(res.data.length !== 0) {\n        this.setState({sharedItems: res.data});\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  };\n\n  shareToUser = () => {\n    let users = [];\n    let path = this.props.itemPath;\n    let repoID = this.props.repoID;\n    if (this.state.selectedOption && this.state.selectedOption.length > 0 ) {\n      for (let i = 0; i < this.state.selectedOption.length; i ++) {\n        users[i] = this.state.selectedOption[i].email;\n      }\n    }\n    if (this.props.isGroupOwnedRepo) {\n      seafileAPI.shareGroupOwnedRepoToUser(repoID, this.state.permission, users, path).then(res => {\n        let errorMsg = [];\n        if (res.data.failed.length > 0) {\n          for (let i = 0 ; i < res.data.failed.length ; i++) {\n            errorMsg[i] = res.data.failed[i];\n          }\n        }\n        // todo modify api\n        let items = res.data.success.map(item => {\n          let sharedItem = {\n            'user_info': { 'nickname': item.user_name, 'name': item.user_email},\n            'permission': item.permission,\n            'share_type': 'user',\n          };\n          return sharedItem;\n        });\n        this.setState({\n          errorMsg: errorMsg,\n          sharedItems: this.state.sharedItems.concat(items),\n          selectedOption: null,\n          permission: 'rw',\n        });\n        this.refs.userSelect.clearSelect();\n      }).catch(error => {\n        if (error.response) {\n          let message = gettext('Library can not be shared to owner.');\n          let errMessage = [];\n          errMessage.push(message);\n          this.setState({\n            errorMsg: errMessage,\n            selectedOption: null,\n          });\n        }\n      });\n    } else {\n      seafileAPI.shareFolder(repoID, path, 'user', this.state.permission, users).then(res => {\n        let errorMsg = [];\n        if (res.data.failed.length > 0) {\n          for (let i = 0 ; i < res.data.failed.length ; i++) {\n            errorMsg[i] = res.data.failed[i];\n          }\n        }\n        this.setState({\n          errorMsg: errorMsg,\n          sharedItems: this.state.sharedItems.concat(res.data.success),\n          selectedOption: null,\n          permission: 'rw',\n        });\n        this.refs.userSelect.clearSelect();\n      }).catch(error => {\n        if (error.response) {\n          let message = gettext('Library can not be shared to owner.');\n          let errMessage = [];\n          errMessage.push(message);\n          this.setState({\n            errorMsg: errMessage,\n            selectedOption: null,\n          });\n        }\n      });\n    }\n  };\n\n  deleteShareItem = (username) => {\n    let path = this.props.itemPath;\n    let repoID = this.props.repoID;\n    if (this.props.isGroupOwnedRepo) {\n      seafileAPI.deleteGroupOwnedRepoSharedUserItem(repoID, username, path).then(res => {\n        this.setState({\n          sharedItems: this.state.sharedItems.filter( item => { return item.user_info.name !== username; })\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.deleteShareToUserItem(repoID, path, 'user', username).then(res => {\n        this.setState({\n          sharedItems: this.state.sharedItems.filter( item => { return item.user_info.name !== username; })\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  onChangeUserPermission = (item, permission) => {\n    let path = this.props.itemPath;\n    let repoID = this.props.repoID;\n    let username = item.user_info.name;\n    if (this.props.isGroupOwnedRepo) {\n      seafileAPI.modifyGroupOwnedRepoUserSharedPermission(repoID, permission, username, path).then(() => {\n        this.updateSharedItems(item, permission);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.updateShareToUserItemPermission(repoID, path, 'user', username, permission).then(() => {\n        this.updateSharedItems(item, permission);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  updateSharedItems = (item, permission) => {\n    let username = item.user_info.name;\n    let sharedItems = this.state.sharedItems.map(sharedItem => {\n      let sharedItemUsername = sharedItem.user_info.name;\n      if (username === sharedItemUsername) {\n        sharedItem.permission = permission;\n        sharedItem.is_admin = permission === 'admin' ? true : false;\n      }\n      return sharedItem;\n    });\n    this.setState({sharedItems: sharedItems});\n  };\n\n  render() {\n    let { sharedItems } = this.state;\n    const thead = (\n      <thead>\n        <tr>\n          <th width=\"47%\">{gettext('User')}</th>\n          <th width=\"35%\">{gettext('Permission')}</th>\n          <th width=\"18%\"></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        <table className=\"w-xs-200\">\n          {thead}\n          <tbody>\n            <tr>\n              <td>\n                <UserSelect\n                  ref=\"userSelect\"\n                  isMulti={true}\n                  className=\"reviewer-select\"\n                  placeholder={gettext('Search users')}\n                  onSelectChange={this.handleSelectChange}\n                />\n              </td>\n              <td>\n                <SharePermissionEditor\n                  repoID={this.props.repoID}\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                  enableAddCustomPermission={isPro}\n                  onAddCustomPermissionToggle={this.props.onAddCustomPermissionToggle}\n                />\n              </td>\n              <td>\n                <Button onClick={this.shareToUser}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = '';\n                if (item.email) {\n                  errMessage = item.email + ': ' + item.error_msg;\n                } else {\n                  errMessage = item;\n                }\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden w-xs-200\">\n            {thead}\n            <UserList\n              repoID={this.props.repoID}\n              items={sharedItems}\n              permissions={this.permissions}\n              deleteShareItem={this.deleteShareItem}\n              onChangeUserPermission={this.onChangeUserPermission}\n            />\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nShareToUser.propTypes = propTypes;\n\nexport default ShareToUser;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}