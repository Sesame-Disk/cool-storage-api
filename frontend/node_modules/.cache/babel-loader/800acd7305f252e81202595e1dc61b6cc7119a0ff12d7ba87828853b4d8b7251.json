{"ast":null,"code":"\"use strict\";\n\nvar _objectSpread = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/objectSpread2.js\").default;\nvar _slicedToArray = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.selectCellByGrid = exports.pasteContentIntoTable = exports.jumpOutTableInEditor = exports.isSelectingMultipleTables = exports.isInTable = exports.isDisabled = exports.insertTable = exports.getTableFocusingInfos = exports.getTableEntry = exports.getSelectedTableCells = exports.getSelectGrid = exports.getContextMenuPosition = void 0;\nvar _slate = require(\"slate\");\nvar _slateReact = require(\"slate-react\");\nvar _isUrl = _interopRequireDefault(require(\"is-url\"));\nvar _model = require(\"./model\");\nvar _elementTypes = require(\"../../constants/element-types\");\nvar _core = require(\"../../core\");\nvar _getEventTransfer = _interopRequireDefault(require(\"../../../containers/custom/get-event-transfer\"));\nvar _deserializeHtml = require(\"../../../utils/deserialize-html\");\nvar _common = require(\"../../../utils/common\");\nvar _helper = require(\"../link/helper\");\nvar _helper2 = require(\"../image/helper\");\nvar isDisabled = function isDisabled(editor, readonly) {\n  var selection = editor.selection;\n  if (readonly || !selection) return true;\n  var disableTypes = [_elementTypes.TABLE, _elementTypes.TABLE_ROW, _elementTypes.TABLE_CELL, _elementTypes.FORMULA, _elementTypes.CODE_BLOCK, _elementTypes.COLUMN, _elementTypes.BLOCKQUOTE, _elementTypes.UNORDERED_LIST, _elementTypes.ORDERED_LIST, _elementTypes.LIST_ITEM];\n  var _slate$Editor$nodes = _slate.Editor.nodes(editor, {\n      match: function match(n) {\n        return disableTypes.includes(n.type);\n      },\n      mode: 'highest'\n    }),\n    _slate$Editor$nodes2 = _slicedToArray(_slate$Editor$nodes, 1),\n    nodeEntry = _slate$Editor$nodes2[0];\n  if (nodeEntry) return true;\n  return false;\n};\nexports.isDisabled = isDisabled;\nvar isInTable = function isInTable(editor) {\n  var selection = editor.selection;\n  if (!selection) return false;\n  var _getTableEntry = getTableEntry(editor),\n    _getTableEntry2 = _slicedToArray(_getTableEntry, 1),\n    nodeEntry = _getTableEntry2[0];\n  if (!nodeEntry) return false;\n  return true;\n};\nexports.isInTable = isInTable;\nvar insertTable = function insertTable(editor, rowNum, columnNum) {\n  var table = (0, _model.generateTable)({\n    rowNum: rowNum,\n    columnNum: columnNum\n  });\n  var selection = editor.selection;\n  _slate.Editor.insertNode(editor, table, {\n    select: false\n  });\n  if (_slate.Range.isCollapsed(selection)) {\n    var _slate$Editor$nodes3 = _slate.Editor.nodes(editor, {\n        at: selection.anchor.path,\n        match: function match(n) {\n          return n.type === _elementTypes.PARAGRAPH && _slate.Node.string(n).length === 0;\n        }\n      }),\n      _slate$Editor$nodes4 = _slicedToArray(_slate$Editor$nodes3, 1),\n      paragraphNodeEntry = _slate$Editor$nodes4[0];\n    if (paragraphNodeEntry) {\n      var paragraphPath = paragraphNodeEntry[1];\n      if (paragraphPath.length === 1 && paragraphPath[0] !== 0) {\n        _slate.Transforms.removeNodes(editor, {\n          at: paragraphPath\n        });\n      }\n    }\n  }\n\n  // Auto focus at the first cell in table\n  var _slate$Editor$nodes5 = _slate.Editor.nodes(editor, {\n      match: function match(node) {\n        return node.id === table.id;\n      },\n      mode: 'highest'\n    }),\n    _slate$Editor$nodes6 = _slicedToArray(_slate$Editor$nodes5, 1),\n    nodeEntry = _slate$Editor$nodes6[0];\n  var focusPoint = _slate.Editor.start(editor, nodeEntry[1]);\n  (0, _core.focusEditor)(editor, focusPoint);\n};\nexports.insertTable = insertTable;\nvar getTableFocusingInfos = function getTableFocusingInfos(editor) {\n  if (!isInTable(editor)) return null;\n  var nodeEntries = _slate.Editor.nodes(editor, {\n    match: function match(n) {\n      return [_elementTypes.TABLE, _elementTypes.TABLE_ROW, _elementTypes.TABLE_CELL].includes(n.type);\n    }\n  });\n  var nodeEntryList = Array.from(nodeEntries);\n  var tableEntry = nodeEntryList[0],\n    rowEntry = nodeEntryList[1],\n    cellEntry = nodeEntryList[2];\n  var columnIndex = cellEntry[1].at(-1);\n  var rowIndex = cellEntry[1].at(-2);\n  return {\n    cellEntry: cellEntry,\n    tableEntry: tableEntry,\n    rowEntry: rowEntry,\n    columnIndex: columnIndex,\n    rowIndex: rowIndex\n  };\n};\nexports.getTableFocusingInfos = getTableFocusingInfos;\nvar selectCellByGrid = function selectCellByGrid(editor, rowIndex, colIndex) {\n  var _getTableFocusingInfo = getTableFocusingInfos(editor),\n    _getTableFocusingInfo2 = _slicedToArray(_getTableFocusingInfo.tableEntry, 2),\n    tablePath = _getTableFocusingInfo2[1];\n  var selectRange = _slate.Editor.range(editor, tablePath.concat(rowIndex, colIndex));\n  (0, _core.focusEditor)(editor, selectRange);\n};\nexports.selectCellByGrid = selectCellByGrid;\nvar getSelectedTableCells = function getSelectedTableCells(editor) {\n  var _getTableEntry3 = getTableEntry(editor),\n    _getTableEntry4 = _slicedToArray(_getTableEntry3, 1),\n    tableEntry = _getTableEntry4[0];\n  if (!tableEntry) return null;\n  var _tableEntry = _slicedToArray(tableEntry, 1),\n    tableNode = _tableEntry[0];\n  var tableRows = tableNode.children;\n  var selectGrid = getSelectGrid(editor);\n  if (!selectGrid) return null;\n  var startRowIndex = selectGrid.startRowIndex,\n    endRowIndex = selectGrid.endRowIndex,\n    startColIndex = selectGrid.startColIndex,\n    endColIndex = selectGrid.endColIndex;\n  var selectedTableRows = [];\n  for (var rowIndex = startRowIndex; rowIndex <= endRowIndex; rowIndex++) {\n    var currentRow = tableRows[rowIndex];\n    var selectedTableCells = [];\n    for (var colIndex = startColIndex; colIndex <= endColIndex; colIndex++) {\n      var currentCell = currentRow.children[colIndex];\n      selectedTableCells.push(currentCell);\n    }\n    selectedTableRows.push((0, _model.generateTableRow)({\n      childrenOrText: selectedTableCells\n    }));\n    selectedTableCells = [];\n  }\n  return [(0, _model.generateTable)({\n    childrenOrText: selectedTableRows\n  })];\n};\nexports.getSelectedTableCells = getSelectedTableCells;\nvar getSelectGrid = function getSelectGrid(editor) {\n  var _getTableEntry5 = getTableEntry(editor),\n    _getTableEntry6 = _slicedToArray(_getTableEntry5, 1),\n    tableEntry = _getTableEntry6[0];\n  if (!tableEntry) return null;\n  var selectedTableCells = document.querySelectorAll('.selected-cell');\n  if (selectedTableCells.length === 0) return null;\n  var node = _slateReact.ReactEditor.toSlateNode(editor, selectedTableCells[0]);\n  var nodePath = _slateReact.ReactEditor.findPath(editor, node);\n  if (!_slate.Path.isAncestor(tableEntry[1], nodePath)) return null;\n  var selectGrid = Array.from(selectedTableCells).reduce(function (grid, cell) {\n    var startRowIndex = grid.startRowIndex,\n      endRowIndex = grid.endRowIndex,\n      startColIndex = grid.startColIndex,\n      endColIndex = grid.endColIndex;\n    var colIndex = cell.cellIndex;\n    var rowIndex = cell.parentNode.rowIndex;\n    if (endRowIndex === -1 || rowIndex > endRowIndex) grid.endRowIndex = rowIndex;\n    if (startRowIndex === -1 || rowIndex < startRowIndex) grid.startRowIndex = rowIndex;\n    if (endColIndex === -1 || colIndex > endColIndex) grid.endColIndex = colIndex;\n    if (startColIndex === -1 || colIndex < startColIndex) grid.startColIndex = colIndex;\n    return _objectSpread({}, grid);\n  }, {\n    startRowIndex: -1,\n    endRowIndex: -1,\n    startColIndex: -1,\n    endColIndex: -1\n  });\n  return selectGrid;\n};\nexports.getSelectGrid = getSelectGrid;\nvar pasteContentIntoTable = function pasteContentIntoTable(editor, content) {\n  var data = content;\n  var _ref = (0, _getEventTransfer.default)(data),\n    fragment = _ref.fragment,\n    text = _ref.text,\n    type = _ref.type,\n    html = _ref.html;\n  var newText = text.replace(/\\r\\n|\\n/g, ' ');\n  if (!fragment && type === 'text') {\n    if ((0, _isUrl.default)(text) && !(0, _common.isImage)(text)) {\n      var link = (0, _helper.generateLinkNode)(text, text);\n      _slate.Editor.insertFragment(editor, [link], {\n        select: true\n      });\n      return;\n    } else if ((0, _isUrl.default)(text) && (0, _common.isImage)(text)) {\n      (0, _helper2.insertImage)(editor, text);\n      return;\n    }\n    _slate.Transforms.insertText(editor, newText);\n    return;\n  }\n  if (type === 'html') {\n    fragment = (0, _deserializeHtml.htmlDeserializer)(html);\n  }\n  if (fragment.length === 1) {\n    if (fragment[0].type === _elementTypes.TABLE) {\n      var clipboardTable = fragment[0];\n      var _getTableFocusingInfo3 = getTableFocusingInfos(editor),\n        _getTableFocusingInfo4 = _slicedToArray(_getTableFocusingInfo3.tableEntry, 2),\n        tableNode = _getTableFocusingInfo4[0],\n        tablePath = _getTableFocusingInfo4[1],\n        _getTableFocusingInfo5 = _slicedToArray(_getTableFocusingInfo3.rowEntry, 1),\n        rowNode = _getTableFocusingInfo5[0],\n        rowIndex = _getTableFocusingInfo3.rowIndex,\n        columnIndex = _getTableFocusingInfo3.columnIndex;\n      var tableWidth = rowNode.children.length;\n      var tableHeight = tableNode.children.length;\n      clipboardTable.children.some(function (clipRow, clipRowIndex) {\n        var currentInsertPath = tablePath.concat(rowIndex + clipRowIndex + rowIndex);\n        // Out of table\n        if (rowIndex + clipRowIndex >= tableHeight + 1) return true;\n        clipRow.children.some(function (clipCol, clipColIndex) {\n          // Out of table\n          if (columnIndex + clipColIndex >= tableWidth + 1) return true;\n          var currentCellPath = currentInsertPath.concat(columnIndex + clipColIndex);\n          var currentCellChildPath = currentCellPath.concat(0);\n          _slate.Transforms.removeNodes(editor, {\n            at: currentCellChildPath\n          });\n          if (clipCol.children.type !== _elementTypes.PARAGRAPH) {\n            var _text = _slate.Node.string(clipCol);\n            var newChild = (0, _core.generateElement)(_elementTypes.PARAGRAPH, {\n              childrenOrText: _text\n            });\n            _slate.Transforms.insertNodes(editor, newChild, {\n              at: currentCellChildPath\n            });\n          } else {\n            _slate.Transforms.insertNodes(editor, clipCol.children, {\n              at: currentCellChildPath\n            });\n          }\n          return false;\n        });\n        return false;\n      });\n    } else if (fragment[0].type === _elementTypes.PARAGRAPH) {\n      (0, _slate.insertFragment)(editor, fragment);\n    } else {\n      _slate.Transforms.insertText(editor, text.replace(/\\r\\n|\\n/g, ' '));\n    }\n  }\n};\nexports.pasteContentIntoTable = pasteContentIntoTable;\nvar jumpOutTableInEditor = function jumpOutTableInEditor(editor) {\n  var _getTableEntry7 = getTableEntry(editor),\n    _getTableEntry8 = _slicedToArray(_getTableEntry7, 1),\n    tableEntry = _getTableEntry8[0];\n  if (!tableEntry) return;\n  var _tableEntry2 = _slicedToArray(tableEntry, 2),\n    tablePath = _tableEntry2[1];\n  var tableParentPath = _slate.Path.parent(tablePath);\n  var insertPath = tableParentPath.concat(tablePath.at(-1) + 1);\n  _slate.Transforms.insertNodes(editor, (0, _core.generateElement)(_elementTypes.PARAGRAPH), {\n    at: insertPath\n  });\n  _slate.Transforms.select(editor, {\n    path: insertPath.concat(0),\n    offset: 0\n  });\n};\nexports.jumpOutTableInEditor = jumpOutTableInEditor;\nvar getTableEntry = function getTableEntry(editor) {\n  return _slate.Editor.nodes(editor, {\n    match: function match(n) {\n      return n.type === _elementTypes.TABLE;\n    },\n    mode: 'highest'\n  });\n};\nexports.getTableEntry = getTableEntry;\nvar isSelectingMultipleTables = function isSelectingMultipleTables(editor) {\n  var selectedTableCount = 0;\n  var selectedElems = (0, _core.getSelectedElems)(editor);\n  var isSelectedMultiple = selectedElems.some(function (elem) {\n    if (elem.type === _elementTypes.TABLE) selectedTableCount++;\n    if (selectedTableCount > 1) return true;\n    return false;\n  });\n  return isSelectedMultiple;\n};\nexports.isSelectingMultipleTables = isSelectingMultipleTables;\nvar getContextMenuPosition = function getContextMenuPosition(event, tableRef) {\n  var menuHeight = 240;\n  var menuWidth = 350;\n  var _document$body = document.body,\n    clientHeight = _document$body.clientHeight,\n    clientWidth = _document$body.clientWidth; // page\n  var _tableRef$current$get = tableRef.current.getBoundingClientRect(),\n    x = _tableRef$current$get.x,\n    y = _tableRef$current$get.y; // table\n  var clientY = event.clientY,\n    clientX = event.clientX; // cursor\n\n  var isBeyondBottom = clientY + menuHeight > clientHeight;\n  var isBeyondRight = clientX + menuWidth > clientWidth;\n  var defaultTop = clientY - y;\n  var defaultLeft = clientX - x;\n  var top = 0;\n  var left = 0;\n  if (isBeyondBottom) {\n    var hiddenHeight = menuHeight - (clientHeight - clientY);\n    top = defaultTop - hiddenHeight;\n  }\n  if (isBeyondRight) {\n    var hiddenWidth = menuWidth - (clientWidth - clientX);\n    left = defaultLeft - hiddenWidth;\n  }\n  if (!isBeyondBottom && !isBeyondRight) {\n    return {\n      top: defaultTop,\n      left: defaultLeft\n    };\n  }\n  if (isBeyondBottom && isBeyondRight) {\n    return {\n      top: top,\n      left: left\n    };\n  }\n  if (isBeyondBottom) {\n    return {\n      top: top,\n      left: defaultLeft\n    };\n  }\n  return {\n    top: defaultTop,\n    left: left\n  };\n};\nexports.getContextMenuPosition = getContextMenuPosition;","map":{"version":3,"names":["_objectSpread","require","default","_slicedToArray","_interopRequireDefault","Object","defineProperty","exports","value","selectCellByGrid","pasteContentIntoTable","jumpOutTableInEditor","isSelectingMultipleTables","isInTable","isDisabled","insertTable","getTableFocusingInfos","getTableEntry","getSelectedTableCells","getSelectGrid","getContextMenuPosition","_slate","_slateReact","_isUrl","_model","_elementTypes","_core","_getEventTransfer","_deserializeHtml","_common","_helper","_helper2","editor","readonly","selection","disableTypes","TABLE","TABLE_ROW","TABLE_CELL","FORMULA","CODE_BLOCK","COLUMN","BLOCKQUOTE","UNORDERED_LIST","ORDERED_LIST","LIST_ITEM","_slate$Editor$nodes","Editor","nodes","match","n","includes","type","mode","_slate$Editor$nodes2","nodeEntry","_getTableEntry","_getTableEntry2","rowNum","columnNum","table","generateTable","insertNode","select","Range","isCollapsed","_slate$Editor$nodes3","at","anchor","path","PARAGRAPH","Node","string","length","_slate$Editor$nodes4","paragraphNodeEntry","paragraphPath","Transforms","removeNodes","_slate$Editor$nodes5","node","id","_slate$Editor$nodes6","focusPoint","start","focusEditor","nodeEntries","nodeEntryList","Array","from","tableEntry","rowEntry","cellEntry","columnIndex","rowIndex","colIndex","_getTableFocusingInfo","_getTableFocusingInfo2","tablePath","selectRange","range","concat","_getTableEntry3","_getTableEntry4","_tableEntry","tableNode","tableRows","children","selectGrid","startRowIndex","endRowIndex","startColIndex","endColIndex","selectedTableRows","currentRow","selectedTableCells","currentCell","push","generateTableRow","childrenOrText","_getTableEntry5","_getTableEntry6","document","querySelectorAll","ReactEditor","toSlateNode","nodePath","findPath","Path","isAncestor","reduce","grid","cell","cellIndex","parentNode","content","data","_ref","fragment","text","html","newText","replace","isImage","link","generateLinkNode","insertFragment","insertImage","insertText","htmlDeserializer","clipboardTable","_getTableFocusingInfo3","_getTableFocusingInfo4","_getTableFocusingInfo5","rowNode","tableWidth","tableHeight","some","clipRow","clipRowIndex","currentInsertPath","clipCol","clipColIndex","currentCellPath","currentCellChildPath","newChild","generateElement","insertNodes","_getTableEntry7","_getTableEntry8","_tableEntry2","tableParentPath","parent","insertPath","offset","selectedTableCount","selectedElems","getSelectedElems","isSelectedMultiple","elem","event","tableRef","menuHeight","menuWidth","_document$body","body","clientHeight","clientWidth","_tableRef$current$get","current","getBoundingClientRect","x","y","clientY","clientX","isBeyondBottom","isBeyondRight","defaultTop","defaultLeft","top","left","hiddenHeight","hiddenWidth"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/extension/plugins/table/helper.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.selectCellByGrid = exports.pasteContentIntoTable = exports.jumpOutTableInEditor = exports.isSelectingMultipleTables = exports.isInTable = exports.isDisabled = exports.insertTable = exports.getTableFocusingInfos = exports.getTableEntry = exports.getSelectedTableCells = exports.getSelectGrid = exports.getContextMenuPosition = void 0;\nvar _slate = require(\"slate\");\nvar _slateReact = require(\"slate-react\");\nvar _isUrl = _interopRequireDefault(require(\"is-url\"));\nvar _model = require(\"./model\");\nvar _elementTypes = require(\"../../constants/element-types\");\nvar _core = require(\"../../core\");\nvar _getEventTransfer = _interopRequireDefault(require(\"../../../containers/custom/get-event-transfer\"));\nvar _deserializeHtml = require(\"../../../utils/deserialize-html\");\nvar _common = require(\"../../../utils/common\");\nvar _helper = require(\"../link/helper\");\nvar _helper2 = require(\"../image/helper\");\nconst isDisabled = (editor, readonly) => {\n  const {\n    selection\n  } = editor;\n  if (readonly || !selection) return true;\n  const disableTypes = [_elementTypes.TABLE, _elementTypes.TABLE_ROW, _elementTypes.TABLE_CELL, _elementTypes.FORMULA, _elementTypes.CODE_BLOCK, _elementTypes.COLUMN, _elementTypes.BLOCKQUOTE, _elementTypes.UNORDERED_LIST, _elementTypes.ORDERED_LIST, _elementTypes.LIST_ITEM];\n  const [nodeEntry] = _slate.Editor.nodes(editor, {\n    match: n => disableTypes.includes(n.type),\n    mode: 'highest'\n  });\n  if (nodeEntry) return true;\n  return false;\n};\nexports.isDisabled = isDisabled;\nconst isInTable = editor => {\n  const {\n    selection\n  } = editor;\n  if (!selection) return false;\n  const [nodeEntry] = getTableEntry(editor);\n  if (!nodeEntry) return false;\n  return true;\n};\nexports.isInTable = isInTable;\nconst insertTable = (editor, rowNum, columnNum) => {\n  const table = (0, _model.generateTable)({\n    rowNum,\n    columnNum\n  });\n  const {\n    selection\n  } = editor;\n  _slate.Editor.insertNode(editor, table, {\n    select: false\n  });\n  if (_slate.Range.isCollapsed(selection)) {\n    const [paragraphNodeEntry] = _slate.Editor.nodes(editor, {\n      at: selection.anchor.path,\n      match: n => n.type === _elementTypes.PARAGRAPH && _slate.Node.string(n).length === 0\n    });\n    if (paragraphNodeEntry) {\n      const paragraphPath = paragraphNodeEntry[1];\n      if (paragraphPath.length === 1 && paragraphPath[0] !== 0) {\n        _slate.Transforms.removeNodes(editor, {\n          at: paragraphPath\n        });\n      }\n    }\n  }\n\n  // Auto focus at the first cell in table\n  const [nodeEntry] = _slate.Editor.nodes(editor, {\n    match: node => node.id === table.id,\n    mode: 'highest'\n  });\n  const focusPoint = _slate.Editor.start(editor, nodeEntry[1]);\n  (0, _core.focusEditor)(editor, focusPoint);\n};\nexports.insertTable = insertTable;\nconst getTableFocusingInfos = editor => {\n  if (!isInTable(editor)) return null;\n  const nodeEntries = _slate.Editor.nodes(editor, {\n    match: n => [_elementTypes.TABLE, _elementTypes.TABLE_ROW, _elementTypes.TABLE_CELL].includes(n.type)\n  });\n  const nodeEntryList = Array.from(nodeEntries);\n  const [tableEntry, rowEntry, cellEntry] = nodeEntryList;\n  const columnIndex = cellEntry[1].at(-1);\n  const rowIndex = cellEntry[1].at(-2);\n  return {\n    cellEntry,\n    tableEntry,\n    rowEntry,\n    columnIndex,\n    rowIndex\n  };\n};\nexports.getTableFocusingInfos = getTableFocusingInfos;\nconst selectCellByGrid = (editor, rowIndex, colIndex) => {\n  const {\n    tableEntry: [, tablePath]\n  } = getTableFocusingInfos(editor);\n  const selectRange = _slate.Editor.range(editor, tablePath.concat(rowIndex, colIndex));\n  (0, _core.focusEditor)(editor, selectRange);\n};\nexports.selectCellByGrid = selectCellByGrid;\nconst getSelectedTableCells = editor => {\n  const [tableEntry] = getTableEntry(editor);\n  if (!tableEntry) return null;\n  const [tableNode] = tableEntry;\n  const tableRows = tableNode.children;\n  const selectGrid = getSelectGrid(editor);\n  if (!selectGrid) return null;\n  const {\n    startRowIndex,\n    endRowIndex,\n    startColIndex,\n    endColIndex\n  } = selectGrid;\n  const selectedTableRows = [];\n  for (let rowIndex = startRowIndex; rowIndex <= endRowIndex; rowIndex++) {\n    const currentRow = tableRows[rowIndex];\n    let selectedTableCells = [];\n    for (let colIndex = startColIndex; colIndex <= endColIndex; colIndex++) {\n      const currentCell = currentRow.children[colIndex];\n      selectedTableCells.push(currentCell);\n    }\n    selectedTableRows.push((0, _model.generateTableRow)({\n      childrenOrText: selectedTableCells\n    }));\n    selectedTableCells = [];\n  }\n  return [(0, _model.generateTable)({\n    childrenOrText: selectedTableRows\n  })];\n};\nexports.getSelectedTableCells = getSelectedTableCells;\nconst getSelectGrid = editor => {\n  const [tableEntry] = getTableEntry(editor);\n  if (!tableEntry) return null;\n  const selectedTableCells = document.querySelectorAll('.selected-cell');\n  if (selectedTableCells.length === 0) return null;\n  const node = _slateReact.ReactEditor.toSlateNode(editor, selectedTableCells[0]);\n  const nodePath = _slateReact.ReactEditor.findPath(editor, node);\n  if (!_slate.Path.isAncestor(tableEntry[1], nodePath)) return null;\n  const selectGrid = Array.from(selectedTableCells).reduce((grid, cell) => {\n    const {\n      startRowIndex,\n      endRowIndex,\n      startColIndex,\n      endColIndex\n    } = grid;\n    const {\n      cellIndex: colIndex\n    } = cell;\n    const {\n      rowIndex\n    } = cell.parentNode;\n    if (endRowIndex === -1 || rowIndex > endRowIndex) grid.endRowIndex = rowIndex;\n    if (startRowIndex === -1 || rowIndex < startRowIndex) grid.startRowIndex = rowIndex;\n    if (endColIndex === -1 || colIndex > endColIndex) grid.endColIndex = colIndex;\n    if (startColIndex === -1 || colIndex < startColIndex) grid.startColIndex = colIndex;\n    return {\n      ...grid\n    };\n  }, {\n    startRowIndex: -1,\n    endRowIndex: -1,\n    startColIndex: -1,\n    endColIndex: -1\n  });\n  return selectGrid;\n};\nexports.getSelectGrid = getSelectGrid;\nconst pasteContentIntoTable = (editor, content) => {\n  const data = content;\n  let {\n    fragment,\n    text,\n    type,\n    html\n  } = (0, _getEventTransfer.default)(data);\n  const newText = text.replace(/\\r\\n|\\n/g, ' ');\n  if (!fragment && type === 'text') {\n    if ((0, _isUrl.default)(text) && !(0, _common.isImage)(text)) {\n      const link = (0, _helper.generateLinkNode)(text, text);\n      _slate.Editor.insertFragment(editor, [link], {\n        select: true\n      });\n      return;\n    } else if ((0, _isUrl.default)(text) && (0, _common.isImage)(text)) {\n      (0, _helper2.insertImage)(editor, text);\n      return;\n    }\n    _slate.Transforms.insertText(editor, newText);\n    return;\n  }\n  if (type === 'html') {\n    fragment = (0, _deserializeHtml.htmlDeserializer)(html);\n  }\n  if (fragment.length === 1) {\n    if (fragment[0].type === _elementTypes.TABLE) {\n      const clipboardTable = fragment[0];\n      const {\n        tableEntry: [tableNode, tablePath],\n        rowEntry: [rowNode],\n        rowIndex,\n        columnIndex\n      } = getTableFocusingInfos(editor);\n      const tableWidth = rowNode.children.length;\n      const tableHeight = tableNode.children.length;\n      clipboardTable.children.some((clipRow, clipRowIndex) => {\n        const currentInsertPath = tablePath.concat(rowIndex + clipRowIndex + rowIndex);\n        // Out of table\n        if (rowIndex + clipRowIndex >= tableHeight + 1) return true;\n        clipRow.children.some((clipCol, clipColIndex) => {\n          // Out of table\n          if (columnIndex + clipColIndex >= tableWidth + 1) return true;\n          const currentCellPath = currentInsertPath.concat(columnIndex + clipColIndex);\n          const currentCellChildPath = currentCellPath.concat(0);\n          _slate.Transforms.removeNodes(editor, {\n            at: currentCellChildPath\n          });\n          if (clipCol.children.type !== _elementTypes.PARAGRAPH) {\n            const text = _slate.Node.string(clipCol);\n            const newChild = (0, _core.generateElement)(_elementTypes.PARAGRAPH, {\n              childrenOrText: text\n            });\n            _slate.Transforms.insertNodes(editor, newChild, {\n              at: currentCellChildPath\n            });\n          } else {\n            _slate.Transforms.insertNodes(editor, clipCol.children, {\n              at: currentCellChildPath\n            });\n          }\n          return false;\n        });\n        return false;\n      });\n    } else if (fragment[0].type === _elementTypes.PARAGRAPH) {\n      (0, _slate.insertFragment)(editor, fragment);\n    } else {\n      _slate.Transforms.insertText(editor, text.replace(/\\r\\n|\\n/g, ' '));\n    }\n  }\n};\nexports.pasteContentIntoTable = pasteContentIntoTable;\nconst jumpOutTableInEditor = editor => {\n  const [tableEntry] = getTableEntry(editor);\n  if (!tableEntry) return;\n  const [, tablePath] = tableEntry;\n  const tableParentPath = _slate.Path.parent(tablePath);\n  const insertPath = tableParentPath.concat(tablePath.at(-1) + 1);\n  _slate.Transforms.insertNodes(editor, (0, _core.generateElement)(_elementTypes.PARAGRAPH), {\n    at: insertPath\n  });\n  _slate.Transforms.select(editor, {\n    path: insertPath.concat(0),\n    offset: 0\n  });\n};\nexports.jumpOutTableInEditor = jumpOutTableInEditor;\nconst getTableEntry = editor => {\n  return _slate.Editor.nodes(editor, {\n    match: n => n.type === _elementTypes.TABLE,\n    mode: 'highest'\n  });\n};\nexports.getTableEntry = getTableEntry;\nconst isSelectingMultipleTables = editor => {\n  let selectedTableCount = 0;\n  const selectedElems = (0, _core.getSelectedElems)(editor);\n  const isSelectedMultiple = selectedElems.some(elem => {\n    if (elem.type === _elementTypes.TABLE) selectedTableCount++;\n    if (selectedTableCount > 1) return true;\n    return false;\n  });\n  return isSelectedMultiple;\n};\nexports.isSelectingMultipleTables = isSelectingMultipleTables;\nconst getContextMenuPosition = (event, tableRef) => {\n  const menuHeight = 240;\n  const menuWidth = 350;\n  const {\n    clientHeight,\n    clientWidth\n  } = document.body; // page\n  const {\n    x,\n    y\n  } = tableRef.current.getBoundingClientRect(); // table\n  const {\n    clientY,\n    clientX\n  } = event; // cursor\n\n  const isBeyondBottom = clientY + menuHeight > clientHeight;\n  const isBeyondRight = clientX + menuWidth > clientWidth;\n  const defaultTop = clientY - y;\n  const defaultLeft = clientX - x;\n  let top = 0;\n  let left = 0;\n  if (isBeyondBottom) {\n    const hiddenHeight = menuHeight - (clientHeight - clientY);\n    top = defaultTop - hiddenHeight;\n  }\n  if (isBeyondRight) {\n    const hiddenWidth = menuWidth - (clientWidth - clientX);\n    left = defaultLeft - hiddenWidth;\n  }\n  if (!isBeyondBottom && !isBeyondRight) {\n    return {\n      top: defaultTop,\n      left: defaultLeft\n    };\n  }\n  if (isBeyondBottom && isBeyondRight) {\n    return {\n      top,\n      left\n    };\n  }\n  if (isBeyondBottom) {\n    return {\n      top,\n      left: defaultLeft\n    };\n  }\n  return {\n    top: defaultTop,\n    left\n  };\n};\nexports.getContextMenuPosition = getContextMenuPosition;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}