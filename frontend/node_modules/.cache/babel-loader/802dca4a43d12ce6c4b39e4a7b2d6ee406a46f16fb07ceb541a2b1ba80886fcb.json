{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{Modal,ModalHeader,ModalBody}from'reactstrap';import{gettext,contactEmail}from'../../utils/constants';import{seafileAPI}from'../../utils/seafile-api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ResetEncryptedRepoPasswordDialog=/*#__PURE__*/function(_React$Component){_inherits(ResetEncryptedRepoPasswordDialog,_React$Component);var _super=_createSuper(ResetEncryptedRepoPasswordDialog);function ResetEncryptedRepoPasswordDialog(props){var _this;_classCallCheck(this,ResetEncryptedRepoPasswordDialog);_this=_super.call(this,props);_this.state={errMessage:'',showLoading:true,showSuccess:false,showError:false};return _this;}_createClass(ResetEncryptedRepoPasswordDialog,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;seafileAPI.resetAndSendEncryptedRepoPassword(this.props.repoID).then(function(res){_this2.setState({showLoading:false});_this2.setState({showSuccess:true});}).catch(function(error){if(error.response){_this2.setState({errMessage:error.response.data.error_msg});_this2.setState({showLoading:false});_this2.setState({showError:true});}});}},{key:\"render\",value:function render(){var user_email='<strong>'+contactEmail+'</strong>';var message=gettext('New password has been sent to your email {mail}. Please check your mailbox. If you don’t receive the password, please check if your email address is properly configured.').replace('{mail}',user_email);return/*#__PURE__*/_jsxs(Modal,{isOpen:true,toggle:this.props.toggleDialog,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:this.props.toggleDialog,children:gettext('Reset library password')}),/*#__PURE__*/_jsxs(ModalBody,{children:[this.state.showLoading&&/*#__PURE__*/_jsx(\"span\",{children:gettext('Sending new password...')}),this.state.showSuccess&&/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:message}}),this.state.showError&&/*#__PURE__*/_jsx(\"span\",{className:\"err-message\",children:this.state.errMessage})]})]});}}]);return ResetEncryptedRepoPasswordDialog;}(React.Component);export default ResetEncryptedRepoPasswordDialog;","map":{"version":3,"names":["React","Modal","ModalHeader","ModalBody","gettext","contactEmail","seafileAPI","jsx","_jsx","jsxs","_jsxs","ResetEncryptedRepoPasswordDialog","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","state","errMessage","showLoading","showSuccess","showError","_createClass","key","value","componentDidMount","_this2","resetAndSendEncryptedRepoPassword","repoID","then","res","setState","catch","error","response","data","error_msg","render","user_email","message","replace","isOpen","toggle","toggleDialog","children","dangerouslySetInnerHTML","__html","className","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/reset-encrypted-repo-password-dialog.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext, contactEmail } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass ResetEncryptedRepoPasswordDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      errMessage: '',\n      showLoading: true,\n      showSuccess: false,\n      showError: false,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.resetAndSendEncryptedRepoPassword(this.props.repoID).then((res) => {\n      this.setState({showLoading: false});\n      this.setState({showSuccess: true});\n    }).catch((error) => {\n      if (error.response) {\n        this.setState({\n          errMessage: error.response.data.error_msg\n        });\n        this.setState({showLoading: false});\n        this.setState({showError: true});\n      }\n    });\n  }\n\n  render() {\n\n    let user_email = '<strong>' + contactEmail + '</strong>';\n    let message = gettext('New password has been sent to your email {mail}. Please check your mailbox. If you don’t receive the password, please check if your email address is properly configured.').replace('{mail}', user_email);\n\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          {gettext('Reset library password')}\n        </ModalHeader>\n        <ModalBody>\n          {this.state.showLoading && (\n            <span>{gettext('Sending new password...')}</span>\n          )}\n          {this.state.showSuccess && (\n            <div dangerouslySetInnerHTML={{__html:message}} />\n          )}\n          {this.state.showError && (\n            <span className=\"err-message\">{this.state.errMessage}</span>\n          )}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nResetEncryptedRepoPasswordDialog.propTypes = propTypes;\n\nexport default ResetEncryptedRepoPasswordDialog;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}