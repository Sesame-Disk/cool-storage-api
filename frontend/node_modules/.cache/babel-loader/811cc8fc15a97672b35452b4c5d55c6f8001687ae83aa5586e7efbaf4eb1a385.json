{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{Button,Modal,ModalHeader,ModalBody,ModalFooter,Input,Form,FormGroup,Label}from'reactstrap';import{gettext,orgID}from'../../utils/constants';import{seafileAPI}from'../../utils/seafile-api';import{Utils}from'../../utils/utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddRepoDialog=/*#__PURE__*/function(_React$Component){_inherits(AddRepoDialog,_React$Component);var _super=_createSuper(AddRepoDialog);function AddRepoDialog(props){var _this;_classCallCheck(this,AddRepoDialog);_this=_super.call(this,props);_this.handleSubmit=function(){var isValid=_this.validateName();if(isValid){seafileAPI.orgAdminAddDepartmentRepo(orgID,_this.props.groupID,_this.state.repoName.trim()).then(function(res){_this.props.toggle();_this.props.onRepoChanged();}).catch(function(error){var errorMsg=Utils.getErrorMsg(error);_this.setState({errMessage:errorMsg});});}};_this.validateName=function(){var errMessage='';var name=_this.state.repoName.trim();if(!name.length){errMessage=gettext('Name is required');_this.setState({errMessage:errMessage});return false;}return true;};_this.handleChange=function(e){_this.setState({repoName:e.target.value});};_this.handleKeyDown=function(e){if(e.key==='Enter'){_this.handleSubmit();e.preventDefault();}};_this.state={repoName:'',errMessage:''};return _this;}_createClass(AddRepoDialog,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(Modal,{isOpen:true,toggle:this.props.toggle,autoFocus:false,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:this.props.toggle,children:gettext('New Library')}),/*#__PURE__*/_jsxs(ModalBody,{children:[/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"repoName\",children:gettext('Name')}),/*#__PURE__*/_jsx(Input,{id:\"repoName\",onKeyDown:this.handleKeyDown,value:this.state.repoName,onChange:this.handleChange,autoFocus:true})]})}),this.state.errMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:this.state.errMessage})]}),/*#__PURE__*/_jsx(ModalFooter,{children:/*#__PURE__*/_jsx(Button,{color:\"primary\",onClick:this.handleSubmit,children:gettext('Submit')})})]});}}]);return AddRepoDialog;}(React.Component);export default AddRepoDialog;","map":{"version":3,"names":["React","Button","Modal","ModalHeader","ModalBody","ModalFooter","Input","Form","FormGroup","Label","gettext","orgID","seafileAPI","Utils","jsx","_jsx","jsxs","_jsxs","AddRepoDialog","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","handleSubmit","isValid","validateName","orgAdminAddDepartmentRepo","groupID","state","repoName","trim","then","res","toggle","onRepoChanged","catch","error","errorMsg","getErrorMsg","setState","errMessage","name","length","handleChange","e","target","value","handleKeyDown","key","preventDefault","_createClass","render","isOpen","autoFocus","children","for","id","onKeyDown","onChange","className","color","onClick","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-add-repo-dialog.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Form, FormGroup, Label } from 'reactstrap';\nimport { gettext, orgID } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  groupID: PropTypes.string,\n  onRepoChanged: PropTypes.func.isRequired,\n};\n\nclass AddRepoDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      errMessage: '',\n    };\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateName();\n    if (isValid) {\n      seafileAPI.orgAdminAddDepartmentRepo(orgID, this.props.groupID, this.state.repoName.trim()).then((res) => {\n        this.props.toggle();\n        this.props.onRepoChanged();\n      }).catch(error => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({ errMessage: errorMsg });\n      });\n    }\n  };\n\n  validateName = () => {\n    let errMessage = '';\n    const name = this.state.repoName.trim();\n    if (!name.length) {\n      errMessage = gettext('Name is required');\n      this.setState({ errMessage: errMessage });\n      return false;\n    }\n    return true;\n  };\n\n  handleChange = (e) => {\n    this.setState({\n      repoName: e.target.value,\n    });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('New Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repoName\">{gettext('Name')}</Label>\n              <Input\n                id=\"repoName\"\n                onKeyDown={this.handleKeyDown}\n                value={this.state.repoName}\n                onChange={this.handleChange}\n                autoFocus={true}\n              />\n            </FormGroup>\n          </Form>\n          { this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p> }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAddRepoDialog.propTypes = propTypes;\n\nexport default AddRepoDialog;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}