{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _reactDom = require(\"react-dom\");\nvar _reactI18next = require(\"react-i18next\");\nvar _eventBus = _interopRequireDefault(require(\"../../../../utils/event-bus\"));\nvar _helper = require(\"../helper\");\nvar _common = require(\"../../../../utils/common\");\nvar _eventTypes = require(\"../../../../constants/event-types\");\nvar _constants = require(\"../../../../constants\");\nvar LinkPopover = function LinkPopover(_ref) {\n  var linkUrl = _ref.linkUrl,\n    onClosePopover = _ref.onClosePopover,\n    popoverPosition = _ref.popoverPosition,\n    editor = _ref.editor;\n  var _ref2 = (0, _reactI18next.useTranslation)(_constants.TRANSLATE_NAMESPACE),\n    t = _ref2.t;\n  (0, _react.useEffect)(function () {\n    return function () {\n      // unregister click event before unmount\n      onClosePopover();\n    };\n  }, [onClosePopover]);\n  var onLinkClick = (0, _react.useCallback)(function (e) {\n    if (!(0, _common.isUrl)(linkUrl)) {\n      e.preventDefault();\n    }\n  }, [linkUrl]);\n  var onUnwrapLink = (0, _react.useCallback)(function (e) {\n    e.stopPropagation();\n    (0, _helper.unWrapLinkNode)(editor);\n  }, [editor]);\n  var onEditLink = (0, _react.useCallback)(function (e) {\n    e.stopPropagation();\n    var linkNode = (0, _helper.getLinkInfo)(editor);\n    if (!linkNode) {\n      onClosePopover();\n      return;\n    }\n    var linkTitle = linkNode.linkTitle,\n      linkUrl = linkNode.linkUrl;\n    var eventBus = _eventBus.default.getInstance();\n    eventBus.dispatch(_eventTypes.INTERNAL_EVENTS.ON_OPEN_LINK_MODAL, {\n      linkTitle: linkTitle,\n      linkUrl: linkUrl\n    });\n    onClosePopover();\n  }, [editor, onClosePopover]);\n  return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/(0, _reactDom.createPortal)( /*#__PURE__*/_react.default.createElement(\"div\", {\n    id: \"link-op-menu\",\n    className: \"sf-link-op-menu\",\n    style: popoverPosition\n  }, /*#__PURE__*/_react.default.createElement(\"a\", {\n    href: linkUrl,\n    onClick: onLinkClick,\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    className: \"sf-link-op-menu-link\"\n  }, t('Open_link')), /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"sf-link-op-icons d-flex \"\n  }, /*#__PURE__*/_react.default.createElement(\"span\", {\n    role: \"button\",\n    className: \"sf-link-op-icon\",\n    onClick: onEditLink\n  }, /*#__PURE__*/_react.default.createElement(\"i\", {\n    className: \"iconfont icon-rename\"\n  })), /*#__PURE__*/_react.default.createElement(\"span\", {\n    role: \"button\",\n    className: \"sf-link-op-icon\",\n    onClick: onUnwrapLink\n  }, /*#__PURE__*/_react.default.createElement(\"i\", {\n    className: \"iconfont icon-unlink\"\n  })))), document.body));\n};\nvar _default = exports.default = LinkPopover;","map":{"version":3,"names":["_interopRequireDefault","require","default","_interopRequireWildcard","Object","defineProperty","exports","value","_react","_reactDom","_reactI18next","_eventBus","_helper","_common","_eventTypes","_constants","LinkPopover","_ref","linkUrl","onClosePopover","popoverPosition","editor","_ref2","useTranslation","TRANSLATE_NAMESPACE","t","useEffect","onLinkClick","useCallback","e","isUrl","preventDefault","onUnwrapLink","stopPropagation","unWrapLinkNode","onEditLink","linkNode","getLinkInfo","linkTitle","eventBus","getInstance","dispatch","INTERNAL_EVENTS","ON_OPEN_LINK_MODAL","createElement","Fragment","createPortal","id","className","style","href","onClick","target","rel","role","document","body","_default"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/extension/plugins/link/render-elem/link-popover.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _reactDom = require(\"react-dom\");\nvar _reactI18next = require(\"react-i18next\");\nvar _eventBus = _interopRequireDefault(require(\"../../../../utils/event-bus\"));\nvar _helper = require(\"../helper\");\nvar _common = require(\"../../../../utils/common\");\nvar _eventTypes = require(\"../../../../constants/event-types\");\nvar _constants = require(\"../../../../constants\");\nconst LinkPopover = _ref => {\n  let {\n    linkUrl,\n    onClosePopover,\n    popoverPosition,\n    editor\n  } = _ref;\n  const {\n    t\n  } = (0, _reactI18next.useTranslation)(_constants.TRANSLATE_NAMESPACE);\n  (0, _react.useEffect)(() => {\n    return () => {\n      // unregister click event before unmount\n      onClosePopover();\n    };\n  }, [onClosePopover]);\n  const onLinkClick = (0, _react.useCallback)(e => {\n    if (!(0, _common.isUrl)(linkUrl)) {\n      e.preventDefault();\n    }\n  }, [linkUrl]);\n  const onUnwrapLink = (0, _react.useCallback)(e => {\n    e.stopPropagation();\n    (0, _helper.unWrapLinkNode)(editor);\n  }, [editor]);\n  const onEditLink = (0, _react.useCallback)(e => {\n    e.stopPropagation();\n    const linkNode = (0, _helper.getLinkInfo)(editor);\n    if (!linkNode) {\n      onClosePopover();\n      return;\n    }\n    const {\n      linkTitle,\n      linkUrl\n    } = linkNode;\n    const eventBus = _eventBus.default.getInstance();\n    eventBus.dispatch(_eventTypes.INTERNAL_EVENTS.ON_OPEN_LINK_MODAL, {\n      linkTitle,\n      linkUrl\n    });\n    onClosePopover();\n  }, [editor, onClosePopover]);\n  return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/(0, _reactDom.createPortal)( /*#__PURE__*/_react.default.createElement(\"div\", {\n    id: \"link-op-menu\",\n    className: \"sf-link-op-menu\",\n    style: popoverPosition\n  }, /*#__PURE__*/_react.default.createElement(\"a\", {\n    href: linkUrl,\n    onClick: onLinkClick,\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    className: \"sf-link-op-menu-link\"\n  }, t('Open_link')), /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"sf-link-op-icons d-flex \"\n  }, /*#__PURE__*/_react.default.createElement(\"span\", {\n    role: \"button\",\n    className: \"sf-link-op-icon\",\n    onClick: onEditLink\n  }, /*#__PURE__*/_react.default.createElement(\"i\", {\n    className: \"iconfont icon-rename\"\n  })), /*#__PURE__*/_react.default.createElement(\"span\", {\n    role: \"button\",\n    className: \"sf-link-op-icon\",\n    onClick: onUnwrapLink\n  }, /*#__PURE__*/_react.default.createElement(\"i\", {\n    className: \"iconfont icon-unlink\"\n  })))), document.body));\n};\nvar _default = exports.default = LinkPopover;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}