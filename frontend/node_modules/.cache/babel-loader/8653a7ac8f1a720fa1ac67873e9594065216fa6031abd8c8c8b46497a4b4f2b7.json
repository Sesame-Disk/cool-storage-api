{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{Modal,ModalHeader,ModalBody,ModalFooter,InputGroup,InputGroupAddon,InputGroupText}from'reactstrap';import{gettext}from'../../utils/constants';import{seafileAPI}from'../../utils/seafile-api';import{Utils}from'../../utils/utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SetOrgUserQuota=/*#__PURE__*/function(_React$Component){_inherits(SetOrgUserQuota,_React$Component);var _super=_createSuper(SetOrgUserQuota);function SetOrgUserQuota(props){var _this;_classCallCheck(this,SetOrgUserQuota);_this=_super.call(this,props);_this.handleInputChange=function(e){_this.setState({inputValue:e.target.value});};_this.formSubmit=function(){var _this$props=_this.props,orgID=_this$props.orgID,email=_this$props.email;var quota=_this.state.inputValue.trim();if(!quota){_this.setState({formErrorMsg:gettext('It is required.')});return false;}_this.setState({submitBtnDisabled:true});seafileAPI.orgAdminSetOrgUserQuota(orgID,email,quota).then(function(res){_this.props.updateQuota(res.data.quota_total);_this.props.toggleDialog();}).catch(function(error){var errorMsg=Utils.getErrorMsg(error);_this.setState({formErrorMsg:errorMsg,submitBtnDisabled:false});});};var initialQuota=_this.props.quotaTotal<0?'':_this.props.quotaTotal/(1000*1000);_this.state={inputValue:initialQuota,submitBtnDisabled:false};return _this;}_createClass(SetOrgUserQuota,[{key:\"render\",value:function render(){var _this$state=this.state,inputValue=_this$state.inputValue,formErrorMsg=_this$state.formErrorMsg,submitBtnDisabled=_this$state.submitBtnDisabled;return/*#__PURE__*/_jsxs(Modal,{isOpen:true,centered:true,toggle:this.props.toggleDialog,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:this.props.toggleDialog,children:gettext('Set user quota')}),/*#__PURE__*/_jsx(ModalBody,{children:/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(InputGroup,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:inputValue,onChange:this.handleInputChange}),/*#__PURE__*/_jsx(InputGroupAddon,{addonType:\"append\",children:/*#__PURE__*/_jsx(InputGroupText,{children:\"MB\"})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"small text-secondary mt-2 mb-2\",children:gettext('Tip: 0 means default limit')}),formErrorMsg&&/*#__PURE__*/_jsx(\"p\",{className:\"error m-0 mt-2\",children:formErrorMsg})]})}),/*#__PURE__*/_jsxs(ModalFooter,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:this.props.toggleDialog,children:gettext('Cancel')}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",disabled:submitBtnDisabled,onClick:this.formSubmit,children:gettext('Submit')})]})]});}}]);return SetOrgUserQuota;}(React.Component);export default SetOrgUserQuota;","map":{"version":3,"names":["React","Modal","ModalHeader","ModalBody","ModalFooter","InputGroup","InputGroupAddon","InputGroupText","gettext","seafileAPI","Utils","jsx","_jsx","jsxs","_jsxs","SetOrgUserQuota","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","handleInputChange","e","setState","inputValue","target","value","formSubmit","_this$props","orgID","email","quota","state","trim","formErrorMsg","submitBtnDisabled","orgAdminSetOrgUserQuota","then","res","updateQuota","data","quota_total","toggleDialog","catch","error","errorMsg","getErrorMsg","initialQuota","quotaTotal","_createClass","key","render","_this$state","isOpen","centered","toggle","children","Fragment","type","className","onChange","addonType","onClick","disabled","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/set-org-user-quota.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  orgID: PropTypes.string,\n  email: PropTypes.string.isRequired,\n  quotaTotal: PropTypes.string.isRequired,\n  updateQuota: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass SetOrgUserQuota extends React.Component {\n\n  constructor(props) {\n    super(props);\n    const initialQuota = this.props.quotaTotal < 0 ? '' :\n      this.props.quotaTotal / (1000 * 1000);\n    this.state = {\n      inputValue: initialQuota,\n      submitBtnDisabled: false\n    };\n  }\n\n  handleInputChange = (e) => {\n    this.setState({\n      inputValue: e.target.value\n    });\n  };\n\n  formSubmit = () => {\n    const { orgID, email } = this.props;\n    const quota = this.state.inputValue.trim();\n\n    if (!quota) {\n      this.setState({\n        formErrorMsg: gettext('It is required.')\n      });\n      return false;\n    }\n\n    this.setState({\n      submitBtnDisabled: true\n    });\n\n    seafileAPI.orgAdminSetOrgUserQuota(orgID, email, quota).then((res) => {\n      this.props.updateQuota(res.data.quota_total);\n      this.props.toggleDialog();\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        formErrorMsg: errorMsg,\n        submitBtnDisabled: false\n      });\n    });\n  };\n\n  render() {\n    const { inputValue, formErrorMsg, submitBtnDisabled } = this.state;\n    return (\n      <Modal isOpen={true} centered={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>{gettext('Set user quota')}</ModalHeader>\n        <ModalBody>\n          <React.Fragment>\n            <InputGroup>\n              <input type=\"text\" className=\"form-control\" value={inputValue} onChange={this.handleInputChange} />\n              <InputGroupAddon addonType=\"append\">\n                <InputGroupText>MB</InputGroupText>\n              </InputGroupAddon>\n            </InputGroup>\n            <p className=\"small text-secondary mt-2 mb-2\">{gettext('Tip: 0 means default limit')}</p>\n            {formErrorMsg && <p className=\"error m-0 mt-2\">{formErrorMsg}</p>}\n          </React.Fragment>\n        </ModalBody>\n        <ModalFooter>\n          <button className=\"btn btn-secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</button>\n          <button className=\"btn btn-primary\" disabled={submitBtnDisabled} onClick={this.formSubmit}>{gettext('Submit')}</button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSetOrgUserQuota.propTypes = propTypes;\n\nexport default SetOrgUserQuota;\n"],"mappings":"wkBAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,OAASC,KAAK,CAAEC,WAAW,CAAEC,SAAS,CAAEC,WAAW,CAAEC,UAAU,CAAEC,eAAe,CAAEC,cAAc,KAAQ,YAAY,CACpH,OAASC,OAAO,KAAQ,uBAAuB,CAC/C,OAASC,UAAU,KAAQ,yBAAyB,CACpD,OAASC,KAAK,KAAQ,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,4BAUpC,CAAAC,eAAe,uBAAAC,gBAAA,EAAAC,SAAA,CAAAF,eAAA,CAAAC,gBAAA,MAAAE,MAAA,CAAAC,YAAA,CAAAJ,eAAA,EAEnB,SAAAA,gBAAYK,KAAK,CAAE,KAAAC,KAAA,CAAAC,eAAA,MAAAP,eAAA,EACjBM,KAAA,CAAAH,MAAA,CAAAK,IAAA,MAAMH,KAAK,EAAEC,KAAA,CASfG,iBAAiB,CAAG,SAACC,CAAC,CAAK,CACzBJ,KAAA,CAAKK,QAAQ,CAAC,CACZC,UAAU,CAAEF,CAAC,CAACG,MAAM,CAACC,KACvB,CAAC,CAAC,CACJ,CAAC,CAAAR,KAAA,CAEDS,UAAU,CAAG,UAAM,CACjB,IAAAC,WAAA,CAAyBV,KAAA,CAAKD,KAAK,CAA3BY,KAAK,CAAAD,WAAA,CAALC,KAAK,CAAEC,KAAK,CAAAF,WAAA,CAALE,KAAK,CACpB,GAAM,CAAAC,KAAK,CAAGb,KAAA,CAAKc,KAAK,CAACR,UAAU,CAACS,IAAI,CAAC,CAAC,CAE1C,GAAI,CAACF,KAAK,CAAE,CACVb,KAAA,CAAKK,QAAQ,CAAC,CACZW,YAAY,CAAE7B,OAAO,CAAC,iBAAiB,CACzC,CAAC,CAAC,CACF,MAAO,MAAK,CACd,CAEAa,KAAA,CAAKK,QAAQ,CAAC,CACZY,iBAAiB,CAAE,IACrB,CAAC,CAAC,CAEF7B,UAAU,CAAC8B,uBAAuB,CAACP,KAAK,CAAEC,KAAK,CAAEC,KAAK,CAAC,CAACM,IAAI,CAAC,SAACC,GAAG,CAAK,CACpEpB,KAAA,CAAKD,KAAK,CAACsB,WAAW,CAACD,GAAG,CAACE,IAAI,CAACC,WAAW,CAAC,CAC5CvB,KAAA,CAAKD,KAAK,CAACyB,YAAY,CAAC,CAAC,CAC3B,CAAC,CAAC,CAACC,KAAK,CAAC,SAACC,KAAK,CAAK,CAClB,GAAI,CAAAC,QAAQ,CAAGtC,KAAK,CAACuC,WAAW,CAACF,KAAK,CAAC,CACvC1B,KAAA,CAAKK,QAAQ,CAAC,CACZW,YAAY,CAAEW,QAAQ,CACtBV,iBAAiB,CAAE,KACrB,CAAC,CAAC,CACJ,CAAC,CAAC,CACJ,CAAC,CAvCC,GAAM,CAAAY,YAAY,CAAG7B,KAAA,CAAKD,KAAK,CAAC+B,UAAU,CAAG,CAAC,CAAG,EAAE,CACjD9B,KAAA,CAAKD,KAAK,CAAC+B,UAAU,EAAI,IAAI,CAAG,IAAI,CAAC,CACvC9B,KAAA,CAAKc,KAAK,CAAG,CACXR,UAAU,CAAEuB,YAAY,CACxBZ,iBAAiB,CAAE,KACrB,CAAC,CAAC,OAAAjB,KAAA,CACJ,CAAC+B,YAAA,CAAArC,eAAA,GAAAsC,GAAA,UAAAxB,KAAA,CAmCD,SAAAyB,OAAA,CAAS,CACP,IAAAC,WAAA,CAAwD,IAAI,CAACpB,KAAK,CAA1DR,UAAU,CAAA4B,WAAA,CAAV5B,UAAU,CAAEU,YAAY,CAAAkB,WAAA,CAAZlB,YAAY,CAAEC,iBAAiB,CAAAiB,WAAA,CAAjBjB,iBAAiB,CACnD,mBACExB,KAAA,CAACb,KAAK,EAACuD,MAAM,CAAE,IAAK,CAACC,QAAQ,CAAE,IAAK,CAACC,MAAM,CAAE,IAAI,CAACtC,KAAK,CAACyB,YAAa,CAAAc,QAAA,eACnE/C,IAAA,CAACV,WAAW,EAACwD,MAAM,CAAE,IAAI,CAACtC,KAAK,CAACyB,YAAa,CAAAc,QAAA,CAAEnD,OAAO,CAAC,gBAAgB,CAAC,CAAc,CAAC,cACvFI,IAAA,CAACT,SAAS,EAAAwD,QAAA,cACR7C,KAAA,CAACd,KAAK,CAAC4D,QAAQ,EAAAD,QAAA,eACb7C,KAAA,CAACT,UAAU,EAAAsD,QAAA,eACT/C,IAAA,UAAOiD,IAAI,CAAC,MAAM,CAACC,SAAS,CAAC,cAAc,CAACjC,KAAK,CAAEF,UAAW,CAACoC,QAAQ,CAAE,IAAI,CAACvC,iBAAkB,CAAE,CAAC,cACnGZ,IAAA,CAACN,eAAe,EAAC0D,SAAS,CAAC,QAAQ,CAAAL,QAAA,cACjC/C,IAAA,CAACL,cAAc,EAAAoD,QAAA,CAAC,IAAE,CAAgB,CAAC,CACpB,CAAC,EACR,CAAC,cACb/C,IAAA,MAAGkD,SAAS,CAAC,gCAAgC,CAAAH,QAAA,CAAEnD,OAAO,CAAC,4BAA4B,CAAC,CAAI,CAAC,CACxF6B,YAAY,eAAIzB,IAAA,MAAGkD,SAAS,CAAC,gBAAgB,CAAAH,QAAA,CAAEtB,YAAY,CAAI,CAAC,EACnD,CAAC,CACR,CAAC,cACZvB,KAAA,CAACV,WAAW,EAAAuD,QAAA,eACV/C,IAAA,WAAQkD,SAAS,CAAC,mBAAmB,CAACG,OAAO,CAAE,IAAI,CAAC7C,KAAK,CAACyB,YAAa,CAAAc,QAAA,CAAEnD,OAAO,CAAC,QAAQ,CAAC,CAAS,CAAC,cACpGI,IAAA,WAAQkD,SAAS,CAAC,iBAAiB,CAACI,QAAQ,CAAE5B,iBAAkB,CAAC2B,OAAO,CAAE,IAAI,CAACnC,UAAW,CAAA6B,QAAA,CAAEnD,OAAO,CAAC,QAAQ,CAAC,CAAS,CAAC,EAC5G,CAAC,EACT,CAAC,CAEZ,CAAC,WAAAO,eAAA,GApE2Bf,KAAK,CAACmE,SAAS,EAyE7C,cAAe,CAAApD,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}