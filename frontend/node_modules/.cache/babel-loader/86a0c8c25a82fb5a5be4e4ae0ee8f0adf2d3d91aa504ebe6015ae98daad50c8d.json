{"ast":null,"code":"import _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useCallback, useState } from 'react';\nimport { useSlateStatic } from '@seafile/slate-react';\nimport classnames from 'classnames';\nimport { useTableRootContext } from '../../hooks';\nimport RowHeader from './row-header';\nimport { insertTableRow } from '../../../helpers';\nimport { TABLE_ELEMENT_POSITION } from '../../../constants';\nvar RowsHeader = function RowsHeader(_ref) {\n  var table = _ref.table,\n    selectRange = _ref.selectRange,\n    tableSize = _ref.tableSize,\n    handleDragStart = _ref.handleDragStart,\n    handleDragEnd = _ref.handleDragEnd;\n  var editor = useSlateStatic();\n  var children = table.children;\n  var _useState = useState(0),\n    _useState2 = _slicedToArray(_useState, 2),\n    insertRowIndex = _useState2[0],\n    setInsertRowIndex = _useState2[1];\n  var _useState3 = useState(),\n    _useState4 = _slicedToArray(_useState3, 2),\n    addIconPosition = _useState4[0],\n    setAddIconPosition = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    isHoverInAddIcon = _useState6[0],\n    setIsHoverInAddIcon = _useState6[1];\n  var tableRootContent = useTableRootContext();\n  var onMouseLeave = useCallback(function () {\n    setAddIconPosition();\n    setInsertRowIndex(0);\n    setIsHoverInAddIcon(false);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tableSize, table]);\n  var _onMouseEnter = useCallback(function (addIconPosition) {\n    setAddIconPosition(addIconPosition);\n    setIsHoverInAddIcon(true);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tableSize, table]);\n  var insertRow = useCallback(function (insertRowIndex) {\n    var validInsertRowIndex = insertRowIndex === -1 ? 0 : insertRowIndex;\n    var insertRowPosition = insertRowIndex === -1 ? TABLE_ELEMENT_POSITION.BEFORE : TABLE_ELEMENT_POSITION.AFTER;\n    insertTableRow(editor, table, validInsertRowIndex, insertRowPosition, 1);\n    setAddIconPosition();\n    setIsHoverInAddIcon(false);\n    setInsertRowIndex(0);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tableSize, table]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-table-rows-header h-100 position-absolute d-flex flex-column d-print-none\",\n    contentEditable: false\n  }, children.map(function (row, index) {\n    return /*#__PURE__*/React.createElement(RowHeader, {\n      key: row.id,\n      index: index,\n      row: row,\n      addIconPosition: addIconPosition,\n      tableSize: tableSize,\n      setAddIconPosition: setAddIconPosition,\n      setInsertRowIndex: setInsertRowIndex,\n      selectRange: selectRange,\n      handleDragStart: handleDragStart,\n      handleDragEnd: handleDragEnd\n    });\n  })), addIconPosition && /*#__PURE__*/React.createElement(\"div\", {\n    className: classnames('position-fixed sdoc-table-add-element-icon-content', {\n      'background-color-tip-blue': isHoverInAddIcon\n    }),\n    contentEditable: false,\n    style: addIconPosition,\n    onMouseEnter: function onMouseEnter() {\n      return _onMouseEnter(addIconPosition);\n    },\n    onMouseLeave: onMouseLeave,\n    onClick: function onClick() {\n      return insertRow(insertRowIndex);\n    }\n  }, '+'), addIconPosition && isHoverInAddIcon && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"position-fixed sdoc-table-add-element-tip background-color-tip-blue\",\n    style: {\n      left: (addIconPosition === null || addIconPosition === void 0 ? void 0 : addIconPosition.left) + 11,\n      top: (addIconPosition === null || addIconPosition === void 0 ? void 0 : addIconPosition.top) + 6,\n      width: tableRootContent.clientWidth + 1,\n      height: 2,\n      zIndex: 1\n    }\n  }));\n};\nexport default RowsHeader;","map":{"version":3,"names":["React","useCallback","useState","useSlateStatic","classnames","useTableRootContext","RowHeader","insertTableRow","TABLE_ELEMENT_POSITION","RowsHeader","_ref","table","selectRange","tableSize","handleDragStart","handleDragEnd","editor","children","_useState","_useState2","_slicedToArray","insertRowIndex","setInsertRowIndex","_useState3","_useState4","addIconPosition","setAddIconPosition","_useState5","_useState6","isHoverInAddIcon","setIsHoverInAddIcon","tableRootContent","onMouseLeave","onMouseEnter","insertRow","validInsertRowIndex","insertRowPosition","BEFORE","AFTER","createElement","Fragment","className","contentEditable","map","row","index","key","id","style","onClick","left","top","width","clientWidth","height","zIndex"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/extension/plugins/table/render/table-header/rows-header/index.js"],"sourcesContent":["import React, { useCallback, useState } from 'react';\nimport { useSlateStatic } from '@seafile/slate-react';\nimport classnames from 'classnames';\nimport { useTableRootContext } from '../../hooks';\nimport RowHeader from './row-header';\nimport { insertTableRow } from '../../../helpers';\nimport { TABLE_ELEMENT_POSITION } from '../../../constants';\nconst RowsHeader = _ref => {\n  let {\n    table,\n    selectRange,\n    tableSize,\n    handleDragStart,\n    handleDragEnd\n  } = _ref;\n  const editor = useSlateStatic();\n  const {\n    children\n  } = table;\n  const [insertRowIndex, setInsertRowIndex] = useState(0);\n  const [addIconPosition, setAddIconPosition] = useState();\n  const [isHoverInAddIcon, setIsHoverInAddIcon] = useState(false);\n  const tableRootContent = useTableRootContext();\n  const onMouseLeave = useCallback(() => {\n    setAddIconPosition();\n    setInsertRowIndex(0);\n    setIsHoverInAddIcon(false);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tableSize, table]);\n  const onMouseEnter = useCallback(addIconPosition => {\n    setAddIconPosition(addIconPosition);\n    setIsHoverInAddIcon(true);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tableSize, table]);\n  const insertRow = useCallback(insertRowIndex => {\n    const validInsertRowIndex = insertRowIndex === -1 ? 0 : insertRowIndex;\n    const insertRowPosition = insertRowIndex === -1 ? TABLE_ELEMENT_POSITION.BEFORE : TABLE_ELEMENT_POSITION.AFTER;\n    insertTableRow(editor, table, validInsertRowIndex, insertRowPosition, 1);\n    setAddIconPosition();\n    setIsHoverInAddIcon(false);\n    setInsertRowIndex(0);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tableSize, table]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-table-rows-header h-100 position-absolute d-flex flex-column d-print-none\",\n    contentEditable: false\n  }, children.map((row, index) => {\n    return /*#__PURE__*/React.createElement(RowHeader, {\n      key: row.id,\n      index: index,\n      row: row,\n      addIconPosition: addIconPosition,\n      tableSize: tableSize,\n      setAddIconPosition: setAddIconPosition,\n      setInsertRowIndex: setInsertRowIndex,\n      selectRange: selectRange,\n      handleDragStart: handleDragStart,\n      handleDragEnd: handleDragEnd\n    });\n  })), addIconPosition && /*#__PURE__*/React.createElement(\"div\", {\n    className: classnames('position-fixed sdoc-table-add-element-icon-content', {\n      'background-color-tip-blue': isHoverInAddIcon\n    }),\n    contentEditable: false,\n    style: addIconPosition,\n    onMouseEnter: () => onMouseEnter(addIconPosition),\n    onMouseLeave: onMouseLeave,\n    onClick: () => insertRow(insertRowIndex)\n  }, '+'), addIconPosition && isHoverInAddIcon && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"position-fixed sdoc-table-add-element-tip background-color-tip-blue\",\n    style: {\n      left: (addIconPosition === null || addIconPosition === void 0 ? void 0 : addIconPosition.left) + 11,\n      top: (addIconPosition === null || addIconPosition === void 0 ? void 0 : addIconPosition.top) + 6,\n      width: tableRootContent.clientWidth + 1,\n      height: 2,\n      zIndex: 1\n    }\n  }));\n};\nexport default RowsHeader;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}