{"ast":null,"code":"import _objectSpread from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Fragment}from'react';import moment from'moment';import MainPanelTopbar from'../main-panel-topbar';import StatisticNav from'./statistic-nav';import StatisticCommonTool from'./statistic-common-tool';import{seafileAPI}from'../../../utils/seafile-api';import StatisticChart from'./statistic-chart';import Loading from'../../../components/loading';import{gettext}from'../../../utils/constants';import{Utils}from'../../../utils/utils';import toaster from'../../../components/toast';import'../../../css/system-stat.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var StatisticFile=/*#__PURE__*/function(_React$Component){_inherits(StatisticFile,_React$Component);var _super=_createSuper(StatisticFile);function StatisticFile(props){var _this;_classCallCheck(this,StatisticFile);_this=_super.call(this,props);_this.getActiviesFiles=function(startTime,endTime,groupBy){var filesData=_this.state.filesData;seafileAPI.sysAdminStatisticFiles(startTime,endTime,groupBy).then(function(res){var labels=[],added=[],deleted=[],visited=[],modified=[];var data=res.data;if(Array.isArray(data)){data.forEach(function(item){labels.push(moment(item.datetime).format('YYYY-MM-DD'));added.push(item.added);deleted.push(item.deleted);modified.push(item.modified);visited.push(item.visited);});var addedData={label:gettext('Added'),data:added,borderColor:'#57cd6b',backgroundColor:'#57cd6b'};var visitedData={label:gettext('Visited'),data:visited,borderColor:'#fd913a',backgroundColor:'#fd913a'};var modifiedData={label:gettext('Modified'),data:modified,borderColor:'#72c3fc',backgroundColor:'#72c3fc'};var deletedData={label:gettext('Deleted'),data:deleted,borderColor:'#f75356',backgroundColor:'#f75356'};filesData=[visitedData,addedData,modifiedData,deletedData];}_this.setState({filesData:filesData,labels:labels,isLoading:false});}).catch(function(err){var errMessage=Utils.getErrorMsg(err);toaster.danger(errMessage);});};_this.state={filesData:[],labels:[],isLoading:true};return _this;}_createClass(StatisticFile,[{key:\"render\",value:function render(){var _this$state=this.state,labels=_this$state.labels,filesData=_this$state.filesData,isLoading=_this$state.isLoading;return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MainPanelTopbar,_objectSpread({},this.props)),/*#__PURE__*/_jsxs(\"div\",{className:\"cur-view-container\",children:[/*#__PURE__*/_jsx(StatisticNav,{currentItem:\"fileStatistic\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"cur-view-content\",children:[/*#__PURE__*/_jsx(StatisticCommonTool,{getActiviesFiles:this.getActiviesFiles}),isLoading&&/*#__PURE__*/_jsx(Loading,{}),!isLoading&&labels.length>0&&/*#__PURE__*/_jsx(StatisticChart,{labels:labels,filesData:filesData,suggestedMaxNumbers:10,isLegendStatus:true,chartTitle:gettext('File Operations')})]})]})]});}}]);return StatisticFile;}(React.Component);export default StatisticFile;","map":{"version":3,"names":["React","Fragment","moment","MainPanelTopbar","StatisticNav","StatisticCommonTool","seafileAPI","StatisticChart","Loading","gettext","Utils","toaster","jsx","_jsx","jsxs","_jsxs","StatisticFile","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","getActiviesFiles","startTime","endTime","groupBy","filesData","state","sysAdminStatisticFiles","then","res","labels","added","deleted","visited","modified","data","Array","isArray","forEach","item","push","datetime","format","addedData","label","borderColor","backgroundColor","visitedData","modifiedData","deletedData","setState","isLoading","catch","err","errMessage","getErrorMsg","danger","_createClass","key","value","render","_this$state","children","_objectSpread","className","currentItem","length","suggestedMaxNumbers","isLegendStatus","chartTitle","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/statistic/statistic-file.js"],"sourcesContent":["import React, { Fragment } from 'react';\nimport moment from 'moment';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport StatisticNav from './statistic-nav';\nimport StatisticCommonTool from './statistic-common-tool';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport StatisticChart from './statistic-chart';\nimport Loading from '../../../components/loading';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nimport '../../../css/system-stat.css';\n\nclass StatisticFile extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      filesData: [],\n      labels: [],\n      isLoading: true\n    };\n  }\n\n  getActiviesFiles = (startTime, endTime, groupBy) => {\n    let { filesData } = this.state;\n    seafileAPI.sysAdminStatisticFiles(startTime, endTime, groupBy).then((res) => {\n      let labels = [],\n        added = [],\n        deleted = [],\n        visited = [],\n        modified = [];\n      let data = res.data;\n      if (Array.isArray(data)) {\n        data.forEach(item => {\n          labels.push(moment(item.datetime).format('YYYY-MM-DD'));\n          added.push(item.added);\n          deleted.push(item.deleted);\n          modified.push(item.modified);\n          visited.push(item.visited);\n        });\n        let addedData = {\n          label: gettext('Added'),\n          data: added,\n          borderColor: '#57cd6b',\n          backgroundColor: '#57cd6b'};\n        let visitedData = {\n          label: gettext('Visited'),\n          data: visited,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        let modifiedData = {\n          label: gettext('Modified'),\n          data: modified,\n          borderColor: '#72c3fc',\n          backgroundColor: '#72c3fc'};\n        let deletedData = {\n          label: gettext('Deleted'),\n          data: deleted,\n          borderColor: '#f75356',\n          backgroundColor: '#f75356'};\n        filesData = [visitedData, addedData, modifiedData, deletedData];\n      }\n      this.setState({\n        filesData: filesData,\n        labels: labels,\n        isLoading: false\n      });\n    }).catch(err => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    let { labels, filesData, isLoading } = this.state;\n\n    return(\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"cur-view-container\">\n          <StatisticNav currentItem=\"fileStatistic\" />\n          <div className=\"cur-view-content\">\n            <StatisticCommonTool getActiviesFiles={this.getActiviesFiles} />\n            {isLoading && <Loading />}\n            {!isLoading && labels.length > 0 &&\n              <StatisticChart\n                labels={labels}\n                filesData={filesData}\n                suggestedMaxNumbers={10}\n                isLegendStatus={true}\n                chartTitle={gettext('File Operations')}\n              />\n            }\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default StatisticFile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}