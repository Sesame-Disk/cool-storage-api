{"ast":null,"code":"import { Editor, Element, Range, Node } from '@seafile/slate';\nimport { LIST_ITEM, ORDERED_LIST, UNORDERED_LIST } from '../../../constants';\nexport var getListTypes = function getListTypes() {\n  return [ORDERED_LIST, UNORDERED_LIST];\n};\nexport var getListItemEntry = function getListItemEntry(editor) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n    _ref$at = _ref.at,\n    at = _ref$at === void 0 ? editor.selection : _ref$at;\n  var _at = null;\n  if (Range.isRange(at) && !Range.isCollapsed(at)) {\n    _at = at.focus.path;\n  } else if (Range.isRange(at)) {\n    _at = at.anchor.path;\n  } else {\n    _at = at;\n  }\n  if (_at) {\n    var node = Node.get(editor, _at);\n    if (node) {\n      var listItem = Editor.above(editor, {\n        at: _at,\n        match: function match(n) {\n          return Element.isElement(n) && n.type === LIST_ITEM;\n        }\n      });\n      if (listItem) {\n        var list = Editor.parent(editor, listItem[1]);\n        return {\n          list: list,\n          listItem: listItem\n        };\n      }\n    }\n  }\n  return null;\n};\nexport var hasListChild = function hasListChild(node) {\n  return node.children.some(function (n) {\n    return Element.isElement(n) && getListTypes().includes(n.type);\n  });\n};\nexport var isListNested = function isListNested(editor, listPath) {\n  var _Editor$parent;\n  var listParentNode = (_Editor$parent = Editor.parent(editor, listPath)) === null || _Editor$parent === void 0 ? void 0 : _Editor$parent[0];\n  return (listParentNode === null || listParentNode === void 0 ? void 0 : listParentNode.type) === LIST_ITEM;\n};","map":{"version":3,"names":["Editor","Element","Range","Node","LIST_ITEM","ORDERED_LIST","UNORDERED_LIST","getListTypes","getListItemEntry","editor","_ref","arguments","length","undefined","_ref$at","at","selection","_at","isRange","isCollapsed","focus","path","anchor","node","get","listItem","above","match","n","isElement","type","list","parent","hasListChild","children","some","includes","isListNested","listPath","_Editor$parent","listParentNode"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/extension/plugins/list/queries/index.js"],"sourcesContent":["import { Editor, Element, Range, Node } from '@seafile/slate';\nimport { LIST_ITEM, ORDERED_LIST, UNORDERED_LIST } from '../../../constants';\nexport const getListTypes = () => {\n  return [ORDERED_LIST, UNORDERED_LIST];\n};\nexport const getListItemEntry = function (editor) {\n  let {\n    at = editor.selection\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let _at = null;\n  if (Range.isRange(at) && !Range.isCollapsed(at)) {\n    _at = at.focus.path;\n  } else if (Range.isRange(at)) {\n    _at = at.anchor.path;\n  } else {\n    _at = at;\n  }\n  if (_at) {\n    const node = Node.get(editor, _at);\n    if (node) {\n      const listItem = Editor.above(editor, {\n        at: _at,\n        match: n => Element.isElement(n) && n.type === LIST_ITEM\n      });\n      if (listItem) {\n        const list = Editor.parent(editor, listItem[1]);\n        return {\n          list,\n          listItem\n        };\n      }\n    }\n  }\n  return null;\n};\nexport const hasListChild = node => {\n  return node.children.some(n => {\n    return Element.isElement(n) && getListTypes().includes(n.type);\n  });\n};\nexport const isListNested = (editor, listPath) => {\n  var _Editor$parent;\n  const listParentNode = (_Editor$parent = Editor.parent(editor, listPath)) === null || _Editor$parent === void 0 ? void 0 : _Editor$parent[0];\n  return (listParentNode === null || listParentNode === void 0 ? void 0 : listParentNode.type) === LIST_ITEM;\n};"],"mappings":"AAAA,SAASA,MAAM,EAAEC,OAAO,EAAEC,KAAK,EAAEC,IAAI,QAAQ,gBAAgB;AAC7D,SAASC,SAAS,EAAEC,YAAY,EAAEC,cAAc,QAAQ,oBAAoB;AAC5E,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CAAA,EAAS;EAChC,OAAO,CAACF,YAAY,EAAEC,cAAc,CAAC;AACvC,CAAC;AACD,OAAO,IAAME,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAaC,MAAM,EAAE;EAChD,IAAAC,IAAA,GAEIC,SAAS,CAACC,MAAM,GAAG,CAAC,IAAID,SAAS,CAAC,CAAC,CAAC,KAAKE,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;IAAAG,OAAA,GAAAJ,IAAA,CADxEK,EAAE;IAAFA,EAAE,GAAAD,OAAA,cAAGL,MAAM,CAACO,SAAS,GAAAF,OAAA;EAEvB,IAAIG,GAAG,GAAG,IAAI;EACd,IAAIf,KAAK,CAACgB,OAAO,CAACH,EAAE,CAAC,IAAI,CAACb,KAAK,CAACiB,WAAW,CAACJ,EAAE,CAAC,EAAE;IAC/CE,GAAG,GAAGF,EAAE,CAACK,KAAK,CAACC,IAAI;EACrB,CAAC,MAAM,IAAInB,KAAK,CAACgB,OAAO,CAACH,EAAE,CAAC,EAAE;IAC5BE,GAAG,GAAGF,EAAE,CAACO,MAAM,CAACD,IAAI;EACtB,CAAC,MAAM;IACLJ,GAAG,GAAGF,EAAE;EACV;EACA,IAAIE,GAAG,EAAE;IACP,IAAMM,IAAI,GAAGpB,IAAI,CAACqB,GAAG,CAACf,MAAM,EAAEQ,GAAG,CAAC;IAClC,IAAIM,IAAI,EAAE;MACR,IAAME,QAAQ,GAAGzB,MAAM,CAAC0B,KAAK,CAACjB,MAAM,EAAE;QACpCM,EAAE,EAAEE,GAAG;QACPU,KAAK,EAAE,SAAAA,MAAAC,CAAC;UAAA,OAAI3B,OAAO,CAAC4B,SAAS,CAACD,CAAC,CAAC,IAAIA,CAAC,CAACE,IAAI,KAAK1B,SAAS;QAAA;MAC1D,CAAC,CAAC;MACF,IAAIqB,QAAQ,EAAE;QACZ,IAAMM,IAAI,GAAG/B,MAAM,CAACgC,MAAM,CAACvB,MAAM,EAAEgB,QAAQ,CAAC,CAAC,CAAC,CAAC;QAC/C,OAAO;UACLM,IAAI,EAAJA,IAAI;UACJN,QAAQ,EAARA;QACF,CAAC;MACH;IACF;EACF;EACA,OAAO,IAAI;AACb,CAAC;AACD,OAAO,IAAMQ,YAAY,GAAG,SAAfA,YAAYA,CAAGV,IAAI,EAAI;EAClC,OAAOA,IAAI,CAACW,QAAQ,CAACC,IAAI,CAAC,UAAAP,CAAC,EAAI;IAC7B,OAAO3B,OAAO,CAAC4B,SAAS,CAACD,CAAC,CAAC,IAAIrB,YAAY,CAAC,CAAC,CAAC6B,QAAQ,CAACR,CAAC,CAACE,IAAI,CAAC;EAChE,CAAC,CAAC;AACJ,CAAC;AACD,OAAO,IAAMO,YAAY,GAAG,SAAfA,YAAYA,CAAI5B,MAAM,EAAE6B,QAAQ,EAAK;EAChD,IAAIC,cAAc;EAClB,IAAMC,cAAc,GAAG,CAACD,cAAc,GAAGvC,MAAM,CAACgC,MAAM,CAACvB,MAAM,EAAE6B,QAAQ,CAAC,MAAM,IAAI,IAAIC,cAAc,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,cAAc,CAAC,CAAC,CAAC;EAC5I,OAAO,CAACC,cAAc,KAAK,IAAI,IAAIA,cAAc,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,cAAc,CAACV,IAAI,MAAM1B,SAAS;AAC5G,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}