{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TreeViewItem=/*#__PURE__*/function(_React$Component){_inherits(TreeViewItem,_React$Component);var _super=_createSuper(TreeViewItem);function TreeViewItem(props){var _this;_classCallCheck(this,TreeViewItem);_this=_super.call(this,props);_this.onToggleClick=function(e){e.stopPropagation();var node=_this.props.node;if(node.isExpanded){_this.props.onNodeCollapse(node);}else{_this.props.onNodeExpanded(node);}};_this.onItemClick=function(e){e.stopPropagation();// need prevent event popup\nvar isCurrentRepo=false;if(_this.props.selectedRepo){isCurrentRepo=_this.props.selectedRepo.repo_id===_this.props.repo.repo_id;}if(isCurrentRepo){if(_this.props.selectedPath!==_this.state.filePath){_this.props.onDirentItemClick(_this.state.filePath,_this.props.node.object);}else{if(_this.props.node.object.type==='dir'){_this.onToggleClick(e);}}}else{_this.props.onDirentItemClick(_this.state.filePath,_this.props.node.object);}};_this.renderChildren=function(){var node=_this.props.node;if(!node.hasChildren()){return'';}return/*#__PURE__*/_jsx(\"div\",{className:\"list-view-content\",children:node.children.map(function(item){return/*#__PURE__*/_jsx(TreeViewItem,{node:item,onNodeCollapse:_this.props.onNodeCollapse,onNodeExpanded:_this.props.onNodeExpanded,repo:_this.props.repo,onDirentItemClick:_this.props.onDirentItemClick,selectedRepo:_this.props.selectedRepo,selectedPath:_this.props.selectedPath,fileSuffixes:_this.props.fileSuffixes},item.path);})});};var filePath=_this.props.filePath?_this.props.filePath+'/'+_this.props.node.object.name:_this.props.node.path;_this.state={filePath:filePath};return _this;}_createClass(TreeViewItem,[{key:\"render\",value:function render(){var node=this.props.node;var isCurrentRepo=false;if(this.props.selectedRepo){isCurrentRepo=this.props.selectedRepo.repo_id===this.props.repo.repo_id;}var isCurrentPath=this.props.selectedPath===this.state.filePath;var fileName=node.object.name;if(this.props.fileSuffixes&&fileName&&node.object.type==='file'){if(fileName.indexOf('.')!==-1){var suffix=fileName.slice(fileName.lastIndexOf('.')+1).toLowerCase();if(!this.props.fileSuffixes.includes(suffix))return null;}else{if(node.object.type==='file')return null;}}return/*#__PURE__*/_jsxs(\"div\",{className:\"file-chooser-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(node.path==='/'?'hide':''),children:/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(isCurrentRepo&&isCurrentPath?'item-active':'',\" item-info\"),onClick:this.onItemClick,children:[/*#__PURE__*/_jsx(\"div\",{className:\"item-text\",children:/*#__PURE__*/_jsx(\"span\",{className:\"name user-select-none ellipsis\",title:node.object&&node.object.name,children:node.object&&node.object.name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-left-icon\",children:[node.object.type!=='file'&&/*#__PURE__*/_jsx(\"span\",{className:\"icon item-toggle fa \".concat(node.isExpanded?'fa-caret-down':'fa-caret-right'),onClick:this.onToggleClick}),/*#__PURE__*/_jsx(\"i\",{className:\"tree-node-icon\",children:/*#__PURE__*/_jsx(\"span\",{className:\"icon far \".concat(node.object.type==='dir'?'fa-folder':'fa-file')})})]})]})}),node.isExpanded&&this.renderChildren()]});}}]);return TreeViewItem;}(React.Component);export default TreeViewItem;","map":{"version":3,"names":["React","jsx","_jsx","jsxs","_jsxs","TreeViewItem","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","onToggleClick","e","stopPropagation","node","isExpanded","onNodeCollapse","onNodeExpanded","onItemClick","isCurrentRepo","selectedRepo","repo_id","repo","selectedPath","state","filePath","onDirentItemClick","object","type","renderChildren","hasChildren","className","children","map","item","fileSuffixes","path","name","_createClass","key","value","render","isCurrentPath","fileName","indexOf","suffix","slice","lastIndexOf","toLowerCase","includes","concat","onClick","title","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/file-chooser/tree-list-item.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  selectedPath: PropTypes.string,\n  selectedRepo: PropTypes.object,\n  repo: PropTypes.object.isRequired,\n  onDirentItemClick: PropTypes.func.isRequired,\n  node: PropTypes.object.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  filePath: PropTypes.string,\n  fileSuffixes: PropTypes.array,\n};\n\nclass TreeViewItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    let filePath = this.props.filePath ?  this.props.filePath +  '/' + this.props.node.object.name : this.props.node.path;\n\n    this.state = {\n      filePath: filePath,\n    };\n  }\n\n  onToggleClick = (e) => {\n    e.stopPropagation();\n    let { node } = this.props;\n    if (node.isExpanded) {\n      this.props.onNodeCollapse(node);\n    } else {\n      this.props.onNodeExpanded(node);\n    }\n  };\n\n  onItemClick = (e) => {\n    e.stopPropagation();  // need prevent event popup\n    let isCurrentRepo = false;\n    if (this.props.selectedRepo) {\n      isCurrentRepo = this.props.selectedRepo.repo_id === this.props.repo.repo_id;\n    }\n\n    if (isCurrentRepo) {\n      if (this.props.selectedPath !== this.state.filePath) {\n        this.props.onDirentItemClick(this.state.filePath, this.props.node.object);\n      } else {\n        if (this.props.node.object.type === 'dir') {\n          this.onToggleClick(e);\n        }\n      }\n    } else {\n      this.props.onDirentItemClick(this.state.filePath, this.props.node.object);\n    }\n  };\n\n  renderChildren = () => {\n    let { node } = this.props;\n    if (!node.hasChildren()) {\n      return '';\n    }\n    return(\n      <div className=\"list-view-content\">\n        {node.children.map(item => {\n          return (\n            <TreeViewItem\n              key={item.path}\n              node={item}\n              onNodeCollapse={this.props.onNodeCollapse}\n              onNodeExpanded={this.props.onNodeExpanded}\n              repo={this.props.repo}\n              onDirentItemClick={this.props.onDirentItemClick}\n              selectedRepo={this.props.selectedRepo}\n              selectedPath={this.props.selectedPath}\n              fileSuffixes={this.props.fileSuffixes}\n            />);\n        })}\n      </div>\n    );\n  };\n\n  render() {\n    let { node } = this.props;\n    let isCurrentRepo = false;\n    if (this.props.selectedRepo) {\n      isCurrentRepo = this.props.selectedRepo.repo_id === this.props.repo.repo_id;\n    }\n    let isCurrentPath = this.props.selectedPath === this.state.filePath;\n\n    const fileName = node.object.name;\n    if (this.props.fileSuffixes && fileName && node.object.type === 'file') {\n      if ( fileName.indexOf('.') !== -1) {\n        const suffix = fileName.slice(fileName.lastIndexOf('.') + 1).toLowerCase();\n        if (!this.props.fileSuffixes.includes(suffix)) return null;\n      } else {\n        if (node.object.type === 'file') return null;\n      }\n    }\n\n    return (\n      <div className=\"file-chooser-item\">\n        <div className={`${node.path === '/'? 'hide': ''}`}>\n          <div className={`${(isCurrentRepo && isCurrentPath) ? 'item-active' : ''} item-info`} onClick={this.onItemClick}>\n            <div className=\"item-text\">\n              <span className=\"name user-select-none ellipsis\" title={node.object && node.object.name}>{node.object && node.object.name}</span>\n            </div>\n            <div className=\"item-left-icon\">\n              {\n                node.object.type !== 'file' &&\n                <span className={`icon item-toggle fa ${node.isExpanded ? 'fa-caret-down' : 'fa-caret-right'}`} onClick={this.onToggleClick}></span>\n              }\n              <i className=\"tree-node-icon\">\n                <span className={`icon far ${node.object.type === 'dir' ? 'fa-folder' : 'fa-file'}`}></span>\n              </i>\n            </div>\n          </div>\n        </div>\n        {node.isExpanded && this.renderChildren()}\n      </div>\n    );\n  }\n}\n\nTreeViewItem.propTypes = propTypes;\n\nexport default TreeViewItem;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}