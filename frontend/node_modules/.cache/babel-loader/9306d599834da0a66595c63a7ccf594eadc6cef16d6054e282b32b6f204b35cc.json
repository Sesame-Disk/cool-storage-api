{"ast":null,"code":"import _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { useReadOnly, useSlateStatic } from '@seafile/slate-react';\nimport { LINK, LIST_ITEM, ORDERED_LIST, PARAGRAPH, UNORDERED_LIST, IMAGE, IMAGE_BLOCK, MENTION, MENTION_TEMP, BLOCKQUOTE } from '../constants';\nimport { LinkPlugin, ListPlugin, ImagePlugin, ParagraphPlugin, MentionPlugin, BlockquotePlugin } from '../plugins';\nimport { getParentNode } from '../core';\nvar RenderCommentEditorCustomRenderElement = function RenderCommentEditorCustomRenderElement(props) {\n  var editor = useSlateStatic();\n  var readonly = useReadOnly();\n  var element = props.element,\n    commentType = props.commentType;\n  switch (element.type) {\n    case PARAGRAPH:\n      {\n        var parentNode = getParentNode(editor.children, element.id);\n        var _props = _objectSpread(_objectSpread({}, props), {}, {\n          className: 'sdoc-comment-editor-paragraph'\n        });\n        if (parentNode && parentNode.type === LIST_ITEM) {\n          var _ParagraphPlugin$rend = _slicedToArray(ParagraphPlugin.renderElements, 1),\n            _renderParagraph = _ParagraphPlugin$rend[0];\n          return _renderParagraph(_props);\n        }\n        var placeholder = commentType === 'comment' ? 'Enter_comment_Enter_for_new_line_shift_enter_to_send' : 'Enter_reply_Enter_for_new_line_Shift_Enter_to_send';\n        var _ParagraphPlugin$rend2 = _slicedToArray(ParagraphPlugin.renderElements, 1),\n          renderParagraph = _ParagraphPlugin$rend2[0];\n        return renderParagraph(_objectSpread(_objectSpread({}, _props), {}, {\n          placeholder: placeholder\n        }));\n      }\n    case LINK:\n      {\n        var _LinkPlugin$renderEle = _slicedToArray(LinkPlugin.renderElements, 1),\n          renderLink = _LinkPlugin$renderEle[0];\n        return renderLink(props, editor, readonly);\n      }\n    case ORDERED_LIST:\n    case UNORDERED_LIST:\n      {\n        var _ListPlugin$renderEle = _slicedToArray(ListPlugin.renderElements, 1),\n          renderList = _ListPlugin$renderEle[0];\n        return renderList(props, editor);\n      }\n    case LIST_ITEM:\n      {\n        var _ListPlugin$renderEle2 = _slicedToArray(ListPlugin.renderElements, 2),\n          renderListItem = _ListPlugin$renderEle2[1];\n        return renderListItem(props, editor);\n      }\n    case IMAGE:\n      {\n        var _editor$element_comme;\n        var _parentNode = getParentNode(editor.children, element.id);\n        var comments = ((_editor$element_comme = editor.element_comments_map) === null || _editor$element_comme === void 0 ? void 0 : _editor$element_comme[_parentNode.id]) || [];\n        var unresolvedComments = comments && comments.filter(function (item) {\n          return !item.resolved;\n        });\n        var leaf = {};\n        if (unresolvedComments && unresolvedComments.length > 0) {\n          leaf['computed_background_color'] = 'rgba(129, 237, 247, 0.5)';\n        }\n        var _ImagePlugin$renderEl = _slicedToArray(ImagePlugin.renderElements, 1),\n          renderImage = _ImagePlugin$renderEl[0];\n        return renderImage(_objectSpread(_objectSpread({}, props), {}, {\n          leaf: leaf\n        }), editor);\n      }\n    case IMAGE_BLOCK:\n      {\n        var _ImagePlugin$renderEl2 = _slicedToArray(ImagePlugin.renderElements, 2),\n          renderImageBlock = _ImagePlugin$renderEl2[1];\n        return renderImageBlock(_objectSpread({}, props), editor);\n      }\n    case MENTION:\n      {\n        var _MentionPlugin$render = _slicedToArray(MentionPlugin.renderElements, 1),\n          renderMention = _MentionPlugin$render[0];\n        return renderMention(props, editor);\n      }\n    case MENTION_TEMP:\n      {\n        var _MentionPlugin$render2 = _slicedToArray(MentionPlugin.renderElements, 2),\n          renderMentionTemporaryInput = _MentionPlugin$render2[1];\n        return renderMentionTemporaryInput(props, editor);\n      }\n    case BLOCKQUOTE:\n      {\n        var _BlockquotePlugin$ren = _slicedToArray(BlockquotePlugin.renderElements, 1),\n          renderBlockquote = _BlockquotePlugin$ren[0];\n        return renderBlockquote(props, editor);\n      }\n    default:\n      {\n        var _ParagraphPlugin$rend3 = _slicedToArray(ParagraphPlugin.renderElements, 1),\n          _renderParagraph2 = _ParagraphPlugin$rend3[0];\n        return _renderParagraph2(props);\n      }\n  }\n};\nexport default RenderCommentEditorCustomRenderElement;","map":{"version":3,"names":["_objectSpread","useReadOnly","useSlateStatic","LINK","LIST_ITEM","ORDERED_LIST","PARAGRAPH","UNORDERED_LIST","IMAGE","IMAGE_BLOCK","MENTION","MENTION_TEMP","BLOCKQUOTE","LinkPlugin","ListPlugin","ImagePlugin","ParagraphPlugin","MentionPlugin","BlockquotePlugin","getParentNode","RenderCommentEditorCustomRenderElement","props","editor","readonly","element","commentType","type","parentNode","children","id","_props","className","_ParagraphPlugin$rend","_slicedToArray","renderElements","renderParagraph","placeholder","_ParagraphPlugin$rend2","_LinkPlugin$renderEle","renderLink","_ListPlugin$renderEle","renderList","_ListPlugin$renderEle2","renderListItem","_editor$element_comme","comments","element_comments_map","unresolvedComments","filter","item","resolved","leaf","length","_ImagePlugin$renderEl","renderImage","_ImagePlugin$renderEl2","renderImageBlock","_MentionPlugin$render","renderMention","_MentionPlugin$render2","renderMentionTemporaryInput","_BlockquotePlugin$ren","renderBlockquote","_ParagraphPlugin$rend3"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/extension/render/render-comment-editor-element.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { useReadOnly, useSlateStatic } from '@seafile/slate-react';\nimport { LINK, LIST_ITEM, ORDERED_LIST, PARAGRAPH, UNORDERED_LIST, IMAGE, IMAGE_BLOCK, MENTION, MENTION_TEMP, BLOCKQUOTE } from '../constants';\nimport { LinkPlugin, ListPlugin, ImagePlugin, ParagraphPlugin, MentionPlugin, BlockquotePlugin } from '../plugins';\nimport { getParentNode } from '../core';\nconst RenderCommentEditorCustomRenderElement = props => {\n  const editor = useSlateStatic();\n  const readonly = useReadOnly();\n  const {\n    element,\n    commentType\n  } = props;\n  switch (element.type) {\n    case PARAGRAPH:\n      {\n        const parentNode = getParentNode(editor.children, element.id);\n        const _props = _objectSpread(_objectSpread({}, props), {}, {\n          className: 'sdoc-comment-editor-paragraph'\n        });\n        if (parentNode && parentNode.type === LIST_ITEM) {\n          const [renderParagraph] = ParagraphPlugin.renderElements;\n          return renderParagraph(_props);\n        }\n        const placeholder = commentType === 'comment' ? 'Enter_comment_Enter_for_new_line_shift_enter_to_send' : 'Enter_reply_Enter_for_new_line_Shift_Enter_to_send';\n        const [renderParagraph] = ParagraphPlugin.renderElements;\n        return renderParagraph(_objectSpread(_objectSpread({}, _props), {}, {\n          placeholder\n        }));\n      }\n    case LINK:\n      {\n        const [renderLink] = LinkPlugin.renderElements;\n        return renderLink(props, editor, readonly);\n      }\n    case ORDERED_LIST:\n    case UNORDERED_LIST:\n      {\n        const [renderList] = ListPlugin.renderElements;\n        return renderList(props, editor);\n      }\n    case LIST_ITEM:\n      {\n        const [, renderListItem] = ListPlugin.renderElements;\n        return renderListItem(props, editor);\n      }\n    case IMAGE:\n      {\n        var _editor$element_comme;\n        const parentNode = getParentNode(editor.children, element.id);\n        const comments = ((_editor$element_comme = editor.element_comments_map) === null || _editor$element_comme === void 0 ? void 0 : _editor$element_comme[parentNode.id]) || [];\n        const unresolvedComments = comments && comments.filter(item => !item.resolved);\n        let leaf = {};\n        if (unresolvedComments && unresolvedComments.length > 0) {\n          leaf['computed_background_color'] = 'rgba(129, 237, 247, 0.5)';\n        }\n        const [renderImage] = ImagePlugin.renderElements;\n        return renderImage(_objectSpread(_objectSpread({}, props), {}, {\n          leaf\n        }), editor);\n      }\n    case IMAGE_BLOCK:\n      {\n        const [, renderImageBlock] = ImagePlugin.renderElements;\n        return renderImageBlock(_objectSpread({}, props), editor);\n      }\n    case MENTION:\n      {\n        const [renderMention] = MentionPlugin.renderElements;\n        return renderMention(props, editor);\n      }\n    case MENTION_TEMP:\n      {\n        const [, renderMentionTemporaryInput] = MentionPlugin.renderElements;\n        return renderMentionTemporaryInput(props, editor);\n      }\n    case BLOCKQUOTE:\n      {\n        const [renderBlockquote] = BlockquotePlugin.renderElements;\n        return renderBlockquote(props, editor);\n      }\n    default:\n      {\n        const [renderParagraph] = ParagraphPlugin.renderElements;\n        return renderParagraph(props);\n      }\n  }\n};\nexport default RenderCommentEditorCustomRenderElement;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}