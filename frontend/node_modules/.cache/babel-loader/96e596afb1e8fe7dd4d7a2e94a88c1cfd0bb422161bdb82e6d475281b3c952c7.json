{"ast":null,"code":"import { ReactEditor, useSlateStatic } from '@seafile/slate-react';\nimport { Editor, Element } from '@seafile/slate';\nimport { useScrollContext } from './use-scroll-context';\nexport var useSelectionPosition = function useSelectionPosition() {\n  var editor = useSlateStatic();\n  if (!editor.selection) return {\n    x: 0,\n    y: 0\n  };\n  var node = Editor.above(editor, {\n    mode: 'lowest',\n    match: function match(n) {\n      return Element.isElement(n) && Editor.isBlock(editor, n);\n    }\n  });\n  if (!node) return {\n    x: 0,\n    y: 0\n  };\n  try {\n    var domNode = ReactEditor.toDOMNode(editor, node[0]);\n    var rect = domNode.getBoundingClientRect();\n    return rect;\n  } catch (error) {\n    // A new node has not yet been indexed, it cannot be retrieved, and the new node has no comment information, just do not display it\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n};\nexport var useCommentListPosition = function useCommentListPosition() {\n  var selectionPosition = useSelectionPosition();\n  var headerHeight = 100;\n  var scrollRef = useScrollContext();\n  var _ref = scrollRef.current || {},\n    _ref$scrollTop = _ref.scrollTop,\n    scrollTop = _ref$scrollTop === void 0 ? 0 : _ref$scrollTop;\n  if (selectionPosition.y !== 0) {\n    selectionPosition.y = selectionPosition.y - headerHeight + scrollTop;\n  }\n  return {\n    x: selectionPosition.x,\n    y: selectionPosition.y\n  };\n};","map":{"version":3,"names":["ReactEditor","useSlateStatic","Editor","Element","useScrollContext","useSelectionPosition","editor","selection","x","y","node","above","mode","match","n","isElement","isBlock","domNode","toDOMNode","rect","getBoundingClientRect","error","useCommentListPosition","selectionPosition","headerHeight","scrollRef","_ref","current","_ref$scrollTop","scrollTop"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/hooks/use-selection-position.js"],"sourcesContent":["import { ReactEditor, useSlateStatic } from '@seafile/slate-react';\nimport { Editor, Element } from '@seafile/slate';\nimport { useScrollContext } from './use-scroll-context';\nexport const useSelectionPosition = () => {\n  const editor = useSlateStatic();\n  if (!editor.selection) return {\n    x: 0,\n    y: 0\n  };\n  const node = Editor.above(editor, {\n    mode: 'lowest',\n    match: n => Element.isElement(n) && Editor.isBlock(editor, n)\n  });\n  if (!node) return {\n    x: 0,\n    y: 0\n  };\n  try {\n    const domNode = ReactEditor.toDOMNode(editor, node[0]);\n    const rect = domNode.getBoundingClientRect();\n    return rect;\n  } catch (error) {\n    // A new node has not yet been indexed, it cannot be retrieved, and the new node has no comment information, just do not display it\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n};\nexport const useCommentListPosition = () => {\n  const selectionPosition = useSelectionPosition();\n  const headerHeight = 100;\n  const scrollRef = useScrollContext();\n  const {\n    scrollTop = 0\n  } = scrollRef.current || {};\n  if (selectionPosition.y !== 0) {\n    selectionPosition.y = selectionPosition.y - headerHeight + scrollTop;\n  }\n  return {\n    x: selectionPosition.x,\n    y: selectionPosition.y\n  };\n};"],"mappings":"AAAA,SAASA,WAAW,EAAEC,cAAc,QAAQ,sBAAsB;AAClE,SAASC,MAAM,EAAEC,OAAO,QAAQ,gBAAgB;AAChD,SAASC,gBAAgB,QAAQ,sBAAsB;AACvD,OAAO,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAAA,EAAS;EACxC,IAAMC,MAAM,GAAGL,cAAc,CAAC,CAAC;EAC/B,IAAI,CAACK,MAAM,CAACC,SAAS,EAAE,OAAO;IAC5BC,CAAC,EAAE,CAAC;IACJC,CAAC,EAAE;EACL,CAAC;EACD,IAAMC,IAAI,GAAGR,MAAM,CAACS,KAAK,CAACL,MAAM,EAAE;IAChCM,IAAI,EAAE,QAAQ;IACdC,KAAK,EAAE,SAAAA,MAAAC,CAAC;MAAA,OAAIX,OAAO,CAACY,SAAS,CAACD,CAAC,CAAC,IAAIZ,MAAM,CAACc,OAAO,CAACV,MAAM,EAAEQ,CAAC,CAAC;IAAA;EAC/D,CAAC,CAAC;EACF,IAAI,CAACJ,IAAI,EAAE,OAAO;IAChBF,CAAC,EAAE,CAAC;IACJC,CAAC,EAAE;EACL,CAAC;EACD,IAAI;IACF,IAAMQ,OAAO,GAAGjB,WAAW,CAACkB,SAAS,CAACZ,MAAM,EAAEI,IAAI,CAAC,CAAC,CAAC,CAAC;IACtD,IAAMS,IAAI,GAAGF,OAAO,CAACG,qBAAqB,CAAC,CAAC;IAC5C,OAAOD,IAAI;EACb,CAAC,CAAC,OAAOE,KAAK,EAAE;IACd;IACA,OAAO;MACLb,CAAC,EAAE,CAAC;MACJC,CAAC,EAAE;IACL,CAAC;EACH;AACF,CAAC;AACD,OAAO,IAAMa,sBAAsB,GAAG,SAAzBA,sBAAsBA,CAAA,EAAS;EAC1C,IAAMC,iBAAiB,GAAGlB,oBAAoB,CAAC,CAAC;EAChD,IAAMmB,YAAY,GAAG,GAAG;EACxB,IAAMC,SAAS,GAAGrB,gBAAgB,CAAC,CAAC;EACpC,IAAAsB,IAAA,GAEID,SAAS,CAACE,OAAO,IAAI,CAAC,CAAC;IAAAC,cAAA,GAAAF,IAAA,CADzBG,SAAS;IAATA,SAAS,GAAAD,cAAA,cAAG,CAAC,GAAAA,cAAA;EAEf,IAAIL,iBAAiB,CAACd,CAAC,KAAK,CAAC,EAAE;IAC7Bc,iBAAiB,CAACd,CAAC,GAAGc,iBAAiB,CAACd,CAAC,GAAGe,YAAY,GAAGK,SAAS;EACtE;EACA,OAAO;IACLrB,CAAC,EAAEe,iBAAiB,CAACf,CAAC;IACtBC,CAAC,EAAEc,iBAAiB,CAACd;EACvB,CAAC;AACH,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}