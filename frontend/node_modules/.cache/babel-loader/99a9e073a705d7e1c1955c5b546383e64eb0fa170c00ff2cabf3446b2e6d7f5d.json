{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.handleShortcut = void 0;\nvar _slate = require(\"slate\");\nvar _helpers = require(\"../helpers\");\nvar _elementTypes = require(\"../../../constants/element-types\");\nvar _core = require(\"../../../core\");\n/**\n * @param {Editor} editor\n * @param {String} text\n * @returns {Boolean} isPreventInsert\n */\nvar handleShortcut = function handleShortcut(editor, text) {\n  if (text !== ' ') return false;\n  var selection = editor.selection;\n  if (!_slate.Range.isCollapsed(selection)) return false;\n  var _slate$Editor$above = _slate.Editor.above(editor),\n    _slate$Editor$above2 = _slicedToArray(_slate$Editor$above, 2),\n    aboveNode = _slate$Editor$above2[0],\n    aboveNodePath = _slate$Editor$above2[1];\n  if (aboveNode.type !== _elementTypes.PARAGRAPH) return false;\n  // Match ordered list shortcut\n  var regOrderListShortcut = /^\\s*[1]+\\.\\s*$/;\n  var regUnorderedListShortcut = /^\\s*\\*+\\s*$/;\n  var _ref = (0, _helpers.getBeforeText)(editor),\n    beforeText = _ref.beforeText,\n    range = _ref.range;\n  var matchOrderListResult = beforeText.match(regOrderListShortcut);\n  var matchUnorderedListResult = beforeText.match(regUnorderedListShortcut);\n  var matchedOrderListText = matchOrderListResult && matchOrderListResult[0];\n  var matchedUnorderedListText = matchUnorderedListResult && matchUnorderedListResult[0];\n  if (matchUnorderedListResult) {\n    // Unordered list shortcut\n    if (matchedUnorderedListText !== '*') return false;\n    if (matchUnorderedListResult.index !== 0) return false;\n    // Delete shortcut key text\n    _slate.Transforms.delete(editor, {\n      at: range\n    });\n    (0, _helpers.setListType)(editor, _elementTypes.UNORDERED_LIST);\n    (0, _core.focusEditor)(editor);\n    return true;\n  } else if (matchOrderListResult) {\n    // Ordered list shortcut\n    // If the match fails or the match is not at the beginning of the line, it is not a shortcut\n    if (matchOrderListResult.index !== 0) return false;\n    if (matchedOrderListText !== '1.') return false;\n    var previousNodePath = (0, _core.getPreviousPath)(aboveNodePath);\n    var previousNodeEntry = null;\n    if (previousNodePath) {\n      previousNodeEntry = _slate.Editor.node(editor, previousNodePath);\n    }\n    // If the previous node is not an ordered list and is start with `1.`,transforms to ordered list\n    if (!previousNodePath || previousNodeEntry[0].type !== _elementTypes.ORDERED_LIST) {\n      // Delete shortcut key text\n      _slate.Transforms.delete(editor, {\n        at: range\n      });\n      (0, _helpers.setListType)(editor, _elementTypes.ORDERED_LIST);\n      (0, _core.focusEditor)(editor);\n      return true;\n    }\n  }\n  return false;\n};\nexports.handleShortcut = handleShortcut;","map":{"version":3,"names":["_slicedToArray","require","default","Object","defineProperty","exports","value","handleShortcut","_slate","_helpers","_elementTypes","_core","editor","text","selection","Range","isCollapsed","_slate$Editor$above","Editor","above","_slate$Editor$above2","aboveNode","aboveNodePath","type","PARAGRAPH","regOrderListShortcut","regUnorderedListShortcut","_ref","getBeforeText","beforeText","range","matchOrderListResult","match","matchUnorderedListResult","matchedOrderListText","matchedUnorderedListText","index","Transforms","delete","at","setListType","UNORDERED_LIST","focusEditor","previousNodePath","getPreviousPath","previousNodeEntry","node","ORDERED_LIST"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/extension/plugins/list/plugin/shortcut.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.handleShortcut = void 0;\nvar _slate = require(\"slate\");\nvar _helpers = require(\"../helpers\");\nvar _elementTypes = require(\"../../../constants/element-types\");\nvar _core = require(\"../../../core\");\n/**\n * @param {Editor} editor\n * @param {String} text\n * @returns {Boolean} isPreventInsert\n */\nconst handleShortcut = (editor, text) => {\n  if (text !== ' ') return false;\n  const {\n    selection\n  } = editor;\n  if (!_slate.Range.isCollapsed(selection)) return false;\n  let [aboveNode, aboveNodePath] = _slate.Editor.above(editor);\n  if (aboveNode.type !== _elementTypes.PARAGRAPH) return false;\n  // Match ordered list shortcut\n  const regOrderListShortcut = /^\\s*[1]+\\.\\s*$/;\n  const regUnorderedListShortcut = /^\\s*\\*+\\s*$/;\n  const {\n    beforeText,\n    range\n  } = (0, _helpers.getBeforeText)(editor);\n  const matchOrderListResult = beforeText.match(regOrderListShortcut);\n  const matchUnorderedListResult = beforeText.match(regUnorderedListShortcut);\n  const matchedOrderListText = matchOrderListResult && matchOrderListResult[0];\n  const matchedUnorderedListText = matchUnorderedListResult && matchUnorderedListResult[0];\n  if (matchUnorderedListResult) {\n    // Unordered list shortcut\n    if (matchedUnorderedListText !== '*') return false;\n    if (matchUnorderedListResult.index !== 0) return false;\n    // Delete shortcut key text\n    _slate.Transforms.delete(editor, {\n      at: range\n    });\n    (0, _helpers.setListType)(editor, _elementTypes.UNORDERED_LIST);\n    (0, _core.focusEditor)(editor);\n    return true;\n  } else if (matchOrderListResult) {\n    // Ordered list shortcut\n    // If the match fails or the match is not at the beginning of the line, it is not a shortcut\n    if (matchOrderListResult.index !== 0) return false;\n    if (matchedOrderListText !== '1.') return false;\n    const previousNodePath = (0, _core.getPreviousPath)(aboveNodePath);\n    let previousNodeEntry = null;\n    if (previousNodePath) {\n      previousNodeEntry = _slate.Editor.node(editor, previousNodePath);\n    }\n    // If the previous node is not an ordered list and is start with `1.`,transforms to ordered list\n    if (!previousNodePath || previousNodeEntry[0].type !== _elementTypes.ORDERED_LIST) {\n      // Delete shortcut key text\n      _slate.Transforms.delete(editor, {\n        at: range\n      });\n      (0, _helpers.setListType)(editor, _elementTypes.ORDERED_LIST);\n      (0, _core.focusEditor)(editor);\n      return true;\n    }\n  }\n  return false;\n};\nexports.handleShortcut = handleShortcut;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}