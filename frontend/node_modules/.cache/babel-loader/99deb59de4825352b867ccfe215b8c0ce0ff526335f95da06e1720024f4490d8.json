{"ast":null,"code":"\"use strict\";\n\nvar _objectSpread = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/objectSpread2.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _slate = require(\"slate\");\nvar _transforms = require(\"../list/transforms\");\nvar _core = require(\"../../core\");\nvar _constants = require(\"../../constants\");\nvar _elementTypes = require(\"../../constants/element-types\");\nvar _helpers = require(\"../blockquote/helpers\");\nvar _helpers2 = require(\"../code-block/helpers\");\nvar KEY_TO_TYPE_FOR_SPACE = {\n  // Title shortcut\n  '#': _elementTypes.HEADER1,\n  '##': _elementTypes.HEADER2,\n  '###': _elementTypes.HEADER3,\n  '####': _elementTypes.HEADER4,\n  '#####': _elementTypes.HEADER5,\n  '######': _elementTypes.HEADER6,\n  // List shortcut\n  '*': _elementTypes.UNORDERED_LIST,\n  '-': _elementTypes.UNORDERED_LIST,\n  // Reference shortcut key\n  '>': _elementTypes.BLOCKQUOTE,\n  '```': _elementTypes.CODE_BLOCK\n};\nvar KEY_TO_INLINE_TYPE_FOR_SPACE = {\n  // Inline shortcut keys\n  '**': _constants.TEXT_STYLE_MAP.BOLD,\n  '*': _constants.TEXT_STYLE_MAP.ITALIC,\n  '***': _constants.TEXT_STYLE_MAP.BOLD_ITALIC,\n  '__': _constants.TEXT_STYLE_MAP.BOLD,\n  '_': _constants.TEXT_STYLE_MAP.ITALIC,\n  '___': _constants.TEXT_STYLE_MAP.BOLD_ITALIC,\n  '`': _constants.TEXT_STYLE_MAP.CODE\n};\nvar getBeforeText = function getBeforeText(editor) {\n  var selection = editor.selection;\n  if (selection == null) return {\n    beforeText: '',\n    range: null\n  };\n  var anchor = selection.anchor;\n  var range = {\n    anchor: anchor,\n    focus: {\n      path: selection.focus.path,\n      offset: 0\n    }\n  };\n  var beforeText = _slate.Editor.string(editor, range) || '';\n  return {\n    beforeText: beforeText,\n    range: range\n  };\n};\nvar withMarkDown = function withMarkDown(editor) {\n  var insertText = editor.insertText;\n  var newEditor = editor;\n\n  // When entering a space, convert markdown\n  newEditor.insertText = function (text) {\n    var selection = editor.selection;\n    if (selection == null) return insertText(text);\n    if (_slate.Range.isExpanded(selection)) return insertText(text);\n    if ((0, _core.getSelectedNodeByType)(editor, _elementTypes.PARAGRAPH) == null) return insertText(text); // It must be in paragraph\n    if (text !== ' ') return insertText(text); // The value must be an input space\n\n    // Gets the text before the space\n    var _getBeforeText = getBeforeText(editor),\n      beforeText = _getBeforeText.beforeText,\n      range = _getBeforeText.range;\n    if (!beforeText || !range) return insertText(text);\n\n    // Based on the keyword, find the type of element you want to convert\n    var type = KEY_TO_TYPE_FOR_SPACE[beforeText.trim()];\n    var italicAndBoldType = KEY_TO_INLINE_TYPE_FOR_SPACE[beforeText.slice(-3)];\n    var boldType = KEY_TO_INLINE_TYPE_FOR_SPACE[beforeText.slice(-2)];\n    var italicType = KEY_TO_INLINE_TYPE_FOR_SPACE[beforeText.slice(-1)];\n    var inlineCode = KEY_TO_INLINE_TYPE_FOR_SPACE[beforeText.slice(-1)];\n    if (!type && !boldType && !italicType && !italicAndBoldType) return insertText(text);\n    if (italicAndBoldType === _constants.TEXT_STYLE_MAP.BOLD_ITALIC) {\n      var SYMBOL = beforeText.slice(-3);\n      var restStr = beforeText === null || beforeText === void 0 ? void 0 : beforeText.slice(0, beforeText.length - 3);\n      var startOffset = restStr === null || restStr === void 0 ? void 0 : restStr.lastIndexOf(SYMBOL);\n      var endOffset = (beforeText === null || beforeText === void 0 ? void 0 : beforeText.lastIndexOf(SYMBOL)) + 3;\n      if (startOffset === -1) {\n        return insertText(text);\n      }\n      if (startOffset !== -3) {\n        _slate.Transforms.delete(editor, {\n          at: {\n            anchor: {\n              path: range.focus.path,\n              offset: startOffset\n            },\n            focus: _objectSpread({}, selection.focus)\n          },\n          voids: true\n        });\n        var newText = beforeText.slice(startOffset + 3, endOffset - 3);\n        _slate.Editor.addMark(editor, _constants.TEXT_STYLE_MAP.BOLD, true);\n        _slate.Editor.addMark(editor, _constants.TEXT_STYLE_MAP.ITALIC, true);\n        insertText(newText);\n        _slate.Editor.removeMark(editor, _constants.TEXT_STYLE_MAP.BOLD);\n        _slate.Editor.removeMark(editor, _constants.TEXT_STYLE_MAP.ITALIC);\n        return;\n      }\n      return;\n    }\n    if (boldType === _constants.TEXT_STYLE_MAP.BOLD) {\n      var _SYMBOL = beforeText.slice(-2);\n      var _restStr = beforeText.slice(0, beforeText.length - 2);\n      var _startOffset = _restStr.lastIndexOf(_SYMBOL);\n      var _endOffset = beforeText.lastIndexOf(_SYMBOL) + 2;\n      if (_startOffset === -1) {\n        return insertText(text);\n      }\n      _slate.Transforms.delete(editor, {\n        at: {\n          anchor: {\n            path: range.focus.path,\n            offset: _startOffset\n          },\n          focus: _objectSpread({}, selection.focus)\n        },\n        voids: true\n      });\n      var newType = boldType.toLowerCase();\n      var _newText = beforeText.slice(_startOffset + 2, _endOffset - 2);\n      _slate.Editor.addMark(editor, newType, true);\n      insertText(_newText);\n      _slate.Editor.removeMark(editor, newType);\n      return;\n    }\n\n    // demos\n    // 1 '*'\n    // 2 'acd * add *'\n    if (italicType === _constants.TEXT_STYLE_MAP.ITALIC) {\n      var _SYMBOL2 = beforeText.slice(-1);\n      var _restStr2 = beforeText === null || beforeText === void 0 ? void 0 : beforeText.slice(0, beforeText.length - 1);\n      var _startOffset2 = _restStr2 === null || _restStr2 === void 0 ? void 0 : _restStr2.lastIndexOf(_SYMBOL2);\n      var _endOffset2 = (beforeText === null || beforeText === void 0 ? void 0 : beforeText.lastIndexOf(_SYMBOL2)) + 1;\n\n      // start: restStr =  '`' | '   `'\n      if (_restStr2 === '' || _restStr2 === '_') {\n        return insertText(text);\n      }\n\n      // end: restStr = '   _' | 'aaaaa_'\n      if (_startOffset2 + 1 === _restStr2.length) {\n        return insertText(text);\n      }\n      if (_startOffset2 === -1 && _restStr2.length > 0) {\n        return insertText(text);\n      }\n      if (_startOffset2 !== -1) {\n        _slate.Transforms.delete(editor, {\n          at: {\n            anchor: {\n              path: range.focus.path,\n              offset: _startOffset2\n            },\n            focus: _objectSpread({}, selection.focus)\n          },\n          voids: true\n        });\n        var _newType = italicType.toLowerCase();\n        var _newText2 = beforeText.slice(_startOffset2 + 1, _endOffset2 - 1);\n        _slate.Editor.addMark(editor, _newType, true);\n        insertText(_newText2);\n        _slate.Editor.removeMark(editor, _newType);\n        return;\n      }\n    }\n    if (type !== _elementTypes.CODE_BLOCK && inlineCode === _constants.TEXT_STYLE_MAP.CODE) {\n      var _restStr3 = beforeText === null || beforeText === void 0 ? void 0 : beforeText.slice(0, beforeText.length - 1);\n      var _startOffset3 = _restStr3 === null || _restStr3 === void 0 ? void 0 : _restStr3.lastIndexOf('`');\n      var _endOffset3 = (beforeText === null || beforeText === void 0 ? void 0 : beforeText.lastIndexOf('`')) + 1;\n\n      // start: restStr =  '`' | '   `'\n      if (_restStr3 === '' || _restStr3 === '`') {\n        return insertText(text);\n      }\n\n      // end: restStr = '   `' | 'aaaaa`'\n      if (_startOffset3 + 1 === _restStr3.length) {\n        return insertText(text);\n      }\n      if (_startOffset3 === -1 && _restStr3.length > 0) {\n        return insertText(text);\n      }\n      if (_startOffset3 !== -1) {\n        _slate.Transforms.delete(editor, {\n          at: {\n            anchor: {\n              path: range.focus.path,\n              offset: _startOffset3\n            },\n            focus: _objectSpread({}, selection.focus)\n          },\n          voids: true\n        });\n        var _newType2 = inlineCode.toLowerCase();\n        var _newText3 = beforeText.slice(_startOffset3 + 1, _endOffset3 - 1);\n        _slate.Editor.addMark(editor, _newType2, true);\n        insertText(_newText3);\n\n        // add space with inline code\n        _slate.Editor.removeMark(editor, _newType2);\n        insertText(' ');\n        return;\n      }\n    }\n\n    // Delete element\n    _slate.Transforms.select(editor, range);\n    _slate.Transforms.delete(editor);\n    if (type === _elementTypes.UNORDERED_LIST) {\n      (0, _transforms.transformsToList)(editor, type);\n      return;\n    }\n    if (type === _elementTypes.BLOCKQUOTE) {\n      (0, _helpers.setBlockQuoteType)(editor, false);\n      return;\n    }\n    if (type === _elementTypes.CODE_BLOCK) {\n      (0, _helpers2.transformToCodeBlock)(editor);\n      return;\n    }\n    _slate.Transforms.setNodes(editor, {\n      type: type\n    });\n  };\n  return newEditor;\n};\nvar _default = exports.default = withMarkDown;","map":{"version":3,"names":["_objectSpread","require","default","Object","defineProperty","exports","value","_slate","_transforms","_core","_constants","_elementTypes","_helpers","_helpers2","KEY_TO_TYPE_FOR_SPACE","HEADER1","HEADER2","HEADER3","HEADER4","HEADER5","HEADER6","UNORDERED_LIST","BLOCKQUOTE","CODE_BLOCK","KEY_TO_INLINE_TYPE_FOR_SPACE","TEXT_STYLE_MAP","BOLD","ITALIC","BOLD_ITALIC","CODE","getBeforeText","editor","selection","beforeText","range","anchor","focus","path","offset","Editor","string","withMarkDown","insertText","newEditor","text","Range","isExpanded","getSelectedNodeByType","PARAGRAPH","_getBeforeText","type","trim","italicAndBoldType","slice","boldType","italicType","inlineCode","SYMBOL","restStr","length","startOffset","lastIndexOf","endOffset","Transforms","delete","at","voids","newText","addMark","removeMark","newType","toLowerCase","select","transformsToList","setBlockQuoteType","transformToCodeBlock","setNodes","_default"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/extension/plugins/markdown/plugin.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _slate = require(\"slate\");\nvar _transforms = require(\"../list/transforms\");\nvar _core = require(\"../../core\");\nvar _constants = require(\"../../constants\");\nvar _elementTypes = require(\"../../constants/element-types\");\nvar _helpers = require(\"../blockquote/helpers\");\nvar _helpers2 = require(\"../code-block/helpers\");\nconst KEY_TO_TYPE_FOR_SPACE = {\n  // Title shortcut\n  '#': _elementTypes.HEADER1,\n  '##': _elementTypes.HEADER2,\n  '###': _elementTypes.HEADER3,\n  '####': _elementTypes.HEADER4,\n  '#####': _elementTypes.HEADER5,\n  '######': _elementTypes.HEADER6,\n  // List shortcut\n  '*': _elementTypes.UNORDERED_LIST,\n  '-': _elementTypes.UNORDERED_LIST,\n  // Reference shortcut key\n  '>': _elementTypes.BLOCKQUOTE,\n  '```': _elementTypes.CODE_BLOCK\n};\nconst KEY_TO_INLINE_TYPE_FOR_SPACE = {\n  // Inline shortcut keys\n  '**': _constants.TEXT_STYLE_MAP.BOLD,\n  '*': _constants.TEXT_STYLE_MAP.ITALIC,\n  '***': _constants.TEXT_STYLE_MAP.BOLD_ITALIC,\n  '__': _constants.TEXT_STYLE_MAP.BOLD,\n  '_': _constants.TEXT_STYLE_MAP.ITALIC,\n  '___': _constants.TEXT_STYLE_MAP.BOLD_ITALIC,\n  '`': _constants.TEXT_STYLE_MAP.CODE\n};\nconst getBeforeText = editor => {\n  const {\n    selection\n  } = editor;\n  if (selection == null) return {\n    beforeText: '',\n    range: null\n  };\n  const {\n    anchor\n  } = selection;\n  const range = {\n    anchor,\n    focus: {\n      path: selection.focus.path,\n      offset: 0\n    }\n  };\n  const beforeText = _slate.Editor.string(editor, range) || '';\n  return {\n    beforeText,\n    range\n  };\n};\nconst withMarkDown = editor => {\n  const {\n    insertText\n  } = editor;\n  const newEditor = editor;\n\n  // When entering a space, convert markdown\n  newEditor.insertText = text => {\n    const {\n      selection\n    } = editor;\n    if (selection == null) return insertText(text);\n    if (_slate.Range.isExpanded(selection)) return insertText(text);\n    if ((0, _core.getSelectedNodeByType)(editor, _elementTypes.PARAGRAPH) == null) return insertText(text); // It must be in paragraph\n    if (text !== ' ') return insertText(text); // The value must be an input space\n\n    // Gets the text before the space\n    const {\n      beforeText,\n      range\n    } = getBeforeText(editor);\n    if (!beforeText || !range) return insertText(text);\n\n    // Based on the keyword, find the type of element you want to convert\n    const type = KEY_TO_TYPE_FOR_SPACE[beforeText.trim()];\n    const italicAndBoldType = KEY_TO_INLINE_TYPE_FOR_SPACE[beforeText.slice(-3)];\n    const boldType = KEY_TO_INLINE_TYPE_FOR_SPACE[beforeText.slice(-2)];\n    const italicType = KEY_TO_INLINE_TYPE_FOR_SPACE[beforeText.slice(-1)];\n    const inlineCode = KEY_TO_INLINE_TYPE_FOR_SPACE[beforeText.slice(-1)];\n    if (!type && !boldType && !italicType && !italicAndBoldType) return insertText(text);\n    if (italicAndBoldType === _constants.TEXT_STYLE_MAP.BOLD_ITALIC) {\n      const SYMBOL = beforeText.slice(-3);\n      const restStr = beforeText === null || beforeText === void 0 ? void 0 : beforeText.slice(0, beforeText.length - 3);\n      const startOffset = restStr === null || restStr === void 0 ? void 0 : restStr.lastIndexOf(SYMBOL);\n      const endOffset = (beforeText === null || beforeText === void 0 ? void 0 : beforeText.lastIndexOf(SYMBOL)) + 3;\n      if (startOffset === -1) {\n        return insertText(text);\n      }\n      if (startOffset !== -3) {\n        _slate.Transforms.delete(editor, {\n          at: {\n            anchor: {\n              path: range.focus.path,\n              offset: startOffset\n            },\n            focus: {\n              ...selection.focus\n            }\n          },\n          voids: true\n        });\n        const newText = beforeText.slice(startOffset + 3, endOffset - 3);\n        _slate.Editor.addMark(editor, _constants.TEXT_STYLE_MAP.BOLD, true);\n        _slate.Editor.addMark(editor, _constants.TEXT_STYLE_MAP.ITALIC, true);\n        insertText(newText);\n        _slate.Editor.removeMark(editor, _constants.TEXT_STYLE_MAP.BOLD);\n        _slate.Editor.removeMark(editor, _constants.TEXT_STYLE_MAP.ITALIC);\n        return;\n      }\n      return;\n    }\n    if (boldType === _constants.TEXT_STYLE_MAP.BOLD) {\n      const SYMBOL = beforeText.slice(-2);\n      const restStr = beforeText.slice(0, beforeText.length - 2);\n      const startOffset = restStr.lastIndexOf(SYMBOL);\n      const endOffset = beforeText.lastIndexOf(SYMBOL) + 2;\n      if (startOffset === -1) {\n        return insertText(text);\n      }\n      _slate.Transforms.delete(editor, {\n        at: {\n          anchor: {\n            path: range.focus.path,\n            offset: startOffset\n          },\n          focus: {\n            ...selection.focus\n          }\n        },\n        voids: true\n      });\n      const newType = boldType.toLowerCase();\n      const newText = beforeText.slice(startOffset + 2, endOffset - 2);\n      _slate.Editor.addMark(editor, newType, true);\n      insertText(newText);\n      _slate.Editor.removeMark(editor, newType);\n      return;\n    }\n\n    // demos\n    // 1 '*'\n    // 2 'acd * add *'\n    if (italicType === _constants.TEXT_STYLE_MAP.ITALIC) {\n      const SYMBOL = beforeText.slice(-1);\n      const restStr = beforeText === null || beforeText === void 0 ? void 0 : beforeText.slice(0, beforeText.length - 1);\n      const startOffset = restStr === null || restStr === void 0 ? void 0 : restStr.lastIndexOf(SYMBOL);\n      const endOffset = (beforeText === null || beforeText === void 0 ? void 0 : beforeText.lastIndexOf(SYMBOL)) + 1;\n\n      // start: restStr =  '`' | '   `'\n      if (restStr === '' || restStr === '_') {\n        return insertText(text);\n      }\n\n      // end: restStr = '   _' | 'aaaaa_'\n      if (startOffset + 1 === restStr.length) {\n        return insertText(text);\n      }\n      if (startOffset === -1 && restStr.length > 0) {\n        return insertText(text);\n      }\n      if (startOffset !== -1) {\n        _slate.Transforms.delete(editor, {\n          at: {\n            anchor: {\n              path: range.focus.path,\n              offset: startOffset\n            },\n            focus: {\n              ...selection.focus\n            }\n          },\n          voids: true\n        });\n        const newType = italicType.toLowerCase();\n        const newText = beforeText.slice(startOffset + 1, endOffset - 1);\n        _slate.Editor.addMark(editor, newType, true);\n        insertText(newText);\n        _slate.Editor.removeMark(editor, newType);\n        return;\n      }\n    }\n    if (type !== _elementTypes.CODE_BLOCK && inlineCode === _constants.TEXT_STYLE_MAP.CODE) {\n      const restStr = beforeText === null || beforeText === void 0 ? void 0 : beforeText.slice(0, beforeText.length - 1);\n      const startOffset = restStr === null || restStr === void 0 ? void 0 : restStr.lastIndexOf('`');\n      const endOffset = (beforeText === null || beforeText === void 0 ? void 0 : beforeText.lastIndexOf('`')) + 1;\n\n      // start: restStr =  '`' | '   `'\n      if (restStr === '' || restStr === '`') {\n        return insertText(text);\n      }\n\n      // end: restStr = '   `' | 'aaaaa`'\n      if (startOffset + 1 === restStr.length) {\n        return insertText(text);\n      }\n      if (startOffset === -1 && restStr.length > 0) {\n        return insertText(text);\n      }\n      if (startOffset !== -1) {\n        _slate.Transforms.delete(editor, {\n          at: {\n            anchor: {\n              path: range.focus.path,\n              offset: startOffset\n            },\n            focus: {\n              ...selection.focus\n            }\n          },\n          voids: true\n        });\n        const newType = inlineCode.toLowerCase();\n        const newText = beforeText.slice(startOffset + 1, endOffset - 1);\n        _slate.Editor.addMark(editor, newType, true);\n        insertText(newText);\n\n        // add space with inline code\n        _slate.Editor.removeMark(editor, newType);\n        insertText(' ');\n        return;\n      }\n    }\n\n    // Delete element\n    _slate.Transforms.select(editor, range);\n    _slate.Transforms.delete(editor);\n    if (type === _elementTypes.UNORDERED_LIST) {\n      (0, _transforms.transformsToList)(editor, type);\n      return;\n    }\n    if (type === _elementTypes.BLOCKQUOTE) {\n      (0, _helpers.setBlockQuoteType)(editor, false);\n      return;\n    }\n    if (type === _elementTypes.CODE_BLOCK) {\n      (0, _helpers2.transformToCodeBlock)(editor);\n      return;\n    }\n    _slate.Transforms.setNodes(editor, {\n      type\n    });\n  };\n  return newEditor;\n};\nvar _default = exports.default = withMarkDown;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}