{"ast":null,"code":"import _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useCallback, useState } from 'react';\nimport { useSlateStatic } from '@seafile/slate-react';\nimport classnames from 'classnames';\nimport { useResizeHandlersContext, useTableRootScrollLeftContext, useTableRootContext } from '../../hooks';\nimport ColumnHeader from './column-header';\nimport { insertTableColumn } from '../../../helpers';\nimport { TABLE_ELEMENT_POSITION } from '../../../constants';\nvar ColumnsHeader = function ColumnsHeader(_ref) {\n  var table = _ref.table,\n    selectRange = _ref.selectRange,\n    tableSize = _ref.tableSize,\n    handleDragStart = _ref.handleDragStart,\n    handleDragEnd = _ref.handleDragEnd;\n  var editor = useSlateStatic();\n  var _useState = useState(0),\n    _useState2 = _slicedToArray(_useState, 2),\n    insertColumnIndex = _useState2[0],\n    setInsertColumnIndex = _useState2[1];\n  var _useState3 = useState(),\n    _useState4 = _slicedToArray(_useState3, 2),\n    addIconPosition = _useState4[0],\n    setAddIconPosition = _useState4[1];\n  var columns = useResizeHandlersContext();\n  var tableRootScrollLeft = useTableRootScrollLeftContext();\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    isHoverInAddIcon = _useState6[0],\n    setIsHoverInAddIcon = _useState6[1];\n  var tableRootContent = useTableRootContext();\n  var onMouseLeave = useCallback(function () {\n    setAddIconPosition();\n    setInsertColumnIndex(0);\n    setIsHoverInAddIcon(false);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [table, columns, tableSize]);\n  var _onMouseEnter = useCallback(function (addIconPosition) {\n    setAddIconPosition(addIconPosition);\n    setIsHoverInAddIcon(true);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [table, columns, tableSize]);\n  var insertColumn = useCallback(function (insertColumnIndex) {\n    var validInsertColumnIndex = insertColumnIndex === -1 ? 0 : insertColumnIndex;\n    var insertColumnPosition = insertColumnIndex === -1 ? TABLE_ELEMENT_POSITION.BEFORE : TABLE_ELEMENT_POSITION.AFTER;\n    insertTableColumn(editor, table, validInsertColumnIndex, insertColumnPosition, 1);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [table, columns, tableSize]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-table-columns-header position-absolute d-print-none\",\n    contentEditable: false\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-table-columns-header-container h-100 d-flex position-absolute\",\n    style: {\n      left: -1 * tableRootScrollLeft\n    }\n  }, columns.map(function (column, index) {\n    return /*#__PURE__*/React.createElement(ColumnHeader, {\n      key: index,\n      column: column,\n      index: index,\n      addIconPosition: addIconPosition,\n      tableSize: tableSize,\n      setAddIconPosition: setAddIconPosition,\n      setInsertColumnIndex: setInsertColumnIndex,\n      selectRange: selectRange,\n      handleDragStart: handleDragStart,\n      handleDragEnd: handleDragEnd\n    });\n  }))), addIconPosition && /*#__PURE__*/React.createElement(\"div\", {\n    className: classnames('position-fixed sdoc-table-add-element-icon-content', {\n      'background-color-tip-blue': isHoverInAddIcon\n    }),\n    contentEditable: false,\n    style: addIconPosition,\n    onMouseEnter: function onMouseEnter() {\n      return _onMouseEnter(addIconPosition);\n    },\n    onMouseLeave: onMouseLeave,\n    onClick: function onClick() {\n      return insertColumn(insertColumnIndex);\n    }\n  }, '+'), addIconPosition && isHoverInAddIcon && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"position-fixed sdoc-table-add-element-tip background-color-tip-blue\",\n    style: {\n      left: (addIconPosition === null || addIconPosition === void 0 ? void 0 : addIconPosition.left) + 5,\n      top: (addIconPosition === null || addIconPosition === void 0 ? void 0 : addIconPosition.top) + 12,\n      width: 2,\n      height: tableRootContent.clientHeight,\n      zIndex: 1\n    }\n  }));\n};\nexport default ColumnsHeader;","map":{"version":3,"names":["React","useCallback","useState","useSlateStatic","classnames","useResizeHandlersContext","useTableRootScrollLeftContext","useTableRootContext","ColumnHeader","insertTableColumn","TABLE_ELEMENT_POSITION","ColumnsHeader","_ref","table","selectRange","tableSize","handleDragStart","handleDragEnd","editor","_useState","_useState2","_slicedToArray","insertColumnIndex","setInsertColumnIndex","_useState3","_useState4","addIconPosition","setAddIconPosition","columns","tableRootScrollLeft","_useState5","_useState6","isHoverInAddIcon","setIsHoverInAddIcon","tableRootContent","onMouseLeave","onMouseEnter","insertColumn","validInsertColumnIndex","insertColumnPosition","BEFORE","AFTER","createElement","Fragment","className","contentEditable","style","left","map","column","index","key","onClick","top","width","height","clientHeight","zIndex"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/extension/plugins/table/render/table-header/columns-header/index.js"],"sourcesContent":["import React, { useCallback, useState } from 'react';\nimport { useSlateStatic } from '@seafile/slate-react';\nimport classnames from 'classnames';\nimport { useResizeHandlersContext, useTableRootScrollLeftContext, useTableRootContext } from '../../hooks';\nimport ColumnHeader from './column-header';\nimport { insertTableColumn } from '../../../helpers';\nimport { TABLE_ELEMENT_POSITION } from '../../../constants';\nconst ColumnsHeader = _ref => {\n  let {\n    table,\n    selectRange,\n    tableSize,\n    handleDragStart,\n    handleDragEnd\n  } = _ref;\n  const editor = useSlateStatic();\n  const [insertColumnIndex, setInsertColumnIndex] = useState(0);\n  const [addIconPosition, setAddIconPosition] = useState();\n  const columns = useResizeHandlersContext();\n  const tableRootScrollLeft = useTableRootScrollLeftContext();\n  const [isHoverInAddIcon, setIsHoverInAddIcon] = useState(false);\n  const tableRootContent = useTableRootContext();\n  const onMouseLeave = useCallback(() => {\n    setAddIconPosition();\n    setInsertColumnIndex(0);\n    setIsHoverInAddIcon(false);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [table, columns, tableSize]);\n  const onMouseEnter = useCallback(addIconPosition => {\n    setAddIconPosition(addIconPosition);\n    setIsHoverInAddIcon(true);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [table, columns, tableSize]);\n  const insertColumn = useCallback(insertColumnIndex => {\n    const validInsertColumnIndex = insertColumnIndex === -1 ? 0 : insertColumnIndex;\n    const insertColumnPosition = insertColumnIndex === -1 ? TABLE_ELEMENT_POSITION.BEFORE : TABLE_ELEMENT_POSITION.AFTER;\n    insertTableColumn(editor, table, validInsertColumnIndex, insertColumnPosition, 1);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [table, columns, tableSize]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-table-columns-header position-absolute d-print-none\",\n    contentEditable: false\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-table-columns-header-container h-100 d-flex position-absolute\",\n    style: {\n      left: -1 * tableRootScrollLeft\n    }\n  }, columns.map((column, index) => {\n    return /*#__PURE__*/React.createElement(ColumnHeader, {\n      key: index,\n      column: column,\n      index: index,\n      addIconPosition: addIconPosition,\n      tableSize: tableSize,\n      setAddIconPosition: setAddIconPosition,\n      setInsertColumnIndex: setInsertColumnIndex,\n      selectRange: selectRange,\n      handleDragStart: handleDragStart,\n      handleDragEnd: handleDragEnd\n    });\n  }))), addIconPosition && /*#__PURE__*/React.createElement(\"div\", {\n    className: classnames('position-fixed sdoc-table-add-element-icon-content', {\n      'background-color-tip-blue': isHoverInAddIcon\n    }),\n    contentEditable: false,\n    style: addIconPosition,\n    onMouseEnter: () => onMouseEnter(addIconPosition),\n    onMouseLeave: onMouseLeave,\n    onClick: () => insertColumn(insertColumnIndex)\n  }, '+'), addIconPosition && isHoverInAddIcon && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"position-fixed sdoc-table-add-element-tip background-color-tip-blue\",\n    style: {\n      left: (addIconPosition === null || addIconPosition === void 0 ? void 0 : addIconPosition.left) + 5,\n      top: (addIconPosition === null || addIconPosition === void 0 ? void 0 : addIconPosition.top) + 12,\n      width: 2,\n      height: tableRootContent.clientHeight,\n      zIndex: 1\n    }\n  }));\n};\nexport default ColumnsHeader;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}