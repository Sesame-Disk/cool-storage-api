{"ast":null,"code":"import _classCallCheck from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React from 'react';\nimport { withTranslation } from 'react-i18next';\nimport { EventBus } from '../../basic-sdk';\nimport { EXTERNAL_EVENT } from '../../constants';\nimport './style.css';\nvar DraftDropdownMenu = /*#__PURE__*/function (_React$Component) {\n  _inherits(DraftDropdownMenu, _React$Component);\n  var _super = _createSuper(DraftDropdownMenu);\n  function DraftDropdownMenu(props) {\n    var _this;\n    _classCallCheck(this, DraftDropdownMenu);\n    _this = _super.call(this, props);\n    _defineProperty(_assertThisInitialized(_this), \"registerEventHandler\", function () {\n      document.addEventListener('click', _this.onHideDraftDropdownMenu);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"unregisterEventHandler\", function () {\n      document.removeEventListener('click', _this.onHideDraftDropdownMenu);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onHideDraftDropdownMenu\", function () {\n      _this.setState({\n        isDropdownMenuOpen: false\n      }, function () {\n        _this.unregisterEventHandler();\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onToggleClick\", function (event) {\n      event.stopPropagation();\n      event.nativeEvent.stopImmediatePropagation();\n      var isDropdownMenuOpen = !_this.state.isDropdownMenuOpen;\n      if (isDropdownMenuOpen) {\n        _this.setState({\n          isDropdownMenuOpen: isDropdownMenuOpen\n        }, function () {\n          _this.registerEventHandler();\n        });\n      } else {\n        _this.setState({\n          isDropdownMenuOpen: isDropdownMenuOpen\n        }, function () {\n          _this.unregisterEventHandler();\n        });\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"unmark\", function () {\n      var eventBus = EventBus.getInstance();\n      eventBus.dispatch(EXTERNAL_EVENT.UNMARK_AS_DRAFT);\n    });\n    _this.state = {\n      isDropdownMenuOpen: false\n    };\n    return _this;\n  }\n  _createClass(DraftDropdownMenu, [{\n    key: \"render\",\n    value: function render() {\n      var isDropdownMenuOpen = this.state.isDropdownMenuOpen;\n      var t = this.props.t;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sdoc-draft-menu\"\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"draft-toggle sdoc-draft-identifier\",\n        onClick: this.onToggleClick\n      }, t('Draft')), isDropdownMenuOpen && /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"draft-popover list-unstyled m-0\"\n      }, /*#__PURE__*/React.createElement(\"li\", {\n        className: \"draft-menu-item\",\n        onClick: this.unmark\n      }, t('Unmark_as_draft'))));\n    }\n  }]);\n  return DraftDropdownMenu;\n}(React.Component);\nexport default withTranslation('sdoc-editor')(DraftDropdownMenu);","map":{"version":3,"names":["_defineProperty","React","withTranslation","EventBus","EXTERNAL_EVENT","DraftDropdownMenu","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","_assertThisInitialized","document","addEventListener","onHideDraftDropdownMenu","removeEventListener","setState","isDropdownMenuOpen","unregisterEventHandler","event","stopPropagation","nativeEvent","stopImmediatePropagation","state","registerEventHandler","eventBus","getInstance","dispatch","UNMARK_AS_DRAFT","_createClass","key","value","render","t","createElement","className","onClick","onToggleClick","unmark","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/components/draft-dropdown/index.js"],"sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React from 'react';\nimport { withTranslation } from 'react-i18next';\nimport { EventBus } from '../../basic-sdk';\nimport { EXTERNAL_EVENT } from '../../constants';\nimport './style.css';\nclass DraftDropdownMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    _defineProperty(this, \"registerEventHandler\", () => {\n      document.addEventListener('click', this.onHideDraftDropdownMenu);\n    });\n    _defineProperty(this, \"unregisterEventHandler\", () => {\n      document.removeEventListener('click', this.onHideDraftDropdownMenu);\n    });\n    _defineProperty(this, \"onHideDraftDropdownMenu\", () => {\n      this.setState({\n        isDropdownMenuOpen: false\n      }, () => {\n        this.unregisterEventHandler();\n      });\n    });\n    _defineProperty(this, \"onToggleClick\", event => {\n      event.stopPropagation();\n      event.nativeEvent.stopImmediatePropagation();\n      const isDropdownMenuOpen = !this.state.isDropdownMenuOpen;\n      if (isDropdownMenuOpen) {\n        this.setState({\n          isDropdownMenuOpen\n        }, () => {\n          this.registerEventHandler();\n        });\n      } else {\n        this.setState({\n          isDropdownMenuOpen\n        }, () => {\n          this.unregisterEventHandler();\n        });\n      }\n    });\n    _defineProperty(this, \"unmark\", () => {\n      const eventBus = EventBus.getInstance();\n      eventBus.dispatch(EXTERNAL_EVENT.UNMARK_AS_DRAFT);\n    });\n    this.state = {\n      isDropdownMenuOpen: false\n    };\n  }\n  render() {\n    const {\n      isDropdownMenuOpen\n    } = this.state;\n    const {\n      t\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sdoc-draft-menu\"\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"draft-toggle sdoc-draft-identifier\",\n      onClick: this.onToggleClick\n    }, t('Draft')), isDropdownMenuOpen && /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"draft-popover list-unstyled m-0\"\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      className: \"draft-menu-item\",\n      onClick: this.unmark\n    }, t('Unmark_as_draft'))));\n  }\n}\nexport default withTranslation('sdoc-editor')(DraftDropdownMenu);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}