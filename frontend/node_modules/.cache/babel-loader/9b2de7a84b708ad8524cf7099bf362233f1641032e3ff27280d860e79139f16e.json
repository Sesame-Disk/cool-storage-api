{"ast":null,"code":"import { Editor, Path } from '@seafile/slate';\nimport { PARAGRAPH } from '../../../constants';\nimport { getNodeEntries } from '../../../core';\nimport { isListNested } from '../queries';\nimport { movedListItemDown } from './move-list-item-down';\nimport { movedListItemUp } from './move-list-item-up';\nimport { removeFirstListItem } from './remove-first-list-item';\nexport var moveListItems = function moveListItems(editor) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n    _ref$increase = _ref.increase,\n    increase = _ref$increase === void 0 ? true : _ref$increase,\n    _ref$at = _ref.at,\n    at = _ref$at === void 0 ? editor.selection : _ref$at,\n    enableResetOnShiftTab = _ref.enableResetOnShiftTab;\n  var _nodes = getNodeEntries(editor, {\n    at: at,\n    match: {\n      type: [PARAGRAPH]\n    }\n  });\n  var lics = Array.from(_nodes);\n  if (!lics.length) return;\n  var highestLicPaths = [];\n  var highestLicPathRefs = [];\n  lics.forEach(function (lic) {\n    var licPath = lic[1];\n    var liPath = Path.parent(licPath);\n    var isAncestor = highestLicPaths.some(function (path) {\n      var highestLiPath = Path.parent(path);\n      return Path.isAncestor(highestLiPath, liPath);\n    });\n    if (!isAncestor) {\n      highestLicPaths.push(licPath);\n      highestLicPathRefs.push(Editor.pathRef(editor, licPath));\n    }\n  });\n  var licPathRefsToMove = increase ? highestLicPathRefs : highestLicPathRefs.reverse();\n  var moved = false;\n  licPathRefsToMove.forEach(function (licPathRef) {\n    var licPath = licPathRef.unref();\n    if (!licPath) return;\n    var listItem = Editor.parent(editor, licPath);\n    if (!listItem || listItem[1].length === 0) return;\n    var parentList = Editor.parent(editor, listItem[1]);\n    if (!parentList) return;\n    var _moved = false;\n    if (increase) {\n      _moved = movedListItemDown(editor, {\n        list: parentList,\n        listItem: listItem\n      });\n    } else if (isListNested(editor, parentList[1])) {\n      _moved = movedListItemUp(editor, {\n        list: parentList,\n        listItem: listItem\n      });\n      return _moved;\n    } else if (enableResetOnShiftTab) {\n      _moved = removeFirstListItem(editor, {\n        list: parentList,\n        listItem: listItem\n      });\n    }\n    moved = _moved || moved;\n  });\n  return moved;\n};","map":{"version":3,"names":["Editor","Path","PARAGRAPH","getNodeEntries","isListNested","movedListItemDown","movedListItemUp","removeFirstListItem","moveListItems","editor","_ref","arguments","length","undefined","_ref$increase","increase","_ref$at","at","selection","enableResetOnShiftTab","_nodes","match","type","lics","Array","from","highestLicPaths","highestLicPathRefs","forEach","lic","licPath","liPath","parent","isAncestor","some","path","highestLiPath","push","pathRef","licPathRefsToMove","reverse","moved","licPathRef","unref","listItem","parentList","_moved","list"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/extension/plugins/list/transforms/move-list-items.js"],"sourcesContent":["import { Editor, Path } from '@seafile/slate';\nimport { PARAGRAPH } from '../../../constants';\nimport { getNodeEntries } from '../../../core';\nimport { isListNested } from '../queries';\nimport { movedListItemDown } from './move-list-item-down';\nimport { movedListItemUp } from './move-list-item-up';\nimport { removeFirstListItem } from './remove-first-list-item';\nexport const moveListItems = function (editor) {\n  let {\n    increase = true,\n    at = editor.selection,\n    enableResetOnShiftTab\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const _nodes = getNodeEntries(editor, {\n    at,\n    match: {\n      type: [PARAGRAPH]\n    }\n  });\n  const lics = Array.from(_nodes);\n  if (!lics.length) return;\n  const highestLicPaths = [];\n  const highestLicPathRefs = [];\n  lics.forEach(lic => {\n    const licPath = lic[1];\n    const liPath = Path.parent(licPath);\n    const isAncestor = highestLicPaths.some(path => {\n      const highestLiPath = Path.parent(path);\n      return Path.isAncestor(highestLiPath, liPath);\n    });\n    if (!isAncestor) {\n      highestLicPaths.push(licPath);\n      highestLicPathRefs.push(Editor.pathRef(editor, licPath));\n    }\n  });\n  const licPathRefsToMove = increase ? highestLicPathRefs : highestLicPathRefs.reverse();\n  let moved = false;\n  licPathRefsToMove.forEach(licPathRef => {\n    const licPath = licPathRef.unref();\n    if (!licPath) return;\n    const listItem = Editor.parent(editor, licPath);\n    if (!listItem || listItem[1].length === 0) return;\n    const parentList = Editor.parent(editor, listItem[1]);\n    if (!parentList) return;\n    let _moved = false;\n    if (increase) {\n      _moved = movedListItemDown(editor, {\n        list: parentList,\n        listItem: listItem\n      });\n    } else if (isListNested(editor, parentList[1])) {\n      _moved = movedListItemUp(editor, {\n        list: parentList,\n        listItem: listItem\n      });\n      return _moved;\n    } else if (enableResetOnShiftTab) {\n      _moved = removeFirstListItem(editor, {\n        list: parentList,\n        listItem: listItem\n      });\n    }\n    moved = _moved || moved;\n  });\n  return moved;\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}