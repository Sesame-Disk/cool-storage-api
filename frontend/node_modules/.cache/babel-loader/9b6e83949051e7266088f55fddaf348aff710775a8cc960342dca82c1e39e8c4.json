{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{slug,repoID,historyRepoID}from'./constants';import{seafileAPI}from'./seafile-api';var EditorUtilities=/*#__PURE__*/function(){function EditorUtilities(){_classCallCheck(this,EditorUtilities);}_createClass(EditorUtilities,[{key:\"getFiles\",value:function getFiles(){return seafileAPI.listWikiDir(slug,'/').then(function(items){var files=items.data.dir_file_list.map(function(item){return{name:item.name,type:item.type==='dir'?'dir':'file',isExpanded:item.type==='dir'?true:false,parent_path:item.parent_dir,last_update_time:item.last_update_time,permission:item.permission,size:item.size};});return files;});}},{key:\"listRepoDir\",value:function listRepoDir(){return seafileAPI.listDir(repoID,'/',{recursive:true}).then(function(items){var files=items.data.dirent_list.map(function(item){return{name:item.name,type:item.type==='dir'?'dir':'file',isExpanded:item.type==='dir'?true:false,parent_path:item.parent_dir,last_update_time:item.mtime,permission:item.permission,size:item.size};});return files;});}},{key:\"deleteFile\",value:function deleteFile(filePath){return seafileAPI.deleteFile(repoID,filePath);}},{key:\"renameFile\",value:function renameFile(filePath,newFileName){return seafileAPI.renameFile(repoID,filePath,newFileName);}},{key:\"createDir\",value:function createDir(dirPath){return seafileAPI.createDir(repoID,dirPath);}},{key:\"deleteDir\",value:function deleteDir(dirPath){return seafileAPI.deleteDir(repoID,dirPath);}},{key:\"renameDir\",value:function renameDir(dirPath,newDirName){return seafileAPI.renameDir(repoID,dirPath,newDirName);}},{key:\"getWikiFileContent\",value:function getWikiFileContent(slug,filePath){return seafileAPI.getWikiFileContent(slug,filePath);}},{key:\"getSource\",value:function getSource(){return seafileAPI.getSource();}},{key:\"searchFiles\",value:function searchFiles(queryData,cancelToken){return seafileAPI.searchFiles(queryData,cancelToken);}},{key:\"getAccountInfo\",value:function getAccountInfo(){return seafileAPI.getAccountInfo();}// file history\n},{key:\"getFileDownloadLink\",value:function getFileDownloadLink(filePath){return seafileAPI.getFileDownloadLink(historyRepoID,filePath);}},{key:\"getFileContent\",value:function getFileContent(filePath){return seafileAPI.getFileContent(filePath);}},{key:\"listFileHistoryRecords\",value:function listFileHistoryRecords(filePath,page,per_page){return seafileAPI.listFileHistoryRecords(historyRepoID,filePath,page,per_page);}},{key:\"revertFile\",value:function revertFile(filePath,commitID){return seafileAPI.revertFile(historyRepoID,filePath,commitID);}},{key:\"zipDownload\",value:function zipDownload(parent_dir,dirents){return seafileAPI.zipDownload(repoID,parent_dir,dirents);}},{key:\"queryZipProgress\",value:function queryZipProgress(zip_token){return seafileAPI.queryZipProgress(zip_token);}},{key:\"cancelZipTask\",value:function cancelZipTask(zip_token){return seafileAPI.cancelZipTask(zip_token);}}]);return EditorUtilities;}();var editorUtilities=new EditorUtilities();export default editorUtilities;","map":{"version":3,"names":["slug","repoID","historyRepoID","seafileAPI","EditorUtilities","_classCallCheck","_createClass","key","value","getFiles","listWikiDir","then","items","files","data","dir_file_list","map","item","name","type","isExpanded","parent_path","parent_dir","last_update_time","permission","size","listRepoDir","listDir","recursive","dirent_list","mtime","deleteFile","filePath","renameFile","newFileName","createDir","dirPath","deleteDir","renameDir","newDirName","getWikiFileContent","getSource","searchFiles","queryData","cancelToken","getAccountInfo","getFileDownloadLink","getFileContent","listFileHistoryRecords","page","per_page","revertFile","commitID","zipDownload","dirents","queryZipProgress","zip_token","cancelZipTask","editorUtilities"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/utils/editor-utilities.js"],"sourcesContent":["import { slug, repoID, historyRepoID } from './constants';\nimport { seafileAPI } from './seafile-api';\n\nclass EditorUtilities {\n\n  getFiles() {\n    return seafileAPI.listWikiDir(slug, '/').then(items => {\n      const files = items.data.dir_file_list.map(item => {\n        return {\n          name: item.name,\n          type: item.type === 'dir' ? 'dir' : 'file',\n          isExpanded: item.type === 'dir' ? true : false,\n          parent_path: item.parent_dir,\n          last_update_time: item.last_update_time,\n          permission: item.permission,\n          size: item.size\n        };\n      });\n      return files;\n    });\n  }\n\n  listRepoDir() {\n    return seafileAPI.listDir(repoID, '/',{recursive: true}).then(items => {\n      const files = items.data.dirent_list.map(item => {\n        return {\n          name: item.name,\n          type: item.type === 'dir' ? 'dir' : 'file',\n          isExpanded: item.type === 'dir' ? true : false,\n          parent_path: item.parent_dir,\n          last_update_time: item.mtime,\n          permission: item.permission,\n          size: item.size\n        };\n      });\n\n      return files;\n    });\n  }\n\n  deleteFile(filePath) {\n    return seafileAPI.deleteFile(repoID, filePath);\n  }\n\n  renameFile(filePath, newFileName) {\n    return seafileAPI.renameFile(repoID, filePath, newFileName);\n  }\n\n  createDir(dirPath) {\n    return seafileAPI.createDir(repoID, dirPath);\n  }\n\n  deleteDir(dirPath) {\n    return seafileAPI.deleteDir(repoID, dirPath);\n  }\n\n  renameDir(dirPath, newDirName) {\n    return seafileAPI.renameDir(repoID, dirPath, newDirName);\n  }\n\n  getWikiFileContent(slug, filePath) {\n    return seafileAPI.getWikiFileContent(slug, filePath);\n  }\n\n  getSource() {\n    return seafileAPI.getSource();\n  }\n\n  searchFiles(queryData,cancelToken) {\n    return seafileAPI.searchFiles(queryData,cancelToken);\n  }\n\n  getAccountInfo() {\n    return seafileAPI.getAccountInfo();\n  }\n\n  // file history\n  getFileDownloadLink(filePath) {\n    return seafileAPI.getFileDownloadLink(historyRepoID, filePath);\n  }\n\n  getFileContent(filePath) {\n    return seafileAPI.getFileContent(filePath);\n  }\n\n  listFileHistoryRecords(filePath, page, per_page) {\n    return seafileAPI.listFileHistoryRecords(historyRepoID, filePath, page, per_page);\n  }\n\n  revertFile(filePath, commitID) {\n    return seafileAPI.revertFile(historyRepoID, filePath, commitID);\n  }\n\n  zipDownload(parent_dir, dirents) {\n    return seafileAPI.zipDownload(repoID, parent_dir, dirents);\n  }\n\n  queryZipProgress(zip_token) {\n    return seafileAPI.queryZipProgress(zip_token);\n  }\n\n  cancelZipTask(zip_token) {\n    return seafileAPI.cancelZipTask(zip_token);\n  }\n}\n\nconst editorUtilities = new EditorUtilities();\n\nexport default editorUtilities;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}