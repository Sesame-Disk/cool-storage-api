{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{EXTERNAL_EVENTS,EventBus}from'@seafile/seafile-editor';import{Dropdown,DropdownToggle,DropdownMenu,DropdownItem,Tooltip}from'reactstrap';import{gettext,canGenerateShareLink}from'../../../utils/constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var canDownloadFile=window.app.pageOptions.canDownloadFile;var MoreMenu=/*#__PURE__*/function(_React$PureComponent){_inherits(MoreMenu,_React$PureComponent);var _super=_createSuper(MoreMenu);function MoreMenu(props){var _this;_classCallCheck(this,MoreMenu);_this=_super.call(this,props);_this.tooltipToggle=function(){_this.setState({tooltipOpen:!_this.state.tooltipOpen});};_this.dropdownToggle=function(){_this.setState({dropdownOpen:!_this.state.dropdownOpen});};_this.onHelpModuleToggle=function(event){var eventBus=EventBus.getInstance();eventBus.dispatch(EXTERNAL_EVENTS.ON_HELP_INFO_TOGGLE,true);};_this.downloadFile=function(){location.href='?dl=1';};_this.state={tooltipOpen:false,dropdownOpen:false};return _this;}_createClass(MoreMenu,[{key:\"render\",value:function render(){var editorMode=this.props.editorMode;var isSmall=this.props.isSmallScreen;return/*#__PURE__*/_jsxs(Dropdown,{isOpen:this.state.dropdownOpen,toggle:this.dropdownToggle,direction:\"down\",className:\"mx-1\",children:[/*#__PURE__*/_jsxs(DropdownToggle,{id:\"moreButton\",\"aria-label\":gettext('More operations'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-ellipsis-v\"}),/*#__PURE__*/_jsx(Tooltip,{toggle:this.tooltipToggle,delay:{show:0,hide:0},target:\"moreButton\",placement:\"bottom\",isOpen:this.state.tooltipOpen,children:gettext('More')})]}),/*#__PURE__*/_jsxs(DropdownMenu,{className:\"drop-list\",right:true,children:[!this.props.readOnly&&editorMode==='rich'&&/*#__PURE__*/_jsx(DropdownItem,{onClick:this.props.onEdit.bind(this,'plain'),children:gettext('Switch to plain text editor')}),!this.props.readOnly&&editorMode==='plain'&&/*#__PURE__*/_jsx(DropdownItem,{onClick:this.props.onEdit.bind(this,'rich'),children:gettext('Switch to rich text editor')}),!isSmall&&this.props.showFileHistory&&/*#__PURE__*/_jsx(DropdownItem,{onClick:this.props.toggleHistory,children:gettext('History')}),this.props.openDialogs&&editorMode==='rich'&&/*#__PURE__*/_jsx(DropdownItem,{onClick:this.onHelpModuleToggle,children:gettext('Help')}),isSmall&&/*#__PURE__*/_jsx(DropdownItem,{onClick:this.props.openParentDirectory,children:gettext('Open parent directory')}),isSmall&&canGenerateShareLink&&/*#__PURE__*/_jsx(DropdownItem,{onClick:this.props.toggleShareLinkDialog,children:gettext('Share')}),isSmall&&this.props.showFileHistory&&/*#__PURE__*/_jsx(DropdownItem,{onClick:this.props.toggleHistory,children:gettext('History')}),isSmall&&canDownloadFile&&/*#__PURE__*/_jsx(DropdownItem,{onClick:this.downloadFile,children:gettext('Download')})]})]});}}]);return MoreMenu;}(React.PureComponent);export default MoreMenu;","map":{"version":3,"names":["React","EXTERNAL_EVENTS","EventBus","Dropdown","DropdownToggle","DropdownMenu","DropdownItem","Tooltip","gettext","canGenerateShareLink","jsx","_jsx","jsxs","_jsxs","canDownloadFile","window","app","pageOptions","MoreMenu","_React$PureComponent","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","tooltipToggle","setState","tooltipOpen","state","dropdownToggle","dropdownOpen","onHelpModuleToggle","event","eventBus","getInstance","dispatch","ON_HELP_INFO_TOGGLE","downloadFile","location","href","_createClass","key","value","render","editorMode","isSmall","isSmallScreen","isOpen","toggle","direction","className","children","id","delay","show","hide","target","placement","right","readOnly","onClick","onEdit","bind","showFileHistory","toggleHistory","openDialogs","openParentDirectory","toggleShareLinkDialog","PureComponent"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/markdown-editor/header-toolbar/more-menu.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { EXTERNAL_EVENTS, EventBus } from '@seafile/seafile-editor';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem, Tooltip } from 'reactstrap';\nimport { gettext, canGenerateShareLink } from '../../../utils/constants';\n\nconst { canDownloadFile } = window.app.pageOptions;\n\nconst MoreMenuPropTypes = {\n  readOnly: PropTypes.bool.isRequired,\n  openDialogs: PropTypes.func.isRequired,\n  onEdit: PropTypes.func.isRequired,\n  editorMode: PropTypes.string.isRequired,\n  isSmallScreen: PropTypes.bool,\n  toggleShareLinkDialog: PropTypes.func,\n  openParentDirectory: PropTypes.func,\n  showFileHistory: PropTypes.bool,\n  toggleHistory: PropTypes.func,\n};\n\nclass MoreMenu extends React.PureComponent {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tooltipOpen: false,\n      dropdownOpen:false\n    };\n  }\n\n  tooltipToggle = () => {\n    this.setState({ tooltipOpen: !this.state.tooltipOpen });\n  };\n\n  dropdownToggle = () => {\n    this.setState({ dropdownOpen: !this.state.dropdownOpen });\n  };\n\n  onHelpModuleToggle = (event) => {\n    const eventBus = EventBus.getInstance();\n    eventBus.dispatch(EXTERNAL_EVENTS.ON_HELP_INFO_TOGGLE, true);\n  };\n\n  downloadFile = () => {\n    location.href = '?dl=1';\n  };\n\n  render() {\n    const editorMode = this.props.editorMode;\n    const isSmall = this.props.isSmallScreen;\n    return (\n      <Dropdown isOpen={this.state.dropdownOpen} toggle={this.dropdownToggle} direction=\"down\" className=\"mx-1\">\n        <DropdownToggle id=\"moreButton\" aria-label={gettext('More operations')}>\n          <i className=\"fa fa-ellipsis-v\"/>\n          <Tooltip toggle={this.tooltipToggle} delay={{show: 0, hide: 0}} target=\"moreButton\" placement='bottom' isOpen={this.state.tooltipOpen}>{gettext('More')}\n          </Tooltip>\n        </DropdownToggle>\n        <DropdownMenu className=\"drop-list\" right={true}>\n          {(!this.props.readOnly && editorMode === 'rich') &&\n            <DropdownItem onClick={this.props.onEdit.bind(this, 'plain')}>{gettext('Switch to plain text editor')}</DropdownItem>}\n          {(!this.props.readOnly && editorMode === 'plain') &&\n            <DropdownItem onClick={this.props.onEdit.bind(this, 'rich')}>{gettext('Switch to rich text editor')}</DropdownItem>}\n          {!isSmall && this.props.showFileHistory &&\n            <DropdownItem onClick={this.props.toggleHistory}>{gettext('History')}</DropdownItem>}\n          {(this.props.openDialogs && editorMode === 'rich') &&\n            <DropdownItem onClick={this.onHelpModuleToggle}>{gettext('Help')}</DropdownItem>\n          }\n          {isSmall && <DropdownItem onClick={this.props.openParentDirectory}>{gettext('Open parent directory')}</DropdownItem>}\n          {isSmall && canGenerateShareLink && <DropdownItem onClick={this.props.toggleShareLinkDialog}>{gettext('Share')}</DropdownItem>}\n          {(isSmall && this.props.showFileHistory) &&\n            <DropdownItem onClick={this.props.toggleHistory}>{gettext('History')}</DropdownItem>\n          }\n          {isSmall && canDownloadFile &&\n            <DropdownItem onClick={this.downloadFile}>{gettext('Download')}</DropdownItem>\n          }\n        </DropdownMenu>\n      </Dropdown>\n    );\n  }\n}\n\nMoreMenu.propTypes = MoreMenuPropTypes;\n\nexport default MoreMenu;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}