{"ast":null,"code":"import _regeneratorRuntime from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Fragment}from'react';import MD5 from'MD5';import ReactDom from'react-dom';import{Button,Dropdown,DropdownToggle,DropdownItem,UncontrolledTooltip}from'reactstrap';import moment from'moment';import Account from'./components/common/account';import{useGoFileserver,fileServerRoot,gettext,siteRoot,mediaUrl,logoPath,logoWidth,logoHeight,siteTitle,thumbnailSizeForOriginal}from'./utils/constants';import{Utils}from'./utils/utils';import{seafileAPI}from'./utils/seafile-api';import Loading from'./components/loading';import toaster from'./components/toast';import ModalPortal from'./components/modal-portal';import ZipDownloadDialog from'./components/dialog/zip-download-dialog';import ImageDialog from'./components/dialog/image-dialog';import FileUploader from'./components/shared-link-file-uploader/file-uploader';import SaveSharedDirDialog from'./components/dialog/save-shared-dir-dialog';import CopyMoveDirentProgressDialog from'./components/dialog/copy-move-dirent-progress-dialog';import RepoInfoBar from'./components/repo-info-bar';import RepoTag from'./models/repo-tag';import InsertAd from'./services/ad';import'./css/shared-dir-view.css';import'./css/grid-view.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";moment.locale(window.app.config.lang);var loginUser=window.app.pageOptions.name;var _window$shared$pageOp=window.shared.pageOptions,token=_window$shared$pageOp.token,dirName=_window$shared$pageOp.dirName,dirPath=_window$shared$pageOp.dirPath,sharedBy=_window$shared$pageOp.sharedBy,repoID=_window$shared$pageOp.repoID,relativePath=_window$shared$pageOp.relativePath,mode=_window$shared$pageOp.mode,thumbnailSize=_window$shared$pageOp.thumbnailSize,zipped=_window$shared$pageOp.zipped,trafficOverLimit=_window$shared$pageOp.trafficOverLimit,canDownload=_window$shared$pageOp.canDownload,noQuota=_window$shared$pageOp.noQuota,canUpload=_window$shared$pageOp.canUpload,enableVideoThumbnail=_window$shared$pageOp.enableVideoThumbnail;var showDownloadIcon=!trafficOverLimit&&canDownload;var SharedDirView=/*#__PURE__*/function(_React$Component){_inherits(SharedDirView,_React$Component);var _super=_createSuper(SharedDirView);function SharedDirView(props){var _this2;_classCallCheck(this,SharedDirView);_this2=_super.call(this,props);_this2.sortItems=function(sortBy,sortOrder){_this2.setState({sortBy:sortBy,sortOrder:sortOrder,items:Utils.sortDirentsInSharedDir(_this2.state.items,sortBy,sortOrder)});};_this2.getThumbnails=function(){var items=_this2.state.items.filter(function(item){return!item.is_dir&&(Utils.imageCheck(item.file_name)||enableVideoThumbnail&&Utils.videoCheck(item.file_name))&&!item.encoded_thumbnail_src;});if(items.length==0){return;}var len=items.length;var _this=_assertThisInitialized(_this2);var getThumbnail=function getThumbnail(i){var curItem=items[i];seafileAPI.getShareLinkThumbnail(token,curItem.file_path,thumbnailSize).then(function(res){curItem.encoded_thumbnail_src=res.data.encoded_thumbnail_src;}).catch(function(error){// do nothing\n}).then(function(){if(i<len-1){getThumbnail(++i);}else{// when done, `setState()`\n_this.setState({items:_this.state.items});}});};getThumbnail(0);};_this2.renderPath=function(){return/*#__PURE__*/_jsxs(React.Fragment,{children:[zipped.map(function(item,index){if(index!=zipped.length-1){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"a\",{href:\"?p=\".concat(encodeURIComponent(item.path),\"&mode=\").concat(mode),className:\"mx-1 ellipsis\",title:item.name,children:item.name}),/*#__PURE__*/_jsx(\"span\",{children:\" / \"})]},index);}return null;}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-1 ellipsis\",title:zipped[zipped.length-1].name,children:zipped[zipped.length-1].name})]});};_this2.zipDownloadFolder=function(folderPath){if(!useGoFileserver){_this2.setState({isZipDialogOpen:true,zipFolderPath:folderPath});}else{seafileAPI.getShareLinkZipTask(token,folderPath).then(function(res){var zipToken=res.data['zip_token'];location.href=\"\".concat(fileServerRoot,\"zip/\").concat(zipToken);}).catch(function(error){var errorMsg=Utils.getErrorMsg(error);_this2.setState({isLoading:false,errorMsg:errorMsg});});}};_this2.zipDownloadSelectedItems=function(){if(!useGoFileserver){_this2.setState({isZipDialogOpen:true,zipFolderPath:relativePath,selectedItems:_this2.state.items.filter(function(item){return item.isSelected;}).map(function(item){return item.file_name||item.folder_name;})});}else{var target=_this2.state.items.filter(function(item){return item.isSelected;}).map(function(item){return item.file_name||item.folder_name;});seafileAPI.getShareLinkDirentsZipTask(token,relativePath,target).then(function(res){var zipToken=res.data['zip_token'];location.href=\"\".concat(fileServerRoot,\"zip/\").concat(zipToken);}).catch(function(error){var errorMsg=Utils.getErrorMsg(error);_this2.setState({isLoading:false,errorMsg:errorMsg});});}};_this2.saveSelectedItems=function(){_this2.setState({isSaveSharedDirDialogShow:true,itemsForSave:_this2.state.items.filter(function(item){return item.isSelected;}).map(function(item){return item.file_name||item.folder_name;})});};_this2.saveAllItems=function(){_this2.setState({isSaveSharedDirDialogShow:true,itemsForSave:_this2.state.items.map(function(item){return item.file_name||item.folder_name;})});};_this2.toggleSaveSharedDirCancel=function(){_this2.setState({isSaveSharedDirDialogShow:false,itemsForSave:[]});};_this2.handleSaveSharedDir=function(destRepoID,dstPath){var itemsForSave=_this2.state.itemsForSave;seafileAPI.saveSharedDir(destRepoID,dstPath,token,relativePath,itemsForSave).then(function(res){_this2.setState({isSaveSharedDirDialogShow:false,itemsForSave:[],isCopyMoveProgressDialogShow:true,asyncCopyMoveTaskId:res.data.task_id,asyncOperatedFilesLength:itemsForSave.length},function(){_this2.getAsyncCopyMoveProgress();});}).catch(function(error){var errMessage=Utils.getErrorMsg(error);_this2.setState({errMessage:errMessage});});};_this2.onProgressDialogToggle=function(){var asyncOperationProgress=_this2.state.asyncOperationProgress;if(asyncOperationProgress!==100){var taskId=_this2.state.asyncCopyMoveTaskId;seafileAPI.cancelCopyMoveOperation(taskId);}_this2.setState({asyncOperationProgress:0,isCopyMoveProgressDialogShow:false});};_this2.closeZipDialog=function(){_this2.setState({isZipDialogOpen:false,zipFolderPath:'',selectedItems:[]});};// for image popup\n_this2.prepareImageItem=function(item){var name=item.file_name;var fileExt=name.substr(name.lastIndexOf('.')+1).toLowerCase();var isGIF=fileExt=='gif';var src;var fileURL=\"\".concat(siteRoot,\"d/\").concat(token,\"/files/?p=\").concat(encodeURIComponent(item.file_path));if(!isGIF){src=\"\".concat(siteRoot,\"thumbnail/\").concat(token,\"/\").concat(thumbnailSizeForOriginal).concat(Utils.encodePath(item.file_path));}else{src=\"\".concat(fileURL,\"&raw=1\");}return{'name':name,'url':fileURL,'src':src};};_this2.showImagePopup=function(curItem){var items=_this2.state.items.filter(function(item){return!item.is_dir&&Utils.imageCheck(item.file_name);});var imageItems=items.map(function(item){return _this2.prepareImageItem(item);});_this2.setState({isImagePopupOpen:true,imageItems:imageItems,imageIndex:items.indexOf(curItem)});};_this2.closeImagePopup=function(){_this2.setState({isImagePopupOpen:false});};_this2.moveToPrevImage=function(){var imageItemsLength=_this2.state.imageItems.length;_this2.setState(function(prevState){return{imageIndex:(prevState.imageIndex+imageItemsLength-1)%imageItemsLength};});};_this2.moveToNextImage=function(){var imageItemsLength=_this2.state.imageItems.length;_this2.setState(function(prevState){return{imageIndex:(prevState.imageIndex+1)%imageItemsLength};});};_this2.toggleAllSelected=function(){_this2.setState(function(prevState){return{isAllItemsSelected:!prevState.isAllItemsSelected,items:_this2.state.items.map(function(item){item.isSelected=!prevState.isAllItemsSelected;return item;})};});};_this2.toggleItemSelected=function(targetItem,isSelected){_this2.setState({items:_this2.state.items.map(function(item){if(item===targetItem){item.isSelected=isSelected;}return item;})},function(){_this2.setState({isAllItemsSelected:!_this2.state.items.some(function(item){return!item.isSelected;})});});};_this2.onUploadFile=function(e){e.nativeEvent.stopImmediatePropagation();_this2.uploader.onFileUpload();};_this2.onFileUploadSuccess=function(direntObject){var name=direntObject.name,size=direntObject.size;var newItem={isSelected:false,file_name:name,file_path:Utils.joinPath(relativePath,name),is_dir:false,last_modified:moment().format(),size:size};var folderItems=_this2.state.items.filter(function(item){return item.is_dir;});// put the new file as the first file\nvar items=Array.from(_this2.state.items);items.splice(folderItems.length,0,newItem);_this2.setState({items:items});seafileAPI.shareLinksUploadDone(token,Utils.joinPath(dirPath,name));};_this2.getShareLinkRepoTags=function(){seafileAPI.getShareLinkRepoTags(token).then(function(res){var usedRepoTags=[];res.data.repo_tags.forEach(function(item){var usedRepoTag=new RepoTag(item);if(usedRepoTag.fileCount>0){usedRepoTags.push(usedRepoTag);}});_this2.setState({usedRepoTags:usedRepoTags});if(usedRepoTags.length!=0&&relativePath=='/'){_this2.setState({isRepoInfoBarShow:true});}}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this2.state={isLoading:true,errorMsg:'',items:[],isAllItemsSelected:false,selectedItems:[],sortBy:'name',// 'name' or 'time' or 'size'\nsortOrder:'asc',// 'asc' or 'desc'\nisZipDialogOpen:false,zipFolderPath:'',usedRepoTags:[],isRepoInfoBarShow:false,isSaveSharedDirDialogShow:false,itemsForSave:[],asyncCopyMoveTaskId:'',asyncOperationProgress:0,asyncOperatedFilesLength:0,isCopyMoveProgressDialogShow:false,isImagePopupOpen:false,imageItems:[],imageIndex:0};return _this2;}_createClass(SharedDirView,[{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;if(trafficOverLimit){toaster.danger(gettext('File download is disabled: the share link traffic of owner is used up.'),{duration:3});}seafileAPI.listSharedDir(token,relativePath,thumbnailSize).then(function(res){var items=res.data['dirent_list'].map(function(item){item.isSelected=false;return item;});_this3.setState({isLoading:false,errorMsg:'',items:Utils.sortDirentsInSharedDir(items,_this3.state.sortBy,_this3.state.sortOrder)});_this3.getThumbnails();}).catch(function(error){var errorMsg=Utils.getErrorMsg(error);_this3.setState({isLoading:false,errorMsg:errorMsg});});this.getShareLinkRepoTags();}},{key:\"getAsyncCopyMoveProgress\",value:function(){var _getAsyncCopyMoveProgress=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var asyncCopyMoveTaskId,res,data,message,_message,asyncOperationProgress;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:asyncCopyMoveTaskId=this.state.asyncCopyMoveTaskId;_context.prev=1;_context.next=4;return seafileAPI.queryAsyncOperationProgress(asyncCopyMoveTaskId);case 4:res=_context.sent;data=res.data;if(!data.failed){_context.next=11;break;}message=gettext('Failed to copy files to another library.');toaster.danger(message);this.setState({asyncOperationProgress:0,isCopyMoveProgressDialogShow:false});return _context.abrupt(\"return\");case 11:if(!data.successful){_context.next=16;break;}this.setState({asyncOperationProgress:0,isCopyMoveProgressDialogShow:false});_message=gettext('Successfully copied files to another library.');toaster.success(_message);return _context.abrupt(\"return\");case 16:// init state: total is 0\nasyncOperationProgress=!data.total?0:parseInt((data.done/data.total*100).toFixed(2));this.getAsyncCopyMoveProgress();this.setState({asyncOperationProgress:asyncOperationProgress});_context.next=24;break;case 21:_context.prev=21;_context.t0=_context[\"catch\"](1);this.setState({asyncOperationProgress:0,isCopyMoveProgressDialogShow:false});case 24:case\"end\":return _context.stop();}},_callee,this,[[1,21]]);}));function getAsyncCopyMoveProgress(){return _getAsyncCopyMoveProgress.apply(this,arguments);}return getAsyncCopyMoveProgress;}()},{key:\"render\",value:function render(){var _this4=this;var isDesktop=Utils.isDesktop();var modeBaseClass='btn btn-secondary btn-icon sf-view-mode-btn';return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"h-100 d-flex flex-column\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"top-header d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"a\",{href:siteRoot,children:/*#__PURE__*/_jsx(\"img\",{src:mediaUrl+logoPath,height:logoHeight,width:logoWidth,title:siteTitle,alt:\"logo\"})}),loginUser&&/*#__PURE__*/_jsx(Account,{})]}),/*#__PURE__*/_jsx(\"div\",{className:\"o-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"shared-dir-view-main\",children:[/*#__PURE__*/_jsx(InsertAd,{zone:\"shared-dir-view\",category:\"Flat_message\",center:true}),/*#__PURE__*/_jsx(\"h2\",{className:\"h3 text-truncate\",title:dirName,children:dirName}),/*#__PURE__*/_jsxs(\"p\",{children:[gettext('Shared by: '),sharedBy]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center op-bar\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"m-0 mr-4 ellipsis d-flex align-items-center\",children:[gettext('Current path: '),this.renderPath()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-none\",children:[isDesktop&&/*#__PURE__*/_jsxs(\"div\",{className:\"view-mode btn-group\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"?p=\".concat(encodeURIComponent(relativePath),\"&mode=list\"),className:\"\".concat(modeBaseClass,\" sf2-icon-list-view \").concat(mode=='list'?'current-mode':''),title:gettext('List'),\"aria-label\":gettext('List')}),/*#__PURE__*/_jsx(\"a\",{href:\"?p=\".concat(encodeURIComponent(relativePath),\"&mode=grid\"),className:\"\".concat(modeBaseClass,\" sf2-icon-grid-view \").concat(mode=='grid'?'current-mode':''),title:gettext('Grid'),\"aria-label\":gettext('Grid')})]}),canUpload&&/*#__PURE__*/_jsx(Button,{disabled:noQuota,title:noQuota?gettext('The owner of this library has run out of space.'):'',onClick:this.onUploadFile,className:\"ml-2 shared-dir-op-btn shared-dir-upload-btn\",children:gettext('Upload')}),showDownloadIcon&&/*#__PURE__*/_jsx(Fragment,{children:this.state.items.some(function(item){return item.isSelected;})?/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Button,{color:\"success\",onClick:this.zipDownloadSelectedItems,className:\"ml-2 shared-dir-op-btn\",children:gettext('ZIP Selected Items')}),canDownload&&loginUser&&loginUser!==sharedBy&&/*#__PURE__*/_jsx(Button,{color:\"success\",onClick:this.saveSelectedItems,className:\"ml-2 shared-dir-op-btn\",children:gettext('Save Selected Items')})]}):/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Button,{color:\"success\",onClick:this.zipDownloadFolder.bind(this,relativePath),className:\"ml-2 shared-dir-op-btn\",children:gettext('ZIP')}),canDownload&&loginUser&&loginUser!==sharedBy&&/*#__PURE__*/_jsx(Button,{color:\"success\",onClick:this.saveAllItems,className:\"ml-2 shared-dir-op-btn\",children:gettext('Save')})]})})]})]}),!noQuota&&canUpload&&/*#__PURE__*/_jsx(FileUploader,{ref:function ref(uploader){return _this4.uploader=uploader;},dragAndDrop:false,token:token,path:dirPath==='/'?dirPath:dirPath.replace(/\\/+$/,''),relativePath:relativePath==='/'?relativePath:relativePath.replace(/\\/+$/,''),repoID:repoID,onFileUploadSuccess:this.onFileUploadSuccess}),this.state.isRepoInfoBarShow&&/*#__PURE__*/_jsx(RepoInfoBar,{repoID:repoID,currentPath:'/',usedRepoTags:this.state.usedRepoTags,shareLinkToken:token,enableFileDownload:showDownloadIcon,className:\"mx-0\"}),/*#__PURE__*/_jsx(Content,{isDesktop:isDesktop,isLoading:this.state.isLoading,errorMsg:this.state.errorMsg,items:this.state.items,sortBy:this.state.sortBy,sortOrder:this.state.sortOrder,sortItems:this.sortItems,isAllItemsSelected:this.state.isAllItemsSelected,toggleAllSelected:this.toggleAllSelected,toggleItemSelected:this.toggleItemSelected,zipDownloadFolder:this.zipDownloadFolder,showImagePopup:this.showImagePopup})]})})]}),this.state.isZipDialogOpen&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(ZipDownloadDialog,{token:token,path:this.state.zipFolderPath,target:this.state.selectedItems,toggleDialog:this.closeZipDialog})}),this.state.isSaveSharedDirDialogShow&&/*#__PURE__*/_jsx(SaveSharedDirDialog,{sharedToken:token,parentDir:relativePath,items:this.state.itemsForSave,toggleCancel:this.toggleSaveSharedDirCancel,handleSaveSharedDir:this.handleSaveSharedDir}),this.state.isCopyMoveProgressDialogShow&&/*#__PURE__*/_jsx(CopyMoveDirentProgressDialog,{type:\"copy\",asyncOperatedFilesLength:this.state.asyncOperatedFilesLength,asyncOperationProgress:this.state.asyncOperationProgress,toggleDialog:this.onProgressDialogToggle}),this.state.isImagePopupOpen&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(ImageDialog,{imageItems:this.state.imageItems,imageIndex:this.state.imageIndex,closeImagePopup:this.closeImagePopup,moveToPrevImage:this.moveToPrevImage,moveToNextImage:this.moveToNextImage})})]});}}]);return SharedDirView;}(React.Component);var Content=/*#__PURE__*/function(_React$Component2){_inherits(Content,_React$Component2);var _super2=_createSuper(Content);function Content(props){var _this5;_classCallCheck(this,Content);_this5=_super2.call(this,props);_this5.sortByName=function(e){e.preventDefault();var sortBy='name';var sortOrder=_this5.props.sortOrder=='asc'?'desc':'asc';_this5.props.sortItems(sortBy,sortOrder);};_this5.sortByTime=function(e){e.preventDefault();var sortBy='time';var sortOrder=_this5.props.sortOrder=='asc'?'desc':'asc';_this5.props.sortItems(sortBy,sortOrder);};_this5.sortBySize=function(e){e.preventDefault();var sortBy='size';var sortOrder=_this5.props.sortOrder=='asc'?'desc':'asc';_this5.props.sortItems(sortBy,sortOrder);};return _this5;}_createClass(Content,[{key:\"render\",value:function render(){var _this6=this;var _this$props=this.props,isDesktop=_this$props.isDesktop,isLoading=_this$props.isLoading,errorMsg=_this$props.errorMsg,items=_this$props.items,sortBy=_this$props.sortBy,sortOrder=_this$props.sortOrder,isAllItemsSelected=_this$props.isAllItemsSelected;if(isLoading){return/*#__PURE__*/_jsx(Loading,{});}if(errorMsg){return/*#__PURE__*/_jsx(\"p\",{className:\"error mt-6 text-center\",children:errorMsg});}var tbody=/*#__PURE__*/_jsx(\"tbody\",{children:items.map(function(item,index){return/*#__PURE__*/_jsx(Item,{isDesktop:isDesktop,item:item,zipDownloadFolder:_this6.props.zipDownloadFolder,showImagePopup:_this6.props.showImagePopup,toggleItemSelected:_this6.props.toggleItemSelected},index);})});if(!isDesktop){return/*#__PURE__*/_jsxs(\"table\",{className:\"table-hover table-thead-hidden\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{width:\"12%\"}),/*#__PURE__*/_jsx(\"th\",{width:\"80%\"}),/*#__PURE__*/_jsx(\"th\",{width:\"8%\"})]})}),tbody]});}var sortIcon=/*#__PURE__*/_jsx(\"span\",{className:\"fas \".concat(sortOrder=='asc'?'fa-caret-up':'fa-caret-down')});return mode=='list'?/*#__PURE__*/_jsxs(\"table\",{className:\"table-hover\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[showDownloadIcon&&/*#__PURE__*/_jsx(\"th\",{width:\"3%\",className:\"text-center\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:isAllItemsSelected,onChange:this.props.toggleAllSelected})}),/*#__PURE__*/_jsx(\"th\",{width:\"5%\"}),/*#__PURE__*/_jsx(\"th\",{width:showDownloadIcon?'50%':'53%',children:/*#__PURE__*/_jsxs(\"a\",{className:\"d-block table-sort-op\",href:\"#\",onClick:this.sortByName,children:[gettext('Name'),\" \",sortBy=='name'&&sortIcon]})}),/*#__PURE__*/_jsx(\"th\",{width:\"8%\"}),/*#__PURE__*/_jsx(\"th\",{width:\"14%\",children:/*#__PURE__*/_jsxs(\"a\",{className:\"d-block table-sort-op\",href:\"#\",onClick:this.sortBySize,children:[gettext('Size'),\" \",sortBy=='size'&&sortIcon]})}),/*#__PURE__*/_jsx(\"th\",{width:\"13%\",children:/*#__PURE__*/_jsxs(\"a\",{className:\"d-block table-sort-op\",href:\"#\",onClick:this.sortByTime,children:[gettext('Last Update'),\" \",sortBy=='time'&&sortIcon]})}),/*#__PURE__*/_jsx(\"th\",{width:\"7%\"})]})}),tbody]}):/*#__PURE__*/_jsx(\"ul\",{className:\"grid-view\",children:items.map(function(item,index){return/*#__PURE__*/_jsx(GridItem,{item:item,zipDownloadFolder:_this6.props.zipDownloadFolder,showImagePopup:_this6.props.showImagePopup},index);})});}}]);return Content;}(React.Component);var Item=/*#__PURE__*/function(_React$Component3){_inherits(Item,_React$Component3);var _super3=_createSuper(Item);function Item(props){var _this7;_classCallCheck(this,Item);_this7=_super3.call(this,props);_this7.toggleOpMenu=function(){_this7.setState({isOpMenuOpen:!_this7.state.isOpMenuOpen});};_this7.handleMouseOver=function(){_this7.setState({isIconShown:true});};_this7.handleMouseOut=function(){_this7.setState({isIconShown:false});};_this7.zipDownloadFolder=function(e){e.preventDefault();_this7.props.zipDownloadFolder.bind(_assertThisInitialized(_this7),_this7.props.item.folder_path)();};_this7.handleFileClick=function(e){var item=_this7.props.item;if(!Utils.imageCheck(item.file_name)){return;}e.preventDefault();_this7.props.showImagePopup(item);};_this7.toggleItemSelected=function(e){_this7.props.toggleItemSelected(_this7.props.item,e.target.checked);};_this7.state={isIconShown:false,isOpMenuOpen:false};return _this7;}_createClass(Item,[{key:\"render\",value:function render(){var _this$props2=this.props,item=_this$props2.item,isDesktop=_this$props2.isDesktop;var isIconShown=this.state.isIconShown;var toolTipID='';var tagTitle='';if(item.file_tags&&item.file_tags.length>0){toolTipID=MD5(item.file_name).slice(0,7);tagTitle=item.file_tags.map(function(item){return item.tag_name;}).join(' ');}if(item.is_dir){return isDesktop?/*#__PURE__*/_jsxs(\"tr\",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onFocus:this.handleMouseOver,children:[showDownloadIcon&&/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:item.isSelected,onChange:this.toggleItemSelected})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"img\",{src:Utils.getFolderIconUrl(),alt:\"\",width:\"24\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"?p=\".concat(encodeURIComponent(item.folder_path.substr(0,item.folder_path.length-1)),\"&mode=\").concat(mode),children:item.folder_name})}),/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{title:moment(item.last_modified).format('llll'),children:moment(item.last_modified).fromNow()}),/*#__PURE__*/_jsx(\"td\",{children:showDownloadIcon&&/*#__PURE__*/_jsx(\"a\",{role:\"button\",className:\"action-icon sf2-icon-download\".concat(isIconShown?'':' invisible'),href:\"#\",onClick:this.zipDownloadFolder,title:gettext('Download'),\"aria-label\":gettext('Download')})})]}):/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"img\",{src:Utils.getFolderIconUrl(),alt:\"\",width:\"24\"})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"a\",{href:\"?p=\".concat(encodeURIComponent(item.folder_path.substr(0,item.folder_path.length-1)),\"&mode=\").concat(mode),children:item.folder_name}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"item-meta-info\",children:moment(item.last_modified).fromNow()})]}),/*#__PURE__*/_jsx(\"td\",{children:showDownloadIcon&&/*#__PURE__*/_jsxs(Dropdown,{isOpen:this.state.isOpMenuOpen,toggle:this.toggleOpMenu,children:[/*#__PURE__*/_jsx(DropdownToggle,{tag:\"i\",className:\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\",title:gettext('More operations'),\"aria-label\":gettext('More operations'),\"data-toggle\":\"dropdown\",\"aria-expanded\":this.state.isOpMenuOpen}),/*#__PURE__*/_jsxs(\"div\",{className:this.state.isOpMenuOpen?'':'d-none',onClick:this.toggleOpMenu,children:[/*#__PURE__*/_jsx(\"div\",{className:\"mobile-operation-menu-bg-layer\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mobile-operation-menu\",children:/*#__PURE__*/_jsx(DropdownItem,{className:\"mobile-menu-item\",onClick:this.zipDownloadFolder,children:gettext('Download')})})]})]})})]});}else{var fileURL=\"\".concat(siteRoot,\"d/\").concat(token,\"/files/?p=\").concat(encodeURIComponent(item.file_path));var thumbnailURL=item.encoded_thumbnail_src?\"\".concat(siteRoot).concat(item.encoded_thumbnail_src):'';return isDesktop?/*#__PURE__*/_jsxs(\"tr\",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onFocus:this.handleMouseOver,children:[showDownloadIcon&&/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:item.isSelected,onChange:this.toggleItemSelected})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:thumbnailURL?/*#__PURE__*/_jsx(\"img\",{className:\"thumbnail\",src:thumbnailURL,alt:\"\"}):/*#__PURE__*/_jsx(\"img\",{src:Utils.getFileIconUrl(item.file_name),alt:\"\",width:\"24\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"a\",{href:fileURL,onClick:this.handleFileClick,children:item.file_name})}),/*#__PURE__*/_jsx(\"td\",{className:\"tag-list-title\",children:item.file_tags&&item.file_tags.length>0&&/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{id:\"tag-list-title-\".concat(toolTipID),className:\"dirent-item tag-list tag-list-stacked\",children:item.file_tags.map(function(fileTag,index){var length=item.file_tags.length;return/*#__PURE__*/_jsx(\"span\",{className:\"file-tag\",style:{zIndex:length-index,backgroundColor:fileTag.tag_color}},fileTag.file_tag_id);})}),/*#__PURE__*/_jsx(UncontrolledTooltip,{target:\"tag-list-title-\".concat(toolTipID),placement:\"bottom\",children:tagTitle})]})}),/*#__PURE__*/_jsx(\"td\",{children:Utils.bytesToSize(item.size)}),/*#__PURE__*/_jsx(\"td\",{title:moment(item.last_modified).format('llll'),children:moment(item.last_modified).fromNow()}),/*#__PURE__*/_jsx(\"td\",{children:showDownloadIcon&&/*#__PURE__*/_jsx(\"a\",{className:\"action-icon sf2-icon-download\".concat(isIconShown?'':' invisible'),href:\"\".concat(fileURL,\"&dl=1\"),title:gettext('Download'),\"aria-label\":gettext('Download')})})]}):/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:thumbnailURL?/*#__PURE__*/_jsx(\"img\",{className:\"thumbnail\",src:thumbnailURL,alt:\"\"}):/*#__PURE__*/_jsx(\"img\",{src:Utils.getFileIconUrl(item.file_name),alt:\"\",width:\"24\"})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"a\",{href:fileURL,onClick:this.handleFileClick,children:item.file_name}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"item-meta-info\",children:Utils.bytesToSize(item.size)}),/*#__PURE__*/_jsx(\"span\",{className:\"item-meta-info\",children:moment(item.last_modified).fromNow()})]}),/*#__PURE__*/_jsx(\"td\",{children:showDownloadIcon&&/*#__PURE__*/_jsxs(Dropdown,{isOpen:this.state.isOpMenuOpen,toggle:this.toggleOpMenu,children:[/*#__PURE__*/_jsx(DropdownToggle,{tag:\"i\",className:\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\",title:gettext('More operations'),\"aria-label\":gettext('More operations'),\"data-toggle\":\"dropdown\",\"aria-expanded\":this.state.isOpMenuOpen}),/*#__PURE__*/_jsxs(\"div\",{className:this.state.isOpMenuOpen?'':'d-none',onClick:this.toggleOpMenu,children:[/*#__PURE__*/_jsx(\"div\",{className:\"mobile-operation-menu-bg-layer\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mobile-operation-menu\",children:/*#__PURE__*/_jsx(DropdownItem,{className:\"mobile-menu-item\",tag:\"a\",href:\"\".concat(fileURL,\"&dl=1\"),children:gettext('Download')})})]})]})})]});}}}]);return Item;}(React.Component);var GridItem=/*#__PURE__*/function(_React$Component4){_inherits(GridItem,_React$Component4);var _super4=_createSuper(GridItem);function GridItem(props){var _this8;_classCallCheck(this,GridItem);_this8=_super4.call(this,props);_this8.handleMouseOver=function(){_this8.setState({isIconShown:true});};_this8.handleMouseOut=function(){_this8.setState({isIconShown:false});};_this8.zipDownloadFolder=function(e){e.preventDefault();_this8.props.zipDownloadFolder.bind(_assertThisInitialized(_this8),_this8.props.item.folder_path)();};_this8.handleFileClick=function(e){var item=_this8.props.item;if(!Utils.imageCheck(item.file_name)){return;}e.preventDefault();_this8.props.showImagePopup(item);};_this8.state={isIconShown:false};return _this8;}_createClass(GridItem,[{key:\"render\",value:function render(){var item=this.props.item;var isIconShown=this.state.isIconShown;if(item.is_dir){var folderURL=\"?p=\".concat(encodeURIComponent(item.folder_path.substr(0,item.folder_path.length-1)),\"&mode=\").concat(mode);return/*#__PURE__*/_jsxs(\"li\",{className:\"grid-item\",onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onFocus:this.handleMouseOver,children:[/*#__PURE__*/_jsx(\"a\",{href:folderURL,className:\"grid-file-img-link d-block\",children:/*#__PURE__*/_jsx(\"img\",{src:Utils.getFolderIconUrl(false,192),alt:\"\",width:\"96\",height:\"96\"})}),/*#__PURE__*/_jsx(\"a\",{href:folderURL,className:\"grid-file-name grid-file-name-link\",children:item.folder_name}),showDownloadIcon&&/*#__PURE__*/_jsx(\"a\",{role:\"button\",className:\"action-icon sf2-icon-download\".concat(isIconShown?'':' invisible'),href:\"#\",onClick:this.zipDownloadFolder,title:gettext('Download'),\"aria-label\":gettext('Download')})]});}else{var fileURL=\"\".concat(siteRoot,\"d/\").concat(token,\"/files/?p=\").concat(encodeURIComponent(item.file_path));var thumbnailURL=item.encoded_thumbnail_src?\"\".concat(siteRoot).concat(item.encoded_thumbnail_src):'';return/*#__PURE__*/_jsxs(\"li\",{className:\"grid-item\",onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onFocus:this.handleMouseOver,children:[/*#__PURE__*/_jsx(\"a\",{href:fileURL,className:\"grid-file-img-link d-block\",onClick:this.handleFileClick,children:thumbnailURL?/*#__PURE__*/_jsx(\"img\",{className:\"thumbnail\",src:thumbnailURL,alt:\"\"}):/*#__PURE__*/_jsx(\"img\",{src:Utils.getFileIconUrl(item.file_name,192),alt:\"\",width:\"96\",height:\"96\"})}),/*#__PURE__*/_jsx(\"a\",{href:fileURL,className:\"grid-file-name grid-file-name-link\",onClick:this.handleFileClick,children:item.file_name}),showDownloadIcon&&/*#__PURE__*/_jsx(\"a\",{className:\"action-icon sf2-icon-download\".concat(isIconShown?'':' invisible'),href:\"\".concat(fileURL,\"&dl=1\"),title:gettext('Download'),\"aria-label\":gettext('Download')})]});}}}]);return GridItem;}(React.Component);ReactDom.render(/*#__PURE__*/_jsx(SharedDirView,{}),document.getElementById('wrapper'));","map":{"version":3,"names":["React","Fragment","MD5","ReactDom","Button","Dropdown","DropdownToggle","DropdownItem","UncontrolledTooltip","moment","Account","useGoFileserver","fileServerRoot","gettext","siteRoot","mediaUrl","logoPath","logoWidth","logoHeight","siteTitle","thumbnailSizeForOriginal","Utils","seafileAPI","Loading","toaster","ModalPortal","ZipDownloadDialog","ImageDialog","FileUploader","SaveSharedDirDialog","CopyMoveDirentProgressDialog","RepoInfoBar","RepoTag","InsertAd","jsx","_jsx","jsxs","_jsxs","locale","window","app","config","lang","loginUser","pageOptions","name","_window$shared$pageOp","shared","token","dirName","dirPath","sharedBy","repoID","relativePath","mode","thumbnailSize","zipped","trafficOverLimit","canDownload","noQuota","canUpload","enableVideoThumbnail","showDownloadIcon","SharedDirView","_React$Component","_inherits","_super","_createSuper","props","_this2","_classCallCheck","call","sortItems","sortBy","sortOrder","setState","items","sortDirentsInSharedDir","state","getThumbnails","filter","item","is_dir","imageCheck","file_name","videoCheck","encoded_thumbnail_src","length","len","_this","_assertThisInitialized","getThumbnail","i","curItem","getShareLinkThumbnail","file_path","then","res","data","catch","error","renderPath","children","map","index","href","concat","encodeURIComponent","path","className","title","zipDownloadFolder","folderPath","isZipDialogOpen","zipFolderPath","getShareLinkZipTask","zipToken","location","errorMsg","getErrorMsg","isLoading","zipDownloadSelectedItems","selectedItems","isSelected","folder_name","target","getShareLinkDirentsZipTask","saveSelectedItems","isSaveSharedDirDialogShow","itemsForSave","saveAllItems","toggleSaveSharedDirCancel","handleSaveSharedDir","destRepoID","dstPath","saveSharedDir","isCopyMoveProgressDialogShow","asyncCopyMoveTaskId","task_id","asyncOperatedFilesLength","getAsyncCopyMoveProgress","errMessage","onProgressDialogToggle","asyncOperationProgress","taskId","cancelCopyMoveOperation","closeZipDialog","prepareImageItem","fileExt","substr","lastIndexOf","toLowerCase","isGIF","src","fileURL","encodePath","showImagePopup","imageItems","isImagePopupOpen","imageIndex","indexOf","closeImagePopup","moveToPrevImage","imageItemsLength","prevState","moveToNextImage","toggleAllSelected","isAllItemsSelected","toggleItemSelected","targetItem","some","onUploadFile","e","nativeEvent","stopImmediatePropagation","uploader","onFileUpload","onFileUploadSuccess","direntObject","size","newItem","joinPath","last_modified","format","folderItems","Array","from","splice","shareLinksUploadDone","getShareLinkRepoTags","usedRepoTags","repo_tags","forEach","usedRepoTag","fileCount","push","isRepoInfoBarShow","danger","_createClass","key","value","componentDidMount","_this3","duration","listSharedDir","_getAsyncCopyMoveProgress","_asyncToGenerator","_regeneratorRuntime","mark","_callee","message","_message","wrap","_callee$","_context","prev","next","queryAsyncOperationProgress","sent","failed","abrupt","successful","success","total","parseInt","done","toFixed","t0","stop","apply","arguments","render","_this4","isDesktop","modeBaseClass","height","width","alt","zone","category","center","disabled","onClick","color","bind","ref","dragAndDrop","replace","currentPath","shareLinkToken","enableFileDownload","Content","toggleDialog","sharedToken","parentDir","toggleCancel","type","Component","_React$Component2","_super2","_this5","sortByName","preventDefault","sortByTime","sortBySize","_this6","_this$props","tbody","Item","sortIcon","checked","onChange","GridItem","_React$Component3","_super3","_this7","toggleOpMenu","isOpMenuOpen","handleMouseOver","isIconShown","handleMouseOut","folder_path","handleFileClick","_this$props2","toolTipID","tagTitle","file_tags","slice","tag_name","join","onMouseOver","onMouseOut","onFocus","getFolderIconUrl","fromNow","role","isOpen","toggle","tag","thumbnailURL","getFileIconUrl","id","fileTag","style","zIndex","backgroundColor","tag_color","file_tag_id","placement","bytesToSize","_React$Component4","_super4","_this8","folderURL","document","getElementById"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/shared-dir-view.js"],"sourcesContent":["import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MD5 from 'MD5';\nimport ReactDom from 'react-dom';\nimport { Button, Dropdown, DropdownToggle, DropdownItem, UncontrolledTooltip } from 'reactstrap';\nimport moment from 'moment';\nimport Account from './components/common/account';\nimport { useGoFileserver, fileServerRoot, gettext, siteRoot, mediaUrl, logoPath, logoWidth, logoHeight, siteTitle, thumbnailSizeForOriginal } from './utils/constants';\nimport { Utils } from './utils/utils';\nimport { seafileAPI } from './utils/seafile-api';\nimport Loading from './components/loading';\nimport toaster from './components/toast';\nimport ModalPortal from './components/modal-portal';\nimport ZipDownloadDialog from './components/dialog/zip-download-dialog';\nimport ImageDialog from './components/dialog/image-dialog';\nimport FileUploader from './components/shared-link-file-uploader/file-uploader';\nimport SaveSharedDirDialog from './components/dialog/save-shared-dir-dialog';\nimport CopyMoveDirentProgressDialog from './components/dialog/copy-move-dirent-progress-dialog';\nimport RepoInfoBar from './components/repo-info-bar';\nimport RepoTag from './models/repo-tag';\nimport InsertAd from './services/ad';\n\nimport './css/shared-dir-view.css';\nimport './css/grid-view.css';\n\nmoment.locale(window.app.config.lang);\n\nlet loginUser = window.app.pageOptions.name;\nlet {\n  token, dirName, dirPath, sharedBy,\n  repoID, relativePath,\n  mode, thumbnailSize, zipped,\n  trafficOverLimit, canDownload,\n  noQuota, canUpload, enableVideoThumbnail\n} = window.shared.pageOptions;\n\nconst showDownloadIcon = !trafficOverLimit && canDownload;\n\nclass SharedDirView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      items: [],\n\n      isAllItemsSelected: false,\n      selectedItems: [],\n\n      sortBy: 'name', // 'name' or 'time' or 'size'\n      sortOrder: 'asc', // 'asc' or 'desc'\n\n      isZipDialogOpen: false,\n      zipFolderPath: '',\n\n      usedRepoTags: [],\n      isRepoInfoBarShow: false,\n\n      isSaveSharedDirDialogShow: false,\n      itemsForSave: [],\n\n      asyncCopyMoveTaskId: '',\n      asyncOperationProgress: 0,\n      asyncOperatedFilesLength: 0,\n      isCopyMoveProgressDialogShow: false,\n\n      isImagePopupOpen: false,\n      imageItems: [],\n      imageIndex: 0\n    };\n  }\n\n  componentDidMount() {\n    if (trafficOverLimit) {\n      toaster.danger(gettext('File download is disabled: the share link traffic of owner is used up.'), {\n        duration: 3\n      });\n    }\n\n    seafileAPI.listSharedDir(token, relativePath, thumbnailSize).then((res) => {\n      const items = res.data['dirent_list'].map(item => {\n        item.isSelected = false;\n        return item;\n      });\n      this.setState({\n        isLoading: false,\n        errorMsg: '',\n        items: Utils.sortDirentsInSharedDir(items, this.state.sortBy, this.state.sortOrder)\n      });\n      this.getThumbnails();\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n\n    this.getShareLinkRepoTags();\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortDirentsInSharedDir(this.state.items, sortBy, sortOrder)\n    });\n  };\n\n  getThumbnails = () => {\n    let items = this.state.items.filter((item) => {\n      return !item.is_dir &&\n        (Utils.imageCheck(item.file_name) ||\n          (enableVideoThumbnail && Utils.videoCheck(item.file_name))) &&\n        !item.encoded_thumbnail_src;\n    });\n    if (items.length == 0) {\n      return;\n    }\n\n    const len = items.length;\n    const _this = this;\n    let getThumbnail = function (i) {\n      const curItem = items[i];\n      seafileAPI.getShareLinkThumbnail(token, curItem.file_path, thumbnailSize).then((res) => {\n        curItem.encoded_thumbnail_src = res.data.encoded_thumbnail_src;\n      }).catch((error) => {\n        // do nothing\n      }).then(() => {\n        if (i < len - 1) {\n          getThumbnail(++i);\n        } else {\n          // when done, `setState()`\n          _this.setState({\n            items: _this.state.items\n          });\n        }\n      });\n    };\n    getThumbnail(0);\n  };\n\n  renderPath = () => {\n    return (\n      <React.Fragment>\n        {zipped.map((item, index) => {\n          if (index != zipped.length - 1) {\n            return (\n              <React.Fragment key={index}>\n                <a href={`?p=${encodeURIComponent(item.path)}&mode=${mode}`} className=\"mx-1 ellipsis\" title={item.name}>{item.name}</a>\n                <span> / </span>\n              </React.Fragment>\n            );\n          }\n          return null;\n        })\n        }\n        <span className=\"ml-1 ellipsis\" title={zipped[zipped.length - 1].name}>{zipped[zipped.length - 1].name}</span>\n      </React.Fragment>\n    );\n  };\n\n  zipDownloadFolder = (folderPath) => {\n    if (!useGoFileserver) {\n      this.setState({\n        isZipDialogOpen: true,\n        zipFolderPath: folderPath\n      });\n    }\n    else {\n      seafileAPI.getShareLinkZipTask(token, folderPath).then((res) => {\n        const zipToken = res.data['zip_token'];\n        location.href = `${fileServerRoot}zip/${zipToken}`;\n      }).catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({\n          isLoading: false,\n          errorMsg: errorMsg\n        });\n      });\n    }\n  };\n\n  zipDownloadSelectedItems = () => {\n    if (!useGoFileserver) {\n      this.setState({\n        isZipDialogOpen: true,\n        zipFolderPath: relativePath,\n        selectedItems: this.state.items.filter(item => item.isSelected)\n          .map(item => item.file_name || item.folder_name)\n      });\n    }\n    else {\n      let target = this.state.items.filter(item => item.isSelected).map(item => item.file_name || item.folder_name);\n      seafileAPI.getShareLinkDirentsZipTask(token, relativePath, target).then((res) => {\n        const zipToken = res.data['zip_token'];\n        location.href = `${fileServerRoot}zip/${zipToken}`;\n      }).catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({\n          isLoading: false,\n          errorMsg: errorMsg\n        });\n      });\n    }\n  };\n\n  async getAsyncCopyMoveProgress() {\n    let { asyncCopyMoveTaskId } = this.state;\n    try {\n      let res = await seafileAPI.queryAsyncOperationProgress(asyncCopyMoveTaskId);\n      let data = res.data;\n      if (data.failed) {\n        let message = gettext('Failed to copy files to another library.');\n        toaster.danger(message);\n        this.setState({\n          asyncOperationProgress: 0,\n          isCopyMoveProgressDialogShow: false,\n        });\n        return;\n      }\n\n      if (data.successful) {\n        this.setState({\n          asyncOperationProgress: 0,\n          isCopyMoveProgressDialogShow: false,\n        });\n        let message = gettext('Successfully copied files to another library.');\n        toaster.success(message);\n        return;\n      }\n      // init state: total is 0\n      let asyncOperationProgress = !data.total ? 0 : parseInt((data.done / data.total * 100).toFixed(2));\n\n      this.getAsyncCopyMoveProgress();\n      this.setState({ asyncOperationProgress: asyncOperationProgress });\n    } catch (error) {\n      this.setState({\n        asyncOperationProgress: 0,\n        isCopyMoveProgressDialogShow: false,\n      });\n    }\n  }\n\n  saveSelectedItems = () => {\n    this.setState({\n      isSaveSharedDirDialogShow: true,\n      itemsForSave: this.state.items.filter(item => item.isSelected)\n        .map(item => item.file_name || item.folder_name)\n    });\n  };\n\n  saveAllItems = () => {\n    this.setState({\n      isSaveSharedDirDialogShow: true,\n      itemsForSave: this.state.items\n        .map(item => item.file_name || item.folder_name)\n    });\n  };\n\n  toggleSaveSharedDirCancel = () => {\n    this.setState({\n      isSaveSharedDirDialogShow: false,\n      itemsForSave: []\n    });\n  };\n\n  handleSaveSharedDir = (destRepoID, dstPath) => {\n\n    const itemsForSave = this.state.itemsForSave;\n\n    seafileAPI.saveSharedDir(destRepoID, dstPath, token, relativePath, itemsForSave).then((res) => {\n      this.setState({\n        isSaveSharedDirDialogShow: false,\n        itemsForSave: [],\n        isCopyMoveProgressDialogShow: true,\n        asyncCopyMoveTaskId: res.data.task_id,\n        asyncOperatedFilesLength: itemsForSave.length,\n      }, () => {\n        this.getAsyncCopyMoveProgress();\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      this.setState({ errMessage: errMessage });\n    });\n  };\n\n  onProgressDialogToggle = () => {\n    let { asyncOperationProgress } = this.state;\n    if (asyncOperationProgress !== 100) {\n      let taskId = this.state.asyncCopyMoveTaskId;\n      seafileAPI.cancelCopyMoveOperation(taskId);\n    }\n\n    this.setState({\n      asyncOperationProgress: 0,\n      isCopyMoveProgressDialogShow: false,\n    });\n  };\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false,\n      zipFolderPath: '',\n      selectedItems: []\n    });\n  };\n\n  // for image popup\n  prepareImageItem = (item) => {\n    const name = item.file_name;\n    const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n    const isGIF = fileExt == 'gif';\n\n    let src;\n    const fileURL = `${siteRoot}d/${token}/files/?p=${encodeURIComponent(item.file_path)}`;\n    if (!isGIF) {\n      src = `${siteRoot}thumbnail/${token}/${thumbnailSizeForOriginal}${Utils.encodePath(item.file_path)}`;\n    } else {\n      src = `${fileURL}&raw=1`;\n    }\n\n    return {\n      'name': name,\n      'url': fileURL,\n      'src': src\n    };\n  };\n\n  showImagePopup = (curItem) => {\n    const items = this.state.items.filter((item) => {\n      return !item.is_dir && Utils.imageCheck(item.file_name);\n    });\n    const imageItems = items.map((item) => {\n      return this.prepareImageItem(item);\n    });\n\n    this.setState({\n      isImagePopupOpen: true,\n      imageItems: imageItems,\n      imageIndex: items.indexOf(curItem)\n    });\n  };\n\n  closeImagePopup = () => {\n    this.setState({\n      isImagePopupOpen: false\n    });\n  };\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  };\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  };\n\n  toggleAllSelected = () => {\n    this.setState((prevState) => ({\n      isAllItemsSelected: !prevState.isAllItemsSelected,\n      items: this.state.items.map((item) => {\n        item.isSelected = !prevState.isAllItemsSelected;\n        return item;\n      })\n    }));\n  };\n\n  toggleItemSelected = (targetItem, isSelected) => {\n    this.setState({\n      items: this.state.items.map((item) => {\n        if (item === targetItem) {\n          item.isSelected = isSelected;\n        }\n        return item;\n      })\n    }, () => {\n      this.setState({\n        isAllItemsSelected: !this.state.items.some(item => !item.isSelected)\n      });\n    });\n  };\n\n  onUploadFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.uploader.onFileUpload();\n  };\n\n  onFileUploadSuccess = (direntObject) => {\n    const { name, size } = direntObject;\n    const newItem = {\n      isSelected: false,\n      file_name: name,\n      file_path: Utils.joinPath(relativePath, name),\n      is_dir: false,\n      last_modified: moment().format(),\n      size: size\n    };\n    const folderItems = this.state.items.filter(item => { return item.is_dir; });\n    // put the new file as the first file\n    let items = Array.from(this.state.items);\n    items.splice(folderItems.length, 0, newItem);\n    this.setState({ items: items });\n    seafileAPI.shareLinksUploadDone(token, Utils.joinPath(dirPath, name));\n  };\n\n  getShareLinkRepoTags = () => {\n    seafileAPI.getShareLinkRepoTags(token).then(res => {\n      let usedRepoTags = [];\n      res.data.repo_tags.forEach(item => {\n        let usedRepoTag = new RepoTag(item);\n        if (usedRepoTag.fileCount > 0) {\n          usedRepoTags.push(usedRepoTag);\n        }\n      });\n      this.setState({ usedRepoTags: usedRepoTags });\n      if (usedRepoTags.length != 0 && relativePath == '/') {\n        this.setState({ isRepoInfoBarShow: true });\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    const modeBaseClass = 'btn btn-secondary btn-icon sf-view-mode-btn';\n    return (\n      <React.Fragment>\n        <div className=\"h-100 d-flex flex-column\">\n          <div className=\"top-header d-flex justify-content-between\">\n            <a href={siteRoot}>\n              <img src={mediaUrl + logoPath} height={logoHeight} width={logoWidth} title={siteTitle} alt=\"logo\" />\n            </a>\n            {loginUser && <Account />}\n          </div>\n          <div className=\"o-auto\">\n            <div className=\"shared-dir-view-main\">\n              <InsertAd zone='shared-dir-view' category='Flat_message' center={true} />\n              <h2 className=\"h3 text-truncate\" title={dirName}>{dirName}</h2>\n              <p>{gettext('Shared by: ')}{sharedBy}</p>\n              <div className=\"d-flex justify-content-between align-items-center op-bar\">\n                <p className=\"m-0 mr-4 ellipsis d-flex align-items-center\">{gettext('Current path: ')}{this.renderPath()}</p>\n                <div className=\"flex-none\">\n                  {isDesktop &&\n                    <div className=\"view-mode btn-group\">\n                      <a\n                        href={`?p=${encodeURIComponent(relativePath)}&mode=list`}\n                        className={`${modeBaseClass} sf2-icon-list-view ${mode == 'list' ? 'current-mode' : ''}`}\n                        title={gettext('List')}\n                        aria-label={gettext('List')}\n                      ></a>\n                      <a\n                        href={`?p=${encodeURIComponent(relativePath)}&mode=grid`}\n                        className={`${modeBaseClass} sf2-icon-grid-view ${mode == 'grid' ? 'current-mode' : ''}`}\n                        title={gettext('Grid')}\n                        aria-label={gettext('Grid')}\n                      ></a>\n                    </div>\n                  }\n                  {canUpload && (\n                    <Button disabled={noQuota}\n                      title={noQuota ? gettext('The owner of this library has run out of space.') : ''}\n                      onClick={this.onUploadFile} className=\"ml-2 shared-dir-op-btn shared-dir-upload-btn\"\n                    >{gettext('Upload')}</Button>\n                  )}\n                  {showDownloadIcon &&\n                    <Fragment>\n                      {this.state.items.some(item => item.isSelected) ?\n                        <Fragment>\n                          <Button color=\"success\" onClick={this.zipDownloadSelectedItems} className=\"ml-2 shared-dir-op-btn\">{gettext('ZIP Selected Items')}</Button>\n                          {(canDownload && loginUser && (loginUser !== sharedBy)) &&\n                            <Button color=\"success\" onClick={this.saveSelectedItems} className=\"ml-2 shared-dir-op-btn\">{gettext('Save Selected Items')}</Button>\n                          }\n                        </Fragment>\n                        :\n                        <Fragment>\n                          <Button color=\"success\" onClick={this.zipDownloadFolder.bind(this, relativePath)} className=\"ml-2 shared-dir-op-btn\">{gettext('ZIP')}</Button>\n                          {(canDownload && loginUser && (loginUser !== sharedBy)) &&\n                            <Button color=\"success\" onClick={this.saveAllItems} className=\"ml-2 shared-dir-op-btn\">{gettext('Save')}</Button>\n                          }\n                        </Fragment>\n                      }\n                    </Fragment>\n                  }\n                </div>\n              </div>\n              {!noQuota && canUpload && (\n                <FileUploader\n                  ref={uploader => this.uploader = uploader}\n                  dragAndDrop={false}\n                  token={token}\n                  path={dirPath === '/' ? dirPath : dirPath.replace(/\\/+$/, '')}\n                  relativePath={relativePath === '/' ? relativePath : relativePath.replace(/\\/+$/, '')}\n                  repoID={repoID}\n                  onFileUploadSuccess={this.onFileUploadSuccess}\n                />\n              )}\n\n              {this.state.isRepoInfoBarShow && (\n                <RepoInfoBar\n                  repoID={repoID}\n                  currentPath={'/'}\n                  usedRepoTags={this.state.usedRepoTags}\n                  shareLinkToken={token}\n                  enableFileDownload={showDownloadIcon}\n                  className=\"mx-0\"\n                />\n              )}\n\n              <Content\n                isDesktop={isDesktop}\n                isLoading={this.state.isLoading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortItems={this.sortItems}\n                isAllItemsSelected={this.state.isAllItemsSelected}\n                toggleAllSelected={this.toggleAllSelected}\n                toggleItemSelected={this.toggleItemSelected}\n                zipDownloadFolder={this.zipDownloadFolder}\n                showImagePopup={this.showImagePopup}\n              />\n            </div>\n          </div>\n        </div>\n        {this.state.isZipDialogOpen &&\n          <ModalPortal>\n            <ZipDownloadDialog\n              token={token}\n              path={this.state.zipFolderPath}\n              target={this.state.selectedItems}\n              toggleDialog={this.closeZipDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isSaveSharedDirDialogShow &&\n          <SaveSharedDirDialog\n            sharedToken={token}\n            parentDir={relativePath}\n            items={this.state.itemsForSave}\n            toggleCancel={this.toggleSaveSharedDirCancel}\n            handleSaveSharedDir={this.handleSaveSharedDir}\n          />\n        }\n        {this.state.isCopyMoveProgressDialogShow && (\n          <CopyMoveDirentProgressDialog\n            type='copy'\n            asyncOperatedFilesLength={this.state.asyncOperatedFilesLength}\n            asyncOperationProgress={this.state.asyncOperationProgress}\n            toggleDialog={this.onProgressDialogToggle}\n          />\n        )}\n        {this.state.isImagePopupOpen &&\n          <ModalPortal>\n            <ImageDialog\n              imageItems={this.state.imageItems}\n              imageIndex={this.state.imageIndex}\n              closeImagePopup={this.closeImagePopup}\n              moveToPrevImage={this.moveToPrevImage}\n              moveToNextImage={this.moveToNextImage}\n            />\n          </ModalPortal>\n        }\n      </React.Fragment>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  render() {\n    const {\n      isDesktop,\n      isLoading, errorMsg, items,\n      sortBy, sortOrder,\n      isAllItemsSelected\n    } = this.props;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-6 text-center\">{errorMsg}</p>;\n    }\n\n    const tbody = (\n      <tbody>\n        {items.map((item, index) => {\n          return <Item\n            key={index}\n            isDesktop={isDesktop}\n            item={item}\n            zipDownloadFolder={this.props.zipDownloadFolder}\n            showImagePopup={this.props.showImagePopup}\n            toggleItemSelected={this.props.toggleItemSelected}\n          />;\n        })}\n      </tbody>\n    );\n\n    if (!isDesktop) {\n      return (\n        <table className=\"table-hover table-thead-hidden\">\n          <thead>\n            <tr>\n              <th width=\"12%\"></th>\n              <th width=\"80%\"></th>\n              <th width=\"8%\"></th>\n            </tr>\n          </thead>\n          {tbody}\n        </table>\n      );\n    }\n\n    const sortIcon = <span className={`fas ${sortOrder == 'asc' ? 'fa-caret-up' : 'fa-caret-down'}`}></span>;\n    return mode == 'list' ? (\n      <table className=\"table-hover\">\n        <thead>\n          <tr>\n            {showDownloadIcon &&\n              <th width=\"3%\" className=\"text-center\">\n                <input type=\"checkbox\" checked={isAllItemsSelected} onChange={this.props.toggleAllSelected} />\n              </th>\n            }\n            <th width=\"5%\"></th>\n            <th width={showDownloadIcon ? '50%' : '53%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortBy == 'name' && sortIcon}</a></th>\n            <th width=\"8%\"></th>\n            <th width=\"14%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBy == 'size' && sortIcon}</a></th>\n            <th width=\"13%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortBy == 'time' && sortIcon}</a></th>\n            <th width=\"7%\"></th>\n          </tr>\n        </thead>\n        {tbody}\n      </table>\n    ) : (\n      <ul className=\"grid-view\">\n        {items.map((item, index) => {\n          return <GridItem\n            key={index}\n            item={item}\n            zipDownloadFolder={this.props.zipDownloadFolder}\n            showImagePopup={this.props.showImagePopup}\n          />;\n        })}\n      </ul>\n    );\n  }\n}\n\nContent.propTypes = {\n  isDesktop: PropTypes.bool,\n  isLoading: PropTypes.bool,\n  isAllItemsSelected: PropTypes.bool,\n  errorMsg: PropTypes.string,\n  items: PropTypes.array,\n  sortItems: PropTypes.func,\n  sortBy: PropTypes.string,\n  sortOrder: PropTypes.string,\n  toggleAllSelected: PropTypes.func,\n  toggleItemSelected: PropTypes.func,\n  zipDownloadFolder: PropTypes.func,\n  showImagePopup: PropTypes.func,\n};\n\nclass Item extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isIconShown: false,\n      isOpMenuOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({ isOpMenuOpen: !this.state.isOpMenuOpen });\n  };\n\n  handleMouseOver = () => {\n    this.setState({ isIconShown: true });\n  };\n\n  handleMouseOut = () => {\n    this.setState({ isIconShown: false });\n  };\n\n  zipDownloadFolder = (e) => {\n    e.preventDefault();\n    this.props.zipDownloadFolder.bind(this, this.props.item.folder_path)();\n  };\n\n  handleFileClick = (e) => {\n    const item = this.props.item;\n    if (!Utils.imageCheck(item.file_name)) {\n      return;\n    }\n\n    e.preventDefault();\n    this.props.showImagePopup(item);\n  };\n\n  toggleItemSelected = (e) => {\n    this.props.toggleItemSelected(this.props.item, e.target.checked);\n  };\n\n  render() {\n    const { item, isDesktop } = this.props;\n    const { isIconShown } = this.state;\n\n    let toolTipID = '';\n    let tagTitle = '';\n    if (item.file_tags && item.file_tags.length > 0) {\n      toolTipID = MD5(item.file_name).slice(0, 7);\n      tagTitle = item.file_tags.map(item => item.tag_name).join(' ');\n    }\n\n    if (item.is_dir) {\n      return isDesktop ? (\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n          {showDownloadIcon &&\n            <td className=\"text-center\">\n              <input type=\"checkbox\" checked={item.isSelected} onChange={this.toggleItemSelected} />\n            </td>\n          }\n          <td className=\"text-center\"><img src={Utils.getFolderIconUrl()} alt=\"\" width=\"24\" /></td>\n          <td>\n            <a href={`?p=${encodeURIComponent(item.folder_path.substr(0, item.folder_path.length - 1))}&mode=${mode}`}>{item.folder_name}</a>\n          </td>\n          <td></td>\n          <td></td>\n          <td title={moment(item.last_modified).format('llll')}>{moment(item.last_modified).fromNow()}</td>\n          <td>\n            {showDownloadIcon &&\n              <a role=\"button\" className={`action-icon sf2-icon-download${isIconShown ? '' : ' invisible'}`} href=\"#\" onClick={this.zipDownloadFolder} title={gettext('Download')} aria-label={gettext('Download')}>\n              </a>\n            }\n          </td>\n        </tr>\n      ) : (\n        <tr>\n          <td className=\"text-center\"><img src={Utils.getFolderIconUrl()} alt=\"\" width=\"24\" /></td>\n          <td>\n            <a href={`?p=${encodeURIComponent(item.folder_path.substr(0, item.folder_path.length - 1))}&mode=${mode}`}>{item.folder_name}</a>\n            <br />\n            <span className=\"item-meta-info\">{moment(item.last_modified).fromNow()}</span>\n          </td>\n          <td>\n            {showDownloadIcon &&\n              <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n                <DropdownToggle\n                  tag=\"i\"\n                  className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                  title={gettext('More operations')}\n                  aria-label={gettext('More operations')}\n                  data-toggle=\"dropdown\"\n                  aria-expanded={this.state.isOpMenuOpen}\n                />\n                <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                  <div className=\"mobile-operation-menu-bg-layer\"></div>\n                  <div className=\"mobile-operation-menu\">\n                    <DropdownItem className=\"mobile-menu-item\" onClick={this.zipDownloadFolder}>{gettext('Download')}</DropdownItem>\n                  </div>\n                </div>\n              </Dropdown>\n            }\n          </td>\n        </tr>\n      );\n    } else {\n      const fileURL = `${siteRoot}d/${token}/files/?p=${encodeURIComponent(item.file_path)}`;\n      const thumbnailURL = item.encoded_thumbnail_src ? `${siteRoot}${item.encoded_thumbnail_src}` : '';\n      return isDesktop ? (\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n          {showDownloadIcon &&\n            <td className=\"text-center\">\n              <input type=\"checkbox\" checked={item.isSelected} onChange={this.toggleItemSelected} />\n            </td>\n          }\n          <td className=\"text-center\">\n            {thumbnailURL ?\n              <img className=\"thumbnail\" src={thumbnailURL} alt=\"\" /> :\n              <img src={Utils.getFileIconUrl(item.file_name)} alt=\"\" width=\"24\" />\n            }\n          </td>\n          <td>\n            <a href={fileURL} onClick={this.handleFileClick}>{item.file_name}</a>\n          </td>\n          <td className=\"tag-list-title\">\n            {(item.file_tags && item.file_tags.length > 0) && (\n              <Fragment>\n                <div id={`tag-list-title-${toolTipID}`} className=\"dirent-item tag-list tag-list-stacked\">\n                  {item.file_tags.map((fileTag, index) => {\n                    let length = item.file_tags.length;\n                    return (\n                      <span className=\"file-tag\" key={fileTag.file_tag_id} style={{ zIndex: length - index, backgroundColor: fileTag.tag_color }}></span>\n                    );\n                  })}\n                </div>\n                <UncontrolledTooltip target={`tag-list-title-${toolTipID}`} placement=\"bottom\">\n                  {tagTitle}\n                </UncontrolledTooltip>\n              </Fragment>\n            )}\n          </td>\n          <td>{Utils.bytesToSize(item.size)}</td>\n          <td title={moment(item.last_modified).format('llll')}>{moment(item.last_modified).fromNow()}</td>\n          <td>\n            {showDownloadIcon &&\n              <a className={`action-icon sf2-icon-download${isIconShown ? '' : ' invisible'}`} href={`${fileURL}&dl=1`} title={gettext('Download')} aria-label={gettext('Download')}></a>\n            }\n          </td>\n        </tr>\n      ) : (\n        <tr>\n          <td className=\"text-center\">\n            {thumbnailURL ?\n              <img className=\"thumbnail\" src={thumbnailURL} alt=\"\" /> :\n              <img src={Utils.getFileIconUrl(item.file_name)} alt=\"\" width=\"24\" />\n            }\n          </td>\n          <td>\n            <a href={fileURL} onClick={this.handleFileClick}>{item.file_name}</a>\n            <br />\n            <span className=\"item-meta-info\">{Utils.bytesToSize(item.size)}</span>\n            <span className=\"item-meta-info\">{moment(item.last_modified).fromNow()}</span>\n          </td>\n          <td>\n            {showDownloadIcon &&\n              <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n                <DropdownToggle\n                  tag=\"i\"\n                  className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                  title={gettext('More operations')}\n                  aria-label={gettext('More operations')}\n                  data-toggle=\"dropdown\"\n                  aria-expanded={this.state.isOpMenuOpen}\n                />\n                <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                  <div className=\"mobile-operation-menu-bg-layer\"></div>\n                  <div className=\"mobile-operation-menu\">\n                    <DropdownItem className=\"mobile-menu-item\" tag=\"a\" href={`${fileURL}&dl=1`}>{gettext('Download')}</DropdownItem>\n                  </div>\n                </div>\n              </Dropdown>\n            }\n          </td>\n        </tr>\n      );\n    }\n  }\n}\n\nItem.propTypes = {\n  isDesktop: PropTypes.bool,\n  item: PropTypes.object,\n  sortItems: PropTypes.func,\n  sortBy: PropTypes.string,\n  sortOrder: PropTypes.string,\n  toggleAllSelected: PropTypes.func,\n  toggleItemSelected: PropTypes.func,\n  zipDownloadFolder: PropTypes.func,\n  showImagePopup: PropTypes.func,\n};\n\nclass GridItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({ isIconShown: true });\n  };\n\n  handleMouseOut = () => {\n    this.setState({ isIconShown: false });\n  };\n\n  zipDownloadFolder = (e) => {\n    e.preventDefault();\n    this.props.zipDownloadFolder.bind(this, this.props.item.folder_path)();\n  };\n\n  handleFileClick = (e) => {\n    const item = this.props.item;\n    if (!Utils.imageCheck(item.file_name)) {\n      return;\n    }\n\n    e.preventDefault();\n    this.props.showImagePopup(item);\n  };\n\n  render() {\n    const item = this.props.item;\n    const { isIconShown } = this.state;\n\n    if (item.is_dir) {\n      const folderURL = `?p=${encodeURIComponent(item.folder_path.substr(0, item.folder_path.length - 1))}&mode=${mode}`;\n      return (\n        <li className=\"grid-item\" onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n          <a href={folderURL} className=\"grid-file-img-link d-block\">\n            <img src={Utils.getFolderIconUrl(false, 192)} alt=\"\" width=\"96\" height=\"96\" />\n          </a>\n          <a href={folderURL} className=\"grid-file-name grid-file-name-link\">{item.folder_name}</a>\n          {showDownloadIcon &&\n            <a role=\"button\" className={`action-icon sf2-icon-download${isIconShown ? '' : ' invisible'}`} href=\"#\" onClick={this.zipDownloadFolder} title={gettext('Download')} aria-label={gettext('Download')}>\n            </a>\n          }\n        </li>\n      );\n    } else {\n      const fileURL = `${siteRoot}d/${token}/files/?p=${encodeURIComponent(item.file_path)}`;\n      const thumbnailURL = item.encoded_thumbnail_src ? `${siteRoot}${item.encoded_thumbnail_src}` : '';\n      return (\n        <li className=\"grid-item\" onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n          <a href={fileURL} className=\"grid-file-img-link d-block\" onClick={this.handleFileClick}>\n            {thumbnailURL ?\n              <img className=\"thumbnail\" src={thumbnailURL} alt=\"\" /> :\n              <img src={Utils.getFileIconUrl(item.file_name, 192)} alt=\"\" width=\"96\" height=\"96\" />\n            }\n          </a>\n          <a href={fileURL} className=\"grid-file-name grid-file-name-link\" onClick={this.handleFileClick}>{item.file_name}</a>\n          {showDownloadIcon &&\n            <a className={`action-icon sf2-icon-download${isIconShown ? '' : ' invisible'}`} href={`${fileURL}&dl=1`} title={gettext('Download')} aria-label={gettext('Download')}>\n            </a>\n          }\n        </li>\n      );\n    }\n  }\n}\n\nGridItem.propTypes = {\n  item: PropTypes.object,\n  zipDownloadFolder: PropTypes.func,\n  showImagePopup: PropTypes.func,\n};\n\nReactDom.render(<SharedDirView />, document.getElementById('wrapper'));\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}