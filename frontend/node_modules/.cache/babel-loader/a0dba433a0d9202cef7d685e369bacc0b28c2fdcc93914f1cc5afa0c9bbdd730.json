{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import ModalPortal from'../modal-portal';import{gettext}from'../../utils/constants';import{seafileAPI}from'../../utils/seafile-api';import{Utils}from'../../utils/utils';import toaster from'../toast';import SetWebdavPassword from'../dialog/set-webdav-password';import ResetWebdavPassword from'../dialog/reset-webdav-password';import RemoveWebdavPassword from'../dialog/remove-webdav-password';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _window$app$pageOptio=window.app.pageOptions,username=_window$app$pageOptio.username,webdavUrl=_window$app$pageOptio.webdavUrl,webdavPasswordSetted=_window$app$pageOptio.webdavPasswordSetted;var WebdavPassword=/*#__PURE__*/function(_React$Component){_inherits(WebdavPassword,_React$Component);var _super=_createSuper(WebdavPassword);function WebdavPassword(props){var _this;_classCallCheck(this,WebdavPassword);_this=_super.call(this,props);_this.toggleSetPasswordDialog=function(){_this.setState({isSetPasserdDialogOpen:!_this.state.isSetPasserdDialogOpen});};_this.setPassword=function(password){seafileAPI.updateWebdavSecret(password).then(function(res){_this.toggleSetPasswordDialog();_this.setState({isWebdavPasswordSetted:!_this.state.isWebdavPasswordSetted});toaster.success(gettext('Success'));}).catch(function(error){var errorMsg=Utils.getErrorMsg(error);_this.toggleSetPasswordDialog();toaster.danger(errorMsg);});};_this.toggleResetPasswordDialog=function(){_this.setState({isResetPasswordDialogOpen:!_this.state.isResetPasswordDialogOpen});};_this.resetPassword=function(password){seafileAPI.updateWebdavSecret(password).then(function(res){_this.toggleResetPasswordDialog();toaster.success(gettext('Success'));}).catch(function(error){var errorMsg=Utils.getErrorMsg(error);_this.toggleResetPasswordDialog();toaster.danger(errorMsg);});};_this.toggleRemovePasswordDialog=function(){_this.setState({isRemovePasswordDialogOpen:!_this.state.isRemovePasswordDialogOpen});};_this.removePassword=function(){seafileAPI.updateWebdavSecret().then(function(res){_this.toggleRemovePasswordDialog();_this.setState({isWebdavPasswordSetted:!_this.state.isWebdavPasswordSetted});toaster.success(gettext('Success'));}).catch(function(error){var errorMsg=Utils.getErrorMsg(error);_this.toggleRemovePasswordDialog();toaster.danger(errorMsg);});};_this.onIconKeyDown=function(e){if(e.key=='Enter'||e.key=='Space'){e.target.click();}};_this.state={isWebdavPasswordSetted:webdavPasswordSetted,isSetPasserdDialogOpen:false,isResetPasserdDialogOpen:false,isRemovePasserdDialogOpen:false};return _this;}_createClass(WebdavPassword,[{key:\"render\",value:function render(){var isWebdavPasswordSetted=this.state.isWebdavPasswordSetted;return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{id:\"update-webdav-passwd\",className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"setting-item-heading\",children:gettext('WebDAV Password')}),/*#__PURE__*/_jsxs(\"p\",{children:[\"WebDAV URL: \",/*#__PURE__*/_jsx(\"a\",{href:webdavUrl,children:webdavUrl})]}),/*#__PURE__*/_jsxs(\"p\",{children:[gettext('WebDAV username:'),\" \",username]}),!isWebdavPasswordSetted?/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[gettext('WebDAV password:'),\" \",gettext('not set')]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-primary\",onClick:this.toggleSetPasswordDialog,children:gettext('Set Password')})]}):/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[gettext('WebDAV password:'),\" ***\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-primary mr-2\",onClick:this.toggleResetPasswordDialog,children:gettext('Reset Password')}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-primary\",onClick:this.toggleRemovePasswordDialog,children:gettext('Delete Password')})]})]}),this.state.isSetPasserdDialogOpen&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(SetWebdavPassword,{setPassword:this.setPassword,toggle:this.toggleSetPasswordDialog})}),this.state.isResetPasswordDialogOpen&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(ResetWebdavPassword,{resetPassword:this.resetPassword,toggle:this.toggleResetPasswordDialog})}),this.state.isRemovePasswordDialogOpen&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(RemoveWebdavPassword,{removePassword:this.removePassword,toggle:this.toggleRemovePasswordDialog})})]});}}]);return WebdavPassword;}(React.Component);export default WebdavPassword;","map":{"version":3,"names":["React","ModalPortal","gettext","seafileAPI","Utils","toaster","SetWebdavPassword","ResetWebdavPassword","RemoveWebdavPassword","jsx","_jsx","jsxs","_jsxs","_window$app$pageOptio","window","app","pageOptions","username","webdavUrl","webdavPasswordSetted","WebdavPassword","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","toggleSetPasswordDialog","setState","isSetPasserdDialogOpen","state","setPassword","password","updateWebdavSecret","then","res","isWebdavPasswordSetted","success","catch","error","errorMsg","getErrorMsg","danger","toggleResetPasswordDialog","isResetPasswordDialogOpen","resetPassword","toggleRemovePasswordDialog","isRemovePasswordDialogOpen","removePassword","onIconKeyDown","e","key","target","click","isResetPasserdDialogOpen","isRemovePasserdDialogOpen","_createClass","value","render","Fragment","children","id","className","href","onClick","toggle","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/webdav-password.js"],"sourcesContent":["import React from 'react';\nimport ModalPortal from '../modal-portal';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport SetWebdavPassword from '../dialog/set-webdav-password';\nimport ResetWebdavPassword from '../dialog/reset-webdav-password';\nimport RemoveWebdavPassword from '../dialog/remove-webdav-password';\n\nconst { username, webdavUrl, webdavPasswordSetted } = window.app.pageOptions;\n\nclass WebdavPassword extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isWebdavPasswordSetted: webdavPasswordSetted,\n      isSetPasserdDialogOpen: false,\n      isResetPasserdDialogOpen: false,\n      isRemovePasserdDialogOpen: false,\n    };\n  }\n\n  toggleSetPasswordDialog = () => {\n    this.setState({\n      isSetPasserdDialogOpen: !this.state.isSetPasserdDialogOpen,\n    });\n  };\n\n  setPassword = (password) => {\n    seafileAPI.updateWebdavSecret(password).then((res) => {\n      this.toggleSetPasswordDialog();\n      this.setState({\n        isWebdavPasswordSetted: !this.state.isWebdavPasswordSetted,\n      });\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.toggleSetPasswordDialog();\n      toaster.danger(errorMsg);\n    });\n  };\n\n  toggleResetPasswordDialog = () => {\n    this.setState({\n      isResetPasswordDialogOpen: !this.state.isResetPasswordDialogOpen,\n    });\n  };\n\n  resetPassword = (password) => {\n    seafileAPI.updateWebdavSecret(password).then((res) => {\n      this.toggleResetPasswordDialog();\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.toggleResetPasswordDialog();\n      toaster.danger(errorMsg);\n    });\n  };\n\n  toggleRemovePasswordDialog = () => {\n    this.setState({\n      isRemovePasswordDialogOpen: !this.state.isRemovePasswordDialogOpen,\n    });\n  };\n\n  removePassword = () => {\n    seafileAPI.updateWebdavSecret().then((res) => {\n      this.toggleRemovePasswordDialog();\n      this.setState({\n        isWebdavPasswordSetted: !this.state.isWebdavPasswordSetted,\n      });\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.toggleRemovePasswordDialog();\n      toaster.danger(errorMsg);\n    });\n  };\n\n  onIconKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      e.target.click();\n    }\n  };\n\n  render() {\n    const { isWebdavPasswordSetted } = this.state;\n    return (\n      <React.Fragment>\n        <div id=\"update-webdav-passwd\" className=\"setting-item\">\n          <h3 className=\"setting-item-heading\">{gettext('WebDAV Password')}</h3>\n          <p>WebDAV URL: <a href={webdavUrl}>{webdavUrl}</a></p>\n          <p>{gettext('WebDAV username:')} {username}</p>\n          {!isWebdavPasswordSetted ?\n            <React.Fragment>\n              <p>{gettext('WebDAV password:')} {gettext('not set')}</p>\n              <button className=\"btn btn-outline-primary\" onClick={this.toggleSetPasswordDialog}>{gettext('Set Password')}</button>\n            </React.Fragment>\n            :\n            <React.Fragment>\n              <p>{gettext('WebDAV password:')} ***</p>\n              <button className=\"btn btn-outline-primary mr-2\" onClick={this.toggleResetPasswordDialog}>{gettext('Reset Password')}</button>\n              <button className=\"btn btn-outline-primary\" onClick={this.toggleRemovePasswordDialog}>{gettext('Delete Password')}</button>\n            </React.Fragment>\n          }\n        </div>\n        {this.state.isSetPasserdDialogOpen && (\n          <ModalPortal>\n            <SetWebdavPassword\n              setPassword={this.setPassword}\n              toggle={this.toggleSetPasswordDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isResetPasswordDialogOpen && (\n          <ModalPortal>\n            <ResetWebdavPassword\n              resetPassword={this.resetPassword}\n              toggle={this.toggleResetPasswordDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isRemovePasswordDialogOpen && (\n          <ModalPortal>\n            <RemoveWebdavPassword\n              removePassword={this.removePassword}\n              toggle={this.toggleRemovePasswordDialog}\n            />\n          </ModalPortal>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default WebdavPassword;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}