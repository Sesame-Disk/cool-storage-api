{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateFormula = exports.isMenuDisabled = exports.isFormulaType = exports.isFormulaActive = exports.insertFormula = void 0;\nvar _slate = require(\"slate\");\nvar _slugid = _interopRequireDefault(require(\"slugid\"));\nvar _queries = require(\"../../core/queries\");\nvar _focusEditor = require(\"../../core/transforms/focus-editor\");\nvar _constants = require(\"../../constants\");\nvar _elementTypes = require(\"../../constants/element-types\");\nvar _core = require(\"../../core\");\nvar isMenuDisabled = function isMenuDisabled(editor) {\n  var readonly = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  if (readonly) return true;\n  var selection = editor.selection;\n  if (!selection) return false;\n  var selectedElems = (0, _queries.getSelectedElems)(editor);\n  // Check if the selected element is illegal\n  var isSelectedIllegalElement = selectedElems.some(function (elem) {\n    var type = elem.type;\n    if (editor.isVoid(elem)) return true;\n    var unSupportTypes = [_constants.ELementTypes.CODE_BLOCK, _constants.ELementTypes.CODE_LINE, _constants.ELementTypes.TABLE, _constants.ELementTypes.TABLE_CELL, _constants.ELementTypes.TABLE_ROW, _constants.ELementTypes.HEADER1, _constants.ELementTypes.HEADER2, _constants.ELementTypes.HEADER3, _constants.ELementTypes.HEADER4, _constants.ELementTypes.HEADER5, _constants.ELementTypes.HEADER6, _constants.ELementTypes.LIST_ITEM, _constants.ELementTypes.UNORDERED_LIST, _constants.ELementTypes.ORDERED_LIST];\n    if (unSupportTypes.includes(type)) return true;\n    return false;\n  });\n  if (isSelectedIllegalElement) return true;\n  return false;\n};\nexports.isMenuDisabled = isMenuDisabled;\nvar isFormulaActive = function isFormulaActive(editor) {\n  return isFormulaType(editor);\n};\nexports.isFormulaActive = isFormulaActive;\nvar isFormulaType = function isFormulaType(editor) {\n  var _slate$Editor$nodes = _slate.Editor.nodes(editor, {\n      match: function match(n) {\n        return (0, _queries.getNodeType)(n) === _constants.ELementTypes.FORMULA;\n      },\n      universal: true\n    }),\n    _slate$Editor$nodes2 = _slicedToArray(_slate$Editor$nodes, 1),\n    match = _slate$Editor$nodes2[0];\n  return !!match;\n};\nexports.isFormulaType = isFormulaType;\nvar insertFormula = function insertFormula(editor, data) {\n  var formula = {\n    id: _slugid.default.nice(),\n    type: _elementTypes.FORMULA,\n    data: {\n      formula: data.formula\n    },\n    children: [(0, _core.generateDefaultText)()]\n  };\n  _slate.Transforms.insertNodes(editor, formula, {\n    at: data.at,\n    void: true\n  });\n  (0, _focusEditor.focusEditor)(editor);\n};\nexports.insertFormula = insertFormula;\nvar updateFormula = function updateFormula(editor, data) {\n  var formula = data.formula,\n    at = data.at;\n  _slate.Transforms.setNodes(editor, {\n    data: {\n      formula: formula\n    }\n  }, {\n    at: at,\n    void: true\n  });\n  (0, _focusEditor.focusEditor)(editor);\n};\nexports.updateFormula = updateFormula;","map":{"version":3,"names":["_slicedToArray","require","default","_interopRequireDefault","Object","defineProperty","exports","value","updateFormula","isMenuDisabled","isFormulaType","isFormulaActive","insertFormula","_slate","_slugid","_queries","_focusEditor","_constants","_elementTypes","_core","editor","readonly","arguments","length","undefined","selection","selectedElems","getSelectedElems","isSelectedIllegalElement","some","elem","type","isVoid","unSupportTypes","ELementTypes","CODE_BLOCK","CODE_LINE","TABLE","TABLE_CELL","TABLE_ROW","HEADER1","HEADER2","HEADER3","HEADER4","HEADER5","HEADER6","LIST_ITEM","UNORDERED_LIST","ORDERED_LIST","includes","_slate$Editor$nodes","Editor","nodes","match","n","getNodeType","FORMULA","universal","_slate$Editor$nodes2","data","formula","id","nice","children","generateDefaultText","Transforms","insertNodes","at","void","focusEditor","setNodes"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/extension/plugins/formula/helper.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateFormula = exports.isMenuDisabled = exports.isFormulaType = exports.isFormulaActive = exports.insertFormula = void 0;\nvar _slate = require(\"slate\");\nvar _slugid = _interopRequireDefault(require(\"slugid\"));\nvar _queries = require(\"../../core/queries\");\nvar _focusEditor = require(\"../../core/transforms/focus-editor\");\nvar _constants = require(\"../../constants\");\nvar _elementTypes = require(\"../../constants/element-types\");\nvar _core = require(\"../../core\");\nconst isMenuDisabled = function (editor) {\n  let readonly = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  if (readonly) return true;\n  const {\n    selection\n  } = editor;\n  if (!selection) return false;\n  const selectedElems = (0, _queries.getSelectedElems)(editor);\n  // Check if the selected element is illegal\n  const isSelectedIllegalElement = selectedElems.some(elem => {\n    const {\n      type\n    } = elem;\n    if (editor.isVoid(elem)) return true;\n    const unSupportTypes = [_constants.ELementTypes.CODE_BLOCK, _constants.ELementTypes.CODE_LINE, _constants.ELementTypes.TABLE, _constants.ELementTypes.TABLE_CELL, _constants.ELementTypes.TABLE_ROW, _constants.ELementTypes.HEADER1, _constants.ELementTypes.HEADER2, _constants.ELementTypes.HEADER3, _constants.ELementTypes.HEADER4, _constants.ELementTypes.HEADER5, _constants.ELementTypes.HEADER6, _constants.ELementTypes.LIST_ITEM, _constants.ELementTypes.UNORDERED_LIST, _constants.ELementTypes.ORDERED_LIST];\n    if (unSupportTypes.includes(type)) return true;\n    return false;\n  });\n  if (isSelectedIllegalElement) return true;\n  return false;\n};\nexports.isMenuDisabled = isMenuDisabled;\nconst isFormulaActive = editor => {\n  return isFormulaType(editor);\n};\nexports.isFormulaActive = isFormulaActive;\nconst isFormulaType = editor => {\n  const [match] = _slate.Editor.nodes(editor, {\n    match: n => (0, _queries.getNodeType)(n) === _constants.ELementTypes.FORMULA,\n    universal: true\n  });\n  return !!match;\n};\nexports.isFormulaType = isFormulaType;\nconst insertFormula = (editor, data) => {\n  const formula = {\n    id: _slugid.default.nice(),\n    type: _elementTypes.FORMULA,\n    data: {\n      formula: data.formula\n    },\n    children: [(0, _core.generateDefaultText)()]\n  };\n  _slate.Transforms.insertNodes(editor, formula, {\n    at: data.at,\n    void: true\n  });\n  (0, _focusEditor.focusEditor)(editor);\n};\nexports.insertFormula = insertFormula;\nconst updateFormula = (editor, data) => {\n  const {\n    formula,\n    at\n  } = data;\n  _slate.Transforms.setNodes(editor, {\n    data: {\n      formula\n    }\n  }, {\n    at: at,\n    void: true\n  });\n  (0, _focusEditor.focusEditor)(editor);\n};\nexports.updateFormula = updateFormula;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}