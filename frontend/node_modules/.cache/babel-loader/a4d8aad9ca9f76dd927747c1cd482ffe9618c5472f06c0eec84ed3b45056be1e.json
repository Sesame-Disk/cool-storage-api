{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Fragment}from'react';import moment from'moment';import{Link}from'@gatsbyjs/reach-router';import{Utils}from'../../../utils/utils';import{siteRoot,gettext}from'../../../utils/constants';import OpMenu from'../../../components/dialog/op-menu';import ModalPortal from'../../../components/modal-portal';import RenameDepartmentDialog from'../../../components/dialog/sysadmin-dialog/sysadmin-rename-department-dialog';import DeleteDepartmentDialog from'../../../components/dialog/sysadmin-dialog/sysadmin-delete-department-dialog';import SetGroupQuotaDialog from'../../../components/dialog/sysadmin-dialog/sysadmin-set-group-quota-dialog';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var GroupItem=/*#__PURE__*/function(_React$Component){_inherits(GroupItem,_React$Component);var _super=_createSuper(GroupItem);function GroupItem(props){var _this;_classCallCheck(this,GroupItem);_this=_super.call(this,props);_this.handleMouseOver=function(){if(!_this.props.isItemFreezed){_this.setState({isOpIconShown:true,highlight:true});}};_this.handleMouseOut=function(){if(!_this.props.isItemFreezed){_this.setState({isOpIconShown:false,highlight:false});}};_this.onUnfreezedItem=function(){_this.setState({highlight:false,isOpIconShow:false});_this.props.onUnfreezedItem();};_this.translateOperations=function(item){var translateResult='';switch(item){case'Rename':translateResult=gettext('Rename');break;case'Delete':translateResult=gettext('Delete');break;default:break;}return translateResult;};_this.onMenuItemClick=function(operation){switch(operation){case'Rename':_this.toggleRenameDialog();break;case'Delete':_this.toggleDeleteDialog();break;default:break;}};_this.toggleRenameDialog=function(){_this.setState({isRenameDialogOpen:!_this.state.isRenameDialogOpen});};_this.toggleDeleteDialog=function(){_this.setState({isDeleteDialogOpen:!_this.state.isDeleteDialogOpen});};_this.toggleSetQuotaDialog=function(){_this.setState({isSetQuotaDialogOpen:!_this.state.isSetQuotaDialogOpen});};_this.state={isOpIconShown:false,highlight:false,isSetQuotaDialogOpen:false,isDeleteDialogOpen:false,isRenameDialogOpen:false};return _this;}_createClass(GroupItem,[{key:\"render\",value:function render(){var group=this.props.group;var _this$state=this.state,highlight=_this$state.highlight,isOpIconShown=_this$state.isOpIconShown,isRenameDialogOpen=_this$state.isRenameDialogOpen,isDeleteDialogOpen=_this$state.isDeleteDialogOpen,isSetQuotaDialogOpen=_this$state.isSetQuotaDialogOpen;var newHref=siteRoot+'sys/departments/'+group.id+'/';return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(\"tr\",{className:this.state.highlight?'tr-highlight':'',onMouseEnter:this.handleMouseOver,onMouseLeave:this.handleMouseOut,children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:newHref,children:group.name})}),/*#__PURE__*/_jsx(\"td\",{children:moment(group.created_at).fromNow()}),/*#__PURE__*/_jsxs(\"td\",{children:[Utils.bytesToSize(group.quota),' ',/*#__PURE__*/_jsx(\"span\",{onClick:this.toggleSetQuotaDialog,title:gettext('Edit'),className:\"fa fa-pencil-alt attr-action-icon \".concat(highlight?'':'vh')})]}),/*#__PURE__*/_jsx(\"td\",{children:isOpIconShown&&/*#__PURE__*/_jsx(OpMenu,{operations:['Rename','Delete'],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})})]}),isDeleteDialogOpen&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(DeleteDepartmentDialog,{group:group,onDeleteDepartment:this.props.onDeleteDepartment,toggle:this.toggleDeleteDialog})}),isSetQuotaDialogOpen&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(SetGroupQuotaDialog,{groupID:group.id,onSetQuota:this.props.onSetDepartmentQuota,toggle:this.toggleSetQuotaDialog})}),isRenameDialogOpen&&/*#__PURE__*/_jsx(RenameDepartmentDialog,{groupID:group.id,name:group.name,toggle:this.toggleRenameDialog,onDepartmentNameChanged:this.props.onDepartmentNameChanged})]});}}]);return GroupItem;}(React.Component);export default GroupItem;","map":{"version":3,"names":["React","Fragment","moment","Link","Utils","siteRoot","gettext","OpMenu","ModalPortal","RenameDepartmentDialog","DeleteDepartmentDialog","SetGroupQuotaDialog","jsx","_jsx","jsxs","_jsxs","GroupItem","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","handleMouseOver","isItemFreezed","setState","isOpIconShown","highlight","handleMouseOut","onUnfreezedItem","isOpIconShow","translateOperations","item","translateResult","onMenuItemClick","operation","toggleRenameDialog","toggleDeleteDialog","isRenameDialogOpen","state","isDeleteDialogOpen","toggleSetQuotaDialog","isSetQuotaDialogOpen","_createClass","key","value","render","group","_this$state","newHref","id","children","className","onMouseEnter","onMouseLeave","to","name","created_at","fromNow","bytesToSize","quota","onClick","title","concat","operations","onFreezedItem","onDeleteDepartment","toggle","groupID","onSetQuota","onSetDepartmentQuota","onDepartmentNameChanged","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/departments/group-item.js"],"sourcesContent":["import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport ModalPortal from '../../../components/modal-portal';\nimport RenameDepartmentDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-rename-department-dialog';\nimport DeleteDepartmentDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-delete-department-dialog';\nimport SetGroupQuotaDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-set-group-quota-dialog';\n\nconst GroupItemPropTypes = {\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  group: PropTypes.object.isRequired,\n  onDepartmentNameChanged: PropTypes.func.isRequired,\n  onDeleteDepartment: PropTypes.func.isRequired,\n  onSetDepartmentQuota: PropTypes.func.isRequired\n};\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isSetQuotaDialogOpen: false,\n      isDeleteDialogOpen: false,\n      isRenameDialogOpen: false\n    };\n  }\n\n  handleMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  };\n\n  handleMouseOut = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Rename':\n        translateResult = gettext('Rename');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  };\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Rename':\n        this.toggleRenameDialog();\n        break;\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n      default:\n        break;\n    }\n  };\n\n  toggleRenameDialog = () => {\n    this.setState({\n      isRenameDialogOpen: !this.state.isRenameDialogOpen\n    });\n  };\n\n  toggleDeleteDialog = () => {\n    this.setState({\n      isDeleteDialogOpen: !this.state.isDeleteDialogOpen\n    });\n  };\n\n  toggleSetQuotaDialog = () => {\n    this.setState({\n      isSetQuotaDialogOpen: !this.state.isSetQuotaDialogOpen\n    });\n  };\n\n  render() {\n    const { group } = this.props;\n    const { highlight, isOpIconShown, isRenameDialogOpen, isDeleteDialogOpen, isSetQuotaDialogOpen } = this.state;\n    const newHref = siteRoot+ 'sys/departments/' + group.id + '/';\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td><Link to={newHref}>{group.name}</Link></td>\n          <td>{moment(group.created_at).fromNow()}</td>\n          <td>\n            {Utils.bytesToSize(group.quota)}{' '}\n            <span onClick={this.toggleSetQuotaDialog} title={gettext('Edit')} className={`fa fa-pencil-alt attr-action-icon ${highlight ? '' : 'vh'}`}></span>\n          </td>\n          <td>\n            {isOpIconShown &&\n              <OpMenu\n                operations={['Rename', 'Delete']}\n                translateOperations={this.translateOperations}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen && (\n          <ModalPortal>\n            <DeleteDepartmentDialog\n              group={group}\n              onDeleteDepartment={this.props.onDeleteDepartment}\n              toggle={this.toggleDeleteDialog}\n            />\n          </ModalPortal>\n        )}\n        {isSetQuotaDialogOpen && (\n          <ModalPortal>\n            <SetGroupQuotaDialog\n              groupID={group.id}\n              onSetQuota={this.props.onSetDepartmentQuota}\n              toggle={this.toggleSetQuotaDialog}\n            />\n          </ModalPortal>\n        )}\n        {isRenameDialogOpen && (\n          <RenameDepartmentDialog\n            groupID={group.id}\n            name={group.name}\n            toggle={this.toggleRenameDialog}\n            onDepartmentNameChanged={this.props.onDepartmentNameChanged}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nGroupItem.propTypes = GroupItemPropTypes;\n\nexport default GroupItem;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}