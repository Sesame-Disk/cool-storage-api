{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import HisotyListItem from'./history-list-item';import Loading from'../loading';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var HistoryListView=/*#__PURE__*/function(_React$Component){_inherits(HistoryListView,_React$Component);var _super=_createSuper(HistoryListView);function HistoryListView(props){var _this;_classCallCheck(this,HistoryListView);_this=_super.call(this,props);_this.componentDidMount=function(){var historyList=_this.props.historyList;if(historyList.length>0){_this.setState({currentItem:historyList[0]});if(historyList===1){_this.props.onItemClick(historyList[0]);}else{_this.props.onItemClick(historyList[0],historyList[1]);}}};_this.onFreezedItemToggle=function(){_this.setState({isItemFreezed:!_this.state.isItemFreezed});};_this.onScrollHandler=function(event){var clientHeight=event.target.clientHeight;var scrollHeight=event.target.scrollHeight;var scrollTop=event.target.scrollTop;var isBottom=clientHeight+scrollTop+1>=scrollHeight;var hasMore=_this.props.hasMore;if(isBottom&&hasMore){_this.props.reloadMore();}};_this.onItemClick=function(item,currentIndex){_this.setState({currentItem:item});if(currentIndex!==_this.props.historyList.length){var preItem=_this.props.historyList[currentIndex+1];_this.props.onItemClick(item,preItem);}else{_this.props.onItemClick(item);}};_this.state={isItemFreezed:false,currentItem:null};return _this;}_createClass(HistoryListView,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"ul\",{className:\"history-list-container\",onScroll:this.onScrollHandler,children:[this.props.historyList.map(function(item,index){return/*#__PURE__*/_jsx(HisotyListItem,{item:item,index:index,currentItem:_this2.state.currentItem,isItemFreezed:_this2.state.isItemFreezed,onItemClick:_this2.onItemClick,onItemRestore:_this2.props.onItemRestore,onFreezedItemToggle:_this2.onFreezedItemToggle},index);}),this.props.isReloadingData&&/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Loading,{})})]});}}]);return HistoryListView;}(React.Component);export default HistoryListView;","map":{"version":3,"names":["React","HisotyListItem","Loading","jsx","_jsx","jsxs","_jsxs","HistoryListView","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","componentDidMount","historyList","length","setState","currentItem","onItemClick","onFreezedItemToggle","isItemFreezed","state","onScrollHandler","event","clientHeight","target","scrollHeight","scrollTop","isBottom","hasMore","reloadMore","item","currentIndex","preItem","_createClass","key","value","render","_this2","className","onScroll","children","map","index","onItemRestore","isReloadingData","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/history-list-view/history-list-view.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport HisotyListItem from './history-list-item';\nimport Loading from '../loading';\n\nconst propTypes = {\n  hasMore: PropTypes.bool.isRequired,\n  isReloadingData: PropTypes.bool.isRequired,\n  historyList: PropTypes.array.isRequired,\n  reloadMore: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemRestore: PropTypes.func.isRequired,\n};\n\nclass HistoryListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      currentItem: null,\n    };\n  }\n\n  componentDidMount = () => {\n    let historyList = this.props.historyList;\n    if (historyList.length > 0) {\n      this.setState({currentItem: historyList[0]});\n      if (historyList === 1) {\n        this.props.onItemClick(historyList[0]);\n      } else {\n        this.props.onItemClick(historyList[0], historyList[1]);\n      }\n    }\n  };\n\n  onFreezedItemToggle = () => {\n    this.setState({isItemFreezed: !this.state.isItemFreezed});\n  };\n\n  onScrollHandler = (event) => {\n    const clientHeight = event.target.clientHeight;\n    const scrollHeight = event.target.scrollHeight;\n    const scrollTop    = event.target.scrollTop;\n    const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n    let hasMore = this.props.hasMore;\n    if (isBottom && hasMore) {\n      this.props.reloadMore();\n    }\n  };\n\n  onItemClick = (item, currentIndex) => {\n    this.setState({currentItem: item});\n    if (currentIndex !== this.props.historyList.length) {\n      let preItem = this.props.historyList[currentIndex + 1];\n      this.props.onItemClick(item, preItem);\n    } else {\n      this.props.onItemClick(item);\n    }\n  };\n\n  render() {\n    return (\n      <ul className=\"history-list-container\" onScroll={this.onScrollHandler}>\n        {this.props.historyList.map((item, index) => {\n          return (\n            <HisotyListItem\n              key={index}\n              item={item}\n              index={index}\n              currentItem={this.state.currentItem}\n              isItemFreezed={this.state.isItemFreezed}\n              onItemClick={this.onItemClick}\n              onItemRestore={this.props.onItemRestore}\n              onFreezedItemToggle={this.onFreezedItemToggle}\n            />\n          );\n        })}\n        {this.props.isReloadingData && <li><Loading /></li>}\n      </ul>\n    );\n  }\n}\n\nHistoryListView.propTypes = propTypes;\n\nexport default HistoryListView;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}