{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component,Fragment}from'react';import classnames from'classnames';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SearchInput=/*#__PURE__*/function(_Component){_inherits(SearchInput,_Component);var _super=_createSuper(SearchInput);function SearchInput(props){var _this;_classCallCheck(this,SearchInput);_this=_super.call(this,props);_this.onCompositionStart=function(){_this.isInputtingChinese=true;};_this.onChange=function(e){_this.timer&&clearTimeout(_this.timer);var _this$props=_this.props,onChange=_this$props.onChange,wait=_this$props.wait;var text=e.target.value;_this.setState({searchValue:text||''},function(){if(_this.isInputtingChinese)return;_this.timer=setTimeout(function(){onChange&&onChange(_this.state.searchValue.trim());},wait);});};_this.onCompositionEnd=function(e){_this.isInputtingChinese=false;_this.onChange(e);};_this.clearSearch=function(){var clearValue=_this.props.clearValue;_this.setState({searchValue:''},function(){clearValue&&clearValue();});};_this.setFocus=function(isSelectAllText){if(_this.inputRef===document.activeElement)return;_this.inputRef.focus();if(isSelectAllText){var txtLength=_this.state.searchValue.length;_this.inputRef.setSelectionRange(0,txtLength);}};_this.isFunction=function(functionToCheck){var getType={};return functionToCheck&&getType.toString.call(functionToCheck)==='[object Function]';};_this.renderClear=function(){var _this$props2=_this.props,isClearable=_this$props2.isClearable,clearClassName=_this$props2.clearClassName,_this$props2$componen=_this$props2.components,components=_this$props2$componen===void 0?{}:_this$props2$componen;var searchValue=_this.state.searchValue;if(!isClearable||!searchValue)return null;var ClearIndicator=components.ClearIndicator;if(/*#__PURE__*/React.isValidElement(ClearIndicator)){return/*#__PURE__*/React.cloneElement(ClearIndicator,{clearValue:_this.clearSearch});}else if(_this.isFunction(ClearIndicator)){return/*#__PURE__*/_jsx(ClearIndicator,{clearValue:_this.clearSearch});}return/*#__PURE__*/_jsx(\"i\",{className:classnames('search-text-clear input-icon-addon',clearClassName),onClick:_this.clearSearch,children:\"\\xD7\"});};_this.state={searchValue:props.value};_this.isInputtingChinese=false;_this.timer=null;_this.inputRef=null;return _this;}_createClass(SearchInput,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(this.props.autoFocus&&this.inputRef&&this.inputRef!==document.activeElement){setTimeout(function(){_this2.inputRef.focus();},0);}}},{key:\"UNSAFE_componentWillReceiveProps\",value:function UNSAFE_componentWillReceiveProps(nextProps){if(nextProps.value!==this.props.value){this.setState({searchValue:nextProps.value});}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.timer&&clearTimeout(this.timer);this.timer=null;this.inputRef=null;}},{key:\"render\",value:function render(){var _this3=this;var _this$props3=this.props,placeholder=_this$props3.placeholder,autoFocus=_this$props3.autoFocus,className=_this$props3.className,onKeyDown=_this$props3.onKeyDown,disabled=_this$props3.disabled,style=_this$props3.style;var searchValue=this.state.searchValue;return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchValue,className:classnames('form-control',className),onChange:this.onChange,autoFocus:autoFocus,placeholder:placeholder,onCompositionStart:this.onCompositionStart,onCompositionEnd:this.onCompositionEnd,onKeyDown:onKeyDown,disabled:disabled,style:style,ref:function ref(_ref){return _this3.inputRef=_ref;}}),this.renderClear()]});}}]);return SearchInput;}(Component);SearchInput.defaultProps={wait:100,disabled:false,value:''};export default SearchInput;","map":{"version":3,"names":["React","Component","Fragment","classnames","jsx","_jsx","jsxs","_jsxs","SearchInput","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","onCompositionStart","isInputtingChinese","onChange","e","timer","clearTimeout","_this$props","wait","text","target","value","setState","searchValue","setTimeout","state","trim","onCompositionEnd","clearSearch","clearValue","setFocus","isSelectAllText","inputRef","document","activeElement","focus","txtLength","length","setSelectionRange","isFunction","functionToCheck","getType","toString","renderClear","_this$props2","isClearable","clearClassName","_this$props2$componen","components","ClearIndicator","isValidElement","cloneElement","className","onClick","children","_createClass","key","componentDidMount","_this2","autoFocus","UNSAFE_componentWillReceiveProps","nextProps","componentWillUnmount","render","_this3","_this$props3","placeholder","onKeyDown","disabled","style","type","ref","defaultProps"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/common/search-input.js"],"sourcesContent":["import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\n\nconst propTypes = {\n  placeholder: PropTypes.string,\n  autoFocus: PropTypes.bool,\n  className: PropTypes.string,\n  onChange: PropTypes.func.isRequired,\n  onKeyDown: PropTypes.func,\n  wait: PropTypes.number,\n  disabled: PropTypes.bool,\n  style: PropTypes.object,\n  isClearable: PropTypes.bool,\n  clearValue: PropTypes.func,\n  clearClassName: PropTypes.string,\n  components: PropTypes.object,\n  value: PropTypes.string,\n};\n\nclass SearchInput extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchValue: props.value,\n    };\n    this.isInputtingChinese = false;\n    this.timer = null;\n    this.inputRef = null;\n  }\n\n  componentDidMount() {\n    if (this.props.autoFocus && this.inputRef && this.inputRef !== document.activeElement) {\n      setTimeout(() => {\n        this.inputRef.focus();\n      }, 0);\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.value !== this.props.value) {\n      this.setState({searchValue: nextProps.value});\n    }\n  }\n\n  componentWillUnmount() {\n    this.timer && clearTimeout(this.timer);\n    this.timer = null;\n    this.inputRef = null;\n  }\n\n  onCompositionStart = () => {\n    this.isInputtingChinese = true;\n  };\n\n  onChange = (e) => {\n    this.timer && clearTimeout(this.timer);\n    const { onChange, wait } = this.props;\n    let text = e.target.value;\n    this.setState({searchValue: text || ''}, () => {\n      if (this.isInputtingChinese) return;\n      this.timer = setTimeout(() => {\n        onChange && onChange(this.state.searchValue.trim());\n      }, wait);\n    });\n  };\n\n  onCompositionEnd = (e) => {\n    this.isInputtingChinese = false;\n    this.onChange(e);\n  };\n\n  clearSearch = () => {\n    const { clearValue } = this.props;\n    this.setState({searchValue: ''}, () => {\n      clearValue && clearValue();\n    });\n  };\n\n  setFocus = (isSelectAllText) => {\n    if (this.inputRef === document.activeElement) return;\n    this.inputRef.focus();\n    if (isSelectAllText) {\n      const txtLength = this.state.searchValue.length;\n      this.inputRef.setSelectionRange(0, txtLength);\n    }\n  };\n\n  isFunction = (functionToCheck) => {\n    const getType = {};\n    return functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\n  };\n\n  renderClear = () => {\n    const { isClearable, clearClassName, components = {} } = this.props;\n    const { searchValue } = this.state;\n    if (!isClearable || !searchValue) return null;\n    const { ClearIndicator } = components;\n    if (React.isValidElement(ClearIndicator)) {\n      return React.cloneElement(ClearIndicator, {clearValue: this.clearSearch});\n    } else if (this.isFunction(ClearIndicator)) {\n      return <ClearIndicator clearValue={this.clearSearch} />;\n    }\n    return (\n      <i className={classnames('search-text-clear input-icon-addon', clearClassName)} onClick={this.clearSearch}>Ã—</i>\n    );\n  };\n\n  render() {\n    const { placeholder, autoFocus, className, onKeyDown, disabled, style } = this.props;\n    const { searchValue } = this.state;\n\n    return (\n      <Fragment>\n        <input\n          type=\"text\"\n          value={searchValue}\n          className={classnames('form-control', className)}\n          onChange={this.onChange}\n          autoFocus={autoFocus}\n          placeholder={placeholder}\n          onCompositionStart={this.onCompositionStart}\n          onCompositionEnd={this.onCompositionEnd}\n          onKeyDown={onKeyDown}\n          disabled={disabled}\n          style={style}\n          ref={ref => this.inputRef = ref}\n        />\n        {this.renderClear()}\n      </Fragment>\n    );\n  }\n}\n\nSearchInput.propTypes = propTypes;\n\nSearchInput.defaultProps = {\n  wait: 100,\n  disabled: false,\n  value: '',\n};\n\nexport default SearchInput;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}