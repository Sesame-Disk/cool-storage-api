{"ast":null,"code":"import _toConsumableArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport classnames from 'classnames';\nimport CommonLoading from '../../../../common-loading';\nimport context from '../../../../../context';\nimport { Revision } from '../../../../../model';\nimport { getErrorMsg } from '../../../../../utils';\nimport toaster from '../../../../toast';\nimport RevisionOperation from './revision-operation';\nimport { eventStopPropagation } from '../../../../../basic-sdk/utils/mouse-event';\nimport TipDialog from '../../../../tip-dialog';\nimport './index.css';\nimport { TIP_CONTENT, TIP_TYPE } from '../../../../../constants';\nvar RevisionsDialog = function RevisionsDialog(_ref) {\n  var _revisionListRef$curr;\n  var updateRevisionsCount = _ref.updateRevisionsCount,\n    toggle = _ref.toggle;\n  var revisionListRef = useRef(null);\n  var _useTranslation = useTranslation(),\n    t = _useTranslation.t;\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    isLoading = _useState2[0],\n    setLoading = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    revisions = _useState4[0],\n    setRevisions = _useState4[1];\n  var _useState5 = useState(1),\n    _useState6 = _slicedToArray(_useState5, 2),\n    page = _useState6[0],\n    setPage = _useState6[1];\n  var _useState7 = useState(''),\n    _useState8 = _slicedToArray(_useState7, 2),\n    errorMessage = _useState8[0],\n    setErrorMessage = _useState8[1];\n  var _useState9 = useState(true),\n    _useState10 = _slicedToArray(_useState9, 2),\n    hasMore = _useState10[0],\n    setHasMore = _useState10[1];\n  var perPage = 25;\n  var repoID = context.getSetting('repoID');\n  var siteRoot = context.getSetting('siteRoot');\n  var _useState11 = useState(''),\n    _useState12 = _slicedToArray(_useState11, 2),\n    activeRevisionId = _useState12[0],\n    setActiveRevision = _useState12[1];\n  var _useState13 = useState(''),\n    _useState14 = _slicedToArray(_useState13, 2),\n    operatingRevisionId = _useState14[0],\n    setOperatingRevision = _useState14[1];\n  var _useState15 = useState(false),\n    _useState16 = _slicedToArray(_useState15, 2),\n    showDeleteTipDialog = _useState16[0],\n    setShowDeleteTipDialog = _useState16[1];\n\n  // did mount\n  useEffect(function () {\n    listRevisions();\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  var listRevisions = useCallback(function () {\n    context.getSdocRevisions(page, perPage).then(function (res) {\n      var addedRevisions = res.data.revisions.map(function (revision) {\n        return new Revision(revision);\n      });\n      setLoading(false);\n      updateRevisionsCount(res.data.count);\n      var newRevisions = [].concat(_toConsumableArray(revisions), _toConsumableArray(addedRevisions));\n      setRevisions(newRevisions);\n      if (newRevisions.length < res.data.count) {\n        setPage(page + 1);\n      } else {\n        setHasMore(false);\n      }\n    }).catch(function (error) {\n      var errorMessage = getErrorMsg(error);\n      if (page === 1) {\n        setErrorMessage(errorMessage);\n      } else {\n        toaster.danger(t(errorMessage));\n      }\n      setLoading(false);\n    });\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [revisions, page, perPage]);\n  var openRevision = useCallback(function (event, revisionId) {\n    eventStopPropagation(event);\n    if (event.target.className.includes('sdoc-revision-operation-toggle')) return;\n    var url = \"\".concat(siteRoot, \"lib/\").concat(repoID, \"/revisions/\").concat(revisionId, \"/\");\n    window.open(url, '_blank');\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  var onScroll = useCallback(function (event) {\n    var _event$target = event.target,\n      scrollTop = _event$target.scrollTop,\n      clientHeight = _event$target.clientHeight;\n    var _ref2 = revisionListRef.current || {\n        clientHeight: 0\n      },\n      revisionListHeight = _ref2.clientHeight;\n    if (isLoading) return;\n    if (!hasMore) return;\n    if (scrollTop + clientHeight + 1 >= revisionListHeight) {\n      setLoading(true);\n      listRevisions();\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [(_revisionListRef$curr = revisionListRef.current) === null || _revisionListRef$curr === void 0 ? void 0 : _revisionListRef$curr.clientHeight, isLoading, hasMore]);\n  var onDeleteOtherRevision = useCallback(function () {\n    setShowDeleteTipDialog(true);\n  }, []);\n  var closeDeleteTipDialog = useCallback(function () {\n    setOperatingRevision('');\n    setShowDeleteTipDialog(false);\n  }, []);\n  var deleteOtherRevision = useCallback(function () {\n    var revisionIndex = revisions.findIndex(function (revision) {\n      return revision.id === operatingRevisionId;\n    });\n    if (revisionIndex === -1) {\n      closeDeleteTipDialog();\n      return;\n    }\n    var revision = revisions[revisionIndex];\n    context.deleteSdocOtherRevision(revision.id).then(function (res) {\n      var newRevisions = revisions.slice(0);\n      newRevisions.splice(revisionIndex, 1);\n      updateRevisionsCount(newRevisions.length);\n      setRevisions(newRevisions);\n      closeDeleteTipDialog();\n      toaster.success(t('Revision_deleted'));\n    }).catch(function (error) {\n      var errorMessage = getErrorMsg(error);\n      toaster.danger(t(errorMessage));\n    });\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [operatingRevisionId, revisions, closeDeleteTipDialog]);\n  var renderContent = useCallback(function () {\n    if (page === 1 && isLoading) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sdoc-revisions-container loading\"\n      }, /*#__PURE__*/React.createElement(CommonLoading, null));\n    }\n    if (page === 1 && errorMessage) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sdoc-revisions-container error\"\n      }, t(errorMessage));\n    }\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sdoc-revisions-container\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sdoc-revisions-header\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sdoc-revision-name-header\",\n      style: {\n        width: '40%'\n      }\n    }, t('ID')), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sdoc-revision-user-header\",\n      style: {\n        width: '25%'\n      }\n    }, t('Creator')), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sdoc-revision-time-header\",\n      style: {\n        width: '30%'\n      }\n    }, t('Created_time')), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sdoc-revision-time-header\",\n      style: {\n        width: '5%'\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sdoc-revisions-content\",\n      onScroll: onScroll\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sdoc-revisions-list\",\n      ref: revisionListRef\n    }, revisions.map(function (revision) {\n      var revisionId = revision.id;\n      var isOperating = operatingRevisionId === revisionId;\n      var isActive = activeRevisionId === revisionId;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: revision.id,\n        className: classnames('sdoc-revision', {\n          'operating': isOperating\n        }),\n        onClick: function onClick(event) {\n          return openRevision(event, revisionId);\n        },\n        onMouseEnter: function onMouseEnter() {\n          return setActiveRevision(revisionId);\n        },\n        onMouseLeave: function onMouseLeave() {\n          return setActiveRevision('');\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sdoc-revision-name\",\n        style: {\n          width: '40%'\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sdoc-revision-name-content\"\n      }, t('Revision') + ' ' + revisionId)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sdoc-revision-user\",\n        style: {\n          width: '25%'\n        }\n      }, revision.nickname), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sdoc-revision-time\",\n        style: {\n          width: '30%'\n        }\n      }, revision.createdTime), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sdoc-revision-operations\",\n        style: {\n          width: '5%'\n        }\n      }, /*#__PURE__*/React.createElement(RevisionOperation, {\n        isActive: isActive,\n        isOperating: isOperating,\n        revision: revision,\n        updateOperatingRevision: setOperatingRevision,\n        onDeleteOtherRevision: onDeleteOtherRevision\n      })));\n    }), isLoading && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sdoc-revision loading\"\n    }, /*#__PURE__*/React.createElement(CommonLoading, null)))));\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [page, revisions, isLoading, errorMessage, activeRevisionId, operatingRevisionId]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Modal, {\n    isOpen: true,\n    toggle: toggle,\n    className: \"revisions-dialog\"\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    toggle: toggle\n  }, t('Revision')), /*#__PURE__*/React.createElement(ModalBody, {\n    className: \"revisions-body\"\n  }, renderContent())), showDeleteTipDialog && /*#__PURE__*/React.createElement(TipDialog, {\n    tipType: TIP_TYPE.DELETE_REVISION,\n    onSubmit: deleteOtherRevision,\n    onClose: closeDeleteTipDialog,\n    zIndex: 1071\n  }, t(TIP_CONTENT[TIP_TYPE.DELETE_REVISION], {\n    content: \"\".concat(t('revision'), \" \").concat(operatingRevisionId)\n  })));\n};\nexport default RevisionsDialog;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","useTranslation","Modal","ModalHeader","ModalBody","classnames","CommonLoading","context","Revision","getErrorMsg","toaster","RevisionOperation","eventStopPropagation","TipDialog","TIP_CONTENT","TIP_TYPE","RevisionsDialog","_ref","_revisionListRef$curr","updateRevisionsCount","toggle","revisionListRef","_useTranslation","t","_useState","_useState2","_slicedToArray","isLoading","setLoading","_useState3","_useState4","revisions","setRevisions","_useState5","_useState6","page","setPage","_useState7","_useState8","errorMessage","setErrorMessage","_useState9","_useState10","hasMore","setHasMore","perPage","repoID","getSetting","siteRoot","_useState11","_useState12","activeRevisionId","setActiveRevision","_useState13","_useState14","operatingRevisionId","setOperatingRevision","_useState15","_useState16","showDeleteTipDialog","setShowDeleteTipDialog","listRevisions","getSdocRevisions","then","res","addedRevisions","data","map","revision","count","newRevisions","concat","_toConsumableArray","length","catch","error","danger","openRevision","event","revisionId","target","className","includes","url","window","open","onScroll","_event$target","scrollTop","clientHeight","_ref2","current","revisionListHeight","onDeleteOtherRevision","closeDeleteTipDialog","deleteOtherRevision","revisionIndex","findIndex","id","deleteSdocOtherRevision","slice","splice","success","renderContent","createElement","style","width","ref","isOperating","isActive","key","onClick","onMouseEnter","onMouseLeave","nickname","createdTime","updateOperatingRevision","Fragment","isOpen","tipType","DELETE_REVISION","onSubmit","onClose","zIndex","content"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/components/doc-operations/revision-operations/revisions/revisions-dialog/index.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport classnames from 'classnames';\nimport CommonLoading from '../../../../common-loading';\nimport context from '../../../../../context';\nimport { Revision } from '../../../../../model';\nimport { getErrorMsg } from '../../../../../utils';\nimport toaster from '../../../../toast';\nimport RevisionOperation from './revision-operation';\nimport { eventStopPropagation } from '../../../../../basic-sdk/utils/mouse-event';\nimport TipDialog from '../../../../tip-dialog';\nimport './index.css';\nimport { TIP_CONTENT, TIP_TYPE } from '../../../../../constants';\nconst RevisionsDialog = _ref => {\n  var _revisionListRef$curr;\n  let {\n    updateRevisionsCount,\n    toggle\n  } = _ref;\n  const revisionListRef = useRef(null);\n  const {\n    t\n  } = useTranslation();\n  const [isLoading, setLoading] = useState(true);\n  const [revisions, setRevisions] = useState([]);\n  const [page, setPage] = useState(1);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [hasMore, setHasMore] = useState(true);\n  const perPage = 25;\n  const repoID = context.getSetting('repoID');\n  const siteRoot = context.getSetting('siteRoot');\n  const [activeRevisionId, setActiveRevision] = useState('');\n  const [operatingRevisionId, setOperatingRevision] = useState('');\n  const [showDeleteTipDialog, setShowDeleteTipDialog] = useState(false);\n\n  // did mount\n  useEffect(() => {\n    listRevisions();\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const listRevisions = useCallback(() => {\n    context.getSdocRevisions(page, perPage).then(res => {\n      const addedRevisions = res.data.revisions.map(revision => new Revision(revision));\n      setLoading(false);\n      updateRevisionsCount(res.data.count);\n      const newRevisions = [...revisions, ...addedRevisions];\n      setRevisions(newRevisions);\n      if (newRevisions.length < res.data.count) {\n        setPage(page + 1);\n      } else {\n        setHasMore(false);\n      }\n    }).catch(error => {\n      const errorMessage = getErrorMsg(error);\n      if (page === 1) {\n        setErrorMessage(errorMessage);\n      } else {\n        toaster.danger(t(errorMessage));\n      }\n      setLoading(false);\n    });\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [revisions, page, perPage]);\n  const openRevision = useCallback((event, revisionId) => {\n    eventStopPropagation(event);\n    if (event.target.className.includes('sdoc-revision-operation-toggle')) return;\n    const url = \"\".concat(siteRoot, \"lib/\").concat(repoID, \"/revisions/\").concat(revisionId, \"/\");\n    window.open(url, '_blank');\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const onScroll = useCallback(event => {\n    const {\n      scrollTop,\n      clientHeight\n    } = event.target;\n    const {\n      clientHeight: revisionListHeight\n    } = revisionListRef.current || {\n      clientHeight: 0\n    };\n    if (isLoading) return;\n    if (!hasMore) return;\n    if (scrollTop + clientHeight + 1 >= revisionListHeight) {\n      setLoading(true);\n      listRevisions();\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [(_revisionListRef$curr = revisionListRef.current) === null || _revisionListRef$curr === void 0 ? void 0 : _revisionListRef$curr.clientHeight, isLoading, hasMore]);\n  const onDeleteOtherRevision = useCallback(() => {\n    setShowDeleteTipDialog(true);\n  }, []);\n  const closeDeleteTipDialog = useCallback(() => {\n    setOperatingRevision('');\n    setShowDeleteTipDialog(false);\n  }, []);\n  const deleteOtherRevision = useCallback(() => {\n    const revisionIndex = revisions.findIndex(revision => revision.id === operatingRevisionId);\n    if (revisionIndex === -1) {\n      closeDeleteTipDialog();\n      return;\n    }\n    const revision = revisions[revisionIndex];\n    context.deleteSdocOtherRevision(revision.id).then(res => {\n      const newRevisions = revisions.slice(0);\n      newRevisions.splice(revisionIndex, 1);\n      updateRevisionsCount(newRevisions.length);\n      setRevisions(newRevisions);\n      closeDeleteTipDialog();\n      toaster.success(t('Revision_deleted'));\n    }).catch(error => {\n      const errorMessage = getErrorMsg(error);\n      toaster.danger(t(errorMessage));\n    });\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [operatingRevisionId, revisions, closeDeleteTipDialog]);\n  const renderContent = useCallback(() => {\n    if (page === 1 && isLoading) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sdoc-revisions-container loading\"\n      }, /*#__PURE__*/React.createElement(CommonLoading, null));\n    }\n    if (page === 1 && errorMessage) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sdoc-revisions-container error\"\n      }, t(errorMessage));\n    }\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sdoc-revisions-container\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sdoc-revisions-header\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sdoc-revision-name-header\",\n      style: {\n        width: '40%'\n      }\n    }, t('ID')), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sdoc-revision-user-header\",\n      style: {\n        width: '25%'\n      }\n    }, t('Creator')), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sdoc-revision-time-header\",\n      style: {\n        width: '30%'\n      }\n    }, t('Created_time')), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sdoc-revision-time-header\",\n      style: {\n        width: '5%'\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sdoc-revisions-content\",\n      onScroll: onScroll\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sdoc-revisions-list\",\n      ref: revisionListRef\n    }, revisions.map(revision => {\n      const revisionId = revision.id;\n      const isOperating = operatingRevisionId === revisionId;\n      const isActive = activeRevisionId === revisionId;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: revision.id,\n        className: classnames('sdoc-revision', {\n          'operating': isOperating\n        }),\n        onClick: event => openRevision(event, revisionId),\n        onMouseEnter: () => setActiveRevision(revisionId),\n        onMouseLeave: () => setActiveRevision('')\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sdoc-revision-name\",\n        style: {\n          width: '40%'\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sdoc-revision-name-content\"\n      }, t('Revision') + ' ' + revisionId)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sdoc-revision-user\",\n        style: {\n          width: '25%'\n        }\n      }, revision.nickname), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sdoc-revision-time\",\n        style: {\n          width: '30%'\n        }\n      }, revision.createdTime), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sdoc-revision-operations\",\n        style: {\n          width: '5%'\n        }\n      }, /*#__PURE__*/React.createElement(RevisionOperation, {\n        isActive: isActive,\n        isOperating: isOperating,\n        revision: revision,\n        updateOperatingRevision: setOperatingRevision,\n        onDeleteOtherRevision: onDeleteOtherRevision\n      })));\n    }), isLoading && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sdoc-revision loading\"\n    }, /*#__PURE__*/React.createElement(CommonLoading, null)))));\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [page, revisions, isLoading, errorMessage, activeRevisionId, operatingRevisionId]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Modal, {\n    isOpen: true,\n    toggle: toggle,\n    className: \"revisions-dialog\"\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    toggle: toggle\n  }, t('Revision')), /*#__PURE__*/React.createElement(ModalBody, {\n    className: \"revisions-body\"\n  }, renderContent())), showDeleteTipDialog && /*#__PURE__*/React.createElement(TipDialog, {\n    tipType: TIP_TYPE.DELETE_REVISION,\n    onSubmit: deleteOtherRevision,\n    onClose: closeDeleteTipDialog,\n    zIndex: 1071\n  }, t(TIP_CONTENT[TIP_TYPE.DELETE_REVISION], {\n    content: \"\".concat(t('revision'), \" \").concat(operatingRevisionId)\n  })));\n};\nexport default RevisionsDialog;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}