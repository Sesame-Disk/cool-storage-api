{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _helpers = require(\"./helpers\");\nvar catchSlateFragment = /data-slate-fragment=\"(.+?)\"/m;\nvar getSlateFragmentAttribute = function getSlateFragmentAttribute(dataTransfer) {\n  var htmlData = dataTransfer.getData('text/html');\n  var _ref = htmlData.match(catchSlateFragment) || [],\n    _ref2 = _slicedToArray(_ref, 2),\n    fragment = _ref2[1];\n  return fragment;\n};\nvar withNodeId = function withNodeId(editor) {\n  var apply = editor.apply;\n  var newEditor = editor;\n  newEditor.apply = function (op) {\n    var newOp = (0, _helpers.decorateOperation)(op);\n    apply(newOp);\n  };\n\n  // rewrite insert fragment data\n  newEditor.insertFragmentData = function (data) {\n    var fragment = data.getData('application/x-slate-fragment') || getSlateFragmentAttribute(data);\n    if (fragment) {\n      var decoded = decodeURIComponent(window.atob(fragment));\n      var parsed = JSON.parse(decoded);\n      var newData = (0, _helpers.replacePastedDataId)(parsed);\n      newEditor.insertFragment(newData);\n      return newEditor;\n    }\n  };\n  return newEditor;\n};\nvar _default = exports.default = withNodeId;","map":{"version":3,"names":["_slicedToArray","require","default","Object","defineProperty","exports","value","_helpers","catchSlateFragment","getSlateFragmentAttribute","dataTransfer","htmlData","getData","_ref","match","_ref2","fragment","withNodeId","editor","apply","newEditor","op","newOp","decorateOperation","insertFragmentData","data","decoded","decodeURIComponent","window","atob","parsed","JSON","parse","newData","replacePastedDataId","insertFragment","_default"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/extension/plugins/node-id/with-node-id.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _helpers = require(\"./helpers\");\nconst catchSlateFragment = /data-slate-fragment=\"(.+?)\"/m;\nconst getSlateFragmentAttribute = dataTransfer => {\n  const htmlData = dataTransfer.getData('text/html');\n  const [, fragment] = htmlData.match(catchSlateFragment) || [];\n  return fragment;\n};\nconst withNodeId = editor => {\n  const {\n    apply\n  } = editor;\n  const newEditor = editor;\n  newEditor.apply = op => {\n    const newOp = (0, _helpers.decorateOperation)(op);\n    apply(newOp);\n  };\n\n  // rewrite insert fragment data\n  newEditor.insertFragmentData = data => {\n    const fragment = data.getData('application/x-slate-fragment') || getSlateFragmentAttribute(data);\n    if (fragment) {\n      const decoded = decodeURIComponent(window.atob(fragment));\n      const parsed = JSON.parse(decoded);\n      const newData = (0, _helpers.replacePastedDataId)(parsed);\n      newEditor.insertFragment(newData);\n      return newEditor;\n    }\n  };\n  return newEditor;\n};\nvar _default = exports.default = withNodeId;"],"mappings":"AAAA,YAAY;;AAAC,IAAAA,cAAA,GAAAC,OAAA,0HAAAC,OAAA;AAEbC,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAC3CC,KAAK,EAAE;AACT,CAAC,CAAC;AACFD,OAAO,CAACH,OAAO,GAAG,KAAK,CAAC;AACxB,IAAIK,QAAQ,GAAGN,OAAO,CAAC,WAAW,CAAC;AACnC,IAAMO,kBAAkB,GAAG,8BAA8B;AACzD,IAAMC,yBAAyB,GAAG,SAA5BA,yBAAyBA,CAAGC,YAAY,EAAI;EAChD,IAAMC,QAAQ,GAAGD,YAAY,CAACE,OAAO,CAAC,WAAW,CAAC;EAClD,IAAAC,IAAA,GAAqBF,QAAQ,CAACG,KAAK,CAACN,kBAAkB,CAAC,IAAI,EAAE;IAAAO,KAAA,GAAAf,cAAA,CAAAa,IAAA;IAApDG,QAAQ,GAAAD,KAAA;EACjB,OAAOC,QAAQ;AACjB,CAAC;AACD,IAAMC,UAAU,GAAG,SAAbA,UAAUA,CAAGC,MAAM,EAAI;EAC3B,IACEC,KAAK,GACHD,MAAM,CADRC,KAAK;EAEP,IAAMC,SAAS,GAAGF,MAAM;EACxBE,SAAS,CAACD,KAAK,GAAG,UAAAE,EAAE,EAAI;IACtB,IAAMC,KAAK,GAAG,CAAC,CAAC,EAAEf,QAAQ,CAACgB,iBAAiB,EAAEF,EAAE,CAAC;IACjDF,KAAK,CAACG,KAAK,CAAC;EACd,CAAC;;EAED;EACAF,SAAS,CAACI,kBAAkB,GAAG,UAAAC,IAAI,EAAI;IACrC,IAAMT,QAAQ,GAAGS,IAAI,CAACb,OAAO,CAAC,8BAA8B,CAAC,IAAIH,yBAAyB,CAACgB,IAAI,CAAC;IAChG,IAAIT,QAAQ,EAAE;MACZ,IAAMU,OAAO,GAAGC,kBAAkB,CAACC,MAAM,CAACC,IAAI,CAACb,QAAQ,CAAC,CAAC;MACzD,IAAMc,MAAM,GAAGC,IAAI,CAACC,KAAK,CAACN,OAAO,CAAC;MAClC,IAAMO,OAAO,GAAG,CAAC,CAAC,EAAE1B,QAAQ,CAAC2B,mBAAmB,EAAEJ,MAAM,CAAC;MACzDV,SAAS,CAACe,cAAc,CAACF,OAAO,CAAC;MACjC,OAAOb,SAAS;IAClB;EACF,CAAC;EACD,OAAOA,SAAS;AAClB,CAAC;AACD,IAAIgB,QAAQ,GAAG/B,OAAO,CAACH,OAAO,GAAGe,UAAU"},"metadata":{},"sourceType":"script","externalDependencies":[]}