{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.renderCodeLine = exports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _languageSelector = _interopRequireDefault(require(\"./language-selector\"));\nvar _helpers = require(\"../helpers\");\nvar _constant = require(\"./constant\");\nvar _core = require(\"../../../core\");\n/* eslint-disable react-hooks/rules-of-hooks */\n\nvar renderCodeBlock = function renderCodeBlock(_ref, editor) {\n  var attributes = _ref.attributes,\n    children = _ref.children,\n    element = _ref.element;\n  var _ref2 = (0, _react.useState)(true),\n    _ref3 = _slicedToArray(_ref2, 2),\n    isShowLanguageSelector = _ref3[0],\n    setIsShowLanguageSelector = _ref3[1];\n  var codeBlockRef = (0, _react.useRef)(null);\n  (0, _react.useEffect)(function () {\n    if (!editor.selection) return;\n    if (!(0, _helpers.isInCodeBlock)(editor)) onHideLanguageSelector();\n    if ((0, _helpers.isInCodeBlock)(editor)) registerEventHandler();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [editor, editor.selection]);\n  var onHideLanguageSelector = (0, _react.useCallback)(function (e) {\n    var _codeBlockRef$current;\n    if (codeBlockRef !== null && codeBlockRef !== void 0 && (_codeBlockRef$current = codeBlockRef.current) !== null && _codeBlockRef$current !== void 0 && _codeBlockRef$current.contains(e === null || e === void 0 ? void 0 : e.target) || (0, _helpers.isInCodeBlock)(editor)) return;\n    setIsShowLanguageSelector(false);\n    unregisterEventHandler();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [setIsShowLanguageSelector]);\n  var registerEventHandler = (0, _react.useCallback)(function () {\n    setIsShowLanguageSelector(true);\n    document.addEventListener('click', onHideLanguageSelector, true);\n  }, [onHideLanguageSelector]);\n  var unregisterEventHandler = (0, _react.useCallback)(function () {\n    document.removeEventListener('click', onHideLanguageSelector);\n  }, [onHideLanguageSelector]);\n  var handleLangSelectorChange = function handleLangSelectorChange() {\n    var lang = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _constant.EXPLAIN_TEXT;\n    var path = (0, _core.findPath)(editor, element);\n    (0, _helpers.setCodeBlockLanguage)(editor, lang, path);\n  };\n  return /*#__PURE__*/_react.default.createElement(\"div\", {\n    ref: codeBlockRef,\n    className: \"sf-code-block-container\"\n  }, /*#__PURE__*/_react.default.createElement(\"pre\", attributes, /*#__PURE__*/_react.default.createElement(\"code\", null, children)), isShowLanguageSelector && /*#__PURE__*/_react.default.createElement(_languageSelector.default, {\n    lang: element.lang,\n    handleLangSelectorChange: handleLangSelectorChange\n  }));\n};\nvar _default = exports.default = renderCodeBlock;\nvar renderCodeLine = function renderCodeLine(props, editor) {\n  var element = props.element,\n    attributes = props.attributes,\n    children = props.children;\n  return /*#__PURE__*/_react.default.createElement(\"div\", Object.assign({\n    \"data-id\": element.id\n  }, attributes, {\n    className: 'sf-code-line'\n  }), children);\n};\nexports.renderCodeLine = renderCodeLine;","map":{"version":3,"names":["_slicedToArray","require","default","_interopRequireDefault","_interopRequireWildcard","Object","defineProperty","exports","value","renderCodeLine","_react","_languageSelector","_helpers","_constant","_core","renderCodeBlock","_ref","editor","attributes","children","element","_ref2","useState","_ref3","isShowLanguageSelector","setIsShowLanguageSelector","codeBlockRef","useRef","useEffect","selection","isInCodeBlock","onHideLanguageSelector","registerEventHandler","useCallback","e","_codeBlockRef$current","current","contains","target","unregisterEventHandler","document","addEventListener","removeEventListener","handleLangSelectorChange","lang","arguments","length","undefined","EXPLAIN_TEXT","path","findPath","setCodeBlockLanguage","createElement","ref","className","_default","props","assign","id"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/extension/plugins/code-block/render-elem/index.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.renderCodeLine = exports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _languageSelector = _interopRequireDefault(require(\"./language-selector\"));\nvar _helpers = require(\"../helpers\");\nvar _constant = require(\"./constant\");\nvar _core = require(\"../../../core\");\n/* eslint-disable react-hooks/rules-of-hooks */\n\nconst renderCodeBlock = (_ref, editor) => {\n  let {\n    attributes,\n    children,\n    element\n  } = _ref;\n  const [isShowLanguageSelector, setIsShowLanguageSelector] = (0, _react.useState)(true);\n  const codeBlockRef = (0, _react.useRef)(null);\n  (0, _react.useEffect)(() => {\n    if (!editor.selection) return;\n    if (!(0, _helpers.isInCodeBlock)(editor)) onHideLanguageSelector();\n    if ((0, _helpers.isInCodeBlock)(editor)) registerEventHandler();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [editor, editor.selection]);\n  const onHideLanguageSelector = (0, _react.useCallback)(e => {\n    var _codeBlockRef$current;\n    if (codeBlockRef !== null && codeBlockRef !== void 0 && (_codeBlockRef$current = codeBlockRef.current) !== null && _codeBlockRef$current !== void 0 && _codeBlockRef$current.contains(e === null || e === void 0 ? void 0 : e.target) || (0, _helpers.isInCodeBlock)(editor)) return;\n    setIsShowLanguageSelector(false);\n    unregisterEventHandler();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [setIsShowLanguageSelector]);\n  const registerEventHandler = (0, _react.useCallback)(() => {\n    setIsShowLanguageSelector(true);\n    document.addEventListener('click', onHideLanguageSelector, true);\n  }, [onHideLanguageSelector]);\n  const unregisterEventHandler = (0, _react.useCallback)(() => {\n    document.removeEventListener('click', onHideLanguageSelector);\n  }, [onHideLanguageSelector]);\n  const handleLangSelectorChange = function () {\n    let lang = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _constant.EXPLAIN_TEXT;\n    const path = (0, _core.findPath)(editor, element);\n    (0, _helpers.setCodeBlockLanguage)(editor, lang, path);\n  };\n  return /*#__PURE__*/_react.default.createElement(\"div\", {\n    ref: codeBlockRef,\n    className: \"sf-code-block-container\"\n  }, /*#__PURE__*/_react.default.createElement(\"pre\", attributes, /*#__PURE__*/_react.default.createElement(\"code\", null, children)), isShowLanguageSelector && /*#__PURE__*/_react.default.createElement(_languageSelector.default, {\n    lang: element.lang,\n    handleLangSelectorChange: handleLangSelectorChange\n  }));\n};\nvar _default = exports.default = renderCodeBlock;\nconst renderCodeLine = (props, editor) => {\n  const {\n    element,\n    attributes,\n    children\n  } = props;\n  return /*#__PURE__*/_react.default.createElement(\"div\", Object.assign({\n    \"data-id\": element.id\n  }, attributes, {\n    className: 'sf-code-line'\n  }), children);\n};\nexports.renderCodeLine = renderCodeLine;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}