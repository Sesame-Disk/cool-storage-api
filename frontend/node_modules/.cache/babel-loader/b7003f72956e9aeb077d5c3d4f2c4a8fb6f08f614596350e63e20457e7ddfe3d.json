{"ast":null,"code":"import _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _createForOfIteratorHelper from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport { Transforms, Editor, Element } from '@seafile/slate';\nimport { CHECK_LIST_ITEM, PARAGRAPH, ELEMENT_TYPE, INSERT_POSITION } from '../../constants';\nimport { getSelectedNodeByType, generateEmptyElement } from '../../core';\nexport var isMenuDisabled = function isMenuDisabled(editor, readonly) {\n  if (readonly) return true;\n  if (editor.selection == null) return true;\n  var selectedElements = [];\n  var nodeEntries = Editor.nodes(editor, {\n    universal: true\n  });\n  var _iterator = _createForOfIteratorHelper(nodeEntries),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var nodeEntry = _step.value;\n      var _nodeEntry = _slicedToArray(nodeEntry, 1),\n        node = _nodeEntry[0];\n      if (Element.isElement(node)) selectedElements.push(node);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  var notMatch = selectedElements.some(function (element) {\n    if (Editor.isVoid(editor, element) && Editor.isBlock(editor, element)) return true;\n    var type = element.type;\n    if (type === ELEMENT_TYPE.CODE_LINE) return true;\n    if (type === ELEMENT_TYPE.CODE_BLOCK) return true;\n    if (type === ELEMENT_TYPE.LIST_ITEM) return true;\n    if (type === ELEMENT_TYPE.TABLE) return true;\n    if (type === ELEMENT_TYPE.TABLE_ROW) return true;\n    if (type === ELEMENT_TYPE.TABLE_CELL) return true;\n    return false;\n  });\n  if (notMatch) return true;\n  return false;\n};\nexport var getCheckListItemType = function getCheckListItemType(editor) {\n  var node = getSelectedNodeByType(editor, CHECK_LIST_ITEM);\n  if (!node) return PARAGRAPH;\n  return node.type;\n};\nexport var setCheckListItemType = function setCheckListItemType(editor, newType, insertPosition) {\n  if (insertPosition === INSERT_POSITION.AFTER) {\n    var p = generateEmptyElement(PARAGRAPH);\n    var path = Editor.path(editor, editor.selection);\n    Transforms.insertNodes(editor, p, {\n      at: [path[0] + 1]\n    });\n    Transforms.select(editor, [path[0] + 1]);\n  }\n  Transforms.setNodes(editor, {\n    type: newType\n  });\n};","map":{"version":3,"names":["Transforms","Editor","Element","CHECK_LIST_ITEM","PARAGRAPH","ELEMENT_TYPE","INSERT_POSITION","getSelectedNodeByType","generateEmptyElement","isMenuDisabled","editor","readonly","selection","selectedElements","nodeEntries","nodes","universal","_iterator","_createForOfIteratorHelper","_step","s","n","done","nodeEntry","value","_nodeEntry","_slicedToArray","node","isElement","push","err","e","f","notMatch","some","element","isVoid","isBlock","type","CODE_LINE","CODE_BLOCK","LIST_ITEM","TABLE","TABLE_ROW","TABLE_CELL","getCheckListItemType","setCheckListItemType","newType","insertPosition","AFTER","p","path","insertNodes","at","select","setNodes"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/extension/plugins/check-list/helpers.js"],"sourcesContent":["import { Transforms, Editor, Element } from '@seafile/slate';\nimport { CHECK_LIST_ITEM, PARAGRAPH, ELEMENT_TYPE, INSERT_POSITION } from '../../constants';\nimport { getSelectedNodeByType, generateEmptyElement } from '../../core';\nexport const isMenuDisabled = (editor, readonly) => {\n  if (readonly) return true;\n  if (editor.selection == null) return true;\n  let selectedElements = [];\n  const nodeEntries = Editor.nodes(editor, {\n    universal: true\n  });\n  for (let nodeEntry of nodeEntries) {\n    const [node] = nodeEntry;\n    if (Element.isElement(node)) selectedElements.push(node);\n  }\n  const notMatch = selectedElements.some(element => {\n    if (Editor.isVoid(editor, element) && Editor.isBlock(editor, element)) return true;\n    const {\n      type\n    } = element;\n    if (type === ELEMENT_TYPE.CODE_LINE) return true;\n    if (type === ELEMENT_TYPE.CODE_BLOCK) return true;\n    if (type === ELEMENT_TYPE.LIST_ITEM) return true;\n    if (type === ELEMENT_TYPE.TABLE) return true;\n    if (type === ELEMENT_TYPE.TABLE_ROW) return true;\n    if (type === ELEMENT_TYPE.TABLE_CELL) return true;\n    return false;\n  });\n  if (notMatch) return true;\n  return false;\n};\nexport const getCheckListItemType = editor => {\n  const node = getSelectedNodeByType(editor, CHECK_LIST_ITEM);\n  if (!node) return PARAGRAPH;\n  return node.type;\n};\nexport const setCheckListItemType = (editor, newType, insertPosition) => {\n  if (insertPosition === INSERT_POSITION.AFTER) {\n    const p = generateEmptyElement(PARAGRAPH);\n    const path = Editor.path(editor, editor.selection);\n    Transforms.insertNodes(editor, p, {\n      at: [path[0] + 1]\n    });\n    Transforms.select(editor, [path[0] + 1]);\n  }\n  Transforms.setNodes(editor, {\n    type: newType\n  });\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}