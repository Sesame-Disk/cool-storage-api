{"ast":null,"code":"import dayjs from 'dayjs';\nimport relativeTime from 'dayjs/plugin/relativeTime';\nimport context from '../../../context';\ndayjs.extend(relativeTime);\nvar PERMISSION_GRANTED = 'granted';\nvar notify = function notify($title, $options) {\n  var notification = new Notification($title, $options);\n\n  // auto clear notifications\n  var timer = setTimeout(notification.close.bind(notification), 5000);\n  notification.onshow = function (event) {\n    var _context$getSetting = context.getSetting('mediaUrl'),\n      mediaUrl = _context$getSetting.mediaUrl;\n    var newAudioElement = document.createElement('audio');\n    newAudioElement.setAttribute('src', \"\".concat(mediaUrl, \"audio/classic.mp3\"));\n    newAudioElement.setAttribute('autoplay', 'autoplay');\n    newAudioElement.setAttribute('id', 'seatable-audio');\n    var audioElement = document.getElementById('seatable-audio');\n    if (audioElement) {\n      document.body.removeChild(audioElement);\n    }\n    document.body.appendChild(newAudioElement);\n  };\n  notification.onclose = function () {\n    clearTimeout(timer);\n  };\n  notification.onclick = function () {\n    notification.close();\n  };\n};\nexport var createNotify = function createNotify(title, options) {\n  // Let's check if the browser supports notifications\n  if (!('Notification' in window)) {\n    return false;\n  }\n  if (Notification.permission === PERMISSION_GRANTED) {\n    notify(title, options);\n  } else {\n    Notification.requestPermission(function (res) {\n      if (res === PERMISSION_GRANTED) {\n        notify(title, options);\n      }\n    });\n  }\n};\nexport var generatorNotificationKey = function generatorNotificationKey(commentId) {\n  var replyId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var validCommentId = commentId + '';\n  var validReplyId = replyId + '';\n  if (!validReplyId) return \"sdoc_notification_\".concat(validCommentId);\n  return \"sdoc_notification_\".concat(validCommentId, \"_\").concat(validReplyId);\n};","map":{"version":3,"names":["dayjs","relativeTime","context","extend","PERMISSION_GRANTED","notify","$title","$options","notification","Notification","timer","setTimeout","close","bind","onshow","event","_context$getSetting","getSetting","mediaUrl","newAudioElement","document","createElement","setAttribute","concat","audioElement","getElementById","body","removeChild","appendChild","onclose","clearTimeout","onclick","createNotify","title","options","window","permission","requestPermission","res","generatorNotificationKey","commentId","replyId","arguments","length","undefined","validCommentId","validReplyId"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/comment/utils/notification-utils.js"],"sourcesContent":["import dayjs from 'dayjs';\nimport relativeTime from 'dayjs/plugin/relativeTime';\nimport context from '../../../context';\ndayjs.extend(relativeTime);\nconst PERMISSION_GRANTED = 'granted';\nconst notify = ($title, $options) => {\n  const notification = new Notification($title, $options);\n\n  // auto clear notifications\n  const timer = setTimeout(notification.close.bind(notification), 5000);\n  notification.onshow = function (event) {\n    const {\n      mediaUrl\n    } = context.getSetting('mediaUrl');\n    let newAudioElement = document.createElement('audio');\n    newAudioElement.setAttribute('src', \"\".concat(mediaUrl, \"audio/classic.mp3\"));\n    newAudioElement.setAttribute('autoplay', 'autoplay');\n    newAudioElement.setAttribute('id', 'seatable-audio');\n    let audioElement = document.getElementById('seatable-audio');\n    if (audioElement) {\n      document.body.removeChild(audioElement);\n    }\n    document.body.appendChild(newAudioElement);\n  };\n  notification.onclose = function () {\n    clearTimeout(timer);\n  };\n  notification.onclick = function () {\n    notification.close();\n  };\n};\nexport const createNotify = (title, options) => {\n  // Let's check if the browser supports notifications\n  if (!('Notification' in window)) {\n    return false;\n  }\n  if (Notification.permission === PERMISSION_GRANTED) {\n    notify(title, options);\n  } else {\n    Notification.requestPermission(res => {\n      if (res === PERMISSION_GRANTED) {\n        notify(title, options);\n      }\n    });\n  }\n};\nexport const generatorNotificationKey = function (commentId) {\n  let replyId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  const validCommentId = commentId + '';\n  const validReplyId = replyId + '';\n  if (!validReplyId) return \"sdoc_notification_\".concat(validCommentId);\n  return \"sdoc_notification_\".concat(validCommentId, \"_\").concat(validReplyId);\n};"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,YAAY,MAAM,2BAA2B;AACpD,OAAOC,OAAO,MAAM,kBAAkB;AACtCF,KAAK,CAACG,MAAM,CAACF,YAAY,CAAC;AAC1B,IAAMG,kBAAkB,GAAG,SAAS;AACpC,IAAMC,MAAM,GAAG,SAATA,MAAMA,CAAIC,MAAM,EAAEC,QAAQ,EAAK;EACnC,IAAMC,YAAY,GAAG,IAAIC,YAAY,CAACH,MAAM,EAAEC,QAAQ,CAAC;;EAEvD;EACA,IAAMG,KAAK,GAAGC,UAAU,CAACH,YAAY,CAACI,KAAK,CAACC,IAAI,CAACL,YAAY,CAAC,EAAE,IAAI,CAAC;EACrEA,YAAY,CAACM,MAAM,GAAG,UAAUC,KAAK,EAAE;IACrC,IAAAC,mBAAA,GAEId,OAAO,CAACe,UAAU,CAAC,UAAU,CAAC;MADhCC,QAAQ,GAAAF,mBAAA,CAARE,QAAQ;IAEV,IAAIC,eAAe,GAAGC,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC;IACrDF,eAAe,CAACG,YAAY,CAAC,KAAK,EAAE,EAAE,CAACC,MAAM,CAACL,QAAQ,EAAE,mBAAmB,CAAC,CAAC;IAC7EC,eAAe,CAACG,YAAY,CAAC,UAAU,EAAE,UAAU,CAAC;IACpDH,eAAe,CAACG,YAAY,CAAC,IAAI,EAAE,gBAAgB,CAAC;IACpD,IAAIE,YAAY,GAAGJ,QAAQ,CAACK,cAAc,CAAC,gBAAgB,CAAC;IAC5D,IAAID,YAAY,EAAE;MAChBJ,QAAQ,CAACM,IAAI,CAACC,WAAW,CAACH,YAAY,CAAC;IACzC;IACAJ,QAAQ,CAACM,IAAI,CAACE,WAAW,CAACT,eAAe,CAAC;EAC5C,CAAC;EACDX,YAAY,CAACqB,OAAO,GAAG,YAAY;IACjCC,YAAY,CAACpB,KAAK,CAAC;EACrB,CAAC;EACDF,YAAY,CAACuB,OAAO,GAAG,YAAY;IACjCvB,YAAY,CAACI,KAAK,CAAC,CAAC;EACtB,CAAC;AACH,CAAC;AACD,OAAO,IAAMoB,YAAY,GAAG,SAAfA,YAAYA,CAAIC,KAAK,EAAEC,OAAO,EAAK;EAC9C;EACA,IAAI,EAAE,cAAc,IAAIC,MAAM,CAAC,EAAE;IAC/B,OAAO,KAAK;EACd;EACA,IAAI1B,YAAY,CAAC2B,UAAU,KAAKhC,kBAAkB,EAAE;IAClDC,MAAM,CAAC4B,KAAK,EAAEC,OAAO,CAAC;EACxB,CAAC,MAAM;IACLzB,YAAY,CAAC4B,iBAAiB,CAAC,UAAAC,GAAG,EAAI;MACpC,IAAIA,GAAG,KAAKlC,kBAAkB,EAAE;QAC9BC,MAAM,CAAC4B,KAAK,EAAEC,OAAO,CAAC;MACxB;IACF,CAAC,CAAC;EACJ;AACF,CAAC;AACD,OAAO,IAAMK,wBAAwB,GAAG,SAA3BA,wBAAwBA,CAAaC,SAAS,EAAE;EAC3D,IAAIC,OAAO,GAAGC,SAAS,CAACC,MAAM,GAAG,CAAC,IAAID,SAAS,CAAC,CAAC,CAAC,KAAKE,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC,GAAG,EAAE;EACpF,IAAMG,cAAc,GAAGL,SAAS,GAAG,EAAE;EACrC,IAAMM,YAAY,GAAGL,OAAO,GAAG,EAAE;EACjC,IAAI,CAACK,YAAY,EAAE,OAAO,oBAAoB,CAACvB,MAAM,CAACsB,cAAc,CAAC;EACrE,OAAO,oBAAoB,CAACtB,MAAM,CAACsB,cAAc,EAAE,GAAG,CAAC,CAACtB,MAAM,CAACuB,YAAY,CAAC;AAC9E,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}