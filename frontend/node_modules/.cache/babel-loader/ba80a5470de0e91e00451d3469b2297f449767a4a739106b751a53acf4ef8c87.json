{"ast":null,"code":"import _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useCallback, useState } from 'react';\nimport { withTranslation } from 'react-i18next';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport context from '../../../../context';\nimport toaster from '../../../toast';\nimport './index.css';\nvar MoreRevisionOperations = function MoreRevisionOperations(_ref) {\n  var t = _ref.t;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isDropdownOpen = _useState2[0],\n    setIsDropdownOpen = _useState2[1];\n  var toggleDropdown = useCallback(function (isDropdownOpen) {\n    setIsDropdownOpen(!isDropdownOpen);\n  }, []);\n  var startRevise = useCallback(function () {\n    context.startRevise().then(function (res) {\n      var repoID = context.getSetting('repoID');\n      var siteRoot = context.getSetting('siteRoot');\n      var revisionURL = \"\".concat(siteRoot, \"lib/\").concat(repoID, \"/revisions/\").concat(res.data.revision_id, \"/\");\n      window.open(revisionURL, '_blank');\n    }).catch(function (error) {\n      toaster.danger(t('Error'));\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return /*#__PURE__*/React.createElement(Dropdown, {\n    isOpen: isDropdownOpen,\n    toggle: function toggle() {\n      return toggleDropdown(isDropdownOpen);\n    },\n    className: \"sdoc-more-revision-operations-dropdown\"\n  }, /*#__PURE__*/React.createElement(DropdownToggle, {\n    className: \"ml-4 sdoc-more-revision-operations-toggle\",\n    tag: \"div\"\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"sdocfont sdoc-revise\"\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sdocfont sdoc-\".concat(isDropdownOpen ? 'caret-up' : 'drop-down')\n  })), /*#__PURE__*/React.createElement(DropdownMenu, {\n    className: \"sdoc-dropdown-menu\",\n    right: true\n  }, /*#__PURE__*/React.createElement(DropdownItem, {\n    className: \"sdoc-dropdown-menu-item\",\n    onClick: startRevise\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-more-revision-operation\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-more-revision-operation-title\"\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"sdocfont sdoc-revise\"\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sdoc-more-revision-operation-title-name\"\n  }, t('Revise'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-more-revision-operation-describe\"\n  }, t('Start_revise_tip'))))));\n};\nexport default withTranslation('sdoc-editor')(MoreRevisionOperations);","map":{"version":3,"names":["React","useCallback","useState","withTranslation","Dropdown","DropdownToggle","DropdownMenu","DropdownItem","context","toaster","MoreRevisionOperations","_ref","t","_useState","_useState2","_slicedToArray","isDropdownOpen","setIsDropdownOpen","toggleDropdown","startRevise","then","res","repoID","getSetting","siteRoot","revisionURL","concat","data","revision_id","window","open","catch","error","danger","createElement","isOpen","toggle","className","tag","right","onClick"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/components/doc-operations/revision-operations/more-revision-operations/index.js"],"sourcesContent":["import React, { useCallback, useState } from 'react';\nimport { withTranslation } from 'react-i18next';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport context from '../../../../context';\nimport toaster from '../../../toast';\nimport './index.css';\nconst MoreRevisionOperations = _ref => {\n  let {\n    t\n  } = _ref;\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n  const toggleDropdown = useCallback(isDropdownOpen => {\n    setIsDropdownOpen(!isDropdownOpen);\n  }, []);\n  const startRevise = useCallback(() => {\n    context.startRevise().then(res => {\n      const repoID = context.getSetting('repoID');\n      const siteRoot = context.getSetting('siteRoot');\n      const revisionURL = \"\".concat(siteRoot, \"lib/\").concat(repoID, \"/revisions/\").concat(res.data.revision_id, \"/\");\n      window.open(revisionURL, '_blank');\n    }).catch(error => {\n      toaster.danger(t('Error'));\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return /*#__PURE__*/React.createElement(Dropdown, {\n    isOpen: isDropdownOpen,\n    toggle: () => toggleDropdown(isDropdownOpen),\n    className: \"sdoc-more-revision-operations-dropdown\"\n  }, /*#__PURE__*/React.createElement(DropdownToggle, {\n    className: \"ml-4 sdoc-more-revision-operations-toggle\",\n    tag: \"div\"\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"sdocfont sdoc-revise\"\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sdocfont sdoc-\".concat(isDropdownOpen ? 'caret-up' : 'drop-down')\n  })), /*#__PURE__*/React.createElement(DropdownMenu, {\n    className: \"sdoc-dropdown-menu\",\n    right: true\n  }, /*#__PURE__*/React.createElement(DropdownItem, {\n    className: \"sdoc-dropdown-menu-item\",\n    onClick: startRevise\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-more-revision-operation\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-more-revision-operation-title\"\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"sdocfont sdoc-revise\"\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sdoc-more-revision-operation-title-name\"\n  }, t('Revise'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-more-revision-operation-describe\"\n  }, t('Start_revise_tip'))))));\n};\nexport default withTranslation('sdoc-editor')(MoreRevisionOperations);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}