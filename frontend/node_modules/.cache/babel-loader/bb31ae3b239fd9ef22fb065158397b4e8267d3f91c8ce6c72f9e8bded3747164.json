{"ast":null,"code":"import _regeneratorRuntime from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { Badge, Input, PopoverBody, PopoverHeader, UncontrolledPopover } from 'reactstrap';\nimport { useTranslation } from 'react-i18next';\nimport context from '../../../../context';\nimport { getErrorMsg } from '../../../../utils';\nimport toaster from '../../../toast';\nimport { generateTagColor, removeForwardSpace } from '../utils';\nimport { EventBus } from '../../../../basic-sdk';\nimport { INTERNAL_EVENT } from '../../../../basic-sdk/constants';\nimport './index.css';\nvar TagPopover = function TagPopover() {\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    searchContent = _useState2[0],\n    setSearchContent = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    tagList = _useState4[0],\n    setTagList = _useState4[1];\n  var tagListRef = useRef([]);\n  var _useTranslation = useTranslation(),\n    t = _useTranslation.t;\n\n  // Update tag view when tag is added or removed\n  var updateTagView = useCallback(function () {\n    var eventBus = EventBus.getInstance();\n    eventBus.dispatch(INTERNAL_EVENT.UPDATE_TAG_VIEW);\n  }, []);\n  var isShowCreateTag = useMemo(function () {\n    var isInputTag = !!searchContent.length;\n    var isMathExistTag = tagList.some(function (item) {\n      return item.tag_name === searchContent;\n    });\n    return isInputTag && !isMathExistTag;\n  }, [searchContent, tagList]);\n  useEffect(function () {\n    getTagList();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  var getFileTagList = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    var _yield$context$getFil, file_tags, errorMessage;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return context.getFileTagList();\n        case 3:\n          _yield$context$getFil = _context.sent;\n          file_tags = _yield$context$getFil.data.file_tags;\n          return _context.abrupt(\"return\", file_tags);\n        case 8:\n          _context.prev = 8;\n          _context.t0 = _context[\"catch\"](0);\n          errorMessage = getErrorMsg(_context.t0);\n          toaster.danger(t(errorMessage));\n        case 12:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 8]]);\n  })), [t]);\n\n  // Get tag list and set fil_tag_id property when tag is attached on file\n  var getTagList = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n    var _yield$context$getRep, repo_tags, fileTagList, errorMessage;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _context2.next = 3;\n          return context.getRepoTagList();\n        case 3:\n          _yield$context$getRep = _context2.sent;\n          repo_tags = _yield$context$getRep.data.repo_tags;\n          _context2.next = 7;\n          return getFileTagList();\n        case 7:\n          fileTagList = _context2.sent;\n          // Add file_tag_id property to tag,to mark which tag is added on file\n          repo_tags.forEach(function (item) {\n            var _matchFileTag$file_ta;\n            var matchFileTag = fileTagList.find(function (fileTag) {\n              return fileTag.repo_tag_id === item.repo_tag_id;\n            });\n            item.file_tag_id = (_matchFileTag$file_ta = matchFileTag === null || matchFileTag === void 0 ? void 0 : matchFileTag.file_tag_id) !== null && _matchFileTag$file_ta !== void 0 ? _matchFileTag$file_ta : null;\n          });\n          setTagList(repo_tags);\n          tagListRef.current = repo_tags;\n          _context2.next = 17;\n          break;\n        case 13:\n          _context2.prev = 13;\n          _context2.t0 = _context2[\"catch\"](0);\n          errorMessage = getErrorMsg(_context2.t0);\n          toaster.danger(t(errorMessage));\n        case 17:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 13]]);\n  })), [getFileTagList, t]);\n\n  // Create tag and add tag on file,then update tag list and clean search content\n  // Note: Here we remove the spaces at the beginning and end of the string\n  var handleCreateTag = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n    var tagColor, _yield$context$create, repo_tag, errorMessage;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          tagColor = generateTagColor();\n          _context3.next = 4;\n          return context.createRepoTag(searchContent.trim(), tagColor);\n        case 4:\n          _yield$context$create = _context3.sent;\n          repo_tag = _yield$context$create.data.repo_tag;\n          _context3.next = 8;\n          return context.addFileTag(repo_tag.repo_tag_id);\n        case 8:\n          getTagList();\n          setSearchContent('');\n          updateTagView();\n          _context3.next = 17;\n          break;\n        case 13:\n          _context3.prev = 13;\n          _context3.t0 = _context3[\"catch\"](0);\n          errorMessage = getErrorMsg(_context3.t0);\n          toaster.danger(t(errorMessage));\n        case 17:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[0, 13]]);\n  })), [getTagList, searchContent, updateTagView, t]);\n  var matchTag = useCallback(function (matchText) {\n    if (matchText.length) {\n      var filterTagList = tagListRef.current.filter(function (_ref) {\n        var tag_name = _ref.tag_name;\n        return tag_name.indexOf(matchText) !== -1;\n      });\n      setTagList(filterTagList);\n    } else {\n      setTagList(tagListRef.current);\n    }\n  }, []);\n\n  // Handle input change and match tag showing in popover\n  // Note: The input value is not allowed to start with a space,but it can contain spaces in the middle or at the end\n  var handleInputChange = useCallback(function (e) {\n    var _e$target, _e$target$value;\n    var text = (_e$target$value = (_e$target = e.target).value) !== null && _e$target$value !== void 0 ? _e$target$value : _e$target.value = '';\n    var inputText = removeForwardSpace(text).slice(0, 100);\n    matchTag(inputText);\n    setSearchContent(inputText);\n  }, [matchTag]);\n\n  /**\n   * @param {string} repoTagID\n   * @param {number | null} file_tag_id\n   */\n  var handleClickTag = useCallback( /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(repoTagID, file_tag_id) {\n      var errorMessage;\n      return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n        while (1) switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.prev = 0;\n            if (!(file_tag_id !== null)) {\n              _context4.next = 6;\n              break;\n            }\n            _context4.next = 4;\n            return context.removeFileTag(file_tag_id);\n          case 4:\n            _context4.next = 8;\n            break;\n          case 6:\n            _context4.next = 8;\n            return context.addFileTag(repoTagID);\n          case 8:\n            getTagList();\n            updateTagView();\n            _context4.next = 16;\n            break;\n          case 12:\n            _context4.prev = 12;\n            _context4.t0 = _context4[\"catch\"](0);\n            errorMessage = getErrorMsg(_context4.t0);\n            toaster.danger(t(errorMessage));\n          case 16:\n          case \"end\":\n            return _context4.stop();\n        }\n      }, _callee4, null, [[0, 12]]);\n    }));\n    return function (_x, _x2) {\n      return _ref6.apply(this, arguments);\n    };\n  }(), [getTagList, updateTagView, t]);\n  return /*#__PURE__*/React.createElement(UncontrolledPopover, {\n    target: \"tag-operation-icon-container\",\n    placement: \"bottom\",\n    popperClassName: \"sdoc-menu-popover sdoc-dropdown-menu sdoc-tag-popover\",\n    trigger: \"legacy\",\n    hideArrow: true,\n    fade: false,\n    security: \"fixed\"\n  }, /*#__PURE__*/React.createElement(PopoverBody, {\n    className: \"sdoc-popover-container\"\n  }, /*#__PURE__*/React.createElement(Input, {\n    value: searchContent,\n    onChange: handleInputChange,\n    placeholder: t('Find_an_option'),\n    maxLength: 100,\n    className: \"sdoc-tag-search-input\",\n    bsSize: \"sm\",\n    autoFocus: true\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-tag-list-container\"\n  }, tagList.length ? tagList.map(function (item) {\n    return /*#__PURE__*/React.createElement(TagItem, Object.assign({\n      key: item.repo_tag_id,\n      handleClickTag: handleClickTag\n    }, item));\n  }) : /*#__PURE__*/React.createElement(\"span\", null, t('No_options_available')))), isShowCreateTag && /*#__PURE__*/React.createElement(PopoverHeader, {\n    className: \"sdoc-create-tag\",\n    onClick: handleCreateTag\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"sdocfont sdoc-append add-icon\"\n  }), \"\".concat(t('Add_option'), \" '\").concat(searchContent, \"'\")));\n};\nexport default TagPopover;\nvar TagItem = function TagItem(_ref2) {\n  var repo_tag_id = _ref2.repo_tag_id,\n    tag_color = _ref2.tag_color,\n    tag_name = _ref2.tag_name,\n    handleClickTag = _ref2.handleClickTag,\n    file_tag_id = _ref2.file_tag_id;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-tag-item\",\n    onClick: function onClick() {\n      return handleClickTag(repo_tag_id, file_tag_id);\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-tag-badge-container\"\n  }, /*#__PURE__*/React.createElement(Badge, {\n    style: {\n      backgroundColor: tag_color\n    },\n    className: \"sdoc-tag-badge\",\n    pill: true\n  }, tag_name)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-tag-added-mark\"\n  }, file_tag_id !== null && /*#__PURE__*/React.createElement(\"i\", {\n    className: \"sdocfont sdoc-check-mark\"\n  })));\n};","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","useRef","useState","Badge","Input","PopoverBody","PopoverHeader","UncontrolledPopover","useTranslation","context","getErrorMsg","toaster","generateTagColor","removeForwardSpace","EventBus","INTERNAL_EVENT","TagPopover","_useState","_useState2","_slicedToArray","searchContent","setSearchContent","_useState3","_useState4","tagList","setTagList","tagListRef","_useTranslation","t","updateTagView","eventBus","getInstance","dispatch","UPDATE_TAG_VIEW","isShowCreateTag","isInputTag","length","isMathExistTag","some","item","tag_name","getTagList","getFileTagList","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$context$getFil","file_tags","errorMessage","wrap","_callee$","_context","prev","next","sent","data","abrupt","t0","danger","stop","_callee2","_yield$context$getRep","repo_tags","fileTagList","_callee2$","_context2","getRepoTagList","forEach","_matchFileTag$file_ta","matchFileTag","find","fileTag","repo_tag_id","file_tag_id","current","handleCreateTag","_callee3","tagColor","_yield$context$create","repo_tag","_callee3$","_context3","createRepoTag","trim","addFileTag","matchTag","matchText","filterTagList","filter","_ref","indexOf","handleInputChange","e","_e$target","_e$target$value","text","target","value","inputText","slice","handleClickTag","_ref6","_callee4","repoTagID","_callee4$","_context4","removeFileTag","_x","_x2","apply","arguments","createElement","placement","popperClassName","trigger","hideArrow","fade","security","className","onChange","placeholder","maxLength","bsSize","autoFocus","map","TagItem","Object","assign","key","onClick","concat","_ref2","tag_color","style","backgroundColor","pill"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/components/doc-operations/tag-operation/tag-popover/index.js"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { Badge, Input, PopoverBody, PopoverHeader, UncontrolledPopover } from 'reactstrap';\nimport { useTranslation } from 'react-i18next';\nimport context from '../../../../context';\nimport { getErrorMsg } from '../../../../utils';\nimport toaster from '../../../toast';\nimport { generateTagColor, removeForwardSpace } from '../utils';\nimport { EventBus } from '../../../../basic-sdk';\nimport { INTERNAL_EVENT } from '../../../../basic-sdk/constants';\nimport './index.css';\nconst TagPopover = () => {\n  const [searchContent, setSearchContent] = useState('');\n  const [tagList, setTagList] = useState([]);\n  const tagListRef = useRef([]);\n  const {\n    t\n  } = useTranslation();\n\n  // Update tag view when tag is added or removed\n  const updateTagView = useCallback(() => {\n    const eventBus = EventBus.getInstance();\n    eventBus.dispatch(INTERNAL_EVENT.UPDATE_TAG_VIEW);\n  }, []);\n  const isShowCreateTag = useMemo(() => {\n    const isInputTag = !!searchContent.length;\n    const isMathExistTag = tagList.some(item => item.tag_name === searchContent);\n    return isInputTag && !isMathExistTag;\n  }, [searchContent, tagList]);\n  useEffect(() => {\n    getTagList();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const getFileTagList = useCallback(async () => {\n    try {\n      const {\n        data: {\n          file_tags\n        }\n      } = await context.getFileTagList();\n      return file_tags;\n    } catch (error) {\n      const errorMessage = getErrorMsg(error);\n      toaster.danger(t(errorMessage));\n    }\n  }, [t]);\n\n  // Get tag list and set fil_tag_id property when tag is attached on file\n  const getTagList = useCallback(async () => {\n    try {\n      const {\n        data: {\n          repo_tags\n        }\n      } = await context.getRepoTagList();\n      const fileTagList = await getFileTagList();\n      // Add file_tag_id property to tag,to mark which tag is added on file\n      repo_tags.forEach(item => {\n        var _matchFileTag$file_ta;\n        const matchFileTag = fileTagList.find(fileTag => fileTag.repo_tag_id === item.repo_tag_id);\n        item.file_tag_id = (_matchFileTag$file_ta = matchFileTag === null || matchFileTag === void 0 ? void 0 : matchFileTag.file_tag_id) !== null && _matchFileTag$file_ta !== void 0 ? _matchFileTag$file_ta : null;\n      });\n      setTagList(repo_tags);\n      tagListRef.current = repo_tags;\n    } catch (error) {\n      const errorMessage = getErrorMsg(error);\n      toaster.danger(t(errorMessage));\n    }\n  }, [getFileTagList, t]);\n\n  // Create tag and add tag on file,then update tag list and clean search content\n  // Note: Here we remove the spaces at the beginning and end of the string\n  const handleCreateTag = useCallback(async () => {\n    try {\n      const tagColor = generateTagColor();\n      const {\n        data: {\n          repo_tag\n        }\n      } = await context.createRepoTag(searchContent.trim(), tagColor);\n      await context.addFileTag(repo_tag.repo_tag_id);\n      getTagList();\n      setSearchContent('');\n      updateTagView();\n    } catch (error) {\n      const errorMessage = getErrorMsg(error);\n      toaster.danger(t(errorMessage));\n    }\n  }, [getTagList, searchContent, updateTagView, t]);\n  const matchTag = useCallback(matchText => {\n    if (matchText.length) {\n      const filterTagList = tagListRef.current.filter(_ref => {\n        let {\n          tag_name\n        } = _ref;\n        return tag_name.indexOf(matchText) !== -1;\n      });\n      setTagList(filterTagList);\n    } else {\n      setTagList(tagListRef.current);\n    }\n  }, []);\n\n  // Handle input change and match tag showing in popover\n  // Note: The input value is not allowed to start with a space,but it can contain spaces in the middle or at the end\n  const handleInputChange = useCallback(e => {\n    const text = e.target.value ??= '';\n    const inputText = removeForwardSpace(text).slice(0, 100);\n    matchTag(inputText);\n    setSearchContent(inputText);\n  }, [matchTag]);\n\n  /**\n   * @param {string} repoTagID\n   * @param {number | null} file_tag_id\n   */\n  const handleClickTag = useCallback(async (repoTagID, file_tag_id) => {\n    try {\n      file_tag_id !== null ? await context.removeFileTag(file_tag_id) : await context.addFileTag(repoTagID);\n      getTagList();\n      updateTagView();\n    } catch (error) {\n      const errorMessage = getErrorMsg(error);\n      toaster.danger(t(errorMessage));\n    }\n  }, [getTagList, updateTagView, t]);\n  return /*#__PURE__*/React.createElement(UncontrolledPopover, {\n    target: \"tag-operation-icon-container\",\n    placement: \"bottom\",\n    popperClassName: \"sdoc-menu-popover sdoc-dropdown-menu sdoc-tag-popover\",\n    trigger: \"legacy\",\n    hideArrow: true,\n    fade: false,\n    security: \"fixed\"\n  }, /*#__PURE__*/React.createElement(PopoverBody, {\n    className: \"sdoc-popover-container\"\n  }, /*#__PURE__*/React.createElement(Input, {\n    value: searchContent,\n    onChange: handleInputChange,\n    placeholder: t('Find_an_option'),\n    maxLength: 100,\n    className: \"sdoc-tag-search-input\",\n    bsSize: \"sm\",\n    autoFocus: true\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-tag-list-container\"\n  }, tagList.length ? tagList.map(item => /*#__PURE__*/React.createElement(TagItem, Object.assign({\n    key: item.repo_tag_id,\n    handleClickTag: handleClickTag\n  }, item))) : /*#__PURE__*/React.createElement(\"span\", null, t('No_options_available')))), isShowCreateTag && /*#__PURE__*/React.createElement(PopoverHeader, {\n    className: \"sdoc-create-tag\",\n    onClick: handleCreateTag\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"sdocfont sdoc-append add-icon\"\n  }), \"\".concat(t('Add_option'), \" '\").concat(searchContent, \"'\")));\n};\nexport default TagPopover;\nconst TagItem = _ref2 => {\n  let {\n    repo_tag_id,\n    tag_color,\n    tag_name,\n    handleClickTag,\n    file_tag_id\n  } = _ref2;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-tag-item\",\n    onClick: () => handleClickTag(repo_tag_id, file_tag_id)\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-tag-badge-container\"\n  }, /*#__PURE__*/React.createElement(Badge, {\n    style: {\n      backgroundColor: tag_color\n    },\n    className: \"sdoc-tag-badge\",\n    pill: true\n  }, tag_name)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-tag-added-mark\"\n  }, file_tag_id !== null && /*#__PURE__*/React.createElement(\"i\", {\n    className: \"sdocfont sdoc-check-mark\"\n  })));\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}