{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{Button,Modal,ModalHeader,ModalBody,ModalFooter,Input,Form,FormGroup,Label}from'reactstrap';import{gettext}from'../../../utils/constants';import{seafileAPI}from'../../../utils/seafile-api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddDepartDialog=/*#__PURE__*/function(_React$Component){_inherits(AddDepartDialog,_React$Component);var _super=_createSuper(AddDepartDialog);function AddDepartDialog(props){var _this;_classCallCheck(this,AddDepartDialog);_this=_super.call(this,props);_this.handleSubmit=function(){var isValid=_this.validateName();if(isValid){var parentGroup=-1;if(_this.props.parentGroupID){parentGroup=_this.props.parentGroupID;}seafileAPI.sysAdminAddNewDepartment(parentGroup,_this.state.departName.trim()).then(function(res){_this.props.toggle();_this.props.onAddNewDepartment(res.data);}).catch(function(error){var errorMsg=gettext(error.response.data.error_msg);_this.setState({errMessage:errorMsg});});}};_this.validateName=function(){var errMessage='';var name=_this.state.departName.trim();if(!name.length){errMessage=gettext('Name is required');_this.setState({errMessage:errMessage});return false;}return true;};_this.handleChange=function(e){_this.setState({departName:e.target.value});};_this.handleKeyDown=function(e){if(e.key==='Enter'){_this.handleSubmit();e.preventDefault();}};_this.state={departName:'',errMessage:''};return _this;}_createClass(AddDepartDialog,[{key:\"render\",value:function render(){var header=this.props.parentGroupID?gettext('New Sub-department'):gettext('New Department');return/*#__PURE__*/_jsxs(Modal,{isOpen:true,toggle:this.props.toggle,autoFocus:false,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:this.props.toggle,children:header}),/*#__PURE__*/_jsxs(ModalBody,{children:[/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"departName\",children:gettext('Name')}),/*#__PURE__*/_jsx(Input,{id:\"departName\",onKeyDown:this.handleKeyDown,value:this.state.departName,onChange:this.handleChange,autoFocus:true})]})}),this.state.errMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:this.state.errMessage})]}),/*#__PURE__*/_jsxs(ModalFooter,{children:[/*#__PURE__*/_jsx(Button,{color:\"secondary\",onClick:this.props.toggle,children:gettext('Cancel')}),/*#__PURE__*/_jsx(Button,{color:\"primary\",onClick:this.handleSubmit,children:gettext('Submit')})]})]});}}]);return AddDepartDialog;}(React.Component);export default AddDepartDialog;","map":{"version":3,"names":["React","Button","Modal","ModalHeader","ModalBody","ModalFooter","Input","Form","FormGroup","Label","gettext","seafileAPI","jsx","_jsx","jsxs","_jsxs","AddDepartDialog","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","handleSubmit","isValid","validateName","parentGroup","parentGroupID","sysAdminAddNewDepartment","state","departName","trim","then","res","toggle","onAddNewDepartment","data","catch","error","errorMsg","response","error_msg","setState","errMessage","name","length","handleChange","e","target","value","handleKeyDown","key","preventDefault","_createClass","render","header","isOpen","autoFocus","children","for","id","onKeyDown","onChange","className","color","onClick","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-add-department-dialog.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Form, FormGroup, Label } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\n\nconst propTypes = {\n  groupID: PropTypes.string,\n  parentGroupID: PropTypes.string,\n  toggle: PropTypes.func.isRequired,\n  onAddNewDepartment: PropTypes.func.isRequired\n};\n\nclass AddDepartDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      departName: '',\n      errMessage: '',\n    };\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateName();\n    if (isValid) {\n      let parentGroup = -1;\n      if (this.props.parentGroupID) {\n        parentGroup = this.props.parentGroupID;\n      }\n      seafileAPI.sysAdminAddNewDepartment(parentGroup, this.state.departName.trim()).then((res) => {\n        this.props.toggle();\n        this.props.onAddNewDepartment(res.data);\n      }).catch(error => {\n        let errorMsg = gettext(error.response.data.error_msg);\n        this.setState({ errMessage: errorMsg });\n      });\n    }\n  };\n\n  validateName = () => {\n    let errMessage = '';\n    const name = this.state.departName.trim();\n    if (!name.length) {\n      errMessage = gettext('Name is required');\n      this.setState({ errMessage: errMessage });\n      return false;\n    }\n    return true;\n  };\n\n  handleChange = (e) => {\n    this.setState({\n      departName: e.target.value,\n    });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  };\n\n  render() {\n    let header = this.props.parentGroupID ? gettext('New Sub-department') : gettext('New Department');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.props.toggle}>{header}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"departName\">{gettext('Name')}</Label>\n              <Input\n                id=\"departName\"\n                onKeyDown={this.handleKeyDown}\n                value={this.state.departName}\n                onChange={this.handleChange}\n                autoFocus={true}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAddDepartDialog.propTypes = propTypes;\n\nexport default AddDepartDialog;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}