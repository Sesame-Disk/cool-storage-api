{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{gettext}from'../../utils/constants';import{seafileAPI}from'../../utils/seafile-api';import{Utils}from'../../utils/utils';import{Modal,ModalHeader,ModalBody,ModalFooter,Input,Button}from'reactstrap';import toaster from'../toast';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RenameGroupDialog=/*#__PURE__*/function(_React$Component){_inherits(RenameGroupDialog,_React$Component);var _super=_createSuper(RenameGroupDialog);function RenameGroupDialog(props){var _this;_classCallCheck(this,RenameGroupDialog);_this=_super.call(this,props);_this.handleGroupNameChange=function(event){if(!event.target.value.trim()){_this.setState({isSubmitBtnActive:false});}else{_this.setState({isSubmitBtnActive:true});}var name=event.target.value;_this.setState({newGroupName:name});};_this.renameGroup=function(){var name=_this.state.newGroupName.trim();if(name){var that=_assertThisInitialized(_this);seafileAPI.renameGroup(_this.props.groupID,name).then(function(res){that.props.loadGroup(_this.props.groupID);that.props.onGroupChanged(res.data.id);}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});}_this.setState({newGroupName:''});_this.props.toggleRenameGroupDialog();};_this.handleKeyDown=function(event){if(event.keyCode===13){_this.renameGroup();}};_this.state={newGroupName:_this.props.currentGroupName,isSubmitBtnActive:false};return _this;}_createClass(RenameGroupDialog,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(Modal,{isOpen:this.props.showRenameGroupDialog,toggle:this.props.toggleRenameGroupDialog,children:[/*#__PURE__*/_jsx(ModalHeader,{children:gettext('Rename Group')}),/*#__PURE__*/_jsxs(ModalBody,{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"newGroupName\",children:gettext('Rename group to')}),/*#__PURE__*/_jsx(Input,{type:\"text\",id:\"newGroupName\",value:this.state.newGroupName,onChange:this.handleGroupNameChange,onKeyDown:this.handleKeyDown})]}),/*#__PURE__*/_jsxs(ModalFooter,{children:[/*#__PURE__*/_jsx(Button,{color:\"secondary\",onClick:this.props.toggleRenameGroupDialog,children:gettext('Cancel')}),/*#__PURE__*/_jsx(Button,{color:\"primary\",onClick:this.renameGroup,disabled:!this.state.isSubmitBtnActive,children:gettext('Submit')})]})]});}}]);return RenameGroupDialog;}(React.Component);export default RenameGroupDialog;","map":{"version":3,"names":["React","gettext","seafileAPI","Utils","Modal","ModalHeader","ModalBody","ModalFooter","Input","Button","toaster","jsx","_jsx","jsxs","_jsxs","RenameGroupDialog","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","handleGroupNameChange","event","target","value","trim","setState","isSubmitBtnActive","name","newGroupName","renameGroup","state","that","_assertThisInitialized","groupID","then","res","loadGroup","onGroupChanged","data","id","catch","error","errMessage","getErrorMsg","danger","toggleRenameGroupDialog","handleKeyDown","keyCode","currentGroupName","_createClass","key","render","isOpen","showRenameGroupDialog","toggle","children","htmlFor","type","onChange","onKeyDown","color","onClick","disabled","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/rename-group-dialog.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport toaster from '../toast';\n\nclass RenameGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newGroupName: this.props.currentGroupName,\n      isSubmitBtnActive: false,\n    };\n  }\n\n  handleGroupNameChange = (event) => {\n    if (!event.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    let name = event.target.value;\n    this.setState({\n      newGroupName: name\n    });\n  };\n\n  renameGroup = () => {\n    let name = this.state.newGroupName.trim();\n    if (name) {\n      let that = this;\n      seafileAPI.renameGroup(this.props.groupID, name).then((res)=> {\n        that.props.loadGroup(this.props.groupID);\n        that.props.onGroupChanged(res.data.id);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n    this.setState({\n      newGroupName: '',\n    });\n    this.props.toggleRenameGroupDialog();\n  };\n\n  handleKeyDown = (event) => {\n    if (event.keyCode === 13) {\n      this.renameGroup();\n    }\n  };\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showRenameGroupDialog} toggle={this.props.toggleRenameGroupDialog}>\n        <ModalHeader>{gettext('Rename Group')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"newGroupName\">{gettext('Rename group to')}</label>\n          <Input type=\"text\" id=\"newGroupName\" value={this.state.newGroupName}\n            onChange={this.handleGroupNameChange} onKeyDown={this.handleKeyDown}/>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleRenameGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.renameGroup} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst RenameGroupDialogPropTypes = {\n  showRenameGroupDialog: PropTypes.bool.isRequired,\n  toggleRenameGroupDialog: PropTypes.func.isRequired,\n  loadGroup: PropTypes.func.isRequired,\n  groupID: PropTypes.string,\n  onGroupChanged: PropTypes.func.isRequired,\n  currentGroupName: PropTypes.string.isRequired,\n};\n\nRenameGroupDialog.propTypes = RenameGroupDialogPropTypes;\n\nexport default RenameGroupDialog;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}