{"ast":null,"code":"import React, { useCallback, useEffect, useRef } from 'react';\nimport { eventStopPropagation } from '../../../../utils/mouse-event';\nvar CommentParticipantItem = function CommentParticipantItem(_ref) {\n  var participant = _ref.participant,\n    setScrollTop = _ref.setScrollTop,\n    onSelectParticipant = _ref.onSelectParticipant,\n    participantIndex = _ref.participantIndex,\n    activeParticipantIndex = _ref.activeParticipantIndex;\n  var ref = useRef(null);\n  var oldValueRef = useRef({});\n  useEffect(function () {\n    oldValueRef.current.participantIndex = participantIndex;\n    oldValueRef.current.activeParticipantIndex = activeParticipantIndex;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useEffect(function () {\n    if (activeParticipantIndex === participantIndex && activeParticipantIndex !== oldValueRef.current.activeParticipantIndex) {\n      var offsetHeight = ref.current.offsetHeight;\n      var offsetTop = ref.current.offsetTop;\n      if (activeParticipantIndex > oldValueRef.current.activeParticipantIndex) {\n        setScrollTop(offsetTop, offsetHeight, 'down');\n      } else {\n        setScrollTop(offsetTop, offsetHeight, 'up');\n      }\n    }\n    oldValueRef.current.activeParticipantIndex = activeParticipantIndex;\n  }, [setScrollTop, participantIndex, activeParticipantIndex, ref, oldValueRef]);\n  var selectParticipant = useCallback(function (event) {\n    eventStopPropagation(event);\n    onSelectParticipant(participant);\n  }, [participant, onSelectParticipant]);\n  var active = participantIndex === activeParticipantIndex;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-participant-item \".concat(active ? 'active' : ''),\n    ref: ref,\n    onClick: selectParticipant\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-participant-container\"\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"comment-participant-avatar\",\n    alt: participant.name,\n    src: participant.avatar_url\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-participant-name\"\n  }, participant.name)));\n};\nexport default CommentParticipantItem;","map":{"version":3,"names":["React","useCallback","useEffect","useRef","eventStopPropagation","CommentParticipantItem","_ref","participant","setScrollTop","onSelectParticipant","participantIndex","activeParticipantIndex","ref","oldValueRef","current","offsetHeight","offsetTop","selectParticipant","event","active","createElement","className","concat","onClick","alt","name","src","avatar_url"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/extension/plugins/mention/render-elem/comment-participant-item.js"],"sourcesContent":["import React, { useCallback, useEffect, useRef } from 'react';\nimport { eventStopPropagation } from '../../../../utils/mouse-event';\nconst CommentParticipantItem = _ref => {\n  let {\n    participant,\n    setScrollTop,\n    onSelectParticipant,\n    participantIndex,\n    activeParticipantIndex\n  } = _ref;\n  const ref = useRef(null);\n  const oldValueRef = useRef({});\n  useEffect(() => {\n    oldValueRef.current.participantIndex = participantIndex;\n    oldValueRef.current.activeParticipantIndex = activeParticipantIndex;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useEffect(() => {\n    if (activeParticipantIndex === participantIndex && activeParticipantIndex !== oldValueRef.current.activeParticipantIndex) {\n      const offsetHeight = ref.current.offsetHeight;\n      const offsetTop = ref.current.offsetTop;\n      if (activeParticipantIndex > oldValueRef.current.activeParticipantIndex) {\n        setScrollTop(offsetTop, offsetHeight, 'down');\n      } else {\n        setScrollTop(offsetTop, offsetHeight, 'up');\n      }\n    }\n    oldValueRef.current.activeParticipantIndex = activeParticipantIndex;\n  }, [setScrollTop, participantIndex, activeParticipantIndex, ref, oldValueRef]);\n  const selectParticipant = useCallback(event => {\n    eventStopPropagation(event);\n    onSelectParticipant(participant);\n  }, [participant, onSelectParticipant]);\n  const active = participantIndex === activeParticipantIndex;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-participant-item \".concat(active ? 'active' : ''),\n    ref: ref,\n    onClick: selectParticipant\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-participant-container\"\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"comment-participant-avatar\",\n    alt: participant.name,\n    src: participant.avatar_url\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-participant-name\"\n  }, participant.name)));\n};\nexport default CommentParticipantItem;"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,WAAW,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC7D,SAASC,oBAAoB,QAAQ,+BAA+B;AACpE,IAAMC,sBAAsB,GAAG,SAAzBA,sBAAsBA,CAAGC,IAAI,EAAI;EACrC,IACEC,WAAW,GAKTD,IAAI,CALNC,WAAW;IACXC,YAAY,GAIVF,IAAI,CAJNE,YAAY;IACZC,mBAAmB,GAGjBH,IAAI,CAHNG,mBAAmB;IACnBC,gBAAgB,GAEdJ,IAAI,CAFNI,gBAAgB;IAChBC,sBAAsB,GACpBL,IAAI,CADNK,sBAAsB;EAExB,IAAMC,GAAG,GAAGT,MAAM,CAAC,IAAI,CAAC;EACxB,IAAMU,WAAW,GAAGV,MAAM,CAAC,CAAC,CAAC,CAAC;EAC9BD,SAAS,CAAC,YAAM;IACdW,WAAW,CAACC,OAAO,CAACJ,gBAAgB,GAAGA,gBAAgB;IACvDG,WAAW,CAACC,OAAO,CAACH,sBAAsB,GAAGA,sBAAsB;IACnE;EACF,CAAC,EAAE,EAAE,CAAC;EACNT,SAAS,CAAC,YAAM;IACd,IAAIS,sBAAsB,KAAKD,gBAAgB,IAAIC,sBAAsB,KAAKE,WAAW,CAACC,OAAO,CAACH,sBAAsB,EAAE;MACxH,IAAMI,YAAY,GAAGH,GAAG,CAACE,OAAO,CAACC,YAAY;MAC7C,IAAMC,SAAS,GAAGJ,GAAG,CAACE,OAAO,CAACE,SAAS;MACvC,IAAIL,sBAAsB,GAAGE,WAAW,CAACC,OAAO,CAACH,sBAAsB,EAAE;QACvEH,YAAY,CAACQ,SAAS,EAAED,YAAY,EAAE,MAAM,CAAC;MAC/C,CAAC,MAAM;QACLP,YAAY,CAACQ,SAAS,EAAED,YAAY,EAAE,IAAI,CAAC;MAC7C;IACF;IACAF,WAAW,CAACC,OAAO,CAACH,sBAAsB,GAAGA,sBAAsB;EACrE,CAAC,EAAE,CAACH,YAAY,EAAEE,gBAAgB,EAAEC,sBAAsB,EAAEC,GAAG,EAAEC,WAAW,CAAC,CAAC;EAC9E,IAAMI,iBAAiB,GAAGhB,WAAW,CAAC,UAAAiB,KAAK,EAAI;IAC7Cd,oBAAoB,CAACc,KAAK,CAAC;IAC3BT,mBAAmB,CAACF,WAAW,CAAC;EAClC,CAAC,EAAE,CAACA,WAAW,EAAEE,mBAAmB,CAAC,CAAC;EACtC,IAAMU,MAAM,GAAGT,gBAAgB,KAAKC,sBAAsB;EAC1D,OAAO,aAAaX,KAAK,CAACoB,aAAa,CAAC,KAAK,EAAE;IAC7CC,SAAS,EAAE,2BAA2B,CAACC,MAAM,CAACH,MAAM,GAAG,QAAQ,GAAG,EAAE,CAAC;IACrEP,GAAG,EAAEA,GAAG;IACRW,OAAO,EAAEN;EACX,CAAC,EAAE,aAAajB,KAAK,CAACoB,aAAa,CAAC,KAAK,EAAE;IACzCC,SAAS,EAAE;EACb,CAAC,EAAE,aAAarB,KAAK,CAACoB,aAAa,CAAC,KAAK,EAAE;IACzCC,SAAS,EAAE,4BAA4B;IACvCG,GAAG,EAAEjB,WAAW,CAACkB,IAAI;IACrBC,GAAG,EAAEnB,WAAW,CAACoB;EACnB,CAAC,CAAC,EAAE,aAAa3B,KAAK,CAACoB,aAAa,CAAC,KAAK,EAAE;IAC1CC,SAAS,EAAE;EACb,CAAC,EAAEd,WAAW,CAACkB,IAAI,CAAC,CAAC,CAAC;AACxB,CAAC;AACD,eAAepB,sBAAsB"},"metadata":{},"sourceType":"module","externalDependencies":[]}