{"ast":null,"code":"import _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { Editor } from '@seafile/slate';\nimport { getNodeType } from '../../core';\nimport { CODE_BLOCK } from '../../constants/element-type';\nimport { TEXT_STYLE_MAP } from '../../constants/menus-config';\nexport var isMenuDisabled = function isMenuDisabled(editor, readonly) {\n  if (readonly) return true;\n  if (editor.selection == null) return true;\n  var _Editor$nodes = Editor.nodes(editor, {\n      match: function match(n) {\n        var type = getNodeType(n);\n        if (type === CODE_BLOCK) return true; // Code block\n        if (Editor.isVoid(editor, n)) return true; // void node\n\n        return false;\n      },\n      universal: true\n    }),\n    _Editor$nodes2 = _slicedToArray(_Editor$nodes, 1),\n    match = _Editor$nodes2[0];\n\n  // If yes, it is disabled\n  if (match) return true;\n  return false;\n};\nexport var addMark = function addMark(editor, type) {\n  if (type === TEXT_STYLE_MAP.SUPERSCRIPT) {\n    removeMark(editor, TEXT_STYLE_MAP.SUBSCRIPT);\n  } else if (type === TEXT_STYLE_MAP.SUBSCRIPT) {\n    removeMark(editor, TEXT_STYLE_MAP.SUPERSCRIPT);\n  }\n  Editor.addMark(editor, type, true);\n};\nexport var removeMark = function removeMark(editor, type) {\n  Editor.removeMark(editor, type);\n};\n\n// Whether mark is included\nexport var getValue = function getValue(editor, mark) {\n  var curMarks = Editor.marks(editor);\n\n  // If curMarks exists, you need to set this parameter manually. curMarks prevails\n  if (curMarks) {\n    return curMarks[mark];\n  } else {\n    var _Editor$nodes3 = Editor.nodes(editor, {\n        match: function match(n) {\n          return n[mark] === true;\n        }\n      }),\n      _Editor$nodes4 = _slicedToArray(_Editor$nodes3, 1),\n      match = _Editor$nodes4[0];\n    return !!match;\n  }\n};","map":{"version":3,"names":["Editor","getNodeType","CODE_BLOCK","TEXT_STYLE_MAP","isMenuDisabled","editor","readonly","selection","_Editor$nodes","nodes","match","n","type","isVoid","universal","_Editor$nodes2","_slicedToArray","addMark","SUPERSCRIPT","removeMark","SUBSCRIPT","getValue","mark","curMarks","marks","_Editor$nodes3","_Editor$nodes4"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/extension/plugins/text-style/helpers.js"],"sourcesContent":["import { Editor } from '@seafile/slate';\nimport { getNodeType } from '../../core';\nimport { CODE_BLOCK } from '../../constants/element-type';\nimport { TEXT_STYLE_MAP } from '../../constants/menus-config';\nexport const isMenuDisabled = (editor, readonly) => {\n  if (readonly) return true;\n  if (editor.selection == null) return true;\n  const [match] = Editor.nodes(editor, {\n    match: n => {\n      const type = getNodeType(n);\n      if (type === CODE_BLOCK) return true; // Code block\n      if (Editor.isVoid(editor, n)) return true; // void node\n\n      return false;\n    },\n    universal: true\n  });\n\n  // If yes, it is disabled\n  if (match) return true;\n  return false;\n};\nexport const addMark = (editor, type) => {\n  if (type === TEXT_STYLE_MAP.SUPERSCRIPT) {\n    removeMark(editor, TEXT_STYLE_MAP.SUBSCRIPT);\n  } else if (type === TEXT_STYLE_MAP.SUBSCRIPT) {\n    removeMark(editor, TEXT_STYLE_MAP.SUPERSCRIPT);\n  }\n  Editor.addMark(editor, type, true);\n};\nexport const removeMark = (editor, type) => {\n  Editor.removeMark(editor, type);\n};\n\n// Whether mark is included\nexport const getValue = (editor, mark) => {\n  const curMarks = Editor.marks(editor);\n\n  // If curMarks exists, you need to set this parameter manually. curMarks prevails\n  if (curMarks) {\n    return curMarks[mark];\n  } else {\n    const [match] = Editor.nodes(editor, {\n      match: n => n[mark] === true\n    });\n    return !!match;\n  }\n};"],"mappings":";AAAA,SAASA,MAAM,QAAQ,gBAAgB;AACvC,SAASC,WAAW,QAAQ,YAAY;AACxC,SAASC,UAAU,QAAQ,8BAA8B;AACzD,SAASC,cAAc,QAAQ,8BAA8B;AAC7D,OAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAcA,CAAIC,MAAM,EAAEC,QAAQ,EAAK;EAClD,IAAIA,QAAQ,EAAE,OAAO,IAAI;EACzB,IAAID,MAAM,CAACE,SAAS,IAAI,IAAI,EAAE,OAAO,IAAI;EACzC,IAAAC,aAAA,GAAgBR,MAAM,CAACS,KAAK,CAACJ,MAAM,EAAE;MACnCK,KAAK,EAAE,SAAAA,MAAAC,CAAC,EAAI;QACV,IAAMC,IAAI,GAAGX,WAAW,CAACU,CAAC,CAAC;QAC3B,IAAIC,IAAI,KAAKV,UAAU,EAAE,OAAO,IAAI,CAAC,CAAC;QACtC,IAAIF,MAAM,CAACa,MAAM,CAACR,MAAM,EAAEM,CAAC,CAAC,EAAE,OAAO,IAAI,CAAC,CAAC;;QAE3C,OAAO,KAAK;MACd,CAAC;MACDG,SAAS,EAAE;IACb,CAAC,CAAC;IAAAC,cAAA,GAAAC,cAAA,CAAAR,aAAA;IATKE,KAAK,GAAAK,cAAA;;EAWZ;EACA,IAAIL,KAAK,EAAE,OAAO,IAAI;EACtB,OAAO,KAAK;AACd,CAAC;AACD,OAAO,IAAMO,OAAO,GAAG,SAAVA,OAAOA,CAAIZ,MAAM,EAAEO,IAAI,EAAK;EACvC,IAAIA,IAAI,KAAKT,cAAc,CAACe,WAAW,EAAE;IACvCC,UAAU,CAACd,MAAM,EAAEF,cAAc,CAACiB,SAAS,CAAC;EAC9C,CAAC,MAAM,IAAIR,IAAI,KAAKT,cAAc,CAACiB,SAAS,EAAE;IAC5CD,UAAU,CAACd,MAAM,EAAEF,cAAc,CAACe,WAAW,CAAC;EAChD;EACAlB,MAAM,CAACiB,OAAO,CAACZ,MAAM,EAAEO,IAAI,EAAE,IAAI,CAAC;AACpC,CAAC;AACD,OAAO,IAAMO,UAAU,GAAG,SAAbA,UAAUA,CAAId,MAAM,EAAEO,IAAI,EAAK;EAC1CZ,MAAM,CAACmB,UAAU,CAACd,MAAM,EAAEO,IAAI,CAAC;AACjC,CAAC;;AAED;AACA,OAAO,IAAMS,QAAQ,GAAG,SAAXA,QAAQA,CAAIhB,MAAM,EAAEiB,IAAI,EAAK;EACxC,IAAMC,QAAQ,GAAGvB,MAAM,CAACwB,KAAK,CAACnB,MAAM,CAAC;;EAErC;EACA,IAAIkB,QAAQ,EAAE;IACZ,OAAOA,QAAQ,CAACD,IAAI,CAAC;EACvB,CAAC,MAAM;IACL,IAAAG,cAAA,GAAgBzB,MAAM,CAACS,KAAK,CAACJ,MAAM,EAAE;QACnCK,KAAK,EAAE,SAAAA,MAAAC,CAAC;UAAA,OAAIA,CAAC,CAACW,IAAI,CAAC,KAAK,IAAI;QAAA;MAC9B,CAAC,CAAC;MAAAI,cAAA,GAAAV,cAAA,CAAAS,cAAA;MAFKf,KAAK,GAAAgB,cAAA;IAGZ,OAAO,CAAC,CAAChB,KAAK;EAChB;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}