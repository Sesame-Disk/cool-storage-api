{"ast":null,"code":"/**\n * @typedef {import('../types.js').State} State\n * @typedef {import('../types.js').Parent} Parent\n * @typedef {import('../types.js').Element} Element\n * @typedef {import('../types.js').Properties} Properties\n * @typedef {import('../types.js').PropertyValue} PropertyValue\n */\n\nimport { ccount } from 'ccount';\nimport { stringify as commas } from 'comma-separated-tokens';\nimport { svg, find } from 'property-information';\nimport { stringify as spaces } from 'space-separated-tokens';\nimport { stringifyEntities } from 'stringify-entities';\nimport { opening } from '../omission/opening.js';\nimport { closing } from '../omission/closing.js';\n\n/**\n * Maps of subsets.\n *\n * Each value is a matrix of tuples.\n * The value at `0` causes parse errors, the value at `1` is valid.\n * Of both, the value at `0` is unsafe, and the value at `1` is safe.\n *\n * @type {Record<'name' | 'unquoted' | 'single' | 'double', Array<[Array<string>, Array<string>]>>}\n */\nvar constants = {\n  // See: <https://html.spec.whatwg.org/#attribute-name-state>.\n  name: [['\\t\\n\\f\\r &/=>'.split(''), '\\t\\n\\f\\r \"&\\'/=>`'.split('')], ['\\0\\t\\n\\f\\r \"&\\'/<=>'.split(''), '\\0\\t\\n\\f\\r \"&\\'/<=>`'.split('')]],\n  // See: <https://html.spec.whatwg.org/#attribute-value-(unquoted)-state>.\n  unquoted: [['\\t\\n\\f\\r &>'.split(''), '\\0\\t\\n\\f\\r \"&\\'<=>`'.split('')], ['\\0\\t\\n\\f\\r \"&\\'<=>`'.split(''), '\\0\\t\\n\\f\\r \"&\\'<=>`'.split('')]],\n  // See: <https://html.spec.whatwg.org/#attribute-value-(single-quoted)-state>.\n  single: [[\"&'\".split(''), '\"&\\'`'.split('')], [\"\\0&'\".split(''), '\\0\"&\\'`'.split('')]],\n  // See: <https://html.spec.whatwg.org/#attribute-value-(double-quoted)-state>.\n  double: [['\"&'.split(''), '\"&\\'`'.split('')], ['\\0\"&'.split(''), '\\0\"&\\'`'.split('')]]\n};\n\n/**\n * Serialize an element node.\n *\n * @param {Element} node\n *   Node to handle.\n * @param {number | undefined} index\n *   Index of `node` in `parent.\n * @param {Parent | undefined} parent\n *   Parent of `node`.\n * @param {State} state\n *   Info passed around about the current state.\n * @returns {string}\n *   Serialized node.\n */\n// eslint-disable-next-line complexity\nexport function element(node, index, parent, state) {\n  var schema = state.schema;\n  var omit = schema.space === 'svg' ? false : state.settings.omitOptionalTags;\n  var selfClosing = schema.space === 'svg' ? state.settings.closeEmptyElements : state.settings.voids.includes(node.tagName.toLowerCase());\n  /** @type {Array<string>} */\n  var parts = [];\n  /** @type {string} */\n  var last;\n  if (schema.space === 'html' && node.tagName === 'svg') {\n    state.schema = svg;\n  }\n  var attrs = serializeAttributes(state, node.properties);\n  var content = state.all(schema.space === 'html' && node.tagName === 'template' ? node.content : node);\n  state.schema = schema;\n\n  // If the node is categorised as void, but it has children, remove the\n  // categorisation.\n  // This enables for example `menuitem`s, which are void in W3C HTML but not\n  // void in WHATWG HTML, to be stringified properly.\n  if (content) selfClosing = false;\n  if (attrs || !omit || !opening(node, index, parent)) {\n    parts.push('<', node.tagName, attrs ? ' ' + attrs : '');\n    if (selfClosing && (schema.space === 'svg' || state.settings.closeSelfClosing)) {\n      last = attrs.charAt(attrs.length - 1);\n      if (!state.settings.tightSelfClosing || last === '/' || last && last !== '\"' && last !== \"'\") {\n        parts.push(' ');\n      }\n      parts.push('/');\n    }\n    parts.push('>');\n  }\n  parts.push(content);\n  if (!selfClosing && (!omit || !closing(node, index, parent))) {\n    parts.push('</' + node.tagName + '>');\n  }\n  return parts.join('');\n}\n\n/**\n * @param {State} state\n * @param {Properties | null | undefined} props\n * @returns {string}\n */\nfunction serializeAttributes(state, props) {\n  /** @type {Array<string>} */\n  var values = [];\n  var index = -1;\n  /** @type {string} */\n  var key;\n  if (props) {\n    for (key in props) {\n      if (props[key] !== undefined && props[key] !== null) {\n        var value = serializeAttribute(state, key, props[key]);\n        if (value) values.push(value);\n      }\n    }\n  }\n  while (++index < values.length) {\n    var last = state.settings.tightAttributes ? values[index].charAt(values[index].length - 1) : null;\n\n    // In tight mode, don’t add a space after quoted attributes.\n    if (index !== values.length - 1 && last !== '\"' && last !== \"'\") {\n      values[index] += ' ';\n    }\n  }\n  return values.join('');\n}\n\n/**\n * @param {State} state\n * @param {string} key\n * @param {PropertyValue} value\n * @returns {string}\n */\n// eslint-disable-next-line complexity\nfunction serializeAttribute(state, key, value) {\n  var info = find(state.schema, key);\n  var x = state.settings.allowParseErrors && state.schema.space === 'html' ? 0 : 1;\n  var y = state.settings.allowDangerousCharacters ? 0 : 1;\n  var quote = state.quote;\n  /** @type {string | undefined} */\n  var result;\n  if (info.overloadedBoolean && (value === info.attribute || value === '')) {\n    value = true;\n  } else if (info.boolean || info.overloadedBoolean && typeof value !== 'string') {\n    value = Boolean(value);\n  }\n  if (value === undefined || value === null || value === false || typeof value === 'number' && Number.isNaN(value)) {\n    return '';\n  }\n  var name = stringifyEntities(info.attribute, Object.assign({}, state.settings.characterReferences, {\n    // Always encode without parse errors in non-HTML.\n    subset: constants.name[x][y]\n  }));\n\n  // No value.\n  // There is currently only one boolean property in SVG: `[download]` on\n  // `<a>`.\n  // This property does not seem to work in browsers (Firefox, Safari, Chrome),\n  // so I can’t test if dropping the value works.\n  // But I assume that it should:\n  //\n  // ```html\n  // <!doctype html>\n  // <svg viewBox=\"0 0 100 100\">\n  //   <a href=https://example.com download>\n  //     <circle cx=50 cy=40 r=35 />\n  //   </a>\n  // </svg>\n  // ```\n  //\n  // See: <https://github.com/wooorm/property-information/blob/main/lib/svg.js>\n  if (value === true) return name;\n\n  // `spaces` doesn’t accept a second argument, but it’s given here just to\n  // keep the code cleaner.\n  value = Array.isArray(value) ? (info.commaSeparated ? commas : spaces)(value, {\n    padLeft: !state.settings.tightCommaSeparatedLists\n  }) : String(value);\n  if (state.settings.collapseEmptyAttributes && !value) return name;\n\n  // Check unquoted value.\n  if (state.settings.preferUnquoted) {\n    result = stringifyEntities(value, Object.assign({}, state.settings.characterReferences, {\n      subset: constants.unquoted[x][y],\n      attribute: true\n    }));\n  }\n\n  // If we don’t want unquoted, or if `value` contains character references when\n  // unquoted…\n  if (result !== value) {\n    // If the alternative is less common than `quote`, switch.\n    if (state.settings.quoteSmart && ccount(value, quote) > ccount(value, state.alternative)) {\n      quote = state.alternative;\n    }\n    result = quote + stringifyEntities(value, Object.assign({}, state.settings.characterReferences, {\n      // Always encode without parse errors in non-HTML.\n      subset: (quote === \"'\" ? constants.single : constants.double)[x][y],\n      attribute: true\n    })) + quote;\n  }\n\n  // Don’t add a `=` for unquoted empties.\n  return name + (result ? '=' + result : result);\n}","map":{"version":3,"names":["ccount","stringify","commas","svg","find","spaces","stringifyEntities","opening","closing","constants","name","split","unquoted","single","double","element","node","index","parent","state","schema","omit","space","settings","omitOptionalTags","selfClosing","closeEmptyElements","voids","includes","tagName","toLowerCase","parts","last","attrs","serializeAttributes","properties","content","all","push","closeSelfClosing","charAt","length","tightSelfClosing","join","props","values","key","undefined","value","serializeAttribute","tightAttributes","info","x","allowParseErrors","y","allowDangerousCharacters","quote","result","overloadedBoolean","attribute","boolean","Boolean","Number","isNaN","Object","assign","characterReferences","subset","Array","isArray","commaSeparated","padLeft","tightCommaSeparatedLists","String","collapseEmptyAttributes","preferUnquoted","quoteSmart","alternative"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/hast-util-to-html/lib/handle/element.js"],"sourcesContent":["/**\n * @typedef {import('../types.js').State} State\n * @typedef {import('../types.js').Parent} Parent\n * @typedef {import('../types.js').Element} Element\n * @typedef {import('../types.js').Properties} Properties\n * @typedef {import('../types.js').PropertyValue} PropertyValue\n */\n\nimport {ccount} from 'ccount'\nimport {stringify as commas} from 'comma-separated-tokens'\nimport {svg, find} from 'property-information'\nimport {stringify as spaces} from 'space-separated-tokens'\nimport {stringifyEntities} from 'stringify-entities'\nimport {opening} from '../omission/opening.js'\nimport {closing} from '../omission/closing.js'\n\n/**\n * Maps of subsets.\n *\n * Each value is a matrix of tuples.\n * The value at `0` causes parse errors, the value at `1` is valid.\n * Of both, the value at `0` is unsafe, and the value at `1` is safe.\n *\n * @type {Record<'name' | 'unquoted' | 'single' | 'double', Array<[Array<string>, Array<string>]>>}\n */\nconst constants = {\n  // See: <https://html.spec.whatwg.org/#attribute-name-state>.\n  name: [\n    ['\\t\\n\\f\\r &/=>'.split(''), '\\t\\n\\f\\r \"&\\'/=>`'.split('')],\n    ['\\0\\t\\n\\f\\r \"&\\'/<=>'.split(''), '\\0\\t\\n\\f\\r \"&\\'/<=>`'.split('')]\n  ],\n  // See: <https://html.spec.whatwg.org/#attribute-value-(unquoted)-state>.\n  unquoted: [\n    ['\\t\\n\\f\\r &>'.split(''), '\\0\\t\\n\\f\\r \"&\\'<=>`'.split('')],\n    ['\\0\\t\\n\\f\\r \"&\\'<=>`'.split(''), '\\0\\t\\n\\f\\r \"&\\'<=>`'.split('')]\n  ],\n  // See: <https://html.spec.whatwg.org/#attribute-value-(single-quoted)-state>.\n  single: [\n    [\"&'\".split(''), '\"&\\'`'.split('')],\n    [\"\\0&'\".split(''), '\\0\"&\\'`'.split('')]\n  ],\n  // See: <https://html.spec.whatwg.org/#attribute-value-(double-quoted)-state>.\n  double: [\n    ['\"&'.split(''), '\"&\\'`'.split('')],\n    ['\\0\"&'.split(''), '\\0\"&\\'`'.split('')]\n  ]\n}\n\n/**\n * Serialize an element node.\n *\n * @param {Element} node\n *   Node to handle.\n * @param {number | undefined} index\n *   Index of `node` in `parent.\n * @param {Parent | undefined} parent\n *   Parent of `node`.\n * @param {State} state\n *   Info passed around about the current state.\n * @returns {string}\n *   Serialized node.\n */\n// eslint-disable-next-line complexity\nexport function element(node, index, parent, state) {\n  const schema = state.schema\n  const omit = schema.space === 'svg' ? false : state.settings.omitOptionalTags\n  let selfClosing =\n    schema.space === 'svg'\n      ? state.settings.closeEmptyElements\n      : state.settings.voids.includes(node.tagName.toLowerCase())\n  /** @type {Array<string>} */\n  const parts = []\n  /** @type {string} */\n  let last\n\n  if (schema.space === 'html' && node.tagName === 'svg') {\n    state.schema = svg\n  }\n\n  const attrs = serializeAttributes(state, node.properties)\n\n  const content = state.all(\n    schema.space === 'html' && node.tagName === 'template' ? node.content : node\n  )\n\n  state.schema = schema\n\n  // If the node is categorised as void, but it has children, remove the\n  // categorisation.\n  // This enables for example `menuitem`s, which are void in W3C HTML but not\n  // void in WHATWG HTML, to be stringified properly.\n  if (content) selfClosing = false\n\n  if (attrs || !omit || !opening(node, index, parent)) {\n    parts.push('<', node.tagName, attrs ? ' ' + attrs : '')\n\n    if (\n      selfClosing &&\n      (schema.space === 'svg' || state.settings.closeSelfClosing)\n    ) {\n      last = attrs.charAt(attrs.length - 1)\n      if (\n        !state.settings.tightSelfClosing ||\n        last === '/' ||\n        (last && last !== '\"' && last !== \"'\")\n      ) {\n        parts.push(' ')\n      }\n\n      parts.push('/')\n    }\n\n    parts.push('>')\n  }\n\n  parts.push(content)\n\n  if (!selfClosing && (!omit || !closing(node, index, parent))) {\n    parts.push('</' + node.tagName + '>')\n  }\n\n  return parts.join('')\n}\n\n/**\n * @param {State} state\n * @param {Properties | null | undefined} props\n * @returns {string}\n */\nfunction serializeAttributes(state, props) {\n  /** @type {Array<string>} */\n  const values = []\n  let index = -1\n  /** @type {string} */\n  let key\n\n  if (props) {\n    for (key in props) {\n      if (props[key] !== undefined && props[key] !== null) {\n        const value = serializeAttribute(state, key, props[key])\n        if (value) values.push(value)\n      }\n    }\n  }\n\n  while (++index < values.length) {\n    const last = state.settings.tightAttributes\n      ? values[index].charAt(values[index].length - 1)\n      : null\n\n    // In tight mode, don’t add a space after quoted attributes.\n    if (index !== values.length - 1 && last !== '\"' && last !== \"'\") {\n      values[index] += ' '\n    }\n  }\n\n  return values.join('')\n}\n\n/**\n * @param {State} state\n * @param {string} key\n * @param {PropertyValue} value\n * @returns {string}\n */\n// eslint-disable-next-line complexity\nfunction serializeAttribute(state, key, value) {\n  const info = find(state.schema, key)\n  const x =\n    state.settings.allowParseErrors && state.schema.space === 'html' ? 0 : 1\n  const y = state.settings.allowDangerousCharacters ? 0 : 1\n  let quote = state.quote\n  /** @type {string | undefined} */\n  let result\n\n  if (info.overloadedBoolean && (value === info.attribute || value === '')) {\n    value = true\n  } else if (\n    info.boolean ||\n    (info.overloadedBoolean && typeof value !== 'string')\n  ) {\n    value = Boolean(value)\n  }\n\n  if (\n    value === undefined ||\n    value === null ||\n    value === false ||\n    (typeof value === 'number' && Number.isNaN(value))\n  ) {\n    return ''\n  }\n\n  const name = stringifyEntities(\n    info.attribute,\n    Object.assign({}, state.settings.characterReferences, {\n      // Always encode without parse errors in non-HTML.\n      subset: constants.name[x][y]\n    })\n  )\n\n  // No value.\n  // There is currently only one boolean property in SVG: `[download]` on\n  // `<a>`.\n  // This property does not seem to work in browsers (Firefox, Safari, Chrome),\n  // so I can’t test if dropping the value works.\n  // But I assume that it should:\n  //\n  // ```html\n  // <!doctype html>\n  // <svg viewBox=\"0 0 100 100\">\n  //   <a href=https://example.com download>\n  //     <circle cx=50 cy=40 r=35 />\n  //   </a>\n  // </svg>\n  // ```\n  //\n  // See: <https://github.com/wooorm/property-information/blob/main/lib/svg.js>\n  if (value === true) return name\n\n  // `spaces` doesn’t accept a second argument, but it’s given here just to\n  // keep the code cleaner.\n  value = Array.isArray(value)\n    ? (info.commaSeparated ? commas : spaces)(value, {\n        padLeft: !state.settings.tightCommaSeparatedLists\n      })\n    : String(value)\n\n  if (state.settings.collapseEmptyAttributes && !value) return name\n\n  // Check unquoted value.\n  if (state.settings.preferUnquoted) {\n    result = stringifyEntities(\n      value,\n      Object.assign({}, state.settings.characterReferences, {\n        subset: constants.unquoted[x][y],\n        attribute: true\n      })\n    )\n  }\n\n  // If we don’t want unquoted, or if `value` contains character references when\n  // unquoted…\n  if (result !== value) {\n    // If the alternative is less common than `quote`, switch.\n    if (\n      state.settings.quoteSmart &&\n      ccount(value, quote) > ccount(value, state.alternative)\n    ) {\n      quote = state.alternative\n    }\n\n    result =\n      quote +\n      stringifyEntities(\n        value,\n        Object.assign({}, state.settings.characterReferences, {\n          // Always encode without parse errors in non-HTML.\n          subset: (quote === \"'\" ? constants.single : constants.double)[x][y],\n          attribute: true\n        })\n      ) +\n      quote\n  }\n\n  // Don’t add a `=` for unquoted empties.\n  return name + (result ? '=' + result : result)\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}