{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component,Fragment}from'react';import moment from'moment';import{Link}from'@gatsbyjs/reach-router';import{Utils}from'../../../utils/utils';import{seafileAPI}from'../../../utils/seafile-api';import{isPro,username,gettext,multiInstitution,siteRoot}from'../../../utils/constants';import toaster from'../../../components/toast';import EmptyTip from'../../../components/empty-tip';import Loading from'../../../components/loading';import Paginator from'../../../components/paginator';import Selector from'../../../components/single-selector';import OpMenu from'../../../components/dialog/op-menu';import SysAdminUserSetQuotaDialog from'../../../components/dialog/sysadmin-dialog/set-quota';import CommonOperationConfirmationDialog from'../../../components/dialog/common-operation-confirmation-dialog';import UserLink from'../user-link';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _window$sysadmin$page=window.sysadmin.pageOptions,availableRoles=_window$sysadmin$page.availableRoles,availableAdminRoles=_window$sysadmin$page.availableAdminRoles,institutions=_window$sysadmin$page.institutions;var Content=/*#__PURE__*/function(_Component){_inherits(Content,_Component);var _super=_createSuper(Content);function Content(props){var _this;_classCallCheck(this,Content);_this=_super.call(this,props);_this.toggleItemFreezed=function(isFreezed){_this.setState({isItemFreezed:isFreezed});};_this.onFreezedItem=function(){_this.setState({isItemFreezed:true});};_this.onUnfreezedItem=function(){_this.setState({isItemFreezed:false});};_this.getPreviousPage=function(){_this.props.getListByPage(_this.props.currentPage-1);};_this.getNextPage=function(){_this.props.getListByPage(_this.props.currentPage+1);};_this.sortByQuotaUsage=function(e){e.preventDefault();_this.props.sortByQuotaUsage();};_this.state={isItemFreezed:false};return _this;}_createClass(Content,[{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,isAdmin=_this$props.isAdmin,loading=_this$props.loading,errorMsg=_this$props.errorMsg,items=_this$props.items,isAllUsersSelected=_this$props.isAllUsersSelected,curPerPage=_this$props.curPerPage,hasNextPage=_this$props.hasNextPage,currentPage=_this$props.currentPage,sortBy=_this$props.sortBy,sortOrder=_this$props.sortOrder;if(loading){return/*#__PURE__*/_jsx(Loading,{});}else if(errorMsg){return/*#__PURE__*/_jsx(\"p\",{className:\"error text-center mt-4\",children:errorMsg});}else{var emptyTip=/*#__PURE__*/_jsx(EmptyTip,{children:/*#__PURE__*/_jsx(\"h2\",{children:gettext('No users')})});var columns=[];var sortIcon;if(sortBy==''){// initial sort icon\nsortIcon=/*#__PURE__*/_jsx(\"span\",{className:\"fas fa-sort\"});}else{sortIcon=/*#__PURE__*/_jsx(\"span\",{className:\"fas \".concat(sortOrder=='asc'?'fa-caret-up':'fa-caret-down')});}var spaceText=gettext('Space Used');var spaceEl=sortBy!=undefined?/*#__PURE__*/ // only offer 'sort' for 'DB' & 'LDAPImported' users\n_jsxs(\"a\",{className:\"d-inline-block table-sort-op\",href:\"#\",onClick:this.sortByQuotaUsage,children:[spaceText,\" \",sortIcon]}):spaceText;var colSpaceText=/*#__PURE__*/_jsxs(Fragment,{children:[spaceEl,\" / \".concat(gettext('Quota'))]});var colNameText=\"\".concat(gettext('Name'),\" / \").concat(gettext('Contact Email'));var colCreatedText=\"\".concat(gettext('Created At'),\" / \").concat(gettext('Last Login'),\" / \").concat(gettext('Last Access'));if(isPro){columns.push({width:'20%',text:colNameText},{width:'15%',text:gettext('Status')},{width:'15%',text:gettext('Role')});}else{columns.push({width:'30%',text:colNameText},{width:'20%',text:gettext('Status')});}if(multiInstitution&&!isAdmin){columns.push({width:'14%',text:colSpaceText},{width:'14%',text:gettext('Institution')},{width:'14%',text:colCreatedText},{width:'5%',text:''});}else{columns.push({width:'20%',text:colSpaceText},{width:'22%',text:colCreatedText},{width:'5%',text:''});}var table=/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{width:\"3%\",className:\"pl-2\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"vam\",onChange:this.props.toggleSelectAllUsers,checked:isAllUsersSelected})}),columns.map(function(item,index){return/*#__PURE__*/_jsx(\"th\",{width:item.width,children:item.text},index);})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:items.map(function(item,index){return/*#__PURE__*/_jsx(Item,{item:item,isItemFreezed:_this2.state.isItemFreezed,onFreezedItem:_this2.onFreezedItem,onUnfreezedItem:_this2.onUnfreezedItem,toggleItemFreezed:_this2.toggleItemFreezed,updateUser:_this2.props.updateUser,deleteUser:_this2.props.deleteUser,updateAdminRole:_this2.props.updateAdminRole,revokeAdmin:_this2.props.revokeAdmin,onUserSelected:_this2.props.onUserSelected,isAdmin:_this2.props.isAdmin,isLDAPImported:_this2.props.isLDAPImported},index);})})]}),!this.props.isAdmin&&!this.props.isSearchResult&&/*#__PURE__*/_jsx(Paginator,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:currentPage,hasNextPage:hasNextPage,curPerPage:curPerPage,resetPerPage:this.props.resetPerPage})]});return items.length?table:emptyTip;}}}]);return Content;}(Component);var Item=/*#__PURE__*/function(_Component2){_inherits(Item,_Component2);var _super2=_createSuper(Item);function Item(props){var _this3;_classCallCheck(this,Item);_this3=_super2.call(this,props);_this3.handleMouseEnter=function(){if(!_this3.props.isItemFreezed){_this3.setState({isOpIconShown:true,highlight:true});}};_this3.handleMouseLeave=function(){if(!_this3.props.isItemFreezed){_this3.setState({isOpIconShown:false,highlight:false});}};_this3.onUnfreezedItem=function(){_this3.setState({highlight:false,isOpIconShow:false});_this3.props.onUnfreezedItem();};_this3.toggleSetQuotaDialog=function(){_this3.setState({isSetQuotaDialogOpen:!_this3.state.isSetQuotaDialogOpen});};_this3.toggleDeleteUserDialog=function(){_this3.setState({isDeleteUserDialogOpen:!_this3.state.isDeleteUserDialogOpen});};_this3.toggleResetUserPasswordDialog=function(){_this3.setState({isResetUserPasswordDialogOpen:!_this3.state.isResetUserPasswordDialogOpen});};_this3.toggleRevokeAdminDialog=function(){_this3.setState({isRevokeAdminDialogOpen:!_this3.state.isRevokeAdminDialogOpen});};_this3.toggleConfirmInactiveDialog=function(){_this3.setState({isConfirmInactiveDialogOpen:!_this3.state.isConfirmInactiveDialogOpen});};_this3.onUserSelected=function(){_this3.props.onUserSelected(_this3.props.item);};_this3.updateStatus=function(roleOption){var isActive=roleOption.value=='active';if(isActive){toaster.notify(gettext('It may take some time, please wait.'));}_this3.props.updateUser(_this3.props.item.email,'is_active',isActive);};_this3.setUserInactive=function(){_this3.props.updateUser(_this3.props.item.email,'is_active',false);};_this3.updateRole=function(roleOption){_this3.props.updateUser(_this3.props.item.email,'role',roleOption.value);};_this3.updateAdminRole=function(roleOption){_this3.props.updateAdminRole(_this3.props.item.email,roleOption.value);};_this3.translateRole=function(role){switch(role){case'default':return gettext('Default');case'guest':return gettext('Guest');default:return role;}};_this3.translateAdminRole=function(role){switch(role){case'default_admin':return gettext('Default Admin');case'system_admin':return gettext('System Admin');case'daily_admin':return gettext('Daily Admin');case'audit_admin':return gettext('Audit Admin');default:return role;}};_this3.translateStatus=function(status){switch(status){case'active':return gettext('Active');case'inactive':return gettext('Inactive');}};_this3.updateInstitution=function(instOption){_this3.props.updateUser(_this3.props.item.email,'institution',instOption.value);};_this3.updateQuota=function(value){_this3.props.updateUser(_this3.props.item.email,'quota_total',value);};_this3.deleteUser=function(){toaster.notify(gettext('It may take some time, please wait.'));_this3.props.deleteUser(_this3.props.item.email,_this3.props.item.name);};_this3.resetPassword=function(){toaster.notify(gettext('It may take some time, please wait.'));seafileAPI.sysAdminResetUserPassword(_this3.props.item.email).then(function(res){toaster.success(res.data.reset_tip);}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this3.revokeAdmin=function(){var item=_this3.props.item;_this3.props.revokeAdmin(item.email,item.name);};_this3.getMenuOperations=function(){var _this3$props=_this3.props,isAdmin=_this3$props.isAdmin,isLDAPImported=_this3$props.isLDAPImported,isSearchResult=_this3$props.isSearchResult,item=_this3$props.item;var list=['Delete'];if(!isLDAPImported||isSearchResult&&item.source=='db'){list.push('Reset Password');}if(isAdmin){list=['Revoke Admin'];}return list;};_this3.translateOperations=function(item){var translateResult='';switch(item){case'Delete':translateResult=gettext('Delete');break;case'Reset Password':translateResult=gettext('Reset Password');break;case'Revoke Admin':translateResult=gettext('Revoke Admin');break;}return translateResult;};_this3.onMenuItemClick=function(operation){switch(operation){case'Delete':_this3.toggleDeleteUserDialog();break;case'Reset Password':_this3.toggleResetUserPasswordDialog();break;case'Revoke Admin':_this3.toggleRevokeAdminDialog();break;default:break;}};_this3.state={isOpIconShown:false,highlight:false,isSetQuotaDialogOpen:false,isDeleteUserDialogOpen:false,isResetUserPasswordDialogOpen:false,isRevokeAdminDialogOpen:false,isConfirmInactiveDialogOpen:false};return _this3;}_createClass(Item,[{key:\"render\",value:function render(){var _this4=this;var _this$props2=this.props,item=_this$props2.item,isAdmin=_this$props2.isAdmin;var _this$state=this.state,highlight=_this$state.highlight,isOpIconShown=_this$state.isOpIconShown,isSetQuotaDialogOpen=_this$state.isSetQuotaDialogOpen,isDeleteUserDialogOpen=_this$state.isDeleteUserDialogOpen,isResetUserPasswordDialogOpen=_this$state.isResetUserPasswordDialogOpen,isRevokeAdminDialogOpen=_this$state.isRevokeAdminDialogOpen,isConfirmInactiveDialogOpen=_this$state.isConfirmInactiveDialogOpen;var itemName='<span class=\"op-target\">'+Utils.HTMLescape(item.name)+'</span>';var deleteDialogMsg=gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}',itemName);var resetPasswordDialogMsg=gettext('Are you sure you want to reset the password of {placeholder} ?').replace('{placeholder}',itemName);var revokeAdminDialogMsg=gettext('Are you sure you want to revoke the admin permission of {placeholder} ?').replace('{placeholder}',itemName);var confirmSetUserInactiveMsg=gettext('Are you sure you want to set {user_placeholder} inactive?').replace('{user_placeholder}',itemName);// for 'user status'\nvar curStatus=item.is_active?'active':'inactive';this.statusOptions=['active','inactive'].map(function(item){return{value:item,text:_this4.translateStatus(item),isSelected:item==curStatus};});var currentSelectedStatusOption=this.statusOptions.filter(function(item){return item.isSelected;})[0];var currentSelectedAdminRoleOption;var currentSelectedRoleOption;if(isAdmin){var curAdminRole=item.admin_role;this.adminRoleOptions=availableAdminRoles.map(function(item){return{value:item,text:_this4.translateAdminRole(item),isSelected:item==curAdminRole};});currentSelectedAdminRoleOption=this.adminRoleOptions.filter(function(item){return item.isSelected;})[0];}else{var curRole=item.role;this.roleOptions=availableRoles.map(function(item){return{value:item,text:_this4.translateRole(item),isSelected:item==curRole};});currentSelectedRoleOption=this.roleOptions.filter(function(item){return item.isSelected;})[0]||{// `|| {...}`: to be compatible with old data(roles not in the present `availableRoles`\nvalue:curRole,text:this.translateRole(curRole),isSelected:true};}var currentSelectedInstOption;if(multiInstitution&&!isAdmin){var curInstitution=item.institution;this.instOptions=institutions.map(function(item){return{value:item,text:item,isSelected:item==curInstitution};});currentSelectedInstOption=this.instOptions.filter(function(item){return item.isSelected;})[0];}return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(\"tr\",{className:this.state.highlight?'tr-highlight':'',onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[/*#__PURE__*/_jsx(\"td\",{className:\"pl-2\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"vam\",onChange:this.onUserSelected,checked:item.isSelected})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(UserLink,{email:item.email,name:item.name}),item.contact_email&&/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"br\",{}),item.contact_email]}),item.org_id&&/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Link,{to:\"\".concat(siteRoot,\"sys/organizations/\").concat(item.org_id,\"/info/\"),children:[\"(\",item.org_name,\")\"]})]})]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Selector,{isDropdownToggleShown:highlight,currentSelectedOption:currentSelectedStatusOption,options:this.statusOptions,selectOption:this.updateStatus,toggleItemFreezed:this.props.toggleItemFreezed,operationBeforeSelect:item.is_active?this.toggleConfirmInactiveDialog:undefined})}),isPro&&/*#__PURE__*/_jsx(\"td\",{children:isAdmin?/*#__PURE__*/_jsx(Selector,{isDropdownToggleShown:highlight,currentSelectedOption:currentSelectedAdminRoleOption,options:this.adminRoleOptions,selectOption:this.updateAdminRole,toggleItemFreezed:this.props.toggleItemFreezed}):/*#__PURE__*/_jsx(Selector,{isDropdownToggleShown:highlight,currentSelectedOption:currentSelectedRoleOption,options:this.roleOptions,selectOption:this.updateRole,toggleItemFreezed:this.props.toggleItemFreezed})}),/*#__PURE__*/_jsxs(\"td\",{children:[\"\".concat(Utils.bytesToSize(item.quota_usage),\" / \").concat(item.quota_total>0?Utils.bytesToSize(item.quota_total):'--'),/*#__PURE__*/_jsx(\"span\",{title:gettext('Edit'),className:\"fa fa-pencil-alt attr-action-icon \".concat(isOpIconShown?'':'invisible'),onClick:this.toggleSetQuotaDialog})]}),multiInstitution&&!isAdmin&&/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Selector,{isDropdownToggleShown:highlight&&institutions.length>0,currentSelectedOption:currentSelectedInstOption,options:this.instOptions,selectOption:this.updateInstitution,toggleItemFreezed:this.props.toggleItemFreezed})}),/*#__PURE__*/_jsxs(\"td\",{children:[\"\".concat(item.create_time?moment(item.create_time).format('YYYY-MM-DD HH:mm'):'--',\" /\"),/*#__PURE__*/_jsx(\"br\",{}),\"\".concat(item.last_login?moment(item.last_login).fromNow():'--'),/*#__PURE__*/_jsx(\"br\",{}),\"\".concat(item.last_access_time?moment(item.last_access_time).fromNow():'--')]}),/*#__PURE__*/_jsx(\"td\",{children:item.email!=username&&isOpIconShown&&/*#__PURE__*/_jsx(OpMenu,{operations:this.getMenuOperations(),translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})})]}),isSetQuotaDialogOpen&&/*#__PURE__*/_jsx(SysAdminUserSetQuotaDialog,{toggle:this.toggleSetQuotaDialog,updateQuota:this.updateQuota}),isDeleteUserDialogOpen&&/*#__PURE__*/_jsx(CommonOperationConfirmationDialog,{title:gettext('Delete User'),message:deleteDialogMsg,executeOperation:this.deleteUser,confirmBtnText:gettext('Delete'),toggleDialog:this.toggleDeleteUserDialog}),isResetUserPasswordDialogOpen&&/*#__PURE__*/_jsx(CommonOperationConfirmationDialog,{title:gettext('Reset Password'),message:resetPasswordDialogMsg,executeOperation:this.resetPassword,confirmBtnText:gettext('Reset'),toggleDialog:this.toggleResetUserPasswordDialog}),isRevokeAdminDialogOpen&&/*#__PURE__*/_jsx(CommonOperationConfirmationDialog,{title:gettext('Revoke Admin'),message:revokeAdminDialogMsg,executeOperation:this.revokeAdmin,confirmBtnText:gettext('Revoke'),toggleDialog:this.toggleRevokeAdminDialog}),isConfirmInactiveDialogOpen&&/*#__PURE__*/_jsx(CommonOperationConfirmationDialog,{title:gettext('Set user inactive'),message:confirmSetUserInactiveMsg,executeOperation:this.setUserInactive,confirmBtnText:gettext('Set'),toggleDialog:this.toggleConfirmInactiveDialog})]});}}]);return Item;}(Component);export default Content;","map":{"version":3,"names":["React","Component","Fragment","moment","Link","Utils","seafileAPI","isPro","username","gettext","multiInstitution","siteRoot","toaster","EmptyTip","Loading","Paginator","Selector","OpMenu","SysAdminUserSetQuotaDialog","CommonOperationConfirmationDialog","UserLink","jsx","_jsx","jsxs","_jsxs","_window$sysadmin$page","window","sysadmin","pageOptions","availableRoles","availableAdminRoles","institutions","Content","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","toggleItemFreezed","isFreezed","setState","isItemFreezed","onFreezedItem","onUnfreezedItem","getPreviousPage","getListByPage","currentPage","getNextPage","sortByQuotaUsage","e","preventDefault","state","_createClass","key","value","render","_this2","_this$props","isAdmin","loading","errorMsg","items","isAllUsersSelected","curPerPage","hasNextPage","sortBy","sortOrder","className","children","emptyTip","columns","sortIcon","concat","spaceText","spaceEl","undefined","href","onClick","colSpaceText","colNameText","colCreatedText","push","width","text","table","type","onChange","toggleSelectAllUsers","checked","map","item","index","Item","updateUser","deleteUser","updateAdminRole","revokeAdmin","onUserSelected","isLDAPImported","isSearchResult","gotoPreviousPage","gotoNextPage","resetPerPage","length","_Component2","_super2","_this3","handleMouseEnter","isOpIconShown","highlight","handleMouseLeave","isOpIconShow","toggleSetQuotaDialog","isSetQuotaDialogOpen","toggleDeleteUserDialog","isDeleteUserDialogOpen","toggleResetUserPasswordDialog","isResetUserPasswordDialogOpen","toggleRevokeAdminDialog","isRevokeAdminDialogOpen","toggleConfirmInactiveDialog","isConfirmInactiveDialogOpen","updateStatus","roleOption","isActive","notify","email","setUserInactive","updateRole","translateRole","role","translateAdminRole","translateStatus","status","updateInstitution","instOption","updateQuota","name","resetPassword","sysAdminResetUserPassword","then","res","success","data","reset_tip","catch","error","errMessage","getErrorMsg","danger","getMenuOperations","_this3$props","list","source","translateOperations","translateResult","onMenuItemClick","operation","_this4","_this$props2","_this$state","itemName","HTMLescape","deleteDialogMsg","replace","resetPasswordDialogMsg","revokeAdminDialogMsg","confirmSetUserInactiveMsg","curStatus","is_active","statusOptions","isSelected","currentSelectedStatusOption","filter","currentSelectedAdminRoleOption","currentSelectedRoleOption","curAdminRole","admin_role","adminRoleOptions","curRole","roleOptions","currentSelectedInstOption","curInstitution","institution","instOptions","onMouseEnter","onMouseLeave","contact_email","org_id","to","org_name","isDropdownToggleShown","currentSelectedOption","options","selectOption","operationBeforeSelect","bytesToSize","quota_usage","quota_total","title","create_time","format","last_login","fromNow","last_access_time","operations","toggle","message","executeOperation","confirmBtnText","toggleDialog"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/sys-admin/users/users-content.js"],"sourcesContent":["import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { isPro, username, gettext, multiInstitution, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport Selector from '../../../components/single-selector';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport SysAdminUserSetQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport UserLink from '../user-link';\n\nconst { availableRoles, availableAdminRoles, institutions } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({ isItemFreezed: isFreezed });\n  };\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.currentPage - 1);\n  };\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.currentPage + 1);\n  };\n\n  sortByQuotaUsage = (e) => {\n    e.preventDefault();\n    this.props.sortByQuotaUsage();\n  };\n\n  render() {\n    const {\n      isAdmin, loading, errorMsg, items, isAllUsersSelected,\n      curPerPage, hasNextPage, currentPage,\n      sortBy, sortOrder\n    } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No users')}</h2>\n        </EmptyTip>\n      );\n\n\n      let columns = [];\n\n      let sortIcon;\n      if (sortBy == '') {\n        // initial sort icon\n        sortIcon = <span className=\"fas fa-sort\"></span>;\n      } else {\n        sortIcon = <span className={`fas ${sortOrder == 'asc' ? 'fa-caret-up' : 'fa-caret-down'}`}></span>;\n      }\n      const spaceText = gettext('Space Used');\n      const spaceEl =\n        sortBy != undefined ? // only offer 'sort' for 'DB' & 'LDAPImported' users\n          <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortByQuotaUsage}>{spaceText} {sortIcon}</a> :\n          spaceText;\n      const colSpaceText = <Fragment>{spaceEl}{` / ${gettext('Quota')}`}</Fragment>;\n\n      const colNameText = `${gettext('Name')} / ${gettext('Contact Email')}`;\n      const colCreatedText = `${gettext('Created At')} / ${gettext('Last Login')} / ${gettext('Last Access')}`;\n      if (isPro) {\n        columns.push(\n          {width: '20%', text: colNameText},\n          {width: '15%', text: gettext('Status')},\n          {width: '15%', text: gettext('Role')}\n        );\n      } else {\n        columns.push(\n          {width: '30%', text: colNameText},\n          {width: '20%', text: gettext('Status')}\n        );\n      }\n      if (multiInstitution && !isAdmin) {\n        columns.push(\n          {width: '14%', text: colSpaceText},\n          {width: '14%', text: gettext('Institution')},\n          {width: '14%', text: colCreatedText},\n          {width: '5%', text: ''}\n        );\n      } else {\n        columns.push(\n          {width: '20%', text: colSpaceText},\n          {width: '22%', text: colCreatedText},\n          {width: '5%', text: ''}\n        );\n      }\n\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"3%\" className=\"pl-2\">\n                  <input type=\"checkbox\" className=\"vam\" onChange={this.props.toggleSelectAllUsers} checked={isAllUsersSelected} />\n                </th>\n                {columns.map((item, index) => {\n                  return <th width={item.width} key={index}>{item.text}</th>;\n                })}\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  toggleItemFreezed={this.toggleItemFreezed}\n                  updateUser={this.props.updateUser}\n                  deleteUser={this.props.deleteUser}\n                  updateAdminRole={this.props.updateAdminRole}\n                  revokeAdmin={this.props.revokeAdmin}\n                  onUserSelected={this.props.onUserSelected}\n                  isAdmin={this.props.isAdmin}\n                  isLDAPImported={this.props.isLDAPImported}\n                />);\n              })}\n            </tbody>\n          </table>\n          {(!this.props.isAdmin && !this.props.isSearchResult) &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool,\n  errorMsg: PropTypes.string,\n  items: PropTypes.array,\n  deleteItem: PropTypes.func,\n  isAdmin: PropTypes.bool,\n  isLDAPImported: PropTypes.bool,\n  isSearchResult: PropTypes.bool,\n  sortBy: PropTypes.string,\n  sortByQuotaUsage: PropTypes.func,\n  getListByPage: PropTypes.func,\n  currentPage: PropTypes.number,\n  toggleSelectAllUsers: PropTypes.func,\n  isAllUsersSelected: PropTypes.bool,\n  resetPerPage: PropTypes.func,\n  updateUser: PropTypes.func,\n  deleteUser: PropTypes.func,\n  updateAdminRole: PropTypes.func,\n  revokeAdmin: PropTypes.func,\n  onUserSelected: PropTypes.func,\n  curPerPage: PropTypes.number,\n  hasNextPage: PropTypes.bool,\n  sortOrder: PropTypes.string,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isSetQuotaDialogOpen: false,\n      isDeleteUserDialogOpen: false,\n      isResetUserPasswordDialogOpen: false,\n      isRevokeAdminDialogOpen: false,\n      isConfirmInactiveDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  };\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  toggleSetQuotaDialog = () => {\n    this.setState({isSetQuotaDialogOpen: !this.state.isSetQuotaDialogOpen});\n  };\n\n  toggleDeleteUserDialog = () => {\n    this.setState({isDeleteUserDialogOpen: !this.state.isDeleteUserDialogOpen});\n  };\n\n  toggleResetUserPasswordDialog = () => {\n    this.setState({isResetUserPasswordDialogOpen: !this.state.isResetUserPasswordDialogOpen});\n  };\n\n  toggleRevokeAdminDialog = () => {\n    this.setState({isRevokeAdminDialogOpen: !this.state.isRevokeAdminDialogOpen});\n  };\n\n  toggleConfirmInactiveDialog= () => {\n    this.setState({isConfirmInactiveDialogOpen: !this.state.isConfirmInactiveDialogOpen});\n  };\n\n  onUserSelected = () => {\n    this.props.onUserSelected(this.props.item);\n  };\n\n  updateStatus= (roleOption) => {\n    const isActive = roleOption.value == 'active';\n    if (isActive) {\n      toaster.notify(gettext('It may take some time, please wait.'));\n    }\n    this.props.updateUser(this.props.item.email, 'is_active', isActive);\n  };\n\n  setUserInactive = () => {\n    this.props.updateUser(this.props.item.email, 'is_active', false);\n  };\n\n  updateRole = (roleOption) => {\n    this.props.updateUser(this.props.item.email, 'role', roleOption.value);\n  };\n\n  updateAdminRole = (roleOption) => {\n    this.props.updateAdminRole(this.props.item.email, roleOption.value);\n  };\n\n  translateRole = (role) => {\n    switch (role) {\n      case 'default':\n        return gettext('Default');\n      case 'guest':\n        return gettext('Guest');\n      default:\n        return role;\n    }\n  };\n\n  translateAdminRole = (role) => {\n    switch (role) {\n      case 'default_admin':\n        return gettext('Default Admin');\n      case 'system_admin':\n        return gettext('System Admin');\n      case 'daily_admin':\n        return gettext('Daily Admin');\n      case 'audit_admin':\n        return gettext('Audit Admin');\n      default:\n        return role;\n    }\n  };\n\n  translateStatus = (status) => {\n    switch (status) {\n      case 'active':\n        return gettext('Active');\n      case 'inactive':\n        return gettext('Inactive');\n    }\n  };\n\n  updateInstitution = (instOption) => {\n    this.props.updateUser(this.props.item.email, 'institution', instOption.value);\n  };\n\n  updateQuota = (value) => {\n    this.props.updateUser(this.props.item.email, 'quota_total', value);\n  };\n\n  deleteUser = () => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    this.props.deleteUser(this.props.item.email, this.props.item.name);\n  };\n\n  resetPassword = () => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    seafileAPI.sysAdminResetUserPassword(this.props.item.email).then(res => {\n      toaster.success(res.data.reset_tip);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  revokeAdmin = () => {\n    const { item } = this.props;\n    this.props.revokeAdmin(item.email, item.name);\n  };\n\n  getMenuOperations = () => {\n    const {\n      isAdmin, isLDAPImported,\n      isSearchResult, item\n    } = this.props;\n    let list = ['Delete'];\n    if (!isLDAPImported ||\n      (isSearchResult && item.source == 'db')) {\n      list.push('Reset Password');\n    }\n    if (isAdmin) {\n      list = ['Revoke Admin'];\n    }\n    return list;\n  };\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch (item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n      case 'Revoke Admin':\n        translateResult = gettext('Revoke Admin');\n        break;\n    }\n\n    return translateResult;\n  };\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Delete':\n        this.toggleDeleteUserDialog();\n        break;\n      case 'Reset Password':\n        this.toggleResetUserPasswordDialog();\n        break;\n      case 'Revoke Admin':\n        this.toggleRevokeAdminDialog();\n        break;\n      default:\n        break;\n    }\n  };\n\n  render() {\n    const { item, isAdmin } = this.props;\n    const {\n      highlight,\n      isOpIconShown,\n      isSetQuotaDialogOpen,\n      isDeleteUserDialogOpen,\n      isResetUserPasswordDialogOpen,\n      isRevokeAdminDialogOpen,\n      isConfirmInactiveDialogOpen\n    } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    const deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n    const resetPasswordDialogMsg = gettext('Are you sure you want to reset the password of {placeholder} ?').replace('{placeholder}', itemName);\n    const revokeAdminDialogMsg = gettext('Are you sure you want to revoke the admin permission of {placeholder} ?').replace('{placeholder}', itemName);\n    const confirmSetUserInactiveMsg = gettext('Are you sure you want to set {user_placeholder} inactive?').replace('{user_placeholder}', itemName);\n\n    // for 'user status'\n    const curStatus = item.is_active ? 'active' : 'inactive';\n    this.statusOptions = ['active', 'inactive'].map(item => {\n      return {\n        value: item,\n        text: this.translateStatus(item),\n        isSelected: item == curStatus\n      };\n    });\n    const currentSelectedStatusOption = this.statusOptions.filter(item => item.isSelected)[0];\n\n    let currentSelectedAdminRoleOption;\n    let currentSelectedRoleOption;\n    if (isAdmin) {\n      const { admin_role: curAdminRole } = item;\n      this.adminRoleOptions = availableAdminRoles.map(item => {\n        return {\n          value: item,\n          text: this.translateAdminRole(item),\n          isSelected: item == curAdminRole\n        };\n      });\n      currentSelectedAdminRoleOption = this.adminRoleOptions.filter(item => item.isSelected)[0];\n    } else {\n      const { role: curRole } = item;\n      this.roleOptions = availableRoles.map(item => {\n        return {\n          value: item,\n          text: this.translateRole(item),\n          isSelected: item == curRole\n        };\n      });\n      currentSelectedRoleOption = this.roleOptions.filter(item => item.isSelected)[0] || { // `|| {...}`: to be compatible with old data(roles not in the present `availableRoles`\n        value: curRole,\n        text: this.translateRole(curRole),\n        isSelected: true\n      };\n    }\n\n    let currentSelectedInstOption;\n    if (multiInstitution && !isAdmin) {\n      const { institution: curInstitution } = item;\n      this.instOptions = institutions.map(item => {\n        return {\n          value: item,\n          text: item,\n          isSelected: item == curInstitution\n        };\n      });\n      currentSelectedInstOption = this.instOptions.filter(item => item.isSelected)[0];\n    }\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td className=\"pl-2\">\n            <input type=\"checkbox\" className=\"vam\" onChange={this.onUserSelected} checked={item.isSelected} />\n          </td>\n          <td>\n            <UserLink email={item.email} name={item.name} />\n            {item.contact_email &&\n              <Fragment>\n                <br />\n                {item.contact_email}\n              </Fragment>}\n            {item.org_id &&\n              <Fragment>\n                <br />\n                <Link to={`${siteRoot}sys/organizations/${item.org_id}/info/`}>({item.org_name})</Link>\n              </Fragment>\n            }\n          </td>\n          <td>\n            <Selector\n              isDropdownToggleShown={highlight}\n              currentSelectedOption={currentSelectedStatusOption}\n              options={this.statusOptions}\n              selectOption={this.updateStatus}\n              toggleItemFreezed={this.props.toggleItemFreezed}\n              operationBeforeSelect={item.is_active ? this.toggleConfirmInactiveDialog : undefined}\n            />\n          </td>\n          {isPro &&\n          <td>\n            {isAdmin ?\n              <Selector\n                isDropdownToggleShown={highlight}\n                currentSelectedOption={currentSelectedAdminRoleOption}\n                options={this.adminRoleOptions}\n                selectOption={this.updateAdminRole}\n                toggleItemFreezed={this.props.toggleItemFreezed}\n              />\n              :\n              <Selector\n                isDropdownToggleShown={highlight}\n                currentSelectedOption={currentSelectedRoleOption}\n                options={this.roleOptions}\n                selectOption={this.updateRole}\n                toggleItemFreezed={this.props.toggleItemFreezed}\n              />\n            }\n          </td>\n          }\n          <td>\n            {`${Utils.bytesToSize(item.quota_usage)} / ${item.quota_total > 0 ? Utils.bytesToSize(item.quota_total) : '--'}`}\n            <span\n              title={gettext('Edit')}\n              className={`fa fa-pencil-alt attr-action-icon ${isOpIconShown ? '' : 'invisible'}`}\n              onClick={this.toggleSetQuotaDialog}>\n            </span>\n          </td>\n          {(multiInstitution && !isAdmin) &&\n            <td>\n              <Selector\n                isDropdownToggleShown={highlight && institutions.length > 0}\n                currentSelectedOption={currentSelectedInstOption}\n                options={this.instOptions}\n                selectOption={this.updateInstitution}\n                toggleItemFreezed={this.props.toggleItemFreezed}\n              />\n            </td>\n          }\n          <td>\n            {`${item.create_time ? moment(item.create_time).format('YYYY-MM-DD HH:mm') : '--'} /`}\n            <br />\n            {`${item.last_login ? moment(item.last_login).fromNow() : '--'}`}\n            <br />\n            {`${item.last_access_time ? moment(item.last_access_time).fromNow() : '--'}`}\n          </td>\n          <td>\n            {(item.email != username && isOpIconShown) &&\n            <OpMenu\n              operations={this.getMenuOperations()}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isSetQuotaDialogOpen &&\n          <SysAdminUserSetQuotaDialog\n            toggle={this.toggleSetQuotaDialog}\n            updateQuota={this.updateQuota}\n          />\n        }\n        {isDeleteUserDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete User')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteUser}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteUserDialog}\n          />\n        }\n        {isResetUserPasswordDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Reset Password')}\n            message={resetPasswordDialogMsg}\n            executeOperation={this.resetPassword}\n            confirmBtnText={gettext('Reset')}\n            toggleDialog={this.toggleResetUserPasswordDialog}\n          />\n        }\n        {isRevokeAdminDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Revoke Admin')}\n            message={revokeAdminDialogMsg}\n            executeOperation={this.revokeAdmin}\n            confirmBtnText={gettext('Revoke')}\n            toggleDialog={this.toggleRevokeAdminDialog}\n          />\n        }\n        {isConfirmInactiveDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Set user inactive')}\n            message={confirmSetUserInactiveMsg}\n            executeOperation={this.setUserInactive}\n            confirmBtnText={gettext('Set')}\n            toggleDialog={this.toggleConfirmInactiveDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object,\n  isItemFreezed: PropTypes.bool,\n  isAdmin: PropTypes.bool,\n  isLDAPImported: PropTypes.bool,\n  onFreezedItem: PropTypes.func,\n  onUnfreezedItem: PropTypes.func,\n  toggleItemFreezed: PropTypes.func.isRequired,\n  updateUser: PropTypes.func,\n  deleteUser: PropTypes.func,\n  updateAdminRole: PropTypes.func,\n  revokeAdmin: PropTypes.func,\n  onUserSelected: PropTypes.func,\n  isSearchResult: PropTypes.bool,\n};\n\nexport default Content;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}