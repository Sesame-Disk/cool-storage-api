{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _slateReact = require(\"slate-react\");\nvar _reactImageLightbox = _interopRequireDefault(require(\"@seafile/react-image-lightbox\"));\nvar _helper = require(\"../helper\");\nrequire(\"@seafile/react-image-lightbox/style.css\");\nrequire(\"./style.css\");\nvar ImagePreviewer = function ImagePreviewer(_ref) {\n  var imgUrl = _ref.imgUrl,\n    toggleImagePreviewer = _ref.toggleImagePreviewer;\n  var editor = (0, _slateReact.useSlateStatic)();\n  var images = (0, _helper.getImagesUrlList)(editor.children);\n  var _ref2 = (0, _react.useState)(images.findIndex(function (item) {\n      return item === imgUrl;\n    })),\n    _ref3 = _slicedToArray(_ref2, 2),\n    imageIndex = _ref3[0],\n    setImageIndex = _ref3[1];\n  var mainSrc = images[imageIndex];\n  var moveToPrevImage = function moveToPrevImage() {\n    var currentImageIndex = (imageIndex + images.length - 1) % images.length;\n    setImageIndex(currentImageIndex);\n  };\n  var moveToNextImage = function moveToNextImage() {\n    var newImageIndex = (imageIndex + 1) % images.length;\n    setImageIndex(newImageIndex);\n  };\n  return /*#__PURE__*/_react.default.createElement(_reactImageLightbox.default, {\n    wrapperClassName: \"sf-editor-image-previewer\",\n    imageTitle: /*#__PURE__*/_react.default.createElement(ImageTitleElement, {\n      mainSrc: mainSrc,\n      imageIndex: imageIndex,\n      images: images\n    }),\n    mainSrc: mainSrc,\n    toolbarButtons: [],\n    nextSrc: images[(imageIndex + 1) % images.length],\n    prevSrc: images[(imageIndex + images.length - 1) % images.length],\n    onCloseRequest: toggleImagePreviewer,\n    reactModalProps: {\n      shouldReturnFocusAfterClose: true,\n      preventScroll: true\n    },\n    onMovePrevRequest: moveToPrevImage,\n    onMoveNextRequest: moveToNextImage,\n    imagePadding: 70,\n    reactModalStyle: {\n      overlay: {\n        zIndex: 1071\n      }\n    }\n  });\n};\nvar _default = exports.default = ImagePreviewer;\nvar ImageTitleElement = function ImageTitleElement(props) {\n  var mainSrc = props.mainSrc,\n    imageIndex = props.imageIndex,\n    images = props.images;\n  var getImgTitle = function getImgTitle() {\n    try {\n      return mainSrc ? decodeURI(mainSrc.slice(mainSrc.lastIndexOf('/') + 1)) : '';\n    } catch (error) {\n      console.log('error', error);\n      return '';\n    }\n  };\n  return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement(\"span\", {\n    className: \"d-flex\"\n  }, /*#__PURE__*/_react.default.createElement(\"span\", {\n    className: \"text-truncate\"\n  }, getImgTitle()), /*#__PURE__*/_react.default.createElement(\"span\", {\n    className: \"flex-shrink-0\"\n  }, \"(\", imageIndex + 1, \"/\", images.length, \")\")));\n};","map":{"version":3,"names":["_slicedToArray","require","default","_interopRequireDefault","_interopRequireWildcard","Object","defineProperty","exports","value","_react","_slateReact","_reactImageLightbox","_helper","ImagePreviewer","_ref","imgUrl","toggleImagePreviewer","editor","useSlateStatic","images","getImagesUrlList","children","_ref2","useState","findIndex","item","_ref3","imageIndex","setImageIndex","mainSrc","moveToPrevImage","currentImageIndex","length","moveToNextImage","newImageIndex","createElement","wrapperClassName","imageTitle","ImageTitleElement","toolbarButtons","nextSrc","prevSrc","onCloseRequest","reactModalProps","shouldReturnFocusAfterClose","preventScroll","onMovePrevRequest","onMoveNextRequest","imagePadding","reactModalStyle","overlay","zIndex","_default","props","getImgTitle","decodeURI","slice","lastIndexOf","error","console","log","Fragment","className"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/extension/plugins/image/render-element/image-previewer.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _slateReact = require(\"slate-react\");\nvar _reactImageLightbox = _interopRequireDefault(require(\"@seafile/react-image-lightbox\"));\nvar _helper = require(\"../helper\");\nrequire(\"@seafile/react-image-lightbox/style.css\");\nrequire(\"./style.css\");\nconst ImagePreviewer = _ref => {\n  let {\n    imgUrl,\n    toggleImagePreviewer\n  } = _ref;\n  const editor = (0, _slateReact.useSlateStatic)();\n  let images = (0, _helper.getImagesUrlList)(editor.children);\n  const [imageIndex, setImageIndex] = (0, _react.useState)(images.findIndex(item => item === imgUrl));\n  const mainSrc = images[imageIndex];\n  const moveToPrevImage = () => {\n    const currentImageIndex = (imageIndex + images.length - 1) % images.length;\n    setImageIndex(currentImageIndex);\n  };\n  const moveToNextImage = () => {\n    const newImageIndex = (imageIndex + 1) % images.length;\n    setImageIndex(newImageIndex);\n  };\n  return /*#__PURE__*/_react.default.createElement(_reactImageLightbox.default, {\n    wrapperClassName: \"sf-editor-image-previewer\",\n    imageTitle: /*#__PURE__*/_react.default.createElement(ImageTitleElement, {\n      mainSrc: mainSrc,\n      imageIndex: imageIndex,\n      images: images\n    }),\n    mainSrc: mainSrc,\n    toolbarButtons: [],\n    nextSrc: images[(imageIndex + 1) % images.length],\n    prevSrc: images[(imageIndex + images.length - 1) % images.length],\n    onCloseRequest: toggleImagePreviewer,\n    reactModalProps: {\n      shouldReturnFocusAfterClose: true,\n      preventScroll: true\n    },\n    onMovePrevRequest: moveToPrevImage,\n    onMoveNextRequest: moveToNextImage,\n    imagePadding: 70,\n    reactModalStyle: {\n      overlay: {\n        zIndex: 1071\n      }\n    }\n  });\n};\nvar _default = exports.default = ImagePreviewer;\nconst ImageTitleElement = props => {\n  const {\n    mainSrc,\n    imageIndex,\n    images\n  } = props;\n  const getImgTitle = () => {\n    try {\n      return mainSrc ? decodeURI(mainSrc.slice(mainSrc.lastIndexOf('/') + 1)) : '';\n    } catch (error) {\n      console.log('error', error);\n      return '';\n    }\n  };\n  return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement(\"span\", {\n    className: \"d-flex\"\n  }, /*#__PURE__*/_react.default.createElement(\"span\", {\n    className: \"text-truncate\"\n  }, getImgTitle()), /*#__PURE__*/_react.default.createElement(\"span\", {\n    className: \"flex-shrink-0\"\n  }, \"(\", imageIndex + 1, \"/\", images.length, \")\")));\n};"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}