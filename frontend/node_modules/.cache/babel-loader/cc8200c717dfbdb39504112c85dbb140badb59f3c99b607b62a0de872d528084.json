{"ast":null,"code":"import _toConsumableArray from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{Popover,PopoverBody}from'reactstrap';import{seafileAPI}from'../../utils/seafile-api';import{Utils}from'../../utils/utils';import{TAG_COLORS}from'../../constants';import toaster from'../toast';import'../../css/repo-tag.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TagColor=/*#__PURE__*/function(_React$Component){_inherits(TagColor,_React$Component);var _super=_createSuper(TagColor);function TagColor(props){var _this;_classCallCheck(this,TagColor);_this=_super.call(this,props);_this.togglePopover=function(){_this.setState({isPopoverOpen:!_this.state.isPopoverOpen});};_this.selectTagColor=function(e){var newColor=e.target.value;var _this$props=_this.props,repoID=_this$props.repoID,tag=_this$props.tag;var id=tag.id,name=tag.name;seafileAPI.updateRepoTag(repoID,id,name,newColor).then(function(){_this.setState({tagColor:newColor,isPopoverOpen:!_this.state.isPopoverOpen});}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this.state={tagColor:_this.props.tag.color,isPopoverOpen:false};return _this;}_createClass(TagColor,[{key:\"UNSAFE_componentWillReceiveProps\",value:function UNSAFE_componentWillReceiveProps(nextProps){if(nextProps.tag.color!==this.props.tag.color){this.setState({tagColor:nextProps.tag.color});}}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,isPopoverOpen=_this$state.isPopoverOpen,tagColor=_this$state.tagColor;var tag=this.props.tag;var id=tag.id,color=tag.color;var colorList=_toConsumableArray(TAG_COLORS);// for color from previous color options\nif(colorList.indexOf(color)==-1){colorList.unshift(color);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{id:\"tag-\".concat(id,\"-color\"),className:\"tag-color cursor-pointer rounded-circle d-flex align-items-center justify-content-center\",style:{backgroundColor:tagColor},onClick:this.togglePopover,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-caret-down text-white\"})}),/*#__PURE__*/_jsx(Popover,{target:\"tag-\".concat(id,\"-color\"),isOpen:isPopoverOpen,placement:\"bottom\",toggle:this.togglePopover,className:\"tag-color-popover mw-100\",children:/*#__PURE__*/_jsx(PopoverBody,{className:\"p-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-between\",children:colorList.map(function(item,index){return/*#__PURE__*/_jsx(\"div\",{className:\"tag-color-option mx-1\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"colorinput\",children:[/*#__PURE__*/_jsx(\"input\",{name:\"color\",type:\"radio\",value:item,className:\"colorinput-input\",defaultChecked:item==tagColor,onClick:_this2.selectTagColor}),/*#__PURE__*/_jsx(\"span\",{className:\"colorinput-color rounded-circle d-flex align-items-center justify-content-center\",style:{backgroundColor:item},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check color-selected\"})})]})},index);})})})})]});}}]);return TagColor;}(React.Component);export default TagColor;","map":{"version":3,"names":["React","Popover","PopoverBody","seafileAPI","Utils","TAG_COLORS","toaster","jsx","_jsx","jsxs","_jsxs","TagColor","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","togglePopover","setState","isPopoverOpen","state","selectTagColor","e","newColor","target","value","_this$props","repoID","tag","id","name","updateRepoTag","then","tagColor","catch","error","errMessage","getErrorMsg","danger","color","_createClass","key","UNSAFE_componentWillReceiveProps","nextProps","render","_this2","_this$state","colorList","_toConsumableArray","indexOf","unshift","children","concat","className","style","backgroundColor","onClick","isOpen","placement","toggle","map","item","index","type","defaultChecked","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/tag-color.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Popover, PopoverBody } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { TAG_COLORS } from '../../constants';\nimport toaster from '../toast';\n\nimport '../../css/repo-tag.css';\n\nconst tagColorPropTypes = {\n  tag: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired\n};\n\nclass TagColor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagColor: this.props.tag.color,\n      isPopoverOpen: false\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.tag.color !== this.props.tag.color) {\n      this.setState({\n        tagColor: nextProps.tag.color,\n      });\n    }\n  }\n\n  togglePopover = () => {\n    this.setState({\n      isPopoverOpen: !this.state.isPopoverOpen\n    });\n  };\n\n  selectTagColor = (e) => {\n    const newColor = e.target.value;\n    const { repoID, tag } = this.props;\n    const { id, name } = tag;\n    seafileAPI.updateRepoTag(repoID, id, name, newColor).then(() => {\n      this.setState({\n        tagColor: newColor,\n        isPopoverOpen: !this.state.isPopoverOpen\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { isPopoverOpen, tagColor } = this.state;\n    const { tag } = this.props;\n    const { id, color } = tag;\n\n    let colorList = [...TAG_COLORS];\n    // for color from previous color options\n    if (colorList.indexOf(color) == -1) {\n      colorList.unshift(color);\n    }\n\n    return (\n      <div>\n        <span\n          id={`tag-${id}-color`}\n          className=\"tag-color cursor-pointer rounded-circle d-flex align-items-center justify-content-center\"\n          style={{backgroundColor: tagColor}}\n          onClick={this.togglePopover}\n        >\n          <i className=\"fas fa-caret-down text-white\"></i>\n        </span>\n        <Popover\n          target={`tag-${id}-color`}\n          isOpen={isPopoverOpen}\n          placement=\"bottom\"\n          toggle={this.togglePopover}\n          className=\"tag-color-popover mw-100\"\n        >\n          <PopoverBody className=\"p-2\">\n            <div className=\"d-flex justify-content-between\">\n              {colorList.map((item, index)=>{\n                return (\n                  <div key={index} className=\"tag-color-option mx-1\">\n                    <label className=\"colorinput\">\n                      <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" defaultChecked={item == tagColor} onClick={this.selectTagColor} />\n                      <span className=\"colorinput-color rounded-circle d-flex align-items-center justify-content-center\" style={{backgroundColor: item}}>\n                        <i className=\"fas fa-check color-selected\"></i>\n                      </span>\n                    </label>\n                  </div>\n                );\n              })\n              }\n            </div>\n          </PopoverBody>\n        </Popover>\n      </div>\n    );\n  }\n}\n\nTagColor.propTypes = tagColorPropTypes;\n\nexport default TagColor;\n"],"mappings":"suBAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,OAASC,OAAO,CAAEC,WAAW,KAAQ,YAAY,CACjD,OAASC,UAAU,KAAQ,yBAAyB,CACpD,OAASC,KAAK,KAAQ,mBAAmB,CACzC,OAASC,UAAU,KAAQ,iBAAiB,CAC5C,MAAO,CAAAC,OAAO,KAAM,UAAU,CAE9B,MAAO,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,4BAO1B,CAAAC,QAAQ,uBAAAC,gBAAA,EAAAC,SAAA,CAAAF,QAAA,CAAAC,gBAAA,MAAAE,MAAA,CAAAC,YAAA,CAAAJ,QAAA,EAEZ,SAAAA,SAAYK,KAAK,CAAE,KAAAC,KAAA,CAAAC,eAAA,MAAAP,QAAA,EACjBM,KAAA,CAAAH,MAAA,CAAAK,IAAA,MAAMH,KAAK,EAAEC,KAAA,CAefG,aAAa,CAAG,UAAM,CACpBH,KAAA,CAAKI,QAAQ,CAAC,CACZC,aAAa,CAAE,CAACL,KAAA,CAAKM,KAAK,CAACD,aAC7B,CAAC,CAAC,CACJ,CAAC,CAAAL,KAAA,CAEDO,cAAc,CAAG,SAACC,CAAC,CAAK,CACtB,GAAM,CAAAC,QAAQ,CAAGD,CAAC,CAACE,MAAM,CAACC,KAAK,CAC/B,IAAAC,WAAA,CAAwBZ,KAAA,CAAKD,KAAK,CAA1Bc,MAAM,CAAAD,WAAA,CAANC,MAAM,CAAEC,GAAG,CAAAF,WAAA,CAAHE,GAAG,CACnB,GAAQ,CAAAC,EAAE,CAAWD,GAAG,CAAhBC,EAAE,CAAEC,IAAI,CAAKF,GAAG,CAAZE,IAAI,CAChB9B,UAAU,CAAC+B,aAAa,CAACJ,MAAM,CAAEE,EAAE,CAAEC,IAAI,CAAEP,QAAQ,CAAC,CAACS,IAAI,CAAC,UAAM,CAC9DlB,KAAA,CAAKI,QAAQ,CAAC,CACZe,QAAQ,CAAEV,QAAQ,CAClBJ,aAAa,CAAE,CAACL,KAAA,CAAKM,KAAK,CAACD,aAC7B,CAAC,CAAC,CACJ,CAAC,CAAC,CAACe,KAAK,CAAC,SAACC,KAAK,CAAK,CAClB,GAAI,CAAAC,UAAU,CAAGnC,KAAK,CAACoC,WAAW,CAACF,KAAK,CAAC,CACzChC,OAAO,CAACmC,MAAM,CAACF,UAAU,CAAC,CAC5B,CAAC,CAAC,CACJ,CAAC,CAjCCtB,KAAA,CAAKM,KAAK,CAAG,CACXa,QAAQ,CAAEnB,KAAA,CAAKD,KAAK,CAACe,GAAG,CAACW,KAAK,CAC9BpB,aAAa,CAAE,KACjB,CAAC,CAAC,OAAAL,KAAA,CACJ,CAAC0B,YAAA,CAAAhC,QAAA,GAAAiC,GAAA,oCAAAhB,KAAA,CAED,SAAAiB,iCAAiCC,SAAS,CAAE,CAC1C,GAAIA,SAAS,CAACf,GAAG,CAACW,KAAK,GAAK,IAAI,CAAC1B,KAAK,CAACe,GAAG,CAACW,KAAK,CAAE,CAChD,IAAI,CAACrB,QAAQ,CAAC,CACZe,QAAQ,CAAEU,SAAS,CAACf,GAAG,CAACW,KAC1B,CAAC,CAAC,CACJ,CACF,CAAC,GAAAE,GAAA,UAAAhB,KAAA,CAuBD,SAAAmB,OAAA,CAAS,KAAAC,MAAA,MACP,IAAAC,WAAA,CAAoC,IAAI,CAAC1B,KAAK,CAAtCD,aAAa,CAAA2B,WAAA,CAAb3B,aAAa,CAAEc,QAAQ,CAAAa,WAAA,CAARb,QAAQ,CAC/B,GAAQ,CAAAL,GAAG,CAAK,IAAI,CAACf,KAAK,CAAlBe,GAAG,CACX,GAAQ,CAAAC,EAAE,CAAYD,GAAG,CAAjBC,EAAE,CAAEU,KAAK,CAAKX,GAAG,CAAbW,KAAK,CAEjB,GAAI,CAAAQ,SAAS,CAAAC,kBAAA,CAAO9C,UAAU,CAAC,CAC/B;AACA,GAAI6C,SAAS,CAACE,OAAO,CAACV,KAAK,CAAC,EAAI,CAAC,CAAC,CAAE,CAClCQ,SAAS,CAACG,OAAO,CAACX,KAAK,CAAC,CAC1B,CAEA,mBACEhC,KAAA,QAAA4C,QAAA,eACE9C,IAAA,SACEwB,EAAE,QAAAuB,MAAA,CAASvB,EAAE,UAAS,CACtBwB,SAAS,CAAC,0FAA0F,CACpGC,KAAK,CAAE,CAACC,eAAe,CAAEtB,QAAQ,CAAE,CACnCuB,OAAO,CAAE,IAAI,CAACvC,aAAc,CAAAkC,QAAA,cAE5B9C,IAAA,MAAGgD,SAAS,CAAC,8BAA8B,CAAI,CAAC,CAC5C,CAAC,cACPhD,IAAA,CAACP,OAAO,EACN0B,MAAM,QAAA4B,MAAA,CAASvB,EAAE,UAAS,CAC1B4B,MAAM,CAAEtC,aAAc,CACtBuC,SAAS,CAAC,QAAQ,CAClBC,MAAM,CAAE,IAAI,CAAC1C,aAAc,CAC3BoC,SAAS,CAAC,0BAA0B,CAAAF,QAAA,cAEpC9C,IAAA,CAACN,WAAW,EAACsD,SAAS,CAAC,KAAK,CAAAF,QAAA,cAC1B9C,IAAA,QAAKgD,SAAS,CAAC,gCAAgC,CAAAF,QAAA,CAC5CJ,SAAS,CAACa,GAAG,CAAC,SAACC,IAAI,CAAEC,KAAK,CAAG,CAC5B,mBACEzD,IAAA,QAAiBgD,SAAS,CAAC,uBAAuB,CAAAF,QAAA,cAChD5C,KAAA,UAAO8C,SAAS,CAAC,YAAY,CAAAF,QAAA,eAC3B9C,IAAA,UAAOyB,IAAI,CAAC,OAAO,CAACiC,IAAI,CAAC,OAAO,CAACtC,KAAK,CAAEoC,IAAK,CAACR,SAAS,CAAC,kBAAkB,CAACW,cAAc,CAAEH,IAAI,EAAI5B,QAAS,CAACuB,OAAO,CAAEX,MAAI,CAACxB,cAAe,CAAE,CAAC,cAC7IhB,IAAA,SAAMgD,SAAS,CAAC,kFAAkF,CAACC,KAAK,CAAE,CAACC,eAAe,CAAEM,IAAI,CAAE,CAAAV,QAAA,cAChI9C,IAAA,MAAGgD,SAAS,CAAC,6BAA6B,CAAI,CAAC,CAC3C,CAAC,EACF,CAAC,EANAS,KAOL,CAAC,CAEV,CAAC,CAAC,CAEC,CAAC,CACK,CAAC,CACP,CAAC,EACP,CAAC,CAEV,CAAC,WAAAtD,QAAA,GAvFoBX,KAAK,CAACoE,SAAS,EA4FtC,cAAe,CAAAzD,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}