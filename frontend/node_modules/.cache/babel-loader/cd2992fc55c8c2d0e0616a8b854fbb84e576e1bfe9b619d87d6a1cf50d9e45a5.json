{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\nvar _reactstrap = require(\"reactstrap\");\nvar _constants = require(\"../../constants\");\nvar _eventBus = _interopRequireDefault(require(\"../../../utils/event-bus\"));\nvar _eventTypes = require(\"../../../constants/event-types\");\nrequire(\"./index.css\");\nvar MoreMenu = function MoreMenu(_ref) {\n  var className = _ref.className,\n    disabled = _ref.disabled,\n    isRichEditor = _ref.isRichEditor,\n    children = _ref.children;\n  var popoverRef = (0, _react.useRef)(null);\n  var imagePopoverRef = (0, _react.useRef)(false);\n  var validClassName = (0, _classnames.default)(className, {\n    'sf-rich-editor': isRichEditor,\n    'sf-icon-btn': true,\n    'sf-icon-btn-disabled': disabled,\n    'sf-icon-btn-hover': !disabled\n  });\n  var config = _constants.MENUS_CONFIG_MAP[_constants.MORE_OPERATION];\n  var toggle = (0, _react.useCallback)(function () {\n    if (imagePopoverRef.current) return;\n    popoverRef.current.toggle();\n  }, []);\n  var toggleImagePopover = (0, _react.useCallback)(function (isPopoverShow) {\n    imagePopoverRef.current = isPopoverShow;\n  }, []);\n  (0, _react.useEffect)(function () {\n    var eventBus = _eventBus.default.getInstance();\n    var unsubscribe = eventBus.subscribe(_eventTypes.INTERNAL_EVENTS.ON_TOGGLE_IMAGE_POPOVER, toggleImagePopover);\n    return function () {\n      return unsubscribe();\n    };\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement(\"button\", {\n    className: validClassName,\n    type: \"button\",\n    id: config.id\n  }, /*#__PURE__*/_react.default.createElement(\"i\", {\n    className: config.iconClass\n  })), /*#__PURE__*/_react.default.createElement(_reactstrap.UncontrolledPopover, {\n    target: config.id,\n    className: \"sf-editor-menu-popover sf-editor--more-menu-popover\",\n    trigger: \"legacy\",\n    placement: \"bottom-end\",\n    hideArrow: true,\n    fade: false,\n    toggle: toggle,\n    ref: popoverRef\n  }, children));\n};\nMoreMenu.defaultProps = {\n  isRichEditor: true,\n  className: 'sf-menu-group-item'\n};\nvar _default = exports.default = MoreMenu;","map":{"version":3,"names":["_interopRequireDefault","require","default","_interopRequireWildcard","Object","defineProperty","exports","value","_react","_classnames","_reactstrap","_constants","_eventBus","_eventTypes","MoreMenu","_ref","className","disabled","isRichEditor","children","popoverRef","useRef","imagePopoverRef","validClassName","config","MENUS_CONFIG_MAP","MORE_OPERATION","toggle","useCallback","current","toggleImagePopover","isPopoverShow","useEffect","eventBus","getInstance","unsubscribe","subscribe","INTERNAL_EVENTS","ON_TOGGLE_IMAGE_POPOVER","createElement","Fragment","type","id","iconClass","UncontrolledPopover","target","trigger","placement","hideArrow","fade","ref","defaultProps","_default"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/extension/commons/more-menu/index.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\nvar _reactstrap = require(\"reactstrap\");\nvar _constants = require(\"../../constants\");\nvar _eventBus = _interopRequireDefault(require(\"../../../utils/event-bus\"));\nvar _eventTypes = require(\"../../../constants/event-types\");\nrequire(\"./index.css\");\nconst MoreMenu = _ref => {\n  let {\n    className,\n    disabled,\n    isRichEditor,\n    children\n  } = _ref;\n  const popoverRef = (0, _react.useRef)(null);\n  const imagePopoverRef = (0, _react.useRef)(false);\n  const validClassName = (0, _classnames.default)(className, {\n    'sf-rich-editor': isRichEditor,\n    'sf-icon-btn': true,\n    'sf-icon-btn-disabled': disabled,\n    'sf-icon-btn-hover': !disabled\n  });\n  const config = _constants.MENUS_CONFIG_MAP[_constants.MORE_OPERATION];\n  const toggle = (0, _react.useCallback)(() => {\n    if (imagePopoverRef.current) return;\n    popoverRef.current.toggle();\n  }, []);\n  const toggleImagePopover = (0, _react.useCallback)(isPopoverShow => {\n    imagePopoverRef.current = isPopoverShow;\n  }, []);\n  (0, _react.useEffect)(() => {\n    const eventBus = _eventBus.default.getInstance();\n    const unsubscribe = eventBus.subscribe(_eventTypes.INTERNAL_EVENTS.ON_TOGGLE_IMAGE_POPOVER, toggleImagePopover);\n    return () => unsubscribe();\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement(\"button\", {\n    className: validClassName,\n    type: \"button\",\n    id: config.id\n  }, /*#__PURE__*/_react.default.createElement(\"i\", {\n    className: config.iconClass\n  })), /*#__PURE__*/_react.default.createElement(_reactstrap.UncontrolledPopover, {\n    target: config.id,\n    className: \"sf-editor-menu-popover sf-editor--more-menu-popover\",\n    trigger: \"legacy\",\n    placement: \"bottom-end\",\n    hideArrow: true,\n    fade: false,\n    toggle: toggle,\n    ref: popoverRef\n  }, children));\n};\nMoreMenu.defaultProps = {\n  isRichEditor: true,\n  className: 'sf-menu-group-item'\n};\nvar _default = exports.default = MoreMenu;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}