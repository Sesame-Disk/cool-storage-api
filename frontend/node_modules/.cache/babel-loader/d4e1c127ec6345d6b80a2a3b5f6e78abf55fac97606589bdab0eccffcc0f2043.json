{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Fragment}from'react';import{isPro,gettext}from'../../../utils/constants';import{Button}from'reactstrap';import{seafileAPI}from'../../../utils/seafile-api';import{Utils}from'../../../utils/utils';import toaster from'../../toast';import UserSelect from'../../user-select';import SharePermissionEditor from'../../select-editor/share-permission-editor';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserItem=/*#__PURE__*/function(_React$Component){_inherits(UserItem,_React$Component);var _super=_createSuper(UserItem);function UserItem(props){var _this;_classCallCheck(this,UserItem);_this=_super.call(this,props);_this.onMouseEnter=function(){_this.setState({isOperationShow:true});};_this.onMouseLeave=function(){_this.setState({isOperationShow:false});};_this.deleteShareItem=function(){var item=_this.props.item;_this.props.deleteShareItem(item.user_email);};_this.onChangeUserPermission=function(permission){var item=_this.props.item;_this.props.onChangeUserPermission(item,permission);};_this.state={isOperationShow:false};return _this;}_createClass(UserItem,[{key:\"render\",value:function render(){var item=this.props.item;var currentPermission=Utils.getSharedPermission(item);return/*#__PURE__*/_jsxs(\"tr\",{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[/*#__PURE__*/_jsx(\"td\",{className:\"name\",children:item.user_name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(SharePermissionEditor,{repoID:item.repo_id,isTextMode:true,autoFocus:true,isEditIconShow:this.state.isOperationShow,currentPermission:currentPermission,permissions:this.props.permissions,onPermissionChanged:this.onChangeUserPermission,isSysAdmin:true})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"sf2-icon-x3 action-icon \".concat(this.state.isOperationShow?'':'hide'),onClick:this.deleteShareItem,title:gettext('Delete')})})]});}}]);return UserItem;}(React.Component);var UserList=/*#__PURE__*/function(_React$Component2){_inherits(UserList,_React$Component2);var _super2=_createSuper(UserList);function UserList(){_classCallCheck(this,UserList);return _super2.apply(this,arguments);}_createClass(UserList,[{key:\"render\",value:function render(){var _this2=this;var items=this.props.items;return/*#__PURE__*/_jsx(\"tbody\",{children:items.map(function(item,index){return/*#__PURE__*/_jsx(UserItem,{item:item,permissions:_this2.props.permissions,deleteShareItem:_this2.props.deleteShareItem,onChangeUserPermission:_this2.props.onChangeUserPermission},index);})});}}]);return UserList;}(React.Component);var SysAdminShareToUser=/*#__PURE__*/function(_React$Component3){_inherits(SysAdminShareToUser,_React$Component3);var _super3=_createSuper(SysAdminShareToUser);function SysAdminShareToUser(props){var _this3;_classCallCheck(this,SysAdminShareToUser);_this3=_super3.call(this,props);_this3.handleSelectChange=function(option){_this3.setState({selectedOption:option});_this3.options=[];};_this3.setPermission=function(permission){_this3.setState({permission:permission});};_this3.shareToUser=function(){var users=[];var repoID=_this3.props.repoID;if(_this3.state.selectedOption&&_this3.state.selectedOption.length>0){for(var i=0;i<_this3.state.selectedOption.length;i++){users[i]=_this3.state.selectedOption[i].email;}}seafileAPI.sysAdminAddRepoSharedItem(repoID,'user',users,_this3.state.permission).then(function(res){var errorMsg=[];if(res.data.failed.length>0){for(var _i=0;_i<res.data.failed.length;_i++){errorMsg[_i]=res.data.failed[_i];}}var newItems=res.data.success;_this3.setState({errorMsg:errorMsg,sharedItems:_this3.state.sharedItems.concat(newItems),selectedOption:null,permission:'rw'});_this3.refs.userSelect.clearSelect();}).catch(function(error){if(error.response){var message=gettext('Library can not be shared to owner.');var errMessage=[];errMessage.push(message);_this3.setState({errorMsg:errMessage,selectedOption:null});}});};_this3.deleteShareItem=function(useremail){var repoID=_this3.props.repoID;seafileAPI.sysAdminDeleteRepoSharedItem(repoID,'user',useremail).then(function(res){_this3.setState({sharedItems:_this3.state.sharedItems.filter(function(item){return item.user_email!==useremail;})});}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this3.onChangeUserPermission=function(item,permission){var repoID=_this3.props.repoID;var userEmail=item.user_email;seafileAPI.sysAdminUpdateRepoSharedItemPermission(repoID,'user',userEmail,permission).then(function(){_this3.updateSharedItems(item,permission);}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this3.updateSharedItems=function(item,permission){var username=item.user_name;var sharedItems=_this3.state.sharedItems.map(function(sharedItem){var sharedItemUsername=sharedItem.user_name;if(username===sharedItemUsername){sharedItem.permission=permission;sharedItem.is_admin=permission==='admin'?true:false;}return sharedItem;});_this3.setState({sharedItems:sharedItems});};_this3.state={selectedOption:null,errorMsg:[],permission:'rw',sharedItems:[]};_this3.options=[];_this3.permissions=['rw','r'];if(isPro){_this3.permissions.push('admin','cloud-edit','preview');}return _this3;}_createClass(SysAdminShareToUser,[{key:\"componentDidMount\",value:function componentDidMount(){var _this4=this;var repoID=this.props.repoID;seafileAPI.sysAdminListRepoSharedItems(repoID,'user').then(function(res){if(res.data.length!==0){_this4.setState({sharedItems:res.data});}}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});}},{key:\"render\",value:function render(){var sharedItems=this.state.sharedItems;return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{width:\"50%\",children:gettext('User')}),/*#__PURE__*/_jsx(\"th\",{width:\"35%\",children:gettext('Permission')}),/*#__PURE__*/_jsx(\"th\",{width:\"15%\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(UserSelect,{ref:\"userSelect\",isMulti:true,className:\"reviewer-select\",placeholder:gettext('Search users'),onSelectChange:this.handleSelectChange})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(SharePermissionEditor,{repoID:this.props.repoID,isTextMode:false,isEditIconShow:false,currentPermission:this.state.permission,permissions:this.permissions,onPermissionChanged:this.setPermission,isSysAdmin:true})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{onClick:this.shareToUser,children:gettext('Submit')})})]}),this.state.errorMsg.length>0&&this.state.errorMsg.map(function(item,index){var errMessage='';if(item.email){errMessage=item.email+': '+item.error_msg;}else{errMessage=item;}return/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:3,children:/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errMessage})})},index);})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"share-list-container\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table-thead-hidden\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{width:\"50%\",children:gettext('User')}),/*#__PURE__*/_jsx(\"th\",{width:\"35%\",children:gettext('Permission')}),/*#__PURE__*/_jsx(\"th\",{width:\"15%\"})]})}),/*#__PURE__*/_jsx(UserList,{items:sharedItems,permissions:this.permissions,deleteShareItem:this.deleteShareItem,onChangeUserPermission:this.onChangeUserPermission})]})})]});}}]);return SysAdminShareToUser;}(React.Component);export default SysAdminShareToUser;","map":{"version":3,"names":["React","Fragment","isPro","gettext","Button","seafileAPI","Utils","toaster","UserSelect","SharePermissionEditor","jsx","_jsx","jsxs","_jsxs","UserItem","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","onMouseEnter","setState","isOperationShow","onMouseLeave","deleteShareItem","item","user_email","onChangeUserPermission","permission","state","_createClass","key","value","render","currentPermission","getSharedPermission","children","className","user_name","repoID","repo_id","isTextMode","autoFocus","isEditIconShow","permissions","onPermissionChanged","isSysAdmin","concat","onClick","title","Component","UserList","_React$Component2","_super2","apply","arguments","_this2","items","map","index","SysAdminShareToUser","_React$Component3","_super3","_this3","handleSelectChange","option","selectedOption","options","setPermission","shareToUser","users","length","i","email","sysAdminAddRepoSharedItem","then","res","errorMsg","data","failed","newItems","success","sharedItems","refs","userSelect","clearSelect","catch","error","response","message","errMessage","push","useremail","sysAdminDeleteRepoSharedItem","filter","getErrorMsg","danger","userEmail","sysAdminUpdateRepoSharedItemPermission","updateSharedItems","username","sharedItem","sharedItemUsername","is_admin","componentDidMount","_this4","sysAdminListRepoSharedItems","width","ref","isMulti","placeholder","onSelectChange","error_msg","colSpan"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/sysadmin-dialog/sysadmin-share-to-user.js"],"sourcesContent":["import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { isPro, gettext } from '../../../utils/constants';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\nimport UserSelect from '../../user-select';\nimport SharePermissionEditor from '../../select-editor/share-permission-editor';\n\nclass UserItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  deleteShareItem = () => {\n    let item = this.props.item;\n    this.props.deleteShareItem(item.user_email);\n  };\n\n  onChangeUserPermission = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeUserPermission(item, permission);\n  };\n\n  render() {\n    let item = this.props.item;\n    let currentPermission = Utils.getSharedPermission(item);\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"name\">{item.user_name}</td>\n        <td>\n          <SharePermissionEditor\n            repoID={item.repo_id}\n            isTextMode={true}\n            autoFocus={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={currentPermission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeUserPermission}\n            isSysAdmin={true}\n          />\n        </td>\n        <td>\n          <span\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteShareItem}\n            title={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nUserItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  permissions: PropTypes.array.isRequired,\n  deleteShareItem: PropTypes.func.isRequired,\n  onChangeUserPermission: PropTypes.func.isRequired,\n};\n\nclass UserList extends React.Component {\n\n  render() {\n    let items = this.props.items;\n    return (\n      <tbody>\n        {items.map((item, index) => {\n          return (\n            <UserItem\n              key={index}\n              item={item}\n              permissions={this.props.permissions}\n              deleteShareItem={this.props.deleteShareItem}\n              onChangeUserPermission={this.props.onChangeUserPermission}\n            />\n          );\n        })}\n      </tbody>\n    );\n  }\n}\n\nUserList.propTypes = {\n  items: PropTypes.array.isRequired,\n  permissions: PropTypes.array.isRequired,\n  deleteShareItem: PropTypes.func.isRequired,\n  onChangeUserPermission: PropTypes.func.isRequired,\n};\n\nconst propTypes = {\n  isGroupOwnedRepo: PropTypes.bool,\n  itemPath: PropTypes.string.isRequired,\n  itemType: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired\n};\n\nclass SysAdminShareToUser extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errorMsg: [],\n      permission: 'rw',\n      sharedItems: []\n    };\n    this.options = [];\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      this.permissions.push('admin', 'cloud-edit', 'preview');\n    }\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({selectedOption: option});\n    this.options = [];\n  };\n\n  componentDidMount() {\n    let repoID = this.props.repoID;\n    seafileAPI.sysAdminListRepoSharedItems(repoID, 'user').then((res) => {\n      if(res.data.length !== 0) {\n        this.setState({sharedItems: res.data});\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  };\n\n  shareToUser = () => {\n    let users = [];\n    let repoID = this.props.repoID;\n    if (this.state.selectedOption && this.state.selectedOption.length > 0 ) {\n      for (let i = 0; i < this.state.selectedOption.length; i ++) {\n        users[i] = this.state.selectedOption[i].email;\n      }\n    }\n    seafileAPI.sysAdminAddRepoSharedItem(repoID, 'user' , users, this.state.permission).then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0 ; i < res.data.failed.length ; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n      let newItems = res.data.success;\n      this.setState({\n        errorMsg: errorMsg,\n        sharedItems: this.state.sharedItems.concat(newItems),\n        selectedOption: null,\n        permission: 'rw',\n      });\n      this.refs.userSelect.clearSelect();\n    }).catch(error => {\n      if (error.response) {\n        let message = gettext('Library can not be shared to owner.');\n        let errMessage = [];\n        errMessage.push(message);\n        this.setState({\n          errorMsg: errMessage,\n          selectedOption: null,\n        });\n      }\n    });\n  };\n\n  deleteShareItem = (useremail) => {\n    let repoID = this.props.repoID;\n    seafileAPI.sysAdminDeleteRepoSharedItem(repoID, 'user', useremail).then(res => {\n      this.setState({\n        sharedItems: this.state.sharedItems.filter( item => { return item.user_email !== useremail; })\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onChangeUserPermission = (item, permission) => {\n    let repoID = this.props.repoID;\n    let userEmail = item.user_email;\n    seafileAPI.sysAdminUpdateRepoSharedItemPermission(repoID, 'user', userEmail, permission).then(() => {\n      this.updateSharedItems(item, permission);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  updateSharedItems = (item, permission) => {\n    let username = item.user_name;\n    let sharedItems = this.state.sharedItems.map(sharedItem => {\n      let sharedItemUsername = sharedItem.user_name;\n      if (username === sharedItemUsername) {\n        sharedItem.permission = permission;\n        sharedItem.is_admin = permission === 'admin' ? true : false;\n      }\n      return sharedItem;\n    });\n    this.setState({sharedItems: sharedItems});\n  };\n\n  render() {\n    let { sharedItems } = this.state;\n    return (\n      <Fragment>\n        <table>\n          <thead>\n            <tr>\n              <th width=\"50%\">{gettext('User')}</th>\n              <th width=\"35%\">{gettext('Permission')}</th>\n              <th width=\"15%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>\n                <UserSelect\n                  ref=\"userSelect\"\n                  isMulti={true}\n                  className=\"reviewer-select\"\n                  placeholder={gettext('Search users')}\n                  onSelectChange={this.handleSelectChange}\n                />\n              </td>\n              <td>\n                <SharePermissionEditor\n                  repoID={this.props.repoID}\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                  isSysAdmin={true}\n                />\n              </td>\n              <td>\n                <Button onClick={this.shareToUser}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = '';\n                if (item.email) {\n                  errMessage = item.email + ': ' + item.error_msg;\n                } else {\n                  errMessage = item;\n                }\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr>\n                <th width=\"50%\">{gettext('User')}</th>\n                <th width=\"35%\">{gettext('Permission')}</th>\n                <th width=\"15%\"></th>\n              </tr>\n            </thead>\n            <UserList\n              items={sharedItems}\n              permissions={this.permissions}\n              deleteShareItem={this.deleteShareItem}\n              onChangeUserPermission={this.onChangeUserPermission}\n            />\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nSysAdminShareToUser.propTypes = propTypes;\n\nexport default SysAdminShareToUser;\n"],"mappings":"wkBAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CAEvC,OAASC,KAAK,CAAEC,OAAO,KAAQ,0BAA0B,CACzD,OAASC,MAAM,KAAQ,YAAY,CACnC,OAASC,UAAU,KAAQ,4BAA4B,CACvD,OAASC,KAAK,KAAQ,sBAAsB,CAC5C,MAAO,CAAAC,OAAO,KAAM,aAAa,CACjC,MAAO,CAAAC,UAAU,KAAM,mBAAmB,CAC1C,MAAO,CAAAC,qBAAqB,KAAM,6CAA6C,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,4BAE1E,CAAAC,QAAQ,uBAAAC,gBAAA,EAAAC,SAAA,CAAAF,QAAA,CAAAC,gBAAA,MAAAE,MAAA,CAAAC,YAAA,CAAAJ,QAAA,EAEZ,SAAAA,SAAYK,KAAK,CAAE,KAAAC,KAAA,CAAAC,eAAA,MAAAP,QAAA,EACjBM,KAAA,CAAAH,MAAA,CAAAK,IAAA,MAAMH,KAAK,EAAEC,KAAA,CAMfG,YAAY,CAAG,UAAM,CACnBH,KAAA,CAAKI,QAAQ,CAAC,CAACC,eAAe,CAAE,IAAI,CAAC,CAAC,CACxC,CAAC,CAAAL,KAAA,CAEDM,YAAY,CAAG,UAAM,CACnBN,KAAA,CAAKI,QAAQ,CAAC,CAACC,eAAe,CAAE,KAAK,CAAC,CAAC,CACzC,CAAC,CAAAL,KAAA,CAEDO,eAAe,CAAG,UAAM,CACtB,GAAI,CAAAC,IAAI,CAAGR,KAAA,CAAKD,KAAK,CAACS,IAAI,CAC1BR,KAAA,CAAKD,KAAK,CAACQ,eAAe,CAACC,IAAI,CAACC,UAAU,CAAC,CAC7C,CAAC,CAAAT,KAAA,CAEDU,sBAAsB,CAAG,SAACC,UAAU,CAAK,CACvC,GAAI,CAAAH,IAAI,CAAGR,KAAA,CAAKD,KAAK,CAACS,IAAI,CAC1BR,KAAA,CAAKD,KAAK,CAACW,sBAAsB,CAACF,IAAI,CAAEG,UAAU,CAAC,CACrD,CAAC,CArBCX,KAAA,CAAKY,KAAK,CAAG,CACXP,eAAe,CAAE,KACnB,CAAC,CAAC,OAAAL,KAAA,CACJ,CAACa,YAAA,CAAAnB,QAAA,GAAAoB,GAAA,UAAAC,KAAA,CAoBD,SAAAC,OAAA,CAAS,CACP,GAAI,CAAAR,IAAI,CAAG,IAAI,CAACT,KAAK,CAACS,IAAI,CAC1B,GAAI,CAAAS,iBAAiB,CAAG/B,KAAK,CAACgC,mBAAmB,CAACV,IAAI,CAAC,CACvD,mBACEf,KAAA,OAAIU,YAAY,CAAE,IAAI,CAACA,YAAa,CAACG,YAAY,CAAE,IAAI,CAACA,YAAa,CAAAa,QAAA,eACnE5B,IAAA,OAAI6B,SAAS,CAAC,MAAM,CAAAD,QAAA,CAAEX,IAAI,CAACa,SAAS,CAAK,CAAC,cAC1C9B,IAAA,OAAA4B,QAAA,cACE5B,IAAA,CAACF,qBAAqB,EACpBiC,MAAM,CAAEd,IAAI,CAACe,OAAQ,CACrBC,UAAU,CAAE,IAAK,CACjBC,SAAS,CAAE,IAAK,CAChBC,cAAc,CAAE,IAAI,CAACd,KAAK,CAACP,eAAgB,CAC3CY,iBAAiB,CAAEA,iBAAkB,CACrCU,WAAW,CAAE,IAAI,CAAC5B,KAAK,CAAC4B,WAAY,CACpCC,mBAAmB,CAAE,IAAI,CAAClB,sBAAuB,CACjDmB,UAAU,CAAE,IAAK,CAClB,CAAC,CACA,CAAC,cACLtC,IAAA,OAAA4B,QAAA,cACE5B,IAAA,SACE6B,SAAS,4BAAAU,MAAA,CAA6B,IAAI,CAAClB,KAAK,CAACP,eAAe,CAAG,EAAE,CAAG,MAAM,CAAG,CACjF0B,OAAO,CAAE,IAAI,CAACxB,eAAgB,CAC9ByB,KAAK,CAAEjD,OAAO,CAAC,QAAQ,CAAE,CAErB,CAAC,CACL,CAAC,EACH,CAAC,CAET,CAAC,WAAAW,QAAA,GAvDoBd,KAAK,CAACqD,SAAS,KAiEhC,CAAAC,QAAQ,uBAAAC,iBAAA,EAAAvC,SAAA,CAAAsC,QAAA,CAAAC,iBAAA,MAAAC,OAAA,CAAAtC,YAAA,CAAAoC,QAAA,WAAAA,SAAA,EAAAjC,eAAA,MAAAiC,QAAA,SAAAE,OAAA,CAAAC,KAAA,MAAAC,SAAA,GAAAzB,YAAA,CAAAqB,QAAA,GAAApB,GAAA,UAAAC,KAAA,CAEZ,SAAAC,OAAA,CAAS,KAAAuB,MAAA,MACP,GAAI,CAAAC,KAAK,CAAG,IAAI,CAACzC,KAAK,CAACyC,KAAK,CAC5B,mBACEjD,IAAA,UAAA4B,QAAA,CACGqB,KAAK,CAACC,GAAG,CAAC,SAACjC,IAAI,CAAEkC,KAAK,CAAK,CAC1B,mBACEnD,IAAA,CAACG,QAAQ,EAEPc,IAAI,CAAEA,IAAK,CACXmB,WAAW,CAAEY,MAAI,CAACxC,KAAK,CAAC4B,WAAY,CACpCpB,eAAe,CAAEgC,MAAI,CAACxC,KAAK,CAACQ,eAAgB,CAC5CG,sBAAsB,CAAE6B,MAAI,CAACxC,KAAK,CAACW,sBAAuB,EAJrDgC,KAKN,CAAC,CAEN,CAAC,CAAC,CACG,CAAC,CAEZ,CAAC,WAAAR,QAAA,GAnBoBtD,KAAK,CAACqD,SAAS,KAoChC,CAAAU,mBAAmB,uBAAAC,iBAAA,EAAAhD,SAAA,CAAA+C,mBAAA,CAAAC,iBAAA,MAAAC,OAAA,CAAA/C,YAAA,CAAA6C,mBAAA,EAEvB,SAAAA,oBAAY5C,KAAK,CAAE,KAAA+C,MAAA,CAAA7C,eAAA,MAAA0C,mBAAA,EACjBG,MAAA,CAAAD,OAAA,CAAA3C,IAAA,MAAMH,KAAK,EAAE+C,MAAA,CAcfC,kBAAkB,CAAG,SAACC,MAAM,CAAK,CAC/BF,MAAA,CAAK1C,QAAQ,CAAC,CAAC6C,cAAc,CAAED,MAAM,CAAC,CAAC,CACvCF,MAAA,CAAKI,OAAO,CAAG,EAAE,CACnB,CAAC,CAAAJ,MAAA,CAcDK,aAAa,CAAG,SAACxC,UAAU,CAAK,CAC9BmC,MAAA,CAAK1C,QAAQ,CAAC,CAACO,UAAU,CAAEA,UAAU,CAAC,CAAC,CACzC,CAAC,CAAAmC,MAAA,CAEDM,WAAW,CAAG,UAAM,CAClB,GAAI,CAAAC,KAAK,CAAG,EAAE,CACd,GAAI,CAAA/B,MAAM,CAAGwB,MAAA,CAAK/C,KAAK,CAACuB,MAAM,CAC9B,GAAIwB,MAAA,CAAKlC,KAAK,CAACqC,cAAc,EAAIH,MAAA,CAAKlC,KAAK,CAACqC,cAAc,CAACK,MAAM,CAAG,CAAC,CAAG,CACtE,IAAK,GAAI,CAAAC,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGT,MAAA,CAAKlC,KAAK,CAACqC,cAAc,CAACK,MAAM,CAAEC,CAAC,EAAG,CAAE,CAC1DF,KAAK,CAACE,CAAC,CAAC,CAAGT,MAAA,CAAKlC,KAAK,CAACqC,cAAc,CAACM,CAAC,CAAC,CAACC,KAAK,CAC/C,CACF,CACAvE,UAAU,CAACwE,yBAAyB,CAACnC,MAAM,CAAE,MAAM,CAAG+B,KAAK,CAAEP,MAAA,CAAKlC,KAAK,CAACD,UAAU,CAAC,CAAC+C,IAAI,CAAC,SAAAC,GAAG,CAAI,CAC9F,GAAI,CAAAC,QAAQ,CAAG,EAAE,CACjB,GAAID,GAAG,CAACE,IAAI,CAACC,MAAM,CAACR,MAAM,CAAG,CAAC,CAAE,CAC9B,IAAK,GAAI,CAAAC,EAAC,CAAG,CAAC,CAAGA,EAAC,CAAGI,GAAG,CAACE,IAAI,CAACC,MAAM,CAACR,MAAM,CAAGC,EAAC,EAAE,CAAE,CACjDK,QAAQ,CAACL,EAAC,CAAC,CAAGI,GAAG,CAACE,IAAI,CAACC,MAAM,CAACP,EAAC,CAAC,CAClC,CACF,CACA,GAAI,CAAAQ,QAAQ,CAAGJ,GAAG,CAACE,IAAI,CAACG,OAAO,CAC/BlB,MAAA,CAAK1C,QAAQ,CAAC,CACZwD,QAAQ,CAAEA,QAAQ,CAClBK,WAAW,CAAEnB,MAAA,CAAKlC,KAAK,CAACqD,WAAW,CAACnC,MAAM,CAACiC,QAAQ,CAAC,CACpDd,cAAc,CAAE,IAAI,CACpBtC,UAAU,CAAE,IACd,CAAC,CAAC,CACFmC,MAAA,CAAKoB,IAAI,CAACC,UAAU,CAACC,WAAW,CAAC,CAAC,CACpC,CAAC,CAAC,CAACC,KAAK,CAAC,SAAAC,KAAK,CAAI,CAChB,GAAIA,KAAK,CAACC,QAAQ,CAAE,CAClB,GAAI,CAAAC,OAAO,CAAGzF,OAAO,CAAC,qCAAqC,CAAC,CAC5D,GAAI,CAAA0F,UAAU,CAAG,EAAE,CACnBA,UAAU,CAACC,IAAI,CAACF,OAAO,CAAC,CACxB1B,MAAA,CAAK1C,QAAQ,CAAC,CACZwD,QAAQ,CAAEa,UAAU,CACpBxB,cAAc,CAAE,IAClB,CAAC,CAAC,CACJ,CACF,CAAC,CAAC,CACJ,CAAC,CAAAH,MAAA,CAEDvC,eAAe,CAAG,SAACoE,SAAS,CAAK,CAC/B,GAAI,CAAArD,MAAM,CAAGwB,MAAA,CAAK/C,KAAK,CAACuB,MAAM,CAC9BrC,UAAU,CAAC2F,4BAA4B,CAACtD,MAAM,CAAE,MAAM,CAAEqD,SAAS,CAAC,CAACjB,IAAI,CAAC,SAAAC,GAAG,CAAI,CAC7Eb,MAAA,CAAK1C,QAAQ,CAAC,CACZ6D,WAAW,CAAEnB,MAAA,CAAKlC,KAAK,CAACqD,WAAW,CAACY,MAAM,CAAE,SAAArE,IAAI,CAAI,CAAE,MAAO,CAAAA,IAAI,CAACC,UAAU,GAAKkE,SAAS,CAAE,CAAC,CAC/F,CAAC,CAAC,CACJ,CAAC,CAAC,CAACN,KAAK,CAAC,SAAAC,KAAK,CAAI,CAChB,GAAI,CAAAG,UAAU,CAAGvF,KAAK,CAAC4F,WAAW,CAACR,KAAK,CAAC,CACzCnF,OAAO,CAAC4F,MAAM,CAACN,UAAU,CAAC,CAC5B,CAAC,CAAC,CACJ,CAAC,CAAA3B,MAAA,CAEDpC,sBAAsB,CAAG,SAACF,IAAI,CAAEG,UAAU,CAAK,CAC7C,GAAI,CAAAW,MAAM,CAAGwB,MAAA,CAAK/C,KAAK,CAACuB,MAAM,CAC9B,GAAI,CAAA0D,SAAS,CAAGxE,IAAI,CAACC,UAAU,CAC/BxB,UAAU,CAACgG,sCAAsC,CAAC3D,MAAM,CAAE,MAAM,CAAE0D,SAAS,CAAErE,UAAU,CAAC,CAAC+C,IAAI,CAAC,UAAM,CAClGZ,MAAA,CAAKoC,iBAAiB,CAAC1E,IAAI,CAAEG,UAAU,CAAC,CAC1C,CAAC,CAAC,CAAC0D,KAAK,CAAC,SAAAC,KAAK,CAAI,CAChB,GAAI,CAAAG,UAAU,CAAGvF,KAAK,CAAC4F,WAAW,CAACR,KAAK,CAAC,CACzCnF,OAAO,CAAC4F,MAAM,CAACN,UAAU,CAAC,CAC5B,CAAC,CAAC,CACJ,CAAC,CAAA3B,MAAA,CAEDoC,iBAAiB,CAAG,SAAC1E,IAAI,CAAEG,UAAU,CAAK,CACxC,GAAI,CAAAwE,QAAQ,CAAG3E,IAAI,CAACa,SAAS,CAC7B,GAAI,CAAA4C,WAAW,CAAGnB,MAAA,CAAKlC,KAAK,CAACqD,WAAW,CAACxB,GAAG,CAAC,SAAA2C,UAAU,CAAI,CACzD,GAAI,CAAAC,kBAAkB,CAAGD,UAAU,CAAC/D,SAAS,CAC7C,GAAI8D,QAAQ,GAAKE,kBAAkB,CAAE,CACnCD,UAAU,CAACzE,UAAU,CAAGA,UAAU,CAClCyE,UAAU,CAACE,QAAQ,CAAG3E,UAAU,GAAK,OAAO,CAAG,IAAI,CAAG,KAAK,CAC7D,CACA,MAAO,CAAAyE,UAAU,CACnB,CAAC,CAAC,CACFtC,MAAA,CAAK1C,QAAQ,CAAC,CAAC6D,WAAW,CAAEA,WAAW,CAAC,CAAC,CAC3C,CAAC,CAxGCnB,MAAA,CAAKlC,KAAK,CAAG,CACXqC,cAAc,CAAE,IAAI,CACpBW,QAAQ,CAAE,EAAE,CACZjD,UAAU,CAAE,IAAI,CAChBsD,WAAW,CAAE,EACf,CAAC,CACDnB,MAAA,CAAKI,OAAO,CAAG,EAAE,CACjBJ,MAAA,CAAKnB,WAAW,CAAG,CAAC,IAAI,CAAE,GAAG,CAAC,CAC9B,GAAI7C,KAAK,CAAE,CACTgE,MAAA,CAAKnB,WAAW,CAAC+C,IAAI,CAAC,OAAO,CAAE,YAAY,CAAE,SAAS,CAAC,CACzD,CAAC,OAAA5B,MAAA,CACH,CAACjC,YAAA,CAAA8B,mBAAA,GAAA7B,GAAA,qBAAAC,KAAA,CAOD,SAAAwE,kBAAA,CAAoB,KAAAC,MAAA,MAClB,GAAI,CAAAlE,MAAM,CAAG,IAAI,CAACvB,KAAK,CAACuB,MAAM,CAC9BrC,UAAU,CAACwG,2BAA2B,CAACnE,MAAM,CAAE,MAAM,CAAC,CAACoC,IAAI,CAAC,SAACC,GAAG,CAAK,CACnE,GAAGA,GAAG,CAACE,IAAI,CAACP,MAAM,GAAK,CAAC,CAAE,CACxBkC,MAAI,CAACpF,QAAQ,CAAC,CAAC6D,WAAW,CAAEN,GAAG,CAACE,IAAI,CAAC,CAAC,CACxC,CACF,CAAC,CAAC,CAACQ,KAAK,CAAC,SAAAC,KAAK,CAAI,CAChB,GAAI,CAAAG,UAAU,CAAGvF,KAAK,CAAC4F,WAAW,CAACR,KAAK,CAAC,CACzCnF,OAAO,CAAC4F,MAAM,CAACN,UAAU,CAAC,CAC5B,CAAC,CAAC,CACJ,CAAC,GAAA3D,GAAA,UAAAC,KAAA,CA8ED,SAAAC,OAAA,CAAS,CACP,GAAM,CAAAiD,WAAW,CAAK,IAAI,CAACrD,KAAK,CAA1BqD,WAAW,CACjB,mBACExE,KAAA,CAACZ,QAAQ,EAAAsC,QAAA,eACP1B,KAAA,UAAA0B,QAAA,eACE5B,IAAA,UAAA4B,QAAA,cACE1B,KAAA,OAAA0B,QAAA,eACE5B,IAAA,OAAImG,KAAK,CAAC,KAAK,CAAAvE,QAAA,CAAEpC,OAAO,CAAC,MAAM,CAAC,CAAK,CAAC,cACtCQ,IAAA,OAAImG,KAAK,CAAC,KAAK,CAAAvE,QAAA,CAAEpC,OAAO,CAAC,YAAY,CAAC,CAAK,CAAC,cAC5CQ,IAAA,OAAImG,KAAK,CAAC,KAAK,CAAK,CAAC,EACnB,CAAC,CACA,CAAC,cACRjG,KAAA,UAAA0B,QAAA,eACE1B,KAAA,OAAA0B,QAAA,eACE5B,IAAA,OAAA4B,QAAA,cACE5B,IAAA,CAACH,UAAU,EACTuG,GAAG,CAAC,YAAY,CAChBC,OAAO,CAAE,IAAK,CACdxE,SAAS,CAAC,iBAAiB,CAC3ByE,WAAW,CAAE9G,OAAO,CAAC,cAAc,CAAE,CACrC+G,cAAc,CAAE,IAAI,CAAC/C,kBAAmB,CACzC,CAAC,CACA,CAAC,cACLxD,IAAA,OAAA4B,QAAA,cACE5B,IAAA,CAACF,qBAAqB,EACpBiC,MAAM,CAAE,IAAI,CAACvB,KAAK,CAACuB,MAAO,CAC1BE,UAAU,CAAE,KAAM,CAClBE,cAAc,CAAE,KAAM,CACtBT,iBAAiB,CAAE,IAAI,CAACL,KAAK,CAACD,UAAW,CACzCgB,WAAW,CAAE,IAAI,CAACA,WAAY,CAC9BC,mBAAmB,CAAE,IAAI,CAACuB,aAAc,CACxCtB,UAAU,CAAE,IAAK,CAClB,CAAC,CACA,CAAC,cACLtC,IAAA,OAAA4B,QAAA,cACE5B,IAAA,CAACP,MAAM,EAAC+C,OAAO,CAAE,IAAI,CAACqB,WAAY,CAAAjC,QAAA,CAAEpC,OAAO,CAAC,QAAQ,CAAC,CAAS,CAAC,CAC7D,CAAC,EACH,CAAC,CACJ,IAAI,CAAC6B,KAAK,CAACgD,QAAQ,CAACN,MAAM,CAAG,CAAC,EAC7B,IAAI,CAAC1C,KAAK,CAACgD,QAAQ,CAACnB,GAAG,CAAC,SAACjC,IAAI,CAAEkC,KAAK,CAAK,CACvC,GAAI,CAAA+B,UAAU,CAAG,EAAE,CACnB,GAAIjE,IAAI,CAACgD,KAAK,CAAE,CACdiB,UAAU,CAAGjE,IAAI,CAACgD,KAAK,CAAG,IAAI,CAAGhD,IAAI,CAACuF,SAAS,CACjD,CAAC,IAAM,CACLtB,UAAU,CAAGjE,IAAI,CACnB,CACA,mBACEjB,IAAA,OAAA4B,QAAA,cACE5B,IAAA,OAAIyG,OAAO,CAAE,CAAE,CAAA7E,QAAA,cAAC5B,IAAA,MAAG6B,SAAS,CAAC,OAAO,CAAAD,QAAA,CAAEsD,UAAU,CAAI,CAAC,CAAI,CAAC,EADnD/B,KAEL,CAAC,CAET,CAAC,CAAC,EAEC,CAAC,EACH,CAAC,cACRnD,IAAA,QAAK6B,SAAS,CAAC,sBAAsB,CAAAD,QAAA,cACnC1B,KAAA,UAAO2B,SAAS,CAAC,oBAAoB,CAAAD,QAAA,eACnC5B,IAAA,UAAA4B,QAAA,cACE1B,KAAA,OAAA0B,QAAA,eACE5B,IAAA,OAAImG,KAAK,CAAC,KAAK,CAAAvE,QAAA,CAAEpC,OAAO,CAAC,MAAM,CAAC,CAAK,CAAC,cACtCQ,IAAA,OAAImG,KAAK,CAAC,KAAK,CAAAvE,QAAA,CAAEpC,OAAO,CAAC,YAAY,CAAC,CAAK,CAAC,cAC5CQ,IAAA,OAAImG,KAAK,CAAC,KAAK,CAAK,CAAC,EACnB,CAAC,CACA,CAAC,cACRnG,IAAA,CAAC2C,QAAQ,EACPM,KAAK,CAAEyB,WAAY,CACnBtC,WAAW,CAAE,IAAI,CAACA,WAAY,CAC9BpB,eAAe,CAAE,IAAI,CAACA,eAAgB,CACtCG,sBAAsB,CAAE,IAAI,CAACA,sBAAuB,CACrD,CAAC,EACG,CAAC,CACL,CAAC,EACE,CAAC,CAEf,CAAC,WAAAiC,mBAAA,GAxL+B/D,KAAK,CAACqD,SAAS,EA6LjD,cAAe,CAAAU,mBAAmB"},"metadata":{},"sourceType":"module","externalDependencies":[]}