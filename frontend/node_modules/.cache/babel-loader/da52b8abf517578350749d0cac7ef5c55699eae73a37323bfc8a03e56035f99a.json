{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Fragment}from'react';import{DropdownToggle,Dropdown,DropdownMenu,DropdownItem}from'reactstrap';import{gettext,siteRoot}from'../../utils/constants';import{Utils}from'../../utils/utils';import ModalPotal from'../modal-portal';import ShareDialog from'../dialog/share-dialog';import EditFileTagDialog from'../dialog/edit-filetag-dialog';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ViewFileToolbar=/*#__PURE__*/function(_React$Component){_inherits(ViewFileToolbar,_React$Component);var _super=_createSuper(ViewFileToolbar);function ViewFileToolbar(props){var _this;_classCallCheck(this,ViewFileToolbar);_this=_super.call(this,props);_this.onEditClick=function(e){e.preventDefault();var _this$props=_this.props,path=_this$props.path,repoID=_this$props.repoID;var url=siteRoot+'lib/'+repoID+'/file'+Utils.encodePath(path)+'?mode=edit';window.open(url);};_this.toggleMore=function(){_this.setState({isMoreMenuShow:!_this.state.isMoreMenuShow});};_this.onShareToggle=function(){_this.setState({isShareDialogShow:!_this.state.isShareDialogShow});};_this.onEditFileTagToggle=function(){_this.setState({isEditTagDialogShow:!_this.state.isEditTagDialogShow});};_this.onHistoryClick=function(){var historyUrl=siteRoot+'repo/file_revisions/'+_this.props.repoID+'/?p='+Utils.encodePath(_this.props.path);location.href=historyUrl;};_this.state={isMoreMenuShow:false,isShareDialogShow:false,isEditTagDialogShow:false};return _this;}_createClass(ViewFileToolbar,[{key:\"render\",value:function render(){var filePermission=this.props.filePermission;return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dir-operation\",children:[(filePermission==='rw'||filePermission==='cloud-edit')&&/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary operation-item\",title:gettext('Edit File'),onClick:this.onEditClick,children:gettext('Edit')})}),filePermission==='rw'&&/*#__PURE__*/_jsxs(Dropdown,{isOpen:this.state.isMoreMenuShow,toggle:this.toggleMore,children:[/*#__PURE__*/_jsx(DropdownToggle,{className:\"btn btn-secondary operation-item\",children:gettext('More')}),/*#__PURE__*/_jsxs(DropdownMenu,{children:[this.props.showShareBtn&&/*#__PURE__*/_jsx(DropdownItem,{onClick:this.onShareToggle,children:gettext('Share')}),/*#__PURE__*/_jsx(DropdownItem,{onClick:this.onEditFileTagToggle,children:gettext('Tags')}),/*#__PURE__*/_jsx(DropdownItem,{onClick:this.onHistoryClick,children:gettext('History')})]})]})]}),this.state.isShareDialogShow&&/*#__PURE__*/_jsx(ModalPotal,{children:/*#__PURE__*/_jsx(ShareDialog,{itemType:'file',itemName:Utils.getFileName(this.props.path),itemPath:this.props.path,repoID:this.props.repoID,repoEncrypted:this.props.repoEncrypted,enableDirPrivateShare:this.props.enableDirPrivateShare,userPerm:this.props.userPerm,isGroupOwnedRepo:this.props.isGroupOwnedRepo,toggleDialog:this.onShareToggle})}),this.state.isEditTagDialogShow&&/*#__PURE__*/_jsx(ModalPotal,{children:/*#__PURE__*/_jsx(EditFileTagDialog,{filePath:this.props.path,repoID:this.props.repoID,repoTags:this.props.repoTags,fileTagList:this.props.fileTags,toggleCancel:this.onEditFileTagToggle,onFileTagChanged:this.props.onFileTagChanged})})]});}}]);return ViewFileToolbar;}(React.Component);export default ViewFileToolbar;","map":{"version":3,"names":["React","Fragment","DropdownToggle","Dropdown","DropdownMenu","DropdownItem","gettext","siteRoot","Utils","ModalPotal","ShareDialog","EditFileTagDialog","jsx","_jsx","jsxs","_jsxs","ViewFileToolbar","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","onEditClick","e","preventDefault","_this$props","path","repoID","url","encodePath","window","open","toggleMore","setState","isMoreMenuShow","state","onShareToggle","isShareDialogShow","onEditFileTagToggle","isEditTagDialogShow","onHistoryClick","historyUrl","location","href","_createClass","key","value","render","filePermission","children","className","title","onClick","isOpen","toggle","showShareBtn","itemType","itemName","getFileName","itemPath","repoEncrypted","enableDirPrivateShare","userPerm","isGroupOwnedRepo","toggleDialog","filePath","repoTags","fileTagList","fileTags","toggleCancel","onFileTagChanged","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toolbar/view-file-toolbar.js"],"sourcesContent":["import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { DropdownToggle, Dropdown, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport ModalPotal from '../modal-portal';\nimport ShareDialog from '../dialog/share-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoTags: PropTypes.array.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  fileTags: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n  dirent: PropTypes.object,\n};\n\nclass ViewFileToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMoreMenuShow: false,\n      isShareDialogShow: false,\n      isEditTagDialogShow: false,\n    };\n  }\n\n  onEditClick = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path) + '?mode=edit';\n    window.open(url);\n  };\n\n  toggleMore = () => {\n    this.setState({isMoreMenuShow: !this.state.isMoreMenuShow});\n  };\n\n  onShareToggle = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  };\n\n  onEditFileTagToggle = () => {\n    this.setState({isEditTagDialogShow: !this.state.isEditTagDialogShow});\n  };\n\n  onHistoryClick = () => {\n    let historyUrl = siteRoot + 'repo/file_revisions/' + this.props.repoID + '/?p=' + Utils.encodePath(this.props.path);\n    location.href = historyUrl;\n  };\n\n  render() {\n    let { filePermission } = this.props;\n    return (\n      <Fragment>\n        <div className=\"dir-operation\">\n          {(filePermission === 'rw' || filePermission === 'cloud-edit') && (\n            <Fragment>\n              <button className=\"btn btn-secondary operation-item\" title={gettext('Edit File')} onClick={this.onEditClick}>{gettext('Edit')}</button>\n            </Fragment>\n          )}\n          {filePermission === 'rw' && (\n            <Dropdown isOpen={this.state.isMoreMenuShow} toggle={this.toggleMore}>\n              <DropdownToggle className='btn btn-secondary operation-item'>\n                {gettext('More')}\n              </DropdownToggle>\n              <DropdownMenu>\n                {this.props.showShareBtn &&\n                  <DropdownItem onClick={this.onShareToggle}>{gettext('Share')}</DropdownItem>\n                }\n                <DropdownItem onClick={this.onEditFileTagToggle}>{gettext('Tags')}</DropdownItem>\n                <DropdownItem onClick={this.onHistoryClick}>{gettext('History')}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n          )}\n        </div>\n        {this.state.isShareDialogShow && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'file'}\n              itemName={Utils.getFileName(this.props.path)}\n              itemPath={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.onShareToggle}\n            />\n          </ModalPotal>\n        )}\n        {this.state.isEditTagDialogShow && (\n          <ModalPotal>\n            <EditFileTagDialog\n              filePath={this.props.path}\n              repoID={this.props.repoID}\n              repoTags={this.props.repoTags}\n              fileTagList={this.props.fileTags}\n              toggleCancel={this.onEditFileTagToggle}\n              onFileTagChanged={this.props.onFileTagChanged}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nViewFileToolbar.propTypes = propTypes;\n\nexport default ViewFileToolbar;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}