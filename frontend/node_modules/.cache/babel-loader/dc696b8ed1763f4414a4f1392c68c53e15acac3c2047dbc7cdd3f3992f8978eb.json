{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _reactI18next = require(\"react-i18next\");\nvar _tableOperations = require(\"../table-operations\");\nvar _constants = require(\"../../../../constants\");\nvar _insertTableElement = _interopRequireDefault(require(\"./insert-table-element\"));\nvar _constant = require(\"../constant\");\nrequire(\"./style.css\");\nvar ContextMenu = function ContextMenu(_ref) {\n  var element = _ref.element,\n    position = _ref.position,\n    editor = _ref.editor,\n    handleCloseContextMenu = _ref.handleCloseContextMenu;\n  var _ref2 = (0, _react.useState)({}),\n    _ref3 = _slicedToArray(_ref2, 2),\n    contextMenuStyle = _ref3[0],\n    setContextMenuStyle = _ref3[1];\n  var contextMenuRef = (0, _react.useRef)(null);\n  var _ref4 = (0, _reactI18next.useTranslation)(_constants.TRANSLATE_NAMESPACE),\n    t = _ref4.t;\n  var currentRowsCount = (0, _react.useMemo)(function () {\n    var rows = element.children;\n    return rows.length;\n  }, [element.children]);\n  var currentColumnsCount = (0, _react.useMemo)(function () {\n    var rows = element.children;\n    var cols = rows[0].children;\n    return cols.length;\n  }, [element.children]);\n  (0, _react.useLayoutEffect)(function () {\n    var top = position.top,\n      left = position.left;\n    setContextMenuStyle({\n      top: top,\n      left: left,\n      zIndex: '1071',\n      display: 'block'\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [position]);\n  var handleClickOperationBtn = function handleClickOperationBtn(callback) {\n    for (var _len = arguments.length, arg = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      arg[_key - 1] = arguments[_key];\n    }\n    callback && callback.apply(void 0, [editor].concat(arg));\n    handleCloseContextMenu();\n  };\n  var _insertTableChildren = function _insertTableChildren(type, position, count) {\n    (0, _tableOperations.insertTableElement)(editor, type, position, count);\n    handleCloseContextMenu();\n  };\n  return /*#__PURE__*/_react.default.createElement(\"div\", {\n    contentEditable: false,\n    style: contextMenuStyle,\n    ref: contextMenuRef,\n    className: \"sf-context-menu-wrapper\"\n  }, /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"sf-context-menu sf-dropdown-list\"\n  }, /*#__PURE__*/_react.default.createElement(_insertTableElement.default, {\n    type: _constant.TABLE_ELEMENT.ROW,\n    count: 1,\n    currentCount: currentRowsCount,\n    position: _constant.TABLE_ELEMENT_POSITION.BEFORE,\n    insertTableElement: _insertTableChildren\n  }), /*#__PURE__*/_react.default.createElement(_insertTableElement.default, {\n    type: _constant.TABLE_ELEMENT.ROW,\n    count: 1,\n    currentCount: currentRowsCount,\n    position: _constant.TABLE_ELEMENT_POSITION.AFTER,\n    insertTableElement: _insertTableChildren\n  }), /*#__PURE__*/_react.default.createElement(_insertTableElement.default, {\n    type: _constant.TABLE_ELEMENT.COLUMN,\n    count: 1,\n    currentCount: currentColumnsCount,\n    position: _constant.TABLE_ELEMENT_POSITION.BEFORE,\n    insertTableElement: _insertTableChildren\n  }), /*#__PURE__*/_react.default.createElement(_insertTableElement.default, {\n    type: _constant.TABLE_ELEMENT.COLUMN,\n    count: 1,\n    currentCount: currentColumnsCount,\n    position: _constant.TABLE_ELEMENT_POSITION.AFTER,\n    insertTableElement: _insertTableChildren\n  }), /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: 'sf-divider dropdown-divider'\n  }), /*#__PURE__*/_react.default.createElement(\"button\", {\n    onMouseDown: function onMouseDown() {\n      return handleClickOperationBtn(_tableOperations.removeRow);\n    },\n    className: 'sf-context-menu-item sf-dropdown-menu-item'\n  }, t('Delete_row')), /*#__PURE__*/_react.default.createElement(\"button\", {\n    onMouseDown: function onMouseDown() {\n      return handleClickOperationBtn(_tableOperations.removeColumn);\n    },\n    className: 'sf-context-menu-item sf-dropdown-menu-item'\n  }, t('Delete_column')), /*#__PURE__*/_react.default.createElement(\"button\", {\n    onMouseDown: function onMouseDown() {\n      return handleClickOperationBtn(_tableOperations.removeTable);\n    },\n    className: 'sf-context-menu-item sf-dropdown-menu-item'\n  }, t('Delete_table'))));\n};\nvar _default = exports.default = ContextMenu;","map":{"version":3,"names":["_slicedToArray","require","default","_interopRequireDefault","_interopRequireWildcard","Object","defineProperty","exports","value","_react","_reactI18next","_tableOperations","_constants","_insertTableElement","_constant","ContextMenu","_ref","element","position","editor","handleCloseContextMenu","_ref2","useState","_ref3","contextMenuStyle","setContextMenuStyle","contextMenuRef","useRef","_ref4","useTranslation","TRANSLATE_NAMESPACE","t","currentRowsCount","useMemo","rows","children","length","currentColumnsCount","cols","useLayoutEffect","top","left","zIndex","display","handleClickOperationBtn","callback","_len","arguments","arg","Array","_key","apply","concat","_insertTableChildren","type","count","insertTableElement","createElement","contentEditable","style","ref","className","TABLE_ELEMENT","ROW","currentCount","TABLE_ELEMENT_POSITION","BEFORE","AFTER","COLUMN","onMouseDown","removeRow","removeColumn","removeTable","_default"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/extension/plugins/table/context-menu/index.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _reactI18next = require(\"react-i18next\");\nvar _tableOperations = require(\"../table-operations\");\nvar _constants = require(\"../../../../constants\");\nvar _insertTableElement = _interopRequireDefault(require(\"./insert-table-element\"));\nvar _constant = require(\"../constant\");\nrequire(\"./style.css\");\nconst ContextMenu = _ref => {\n  let {\n    element,\n    position,\n    editor,\n    handleCloseContextMenu\n  } = _ref;\n  const [contextMenuStyle, setContextMenuStyle] = (0, _react.useState)({});\n  const contextMenuRef = (0, _react.useRef)(null);\n  const {\n    t\n  } = (0, _reactI18next.useTranslation)(_constants.TRANSLATE_NAMESPACE);\n  const currentRowsCount = (0, _react.useMemo)(() => {\n    const rows = element.children;\n    return rows.length;\n  }, [element.children]);\n  const currentColumnsCount = (0, _react.useMemo)(() => {\n    const rows = element.children;\n    const cols = rows[0].children;\n    return cols.length;\n  }, [element.children]);\n  (0, _react.useLayoutEffect)(() => {\n    const {\n      top,\n      left\n    } = position;\n    setContextMenuStyle({\n      top,\n      left,\n      zIndex: '1071',\n      display: 'block'\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [position]);\n  const handleClickOperationBtn = function (callback) {\n    for (var _len = arguments.length, arg = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      arg[_key - 1] = arguments[_key];\n    }\n    callback && callback(editor, ...arg);\n    handleCloseContextMenu();\n  };\n  const _insertTableChildren = (type, position, count) => {\n    (0, _tableOperations.insertTableElement)(editor, type, position, count);\n    handleCloseContextMenu();\n  };\n  return /*#__PURE__*/_react.default.createElement(\"div\", {\n    contentEditable: false,\n    style: contextMenuStyle,\n    ref: contextMenuRef,\n    className: \"sf-context-menu-wrapper\"\n  }, /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"sf-context-menu sf-dropdown-list\"\n  }, /*#__PURE__*/_react.default.createElement(_insertTableElement.default, {\n    type: _constant.TABLE_ELEMENT.ROW,\n    count: 1,\n    currentCount: currentRowsCount,\n    position: _constant.TABLE_ELEMENT_POSITION.BEFORE,\n    insertTableElement: _insertTableChildren\n  }), /*#__PURE__*/_react.default.createElement(_insertTableElement.default, {\n    type: _constant.TABLE_ELEMENT.ROW,\n    count: 1,\n    currentCount: currentRowsCount,\n    position: _constant.TABLE_ELEMENT_POSITION.AFTER,\n    insertTableElement: _insertTableChildren\n  }), /*#__PURE__*/_react.default.createElement(_insertTableElement.default, {\n    type: _constant.TABLE_ELEMENT.COLUMN,\n    count: 1,\n    currentCount: currentColumnsCount,\n    position: _constant.TABLE_ELEMENT_POSITION.BEFORE,\n    insertTableElement: _insertTableChildren\n  }), /*#__PURE__*/_react.default.createElement(_insertTableElement.default, {\n    type: _constant.TABLE_ELEMENT.COLUMN,\n    count: 1,\n    currentCount: currentColumnsCount,\n    position: _constant.TABLE_ELEMENT_POSITION.AFTER,\n    insertTableElement: _insertTableChildren\n  }), /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: 'sf-divider dropdown-divider'\n  }), /*#__PURE__*/_react.default.createElement(\"button\", {\n    onMouseDown: () => handleClickOperationBtn(_tableOperations.removeRow),\n    className: 'sf-context-menu-item sf-dropdown-menu-item'\n  }, t('Delete_row')), /*#__PURE__*/_react.default.createElement(\"button\", {\n    onMouseDown: () => handleClickOperationBtn(_tableOperations.removeColumn),\n    className: 'sf-context-menu-item sf-dropdown-menu-item'\n  }, t('Delete_column')), /*#__PURE__*/_react.default.createElement(\"button\", {\n    onMouseDown: () => handleClickOperationBtn(_tableOperations.removeTable),\n    className: 'sf-context-menu-item sf-dropdown-menu-item'\n  }, t('Delete_table'))));\n};\nvar _default = exports.default = ContextMenu;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}