{"ast":null,"code":"import _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useCallback, useRef, useState } from 'react';\nimport classnames from 'classnames';\nimport { useTranslation } from 'react-i18next';\nimport { UncontrolledPopover } from 'reactstrap';\nimport TableTemplate from '../table-template';\nimport './index.css';\nvar TableSizePopover = function TableSizePopover(_ref) {\n  var editor = _ref.editor,\n    target = _ref.target,\n    _ref$trigger = _ref.trigger,\n    trigger = _ref$trigger === void 0 ? 'legacy' : _ref$trigger,\n    _ref$placement = _ref.placement,\n    placement = _ref$placement === void 0 ? 'bottom-start' : _ref$placement,\n    popperClassName = _ref.popperClassName,\n    createTable = _ref.createTable;\n  var minSize = [5, 10];\n  var maxSize = [10, 10];\n  var _useState = useState([5, 10]),\n    _useState2 = _slicedToArray(_useState, 2),\n    displaySize = _useState2[0],\n    setDisplaySize = _useState2[1];\n  var _useState3 = useState([1, 1]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    selectedSize = _useState4[0],\n    setSelectedSize = _useState4[1];\n  var ref = useRef(null);\n  var _onMouseEnter = useCallback(function (event) {\n    var cellPosition = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [1, 1];\n    var newDisplaySize = displaySize.slice(0);\n    var cellPositionX = cellPosition[0];\n    var cellPositionY = cellPosition[1];\n    newDisplaySize[0] = cellPositionX < minSize[0] ? minSize[0] : cellPositionX + 1;\n    newDisplaySize[1] = cellPositionY < minSize[1] ? minSize[1] : cellPositionY + 1;\n    if (newDisplaySize[0] > maxSize[0]) {\n      newDisplaySize[0] = maxSize[0];\n    }\n    if (newDisplaySize[1] > maxSize[1]) {\n      newDisplaySize[1] = maxSize[1];\n    }\n    setDisplaySize(newDisplaySize);\n    setSelectedSize(cellPosition);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [displaySize, selectedSize, maxSize, minSize]);\n  var onCreateTable = useCallback(function () {\n    createTable(selectedSize);\n    ref && ref.current && ref.current.toggle();\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedSize, ref]);\n  var renderTableSize = useCallback(function () {\n    var tableSize = [];\n    var _loop = function _loop(i) {\n      var children = [];\n      var _loop2 = function _loop2(j) {\n        var isSelectedChild = i <= selectedSize[0] && selectedSize[0] !== 0 && j <= selectedSize[1] && selectedSize[1] !== 0;\n        var child = /*#__PURE__*/React.createElement(\"div\", {\n          key: \"sdoc-table-size-cell-\".concat(i, \"-\").concat(j),\n          className: classnames('sdoc-table-size-cell', {\n            'active': isSelectedChild\n          }),\n          onClick: onCreateTable,\n          onMouseEnter: function onMouseEnter(event) {\n            return _onMouseEnter(event, [i, j]);\n          }\n        });\n        children.push(child);\n      };\n      for (var j = 1; j <= displaySize[1]; j++) {\n        _loop2(j);\n      }\n      tableSize.push( /*#__PURE__*/React.createElement(\"div\", {\n        key: \"sdoc-table-size-row-\".concat(i),\n        className: \"sdoc-table-size-row d-flex\"\n      }, children));\n    };\n    for (var i = 1; i <= displaySize[0]; i++) {\n      _loop(i);\n    }\n    return tableSize;\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [displaySize, selectedSize]);\n  return /*#__PURE__*/React.createElement(UncontrolledPopover, {\n    target: target,\n    className: \"sdoc-selected-table-size-popover sdoc-sub-dropdown-menu sdoc-dropdown-menu\",\n    trigger: trigger,\n    placement: placement,\n    hideArrow: true,\n    fade: false,\n    ref: ref,\n    popperClassName: popperClassName\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-selected-table-size-container w-100 h-100 d-flex flex-column\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-selected-table-tools-container\"\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    id: \"sdoc-table-template-review-btn\",\n    text: \"Table_template\",\n    iconClassname: \"sdocfont sdoc-right-slide sdoc-dropdown-item-right-icon\"\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-table-size-select\"\n  }, renderTableSize()), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-selected-table-size-tip w-100 \"\n  }, \"\".concat(selectedSize[0], \" x \").concat(selectedSize[1])), /*#__PURE__*/React.createElement(TableTemplate, {\n    editor: editor,\n    targetId: \"sdoc-table-template-review-btn\"\n  })));\n};\nexport default TableSizePopover;\nvar MenuItem = function MenuItem(_ref2) {\n  var id = _ref2.id,\n    className = _ref2.className,\n    text = _ref2.text,\n    iconClassname = _ref2.iconClassname;\n  var _useTranslation = useTranslation(),\n    t = _useTranslation.t;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: id,\n    className: classnames('sdoc-selected-table-size-custom', {\n      className: className\n    })\n  }, /*#__PURE__*/React.createElement(\"span\", null, t(text)), /*#__PURE__*/React.createElement(\"i\", {\n    className: iconClassname\n  }));\n};","map":{"version":3,"names":["React","useCallback","useRef","useState","classnames","useTranslation","UncontrolledPopover","TableTemplate","TableSizePopover","_ref","editor","target","_ref$trigger","trigger","_ref$placement","placement","popperClassName","createTable","minSize","maxSize","_useState","_useState2","_slicedToArray","displaySize","setDisplaySize","_useState3","_useState4","selectedSize","setSelectedSize","ref","onMouseEnter","event","cellPosition","arguments","length","undefined","newDisplaySize","slice","cellPositionX","cellPositionY","onCreateTable","current","toggle","renderTableSize","tableSize","_loop","i","children","_loop2","j","isSelectedChild","child","createElement","key","concat","className","onClick","push","hideArrow","fade","MenuItem","id","text","iconClassname","targetId","_ref2","_useTranslation","t"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/extension/plugins/table/popover/table-size-popover/index.js"],"sourcesContent":["import React, { useCallback, useRef, useState } from 'react';\nimport classnames from 'classnames';\nimport { useTranslation } from 'react-i18next';\nimport { UncontrolledPopover } from 'reactstrap';\nimport TableTemplate from '../table-template';\nimport './index.css';\nconst TableSizePopover = _ref => {\n  let {\n    editor,\n    target,\n    trigger = 'legacy',\n    placement = 'bottom-start',\n    popperClassName,\n    createTable\n  } = _ref;\n  const minSize = [5, 10];\n  const maxSize = [10, 10];\n  const [displaySize, setDisplaySize] = useState([5, 10]);\n  const [selectedSize, setSelectedSize] = useState([1, 1]);\n  const ref = useRef(null);\n  const onMouseEnter = useCallback(function (event) {\n    let cellPosition = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [1, 1];\n    let newDisplaySize = displaySize.slice(0);\n    const cellPositionX = cellPosition[0];\n    const cellPositionY = cellPosition[1];\n    newDisplaySize[0] = cellPositionX < minSize[0] ? minSize[0] : cellPositionX + 1;\n    newDisplaySize[1] = cellPositionY < minSize[1] ? minSize[1] : cellPositionY + 1;\n    if (newDisplaySize[0] > maxSize[0]) {\n      newDisplaySize[0] = maxSize[0];\n    }\n    if (newDisplaySize[1] > maxSize[1]) {\n      newDisplaySize[1] = maxSize[1];\n    }\n    setDisplaySize(newDisplaySize);\n    setSelectedSize(cellPosition);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [displaySize, selectedSize, maxSize, minSize]);\n  const onCreateTable = useCallback(() => {\n    createTable(selectedSize);\n    ref && ref.current && ref.current.toggle();\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedSize, ref]);\n  const renderTableSize = useCallback(() => {\n    let tableSize = [];\n    for (let i = 1; i <= displaySize[0]; i++) {\n      let children = [];\n      for (let j = 1; j <= displaySize[1]; j++) {\n        const isSelectedChild = i <= selectedSize[0] && selectedSize[0] !== 0 && j <= selectedSize[1] && selectedSize[1] !== 0;\n        const child = /*#__PURE__*/React.createElement(\"div\", {\n          key: \"sdoc-table-size-cell-\".concat(i, \"-\").concat(j),\n          className: classnames('sdoc-table-size-cell', {\n            'active': isSelectedChild\n          }),\n          onClick: onCreateTable,\n          onMouseEnter: event => onMouseEnter(event, [i, j])\n        });\n        children.push(child);\n      }\n      tableSize.push( /*#__PURE__*/React.createElement(\"div\", {\n        key: \"sdoc-table-size-row-\".concat(i),\n        className: \"sdoc-table-size-row d-flex\"\n      }, children));\n    }\n    return tableSize;\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [displaySize, selectedSize]);\n  return /*#__PURE__*/React.createElement(UncontrolledPopover, {\n    target: target,\n    className: \"sdoc-selected-table-size-popover sdoc-sub-dropdown-menu sdoc-dropdown-menu\",\n    trigger: trigger,\n    placement: placement,\n    hideArrow: true,\n    fade: false,\n    ref: ref,\n    popperClassName: popperClassName\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-selected-table-size-container w-100 h-100 d-flex flex-column\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-selected-table-tools-container\"\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    id: \"sdoc-table-template-review-btn\",\n    text: \"Table_template\",\n    iconClassname: \"sdocfont sdoc-right-slide sdoc-dropdown-item-right-icon\"\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-table-size-select\"\n  }, renderTableSize()), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-selected-table-size-tip w-100 \"\n  }, \"\".concat(selectedSize[0], \" x \").concat(selectedSize[1])), /*#__PURE__*/React.createElement(TableTemplate, {\n    editor: editor,\n    targetId: \"sdoc-table-template-review-btn\"\n  })));\n};\nexport default TableSizePopover;\nconst MenuItem = _ref2 => {\n  let {\n    id,\n    className,\n    text,\n    iconClassname\n  } = _ref2;\n  const {\n    t\n  } = useTranslation();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: id,\n    className: classnames('sdoc-selected-table-size-custom', {\n      className\n    })\n  }, /*#__PURE__*/React.createElement(\"span\", null, t(text)), /*#__PURE__*/React.createElement(\"i\", {\n    className: iconClassname\n  }));\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}