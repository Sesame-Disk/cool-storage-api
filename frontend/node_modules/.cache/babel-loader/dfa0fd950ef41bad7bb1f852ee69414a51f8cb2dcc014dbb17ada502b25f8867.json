{"ast":null,"code":"import { Editor, Transforms, Element, Node } from '@seafile/slate';\nimport { LIST_ITEM } from '../../../constants';\nimport { getAboveNode, getNodeType } from '../../../core';\nimport { getListTypes } from '../queries';\nexport var unwrapList = function unwrapList(editor) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n    at = _ref.at;\n  var ancestorListTypeCheck = function ancestorListTypeCheck() {\n    if (getAboveNode(editor, {\n      match: {\n        type: getListTypes()\n      }\n    })) {\n      return true;\n    }\n\n    // The selection's common node might be a list type\n    if (!at && editor.selection) {\n      var commonNode = Node.common(editor, editor.selection.anchor.path, editor.selection.focus.path);\n      if (Element.isElement(commonNode[0]) && getListTypes().includes(commonNode[0].type)) {\n        return true;\n      }\n    }\n    return false;\n  };\n  Editor.withoutNormalizing(editor, function () {\n    do {\n      // unwrap list_item\n      Transforms.unwrapNodes(editor, {\n        at: at,\n        match: function match(n) {\n          return getNodeType(n) === LIST_ITEM;\n        },\n        split: true\n      });\n\n      // unwrap list\n      Transforms.unwrapNodes(editor, {\n        at: at,\n        match: function match(n) {\n          return getListTypes().includes(getNodeType(n));\n        },\n        split: true\n      });\n    } while (ancestorListTypeCheck());\n  });\n};","map":{"version":3,"names":["Editor","Transforms","Element","Node","LIST_ITEM","getAboveNode","getNodeType","getListTypes","unwrapList","editor","_ref","arguments","length","undefined","at","ancestorListTypeCheck","match","type","selection","commonNode","common","anchor","path","focus","isElement","includes","withoutNormalizing","unwrapNodes","n","split"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/extension/plugins/list/transforms/unwrap-list.js"],"sourcesContent":["import { Editor, Transforms, Element, Node } from '@seafile/slate';\nimport { LIST_ITEM } from '../../../constants';\nimport { getAboveNode, getNodeType } from '../../../core';\nimport { getListTypes } from '../queries';\nexport const unwrapList = function (editor) {\n  let {\n    at\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const ancestorListTypeCheck = () => {\n    if (getAboveNode(editor, {\n      match: {\n        type: getListTypes()\n      }\n    })) {\n      return true;\n    }\n\n    // The selection's common node might be a list type\n    if (!at && editor.selection) {\n      const commonNode = Node.common(editor, editor.selection.anchor.path, editor.selection.focus.path);\n      if (Element.isElement(commonNode[0]) && getListTypes().includes(commonNode[0].type)) {\n        return true;\n      }\n    }\n    return false;\n  };\n  Editor.withoutNormalizing(editor, () => {\n    do {\n      // unwrap list_item\n      Transforms.unwrapNodes(editor, {\n        at,\n        match: n => getNodeType(n) === LIST_ITEM,\n        split: true\n      });\n\n      // unwrap list\n      Transforms.unwrapNodes(editor, {\n        at,\n        match: n => getListTypes().includes(getNodeType(n)),\n        split: true\n      });\n    } while (ancestorListTypeCheck());\n  });\n};"],"mappings":"AAAA,SAASA,MAAM,EAAEC,UAAU,EAAEC,OAAO,EAAEC,IAAI,QAAQ,gBAAgB;AAClE,SAASC,SAAS,QAAQ,oBAAoB;AAC9C,SAASC,YAAY,EAAEC,WAAW,QAAQ,eAAe;AACzD,SAASC,YAAY,QAAQ,YAAY;AACzC,OAAO,IAAMC,UAAU,GAAG,SAAbA,UAAUA,CAAaC,MAAM,EAAE;EAC1C,IAAAC,IAAA,GAEIC,SAAS,CAACC,MAAM,GAAG,CAAC,IAAID,SAAS,CAAC,CAAC,CAAC,KAAKE,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;IADxEG,EAAE,GAAAJ,IAAA,CAAFI,EAAE;EAEJ,IAAMC,qBAAqB,GAAG,SAAxBA,qBAAqBA,CAAA,EAAS;IAClC,IAAIV,YAAY,CAACI,MAAM,EAAE;MACvBO,KAAK,EAAE;QACLC,IAAI,EAAEV,YAAY,CAAC;MACrB;IACF,CAAC,CAAC,EAAE;MACF,OAAO,IAAI;IACb;;IAEA;IACA,IAAI,CAACO,EAAE,IAAIL,MAAM,CAACS,SAAS,EAAE;MAC3B,IAAMC,UAAU,GAAGhB,IAAI,CAACiB,MAAM,CAACX,MAAM,EAAEA,MAAM,CAACS,SAAS,CAACG,MAAM,CAACC,IAAI,EAAEb,MAAM,CAACS,SAAS,CAACK,KAAK,CAACD,IAAI,CAAC;MACjG,IAAIpB,OAAO,CAACsB,SAAS,CAACL,UAAU,CAAC,CAAC,CAAC,CAAC,IAAIZ,YAAY,CAAC,CAAC,CAACkB,QAAQ,CAACN,UAAU,CAAC,CAAC,CAAC,CAACF,IAAI,CAAC,EAAE;QACnF,OAAO,IAAI;MACb;IACF;IACA,OAAO,KAAK;EACd,CAAC;EACDjB,MAAM,CAAC0B,kBAAkB,CAACjB,MAAM,EAAE,YAAM;IACtC,GAAG;MACD;MACAR,UAAU,CAAC0B,WAAW,CAAClB,MAAM,EAAE;QAC7BK,EAAE,EAAFA,EAAE;QACFE,KAAK,EAAE,SAAAA,MAAAY,CAAC;UAAA,OAAItB,WAAW,CAACsB,CAAC,CAAC,KAAKxB,SAAS;QAAA;QACxCyB,KAAK,EAAE;MACT,CAAC,CAAC;;MAEF;MACA5B,UAAU,CAAC0B,WAAW,CAAClB,MAAM,EAAE;QAC7BK,EAAE,EAAFA,EAAE;QACFE,KAAK,EAAE,SAAAA,MAAAY,CAAC;UAAA,OAAIrB,YAAY,CAAC,CAAC,CAACkB,QAAQ,CAACnB,WAAW,CAACsB,CAAC,CAAC,CAAC;QAAA;QACnDC,KAAK,EAAE;MACT,CAAC,CAAC;IACJ,CAAC,QAAQd,qBAAqB,CAAC,CAAC;EAClC,CAAC,CAAC;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}