{"ast":null,"code":"import _regeneratorRuntime from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef,useCallback,useLayoutEffect,useEffect}from'react';import ReactDom from'react-dom';import isHotkey from'is-hotkey';import{processor}from'@seafile/seafile-editor';import SeafileCodeMirror from'./code-mirror';import HeaderToolbar from'../markdown-editor/header-toolbar/header-toolbar';import editorApi from'../markdown-editor/editor-api';import{getPlainOptions}from'./helper';import{gettext}from'../../utils/constants';import toaster from'../../components/toast';import CodeMirrorLoading from'../../components/code-mirror-loading';import'./style.css';import'../markdown-editor/css/markdown-editor.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var _window$app$pageOptio=window.app.pageOptions,repoID=_window$app$pageOptio.repoID,filePath=_window$app$pageOptio.filePath,fileName=_window$app$pageOptio.fileName,isLocked=_window$app$pageOptio.isLocked,lockedByMe=_window$app$pageOptio.lockedByMe;var seafileCollabServer=window.app.config.seafileCollabServer;var userInfo=window.app.userInfo;var initOptions={markdownContent:'',loading:true,mode:'editor',fileInfo:{repoID:repoID,name:fileName,path:filePath,mtime:null,size:0,starred:false,permission:'',lastModifier:'',id:''},editorMode:'plain',collabServer:seafileCollabServer?seafileCollabServer:null,showMarkdownEditorDialog:false,showShareLinkDialog:false,showInsertFileDialog:false,collabUsers:userInfo?[{user:userInfo,is_editing:false}]:[],value:null,isShowHistory:false,readOnly:true,contentChanged:false,saving:false,isLocked:isLocked,lockedByMe:lockedByMe,fileTagList:[],participants:[]};var PlainMarkdownEditor=function PlainMarkdownEditor(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),editorValue=_useState2[0],setEditorValue=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),previewValue=_useState4[0],setPreviewValue=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isMouseInLeftSide=_useState6[0],setIsMouseInLeftSide=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isMouseInRightSide=_useState8[0],setIsMouseInRightSide=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),scrollPercentage=_useState10[0],setScrollPercentage=_useState10[1];var leftPanelRef=useRef(null);var rightPanelRef=useRef(null);var _useState11=useState(initOptions),_useState12=_slicedToArray(_useState11,2),options=_useState12[0],setOptions=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),saving=_useState14[0],setSaving=_useState14[1];var setContent=useCallback(function(markdownContent){setEditorValue(markdownContent);processor.process(markdownContent,function(error,vfile){var html=String(vfile);setPreviewValue(html);});},[]);var updateOptions=useCallback(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref){var fileName,filePath,repoID,_yield$getPlainOption,markdownContent,hasPermission,fileInfo;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:fileName=_ref.fileName,filePath=_ref.filePath,repoID=_ref.repoID;_context.next=3;return getPlainOptions({fileName:fileName,filePath:filePath,repoID:repoID});case 3:_yield$getPlainOption=_context.sent;markdownContent=_yield$getPlainOption.markdownContent;hasPermission=_yield$getPlainOption.hasPermission;fileInfo=_yield$getPlainOption.fileInfo;setContent(markdownContent);setOptions(_objectSpread(_objectSpread({},options),{},{loading:false,fileInfo:_objectSpread(_objectSpread({},options.fileInfo),fileInfo),markdownContent:markdownContent,value:'',readOnly:!hasPermission}));case 9:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}(),[options,setContent]);useLayoutEffect(function(){updateOptions({fileName:fileName,filePath:filePath,repoID:repoID});// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);var onUnload=useCallback(function(event){var contentChanged=options.contentChanged;if(!contentChanged)return;var confirmationMessage=gettext('Leave this page? The system may not save your changes.');event.returnValue=confirmationMessage;return confirmationMessage;},[options]);useEffect(function(){window.addEventListener('beforeunload',onUnload);return function(){window.removeEventListener('beforeunload',onUnload);};},[onUnload]);var updateCode=useCallback(function(newCode){setContent(String(newCode));!options.onContentChanged&&setOptions(_objectSpread(_objectSpread({},options),{},{contentChanged:true}));},[options,setContent]);var onEnterLeftPanel=useCallback(function(){setIsMouseInLeftSide(true);setIsMouseInRightSide(false);},[]);var onLeaveLeftPanel=useCallback(function(){setIsMouseInLeftSide(false);},[]);var onLeftScroll=useCallback(function(e){if(!isMouseInLeftSide)return;var srcElement=leftPanelRef.current;var rightPanelElm=rightPanelRef.current;var scrolledPercentage=srcElement.scrollTop/srcElement.scrollHeight;setScrollPercentage(scrolledPercentage);rightPanelElm.scrollTop=scrolledPercentage*rightPanelElm.scrollHeight;},[isMouseInLeftSide]);var onEnterRightPanel=useCallback(function(){setIsMouseInRightSide(true);setIsMouseInLeftSide(false);},[]);var onLeaveRightPanel=useCallback(function(){setIsMouseInRightSide(false);},[]);var onRightScroll=useCallback(function(e){if(!isMouseInRightSide)return;var srcElement=rightPanelRef.current;var leftPanelElm=leftPanelRef.current;setScrollPercentage(srcElement.scrollTop/srcElement.scrollHeight);leftPanelElm.scrollTop=scrollPercentage*leftPanelElm.scrollHeight;},[isMouseInRightSide,scrollPercentage]);var updateFileInfoMtime=useCallback(function(fileInfo){var oldFileInfo=options.fileInfo;var newFileInfo=Object.assign({},oldFileInfo,{mtime:fileInfo.mtime,id:fileInfo.id,lastModifier:fileInfo.last_modifier_name});return newFileInfo;},[options]);var onSaveEditorContent=useCallback(function(){setSaving(true);var fileInfo=options.fileInfo;editorApi.saveContent(editorValue).then(function(){editorApi.getFileInfo().then(function(res){fileInfo=updateFileInfoMtime(res.data);setOptions(_objectSpread(_objectSpread({},options),{},{fileInfo:fileInfo,contentChanged:false}));setSaving(function(){return false;});var message=gettext('Successfully saved');toaster.success(message,{duration:2});});},function(){setSaving(false);var message=gettext('Failed to save');toaster.danger(message,{duration:2});});},[editorValue,options,setOptions,updateFileInfoMtime]);var onHotKey=useCallback(function(event){if(isHotkey('mod+s',event)){event.preventDefault();onSaveEditorContent(editorValue);return true;}},[editorValue,onSaveEditorContent]);var toggleStar=useCallback(function(){var starred=options.fileInfo.starred;var newFileInfo=Object.assign({},options.fileInfo,{starred:!starred});if(starred){editorApi.unstarItem().then(function(response){setOptions(_objectSpread(_objectSpread({},options),{},{fileInfo:newFileInfo}));});return;}editorApi.starItem().then(function(response){setOptions(_objectSpread(_objectSpread({},options),{},{fileInfo:newFileInfo}));});},[options]);var setEditorMode=useCallback(function(){var _window$location=window.location,origin=_window$location.origin,pathname=_window$location.pathname;window.location.href=origin+pathname;},[]);var ignoreCallBack=useCallback(function(){return void 0;},[]);if(options.loading)return/*#__PURE__*/_jsx(CodeMirrorLoading,{});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(HeaderToolbar,{editorApi:editorApi,collabUsers:options.collabUsers,fileInfo:options.fileInfo,toggleStar:toggleStar,openDialogs:ignoreCallBack,toggleShareLinkDialog:ignoreCallBack,onEdit:setEditorMode,showFileHistory:false,toggleHistory:ignoreCallBack,readOnly:options.readOnly,contentChanged:options.contentChanged,saving:saving,onSaveEditorContent:onSaveEditorContent,isLocked:options.isLocked,lockedByMe:options.lockedByMe,toggleLockFile:ignoreCallBack,editorMode:\"plain\"}),/*#__PURE__*/_jsx(\"div\",{className:\"sf-plain-editor\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"sf-plain-editor-main d-flex\",onKeyDown:onHotKey,children:[/*#__PURE__*/_jsx(\"div\",{className:\"sf-plain-editor-left-panel\",ref:leftPanelRef,onMouseLeave:onLeaveLeftPanel,onMouseEnter:onEnterLeftPanel,onScroll:onLeftScroll,children:/*#__PURE__*/_jsx(SeafileCodeMirror,{autoFocus:true,initialValue:editorValue,onChange:updateCode})}),/*#__PURE__*/_jsx(\"div\",{className:\"sf-plain-editor-right-panel\",ref:rightPanelRef,onMouseEnter:onEnterRightPanel,onMouseLeave:onLeaveRightPanel,onScroll:onRightScroll,children:/*#__PURE__*/_jsx(\"div\",{className:\"preview\",children:/*#__PURE__*/_jsx(\"div\",{className:\"rendered-markdown article\",dangerouslySetInnerHTML:{__html:previewValue}})})})]})})]});};export default PlainMarkdownEditor;ReactDom.render(/*#__PURE__*/_jsx(PlainMarkdownEditor,{}),document.getElementById('root'));","map":{"version":3,"names":["React","useState","useRef","useCallback","useLayoutEffect","useEffect","ReactDom","isHotkey","processor","SeafileCodeMirror","HeaderToolbar","editorApi","getPlainOptions","gettext","toaster","CodeMirrorLoading","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","_window$app$pageOptio","window","app","pageOptions","repoID","filePath","fileName","isLocked","lockedByMe","seafileCollabServer","config","userInfo","initOptions","markdownContent","loading","mode","fileInfo","name","path","mtime","size","starred","permission","lastModifier","id","editorMode","collabServer","showMarkdownEditorDialog","showShareLinkDialog","showInsertFileDialog","collabUsers","user","is_editing","value","isShowHistory","readOnly","contentChanged","saving","fileTagList","participants","PlainMarkdownEditor","props","_useState","_useState2","_slicedToArray","editorValue","setEditorValue","_useState3","_useState4","previewValue","setPreviewValue","_useState5","_useState6","isMouseInLeftSide","setIsMouseInLeftSide","_useState7","_useState8","isMouseInRightSide","setIsMouseInRightSide","_useState9","_useState10","scrollPercentage","setScrollPercentage","leftPanelRef","rightPanelRef","_useState11","_useState12","options","setOptions","_useState13","_useState14","setSaving","setContent","process","error","vfile","html","String","updateOptions","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref","_yield$getPlainOption","hasPermission","wrap","_callee$","_context","prev","next","sent","_objectSpread","stop","_x","apply","arguments","onUnload","event","confirmationMessage","returnValue","addEventListener","removeEventListener","updateCode","newCode","onContentChanged","onEnterLeftPanel","onLeaveLeftPanel","onLeftScroll","e","srcElement","current","rightPanelElm","scrolledPercentage","scrollTop","scrollHeight","onEnterRightPanel","onLeaveRightPanel","onRightScroll","leftPanelElm","updateFileInfoMtime","oldFileInfo","newFileInfo","Object","assign","last_modifier_name","onSaveEditorContent","saveContent","then","getFileInfo","res","data","message","success","duration","danger","onHotKey","preventDefault","toggleStar","unstarItem","response","starItem","setEditorMode","_window$location","location","origin","pathname","href","ignoreCallBack","children","openDialogs","toggleShareLinkDialog","onEdit","showFileHistory","toggleHistory","toggleLockFile","className","onKeyDown","ref","onMouseLeave","onMouseEnter","onScroll","autoFocus","initialValue","onChange","dangerouslySetInnerHTML","__html","render","document","getElementById"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/plain-markdown-editor/index.js"],"sourcesContent":["import React, { useState, useRef, useCallback, useLayoutEffect, useEffect } from 'react';\nimport ReactDom from 'react-dom';\nimport isHotkey from 'is-hotkey';\nimport PropTypes from 'prop-types';\nimport { processor } from '@seafile/seafile-editor';\nimport SeafileCodeMirror from './code-mirror';\nimport HeaderToolbar from '../markdown-editor/header-toolbar/header-toolbar';\nimport editorApi from '../markdown-editor/editor-api';\nimport { getPlainOptions } from './helper';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport CodeMirrorLoading from '../../components/code-mirror-loading';\n\nimport './style.css';\nimport '../markdown-editor/css/markdown-editor.css';\n\nconst propTypes = {\n  autoFocus: PropTypes.bool,\n  value: PropTypes.string,\n  onSave: PropTypes.func,\n  onContentChanged: PropTypes.func,\n};\n\nconst { repoID, filePath, fileName, isLocked, lockedByMe } = window.app.pageOptions;\nconst { seafileCollabServer } = window.app.config;\nconst userInfo = window.app.userInfo;\n\nconst initOptions = {\n  markdownContent: '',\n  loading: true,\n  mode: 'editor',\n  fileInfo: {\n    repoID: repoID,\n    name: fileName,\n    path: filePath,\n    mtime: null,\n    size: 0,\n    starred: false,\n    permission: '',\n    lastModifier: '',\n    id: '',\n  },\n  editorMode: 'plain',\n  collabServer: seafileCollabServer ? seafileCollabServer : null,\n  showMarkdownEditorDialog: false,\n  showShareLinkDialog: false,\n  showInsertFileDialog: false,\n  collabUsers: userInfo ? [{ user: userInfo, is_editing: false }] : [],\n  value: null,\n  isShowHistory: false,\n  readOnly: true,\n  contentChanged: false,\n  saving: false,\n  isLocked: isLocked,\n  lockedByMe: lockedByMe,\n  fileTagList: [],\n  participants: [],\n};\n\nconst PlainMarkdownEditor = (props) => {\n  const [editorValue, setEditorValue] = useState('');\n  const [previewValue, setPreviewValue] = useState('');\n  const [isMouseInLeftSide, setIsMouseInLeftSide] = useState(false);\n  const [isMouseInRightSide, setIsMouseInRightSide] = useState(false);\n  const [scrollPercentage, setScrollPercentage] = useState(0);\n  const leftPanelRef = useRef(null);\n  const rightPanelRef = useRef(null);\n  const [options, setOptions] = useState(initOptions);\n  const [saving, setSaving] = useState(false);\n\n  const setContent = useCallback((markdownContent) => {\n    setEditorValue(markdownContent);\n    processor.process(markdownContent, (error, vfile) => {\n      var html = String(vfile);\n      setPreviewValue(html);\n    });\n  }, []);\n\n  const updateOptions = useCallback(async ({ fileName, filePath, repoID }) => {\n    const { markdownContent, hasPermission, fileInfo } = await getPlainOptions({ fileName, filePath, repoID });\n    setContent(markdownContent);\n    setOptions({\n      ...options,\n      loading: false,\n      fileInfo: { ...options.fileInfo, ...fileInfo },\n      markdownContent,\n      value: '',\n      readOnly: !hasPermission,\n    });\n  }, [options, setContent]);\n\n  useLayoutEffect(() => {\n    updateOptions({ fileName, filePath, repoID });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const onUnload = useCallback((event) => {\n    const { contentChanged } = options;\n    if (!contentChanged) return;\n\n    const confirmationMessage = gettext('Leave this page? The system may not save your changes.');\n    event.returnValue = confirmationMessage;\n    return confirmationMessage;\n  }, [options]);\n\n  useEffect(() => {\n    window.addEventListener('beforeunload', onUnload);\n    return () => {\n      window.removeEventListener('beforeunload', onUnload);\n    };\n  }, [onUnload]);\n\n  const updateCode = useCallback((newCode) => {\n    setContent(String(newCode));\n    !options.onContentChanged && setOptions({ ...options, contentChanged: true });\n  }, [options, setContent]);\n\n  const onEnterLeftPanel = useCallback(() => {\n    setIsMouseInLeftSide(true);\n    setIsMouseInRightSide(false);\n  }, []);\n\n  const onLeaveLeftPanel = useCallback(() => {\n    setIsMouseInLeftSide(false);\n  }, []);\n\n  const onLeftScroll = useCallback((e) => {\n    if (!isMouseInLeftSide) return;\n    let srcElement = leftPanelRef.current;\n    const rightPanelElm = rightPanelRef.current;\n    const scrolledPercentage = srcElement.scrollTop / srcElement.scrollHeight;\n    setScrollPercentage(scrolledPercentage);\n    rightPanelElm.scrollTop = scrolledPercentage * rightPanelElm.scrollHeight;\n  }, [isMouseInLeftSide]);\n\n  const onEnterRightPanel = useCallback(() => {\n    setIsMouseInRightSide(true);\n    setIsMouseInLeftSide(false);\n  }, []);\n\n  const onLeaveRightPanel = useCallback(() => {\n    setIsMouseInRightSide(false);\n  }, []);\n\n  const onRightScroll = useCallback((e) => {\n    if (!isMouseInRightSide) return;\n    let srcElement = rightPanelRef.current;\n    const leftPanelElm = leftPanelRef.current;\n    setScrollPercentage(srcElement.scrollTop / srcElement.scrollHeight);\n    leftPanelElm.scrollTop = scrollPercentage * leftPanelElm.scrollHeight;\n  }, [isMouseInRightSide, scrollPercentage]);\n\n  const updateFileInfoMtime = useCallback((fileInfo) => {\n    const { fileInfo: oldFileInfo } = options;\n    const newFileInfo = Object.assign({}, oldFileInfo, { mtime: fileInfo.mtime, id: fileInfo.id, lastModifier: fileInfo.last_modifier_name });\n    return newFileInfo;\n  }, [options]);\n\n  const onSaveEditorContent = useCallback(() => {\n    setSaving(true);\n    let fileInfo = options.fileInfo;\n\n    editorApi.saveContent(editorValue).then(() => {\n      editorApi.getFileInfo().then((res) => {\n        fileInfo = updateFileInfoMtime(res.data);\n        setOptions({\n          ...options,\n          fileInfo,\n          contentChanged: false,\n        });\n        setSaving(() => false);\n        const message = gettext('Successfully saved');\n        toaster.success(message, { duration: 2, });\n      });\n    }, () => {\n      setSaving(false);\n      const message = gettext('Failed to save');\n      toaster.danger(message, { duration: 2 });\n    });\n  }, [editorValue, options, setOptions, updateFileInfoMtime]);\n\n  const onHotKey = useCallback((event) => {\n    if (isHotkey('mod+s', event)) {\n      event.preventDefault();\n      onSaveEditorContent(editorValue);\n      return true;\n    }\n  }, [editorValue, onSaveEditorContent]);\n\n  const toggleStar = useCallback(() => {\n    const starred = options.fileInfo.starred;\n    const newFileInfo = Object.assign({}, options.fileInfo, { starred: !starred });\n    if (starred) {\n      editorApi.unstarItem().then((response) => {\n        setOptions({ ...options, fileInfo: newFileInfo });\n      });\n      return;\n    }\n\n    editorApi.starItem().then((response) => {\n      setOptions({ ...options, fileInfo: newFileInfo });\n    });\n  }, [options]);\n\n  const setEditorMode = useCallback(() => {\n    const { origin, pathname } = window.location;\n    window.location.href = origin + pathname;\n  }, []);\n\n  const ignoreCallBack = useCallback(() => void 0, []);\n\n  if (options.loading) return <CodeMirrorLoading />;\n\n  return (\n    <>\n      <HeaderToolbar\n        editorApi={editorApi}\n        collabUsers={options.collabUsers}\n        fileInfo={options.fileInfo}\n        toggleStar={toggleStar}\n        openDialogs={ignoreCallBack}\n        toggleShareLinkDialog={ignoreCallBack}\n        onEdit={setEditorMode}\n        showFileHistory={false}\n        toggleHistory={ignoreCallBack}\n        readOnly={options.readOnly}\n        contentChanged={options.contentChanged}\n        saving={saving}\n        onSaveEditorContent={onSaveEditorContent}\n        isLocked={options.isLocked}\n        lockedByMe={options.lockedByMe}\n        toggleLockFile={ignoreCallBack}\n        editorMode=\"plain\"\n      />\n      <div className='sf-plain-editor'>\n        <div className=\"sf-plain-editor-main d-flex\" onKeyDown={onHotKey}>\n          <div\n            className=\"sf-plain-editor-left-panel\"\n            ref={leftPanelRef}\n            onMouseLeave={onLeaveLeftPanel}\n            onMouseEnter={onEnterLeftPanel}\n            onScroll={onLeftScroll}\n          >\n            <SeafileCodeMirror autoFocus={true} initialValue={editorValue} onChange={updateCode} />\n          </div>\n          <div\n            className=\"sf-plain-editor-right-panel\"\n            ref={rightPanelRef}\n            onMouseEnter={onEnterRightPanel}\n            onMouseLeave={onLeaveRightPanel}\n            onScroll={onRightScroll}\n          >\n            <div className=\"preview\">\n              <div className=\"rendered-markdown article\" dangerouslySetInnerHTML={{ __html: previewValue }}></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nPlainMarkdownEditor.propTypes = propTypes;\n\nexport default PlainMarkdownEditor;\n\nReactDom.render(<PlainMarkdownEditor />, document.getElementById('root'));\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}