{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import classnames from'classnames';import{jsx as _jsx}from\"react/jsx-runtime\";var SearchInput=/*#__PURE__*/function(_Component){_inherits(SearchInput,_Component);var _super=_createSuper(SearchInput);function SearchInput(props){var _this;_classCallCheck(this,SearchInput);_this=_super.call(this,props);_this.onCompositionStart=function(){_this.isInputtingChinese=true;};_this.onChange=function(e){_this.timer&&clearTimeout(_this.timer);var _this$props=_this.props,onChange=_this$props.onChange,wait=_this$props.wait;var text=e.target.value;_this.setState({searchValue:text||''},function(){if(_this.isInputtingChinese)return;_this.timer=setTimeout(function(){onChange&&onChange(_this.state.searchValue.trim());},wait);});};_this.onCompositionEnd=function(e){_this.isInputtingChinese=false;_this.onChange(e);};_this.setFocus=function(isSelectAllText){if(_this.inputRef===document.activeElement)return;_this.inputRef.focus();if(isSelectAllText){var txtLength=_this.state.searchValue.length;_this.inputRef.setSelectionRange(0,txtLength);}};_this.state={searchValue:props.value};_this.isInputtingChinese=false;_this.timer=null;_this.inputRef=null;return _this;}_createClass(SearchInput,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(this.props.autoFocus&&this.inputRef&&this.inputRef!==document.activeElement){setTimeout(function(){_this2.inputRef.focus();},0);}}},{key:\"UNSAFE_componentWillReceiveProps\",value:function UNSAFE_componentWillReceiveProps(nextProps){if(nextProps.value!==this.props.value){this.setState({searchValue:nextProps.value});}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.timer&&clearTimeout(this.timer);this.timer=null;this.inputRef=null;}},{key:\"render\",value:function render(){var _this3=this;var _this$props2=this.props,placeholder=_this$props2.placeholder,autoFocus=_this$props2.autoFocus,className=_this$props2.className,onKeyDown=_this$props2.onKeyDown,disabled=_this$props2.disabled,style=_this$props2.style;var searchValue=this.state.searchValue;return/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchValue,className:classnames('form-control',className),onChange:this.onChange,autoFocus:autoFocus,placeholder:placeholder,onCompositionStart:this.onCompositionStart,onCompositionEnd:this.onCompositionEnd,onKeyDown:onKeyDown,disabled:disabled,style:style,ref:function ref(_ref){return _this3.inputRef=_ref;}});}}]);return SearchInput;}(Component);SearchInput.defaultProps={wait:100,disabled:false,value:''};export default SearchInput;","map":{"version":3,"names":["React","Component","classnames","jsx","_jsx","SearchInput","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","onCompositionStart","isInputtingChinese","onChange","e","timer","clearTimeout","_this$props","wait","text","target","value","setState","searchValue","setTimeout","state","trim","onCompositionEnd","setFocus","isSelectAllText","inputRef","document","activeElement","focus","txtLength","length","setSelectionRange","_createClass","key","componentDidMount","_this2","autoFocus","UNSAFE_componentWillReceiveProps","nextProps","componentWillUnmount","render","_this3","_this$props2","placeholder","className","onKeyDown","disabled","style","type","ref","defaultProps"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/extra-attributes-dialog/editor/search-input.js"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\n\nclass SearchInput extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchValue: props.value,\n    };\n    this.isInputtingChinese = false;\n    this.timer = null;\n    this.inputRef = null;\n  }\n\n  componentDidMount() {\n    if (this.props.autoFocus && this.inputRef && this.inputRef !== document.activeElement) {\n      setTimeout(() => {\n        this.inputRef.focus();\n      }, 0);\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.value !== this.props.value) {\n      this.setState({searchValue: nextProps.value});\n    }\n  }\n\n  componentWillUnmount() {\n    this.timer && clearTimeout(this.timer);\n    this.timer = null;\n    this.inputRef = null;\n  }\n\n  onCompositionStart = () => {\n    this.isInputtingChinese = true;\n  };\n\n  onChange = (e) => {\n    this.timer && clearTimeout(this.timer);\n    const { onChange, wait } = this.props;\n    let text = e.target.value;\n    this.setState({searchValue: text || ''}, () => {\n      if (this.isInputtingChinese) return;\n      this.timer = setTimeout(() => {\n        onChange && onChange(this.state.searchValue.trim());\n      }, wait);\n    });\n  };\n\n  onCompositionEnd = (e) => {\n    this.isInputtingChinese = false;\n    this.onChange(e);\n  };\n\n  setFocus = (isSelectAllText) => {\n    if (this.inputRef === document.activeElement) return;\n    this.inputRef.focus();\n    if (isSelectAllText) {\n      const txtLength = this.state.searchValue.length;\n      this.inputRef.setSelectionRange(0, txtLength);\n    }\n  };\n\n  render() {\n    const { placeholder, autoFocus, className, onKeyDown, disabled, style } = this.props;\n    const { searchValue } = this.state;\n\n    return (\n      <input\n        type=\"text\"\n        value={searchValue}\n        className={classnames('form-control', className)}\n        onChange={this.onChange}\n        autoFocus={autoFocus}\n        placeholder={placeholder}\n        onCompositionStart={this.onCompositionStart}\n        onCompositionEnd={this.onCompositionEnd}\n        onKeyDown={onKeyDown}\n        disabled={disabled}\n        style={style}\n        ref={ref => this.inputRef = ref}\n      />\n    );\n  }\n}\n\nSearchInput.propTypes = {\n  placeholder: PropTypes.string,\n  autoFocus: PropTypes.bool,\n  className: PropTypes.string,\n  onChange: PropTypes.func.isRequired,\n  onKeyDown: PropTypes.func,\n  wait: PropTypes.number,\n  disabled: PropTypes.bool,\n  style: PropTypes.object,\n  value: PropTypes.string,\n};\n\nSearchInput.defaultProps = {\n  wait: 100,\n  disabled: false,\n  value: '',\n};\n\nexport default SearchInput;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}