{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component,Fragment}from'react';import moment from'moment';import{seafileAPI}from'../../utils/seafile-api';import{gettext}from'../../utils/constants';import{Utils}from'../../utils/utils';import Loading from'../../components/loading';import OrgAdminUserNav from'../../components/org-admin-user-nav';import MainPanelTopbar from'./main-panel-topbar';import'../../css/org-admin-user.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var orgID=window.org.pageOptions.orgID;var OrgUserSharedRepos=/*#__PURE__*/function(_Component){_inherits(OrgUserSharedRepos,_Component);var _super=_createSuper(OrgUserSharedRepos);function OrgUserSharedRepos(props){var _this;_classCallCheck(this,OrgUserSharedRepos);_this=_super.call(this,props);_this.state={loading:true,errorMsg:''};return _this;}_createClass(OrgUserSharedRepos,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var email=decodeURIComponent(this.props.email);seafileAPI.orgAdminGetOrgUserBesharedRepos(orgID,email).then(function(res){_this2.setState(Object.assign({loading:false},res.data));}).catch(function(error){_this2.setState({loading:false,errorMsg:Utils.getErrorMsg(error,true)// true: show login tip if 403\n});});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MainPanelTopbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"main-panel-center flex-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cur-view-container\",children:[/*#__PURE__*/_jsx(OrgAdminUserNav,{email:this.props.email,currentItem:\"shared-repos\"}),/*#__PURE__*/_jsx(\"div\",{className:\"cur-view-content\",children:/*#__PURE__*/_jsx(Content,{data:this.state})})]})})]});}}]);return OrgUserSharedRepos;}(Component);var Content=/*#__PURE__*/function(_Component2){_inherits(Content,_Component2);var _super2=_createSuper(Content);function Content(){_classCallCheck(this,Content);return _super2.apply(this,arguments);}_createClass(Content,[{key:\"render\",value:function render(){var _this$props$data=this.props.data,loading=_this$props$data.loading,errorMsg=_this$props$data.errorMsg,repo_list=_this$props$data.repo_list;if(loading){return/*#__PURE__*/_jsx(Loading,{});}if(errorMsg){return/*#__PURE__*/_jsx(\"p\",{className:\"error text-center\",children:errorMsg});}return/*#__PURE__*/_jsxs(\"table\",{className:\"table-hover\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{width:\"4%\"}),/*#__PURE__*/_jsx(\"th\",{width:\"30%\",children:gettext('Name')}),/*#__PURE__*/_jsx(\"th\",{width:\"26%\",children:gettext('Owner')}),/*#__PURE__*/_jsx(\"th\",{width:\"15%\",children:gettext('Size')}),/*#__PURE__*/_jsx(\"th\",{width:\"25%\",children:gettext('Last Update')})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:repo_list.map(function(item,index){return/*#__PURE__*/_jsx(Item,{data:item},index);})})]});}}]);return Content;}(Component);var Item=/*#__PURE__*/function(_Component3){_inherits(Item,_Component3);var _super3=_createSuper(Item);function Item(){_classCallCheck(this,Item);return _super3.apply(this,arguments);}_createClass(Item,[{key:\"render\",value:function render(){var repo=this.props.data;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:Utils.getLibIconUrl(repo,false),alt:Utils.getLibIconTitle(repo),title:Utils.getLibIconTitle(repo),width:\"24\"})}),/*#__PURE__*/_jsx(\"td\",{children:repo.repo_name}),/*#__PURE__*/_jsx(\"td\",{children:repo.owner_name}),/*#__PURE__*/_jsx(\"td\",{children:Utils.bytesToSize(repo.size)}),/*#__PURE__*/_jsx(\"td\",{title:moment(repo.last_modified).format('LLLL'),children:moment(repo.last_modified).format('YYYY-MM-DD')})]});}}]);return Item;}(Component);export default OrgUserSharedRepos;","map":{"version":3,"names":["React","Component","Fragment","moment","seafileAPI","gettext","Utils","Loading","OrgAdminUserNav","MainPanelTopbar","jsx","_jsx","jsxs","_jsxs","orgID","window","org","pageOptions","OrgUserSharedRepos","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","state","loading","errorMsg","_createClass","key","value","componentDidMount","_this2","email","decodeURIComponent","orgAdminGetOrgUserBesharedRepos","then","res","setState","Object","assign","data","catch","error","getErrorMsg","render","children","className","currentItem","Content","_Component2","_super2","apply","arguments","_this$props$data","repo_list","width","map","item","index","Item","_Component3","_super3","repo","src","getLibIconUrl","alt","getLibIconTitle","title","repo_name","owner_name","bytesToSize","size","last_modified","format"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/pages/org-admin/org-user-shared-repos.js"],"sourcesContent":["import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport OrgAdminUserNav from '../../components/org-admin-user-nav';\nimport MainPanelTopbar from './main-panel-topbar';\n\nimport '../../css/org-admin-user.css';\n\nconst { orgID } = window.org.pageOptions;\n\nclass OrgUserSharedRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: ''\n    };\n  }\n\n  componentDidMount() {\n    const email = decodeURIComponent(this.props.email);\n    seafileAPI.orgAdminGetOrgUserBesharedRepos(orgID, email).then((res) => {\n      this.setState(Object.assign({\n        loading: false\n      }, res.data));\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar/>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgAdminUserNav email={this.props.email} currentItem='shared-repos' />\n            <div className=\"cur-view-content\">\n              <Content\n                data={this.state}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nclass Content extends Component {\n  render() {\n    const {\n      loading, errorMsg, repo_list\n    } = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    }\n    if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    }\n\n    return (\n      <table className=\"table-hover\">\n        <thead>\n          <tr>\n            <th width=\"4%\">{/*icon*/}</th>\n            <th width=\"30%\">{gettext('Name')}</th>\n            <th width=\"26%\">{gettext('Owner')}</th>\n            <th width=\"15%\">{gettext('Size')}</th>\n            <th width=\"25%\">{gettext('Last Update')}</th>\n          </tr>\n        </thead>\n        <tbody>\n          {repo_list.map((item, index) => {\n            return <Item key={index} data={item} />;\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nContent.propTypes = {\n  data: PropTypes.object.isRequired,\n};\n\nclass Item extends Component {\n  render() {\n    const repo = this.props.data;\n    return (\n      <tr>\n        <td>\n          <img src={Utils.getLibIconUrl(repo, false)} alt={Utils.getLibIconTitle(repo)} title={Utils.getLibIconTitle(repo)} width=\"24\" />\n        </td>\n        <td>{repo.repo_name}</td>\n        <td>{repo.owner_name}</td>\n        <td>{Utils.bytesToSize(repo.size)}</td>\n        <td title={moment(repo.last_modified).format('LLLL')}>{moment(repo.last_modified).format('YYYY-MM-DD')}</td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = {\n  data: PropTypes.object.isRequired,\n};\n\nOrgUserSharedRepos.propTypes = {\n  email: PropTypes.string,\n};\n\n\nexport default OrgUserSharedRepos;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}