{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{Modal,ModalHeader,ModalBody,ModalFooter,Alert,Button,Input,InputGroup,InputGroupAddon}from'reactstrap';import{gettext}from'../../utils/constants';import{Utils}from'../../utils/utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _window$app$pageOptio=window.app.pageOptions,webdavSecretMinLength=_window$app$pageOptio.webdavSecretMinLength,webdavSecretStrengthLevel=_window$app$pageOptio.webdavSecretStrengthLevel;var SetWebdavPassword=/*#__PURE__*/function(_Component){_inherits(SetWebdavPassword,_Component);var _super=_createSuper(SetWebdavPassword);function SetWebdavPassword(props){var _this;_classCallCheck(this,SetWebdavPassword);_this=_super.call(this,props);_this.submit=function(){if(_this.state.password.length===0){_this.setState({errMsg:gettext('Please enter a password.')});return false;}if(_this.state.password.length<webdavSecretMinLength){_this.setState({errMsg:gettext('The password is too short.')});return false;}if(Utils.getStrengthLevel(_this.state.password)<webdavSecretStrengthLevel){_this.setState({errMsg:gettext('The password is too weak. It should include at least {passwordStrengthLevel} of the following: number, upper letter, lower letter and other symbols.').replace('{passwordStrengthLevel}',webdavSecretStrengthLevel)});return false;}_this.setState({btnDisabled:true});_this.props.setPassword(_this.state.password.trim());};_this.handleInputChange=function(e){_this.setState({password:e.target.value});};_this.togglePasswordVisible=function(){_this.setState({isPasswordVisible:!_this.state.isPasswordVisible});};_this.generatePassword=function(){var randomPassword=Utils.generatePassword(webdavSecretMinLength);_this.setState({password:randomPassword});};_this.state={password:'',isPasswordVisible:false,btnDisabled:false,errMsg:''};return _this;}_createClass(SetWebdavPassword,[{key:\"render\",value:function render(){var toggle=this.props.toggle;var passwordTip=gettext('(at least {passwordMinLength} characters and includes {passwordStrengthLevel} of the following: number, upper letter, lower letter and other symbols)').replace('{passwordMinLength}',webdavSecretMinLength).replace('{passwordStrengthLevel}',webdavSecretStrengthLevel);return/*#__PURE__*/_jsxs(Modal,{centered:true,isOpen:true,toggle:toggle,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:toggle,children:gettext('Set WebDAV Password')}),/*#__PURE__*/_jsxs(ModalBody,{children:[/*#__PURE__*/_jsxs(InputGroup,{children:[/*#__PURE__*/_jsx(Input,{type:this.state.isPasswordVisible?'text':'password',value:this.state.password,onChange:this.handleInputChange,autoComplete:\"new-password\"}),/*#__PURE__*/_jsxs(InputGroupAddon,{addonType:\"append\",children:[/*#__PURE__*/_jsx(Button,{onClick:this.togglePasswordVisible,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas \".concat(this.state.isPasswordVisible?'fa-eye':'fa-eye-slash')})}),/*#__PURE__*/_jsx(Button,{onClick:this.generatePassword,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-magic\"})})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"form-text text-muted m-0\",children:passwordTip}),this.state.errMsg&&/*#__PURE__*/_jsx(Alert,{color:\"danger\",className:\"m-0 mt-2\",children:gettext(this.state.errMsg)})]}),/*#__PURE__*/_jsxs(ModalFooter,{children:[/*#__PURE__*/_jsx(Button,{color:\"secondary\",onClick:toggle,children:gettext('Cancel')}),/*#__PURE__*/_jsx(Button,{color:\"primary\",onClick:this.submit,disabled:this.state.btnDisabled,children:gettext('Submit')})]})]});}}]);return SetWebdavPassword;}(Component);export default SetWebdavPassword;","map":{"version":3,"names":["React","Component","Modal","ModalHeader","ModalBody","ModalFooter","Alert","Button","Input","InputGroup","InputGroupAddon","gettext","Utils","jsx","_jsx","jsxs","_jsxs","_window$app$pageOptio","window","app","pageOptions","webdavSecretMinLength","webdavSecretStrengthLevel","SetWebdavPassword","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","submit","state","password","length","setState","errMsg","getStrengthLevel","replace","btnDisabled","setPassword","trim","handleInputChange","e","target","value","togglePasswordVisible","isPasswordVisible","generatePassword","randomPassword","_createClass","key","render","toggle","passwordTip","centered","isOpen","children","type","onChange","autoComplete","addonType","onClick","className","concat","color","disabled"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/set-webdav-password.js"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Alert, Button, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  setPassword: PropTypes.func.isRequired,\n  toggle: PropTypes.func.isRequired\n};\n\nconst { webdavSecretMinLength, webdavSecretStrengthLevel } = window.app.pageOptions;\n\nclass SetWebdavPassword extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      password: '',\n      isPasswordVisible: false,\n      btnDisabled: false,\n      errMsg: ''\n    };\n  }\n\n  submit = () => {\n\n    if (this.state.password.length === 0) {\n      this.setState({errMsg: gettext('Please enter a password.')});\n      return false;\n    }\n    if (this.state.password.length < webdavSecretMinLength) {\n      this.setState({errMsg: gettext('The password is too short.')});\n      return false;\n    }\n\n    if (Utils.getStrengthLevel(this.state.password) < webdavSecretStrengthLevel) {\n      this.setState({errMsg: gettext('The password is too weak. It should include at least {passwordStrengthLevel} of the following: number, upper letter, lower letter and other symbols.').replace('{passwordStrengthLevel}', webdavSecretStrengthLevel)});\n      return false;\n    }\n\n    this.setState({\n      btnDisabled: true\n    });\n\n    this.props.setPassword(this.state.password.trim());\n  };\n\n  handleInputChange = (e) => {\n    this.setState({password: e.target.value});\n  };\n\n  togglePasswordVisible = () => {\n    this.setState({\n      isPasswordVisible: !this.state.isPasswordVisible\n    });\n  };\n\n  generatePassword = () => {\n    let randomPassword = Utils.generatePassword(webdavSecretMinLength);\n    this.setState({\n      password: randomPassword\n    });\n  };\n\n  render() {\n    const { toggle } = this.props;\n    const passwordTip = gettext('(at least {passwordMinLength} characters and includes {passwordStrengthLevel} of the following: number, upper letter, lower letter and other symbols)').replace('{passwordMinLength}', webdavSecretMinLength).replace('{passwordStrengthLevel}', webdavSecretStrengthLevel);\n\n    return (\n      <Modal centered={true} isOpen={true} toggle={toggle}>\n        <ModalHeader toggle={toggle}>{gettext('Set WebDAV Password')}</ModalHeader>\n        <ModalBody>\n          <InputGroup>\n            <Input type={this.state.isPasswordVisible ? 'text' : 'password'} value={this.state.password} onChange={this.handleInputChange} autoComplete=\"new-password\"/>\n            <InputGroupAddon addonType=\"append\">\n              <Button onClick={this.togglePasswordVisible}><i className={`fas ${this.state.isPasswordVisible ? 'fa-eye': 'fa-eye-slash'}`}></i></Button>\n              <Button onClick={this.generatePassword}><i className=\"fas fa-magic\"></i></Button>\n            </InputGroupAddon>\n          </InputGroup>\n          <p className=\"form-text text-muted m-0\">{passwordTip}</p>\n          {this.state.errMsg && <Alert color=\"danger\" className=\"m-0 mt-2\">{gettext(this.state.errMsg)}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit} disabled={this.state.btnDisabled}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSetWebdavPassword.propTypes = propTypes;\n\nexport default SetWebdavPassword;\n"],"mappings":"wkBAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CAExC,OAASC,KAAK,CAAEC,WAAW,CAAEC,SAAS,CAAEC,WAAW,CAAEC,KAAK,CAAEC,MAAM,CAAEC,KAAK,CAAEC,UAAU,CAAEC,eAAe,KAAQ,YAAY,CAC1H,OAASC,OAAO,KAAQ,uBAAuB,CAC/C,OAASC,KAAK,KAAQ,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAO1C,IAAAC,qBAAA,CAA6DC,MAAM,CAACC,GAAG,CAACC,WAAW,CAA3EC,qBAAqB,CAAAJ,qBAAA,CAArBI,qBAAqB,CAAEC,yBAAyB,CAAAL,qBAAA,CAAzBK,yBAAyB,CAA4B,GAE9E,CAAAC,iBAAiB,uBAAAC,UAAA,EAAAC,SAAA,CAAAF,iBAAA,CAAAC,UAAA,MAAAE,MAAA,CAAAC,YAAA,CAAAJ,iBAAA,EAErB,SAAAA,kBAAYK,KAAK,CAAE,KAAAC,KAAA,CAAAC,eAAA,MAAAP,iBAAA,EACjBM,KAAA,CAAAH,MAAA,CAAAK,IAAA,MAAMH,KAAK,EAAEC,KAAA,CASfG,MAAM,CAAG,UAAM,CAEb,GAAIH,KAAA,CAAKI,KAAK,CAACC,QAAQ,CAACC,MAAM,GAAK,CAAC,CAAE,CACpCN,KAAA,CAAKO,QAAQ,CAAC,CAACC,MAAM,CAAE1B,OAAO,CAAC,0BAA0B,CAAC,CAAC,CAAC,CAC5D,MAAO,MAAK,CACd,CACA,GAAIkB,KAAA,CAAKI,KAAK,CAACC,QAAQ,CAACC,MAAM,CAAGd,qBAAqB,CAAE,CACtDQ,KAAA,CAAKO,QAAQ,CAAC,CAACC,MAAM,CAAE1B,OAAO,CAAC,4BAA4B,CAAC,CAAC,CAAC,CAC9D,MAAO,MAAK,CACd,CAEA,GAAIC,KAAK,CAAC0B,gBAAgB,CAACT,KAAA,CAAKI,KAAK,CAACC,QAAQ,CAAC,CAAGZ,yBAAyB,CAAE,CAC3EO,KAAA,CAAKO,QAAQ,CAAC,CAACC,MAAM,CAAE1B,OAAO,CAAC,sJAAsJ,CAAC,CAAC4B,OAAO,CAAC,yBAAyB,CAAEjB,yBAAyB,CAAC,CAAC,CAAC,CACtP,MAAO,MAAK,CACd,CAEAO,KAAA,CAAKO,QAAQ,CAAC,CACZI,WAAW,CAAE,IACf,CAAC,CAAC,CAEFX,KAAA,CAAKD,KAAK,CAACa,WAAW,CAACZ,KAAA,CAAKI,KAAK,CAACC,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAAC,CACpD,CAAC,CAAAb,KAAA,CAEDc,iBAAiB,CAAG,SAACC,CAAC,CAAK,CACzBf,KAAA,CAAKO,QAAQ,CAAC,CAACF,QAAQ,CAAEU,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAC3C,CAAC,CAAAjB,KAAA,CAEDkB,qBAAqB,CAAG,UAAM,CAC5BlB,KAAA,CAAKO,QAAQ,CAAC,CACZY,iBAAiB,CAAE,CAACnB,KAAA,CAAKI,KAAK,CAACe,iBACjC,CAAC,CAAC,CACJ,CAAC,CAAAnB,KAAA,CAEDoB,gBAAgB,CAAG,UAAM,CACvB,GAAI,CAAAC,cAAc,CAAGtC,KAAK,CAACqC,gBAAgB,CAAC5B,qBAAqB,CAAC,CAClEQ,KAAA,CAAKO,QAAQ,CAAC,CACZF,QAAQ,CAAEgB,cACZ,CAAC,CAAC,CACJ,CAAC,CA9CCrB,KAAA,CAAKI,KAAK,CAAG,CACXC,QAAQ,CAAE,EAAE,CACZc,iBAAiB,CAAE,KAAK,CACxBR,WAAW,CAAE,KAAK,CAClBH,MAAM,CAAE,EACV,CAAC,CAAC,OAAAR,KAAA,CACJ,CAACsB,YAAA,CAAA5B,iBAAA,GAAA6B,GAAA,UAAAN,KAAA,CA0CD,SAAAO,OAAA,CAAS,CACP,GAAQ,CAAAC,MAAM,CAAK,IAAI,CAAC1B,KAAK,CAArB0B,MAAM,CACd,GAAM,CAAAC,WAAW,CAAG5C,OAAO,CAAC,uJAAuJ,CAAC,CAAC4B,OAAO,CAAC,qBAAqB,CAAElB,qBAAqB,CAAC,CAACkB,OAAO,CAAC,yBAAyB,CAAEjB,yBAAyB,CAAC,CAExS,mBACEN,KAAA,CAACd,KAAK,EAACsD,QAAQ,CAAE,IAAK,CAACC,MAAM,CAAE,IAAK,CAACH,MAAM,CAAEA,MAAO,CAAAI,QAAA,eAClD5C,IAAA,CAACX,WAAW,EAACmD,MAAM,CAAEA,MAAO,CAAAI,QAAA,CAAE/C,OAAO,CAAC,qBAAqB,CAAC,CAAc,CAAC,cAC3EK,KAAA,CAACZ,SAAS,EAAAsD,QAAA,eACR1C,KAAA,CAACP,UAAU,EAAAiD,QAAA,eACT5C,IAAA,CAACN,KAAK,EAACmD,IAAI,CAAE,IAAI,CAAC1B,KAAK,CAACe,iBAAiB,CAAG,MAAM,CAAG,UAAW,CAACF,KAAK,CAAE,IAAI,CAACb,KAAK,CAACC,QAAS,CAAC0B,QAAQ,CAAE,IAAI,CAACjB,iBAAkB,CAACkB,YAAY,CAAC,cAAc,CAAC,CAAC,cAC5J7C,KAAA,CAACN,eAAe,EAACoD,SAAS,CAAC,QAAQ,CAAAJ,QAAA,eACjC5C,IAAA,CAACP,MAAM,EAACwD,OAAO,CAAE,IAAI,CAAChB,qBAAsB,CAAAW,QAAA,cAAC5C,IAAA,MAAGkD,SAAS,QAAAC,MAAA,CAAS,IAAI,CAAChC,KAAK,CAACe,iBAAiB,CAAG,QAAQ,CAAE,cAAc,CAAG,CAAI,CAAC,CAAQ,CAAC,cAC1IlC,IAAA,CAACP,MAAM,EAACwD,OAAO,CAAE,IAAI,CAACd,gBAAiB,CAAAS,QAAA,cAAC5C,IAAA,MAAGkD,SAAS,CAAC,cAAc,CAAI,CAAC,CAAQ,CAAC,EAClE,CAAC,EACR,CAAC,cACblD,IAAA,MAAGkD,SAAS,CAAC,0BAA0B,CAAAN,QAAA,CAAEH,WAAW,CAAI,CAAC,CACxD,IAAI,CAACtB,KAAK,CAACI,MAAM,eAAIvB,IAAA,CAACR,KAAK,EAAC4D,KAAK,CAAC,QAAQ,CAACF,SAAS,CAAC,UAAU,CAAAN,QAAA,CAAE/C,OAAO,CAAC,IAAI,CAACsB,KAAK,CAACI,MAAM,CAAC,CAAQ,CAAC,EAC5F,CAAC,cACZrB,KAAA,CAACX,WAAW,EAAAqD,QAAA,eACV5C,IAAA,CAACP,MAAM,EAAC2D,KAAK,CAAC,WAAW,CAACH,OAAO,CAAET,MAAO,CAAAI,QAAA,CAAE/C,OAAO,CAAC,QAAQ,CAAC,CAAS,CAAC,cACvEG,IAAA,CAACP,MAAM,EAAC2D,KAAK,CAAC,SAAS,CAACH,OAAO,CAAE,IAAI,CAAC/B,MAAO,CAACmC,QAAQ,CAAE,IAAI,CAAClC,KAAK,CAACO,WAAY,CAAAkB,QAAA,CAAE/C,OAAO,CAAC,QAAQ,CAAC,CAAS,CAAC,EACjG,CAAC,EACT,CAAC,CAEZ,CAAC,WAAAY,iBAAA,GA5E6BtB,SAAS,EAiFzC,cAAe,CAAAsB,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}