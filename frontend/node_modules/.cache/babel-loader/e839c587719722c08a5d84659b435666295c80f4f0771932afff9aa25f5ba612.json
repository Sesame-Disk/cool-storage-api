{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{Modal,ModalHeader,ModalBody}from'reactstrap';import{seafileAPI}from'../../utils/seafile-api';import{gettext}from'../../utils/constants';import{Utils}from'../../utils/utils';import toaster from'../toast';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FileUpdateDetailDialog=/*#__PURE__*/function(_React$Component){_inherits(FileUpdateDetailDialog,_React$Component);var _super=_createSuper(FileUpdateDetailDialog);function FileUpdateDetailDialog(props){var _this;_classCallCheck(this,FileUpdateDetailDialog);_this=_super.call(this,props);_this.renderContentItem=function(items){var con='';con+='<ul class=\"list-group list-group-flush\">';for(var i=0,len=items.length;i<len;i++){con+='<li class=\"list-group-item\">'+items[i]+'</li>';}con+='</ul>';return{__html:con};};_this.renderContent=function(){if(_this.state.newfile.length>0){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:gettext('New files')}),/*#__PURE__*/_jsx(\"p\",{children:_this.state.time}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:_this.renderContentItem(_this.state.newfile)})]});}if(_this.state.removed.length>0){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:gettext('Deleted files')}),/*#__PURE__*/_jsx(\"p\",{children:_this.state.time}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:_this.renderContentItem(_this.state.removed)})]});}if(_this.state.renamed.length>0){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:gettext('Renamed or Moved files')}),/*#__PURE__*/_jsx(\"p\",{children:_this.state.time}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:_this.renderContentItem(_this.state.renamed)})]});}if(_this.state.modified.length>0){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:gettext('Modified files')}),/*#__PURE__*/_jsx(\"p\",{children:_this.state.time}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:_this.renderContentItem(_this.state.modified)})]});}if(_this.state.newdir.length>0){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:gettext('New directories')}),/*#__PURE__*/_jsx(\"p\",{children:_this.state.time}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:_this.renderContentItem(_this.state.newdir)})]});}if(_this.state.deldir.length>0){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:gettext('Deleted directories')}),/*#__PURE__*/_jsx(\"p\",{children:_this.state.time}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:_this.renderContentItem(_this.state.deldir)})]});}};_this.state={time:'',renamed:[],deldir:[],modified:[],newdir:[],newfile:[],removed:[]};return _this;}_createClass(FileUpdateDetailDialog,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;seafileAPI.orgAdminGetFileUpdateDetail(this.props.repoID,this.props.commitID).then(function(res){_this2.setState({time:res.data.date_time,renamed:_this2.state.renamed.concat(res.data.renamed),deldir:_this2.state.deldir.concat(res.data.deldir),modified:_this2.state.modified.concat(res.data.modified),newdir:_this2.state.newdir.concat(res.data.newdir),newfile:_this2.state.newfile.concat(res.data.new),removed:_this2.state.removed.concat(res.data.removed)});}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(Modal,{isOpen:true,toggle:this.props.toggleCancel,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:this.props.toggleCancel,children:gettext('Modification Details')}),/*#__PURE__*/_jsx(ModalBody,{children:this.renderContent()})]});}}]);return FileUpdateDetailDialog;}(React.Component);export default FileUpdateDetailDialog;","map":{"version":3,"names":["React","Modal","ModalHeader","ModalBody","seafileAPI","gettext","Utils","toaster","jsx","_jsx","jsxs","_jsxs","FileUpdateDetailDialog","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","renderContentItem","items","con","i","len","length","__html","renderContent","state","newfile","children","time","dangerouslySetInnerHTML","removed","renamed","modified","newdir","deldir","_createClass","key","value","componentDidMount","_this2","orgAdminGetFileUpdateDetail","repoID","commitID","then","res","setState","data","date_time","concat","new","catch","error","errMessage","getErrorMsg","danger","render","isOpen","toggle","toggleCancel","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/org-logs-file-update-detail.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  commitID: PropTypes.string.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n};\n\nclass FileUpdateDetailDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      time: '',\n      renamed: [],\n      deldir: [],\n      modified: [],\n      newdir: [],\n      newfile: [],\n      removed: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.orgAdminGetFileUpdateDetail(this.props.repoID, this.props.commitID).then(res => {\n      this.setState({\n        time: res.data.date_time,\n        renamed: this.state.renamed.concat(res.data.renamed),\n        deldir: this.state.deldir.concat(res.data.deldir),\n        modified: this.state.modified.concat(res.data.modified),\n        newdir: this.state.newdir.concat(res.data.newdir),\n        newfile: this.state.newfile.concat(res.data.new),\n        removed: this.state.removed.concat(res.data.removed),\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  renderContentItem = (items) => {\n    let con = '';\n    con += '<ul class=\"list-group list-group-flush\">';\n    for (var i = 0, len = items.length; i < len; i++) {\n      con += '<li class=\"list-group-item\">' + items[i] + '</li>';\n    }\n    con += '</ul>';\n    return {__html: con};\n  };\n\n  renderContent = () => {\n    if (this.state.newfile.length > 0) {\n      return (\n        <div>\n          <h4>{gettext('New files')}</h4>\n          <p>{this.state.time}</p>\n          <div dangerouslySetInnerHTML= {this.renderContentItem(this.state.newfile)} />\n        </div>\n      );\n    }\n\n    if (this.state.removed.length > 0) {\n      return (\n        <div>\n          <h4>{gettext('Deleted files')}</h4>\n          <p>{this.state.time}</p>\n          <div dangerouslySetInnerHTML= {this.renderContentItem(this.state.removed)} />\n        </div>\n      );\n    }\n\n    if (this.state.renamed.length > 0) {\n      return (\n        <div>\n          <h4>{gettext('Renamed or Moved files')}</h4>\n          <p>{this.state.time}</p>\n          <div dangerouslySetInnerHTML= {this.renderContentItem(this.state.renamed)} />\n        </div>\n      );\n    }\n\n    if (this.state.modified.length > 0) {\n      return (\n        <div>\n          <h4>{gettext('Modified files')}</h4>\n          <p>{this.state.time}</p>\n          <div dangerouslySetInnerHTML= {this.renderContentItem(this.state.modified)} />\n        </div>\n      );\n    }\n\n    if (this.state.newdir.length > 0) {\n      return (\n        <div>\n          <h4>{gettext('New directories')}</h4>\n          <p>{this.state.time}</p>\n          <div dangerouslySetInnerHTML= {this.renderContentItem(this.state.newdir)} />\n        </div>\n      );\n    }\n\n    if (this.state.deldir.length > 0) {\n      return (\n        <div>\n          <h4>{gettext('Deleted directories')}</h4>\n          <p>{this.state.time}</p>\n          <div dangerouslySetInnerHTML= {this.renderContentItem(this.state.deldir)} />\n        </div>\n      );\n    }\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleCancel}>\n        <ModalHeader toggle={this.props.toggleCancel}>\n          {gettext('Modification Details')}\n        </ModalHeader>\n        <ModalBody>\n          {this.renderContent()}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nFileUpdateDetailDialog.propTypes = propTypes;\n\nexport default FileUpdateDetailDialog;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}