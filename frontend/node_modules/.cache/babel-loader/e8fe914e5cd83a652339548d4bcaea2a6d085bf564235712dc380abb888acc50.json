{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{Button}from'reactstrap';import toaster from'../toast';import copy from'../copy-to-clipboard';import{gettext}from'../../utils/constants';import{seafileAPI}from'../../utils/seafile-api';import{Utils}from'../../utils/utils';import Loading from'../loading';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var InternalLink=/*#__PURE__*/function(_React$Component){_inherits(InternalLink,_React$Component);var _super=_createSuper(InternalLink);function InternalLink(props){var _this;_classCallCheck(this,InternalLink);_this=_super.call(this,props);_this.copyToClipBoard=function(){copy(_this.state.smartLink);var message=gettext('Internal link has been copied to clipboard');toaster.success(message,{duration:2});};_this.state={smartLink:'',isInternalLoding:true};return _this;}_createClass(InternalLink,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var _this$props=this.props,repoID=_this$props.repoID,path=_this$props.path,direntType=_this$props.direntType;seafileAPI.getInternalLink(repoID,path,direntType).then(function(res){_this2.setState({smartLink:res.data.smart_link,isInternalLoding:false});}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});}},{key:\"render\",value:function render(){if(this.state.isInternalLoding){return/*#__PURE__*/_jsx(Loading,{});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"tip mb-1\",children:gettext('An internal link is a link to a file or folder that can be accessed by users with read permission to the file or folder.')}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"a\",{target:\"_blank\",href:this.state.smartLink,rel:\"noreferrer\",children:this.state.smartLink})}),/*#__PURE__*/_jsx(Button,{onClick:this.copyToClipBoard,color:\"primary\",className:\"mt-2\",children:gettext('Copy')})]});}}]);return InternalLink;}(React.Component);export default InternalLink;","map":{"version":3,"names":["React","Button","toaster","copy","gettext","seafileAPI","Utils","Loading","jsx","_jsx","jsxs","_jsxs","InternalLink","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","copyToClipBoard","state","smartLink","message","success","duration","isInternalLoding","_createClass","key","value","componentDidMount","_this2","_this$props","repoID","path","direntType","getInternalLink","then","res","setState","data","smart_link","catch","error","errMessage","getErrorMsg","danger","render","children","className","target","href","rel","onClick","color","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/internal-link.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport toaster from '../toast';\nimport copy from '../copy-to-clipboard';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  direntType: PropTypes.string\n};\n\nclass InternalLink extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      smartLink: '',\n      isInternalLoding: true,\n    };\n  }\n\n  componentDidMount() {\n    let { repoID, path, direntType } = this.props;\n    seafileAPI.getInternalLink(repoID, path, direntType).then(res => {\n      this.setState({\n        smartLink: res.data.smart_link,\n        isInternalLoding: false\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  copyToClipBoard = () => {\n    copy(this.state.smartLink);\n    let message = gettext('Internal link has been copied to clipboard');\n    toaster.success(message, {\n      duration: 2\n    });\n  };\n\n  render() {\n    if (this.state.isInternalLoding) {\n      return (<Loading />);\n    }\n    return (\n      <div>\n        <p className=\"tip mb-1\">\n          {gettext('An internal link is a link to a file or folder that can be accessed by users with read permission to the file or folder.')}\n        </p>\n        <p>\n          <a target=\"_blank\" href={this.state.smartLink} rel=\"noreferrer\">{this.state.smartLink}</a>\n        </p>\n        <Button onClick={this.copyToClipBoard} color=\"primary\" className=\"mt-2\">{gettext('Copy')}</Button>\n      </div>\n    );\n  }\n}\n\nInternalLink.propTypes = propTypes;\n\nexport default InternalLink;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}