{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Fragment}from'react';import{Button,ButtonGroup}from'reactstrap';import{gettext,siteRoot,name,fileServerRoot,useGoFileserver}from'../../utils/constants';import{Utils}from'../../utils/utils';import{seafileAPI}from'../../utils/seafile-api';import URLDecorator from'../../utils/url-decorator';import MoveDirentDialog from'../dialog/move-dirent-dialog';import CopyDirentDialog from'../dialog/copy-dirent-dialog';import ShareDialog from'../dialog/share-dialog';import EditFileTagDialog from'../dialog/edit-filetag-dialog';import ZipDownloadDialog from'../dialog/zip-download-dialog';import Rename from'../dialog/rename-dirent';import LibSubFolderPermissionDialog from'../dialog/lib-sub-folder-permission-dialog';import ViewModeToolbar from'./view-mode-toolbar';import ModalPortal from'../modal-portal';import ItemDropdownMenu from'../dropdown-menu/item-dropdown-menu';import toaster from'../toast';import'../../css/dirents-menu.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MultipleDirOperationToolbar=/*#__PURE__*/function(_React$Component){_inherits(MultipleDirOperationToolbar,_React$Component);var _super=_createSuper(MultipleDirOperationToolbar);function MultipleDirOperationToolbar(props){var _this;_classCallCheck(this,MultipleDirOperationToolbar);_this=_super.call(this,props);_this.onMoveToggle=function(){_this.setState({isMoveDialogShow:!_this.state.isMoveDialogShow});};_this.onCopyToggle=function(){_this.setState({isCopyDialogShow:!_this.state.isCopyDialogShow});};_this.onItemsDelete=function(){_this.props.onItemsDelete();};_this.onItemsDownload=function(){var _this$props=_this.props,path=_this$props.path,repoID=_this$props.repoID,selectedDirentList=_this$props.selectedDirentList;if(selectedDirentList.length){if(selectedDirentList.length===1&&!selectedDirentList[0].isDir()){var direntPath=Utils.joinPath(path,selectedDirentList[0].name);var url=URLDecorator.getUrl({type:'download_file_url',repoID:repoID,filePath:direntPath});location.href=url;return;}if(!useGoFileserver){_this.setState({isZipDialogOpen:true});}else{var target=_this.props.selectedDirentList.map(function(dirent){return dirent.name;});seafileAPI.zipDownload(repoID,path,target).then(function(res){var zipToken=res.data['zip_token'];location.href=\"\".concat(fileServerRoot,\"zip/\").concat(zipToken);}).catch(function(error){var errorMsg=Utils.getErrorMsg(error);_this.setState({isLoading:false,errorMsg:errorMsg});});}}};_this.closeZipDialog=function(){_this.setState({isZipDialogOpen:false});};_this.checkDuplicatedName=function(newName){return Utils.checkDuplicatedNameInList(_this.props.direntList,newName);};_this.onItemRename=function(newName){var dirent=_this.props.selectedDirentList[0];_this.props.onItemRename(dirent,newName);};_this.onPermissionItem=function(){_this.setState({showLibContentViewDialogs:!_this.state.showLibContentViewDialogs,isPermissionDialogOpen:!_this.state.isPermissionDialogOpen});};_this.onStartRevise=function(dirent){var repoID=_this.props.repoID;var filePath=_this.getDirentPath(dirent);seafileAPI.sdocStartRevise(repoID,filePath).then(function(res){var url=siteRoot+'lib/'+repoID+'/file'+Utils.encodePath(res.data.file_path);window.open(url);}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this.getDirentMenuList=function(dirent){var isRepoOwner=_this.props.isRepoOwner;var currentRepoInfo=_this.props.currentRepoInfo;var isContextmenu=true;var opList=Utils.getDirentOperationList(isRepoOwner,currentRepoInfo,dirent,isContextmenu);var list=['Move','Copy','Delete','Download'];if(dirent.type=='dir'){opList=opList.filter(function(item,index){return list.indexOf(item.key)==-1&&item!='Divider';});}else{opList=opList.filter(function(item,index){return list.indexOf(item.key)==-1;});}return opList;};_this.onMenuItemClick=function(operation){var dirents=_this.props.selectedDirentList;var dirent=dirents[0];switch(operation){case'Share':_this.setState({showLibContentViewDialogs:true,showShareDialog:true});break;case'Rename':_this.setState({showLibContentViewDialogs:true,isRenameDialogOpen:true});break;case'Permission':_this.onPermissionItem();break;case'Tags':_this.listFileTags(dirent);break;case'Lock':_this.lockFile(dirent);break;case'Unlock':_this.unlockFile(dirent);break;case'History':_this.onHistory(dirent);break;case'Access Log':_this.onAccessLog(dirent);break;case'Properties':_this.props.showDirentDetail('info');break;case'Open via Client':_this.onOpenViaClient(dirent);break;default:break;}};_this.lockFile=function(dirent){var filePath=_this.getDirentPath(dirent);seafileAPI.lockfile(_this.props.repoID,filePath).then(function(res){if(res.data.is_locked){_this.props.updateDirent(dirent,'is_locked',true);_this.props.updateDirent(dirent,'locked_by_me',true);_this.props.updateDirent(dirent,'lock_owner_name',name);_this.props.unSelectDirent();}}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this.unlockFile=function(dirent){var filePath=_this.getDirentPath(dirent);seafileAPI.unlockfile(_this.props.repoID,filePath).then(function(res){if(!res.data.is_locked){_this.props.updateDirent(dirent,'is_locked',false);_this.props.updateDirent(dirent,'locked_by_me',false);_this.props.updateDirent(dirent,'lock_owner_name','');_this.props.unSelectDirent();}}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this.onOpenViaClient=function(dirent){var filePath=_this.getDirentPath(dirent);var url=URLDecorator.getUrl({type:'open_via_client',repoID:_this.props.repoID,filePath:filePath});location.href=url;};_this.onHistory=function(dirent){var filePath=_this.getDirentPath(dirent);var url=URLDecorator.getUrl({type:'file_revisions',repoID:_this.props.repoID,filePath:filePath});location.href=url;};_this.onAccessLog=function(dirent){var filePath=_this.getDirentPath(dirent);var path=siteRoot+'repo/file-access/'+_this.props.repoID+'/?p='+encodeURIComponent(filePath);window.open(path);};_this.toggleCancel=function(){_this.setState({showLibContentViewDialogs:false,showShareDialog:false,showEditFileTagDialog:false,isRenameDialogOpen:false,isPermissionDialogOpen:false});};_this.listFileTags=function(dirent){var filePath=_this.getDirentPath(dirent);seafileAPI.listFileTags(_this.props.repoID,filePath).then(function(res){var fileTagList=res.data.file_tags;for(var i=0,length=fileTagList.length;i<length;i++){fileTagList[i].id=fileTagList[i].file_tag_id;}_this.setState({fileTagList:fileTagList,showLibContentViewDialogs:true,showEditFileTagDialog:true});}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this.onMenuFileTagChanged=function(){_this.listFileTags(_this.props.selectedDirentList[0]);var length=_this.props.selectedDirentList.length;for(var i=0;i<length;i++){var dirent=_this.props.selectedDirentList[i];var direntPath=_this.getDirentPath(dirent);_this.props.onFilesTagChanged(dirent,direntPath);}};_this.getDirentPath=function(dirent){if(dirent)return Utils.joinPath(_this.props.path,dirent.name);};_this.state={isZipDialogOpen:false,isMoveDialogShow:false,isCopyDialogShow:false,isMutipleOperation:true,showLibContentViewDialogs:false,showShareDialog:false,showEditFileTagDialog:false,fileTagList:[],multiFileTagList:[],isRenameDialogOpen:false,isPermissionDialogOpen:false};return _this;}_createClass(MultipleDirOperationToolbar,[{key:\"render\",value:function render(){var _this$props2=this.props,repoID=_this$props2.repoID,repoTags=_this$props2.repoTags,userPerm=_this$props2.userPerm;var dirent=this.props.selectedDirentList[0];var direntPath=this.getDirentPath(dirent);var _Utils$getUserPermiss=Utils.getUserPermission(userPerm),isCustomPermission=_Utils$getUserPermiss.isCustomPermission,customPermission=_Utils$getUserPermiss.customPermission;var canDelete=true;var canDownload=true;var canCopy=true;var canModify=true;if(isCustomPermission){var permission=customPermission.permission;canDelete=permission.delete;canDownload=permission.download;canCopy=permission.copy;canModify=permission.modify;}return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"dir-operation\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex\",children:/*#__PURE__*/_jsxs(ButtonGroup,{className:\"flex-row group-operations\",children:[(userPerm==='rw'||userPerm==='admin'||isCustomPermission)&&/*#__PURE__*/_jsxs(Fragment,{children:[canModify&&/*#__PURE__*/_jsx(Button,{className:\"secondary group-op-item action-icon sf2-icon-move\",title:gettext('Move'),\"aria-label\":gettext('Move'),onClick:this.onMoveToggle}),canCopy&&/*#__PURE__*/_jsx(Button,{className:\"secondary group-op-item action-icon sf2-icon-copy\",title:gettext('Copy'),\"aria-label\":gettext('Copy'),onClick:this.onCopyToggle}),canDelete&&/*#__PURE__*/_jsx(Button,{className:\"secondary group-op-item action-icon sf2-icon-delete\",title:gettext('Delete'),\"aria-label\":gettext('Delete'),onClick:this.onItemsDelete}),canDownload&&/*#__PURE__*/_jsx(Button,{className:\"secondary group-op-item action-icon sf2-icon-download\",title:gettext('Download'),\"aria-label\":gettext('Download'),onClick:this.onItemsDownload})]}),userPerm==='cloud-edit'&&/*#__PURE__*/_jsxs(Fragment,{children:[canModify&&/*#__PURE__*/_jsx(Button,{className:\"secondary group-op-item action-icon sf2-icon-move\",title:gettext('Move'),\"aria-label\":gettext('Move'),onClick:this.onMoveToggle}),canCopy&&/*#__PURE__*/_jsx(Button,{className:\"secondary group-op-item action-icon sf2-icon-copy\",title:gettext('Copy'),\"aria-label\":gettext('Copy'),onClick:this.onCopyToggle}),canDelete&&/*#__PURE__*/_jsx(Button,{className:\"secondary group-op-item action-icon sf2-icon-delete\",title:gettext('Delete'),\"aria-label\":gettext('Delete'),onClick:this.onItemsDelete})]}),userPerm==='r'&&/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Button,{className:\"secondary group-op-item action-icon sf2-icon-copy\",title:gettext('Copy'),\"aria-label\":gettext('Copy'),onClick:this.onCopyToggle}),/*#__PURE__*/_jsx(Button,{className:\"secondary group-op-item action-icon sf2-icon-download\",title:gettext('Download'),\"aria-label\":gettext('Download'),onClick:this.onItemsDownload})]}),this.props.selectedDirentList.length===1&&/*#__PURE__*/_jsx(ItemDropdownMenu,{tagName:'button',item:this.props.selectedDirentList[0],toggleClass:'fas fa-ellipsis-v dirents-more-menu',onMenuItemClick:this.onMenuItemClick,getMenuList:this.getDirentMenuList})]})})}),Utils.isDesktop()&&/*#__PURE__*/_jsx(ViewModeToolbar,{currentMode:this.props.currentMode,switchViewMode:this.props.switchViewMode,isCustomPermission:isCustomPermission}),this.state.isMoveDialogShow&&/*#__PURE__*/_jsx(MoveDirentDialog,{path:this.props.path,repoID:this.props.repoID,repoEncrypted:this.props.repoEncrypted,isMutipleOperation:this.state.isMutipleOperation,selectedDirentList:this.props.selectedDirentList,onItemsMove:this.props.onItemsMove,onCancelMove:this.onMoveToggle}),this.state.isCopyDialogShow&&/*#__PURE__*/_jsx(CopyDirentDialog,{path:this.props.path,repoID:this.props.repoID,repoEncrypted:this.props.repoEncrypted,selectedDirentList:this.props.selectedDirentList,isMutipleOperation:this.state.isMutipleOperation,onItemsCopy:this.props.onItemsCopy,onCancelCopy:this.onCopyToggle}),this.state.isZipDialogOpen&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(ZipDownloadDialog,{repoID:this.props.repoID,path:this.props.path,target:this.props.selectedDirentList.map(function(dirent){return dirent.name;}),toggleDialog:this.closeZipDialog})}),this.state.showLibContentViewDialogs&&/*#__PURE__*/_jsxs(Fragment,{children:[this.state.showShareDialog&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(ShareDialog,{itemType:dirent.type,itemName:dirent.name,itemPath:direntPath,userPerm:dirent.permission,repoID:repoID,repoEncrypted:this.props.repoEncrypted,enableDirPrivateShare:this.props.enableDirPrivateShare,isGroupOwnedRepo:this.props.isGroupOwnedRepo,toggleDialog:this.toggleCancel})}),this.state.isRenameDialogOpen&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(Rename,{dirent:dirent,onRename:this.onItemRename,checkDuplicatedName:this.checkDuplicatedName,toggleCancel:this.toggleCancel})}),this.state.isPermissionDialogOpen&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(LibSubFolderPermissionDialog,{toggleDialog:this.toggleCancel,repoID:repoID,folderPath:direntPath,folderName:dirent.name,isDepartmentRepo:this.props.isGroupOwnedRepo})}),this.state.showEditFileTagDialog&&/*#__PURE__*/_jsx(ModalPortal,{children:/*#__PURE__*/_jsx(EditFileTagDialog,{repoID:repoID,repoTags:repoTags,filePath:direntPath,fileTagList:this.state.fileTagList,toggleCancel:this.toggleCancel,onFileTagChanged:this.onMenuFileTagChanged})})]})]});}}]);return MultipleDirOperationToolbar;}(React.Component);export default MultipleDirOperationToolbar;","map":{"version":3,"names":["React","Fragment","Button","ButtonGroup","gettext","siteRoot","name","fileServerRoot","useGoFileserver","Utils","seafileAPI","URLDecorator","MoveDirentDialog","CopyDirentDialog","ShareDialog","EditFileTagDialog","ZipDownloadDialog","Rename","LibSubFolderPermissionDialog","ViewModeToolbar","ModalPortal","ItemDropdownMenu","toaster","jsx","_jsx","jsxs","_jsxs","MultipleDirOperationToolbar","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","onMoveToggle","setState","isMoveDialogShow","state","onCopyToggle","isCopyDialogShow","onItemsDelete","onItemsDownload","_this$props","path","repoID","selectedDirentList","length","isDir","direntPath","joinPath","url","getUrl","type","filePath","location","href","isZipDialogOpen","target","map","dirent","zipDownload","then","res","zipToken","data","concat","catch","error","errorMsg","getErrorMsg","isLoading","closeZipDialog","checkDuplicatedName","newName","checkDuplicatedNameInList","direntList","onItemRename","onPermissionItem","showLibContentViewDialogs","isPermissionDialogOpen","onStartRevise","getDirentPath","sdocStartRevise","encodePath","file_path","window","open","errMessage","danger","getDirentMenuList","isRepoOwner","currentRepoInfo","isContextmenu","opList","getDirentOperationList","list","filter","item","index","indexOf","key","onMenuItemClick","operation","dirents","showShareDialog","isRenameDialogOpen","listFileTags","lockFile","unlockFile","onHistory","onAccessLog","showDirentDetail","onOpenViaClient","lockfile","is_locked","updateDirent","unSelectDirent","unlockfile","encodeURIComponent","toggleCancel","showEditFileTagDialog","fileTagList","file_tags","i","id","file_tag_id","onMenuFileTagChanged","onFilesTagChanged","isMutipleOperation","multiFileTagList","_createClass","value","render","_this$props2","repoTags","userPerm","_Utils$getUserPermiss","getUserPermission","isCustomPermission","customPermission","canDelete","canDownload","canCopy","canModify","permission","delete","download","copy","modify","children","className","title","onClick","tagName","toggleClass","getMenuList","isDesktop","currentMode","switchViewMode","repoEncrypted","onItemsMove","onCancelMove","onItemsCopy","onCancelCopy","toggleDialog","itemType","itemName","itemPath","enableDirPrivateShare","isGroupOwnedRepo","onRename","folderPath","folderName","isDepartmentRepo","onFileTagChanged","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/toolbar/multiple-dir-operation-toolbar.js"],"sourcesContent":["import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ButtonGroup } from 'reactstrap';\nimport { gettext, siteRoot, name, fileServerRoot, useGoFileserver } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport Rename from '../dialog/rename-dirent';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport ViewModeToolbar from './view-mode-toolbar';\n\nimport ModalPortal from '../modal-portal';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport toaster from '../toast';\n\nimport '../../css/dirents-menu.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  repoTags: PropTypes.array.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onFilesTagChanged: PropTypes.func.isRequired,\n  unSelectDirent: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n};\n\nclass MultipleDirOperationToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isZipDialogOpen: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isMutipleOperation: true,\n      showLibContentViewDialogs: false,\n      showShareDialog: false,\n      showEditFileTagDialog: false,\n      fileTagList: [],\n      multiFileTagList: [],\n      isRenameDialogOpen: false,\n      isPermissionDialogOpen: false\n    };\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  };\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  };\n\n  onItemsDelete = () => {\n    this.props.onItemsDelete();\n  };\n\n  onItemsDownload = () => {\n    let { path, repoID, selectedDirentList } = this.props;\n    if (selectedDirentList.length) {\n      if (selectedDirentList.length === 1 && !selectedDirentList[0].isDir()) {\n        let direntPath = Utils.joinPath(path, selectedDirentList[0].name);\n        let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n        location.href= url;\n        return;\n      }\n      if (!useGoFileserver) {\n        this.setState({\n          isZipDialogOpen: true\n        });\n      } else {\n        const target = this.props.selectedDirentList.map(dirent => dirent.name);\n        seafileAPI.zipDownload(repoID, path, target).then((res) => {\n          const zipToken = res.data['zip_token'];\n          location.href = `${fileServerRoot}zip/${zipToken}`;\n        }).catch((error) => {\n          let errorMsg = Utils.getErrorMsg(error);\n          this.setState({\n            isLoading: false,\n            errorMsg: errorMsg\n          });\n        });\n      }\n    }\n  };\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  };\n\n  checkDuplicatedName = (newName) => {\n    return Utils.checkDuplicatedNameInList(this.props.direntList, newName);\n  };\n\n  onItemRename = (newName) => {\n    const dirent = this.props.selectedDirentList[0];\n    this.props.onItemRename(dirent, newName);\n  };\n\n  onPermissionItem = () => {\n    this.setState({\n      showLibContentViewDialogs: !this.state.showLibContentViewDialogs,\n      isPermissionDialogOpen: !this.state.isPermissionDialogOpen\n    });\n  };\n\n  onStartRevise = (dirent) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(dirent);\n    seafileAPI.sdocStartRevise(repoID, filePath).then((res) => {\n      let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(res.data.file_path);\n      window.open(url);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  getDirentMenuList = (dirent) => {\n    const isRepoOwner = this.props.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    const isContextmenu = true;\n    let opList = Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n    const list = ['Move', 'Copy', 'Delete', 'Download'];\n    if (dirent.type == 'dir') {\n      opList = opList.filter((item, index) => {\n        return list.indexOf(item.key) == -1 && item != 'Divider';\n      });\n    } else {\n      opList = opList.filter((item, index) => {\n        return list.indexOf(item.key) == -1;\n      });\n    }\n    return opList;\n  };\n\n  onMenuItemClick = (operation) => {\n    const dirents = this.props.selectedDirentList;\n    const dirent = dirents[0];\n    switch (operation) {\n      case 'Share':\n        this.setState({\n          showLibContentViewDialogs: true,\n          showShareDialog: true,\n        });\n        break;\n      case 'Rename':\n        this.setState({\n          showLibContentViewDialogs: true,\n          isRenameDialogOpen: true\n        });\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Tags':\n        this.listFileTags(dirent);\n        break;\n      case 'Lock':\n        this.lockFile(dirent);\n        break;\n      case 'Unlock':\n        this.unlockFile(dirent);\n        break;\n      case 'History':\n        this.onHistory(dirent);\n        break;\n      case 'Access Log':\n        this.onAccessLog(dirent);\n        break;\n      case 'Properties':\n        this.props.showDirentDetail('info');\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient(dirent);\n        break;\n      default:\n        break;\n    }\n  };\n\n  lockFile = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    seafileAPI.lockfile(this.props.repoID, filePath).then((res) => {\n      if (res.data.is_locked) {\n        this.props.updateDirent(dirent, 'is_locked', true);\n        this.props.updateDirent(dirent, 'locked_by_me', true);\n        this.props.updateDirent(dirent, 'lock_owner_name', name);\n        this.props.unSelectDirent();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  unlockFile = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    seafileAPI.unlockfile(this.props.repoID, filePath).then((res) => {\n      if (!res.data.is_locked) {\n        this.props.updateDirent(dirent, 'is_locked', false);\n        this.props.updateDirent(dirent, 'locked_by_me', false);\n        this.props.updateDirent(dirent, 'lock_owner_name', '');\n        this.props.unSelectDirent();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onOpenViaClient = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    let url = URLDecorator.getUrl({\n      type: 'open_via_client',\n      repoID: this.props.repoID,\n      filePath: filePath\n    });\n    location.href = url;\n  };\n\n  onHistory = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    let url = URLDecorator.getUrl({\n      type: 'file_revisions',\n      repoID: this.props.repoID,\n      filePath: filePath\n    });\n    location.href = url;\n  };\n\n  onAccessLog = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  };\n\n  toggleCancel = () => {\n    this.setState({\n      showLibContentViewDialogs: false,\n      showShareDialog: false,\n      showEditFileTagDialog: false,\n      isRenameDialogOpen: false,\n      isPermissionDialogOpen: false,\n    });\n  };\n\n  listFileTags = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    seafileAPI.listFileTags(this.props.repoID, filePath).then(res => {\n      let fileTagList = res.data.file_tags;\n      for (let i = 0, length = fileTagList.length; i < length; i++) {\n        fileTagList[i].id = fileTagList[i].file_tag_id;\n      }\n      this.setState({\n        fileTagList: fileTagList,\n        showLibContentViewDialogs: true,\n        showEditFileTagDialog: true,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onMenuFileTagChanged = () => {\n    this.listFileTags(this.props.selectedDirentList[0]);\n    let length = this.props.selectedDirentList.length;\n    for (let i = 0; i < length; i++) {\n      const dirent = this.props.selectedDirentList[i];\n      const direntPath = this.getDirentPath(dirent);\n      this.props.onFilesTagChanged(dirent, direntPath);\n    }\n  };\n\n  getDirentPath = (dirent) => {\n    if (dirent) return Utils.joinPath(this.props.path, dirent.name);\n  };\n\n  render() {\n\n    const { repoID, repoTags, userPerm } = this.props;\n    const dirent = this.props.selectedDirentList[0];\n    const direntPath = this.getDirentPath(dirent);\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    let canDelete = true;\n    let canDownload = true;\n    let canCopy = true;\n    let canModify = true;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canDelete = permission.delete;\n      canDownload = permission.download;\n      canCopy = permission.copy;\n      canModify = permission.modify;\n    }\n\n    return (\n      <Fragment>\n        <div className=\"dir-operation\">\n          <div className=\"d-flex\">\n            <ButtonGroup className=\"flex-row group-operations\">\n              {(userPerm === 'rw' || userPerm === 'admin' || isCustomPermission) && (\n                <Fragment>\n                  {canModify && <Button className=\"secondary group-op-item action-icon sf2-icon-move\" title={gettext('Move')} aria-label={gettext('Move')} onClick={this.onMoveToggle}></Button>}\n                  {canCopy && <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} aria-label={gettext('Copy')} onClick={this.onCopyToggle}></Button>}\n                  {canDelete && <Button className=\"secondary group-op-item action-icon sf2-icon-delete\" title={gettext('Delete')} aria-label={gettext('Delete')} onClick={this.onItemsDelete}></Button>}\n                  {canDownload && <Button className=\"secondary group-op-item action-icon sf2-icon-download\" title={gettext('Download')} aria-label={gettext('Download')} onClick={this.onItemsDownload}></Button>}\n                </Fragment>\n              )}\n              {userPerm === 'cloud-edit' && (\n                <Fragment>\n                  {canModify && <Button className=\"secondary group-op-item action-icon sf2-icon-move\" title={gettext('Move')} aria-label={gettext('Move')} onClick={this.onMoveToggle}></Button>}\n                  {canCopy && <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} aria-label={gettext('Copy')} onClick={this.onCopyToggle}></Button>}\n                  {canDelete && <Button className=\"secondary group-op-item action-icon sf2-icon-delete\" title={gettext('Delete')} aria-label={gettext('Delete')} onClick={this.onItemsDelete}></Button>}\n                </Fragment>\n              )}\n              {userPerm === 'r' && (\n                <Fragment>\n                  <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} aria-label={gettext('Copy')} onClick={this.onCopyToggle}></Button>\n                  <Button className=\"secondary group-op-item action-icon sf2-icon-download\" title={gettext('Download')} aria-label={gettext('Download')} onClick={this.onItemsDownload}></Button>\n                </Fragment>\n              )}\n              {this.props.selectedDirentList.length === 1 &&\n                <ItemDropdownMenu\n                  tagName={'button'}\n                  item={this.props.selectedDirentList[0]}\n                  toggleClass={'fas fa-ellipsis-v dirents-more-menu'}\n                  onMenuItemClick={this.onMenuItemClick}\n                  getMenuList={this.getDirentMenuList}\n                />\n              }\n            </ButtonGroup>\n          </div>\n        </div>\n        {Utils.isDesktop() && <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode} isCustomPermission={isCustomPermission} />}\n        {this.state.isMoveDialogShow &&\n          <MoveDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.repoEncrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            selectedDirentList={this.props.selectedDirentList}\n            onItemsMove={this.props.onItemsMove}\n            onCancelMove={this.onMoveToggle}\n          />\n        }\n        {this.state.isCopyDialogShow &&\n          <CopyDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.repoEncrypted}\n            selectedDirentList={this.props.selectedDirentList}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemsCopy={this.props.onItemsCopy}\n            onCancelCopy={this.onCopyToggle}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n        <ModalPortal>\n          <ZipDownloadDialog\n            repoID={this.props.repoID}\n            path={this.props.path}\n            target={this.props.selectedDirentList.map(dirent => dirent.name)}\n            toggleDialog={this.closeZipDialog}\n          />\n        </ModalPortal>\n        }\n        {this.state.showLibContentViewDialogs && (\n          <Fragment>\n            {this.state.showShareDialog &&\n              <ModalPortal>\n                <ShareDialog\n                  itemType={dirent.type}\n                  itemName={dirent.name}\n                  itemPath={direntPath}\n                  userPerm={dirent.permission}\n                  repoID={repoID}\n                  repoEncrypted={this.props.repoEncrypted}\n                  enableDirPrivateShare={this.props.enableDirPrivateShare}\n                  isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                  toggleDialog={this.toggleCancel}\n                />\n              </ModalPortal>\n            }\n            {this.state.isRenameDialogOpen &&\n              <ModalPortal>\n                <Rename\n                  dirent={dirent}\n                  onRename={this.onItemRename}\n                  checkDuplicatedName={this.checkDuplicatedName}\n                  toggleCancel={this.toggleCancel}\n                />\n              </ModalPortal>\n            }\n            {this.state.isPermissionDialogOpen &&\n              <ModalPortal>\n                <LibSubFolderPermissionDialog\n                  toggleDialog={this.toggleCancel}\n                  repoID={repoID}\n                  folderPath={direntPath}\n                  folderName={dirent.name}\n                  isDepartmentRepo={this.props.isGroupOwnedRepo}\n                />\n              </ModalPortal>\n            }\n            {this.state.showEditFileTagDialog &&\n              <ModalPortal>\n                <EditFileTagDialog\n                  repoID={repoID}\n                  repoTags={repoTags}\n                  filePath={direntPath}\n                  fileTagList={this.state.fileTagList}\n                  toggleCancel={this.toggleCancel}\n                  onFileTagChanged={this.onMenuFileTagChanged}\n                />\n              </ModalPortal>\n            }\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nMultipleDirOperationToolbar.propTypes = propTypes;\n\nexport default MultipleDirOperationToolbar;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}