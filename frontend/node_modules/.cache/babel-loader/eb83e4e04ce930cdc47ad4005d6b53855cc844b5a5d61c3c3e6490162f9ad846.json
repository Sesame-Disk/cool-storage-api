{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{gettext}from'../../utils/constants';import{seafileAPI}from'../../utils/seafile-api';import{Utils}from'../../utils/utils';import toaster from'../toast';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var WebAPIAuthToken=/*#__PURE__*/function(_React$Component){_inherits(WebAPIAuthToken,_React$Component);var _super=_createSuper(WebAPIAuthToken);function WebAPIAuthToken(props){var _this;_classCallCheck(this,WebAPIAuthToken);_this=_super.call(this,props);_this.getAuthToken=function(){seafileAPI.getAuthTokenBySession().then(function(res){_this.setState({authToken:res.data.token});}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this.createAuthToken=function(){seafileAPI.createAuthTokenBySession().then(function(res){_this.setState({authToken:res.data.token,isAuthTokenVisible:false});toaster.success(gettext('Success'));}).catch(function(error){var errorMsg=Utils.getErrorMsg(error);toaster.danger(errorMsg);});};_this.deleteAuthToken=function(){seafileAPI.deleteAuthTokenBySession().then(function(res){_this.setState({authToken:'',isAuthTokenVisible:false});toaster.success(gettext('Success'));}).catch(function(error){var errorMsg=Utils.getErrorMsg(error);toaster.danger(errorMsg);});};_this.toggleAuthTokenVisible=function(){_this.setState({isAuthTokenVisible:!_this.state.isAuthTokenVisible});};_this.onIconKeyDown=function(e){if(e.key=='Enter'||e.key=='Space'){e.target.click();}};_this.state={authToken:'',isAuthTokenVisible:false};return _this;}_createClass(WebAPIAuthToken,[{key:\"componentDidMount\",value:function componentDidMount(){this.getAuthToken();}},{key:\"render\",value:function render(){var _this$state=this.state,authToken=_this$state.authToken,isAuthTokenVisible=_this$state.isAuthTokenVisible;return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{id:\"get-auth-token\",className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"setting-item-heading\",children:gettext('Web API Auth Token')}),authToken?/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"m-0 mr-2\",htmlFor:\"token\",children:gettext('Token:')}),/*#__PURE__*/_jsx(\"input\",{id:\"token\",className:\"border-0 mr-1\",type:\"text\",value:isAuthTokenVisible?authToken:'****************************************',readOnly:true,size:Math.max(authToken.length,10)}),/*#__PURE__*/_jsx(\"span\",{tabIndex:\"0\",role:\"button\",\"aria-label\":isAuthTokenVisible?gettext('Hide'):gettext('Show'),onKeyDown:this.onIconKeyDown,onClick:this.toggleAuthTokenVisible,className:\"eye-icon fas \".concat(this.state.isAuthTokenVisible?'fa-eye':'fa-eye-slash')})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-primary mt-2\",onClick:this.deleteAuthToken,children:gettext('Delete')})]}):/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-primary\",onClick:this.createAuthToken,children:gettext('Generate')})]})});}}]);return WebAPIAuthToken;}(React.Component);export default WebAPIAuthToken;","map":{"version":3,"names":["React","gettext","seafileAPI","Utils","toaster","jsx","_jsx","jsxs","_jsxs","WebAPIAuthToken","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","getAuthToken","getAuthTokenBySession","then","res","setState","authToken","data","token","catch","error","errMessage","getErrorMsg","danger","createAuthToken","createAuthTokenBySession","isAuthTokenVisible","success","errorMsg","deleteAuthToken","deleteAuthTokenBySession","toggleAuthTokenVisible","state","onIconKeyDown","e","key","target","click","_createClass","value","componentDidMount","render","_this$state","Fragment","children","id","className","htmlFor","type","readOnly","size","Math","max","length","tabIndex","role","onKeyDown","onClick","concat","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/user-settings/web-api-auth-token.js"],"sourcesContent":["import React from 'react';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass WebAPIAuthToken extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      authToken: '',\n      isAuthTokenVisible: false,\n    };\n  }\n\n  componentDidMount() {\n    this.getAuthToken();\n  }\n\n  getAuthToken = () => {\n    seafileAPI.getAuthTokenBySession().then((res) => {\n      this.setState({\n        authToken: res.data.token\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  createAuthToken = () => {\n    seafileAPI.createAuthTokenBySession().then((res) => {\n      this.setState({\n        authToken: res.data.token,\n        isAuthTokenVisible: false\n      });\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n    });\n  };\n\n  deleteAuthToken = () => {\n    seafileAPI.deleteAuthTokenBySession().then((res) => {\n      this.setState({\n        authToken: '',\n        isAuthTokenVisible: false\n      });\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n    });\n  };\n\n  toggleAuthTokenVisible = () => {\n    this.setState({\n      isAuthTokenVisible: !this.state.isAuthTokenVisible\n    });\n  };\n\n  onIconKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      e.target.click();\n    }\n  };\n\n  render() {\n    const { authToken, isAuthTokenVisible } = this.state;\n    return (\n      <React.Fragment>\n        <div id=\"get-auth-token\" className=\"setting-item\">\n          <h3 className=\"setting-item-heading\">{gettext('Web API Auth Token')}</h3>\n          {authToken ? (\n            <React.Fragment>\n              <div className=\"d-flex align-items-center\">\n                <label className=\"m-0 mr-2\" htmlFor=\"token\">{gettext('Token:')}</label>\n                <input id=\"token\" className=\"border-0 mr-1\" type=\"text\" value={isAuthTokenVisible ? authToken : '****************************************'} readOnly={true} size={Math.max(authToken.length, 10)} />\n                <span tabIndex=\"0\" role=\"button\" aria-label={isAuthTokenVisible ? gettext('Hide') : gettext('Show')} onKeyDown={this.onIconKeyDown} onClick={this.toggleAuthTokenVisible} className={`eye-icon fas ${this.state.isAuthTokenVisible ? 'fa-eye': 'fa-eye-slash'}`}></span>\n              </div>\n              <button className=\"btn btn-outline-primary mt-2\" onClick={this.deleteAuthToken}>{gettext('Delete')}</button>\n            </React.Fragment>\n          ) : (\n            <button className=\"btn btn-outline-primary\" onClick={this.createAuthToken}>{gettext('Generate')}</button>\n          )}\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default WebAPIAuthToken;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}