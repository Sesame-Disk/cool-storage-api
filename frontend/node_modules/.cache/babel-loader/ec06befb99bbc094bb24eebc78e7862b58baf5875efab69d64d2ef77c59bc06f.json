{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Fragment}from'react';import MD5 from'MD5';import{UncontrolledTooltip}from'reactstrap';import{gettext,siteRoot,mediaUrl}from'../../utils/constants';import{Utils}from'../../utils/utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DirentGridItem=/*#__PURE__*/function(_React$Component){_inherits(DirentGridItem,_React$Component);var _super=_createSuper(DirentGridItem);function DirentGridItem(props){var _this;_classCallCheck(this,DirentGridItem);_this=_super.call(this,props);_this.onItemMove=function(destRepo,dirent,selectedPath,currentPath){_this.props.onItemMove(destRepo,dirent,selectedPath,currentPath);};_this.onItemClick=function(e){e.preventDefault();e.stopPropagation();var _this$props=_this.props,dirent=_this$props.dirent,activeDirent=_this$props.activeDirent;if(dirent.isDir()){_this.props.onItemClick(dirent);return;}// is have preview permission\nif(!_this.canPreview){return;}if(dirent===activeDirent){_this.setState({isGridSelected:false});if(Utils.imageCheck(dirent.name)){_this.props.showImagePopup(dirent);}else{_this.props.onItemClick(dirent);}}else{_this.setState({isGridSelected:false});_this.props.onGridItemClick(_this.props.dirent);}};_this.onItemLinkClick=function(e){e.preventDefault();var dirent=_this.props.dirent;if(dirent.isDir()){_this.props.onItemClick(dirent);return;}// is have preview permission\nif(!_this.canPreview){return;}if(Utils.imageCheck(dirent.name)){_this.props.showImagePopup(dirent);}else{_this.props.onItemClick(dirent);}};_this.onGridItemDragStart=function(e){if(Utils.isIEBrower()||!_this.canDrag){return false;}var dragStartItemData={nodeDirent:_this.props.dirent,nodeParentPath:_this.props.path};dragStartItemData=JSON.stringify(dragStartItemData);e.dataTransfer.effectAllowed='move';e.dataTransfer.setData('applicaiton/drag-item-info',dragStartItemData);};_this.onGridItemDragEnter=function(e){if(Utils.isIEBrower()||!_this.canDrag){return false;}if(_this.props.dirent.type==='dir'){_this.setState({isGridDropTipShow:true});}};_this.onGridItemDragOver=function(e){if(Utils.isIEBrower()||!_this.canDrag){return false;}e.preventDefault();e.dataTransfer.dropEffect='move';};_this.onGridItemDragLeave=function(e){if(Utils.isIEBrower()||!_this.canDrag){return false;}_this.setState({isGridDropTipShow:false});};_this.onGridItemDragDrop=function(e){if(Utils.isIEBrower()||!_this.canDrag){return false;}_this.setState({isGridDropTipShow:false});if(e.dataTransfer.files.length){// uploaded files\nreturn;}var dragStartItemData=e.dataTransfer.getData('applicaiton/drag-item-info');dragStartItemData=JSON.parse(dragStartItemData);var _dragStartItemData=dragStartItemData,nodeDirent=_dragStartItemData.nodeDirent,nodeParentPath=_dragStartItemData.nodeParentPath;var dropItemData=_this.props.dirent;if(nodeDirent.name===dropItemData.name){return;}if(dropItemData.type!=='dir'){return;}var selectedPath=Utils.joinPath(_this.props.path,_this.props.dirent.name);_this.onItemMove(_this.props.currentRepoInfo,nodeDirent,selectedPath,nodeParentPath);};_this.onGridItemMouseDown=function(event){_this.props.onGridItemMouseDown(event);};_this.getFileUrl=function(url){var fileUrlArr=url.split('/');if(fileUrlArr.indexOf('48')!==-1){fileUrlArr.splice(fileUrlArr.indexOf('48'),1,'192');}var fileUrl=fileUrlArr.join('/');return fileUrl;};_this.onGridItemContextMenu=function(event){var dirent=_this.props.dirent;_this.props.onGridItemContextMenu(event,dirent);};_this.state={isGridSelected:false,isGridDropTipShow:false};var _dirent=_this.props.dirent;var _Utils$getUserPermiss=Utils.getUserPermission(_dirent.permission),isCustomPermission=_Utils$getUserPermiss.isCustomPermission,customPermission=_Utils$getUserPermiss.customPermission;_this.isCustomPermission=isCustomPermission;_this.customPermission=customPermission;_this.canPreview=true;_this.canDrag=_dirent.permission==='rw';if(isCustomPermission){var _customPermission$per=customPermission.permission,preview=_customPermission$per.preview,modify=_customPermission$per.modify;_this.canPreview=preview||modify;_this.canDrag=modify;}return _this;}_createClass(DirentGridItem,[{key:\"UNSAFE_componentWillReceiveProps\",value:function UNSAFE_componentWillReceiveProps(nextProps){var _this2=this;this.setState({isGridSelected:false},function(){if(nextProps.activeDirent&&nextProps.activeDirent.name===nextProps.dirent.name){_this2.setState({isGridSelected:true});}});}},{key:\"render\",value:function render(){var _this$props2=this.props,dirent=_this$props2.dirent,path=_this$props2.path;var direntPath=Utils.joinPath(path,dirent.name);var iconUrl=Utils.getDirentIcon(dirent,true);var fileUrl=dirent.encoded_thumbnail_src?this.getFileUrl(dirent.encoded_thumbnail_src):'';var toolTipID='';var tagTitle='';if(dirent.file_tags&&dirent.file_tags.length>0){toolTipID=MD5(dirent.name).slice(0,7);tagTitle=dirent.file_tags.map(function(item){return item.name;}).join(' ');}var dirHref='';if(this.props.currentRepoInfo){dirHref=siteRoot+'library/'+this.props.repoID+'/'+this.props.currentRepoInfo.repo_name+Utils.encodePath(direntPath);}var fileHref=siteRoot+'lib/'+this.props.repoID+'/file'+Utils.encodePath(direntPath);if(dirent.is_sdoc_revision&&dirent.revision_id){fileHref=siteRoot+'lib/'+this.props.repoID+'/revisions/'+dirent.revision_id+'/';}var gridClass='grid-file-img-link cursor-pointer';gridClass+=this.state.isGridSelected?' grid-selected-active':' ';gridClass+=this.state.isGridDropTipShow?' grid-drop-show':' ';var lockedInfo=dirent.is_freezed?gettext('Frozen by {name}'):gettext('locked by {name}');lockedInfo=lockedInfo.replace('{name}',dirent.lock_owner_name);var lockedImageUrl=\"\".concat(mediaUrl,\"img/file-\").concat(dirent.is_freezed?'freezed':'locked',\"-32.png\");var lockedMessage=dirent.is_freezed?gettext('freezed'):gettext('locked');return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"li\",{className:\"grid-item\",onContextMenu:this.onGridItemContextMenu,onMouseDown:this.onGridItemMouseDown,children:[/*#__PURE__*/_jsxs(\"div\",{className:gridClass,draggable:this.canDrag,onClick:this.onItemClick,onDragStart:this.onGridItemDragStart,onDragEnter:this.onGridItemDragEnter,onDragOver:this.onGridItemDragOver,onDragLeave:this.onGridItemDragLeave,onDrop:this.onGridItemDragDrop,children:[this.canPreview&&dirent.encoded_thumbnail_src?/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(siteRoot).concat(fileUrl),ref:this.gridIcon,className:\"thumbnail\",onClick:this.onItemClick,alt:\"\"}):/*#__PURE__*/_jsx(\"img\",{src:iconUrl,ref:this.gridIcon,width:\"96\",alt:\"\"}),dirent.is_locked&&/*#__PURE__*/_jsx(\"img\",{className:\"grid-file-locked-icon\",src:lockedImageUrl,alt:lockedMessage,title:lockedInfo})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid-file-name\",onDragStart:this.onGridItemDragStart,draggable:this.canDrag,children:[dirent.type!=='dir'&&dirent.file_tags&&dirent.file_tags.length>0&&/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{id:\"tag-list-title-\".concat(toolTipID),className:\"dirent-item tag-list tag-list-stacked d-inline-block align-middle\",children:dirent.file_tags.map(function(fileTag,index){var length=dirent.file_tags.length;return/*#__PURE__*/_jsx(\"span\",{className:\"file-tag\",style:{zIndex:length-index,backgroundColor:fileTag.color}},fileTag.id);})}),/*#__PURE__*/_jsx(UncontrolledTooltip,{target:\"tag-list-title-\".concat(toolTipID),placement:\"bottom\",children:tagTitle})]}),!dirent.isDir()&&!this.canPreview?/*#__PURE__*/_jsx(\"a\",{className:\"sf-link grid-file-name-link \".concat(this.state.isGridSelected?'grid-link-selected-active':''),onClick:this.onItemLinkClick,children:dirent.name}):/*#__PURE__*/_jsx(\"a\",{className:\"grid-file-name-link \".concat(this.state.isGridSelected?'grid-link-selected-active':''),href:dirent.type==='dir'?dirHref:fileHref,onClick:this.onItemLinkClick,children:dirent.name})]})]})});}}]);return DirentGridItem;}(React.Component);export default DirentGridItem;","map":{"version":3,"names":["React","Fragment","MD5","UncontrolledTooltip","gettext","siteRoot","mediaUrl","Utils","jsx","_jsx","jsxs","_jsxs","DirentGridItem","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","onItemMove","destRepo","dirent","selectedPath","currentPath","onItemClick","e","preventDefault","stopPropagation","_this$props","activeDirent","isDir","canPreview","setState","isGridSelected","imageCheck","name","showImagePopup","onGridItemClick","onItemLinkClick","onGridItemDragStart","isIEBrower","canDrag","dragStartItemData","nodeDirent","nodeParentPath","path","JSON","stringify","dataTransfer","effectAllowed","setData","onGridItemDragEnter","type","isGridDropTipShow","onGridItemDragOver","dropEffect","onGridItemDragLeave","onGridItemDragDrop","files","length","getData","parse","_dragStartItemData","dropItemData","joinPath","currentRepoInfo","onGridItemMouseDown","event","getFileUrl","url","fileUrlArr","split","indexOf","splice","fileUrl","join","onGridItemContextMenu","state","_Utils$getUserPermiss","getUserPermission","permission","isCustomPermission","customPermission","_customPermission$per","preview","modify","_createClass","key","value","UNSAFE_componentWillReceiveProps","nextProps","_this2","render","_this$props2","direntPath","iconUrl","getDirentIcon","encoded_thumbnail_src","toolTipID","tagTitle","file_tags","slice","map","item","dirHref","repoID","repo_name","encodePath","fileHref","is_sdoc_revision","revision_id","gridClass","lockedInfo","is_freezed","replace","lock_owner_name","lockedImageUrl","concat","lockedMessage","children","className","onContextMenu","onMouseDown","draggable","onClick","onDragStart","onDragEnter","onDragOver","onDragLeave","onDrop","src","ref","gridIcon","alt","width","is_locked","title","id","fileTag","index","style","zIndex","backgroundColor","color","target","placement","href","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dirent-grid-view/dirent-grid-item.js"],"sourcesContent":["import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MD5 from 'MD5';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  showImagePopup: PropTypes.func.isRequired,\n  onGridItemContextMenu: PropTypes.func.isRequired,\n  onGridItemClick: PropTypes.func.isRequired,\n  activeDirent: PropTypes.object,\n  onGridItemMouseDown: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n  onItemMove: PropTypes.func.isRequired,\n};\n\nclass DirentGridItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isGridSelected: false,\n      isGridDropTipShow: false,\n    };\n\n    const { dirent } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(dirent.permission);\n    this.isCustomPermission = isCustomPermission;\n    this.customPermission = customPermission;\n    this.canPreview = true;\n    this.canDrag = dirent.permission === 'rw';\n    if (isCustomPermission) {\n      const { preview, modify } = customPermission.permission;\n      this.canPreview = preview || modify;\n      this.canDrag = modify;\n    }\n\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    this.setState({isGridSelected: false}, () => {\n      if (nextProps.activeDirent && nextProps.activeDirent.name === nextProps.dirent.name) {\n        this.setState({isGridSelected: true});\n      }\n    });\n  }\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  };\n\n  onItemClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const { dirent, activeDirent } = this.props;\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    // is have preview permission\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (dirent === activeDirent) {\n      this.setState({isGridSelected: false});\n      if (Utils.imageCheck(dirent.name)) {\n        this.props.showImagePopup(dirent);\n      } else {\n        this.props.onItemClick(dirent);\n      }\n    } else {\n      this.setState({isGridSelected: false});\n      this.props.onGridItemClick(this.props.dirent);\n    }\n  };\n\n  onItemLinkClick = (e) => {\n    e.preventDefault();\n    const dirent = this.props.dirent;\n\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    // is have preview permission\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (Utils.imageCheck(dirent.name)) {\n      this.props.showImagePopup(dirent);\n    } else {\n      this.props.onItemClick(dirent);\n    }\n  };\n\n  onGridItemDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    let dragStartItemData = {nodeDirent: this.props.dirent, nodeParentPath: this.props.path};\n    dragStartItemData = JSON.stringify(dragStartItemData);\n\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartItemData);\n  };\n\n  onGridItemDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    if (this.props.dirent.type === 'dir') {\n      this.setState({isGridDropTipShow: true});\n    }\n  };\n\n  onGridItemDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  };\n\n  onGridItemDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isGridDropTipShow: false});\n  };\n\n  onGridItemDragDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isGridDropTipShow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n    let {nodeDirent, nodeParentPath} = dragStartItemData;\n    let dropItemData = this.props.dirent;\n\n    if (nodeDirent.name === dropItemData.name) {\n      return;\n    }\n\n    if (dropItemData.type !== 'dir') {\n      return;\n    }\n\n    let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, selectedPath, nodeParentPath);\n  };\n\n  onGridItemMouseDown = (event) =>{\n    this.props.onGridItemMouseDown(event);\n  };\n\n  getFileUrl = (url) => {\n    let fileUrlArr = url.split('/');\n    if (fileUrlArr.indexOf('48') !== -1) {\n      fileUrlArr.splice(fileUrlArr.indexOf('48'), 1, '192');\n    }\n    let fileUrl = fileUrlArr.join('/');\n    return fileUrl;\n  };\n\n  onGridItemContextMenu = (event) => {\n    let dirent = this.props.dirent;\n    this.props.onGridItemContextMenu(event, dirent);\n  };\n\n  render() {\n    let { dirent, path } = this.props;\n    let direntPath = Utils.joinPath(path, dirent.name);\n    let iconUrl = Utils.getDirentIcon(dirent, true);\n    let fileUrl = dirent.encoded_thumbnail_src ? this.getFileUrl(dirent.encoded_thumbnail_src) : '';\n\n    let toolTipID = '';\n    let tagTitle = '';\n    if (dirent.file_tags && dirent.file_tags.length > 0) {\n      toolTipID = MD5(dirent.name).slice(0, 7);\n      tagTitle = dirent.file_tags.map(item => item.name).join(' ');\n    }\n\n    let dirHref = '';\n    if (this.props.currentRepoInfo) {\n      dirHref = siteRoot + 'library/' + this.props.repoID + '/' + this.props.currentRepoInfo.repo_name + Utils.encodePath(direntPath);\n    }\n    let fileHref = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(direntPath);\n    if (dirent.is_sdoc_revision && dirent.revision_id) {\n      fileHref = siteRoot + 'lib/' + this.props.repoID + '/revisions/' + dirent.revision_id + '/';\n    }\n\n    let gridClass = 'grid-file-img-link cursor-pointer';\n    gridClass += this.state.isGridSelected ? ' grid-selected-active' : ' ';\n    gridClass += this.state.isGridDropTipShow ? ' grid-drop-show' : ' ';\n\n    let lockedInfo = dirent.is_freezed ? gettext('Frozen by {name}') : gettext('locked by {name}');\n    lockedInfo = lockedInfo.replace('{name}', dirent.lock_owner_name);\n\n    const lockedImageUrl = `${mediaUrl}img/file-${dirent.is_freezed ? 'freezed' : 'locked'}-32.png`;\n    const lockedMessage = dirent.is_freezed ? gettext('freezed') : gettext('locked');\n    return (\n      <Fragment>\n        <li className=\"grid-item\" onContextMenu={this.onGridItemContextMenu} onMouseDown={this.onGridItemMouseDown}>\n          <div\n            className={gridClass}\n            draggable={this.canDrag}\n            onClick={this.onItemClick}\n            onDragStart={this.onGridItemDragStart}\n            onDragEnter={this.onGridItemDragEnter}\n            onDragOver={this.onGridItemDragOver}\n            onDragLeave={this.onGridItemDragLeave}\n            onDrop={this.onGridItemDragDrop}\n          >\n            {(this.canPreview && dirent.encoded_thumbnail_src) ?\n              <img src={`${siteRoot}${fileUrl}`} ref={this.gridIcon} className=\"thumbnail\" onClick={this.onItemClick} alt=\"\"/> :\n              <img src={iconUrl} ref={this.gridIcon} width=\"96\" alt='' />\n            }\n            {dirent.is_locked && <img className=\"grid-file-locked-icon\" src={lockedImageUrl} alt={lockedMessage} title={lockedInfo}/>}\n          </div>\n          <div className=\"grid-file-name\" onDragStart={this.onGridItemDragStart} draggable={this.canDrag} >\n            {(dirent.type !== 'dir' && dirent.file_tags && dirent.file_tags.length > 0) && (\n              <Fragment>\n                <div id={`tag-list-title-${toolTipID}`} className=\"dirent-item tag-list tag-list-stacked d-inline-block align-middle\">\n                  {dirent.file_tags.map((fileTag, index) => {\n                    let length = dirent.file_tags.length;\n                    return (\n                      <span className=\"file-tag\" key={fileTag.id} style={{zIndex:length - index, backgroundColor:fileTag.color}}></span>\n                    );\n                  })}\n                </div>\n                <UncontrolledTooltip target={`tag-list-title-${toolTipID}`} placement=\"bottom\">\n                  {tagTitle}\n                </UncontrolledTooltip>\n              </Fragment>\n            )}\n            {(!dirent.isDir() && !this.canPreview) ?\n              <a className={`sf-link grid-file-name-link ${this.state.isGridSelected ? 'grid-link-selected-active' : ''}`} onClick={this.onItemLinkClick}>{dirent.name}</a> :\n              <a className={`grid-file-name-link ${this.state.isGridSelected ? 'grid-link-selected-active' : ''}`} href={dirent.type === 'dir' ? dirHref : fileHref} onClick={this.onItemLinkClick}>{dirent.name}</a>\n            }\n          </div>\n        </li>\n      </Fragment>\n    );\n  }\n}\n\nDirentGridItem.propTypes = propTypes;\nexport default DirentGridItem;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}