{"ast":null,"code":"import _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport classNames from 'classnames';\nimport { withTranslation } from 'react-i18next';\nimport { INTERNAL_EVENT } from '../constants';\nimport EventBus from '../utils/event-bus';\nimport OutlineItem from './outline-item';\nimport Tooltip from '../../components/tooltip';\nimport './style.css';\nexport var getOutlineSetting = function getOutlineSetting() {\n  var currentValue = localStorage.getItem('sdoc');\n  var config = currentValue ? JSON.parse(currentValue) : {};\n  var _config$outlineOpen = config.outlineOpen,\n    outlineOpen = _config$outlineOpen === void 0 ? false : _config$outlineOpen;\n  return outlineOpen;\n};\nvar setOutlineSetting = function setOutlineSetting(isShown) {\n  var currentValue = localStorage.getItem('sdoc');\n  var config = currentValue ? JSON.parse(currentValue) : {};\n  config['outlineOpen'] = isShown;\n  localStorage.setItem('sdoc', JSON.stringify(config));\n};\nvar SDocOutline = function SDocOutline(_ref) {\n  var scrollLeft = _ref.scrollLeft,\n    doc = _ref.doc,\n    t = _ref.t;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isShown = _useState2[0],\n    setIsShown = _useState2[1];\n  var updateOutlineState = useCallback(function (state) {\n    setIsShown(state);\n    setOutlineSetting(state);\n    var eventBus = EventBus.getInstance();\n    eventBus.dispatch(INTERNAL_EVENT.OUTLINE_STATE_CHANGED, state);\n  }, []);\n  useEffect(function () {\n    var outlineState = getOutlineSetting();\n    updateOutlineState(outlineState);\n  }, [updateOutlineState]);\n  var toggleShow = useCallback(function () {\n    updateOutlineState(!isShown);\n  }, [isShown, updateOutlineState]);\n  var list = useMemo(function () {\n    return doc.filter(function (item) {\n      return ['header1', 'header2', 'header3'].includes(item.type);\n    });\n  }, [doc]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames('sdoc-outline-wrapper', {\n      active: isShown\n    }),\n    style: {\n      left: -scrollLeft\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-outline\"\n  }, isShown && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-outline-header\"\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"sdoc-outline-header__title\"\n  }, t('Outline')), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sdoc-outline-header__close sdocfont sdoc-cancel\",\n    onClick: toggleShow\n  })), list.length === 0 && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mt-4 text-secondary\"\n  }, t('Headings_you_add_to_the_document_will_appear_here')), list.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-outline-list-container\"\n  }, list.map(function (item, index) {\n    return /*#__PURE__*/React.createElement(OutlineItem, {\n      key: index,\n      item: item\n    });\n  })))), !isShown && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"span\", {\n    id: \"sdoc-outline-menu\",\n    className: \"sdoc-outline-menu sdocfont sdoc-table-of-content\",\n    onClick: toggleShow\n  }), /*#__PURE__*/React.createElement(Tooltip, {\n    placement: \"right\",\n    target: \"sdoc-outline-menu\"\n  }, t('Outline'))));\n};\nexport default withTranslation('sdoc-editor')(SDocOutline);","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","useState","classNames","withTranslation","INTERNAL_EVENT","EventBus","OutlineItem","Tooltip","getOutlineSetting","currentValue","localStorage","getItem","config","JSON","parse","_config$outlineOpen","outlineOpen","setOutlineSetting","isShown","setItem","stringify","SDocOutline","_ref","scrollLeft","doc","t","_useState","_useState2","_slicedToArray","setIsShown","updateOutlineState","state","eventBus","getInstance","dispatch","OUTLINE_STATE_CHANGED","outlineState","toggleShow","list","filter","item","includes","type","createElement","className","active","style","left","Fragment","onClick","length","map","index","key","id","placement","target"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/outline/index.js"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport classNames from 'classnames';\nimport { withTranslation } from 'react-i18next';\nimport { INTERNAL_EVENT } from '../constants';\nimport EventBus from '../utils/event-bus';\nimport OutlineItem from './outline-item';\nimport Tooltip from '../../components/tooltip';\nimport './style.css';\nexport const getOutlineSetting = () => {\n  const currentValue = localStorage.getItem('sdoc');\n  const config = currentValue ? JSON.parse(currentValue) : {};\n  const {\n    outlineOpen = false\n  } = config;\n  return outlineOpen;\n};\nconst setOutlineSetting = isShown => {\n  const currentValue = localStorage.getItem('sdoc');\n  const config = currentValue ? JSON.parse(currentValue) : {};\n  config['outlineOpen'] = isShown;\n  localStorage.setItem('sdoc', JSON.stringify(config));\n};\nconst SDocOutline = _ref => {\n  let {\n    scrollLeft,\n    doc,\n    t\n  } = _ref;\n  const [isShown, setIsShown] = useState(false);\n  const updateOutlineState = useCallback(state => {\n    setIsShown(state);\n    setOutlineSetting(state);\n    const eventBus = EventBus.getInstance();\n    eventBus.dispatch(INTERNAL_EVENT.OUTLINE_STATE_CHANGED, state);\n  }, []);\n  useEffect(() => {\n    const outlineState = getOutlineSetting();\n    updateOutlineState(outlineState);\n  }, [updateOutlineState]);\n  const toggleShow = useCallback(() => {\n    updateOutlineState(!isShown);\n  }, [isShown, updateOutlineState]);\n  const list = useMemo(() => {\n    return doc.filter(item => ['header1', 'header2', 'header3'].includes(item.type));\n  }, [doc]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames('sdoc-outline-wrapper', {\n      active: isShown\n    }),\n    style: {\n      left: -scrollLeft\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-outline\"\n  }, isShown && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-outline-header\"\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"sdoc-outline-header__title\"\n  }, t('Outline')), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sdoc-outline-header__close sdocfont sdoc-cancel\",\n    onClick: toggleShow\n  })), list.length === 0 && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mt-4 text-secondary\"\n  }, t('Headings_you_add_to_the_document_will_appear_here')), list.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-outline-list-container\"\n  }, list.map((item, index) => {\n    return /*#__PURE__*/React.createElement(OutlineItem, {\n      key: index,\n      item: item\n    });\n  })))), !isShown && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"span\", {\n    id: \"sdoc-outline-menu\",\n    className: \"sdoc-outline-menu sdocfont sdoc-table-of-content\",\n    onClick: toggleShow\n  }), /*#__PURE__*/React.createElement(Tooltip, {\n    placement: \"right\",\n    target: \"sdoc-outline-menu\"\n  }, t('Outline'))));\n};\nexport default withTranslation('sdoc-editor')(SDocOutline);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}