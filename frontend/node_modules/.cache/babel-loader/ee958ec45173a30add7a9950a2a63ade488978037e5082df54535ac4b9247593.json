{"ast":null,"code":"import _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { Editor, Transforms } from '@seafile/slate';\nimport { getNodeType } from '../../core';\nimport { ELEMENT_TYPE, HEADER, PARAGRAPH, SUBTITLE, TITLE } from '../../constants';\nexport var isMenuDisabled = function isMenuDisabled(editor) {\n  var readonly = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  if (readonly) return true;\n  if (!editor.selection) return true;\n  var _Editor$nodes = Editor.nodes(editor, {\n      match: function match(n) {\n        var type = getNodeType(n);\n        if (!type) return false;\n        if (type === ELEMENT_TYPE.PARAGRAPH) return true;\n        if (type.startsWith(HEADER)) return true;\n        if (type === TITLE) return true;\n        if (type === SUBTITLE) return true;\n        return false;\n      },\n      universal: true,\n      mode: 'highest'\n    }),\n    _Editor$nodes2 = _slicedToArray(_Editor$nodes, 1),\n    match = _Editor$nodes2[0];\n  return !match;\n};\nexport var getHeaderType = function getHeaderType(editor) {\n  var _Editor$nodes3 = Editor.nodes(editor, {\n      match: function match(n) {\n        var nodeType = getNodeType(n);\n        if (!nodeType) return false;\n        if (nodeType.includes(HEADER)) return true;\n        if (nodeType === TITLE) return true;\n        if (nodeType === SUBTITLE) return true;\n        return false;\n      },\n      universal: true\n    }),\n    _Editor$nodes4 = _slicedToArray(_Editor$nodes3, 1),\n    match = _Editor$nodes4[0];\n  if (!match) return PARAGRAPH;\n  var _match = _slicedToArray(match, 1),\n    n = _match[0];\n  return getNodeType(n);\n};\nexport var setHeaderType = function setHeaderType(editor, type) {\n  if (!type) return;\n  Transforms.setNodes(editor, {\n    type: type\n  });\n};","map":{"version":3,"names":["Editor","Transforms","getNodeType","ELEMENT_TYPE","HEADER","PARAGRAPH","SUBTITLE","TITLE","isMenuDisabled","editor","readonly","arguments","length","undefined","selection","_Editor$nodes","nodes","match","n","type","startsWith","universal","mode","_Editor$nodes2","_slicedToArray","getHeaderType","_Editor$nodes3","nodeType","includes","_Editor$nodes4","_match","setHeaderType","setNodes"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/extension/plugins/header/helpers.js"],"sourcesContent":["import { Editor, Transforms } from '@seafile/slate';\nimport { getNodeType } from '../../core';\nimport { ELEMENT_TYPE, HEADER, PARAGRAPH, SUBTITLE, TITLE } from '../../constants';\nexport const isMenuDisabled = function (editor) {\n  let readonly = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  if (readonly) return true;\n  if (!editor.selection) return true;\n  const [match] = Editor.nodes(editor, {\n    match: n => {\n      let type = getNodeType(n);\n      if (!type) return false;\n      if (type === ELEMENT_TYPE.PARAGRAPH) return true;\n      if (type.startsWith(HEADER)) return true;\n      if (type === TITLE) return true;\n      if (type === SUBTITLE) return true;\n      return false;\n    },\n    universal: true,\n    mode: 'highest'\n  });\n  return !match;\n};\nexport const getHeaderType = editor => {\n  const [match] = Editor.nodes(editor, {\n    match: n => {\n      const nodeType = getNodeType(n);\n      if (!nodeType) return false;\n      if (nodeType.includes(HEADER)) return true;\n      if (nodeType === TITLE) return true;\n      if (nodeType === SUBTITLE) return true;\n      return false;\n    },\n    universal: true\n  });\n  if (!match) return PARAGRAPH;\n  const [n] = match;\n  return getNodeType(n);\n};\nexport const setHeaderType = (editor, type) => {\n  if (!type) return;\n  Transforms.setNodes(editor, {\n    type\n  });\n};"],"mappings":";AAAA,SAASA,MAAM,EAAEC,UAAU,QAAQ,gBAAgB;AACnD,SAASC,WAAW,QAAQ,YAAY;AACxC,SAASC,YAAY,EAAEC,MAAM,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,KAAK,QAAQ,iBAAiB;AAClF,OAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAcA,CAAaC,MAAM,EAAE;EAC9C,IAAIC,QAAQ,GAAGC,SAAS,CAACC,MAAM,GAAG,CAAC,IAAID,SAAS,CAAC,CAAC,CAAC,KAAKE,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC,GAAG,KAAK;EACxF,IAAID,QAAQ,EAAE,OAAO,IAAI;EACzB,IAAI,CAACD,MAAM,CAACK,SAAS,EAAE,OAAO,IAAI;EAClC,IAAAC,aAAA,GAAgBf,MAAM,CAACgB,KAAK,CAACP,MAAM,EAAE;MACnCQ,KAAK,EAAE,SAAAA,MAAAC,CAAC,EAAI;QACV,IAAIC,IAAI,GAAGjB,WAAW,CAACgB,CAAC,CAAC;QACzB,IAAI,CAACC,IAAI,EAAE,OAAO,KAAK;QACvB,IAAIA,IAAI,KAAKhB,YAAY,CAACE,SAAS,EAAE,OAAO,IAAI;QAChD,IAAIc,IAAI,CAACC,UAAU,CAAChB,MAAM,CAAC,EAAE,OAAO,IAAI;QACxC,IAAIe,IAAI,KAAKZ,KAAK,EAAE,OAAO,IAAI;QAC/B,IAAIY,IAAI,KAAKb,QAAQ,EAAE,OAAO,IAAI;QAClC,OAAO,KAAK;MACd,CAAC;MACDe,SAAS,EAAE,IAAI;MACfC,IAAI,EAAE;IACR,CAAC,CAAC;IAAAC,cAAA,GAAAC,cAAA,CAAAT,aAAA;IAZKE,KAAK,GAAAM,cAAA;EAaZ,OAAO,CAACN,KAAK;AACf,CAAC;AACD,OAAO,IAAMQ,aAAa,GAAG,SAAhBA,aAAaA,CAAGhB,MAAM,EAAI;EACrC,IAAAiB,cAAA,GAAgB1B,MAAM,CAACgB,KAAK,CAACP,MAAM,EAAE;MACnCQ,KAAK,EAAE,SAAAA,MAAAC,CAAC,EAAI;QACV,IAAMS,QAAQ,GAAGzB,WAAW,CAACgB,CAAC,CAAC;QAC/B,IAAI,CAACS,QAAQ,EAAE,OAAO,KAAK;QAC3B,IAAIA,QAAQ,CAACC,QAAQ,CAACxB,MAAM,CAAC,EAAE,OAAO,IAAI;QAC1C,IAAIuB,QAAQ,KAAKpB,KAAK,EAAE,OAAO,IAAI;QACnC,IAAIoB,QAAQ,KAAKrB,QAAQ,EAAE,OAAO,IAAI;QACtC,OAAO,KAAK;MACd,CAAC;MACDe,SAAS,EAAE;IACb,CAAC,CAAC;IAAAQ,cAAA,GAAAL,cAAA,CAAAE,cAAA;IAVKT,KAAK,GAAAY,cAAA;EAWZ,IAAI,CAACZ,KAAK,EAAE,OAAOZ,SAAS;EAC5B,IAAAyB,MAAA,GAAAN,cAAA,CAAYP,KAAK;IAAVC,CAAC,GAAAY,MAAA;EACR,OAAO5B,WAAW,CAACgB,CAAC,CAAC;AACvB,CAAC;AACD,OAAO,IAAMa,aAAa,GAAG,SAAhBA,aAAaA,CAAItB,MAAM,EAAEU,IAAI,EAAK;EAC7C,IAAI,CAACA,IAAI,EAAE;EACXlB,UAAU,CAAC+B,QAAQ,CAACvB,MAAM,EAAE;IAC1BU,IAAI,EAAJA;EACF,CAAC,CAAC;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}