{"ast":null,"code":"import _toConsumableArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _createForOfIteratorHelper from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _classCallCheck from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _excluded = [\"id\", \"description\"];\nimport React from 'react';\nimport { css } from 'goober';\nimport Toast from './toast';\nvar wrapperClass = css({\n  maxWidth: '560px',\n  margin: '0 auto',\n  top: 0,\n  left: 0,\n  right: 0,\n  position: 'fixed',\n  zIndex: 999999\n});\nvar hasCustomId = function hasCustomId(settings) {\n  return Object.hasOwnProperty.call(settings, 'id');\n};\nvar ToastManager = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(ToastManager, _React$PureComponent);\n  var _super = _createSuper(ToastManager);\n  function ToastManager(props, context) {\n    var _this;\n    _classCallCheck(this, ToastManager);\n    _this = _super.call(this, props, context);\n    _defineProperty(_assertThisInitialized(_this), \"getToasts\", function () {\n      return _this.state.toasts;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"closeAll\", function () {\n      _this.getToasts().forEach(function (toast) {\n        return toast.close();\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"notify\", function (title, settings) {\n      // If there's a custom toast ID passed, close existing toasts with the same custom ID\n      if (hasCustomId(settings)) {\n        var _iterator = _createForOfIteratorHelper(_this.state.toasts),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var toast = _step.value;\n            // Since unique ID is still appended to a custom ID, skip the unique ID and check only prefix\n            if (String(toast.id).startsWith(settings.id)) {\n              _this.closeToast(toast.id);\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      }\n      var instance = _this.createToastInstance(title, settings);\n      _this.onClose = settings.onClose;\n      _this.setState(function (previousState) {\n        return {\n          toasts: [instance].concat(_toConsumableArray(previousState.toasts))\n        };\n      });\n      return instance;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"createToastInstance\", function (title, settings) {\n      var uniqueId = ++ToastManager.idCounter;\n      var id = hasCustomId(settings) ? \"\".concat(settings.id, \"-\").concat(uniqueId) : uniqueId;\n      var hasCloseButton = settings.hasCloseButton || true;\n      var duration = settings.duration || 2;\n      if (settings.hasCloseButton !== undefined) {\n        hasCloseButton = settings.hasCloseButton;\n      }\n      if (settings.duration !== undefined) {\n        duration = settings.duration;\n      }\n      return {\n        id: id,\n        title: title,\n        description: settings.description,\n        hasCloseButton: hasCloseButton,\n        duration: duration,\n        close: function close() {\n          return _this.closeToast(id);\n        },\n        intent: settings.intent\n      };\n    });\n    /**\n     * This will set isShown on the Toast which will close the toast.\n     * It won't remove the toast until onExited triggers onRemove.\n     */\n    _defineProperty(_assertThisInitialized(_this), \"closeToast\", function (id) {\n      _this.setState(function (previousState) {\n        return {\n          toasts: previousState.toasts.map(function (toast) {\n            if (toast.id === id) {\n              return _objectSpread(_objectSpread({}, toast), {}, {\n                isShown: false\n              });\n            }\n            return toast;\n          })\n        };\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"removeToast\", function (id) {\n      _this.onClose && _this.onClose();\n      _this.setState(function (previousState) {\n        return {\n          toasts: previousState.toasts.filter(function (toast) {\n            return toast.id !== id;\n          })\n        };\n      });\n    });\n    props.bindNotify(_this.notify);\n    props.bindGetToasts(_this.getToasts);\n    props.bindCloseAll(_this.closeAll);\n    _this.state = {\n      toasts: []\n    };\n    return _this;\n  }\n  _createClass(ToastManager, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: wrapperClass\n      }, this.state.toasts.map(function (_ref) {\n        var id = _ref.id,\n          description = _ref.description,\n          props = _objectWithoutProperties(_ref, _excluded);\n        return /*#__PURE__*/React.createElement(Toast, Object.assign({\n          key: id,\n          onRemove: function onRemove() {\n            return _this2.removeToast(id);\n          }\n        }, props), description);\n      }));\n    }\n  }]);\n  return ToastManager;\n}(React.PureComponent);\nexport { ToastManager as default };\n_defineProperty(ToastManager, \"idCounter\", 0);","map":{"version":3,"names":["_objectWithoutProperties","_objectSpread","_defineProperty","_excluded","React","css","Toast","wrapperClass","maxWidth","margin","top","left","right","position","zIndex","hasCustomId","settings","Object","hasOwnProperty","call","ToastManager","_React$PureComponent","_inherits","_super","_createSuper","props","context","_this","_classCallCheck","_assertThisInitialized","state","toasts","getToasts","forEach","toast","close","title","_iterator","_createForOfIteratorHelper","_step","s","n","done","value","String","id","startsWith","closeToast","err","e","f","instance","createToastInstance","onClose","setState","previousState","concat","_toConsumableArray","uniqueId","idCounter","hasCloseButton","duration","undefined","description","intent","map","isShown","filter","bindNotify","notify","bindGetToasts","bindCloseAll","closeAll","_createClass","key","render","_this2","createElement","className","_ref","assign","onRemove","removeToast","PureComponent","default"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/components/toast/toastManager.js"],"sourcesContent":["import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nconst _excluded = [\"id\", \"description\"];\nimport React from 'react';\nimport { css } from 'goober';\nimport Toast from './toast';\nconst wrapperClass = css({\n  maxWidth: '560px',\n  margin: '0 auto',\n  top: 0,\n  left: 0,\n  right: 0,\n  position: 'fixed',\n  zIndex: 999999\n});\nconst hasCustomId = settings => Object.hasOwnProperty.call(settings, 'id');\nexport default class ToastManager extends React.PureComponent {\n  constructor(props, context) {\n    super(props, context);\n    _defineProperty(this, \"getToasts\", () => {\n      return this.state.toasts;\n    });\n    _defineProperty(this, \"closeAll\", () => {\n      this.getToasts().forEach(toast => toast.close());\n    });\n    _defineProperty(this, \"notify\", (title, settings) => {\n      // If there's a custom toast ID passed, close existing toasts with the same custom ID\n      if (hasCustomId(settings)) {\n        for (const toast of this.state.toasts) {\n          // Since unique ID is still appended to a custom ID, skip the unique ID and check only prefix\n          if (String(toast.id).startsWith(settings.id)) {\n            this.closeToast(toast.id);\n          }\n        }\n      }\n      const instance = this.createToastInstance(title, settings);\n      this.onClose = settings.onClose;\n      this.setState(previousState => {\n        return {\n          toasts: [instance, ...previousState.toasts]\n        };\n      });\n      return instance;\n    });\n    _defineProperty(this, \"createToastInstance\", (title, settings) => {\n      const uniqueId = ++ToastManager.idCounter;\n      const id = hasCustomId(settings) ? \"\".concat(settings.id, \"-\").concat(uniqueId) : uniqueId;\n      let hasCloseButton = settings.hasCloseButton || true;\n      let duration = settings.duration || 2;\n      if (settings.hasCloseButton !== undefined) {\n        hasCloseButton = settings.hasCloseButton;\n      }\n      if (settings.duration !== undefined) {\n        duration = settings.duration;\n      }\n      return {\n        id,\n        title,\n        description: settings.description,\n        hasCloseButton: hasCloseButton,\n        duration: duration,\n        close: () => this.closeToast(id),\n        intent: settings.intent\n      };\n    });\n    /**\n     * This will set isShown on the Toast which will close the toast.\n     * It won't remove the toast until onExited triggers onRemove.\n     */\n    _defineProperty(this, \"closeToast\", id => {\n      this.setState(previousState => {\n        return {\n          toasts: previousState.toasts.map(toast => {\n            if (toast.id === id) {\n              return _objectSpread(_objectSpread({}, toast), {}, {\n                isShown: false\n              });\n            }\n            return toast;\n          })\n        };\n      });\n    });\n    _defineProperty(this, \"removeToast\", id => {\n      this.onClose && this.onClose();\n      this.setState(previousState => {\n        return {\n          toasts: previousState.toasts.filter(toast => toast.id !== id)\n        };\n      });\n    });\n    props.bindNotify(this.notify);\n    props.bindGetToasts(this.getToasts);\n    props.bindCloseAll(this.closeAll);\n    this.state = {\n      toasts: []\n    };\n  }\n  render() {\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: wrapperClass\n    }, this.state.toasts.map(_ref => {\n      let {\n          id,\n          description\n        } = _ref,\n        props = _objectWithoutProperties(_ref, _excluded);\n      return /*#__PURE__*/React.createElement(Toast, Object.assign({\n        key: id,\n        onRemove: () => this.removeToast(id)\n      }, props), description);\n    }));\n  }\n}\n_defineProperty(ToastManager, \"idCounter\", 0);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}