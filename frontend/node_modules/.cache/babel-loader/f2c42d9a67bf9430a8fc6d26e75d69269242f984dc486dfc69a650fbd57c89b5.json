{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = MarkdownViewer;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _loading = _interopRequireDefault(require(\"../containers/loading\"));\nvar _useMathjax = _interopRequireDefault(require(\"../hooks/use-mathjax\"));\nvar _slateViewer = _interopRequireDefault(require(\"../editors/slate-viewer\"));\nvar _slateConvert = require(\"../slate-convert\");\nfunction MarkdownViewer(_ref) {\n  var isFetching = _ref.isFetching,\n    value = _ref.value,\n    mathJaxSource = _ref.mathJaxSource,\n    isShowOutline = _ref.isShowOutline,\n    scrollRef = _ref.scrollRef,\n    onLinkClick = _ref.onLinkClick;\n  var _ref2 = (0, _react.useState)([]),\n    _ref3 = _slicedToArray(_ref2, 2),\n    richValue = _ref3[0],\n    setRichValue = _ref3[1];\n  var _ref4 = (0, _react.useState)(true),\n    _ref5 = _slicedToArray(_ref4, 2),\n    isLoading = _ref5[0],\n    setIsLoading = _ref5[1];\n  var _ref6 = (0, _useMathjax.default)(mathJaxSource),\n    isLoadingMathJax = _ref6.isLoadingMathJax;\n  (0, _react.useEffect)(function () {\n    if (!isFetching) {\n      setIsLoading(true);\n      var _richValue = value ? JSON.parse(value) : (0, _slateConvert.mdStringToSlate)('');\n      setRichValue(_richValue);\n      setTimeout(function () {\n        setIsLoading(false);\n      }, 0);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isFetching, value]);\n  var props = {\n    isSupportFormula: !!mathJaxSource,\n    value: richValue,\n    isShowOutline: isShowOutline,\n    scrollRef: scrollRef,\n    onLinkClick: onLinkClick\n  };\n  if (isFetching || isLoading || isLoadingMathJax) {\n    return /*#__PURE__*/_react.default.createElement(_loading.default, null);\n  }\n  return /*#__PURE__*/_react.default.createElement(_slateViewer.default, props);\n}","map":{"version":3,"names":["_slicedToArray","require","default","_interopRequireDefault","_interopRequireWildcard","Object","defineProperty","exports","value","MarkdownViewer","_react","_loading","_useMathjax","_slateViewer","_slateConvert","_ref","isFetching","mathJaxSource","isShowOutline","scrollRef","onLinkClick","_ref2","useState","_ref3","richValue","setRichValue","_ref4","_ref5","isLoading","setIsLoading","_ref6","isLoadingMathJax","useEffect","JSON","parse","mdStringToSlate","setTimeout","props","isSupportFormula","createElement"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/pages/seatable-viewer.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = MarkdownViewer;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _loading = _interopRequireDefault(require(\"../containers/loading\"));\nvar _useMathjax = _interopRequireDefault(require(\"../hooks/use-mathjax\"));\nvar _slateViewer = _interopRequireDefault(require(\"../editors/slate-viewer\"));\nvar _slateConvert = require(\"../slate-convert\");\nfunction MarkdownViewer(_ref) {\n  let {\n    isFetching,\n    value,\n    mathJaxSource,\n    isShowOutline,\n    scrollRef,\n    onLinkClick\n  } = _ref;\n  const [richValue, setRichValue] = (0, _react.useState)([]);\n  const [isLoading, setIsLoading] = (0, _react.useState)(true);\n  const {\n    isLoadingMathJax\n  } = (0, _useMathjax.default)(mathJaxSource);\n  (0, _react.useEffect)(() => {\n    if (!isFetching) {\n      setIsLoading(true);\n      const richValue = value ? JSON.parse(value) : (0, _slateConvert.mdStringToSlate)('');\n      setRichValue(richValue);\n      setTimeout(() => {\n        setIsLoading(false);\n      }, 0);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isFetching, value]);\n  const props = {\n    isSupportFormula: !!mathJaxSource,\n    value: richValue,\n    isShowOutline: isShowOutline,\n    scrollRef: scrollRef,\n    onLinkClick: onLinkClick\n  };\n  if (isFetching || isLoading || isLoadingMathJax) {\n    return /*#__PURE__*/_react.default.createElement(_loading.default, null);\n  }\n  return /*#__PURE__*/_react.default.createElement(_slateViewer.default, props);\n}"],"mappings":"AAAA,YAAY;;AAAC,IAAAA,cAAA,GAAAC,OAAA,0HAAAC,OAAA;AAEb,IAAIC,sBAAsB,GAAGF,OAAO,CAAC,8CAA8C,CAAC,CAACC,OAAO;AAC5F,IAAIE,uBAAuB,GAAGH,OAAO,CAAC,+CAA+C,CAAC,CAACC,OAAO;AAC9FG,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAC3CC,KAAK,EAAE;AACT,CAAC,CAAC;AACFD,OAAO,CAACL,OAAO,GAAGO,cAAc;AAChC,IAAIC,MAAM,GAAGN,uBAAuB,CAACH,OAAO,CAAC,OAAO,CAAC,CAAC;AACtD,IAAIU,QAAQ,GAAGR,sBAAsB,CAACF,OAAO,CAAC,uBAAuB,CAAC,CAAC;AACvE,IAAIW,WAAW,GAAGT,sBAAsB,CAACF,OAAO,CAAC,sBAAsB,CAAC,CAAC;AACzE,IAAIY,YAAY,GAAGV,sBAAsB,CAACF,OAAO,CAAC,yBAAyB,CAAC,CAAC;AAC7E,IAAIa,aAAa,GAAGb,OAAO,CAAC,kBAAkB,CAAC;AAC/C,SAASQ,cAAcA,CAACM,IAAI,EAAE;EAC5B,IACEC,UAAU,GAMRD,IAAI,CANNC,UAAU;IACVR,KAAK,GAKHO,IAAI,CALNP,KAAK;IACLS,aAAa,GAIXF,IAAI,CAJNE,aAAa;IACbC,aAAa,GAGXH,IAAI,CAHNG,aAAa;IACbC,SAAS,GAEPJ,IAAI,CAFNI,SAAS;IACTC,WAAW,GACTL,IAAI,CADNK,WAAW;EAEb,IAAAC,KAAA,GAAkC,CAAC,CAAC,EAAEX,MAAM,CAACY,QAAQ,EAAE,EAAE,CAAC;IAAAC,KAAA,GAAAvB,cAAA,CAAAqB,KAAA;IAAnDG,SAAS,GAAAD,KAAA;IAAEE,YAAY,GAAAF,KAAA;EAC9B,IAAAG,KAAA,GAAkC,CAAC,CAAC,EAAEhB,MAAM,CAACY,QAAQ,EAAE,IAAI,CAAC;IAAAK,KAAA,GAAA3B,cAAA,CAAA0B,KAAA;IAArDE,SAAS,GAAAD,KAAA;IAAEE,YAAY,GAAAF,KAAA;EAC9B,IAAAG,KAAA,GAEI,CAAC,CAAC,EAAElB,WAAW,CAACV,OAAO,EAAEe,aAAa,CAAC;IADzCc,gBAAgB,GAAAD,KAAA,CAAhBC,gBAAgB;EAElB,CAAC,CAAC,EAAErB,MAAM,CAACsB,SAAS,EAAE,YAAM;IAC1B,IAAI,CAAChB,UAAU,EAAE;MACfa,YAAY,CAAC,IAAI,CAAC;MAClB,IAAML,UAAS,GAAGhB,KAAK,GAAGyB,IAAI,CAACC,KAAK,CAAC1B,KAAK,CAAC,GAAG,CAAC,CAAC,EAAEM,aAAa,CAACqB,eAAe,EAAE,EAAE,CAAC;MACpFV,YAAY,CAACD,UAAS,CAAC;MACvBY,UAAU,CAAC,YAAM;QACfP,YAAY,CAAC,KAAK,CAAC;MACrB,CAAC,EAAE,CAAC,CAAC;IACP;IACA;EACF,CAAC,EAAE,CAACb,UAAU,EAAER,KAAK,CAAC,CAAC;EACvB,IAAM6B,KAAK,GAAG;IACZC,gBAAgB,EAAE,CAAC,CAACrB,aAAa;IACjCT,KAAK,EAAEgB,SAAS;IAChBN,aAAa,EAAEA,aAAa;IAC5BC,SAAS,EAAEA,SAAS;IACpBC,WAAW,EAAEA;EACf,CAAC;EACD,IAAIJ,UAAU,IAAIY,SAAS,IAAIG,gBAAgB,EAAE;IAC/C,OAAO,aAAarB,MAAM,CAACR,OAAO,CAACqC,aAAa,CAAC5B,QAAQ,CAACT,OAAO,EAAE,IAAI,CAAC;EAC1E;EACA,OAAO,aAAaQ,MAAM,CAACR,OAAO,CAACqC,aAAa,CAAC1B,YAAY,CAACX,OAAO,EAAEmC,KAAK,CAAC;AAC/E"},"metadata":{},"sourceType":"script","externalDependencies":[]}