{"ast":null,"code":"import _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useState, useRef, useCallback, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { UncontrolledPopover } from 'reactstrap';\nimport classnames from 'classnames';\nimport ImageMenu from '../../../plugins/image/menu';\nimport TableMenu from '../../../plugins/table/menu/table-menu';\nimport LinkMenu from '../../../plugins/link/menu';\nimport CodeBlockMenu from '../../../plugins/code-block/menu';\nimport SdocLinkMenu from '../../../plugins/sdoc-link/menu';\nimport FileLinkMenu from '../../../plugins/file-link/menu';\nimport EventBus from '../../../../utils/event-bus';\nimport './index.css';\nvar InsertToolbar = function InsertToolbar(_ref) {\n  var isRichEditor = _ref.isRichEditor,\n    className = _ref.className,\n    editor = _ref.editor,\n    readonly = _ref.readonly;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isShowMenu = _useState2[0],\n    setMenuShow = _useState2[1];\n  var _useTranslation = useTranslation(),\n    t = _useTranslation.t;\n  var popoverRef = useRef(null);\n  var disabled = readonly;\n  var insertButtonRef = useRef(null);\n  var insertToolbarId = 'sdoc-insert-toolbar-btn';\n  var eventBus = useMemo(function () {\n    return EventBus.getInstance();\n  }, []);\n  var toggle = useCallback(function (event) {\n    popoverRef.current && popoverRef.current.toggle();\n    setMenuShow(!isShowMenu);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isShowMenu]);\n  var validClassName = classnames(className, 'sdoc-menu-with-dropdown sdoc-insert-toolbar-btn', {\n    'menu-show': isShowMenu,\n    'disabled': disabled,\n    'rich-icon-btn d-flex': isRichEditor,\n    'rich-icon-btn-disabled': isRichEditor && disabled,\n    'rich-icon-btn-hover': isRichEditor && !disabled,\n    'btn btn-icon btn-secondary btn-active d-flex': !isRichEditor\n  });\n  var caretIconClass = \"sdoc-menu-with-dropdown-triangle-icon sdocfont sdoc-\".concat(isShowMenu ? 'caret-up' : 'drop-down');\n  var _ref2 = insertButtonRef.current ? insertButtonRef.current.getBoundingClientRect() : {\n      bottom: 92.5\n    },\n    bottom = _ref2.bottom;\n  var props = {\n    eventBus: eventBus,\n    editor: editor,\n    readonly: readonly,\n    toggle: toggle\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: validClassName,\n    id: insertToolbarId,\n    disabled: disabled,\n    ref: insertButtonRef\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-menu-with-dropdown-icon\"\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"sdocfont sdoc-insert mr-1\"\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-truncate\"\n  }, t('Insert'))), !disabled && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-menu-with-dropdown-triangle\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: caretIconClass\n  }))), !disabled && /*#__PURE__*/React.createElement(UncontrolledPopover, {\n    target: insertToolbarId,\n    className: \"sdoc-menu-popover sdoc-dropdown-menu sdoc-insert-menu-popover\",\n    trigger: \"legacy\",\n    placement: \"bottom-start\",\n    hideArrow: true,\n    toggle: toggle,\n    fade: false,\n    ref: popoverRef\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-insert-menu-container sdoc-dropdown-menu-container\",\n    style: {\n      maxHeight: window.innerHeight - bottom - 100\n    }\n  }, /*#__PURE__*/React.createElement(ImageMenu, props), /*#__PURE__*/React.createElement(TableMenu, props), /*#__PURE__*/React.createElement(LinkMenu, props), /*#__PURE__*/React.createElement(CodeBlockMenu, props), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-dropdown-menu-divider\"\n  }), /*#__PURE__*/React.createElement(SdocLinkMenu, props), /*#__PURE__*/React.createElement(FileLinkMenu, props))));\n};\nInsertToolbar.defaultProps = {\n  isRichEditor: true,\n  className: 'menu-group-item'\n};\nexport default InsertToolbar;","map":{"version":3,"names":["React","useState","useRef","useCallback","useMemo","useTranslation","UncontrolledPopover","classnames","ImageMenu","TableMenu","LinkMenu","CodeBlockMenu","SdocLinkMenu","FileLinkMenu","EventBus","InsertToolbar","_ref","isRichEditor","className","editor","readonly","_useState","_useState2","_slicedToArray","isShowMenu","setMenuShow","_useTranslation","t","popoverRef","disabled","insertButtonRef","insertToolbarId","eventBus","getInstance","toggle","event","current","validClassName","caretIconClass","concat","_ref2","getBoundingClientRect","bottom","props","createElement","Fragment","type","id","ref","target","trigger","placement","hideArrow","fade","style","maxHeight","window","innerHeight","defaultProps"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/extension/toolbar/header-toolbar/insert-toolbar/index.js"],"sourcesContent":["import React, { useState, useRef, useCallback, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { UncontrolledPopover } from 'reactstrap';\nimport classnames from 'classnames';\nimport ImageMenu from '../../../plugins/image/menu';\nimport TableMenu from '../../../plugins/table/menu/table-menu';\nimport LinkMenu from '../../../plugins/link/menu';\nimport CodeBlockMenu from '../../../plugins/code-block/menu';\nimport SdocLinkMenu from '../../../plugins/sdoc-link/menu';\nimport FileLinkMenu from '../../../plugins/file-link/menu';\nimport EventBus from '../../../../utils/event-bus';\nimport './index.css';\nconst InsertToolbar = _ref => {\n  let {\n    isRichEditor,\n    className,\n    editor,\n    readonly\n  } = _ref;\n  const [isShowMenu, setMenuShow] = useState(false);\n  const {\n    t\n  } = useTranslation();\n  const popoverRef = useRef(null);\n  const disabled = readonly;\n  const insertButtonRef = useRef(null);\n  const insertToolbarId = 'sdoc-insert-toolbar-btn';\n  const eventBus = useMemo(() => {\n    return EventBus.getInstance();\n  }, []);\n  const toggle = useCallback(event => {\n    popoverRef.current && popoverRef.current.toggle();\n    setMenuShow(!isShowMenu);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isShowMenu]);\n  const validClassName = classnames(className, 'sdoc-menu-with-dropdown sdoc-insert-toolbar-btn', {\n    'menu-show': isShowMenu,\n    'disabled': disabled,\n    'rich-icon-btn d-flex': isRichEditor,\n    'rich-icon-btn-disabled': isRichEditor && disabled,\n    'rich-icon-btn-hover': isRichEditor && !disabled,\n    'btn btn-icon btn-secondary btn-active d-flex': !isRichEditor\n  });\n  const caretIconClass = \"sdoc-menu-with-dropdown-triangle-icon sdocfont sdoc-\".concat(isShowMenu ? 'caret-up' : 'drop-down');\n  const {\n    bottom\n  } = insertButtonRef.current ? insertButtonRef.current.getBoundingClientRect() : {\n    bottom: 92.5\n  };\n  const props = {\n    eventBus,\n    editor,\n    readonly,\n    toggle\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: validClassName,\n    id: insertToolbarId,\n    disabled: disabled,\n    ref: insertButtonRef\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-menu-with-dropdown-icon\"\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"sdocfont sdoc-insert mr-1\"\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-truncate\"\n  }, t('Insert'))), !disabled && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-menu-with-dropdown-triangle\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: caretIconClass\n  }))), !disabled && /*#__PURE__*/React.createElement(UncontrolledPopover, {\n    target: insertToolbarId,\n    className: \"sdoc-menu-popover sdoc-dropdown-menu sdoc-insert-menu-popover\",\n    trigger: \"legacy\",\n    placement: \"bottom-start\",\n    hideArrow: true,\n    toggle: toggle,\n    fade: false,\n    ref: popoverRef\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-insert-menu-container sdoc-dropdown-menu-container\",\n    style: {\n      maxHeight: window.innerHeight - bottom - 100\n    }\n  }, /*#__PURE__*/React.createElement(ImageMenu, props), /*#__PURE__*/React.createElement(TableMenu, props), /*#__PURE__*/React.createElement(LinkMenu, props), /*#__PURE__*/React.createElement(CodeBlockMenu, props), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sdoc-dropdown-menu-divider\"\n  }), /*#__PURE__*/React.createElement(SdocLinkMenu, props), /*#__PURE__*/React.createElement(FileLinkMenu, props))));\n};\nInsertToolbar.defaultProps = {\n  isRichEditor: true,\n  className: 'menu-group-item'\n};\nexport default InsertToolbar;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}