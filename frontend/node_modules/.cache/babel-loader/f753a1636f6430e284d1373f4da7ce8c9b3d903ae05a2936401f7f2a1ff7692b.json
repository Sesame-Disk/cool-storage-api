{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _eventTypes = require(\"../../../../constants/event-types\");\nvar _menusConfig = require(\"../../../constants/menus-config\");\nvar _elementTypes = require(\"../../../constants/element-types\");\nvar _menuItem = _interopRequireDefault(require(\"../../../commons/menu/menu-item\"));\nvar _helper = require(\"../helper\");\nvar _eventBus = _interopRequireDefault(require(\"../../../../utils/event-bus\"));\nvar _formulaModal = _interopRequireDefault(require(\"./formula-modal\"));\nvar menuConfig = _menusConfig.MENUS_CONFIG_MAP[_elementTypes.FORMULA];\nvar FormulaMenu = function FormulaMenu(_ref) {\n  var isRichEditor = _ref.isRichEditor,\n    className = _ref.className,\n    readonly = _ref.readonly,\n    editor = _ref.editor;\n  var _ref2 = (0, _react.useState)(false),\n    _ref3 = _slicedToArray(_ref2, 2),\n    isOpenFormulaModal = _ref3[0],\n    setIsOpenFormulaModal = _ref3[1];\n  var _ref4 = (0, _react.useState)(''),\n    _ref5 = _slicedToArray(_ref4, 2),\n    formula = _ref5[0],\n    setFormula = _ref5[1];\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  var isMenuActive = (0, _react.useMemo)(function () {\n    return (0, _helper.isFormulaActive)(editor);\n  }, [editor.selection]);\n  (0, _react.useEffect)(function () {\n    var eventBus = _eventBus.default.getInstance();\n    var unsubscribe = eventBus.subscribe(_eventTypes.INTERNAL_EVENTS.ON_OPEN_FORMULA_DIALOG, handleOpenLinkModal);\n    return function () {\n      return unsubscribe();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  var onMouseDown = (0, _react.useCallback)(function () {\n    setIsOpenFormulaModal(true);\n  }, []);\n  var handleOpenLinkModal = (0, _react.useCallback)(function (formulaElement) {\n    if (formulaElement) {\n      var _ref6 = formulaElement.data || {},\n        _formula = _ref6.formula;\n      setFormula(_formula);\n      setIsOpenFormulaModal(true);\n    }\n  }, []);\n  var onCloseModal = (0, _react.useCallback)(function () {\n    setIsOpenFormulaModal(false);\n    setFormula('');\n  }, []);\n  return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement(_menuItem.default, Object.assign({\n    isRichEditor: isRichEditor,\n    className: className,\n    disabled: (0, _helper.isMenuDisabled)(editor, readonly),\n    isActive: isMenuActive,\n    onMouseDown: onMouseDown\n  }, menuConfig)), isOpenFormulaModal && /*#__PURE__*/_react.default.createElement(_formulaModal.default, {\n    editor: editor,\n    formula: formula,\n    onCloseModal: onCloseModal\n  }));\n};\nvar _default = exports.default = FormulaMenu;","map":{"version":3,"names":["_slicedToArray","require","default","_interopRequireDefault","_interopRequireWildcard","Object","defineProperty","exports","value","_react","_eventTypes","_menusConfig","_elementTypes","_menuItem","_helper","_eventBus","_formulaModal","menuConfig","MENUS_CONFIG_MAP","FORMULA","FormulaMenu","_ref","isRichEditor","className","readonly","editor","_ref2","useState","_ref3","isOpenFormulaModal","setIsOpenFormulaModal","_ref4","_ref5","formula","setFormula","isMenuActive","useMemo","isFormulaActive","selection","useEffect","eventBus","getInstance","unsubscribe","subscribe","INTERNAL_EVENTS","ON_OPEN_FORMULA_DIALOG","handleOpenLinkModal","onMouseDown","useCallback","formulaElement","_ref6","data","onCloseModal","createElement","Fragment","assign","disabled","isMenuDisabled","isActive","_default"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/extension/plugins/formula/menu/index.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _eventTypes = require(\"../../../../constants/event-types\");\nvar _menusConfig = require(\"../../../constants/menus-config\");\nvar _elementTypes = require(\"../../../constants/element-types\");\nvar _menuItem = _interopRequireDefault(require(\"../../../commons/menu/menu-item\"));\nvar _helper = require(\"../helper\");\nvar _eventBus = _interopRequireDefault(require(\"../../../../utils/event-bus\"));\nvar _formulaModal = _interopRequireDefault(require(\"./formula-modal\"));\nconst menuConfig = _menusConfig.MENUS_CONFIG_MAP[_elementTypes.FORMULA];\nconst FormulaMenu = _ref => {\n  let {\n    isRichEditor,\n    className,\n    readonly,\n    editor\n  } = _ref;\n  const [isOpenFormulaModal, setIsOpenFormulaModal] = (0, _react.useState)(false);\n  const [formula, setFormula] = (0, _react.useState)('');\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const isMenuActive = (0, _react.useMemo)(() => (0, _helper.isFormulaActive)(editor), [editor.selection]);\n  (0, _react.useEffect)(() => {\n    const eventBus = _eventBus.default.getInstance();\n    const unsubscribe = eventBus.subscribe(_eventTypes.INTERNAL_EVENTS.ON_OPEN_FORMULA_DIALOG, handleOpenLinkModal);\n    return () => unsubscribe();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const onMouseDown = (0, _react.useCallback)(() => {\n    setIsOpenFormulaModal(true);\n  }, []);\n  const handleOpenLinkModal = (0, _react.useCallback)(formulaElement => {\n    if (formulaElement) {\n      const {\n        formula\n      } = formulaElement.data || {};\n      setFormula(formula);\n      setIsOpenFormulaModal(true);\n    }\n  }, []);\n  const onCloseModal = (0, _react.useCallback)(() => {\n    setIsOpenFormulaModal(false);\n    setFormula('');\n  }, []);\n  return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement(_menuItem.default, Object.assign({\n    isRichEditor: isRichEditor,\n    className: className,\n    disabled: (0, _helper.isMenuDisabled)(editor, readonly),\n    isActive: isMenuActive,\n    onMouseDown: onMouseDown\n  }, menuConfig)), isOpenFormulaModal && /*#__PURE__*/_react.default.createElement(_formulaModal.default, {\n    editor: editor,\n    formula: formula,\n    onCloseModal: onCloseModal\n  }));\n};\nvar _default = exports.default = FormulaMenu;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}