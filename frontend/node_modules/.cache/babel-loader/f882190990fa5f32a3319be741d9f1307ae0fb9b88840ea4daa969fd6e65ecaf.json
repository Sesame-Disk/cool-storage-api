{"ast":null,"code":"import _toConsumableArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport React, { useEffect, useState, useImperativeHandle, forwardRef, useMemo, useCallback, Fragment } from 'react';\nimport { Editor } from '@seafile/slate';\nimport deepCopy from 'deep-copy';\nimport context from '../../context';\nimport CommonLoading from '../../components/common-loading';\nimport { INTERNAL_EVENT, PAGE_EDIT_AREA_WIDTH } from '../constants';\nimport { createDefaultEditor, HeaderToolbar } from '../extension';\nimport withNodeId from '../node-id';\nimport { withSocketIO } from '../socket';\nimport { focusEditor } from '../extension/core';\nimport InsertElementDialog from '../extension/commons/insert-element-dialog';\nimport { EditorContainer, EditorContent } from '../layout';\nimport EditableArticle from './editable-article';\nimport { ColorProvider } from '../hooks/use-color-context';\nimport ReadOnlyArticle from '../views/readonly-article';\nimport { isMobile } from '../../utils';\nimport { CollaboratorsProvider } from '../../hooks';\nimport { EventBus } from '../../basic-sdk';\nimport { EXTERNAL_EVENT } from '../../constants';\nvar SdocEditor = forwardRef(function (_ref, ref) {\n  var propsEditor = _ref.editor,\n    document = _ref.document,\n    isReloading = _ref.isReloading,\n    showComment = _ref.showComment,\n    _ref$isShowHeaderTool = _ref.isShowHeaderToolbar,\n    isShowHeaderToolbar = _ref$isShowHeaderTool === void 0 ? true : _ref$isShowHeaderTool,\n    _ref$showOutline = _ref.showOutline,\n    showOutline = _ref$showOutline === void 0 ? true : _ref$showOutline,\n    isWikiReadOnly = _ref.isWikiReadOnly;\n  var validEditor = propsEditor || useMemo(function () {\n    var defaultEditor = createDefaultEditor();\n    var editorConfig = context.getEditorConfig();\n    var newEditor = withNodeId(withSocketIO(defaultEditor, {\n      document: document,\n      config: editorConfig\n    }));\n    var cursors = document.cursors;\n    newEditor.cursors = cursors || {};\n    newEditor.width = PAGE_EDIT_AREA_WIDTH; // default width\n    return newEditor;\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  var _useState = useState(document.children),\n    _useState2 = _slicedToArray(_useState, 2),\n    slateValue = _useState2[0],\n    _setSlateValue = _useState2[1];\n\n  // Fix: The editor's children are not updated when the document is updated in revision\n  // In revision mode, the document is updated, but the editor's children are not updated,as onValueChange override the new document.children. This unexpected action cause the editor to display the old content\n  useEffect(function () {\n    _setSlateValue(document.children);\n  }, [document.children]);\n  useEffect(function () {\n    validEditor.readonly = false;\n    return function () {\n      validEditor.selection = null;\n    };\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  // useMount: init socket connection\n  useEffect(function () {\n    if (propsEditor) return;\n    validEditor.openConnection();\n    return function () {\n      validEditor.closeConnection();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // useMount: focus editor\n  useEffect(function () {\n    var timer = setTimeout(function () {\n      var _validEditor$children = _slicedToArray(validEditor.children, 1),\n        firstNode = _validEditor$children[0];\n      if (firstNode) {\n        var _firstNode$children = _slicedToArray(firstNode.children, 1),\n          firstNodeFirstChild = _firstNode$children[0];\n        if (firstNodeFirstChild) {\n          var endOfFirstNode = Editor.end(validEditor, [0, 0]);\n          var range = {\n            anchor: endOfFirstNode,\n            focus: endOfFirstNode\n          };\n          focusEditor(validEditor, range);\n        }\n      }\n    }, 300);\n    return function () {\n      clearTimeout(timer);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  var onRefreshDocument = useCallback(function () {\n    window.location.reload();\n  }, []);\n\n  // useMount: refresh document\n  useEffect(function () {\n    var eventBus = EventBus.getInstance();\n    eventBus.subscribe(EXTERNAL_EVENT.REFRESH_DOCUMENT, onRefreshDocument);\n  }, [onRefreshDocument]);\n\n  // The parent component can call the method of this component through ref\n  useImperativeHandle(ref, function () {\n    return {\n      setSlateValue: function setSlateValue(document) {\n        // Force update of editor's child elements\n        validEditor.children = document.children;\n        _setSlateValue(_toConsumableArray(document.children));\n      },\n      updateDocumentVersion: function updateDocumentVersion(document) {\n        validEditor.updateDocumentVersion(document);\n      },\n      // get value\n      getSlateValue: function getSlateValue() {\n        return deepCopy(_objectSpread(_objectSpread({}, document), {}, {\n          children: slateValue\n        }));\n      }\n\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    };\n  }, [document, validEditor, slateValue]);\n  var onValueChange = function onValueChange(value) {\n    var eventBus = EventBus.getInstance();\n    eventBus.dispatch(INTERNAL_EVENT.UPDATE_SEARCH_REPLACE_HIGHLIGHT, value);\n    _setSlateValue(value);\n  };\n  var isFreezed = context.getSetting('isFreezed');\n  if (isReloading) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"h-100 w-100 d-flex align-items-center justify-content-center\"\n    }, /*#__PURE__*/React.createElement(CommonLoading, null));\n  }\n  if (isMobile) {\n    return /*#__PURE__*/React.createElement(EditorContainer, {\n      editor: validEditor,\n      readonly: true\n    }, /*#__PURE__*/React.createElement(ColorProvider, null, /*#__PURE__*/React.createElement(EditorContent, {\n      docValue: slateValue,\n      readonly: true,\n      showOutline: false,\n      editor: validEditor,\n      showComment: false\n    }, /*#__PURE__*/React.createElement(ReadOnlyArticle, {\n      editor: validEditor,\n      slateValue: slateValue,\n      showComment: false\n    }))));\n  }\n  if (isFreezed) {\n    return /*#__PURE__*/React.createElement(EditorContainer, {\n      editor: validEditor,\n      readonly: isFreezed\n    }, /*#__PURE__*/React.createElement(CollaboratorsProvider, null, /*#__PURE__*/React.createElement(ColorProvider, null, isShowHeaderToolbar && /*#__PURE__*/React.createElement(HeaderToolbar, {\n      editor: validEditor,\n      readonly: isFreezed\n    }), /*#__PURE__*/React.createElement(EditorContent, {\n      docValue: slateValue,\n      showOutline: true,\n      readonly: isFreezed,\n      editor: validEditor,\n      showComment: true\n    }, /*#__PURE__*/React.createElement(ReadOnlyArticle, {\n      editor: validEditor,\n      slateValue: slateValue,\n      showComment: true\n    })))));\n  }\n  var isShowComment = typeof showComment === 'boolean' ? showComment : true;\n  var Provider = isShowComment ? CollaboratorsProvider : Fragment;\n  if (isWikiReadOnly) {\n    return /*#__PURE__*/React.createElement(EditorContainer, {\n      editor: validEditor,\n      readonly: isWikiReadOnly\n    }, /*#__PURE__*/React.createElement(ColorProvider, null, /*#__PURE__*/React.createElement(EditorContent, {\n      docValue: slateValue,\n      showOutline: showOutline !== null && showOutline !== void 0 ? showOutline : true,\n      readonly: isWikiReadOnly,\n      editor: validEditor,\n      showComment: isShowComment\n    }, /*#__PURE__*/React.createElement(ReadOnlyArticle, {\n      editor: validEditor,\n      slateValue: slateValue,\n      showComment: isShowComment\n    }))));\n  }\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(EditorContainer, {\n    editor: validEditor\n  }, /*#__PURE__*/React.createElement(Provider, null, /*#__PURE__*/React.createElement(ColorProvider, null, isShowHeaderToolbar && /*#__PURE__*/React.createElement(HeaderToolbar, {\n    editor: validEditor\n  }), /*#__PURE__*/React.createElement(EditorContent, {\n    docValue: slateValue,\n    showOutline: showOutline !== null && showOutline !== void 0 ? showOutline : true,\n    editor: validEditor,\n    showComment: isShowComment\n  }, /*#__PURE__*/React.createElement(EditableArticle, {\n    editor: validEditor,\n    slateValue: slateValue,\n    updateSlateValue: onValueChange,\n    showComment: isShowComment\n  }))))), /*#__PURE__*/React.createElement(InsertElementDialog, {\n    editor: validEditor\n  }));\n});\nexport default SdocEditor;","map":{"version":3,"names":["_objectSpread","React","useEffect","useState","useImperativeHandle","forwardRef","useMemo","useCallback","Fragment","Editor","deepCopy","context","CommonLoading","INTERNAL_EVENT","PAGE_EDIT_AREA_WIDTH","createDefaultEditor","HeaderToolbar","withNodeId","withSocketIO","focusEditor","InsertElementDialog","EditorContainer","EditorContent","EditableArticle","ColorProvider","ReadOnlyArticle","isMobile","CollaboratorsProvider","EventBus","EXTERNAL_EVENT","SdocEditor","_ref","ref","propsEditor","editor","document","isReloading","showComment","_ref$isShowHeaderTool","isShowHeaderToolbar","_ref$showOutline","showOutline","isWikiReadOnly","validEditor","defaultEditor","editorConfig","getEditorConfig","newEditor","config","cursors","width","_useState","children","_useState2","_slicedToArray","slateValue","setSlateValue","readonly","selection","openConnection","closeConnection","timer","setTimeout","_validEditor$children","firstNode","_firstNode$children","firstNodeFirstChild","endOfFirstNode","end","range","anchor","focus","clearTimeout","onRefreshDocument","window","location","reload","eventBus","getInstance","subscribe","REFRESH_DOCUMENT","_toConsumableArray","updateDocumentVersion","getSlateValue","onValueChange","value","dispatch","UPDATE_SEARCH_REPLACE_HIGHLIGHT","isFreezed","getSetting","createElement","className","docValue","isShowComment","Provider","updateSlateValue"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/editor/sdoc-editor.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport React, { useEffect, useState, useImperativeHandle, forwardRef, useMemo, useCallback, Fragment } from 'react';\nimport { Editor } from '@seafile/slate';\nimport deepCopy from 'deep-copy';\nimport context from '../../context';\nimport CommonLoading from '../../components/common-loading';\nimport { INTERNAL_EVENT, PAGE_EDIT_AREA_WIDTH } from '../constants';\nimport { createDefaultEditor, HeaderToolbar } from '../extension';\nimport withNodeId from '../node-id';\nimport { withSocketIO } from '../socket';\nimport { focusEditor } from '../extension/core';\nimport InsertElementDialog from '../extension/commons/insert-element-dialog';\nimport { EditorContainer, EditorContent } from '../layout';\nimport EditableArticle from './editable-article';\nimport { ColorProvider } from '../hooks/use-color-context';\nimport ReadOnlyArticle from '../views/readonly-article';\nimport { isMobile } from '../../utils';\nimport { CollaboratorsProvider } from '../../hooks';\nimport { EventBus } from '../../basic-sdk';\nimport { EXTERNAL_EVENT } from '../../constants';\nconst SdocEditor = forwardRef((_ref, ref) => {\n  let {\n    editor: propsEditor,\n    document,\n    isReloading,\n    showComment,\n    isShowHeaderToolbar = true,\n    showOutline = true,\n    isWikiReadOnly\n  } = _ref;\n  const validEditor = propsEditor || useMemo(() => {\n    const defaultEditor = createDefaultEditor();\n    const editorConfig = context.getEditorConfig();\n    const newEditor = withNodeId(withSocketIO(defaultEditor, {\n      document,\n      config: editorConfig\n    }));\n    const {\n      cursors\n    } = document;\n    newEditor.cursors = cursors || {};\n    newEditor.width = PAGE_EDIT_AREA_WIDTH; // default width\n    return newEditor;\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const [slateValue, setSlateValue] = useState(document.children);\n\n  // Fix: The editor's children are not updated when the document is updated in revision\n  // In revision mode, the document is updated, but the editor's children are not updated,as onValueChange override the new document.children. This unexpected action cause the editor to display the old content\n  useEffect(() => {\n    setSlateValue(document.children);\n  }, [document.children]);\n  useEffect(() => {\n    validEditor.readonly = false;\n    return () => {\n      validEditor.selection = null;\n    };\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  // useMount: init socket connection\n  useEffect(() => {\n    if (propsEditor) return;\n    validEditor.openConnection();\n    return () => {\n      validEditor.closeConnection();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // useMount: focus editor\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      const [firstNode] = validEditor.children;\n      if (firstNode) {\n        const [firstNodeFirstChild] = firstNode.children;\n        if (firstNodeFirstChild) {\n          const endOfFirstNode = Editor.end(validEditor, [0, 0]);\n          const range = {\n            anchor: endOfFirstNode,\n            focus: endOfFirstNode\n          };\n          focusEditor(validEditor, range);\n        }\n      }\n    }, 300);\n    return () => {\n      clearTimeout(timer);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const onRefreshDocument = useCallback(() => {\n    window.location.reload();\n  }, []);\n\n  // useMount: refresh document\n  useEffect(() => {\n    const eventBus = EventBus.getInstance();\n    eventBus.subscribe(EXTERNAL_EVENT.REFRESH_DOCUMENT, onRefreshDocument);\n  }, [onRefreshDocument]);\n\n  // The parent component can call the method of this component through ref\n  useImperativeHandle(ref, () => ({\n    setSlateValue: document => {\n      // Force update of editor's child elements\n      validEditor.children = document.children;\n      setSlateValue([...document.children]);\n    },\n    updateDocumentVersion: document => {\n      validEditor.updateDocumentVersion(document);\n    },\n    // get value\n    getSlateValue: () => {\n      return deepCopy(_objectSpread(_objectSpread({}, document), {}, {\n        children: slateValue\n      }));\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }), [document, validEditor, slateValue]);\n  const onValueChange = value => {\n    const eventBus = EventBus.getInstance();\n    eventBus.dispatch(INTERNAL_EVENT.UPDATE_SEARCH_REPLACE_HIGHLIGHT, value);\n    setSlateValue(value);\n  };\n  const isFreezed = context.getSetting('isFreezed');\n  if (isReloading) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"h-100 w-100 d-flex align-items-center justify-content-center\"\n    }, /*#__PURE__*/React.createElement(CommonLoading, null));\n  }\n  if (isMobile) {\n    return /*#__PURE__*/React.createElement(EditorContainer, {\n      editor: validEditor,\n      readonly: true\n    }, /*#__PURE__*/React.createElement(ColorProvider, null, /*#__PURE__*/React.createElement(EditorContent, {\n      docValue: slateValue,\n      readonly: true,\n      showOutline: false,\n      editor: validEditor,\n      showComment: false\n    }, /*#__PURE__*/React.createElement(ReadOnlyArticle, {\n      editor: validEditor,\n      slateValue: slateValue,\n      showComment: false\n    }))));\n  }\n  if (isFreezed) {\n    return /*#__PURE__*/React.createElement(EditorContainer, {\n      editor: validEditor,\n      readonly: isFreezed\n    }, /*#__PURE__*/React.createElement(CollaboratorsProvider, null, /*#__PURE__*/React.createElement(ColorProvider, null, isShowHeaderToolbar && /*#__PURE__*/React.createElement(HeaderToolbar, {\n      editor: validEditor,\n      readonly: isFreezed\n    }), /*#__PURE__*/React.createElement(EditorContent, {\n      docValue: slateValue,\n      showOutline: true,\n      readonly: isFreezed,\n      editor: validEditor,\n      showComment: true\n    }, /*#__PURE__*/React.createElement(ReadOnlyArticle, {\n      editor: validEditor,\n      slateValue: slateValue,\n      showComment: true\n    })))));\n  }\n  const isShowComment = typeof showComment === 'boolean' ? showComment : true;\n  const Provider = isShowComment ? CollaboratorsProvider : Fragment;\n  if (isWikiReadOnly) {\n    return /*#__PURE__*/React.createElement(EditorContainer, {\n      editor: validEditor,\n      readonly: isWikiReadOnly\n    }, /*#__PURE__*/React.createElement(ColorProvider, null, /*#__PURE__*/React.createElement(EditorContent, {\n      docValue: slateValue,\n      showOutline: showOutline !== null && showOutline !== void 0 ? showOutline : true,\n      readonly: isWikiReadOnly,\n      editor: validEditor,\n      showComment: isShowComment\n    }, /*#__PURE__*/React.createElement(ReadOnlyArticle, {\n      editor: validEditor,\n      slateValue: slateValue,\n      showComment: isShowComment\n    }))));\n  }\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(EditorContainer, {\n    editor: validEditor\n  }, /*#__PURE__*/React.createElement(Provider, null, /*#__PURE__*/React.createElement(ColorProvider, null, isShowHeaderToolbar && /*#__PURE__*/React.createElement(HeaderToolbar, {\n    editor: validEditor\n  }), /*#__PURE__*/React.createElement(EditorContent, {\n    docValue: slateValue,\n    showOutline: showOutline !== null && showOutline !== void 0 ? showOutline : true,\n    editor: validEditor,\n    showComment: isShowComment\n  }, /*#__PURE__*/React.createElement(EditableArticle, {\n    editor: validEditor,\n    slateValue: slateValue,\n    updateSlateValue: onValueChange,\n    showComment: isShowComment\n  }))))), /*#__PURE__*/React.createElement(InsertElementDialog, {\n    editor: validEditor\n  }));\n});\nexport default SdocEditor;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}