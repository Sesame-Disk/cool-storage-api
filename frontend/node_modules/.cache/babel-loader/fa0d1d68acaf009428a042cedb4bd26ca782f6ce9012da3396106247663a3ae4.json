{"ast":null,"code":"import _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { createContext, useCallback, useContext, useEffect, useState } from 'react';\nimport { useScrollContext } from '../../../../hooks/use-scroll-context';\nexport var TableRootContext = createContext();\nexport var useTableRootContext = function useTableRootContext() {\n  return useContext(TableRootContext);\n};\nexport var TableSelectedRangeContext = createContext();\nexport var useTableSelectedRangeContext = function useTableSelectedRangeContext() {\n  return useContext(TableSelectedRangeContext);\n};\nexport var ResizeHandlersContext = createContext();\nexport var useResizeHandlersContext = function useResizeHandlersContext() {\n  return useContext(ResizeHandlersContext);\n};\nexport var SettingSelectRangeContext = createContext();\nexport var useSettingSelectRangeContext = function useSettingSelectRangeContext() {\n  return useContext(SettingSelectRangeContext);\n};\nexport var TableRootScrollLeftContext = createContext();\nexport var useTableRootScrollLeftContext = function useTableRootScrollLeftContext() {\n  return useContext(TableRootScrollLeftContext);\n};\nexport var useContextMenu = function useContextMenu(tableScrollWrapper) {\n  var scrollRef = useScrollContext();\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    isShowContextMenu = _useState2[0],\n    setShowContextMenu = _useState2[1];\n  var _useState3 = useState({}),\n    _useState4 = _slicedToArray(_useState3, 2),\n    menuPosition = _useState4[0],\n    setMenuPosition = _useState4[1];\n  var onContextMenu = useCallback(function (event) {\n    event.preventDefault();\n    var menuPosition = {\n      left: event.clientX,\n      top: event.clientY\n    };\n    setShowContextMenu(true);\n    setMenuPosition(menuPosition);\n  }, []);\n  var hideContextMenu = useCallback(function (e) {\n    if (isShowContextMenu) {\n      setShowContextMenu(false);\n    }\n  }, [isShowContextMenu]);\n  var hideByContextmenuEvent = useCallback(function (e) {\n    var table = tableScrollWrapper.current;\n    var clickIsInCurrentTable = table && table.contains(e.target) && table !== e.target;\n    if (!clickIsInCurrentTable) {\n      setShowContextMenu(false);\n    }\n  }, [tableScrollWrapper]);\n  useEffect(function () {\n    document.addEventListener('mousedown', hideContextMenu);\n    document.addEventListener('contextmenu', hideByContextmenuEvent, true);\n    scrollRef.current && scrollRef.current.addEventListener('scroll', hideContextMenu);\n    return function () {\n      document.removeEventListener('mousedown', hideContextMenu);\n      document.removeEventListener('contextmenu', hideByContextmenuEvent, true);\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      scrollRef.current && scrollRef.current.removeEventListener('scroll', hideContextMenu);\n    };\n  }, [hideContextMenu, hideByContextmenuEvent, scrollRef]);\n  return {\n    isShowContextMenu: isShowContextMenu,\n    menuPosition: menuPosition,\n    onContextMenu: onContextMenu\n  };\n};","map":{"version":3,"names":["createContext","useCallback","useContext","useEffect","useState","useScrollContext","TableRootContext","useTableRootContext","TableSelectedRangeContext","useTableSelectedRangeContext","ResizeHandlersContext","useResizeHandlersContext","SettingSelectRangeContext","useSettingSelectRangeContext","TableRootScrollLeftContext","useTableRootScrollLeftContext","useContextMenu","tableScrollWrapper","scrollRef","_useState","_useState2","_slicedToArray","isShowContextMenu","setShowContextMenu","_useState3","_useState4","menuPosition","setMenuPosition","onContextMenu","event","preventDefault","left","clientX","top","clientY","hideContextMenu","e","hideByContextmenuEvent","table","current","clickIsInCurrentTable","contains","target","document","addEventListener","removeEventListener"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/extension/plugins/table/render/hooks.js"],"sourcesContent":["import { createContext, useCallback, useContext, useEffect, useState } from 'react';\nimport { useScrollContext } from '../../../../hooks/use-scroll-context';\nexport const TableRootContext = createContext();\nexport const useTableRootContext = () => {\n  return useContext(TableRootContext);\n};\nexport const TableSelectedRangeContext = createContext();\nexport const useTableSelectedRangeContext = () => {\n  return useContext(TableSelectedRangeContext);\n};\nexport const ResizeHandlersContext = createContext();\nexport const useResizeHandlersContext = () => {\n  return useContext(ResizeHandlersContext);\n};\nexport const SettingSelectRangeContext = createContext();\nexport const useSettingSelectRangeContext = () => {\n  return useContext(SettingSelectRangeContext);\n};\nexport const TableRootScrollLeftContext = createContext();\nexport const useTableRootScrollLeftContext = () => {\n  return useContext(TableRootScrollLeftContext);\n};\nexport const useContextMenu = tableScrollWrapper => {\n  const scrollRef = useScrollContext();\n  const [isShowContextMenu, setShowContextMenu] = useState();\n  const [menuPosition, setMenuPosition] = useState({});\n  const onContextMenu = useCallback(event => {\n    event.preventDefault();\n    const menuPosition = {\n      left: event.clientX,\n      top: event.clientY\n    };\n    setShowContextMenu(true);\n    setMenuPosition(menuPosition);\n  }, []);\n  const hideContextMenu = useCallback(e => {\n    if (isShowContextMenu) {\n      setShowContextMenu(false);\n    }\n  }, [isShowContextMenu]);\n  const hideByContextmenuEvent = useCallback(e => {\n    const table = tableScrollWrapper.current;\n    const clickIsInCurrentTable = table && table.contains(e.target) && table !== e.target;\n    if (!clickIsInCurrentTable) {\n      setShowContextMenu(false);\n    }\n  }, [tableScrollWrapper]);\n  useEffect(() => {\n    document.addEventListener('mousedown', hideContextMenu);\n    document.addEventListener('contextmenu', hideByContextmenuEvent, true);\n    scrollRef.current && scrollRef.current.addEventListener('scroll', hideContextMenu);\n    return () => {\n      document.removeEventListener('mousedown', hideContextMenu);\n      document.removeEventListener('contextmenu', hideByContextmenuEvent, true);\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      scrollRef.current && scrollRef.current.removeEventListener('scroll', hideContextMenu);\n    };\n  }, [hideContextMenu, hideByContextmenuEvent, scrollRef]);\n  return {\n    isShowContextMenu,\n    menuPosition,\n    onContextMenu\n  };\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}