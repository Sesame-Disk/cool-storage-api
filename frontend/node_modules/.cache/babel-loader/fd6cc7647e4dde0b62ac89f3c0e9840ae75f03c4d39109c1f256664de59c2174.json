{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _loading = _interopRequireDefault(require(\"../containers/loading\"));\nvar _slateConvert = require(\"../slate-convert\");\nvar _useMathjax = _interopRequireDefault(require(\"../hooks/use-mathjax\"));\nvar _slateEditor = _interopRequireDefault(require(\"../editors/slate-editor\"));\nvar _core = require(\"../extension/core\");\nvar SimpleEditor = /*#__PURE__*/(0, _react.forwardRef)(function (_ref, ref) {\n  var isFetching = _ref.isFetching,\n    value = _ref.value,\n    initValue = _ref.initValue,\n    editorApi = _ref.editorApi,\n    mathJaxSource = _ref.mathJaxSource,\n    isSupportInsertSeafileImage = _ref.isSupportInsertSeafileImage,\n    propsOnSave = _ref.onSave,\n    propsOnContentChanged = _ref.onContentChanged,\n    children = _ref.children;\n  var _ref2 = (0, _react.useState)([]),\n    _ref3 = _slicedToArray(_ref2, 2),\n    richValue = _ref3[0],\n    setRichValue = _ref3[1];\n  var _ref4 = (0, _react.useState)(true),\n    _ref5 = _slicedToArray(_ref4, 2),\n    isLoading = _ref5[0],\n    setIsLoading = _ref5[1];\n  var _ref6 = (0, _useMathjax.default)(mathJaxSource),\n    isLoadingMathJax = _ref6.isLoadingMathJax;\n  (0, _react.useImperativeHandle)(ref, function () {\n    return {\n      getValue: function getValue() {\n        var mdStringValue = (0, _slateConvert.slateToMdString)(richValue);\n        return mdStringValue;\n      }\n    };\n  }, [richValue]);\n  (0, _react.useEffect)(function () {\n    if (!isFetching) {\n      var _richValue = (0, _slateConvert.mdStringToSlate)(value);\n      if (!value && initValue) {\n        _richValue = [(0, _core.generateHeaderElement)(initValue)];\n      }\n      setRichValue(_richValue);\n      setIsLoading(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isFetching]);\n  var onContentChanged = (0, _react.useCallback)(function (content) {\n    setRichValue(content);\n    propsOnContentChanged && propsOnContentChanged();\n  }, [propsOnContentChanged]);\n  var props = {\n    isSupportFormula: !!mathJaxSource,\n    isSupportInsertSeafileImage: isSupportInsertSeafileImage,\n    value: richValue,\n    editorApi: editorApi,\n    onSave: propsOnSave,\n    onContentChanged: onContentChanged,\n    children: children\n  };\n  if (isFetching || isLoading || isLoadingMathJax) {\n    return /*#__PURE__*/_react.default.createElement(_loading.default, null);\n  }\n  return /*#__PURE__*/_react.default.createElement(_slateEditor.default, props);\n});\nvar _default = exports.default = SimpleEditor;","map":{"version":3,"names":["_slicedToArray","require","default","_interopRequireDefault","_interopRequireWildcard","Object","defineProperty","exports","value","_react","_loading","_slateConvert","_useMathjax","_slateEditor","_core","SimpleEditor","forwardRef","_ref","ref","isFetching","initValue","editorApi","mathJaxSource","isSupportInsertSeafileImage","propsOnSave","onSave","propsOnContentChanged","onContentChanged","children","_ref2","useState","_ref3","richValue","setRichValue","_ref4","_ref5","isLoading","setIsLoading","_ref6","isLoadingMathJax","useImperativeHandle","getValue","mdStringValue","slateToMdString","useEffect","mdStringToSlate","generateHeaderElement","useCallback","content","props","isSupportFormula","createElement","_default"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/pages/markdown-editor.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _loading = _interopRequireDefault(require(\"../containers/loading\"));\nvar _slateConvert = require(\"../slate-convert\");\nvar _useMathjax = _interopRequireDefault(require(\"../hooks/use-mathjax\"));\nvar _slateEditor = _interopRequireDefault(require(\"../editors/slate-editor\"));\nvar _core = require(\"../extension/core\");\nconst SimpleEditor = /*#__PURE__*/(0, _react.forwardRef)((_ref, ref) => {\n  let {\n    isFetching,\n    value,\n    initValue,\n    editorApi,\n    mathJaxSource,\n    isSupportInsertSeafileImage,\n    onSave: propsOnSave,\n    onContentChanged: propsOnContentChanged,\n    children\n  } = _ref;\n  const [richValue, setRichValue] = (0, _react.useState)([]);\n  const [isLoading, setIsLoading] = (0, _react.useState)(true);\n  const {\n    isLoadingMathJax\n  } = (0, _useMathjax.default)(mathJaxSource);\n  (0, _react.useImperativeHandle)(ref, () => {\n    return {\n      getValue: () => {\n        const mdStringValue = (0, _slateConvert.slateToMdString)(richValue);\n        return mdStringValue;\n      }\n    };\n  }, [richValue]);\n  (0, _react.useEffect)(() => {\n    if (!isFetching) {\n      let richValue = (0, _slateConvert.mdStringToSlate)(value);\n      if (!value && initValue) {\n        richValue = [(0, _core.generateHeaderElement)(initValue)];\n      }\n      setRichValue(richValue);\n      setIsLoading(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isFetching]);\n  const onContentChanged = (0, _react.useCallback)(content => {\n    setRichValue(content);\n    propsOnContentChanged && propsOnContentChanged();\n  }, [propsOnContentChanged]);\n  const props = {\n    isSupportFormula: !!mathJaxSource,\n    isSupportInsertSeafileImage,\n    value: richValue,\n    editorApi: editorApi,\n    onSave: propsOnSave,\n    onContentChanged: onContentChanged,\n    children: children\n  };\n  if (isFetching || isLoading || isLoadingMathJax) {\n    return /*#__PURE__*/_react.default.createElement(_loading.default, null);\n  }\n  return /*#__PURE__*/_react.default.createElement(_slateEditor.default, props);\n});\nvar _default = exports.default = SimpleEditor;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}