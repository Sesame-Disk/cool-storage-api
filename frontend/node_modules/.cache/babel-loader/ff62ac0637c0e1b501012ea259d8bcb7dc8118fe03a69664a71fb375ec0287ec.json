{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import moment from'moment';import{Utils}from'../../utils/utils';import{gettext}from'../../utils/constants';import{seafileAPI}from'../../utils/seafile-api';import toaster from'../toast';import'../../css/dirent-detail.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LibDetail=/*#__PURE__*/function(_React$Component){_inherits(LibDetail,_React$Component);var _super=_createSuper(LibDetail);function LibDetail(props){var _this;_classCallCheck(this,LibDetail);_this=_super.call(this,props);_this.getFileCounts=function(repo){seafileAPI.getRepoInfo(repo.repo_id).then(function(res){_this.setState({fileCount:res.data.file_count});}).catch(function(error){var errMessage=Utils.getErrorMsg(error);toaster.danger(errMessage);});};_this.state={fileCount:0};return _this;}_createClass(LibDetail,[{key:\"componentDidMount\",value:function componentDidMount(){var repo=this.props.currentRepo;this.getFileCounts(repo);}},{key:\"UNSAFE_componentWillReceiveProps\",value:function UNSAFE_componentWillReceiveProps(nextProps){if(nextProps.currentRepo.repo_id!==this.props.currentRepo.repo_id){this.getFileCounts(nextProps.currentRepo);}}},{key:\"render\",value:function render(){var repo=this.props.currentRepo;var smallIconUrl=Utils.getLibIconUrl(repo);var bigIconUrl=Utils.getLibIconUrl(repo,true);return/*#__PURE__*/_jsxs(\"div\",{className:\"detail-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"detail-control sf2-icon-x1\",onClick:this.props.closeDetails}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-title dirent-title\",children:[/*#__PURE__*/_jsx(\"img\",{src:smallIconUrl,width:\"24\",height:\"24\",alt:\"\"}),'  ',/*#__PURE__*/_jsx(\"span\",{className:\"name ellipsis\",title:repo.repo_name,children:repo.repo_name})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-body dirent-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"img\",children:/*#__PURE__*/_jsx(\"img\",{src:bigIconUrl,height:\"96\",alt:\"\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"dirent-table-container\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table-thead-hidden\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{width:\"35%\"}),/*#__PURE__*/_jsx(\"th\",{width:\"65%\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:gettext('Files')}),/*#__PURE__*/_jsx(\"td\",{children:this.state.fileCount})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:gettext('Size')}),/*#__PURE__*/_jsx(\"td\",{children:repo.size})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:gettext('Last Update')}),/*#__PURE__*/_jsx(\"td\",{children:moment(repo.last_modified).fromNow()})]})]})]})})]})]});}}]);return LibDetail;}(React.Component);export default LibDetail;","map":{"version":3,"names":["React","moment","Utils","gettext","seafileAPI","toaster","jsx","_jsx","jsxs","_jsxs","LibDetail","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","getFileCounts","repo","getRepoInfo","repo_id","then","res","setState","fileCount","data","file_count","catch","error","errMessage","getErrorMsg","danger","state","_createClass","key","value","componentDidMount","currentRepo","UNSAFE_componentWillReceiveProps","nextProps","render","smallIconUrl","getLibIconUrl","bigIconUrl","className","children","onClick","closeDetails","src","width","height","alt","title","repo_name","size","last_modified","fromNow","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dirent-detail/lib-details.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\nimport '../../css/dirent-detail.css';\n\nconst propTypes = {\n  currentRepo: PropTypes.object.isRequired,\n  closeDetails: PropTypes.func.isRequired,\n};\n\nclass LibDetail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileCount: 0,\n    };\n  }\n\n  componentDidMount() {\n    let repo = this.props.currentRepo;\n    this.getFileCounts(repo);\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.currentRepo.repo_id !== this.props.currentRepo.repo_id) {\n      this.getFileCounts(nextProps.currentRepo);\n    }\n  }\n\n  getFileCounts = (repo) => {\n    seafileAPI.getRepoInfo(repo.repo_id).then(res => {\n      this.setState({fileCount: res.data.file_count});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    let repo = this.props.currentRepo;\n    let smallIconUrl = Utils.getLibIconUrl(repo);\n    let bigIconUrl = Utils.getLibIconUrl(repo, true);\n\n    return (\n      <div className=\"detail-container\">\n        <div className=\"detail-header\">\n          <div className=\"detail-control sf2-icon-x1\" onClick={this.props.closeDetails}></div>\n          <div className=\"detail-title dirent-title\">\n            <img src={smallIconUrl} width=\"24\" height=\"24\" alt=\"\" />{'  '}\n            <span className=\"name ellipsis\" title={repo.repo_name}>{repo.repo_name}</span>\n          </div>\n        </div>\n        <div className=\"detail-body dirent-info\">\n          <div className=\"img\">\n            <img src={bigIconUrl} height=\"96\"  alt=\"\" />\n          </div>\n          <div className=\"dirent-table-container\">\n            <table className=\"table-thead-hidden\">\n              <thead>\n                <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n              </thead>\n              <tbody>\n                <tr><th>{gettext('Files')}</th><td>{this.state.fileCount}</td></tr>\n                <tr><th>{gettext('Size')}</th><td>{repo.size}</td></tr>\n                <tr><th>{gettext('Last Update')}</th><td>{ moment(repo.last_modified).fromNow()}</td></tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nLibDetail.propTypes = propTypes;\n\nexport default LibDetail;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}