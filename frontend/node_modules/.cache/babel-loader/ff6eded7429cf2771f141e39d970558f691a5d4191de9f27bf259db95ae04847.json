{"ast":null,"code":"import _classCallCheck from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{gettext}from'../../utils/constants';import{Button,Modal,ModalHeader,ModalBody,ModalFooter}from'reactstrap';import{seafileAPI}from'../../utils/seafile-api';import{Utils}from'../../utils/utils';import Loading from'../loading';import toaster from'../toast';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var InvitationRevokeDialog=/*#__PURE__*/function(_React$Component){_inherits(InvitationRevokeDialog,_React$Component);var _super=_createSuper(InvitationRevokeDialog);function InvitationRevokeDialog(props){var _this;_classCallCheck(this,InvitationRevokeDialog);_this=_super.call(this,props);_this.onRevokeInvitation=function(){_this.setState({isSubmitting:true});seafileAPI.revokeInvitation(_this.props.token).then(function(res){_this.props.revokeInvitation();_this.props.toggleDialog();var msg=gettext('Successfully revoked access of user {placeholder}.').replace('{placeholder}',_this.props.accepter);toaster.success(msg);}).catch(function(error){var errorMsg=Utils.getErrorMsg(error);toaster.danger(errorMsg);_this.props.toggleDialog();});};_this.state={isSubmitting:false};return _this;}_createClass(InvitationRevokeDialog,[{key:\"render\",value:function render(){var toggleDialog=this.props.toggleDialog;var isSubmitting=this.state.isSubmitting;var email='<span class=\"op-target\">'+Utils.HTMLescape(this.props.accepter)+'</span>';var content=gettext('Are you sure to revoke access of user {placeholder} ?').replace('{placeholder}',email);return/*#__PURE__*/_jsxs(Modal,{isOpen:true,toggle:toggleDialog,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:toggleDialog,children:gettext('Revoke Access')}),/*#__PURE__*/_jsx(ModalBody,{children:/*#__PURE__*/_jsx(\"p\",{dangerouslySetInnerHTML:{__html:content}})}),/*#__PURE__*/_jsxs(ModalFooter,{children:[/*#__PURE__*/_jsx(Button,{color:\"secondary\",onClick:toggleDialog,children:gettext('Cancel')}),/*#__PURE__*/_jsx(Button,{className:\"submit-btn\",color:\"primary\",onClick:this.onRevokeInvitation,disabled:isSubmitting,children:isSubmitting?/*#__PURE__*/_jsx(Loading,{}):gettext('Submit')})]})]});}}]);return InvitationRevokeDialog;}(React.Component);export default InvitationRevokeDialog;","map":{"version":3,"names":["React","gettext","Button","Modal","ModalHeader","ModalBody","ModalFooter","seafileAPI","Utils","Loading","toaster","jsx","_jsx","jsxs","_jsxs","InvitationRevokeDialog","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","onRevokeInvitation","setState","isSubmitting","revokeInvitation","token","then","res","toggleDialog","msg","replace","accepter","success","catch","error","errorMsg","getErrorMsg","danger","state","_createClass","key","value","render","email","HTMLescape","content","isOpen","toggle","children","dangerouslySetInnerHTML","__html","color","onClick","className","disabled","Component"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/src/components/dialog/invitation-revoke-dialog.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\nimport toaster from '../toast';\n\nconst propTypes = {\n  accepter: PropTypes.string.isRequired,\n  token: PropTypes.string.isRequired,\n  revokeInvitation: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass InvitationRevokeDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSubmitting: false\n    };\n  }\n\n  onRevokeInvitation = () => {\n    this.setState({\n      isSubmitting: true,\n    });\n\n    seafileAPI.revokeInvitation(this.props.token).then((res) => {\n      this.props.revokeInvitation();\n      this.props.toggleDialog();\n      const msg = gettext('Successfully revoked access of user {placeholder}.').replace('{placeholder}', this.props.accepter);\n      toaster.success(msg);\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.props.toggleDialog();\n    });\n  };\n\n  render() {\n    const { toggleDialog } = this.props;\n    const { isSubmitting } = this.state;\n    const email = '<span class=\"op-target\">' + Utils.HTMLescape(this.props.accepter) + '</span>';\n    const content = gettext('Are you sure to revoke access of user {placeholder} ?').replace('{placeholder}', email);\n\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Revoke Access')}</ModalHeader>\n        <ModalBody>\n          <p dangerouslySetInnerHTML={{__html: content}}></p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Cancel')}</Button>\n          <Button className=\"submit-btn\" color=\"primary\" onClick={this.onRevokeInvitation} disabled={isSubmitting}>{isSubmitting ? <Loading /> : gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nInvitationRevokeDialog.propTypes = propTypes;\n\nexport default InvitationRevokeDialog;\n"],"mappings":"wkBAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,OAASC,OAAO,KAAQ,uBAAuB,CAC/C,OAASC,MAAM,CAAEC,KAAK,CAAEC,WAAW,CAAEC,SAAS,CAAEC,WAAW,KAAQ,YAAY,CAC/E,OAASC,UAAU,KAAQ,yBAAyB,CACpD,OAASC,KAAK,KAAQ,mBAAmB,CACzC,MAAO,CAAAC,OAAO,KAAM,YAAY,CAChC,MAAO,CAAAC,OAAO,KAAM,UAAU,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,4BASzB,CAAAC,sBAAsB,uBAAAC,gBAAA,EAAAC,SAAA,CAAAF,sBAAA,CAAAC,gBAAA,MAAAE,MAAA,CAAAC,YAAA,CAAAJ,sBAAA,EAE1B,SAAAA,uBAAYK,KAAK,CAAE,KAAAC,KAAA,CAAAC,eAAA,MAAAP,sBAAA,EACjBM,KAAA,CAAAH,MAAA,CAAAK,IAAA,MAAMH,KAAK,EAAEC,KAAA,CAMfG,kBAAkB,CAAG,UAAM,CACzBH,KAAA,CAAKI,QAAQ,CAAC,CACZC,YAAY,CAAE,IAChB,CAAC,CAAC,CAEFnB,UAAU,CAACoB,gBAAgB,CAACN,KAAA,CAAKD,KAAK,CAACQ,KAAK,CAAC,CAACC,IAAI,CAAC,SAACC,GAAG,CAAK,CAC1DT,KAAA,CAAKD,KAAK,CAACO,gBAAgB,CAAC,CAAC,CAC7BN,KAAA,CAAKD,KAAK,CAACW,YAAY,CAAC,CAAC,CACzB,GAAM,CAAAC,GAAG,CAAG/B,OAAO,CAAC,oDAAoD,CAAC,CAACgC,OAAO,CAAC,eAAe,CAAEZ,KAAA,CAAKD,KAAK,CAACc,QAAQ,CAAC,CACvHxB,OAAO,CAACyB,OAAO,CAACH,GAAG,CAAC,CACtB,CAAC,CAAC,CAACI,KAAK,CAAC,SAACC,KAAK,CAAK,CAClB,GAAM,CAAAC,QAAQ,CAAG9B,KAAK,CAAC+B,WAAW,CAACF,KAAK,CAAC,CACzC3B,OAAO,CAAC8B,MAAM,CAACF,QAAQ,CAAC,CACxBjB,KAAA,CAAKD,KAAK,CAACW,YAAY,CAAC,CAAC,CAC3B,CAAC,CAAC,CACJ,CAAC,CApBCV,KAAA,CAAKoB,KAAK,CAAG,CACXf,YAAY,CAAE,KAChB,CAAC,CAAC,OAAAL,KAAA,CACJ,CAACqB,YAAA,CAAA3B,sBAAA,GAAA4B,GAAA,UAAAC,KAAA,CAmBD,SAAAC,OAAA,CAAS,CACP,GAAQ,CAAAd,YAAY,CAAK,IAAI,CAACX,KAAK,CAA3BW,YAAY,CACpB,GAAQ,CAAAL,YAAY,CAAK,IAAI,CAACe,KAAK,CAA3Bf,YAAY,CACpB,GAAM,CAAAoB,KAAK,CAAG,0BAA0B,CAAGtC,KAAK,CAACuC,UAAU,CAAC,IAAI,CAAC3B,KAAK,CAACc,QAAQ,CAAC,CAAG,SAAS,CAC5F,GAAM,CAAAc,OAAO,CAAG/C,OAAO,CAAC,uDAAuD,CAAC,CAACgC,OAAO,CAAC,eAAe,CAAEa,KAAK,CAAC,CAEhH,mBACEhC,KAAA,CAACX,KAAK,EAAC8C,MAAM,CAAE,IAAK,CAACC,MAAM,CAAEnB,YAAa,CAAAoB,QAAA,eACxCvC,IAAA,CAACR,WAAW,EAAC8C,MAAM,CAAEnB,YAAa,CAAAoB,QAAA,CAAElD,OAAO,CAAC,eAAe,CAAC,CAAc,CAAC,cAC3EW,IAAA,CAACP,SAAS,EAAA8C,QAAA,cACRvC,IAAA,MAAGwC,uBAAuB,CAAE,CAACC,MAAM,CAAEL,OAAO,CAAE,CAAI,CAAC,CAC1C,CAAC,cACZlC,KAAA,CAACR,WAAW,EAAA6C,QAAA,eACVvC,IAAA,CAACV,MAAM,EAACoD,KAAK,CAAC,WAAW,CAACC,OAAO,CAAExB,YAAa,CAAAoB,QAAA,CAAElD,OAAO,CAAC,QAAQ,CAAC,CAAS,CAAC,cAC7EW,IAAA,CAACV,MAAM,EAACsD,SAAS,CAAC,YAAY,CAACF,KAAK,CAAC,SAAS,CAACC,OAAO,CAAE,IAAI,CAAC/B,kBAAmB,CAACiC,QAAQ,CAAE/B,YAAa,CAAAyB,QAAA,CAAEzB,YAAY,cAAGd,IAAA,CAACH,OAAO,GAAE,CAAC,CAAGR,OAAO,CAAC,QAAQ,CAAC,CAAS,CAAC,EACvJ,CAAC,EACT,CAAC,CAEZ,CAAC,WAAAc,sBAAA,GA5CkCf,KAAK,CAAC0D,SAAS,EAiDpD,cAAe,CAAA3C,sBAAsB"},"metadata":{},"sourceType":"module","externalDependencies":[]}