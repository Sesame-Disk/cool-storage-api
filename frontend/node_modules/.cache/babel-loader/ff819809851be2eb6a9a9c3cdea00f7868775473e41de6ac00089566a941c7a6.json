{"ast":null,"code":"import _slicedToArray from \"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { Fragment, useCallback, useState, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Alert, Label } from 'reactstrap';\nimport { getEditorString } from '../../../../core';\nimport { insertLink, updateLink, checkLink } from '../../helpers';\nvar AddLinkDialog = function AddLinkDialog(_ref) {\n  var editor = _ref.editor,\n    className = _ref.className,\n    element = _ref.element,\n    insertPosition = _ref.insertPosition,\n    slateNode = _ref.slateNode,\n    closeDialog = _ref.closeDialog;\n  var _useTranslation = useTranslation(),\n    t = _useTranslation.t;\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    linkErrorMessage = _useState2[0],\n    setLinkErrorMessage = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    titleErrorMessage = _useState4[0],\n    setTitleErrorMessage = _useState4[1];\n  var _ref2 = element || {\n      title: '',\n      href: ''\n    },\n    oldTitle = _ref2.title,\n    oldURL = _ref2.href;\n  var initTitle = useMemo(function () {\n    return oldTitle ? oldTitle : getEditorString(editor, editor.selection);\n  }, [editor, oldTitle]);\n  var _useState5 = useState(initTitle),\n    _useState6 = _slicedToArray(_useState5, 2),\n    title = _useState6[0],\n    setTitle = _useState6[1];\n  var _useState7 = useState(oldURL),\n    _useState8 = _slicedToArray(_useState7, 2),\n    url = _useState8[0],\n    setURL = _useState8[1];\n  var submit = useCallback(function () {\n    setLinkErrorMessage('');\n    setTitleErrorMessage('');\n    if (!url) {\n      setLinkErrorMessage(t('The_link_address_is_required'));\n      return;\n    }\n    if (!title) {\n      setTitleErrorMessage(t('The_link_title_is_required'));\n      return;\n    }\n    if (checkLink(url)) {\n      setLinkErrorMessage(t('The_link_address_is_invalid'));\n      return;\n    }\n    var isEdit = oldURL && oldTitle;\n    if (isEdit) {\n      updateLink(editor, title, url);\n    } else {\n      insertLink(editor, title, url, insertPosition, slateNode);\n    }\n    closeDialog();\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [editor, url, title, oldTitle, oldURL, insertPosition]);\n  var onKeyDown = useCallback(function (event) {\n    if (event.keyCode === 13) {\n      event.preventDefault();\n      submit();\n      return;\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [editor, url, title, oldTitle, oldURL, insertPosition]);\n  var handleUrlChange = useCallback(function (event) {\n    var value = event.target.value.trim();\n    if (value === url) return;\n    setURL(value);\n  }, [url]);\n  var handleTitleChange = useCallback(function (event) {\n    var value = event.target.value;\n    if (value === title) return;\n    setTitle(value);\n  }, [title]);\n  return /*#__PURE__*/React.createElement(Modal, {\n    isOpen: true,\n    autoFocus: false,\n    toggle: closeDialog,\n    className: className,\n    zIndex: 1071,\n    returnFocusAfterClose: false\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    toggle: closeDialog\n  }, t('Insert_link')), /*#__PURE__*/React.createElement(ModalBody, null, /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\"\n  }, /*#__PURE__*/React.createElement(Label, {\n    for: \"addLink\"\n  }, t('Link_address')), /*#__PURE__*/React.createElement(\"input\", {\n    onKeyDown: onKeyDown,\n    autoFocus: true,\n    type: \"url\",\n    className: \"form-control\",\n    id: \"addLink\",\n    value: url,\n    onChange: handleUrlChange\n  }), linkErrorMessage && /*#__PURE__*/React.createElement(Alert, {\n    color: \"danger\",\n    className: \"mt-2\"\n  }, t(linkErrorMessage))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\"\n  }, /*#__PURE__*/React.createElement(Label, {\n    for: \"addTitle\"\n  }, t('Link_title')), /*#__PURE__*/React.createElement(\"input\", {\n    onKeyDown: onKeyDown,\n    type: \"text\",\n    className: \"form-control\",\n    id: \"addTitle\",\n    value: title,\n    onChange: handleTitleChange\n  }), titleErrorMessage && /*#__PURE__*/React.createElement(Alert, {\n    color: \"danger\",\n    className: \"mt-2\"\n  }, t(titleErrorMessage))))), /*#__PURE__*/React.createElement(ModalFooter, null, /*#__PURE__*/React.createElement(Button, {\n    color: \"secondary\",\n    onClick: closeDialog\n  }, t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    disabled: false,\n    onClick: submit\n  }, t('Add_link'))));\n};\nexport default AddLinkDialog;","map":{"version":3,"names":["React","Fragment","useCallback","useState","useMemo","useTranslation","Button","Modal","ModalHeader","ModalBody","ModalFooter","Alert","Label","getEditorString","insertLink","updateLink","checkLink","AddLinkDialog","_ref","editor","className","element","insertPosition","slateNode","closeDialog","_useTranslation","t","_useState","_useState2","_slicedToArray","linkErrorMessage","setLinkErrorMessage","_useState3","_useState4","titleErrorMessage","setTitleErrorMessage","_ref2","title","href","oldTitle","oldURL","initTitle","selection","_useState5","_useState6","setTitle","_useState7","_useState8","url","setURL","submit","isEdit","onKeyDown","event","keyCode","preventDefault","handleUrlChange","value","target","trim","handleTitleChange","createElement","isOpen","autoFocus","toggle","zIndex","returnFocusAfterClose","for","type","id","onChange","color","onClick","disabled"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/sdoc-editor/dist/basic-sdk/extension/plugins/link/dialog/add-link-dialog/index.js"],"sourcesContent":["import React, { Fragment, useCallback, useState, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Alert, Label } from 'reactstrap';\nimport { getEditorString } from '../../../../core';\nimport { insertLink, updateLink, checkLink } from '../../helpers';\nconst AddLinkDialog = _ref => {\n  let {\n    editor,\n    className,\n    element,\n    insertPosition,\n    slateNode,\n    closeDialog\n  } = _ref;\n  const {\n    t\n  } = useTranslation();\n  const [linkErrorMessage, setLinkErrorMessage] = useState('');\n  const [titleErrorMessage, setTitleErrorMessage] = useState('');\n  const {\n    title: oldTitle,\n    href: oldURL\n  } = element || {\n    title: '',\n    href: ''\n  };\n  const initTitle = useMemo(() => oldTitle ? oldTitle : getEditorString(editor, editor.selection), [editor, oldTitle]);\n  const [title, setTitle] = useState(initTitle);\n  const [url, setURL] = useState(oldURL);\n  const submit = useCallback(() => {\n    setLinkErrorMessage('');\n    setTitleErrorMessage('');\n    if (!url) {\n      setLinkErrorMessage(t('The_link_address_is_required'));\n      return;\n    }\n    if (!title) {\n      setTitleErrorMessage(t('The_link_title_is_required'));\n      return;\n    }\n    if (checkLink(url)) {\n      setLinkErrorMessage(t('The_link_address_is_invalid'));\n      return;\n    }\n    const isEdit = oldURL && oldTitle;\n    if (isEdit) {\n      updateLink(editor, title, url);\n    } else {\n      insertLink(editor, title, url, insertPosition, slateNode);\n    }\n    closeDialog();\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [editor, url, title, oldTitle, oldURL, insertPosition]);\n  const onKeyDown = useCallback(event => {\n    if (event.keyCode === 13) {\n      event.preventDefault();\n      submit();\n      return;\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [editor, url, title, oldTitle, oldURL, insertPosition]);\n  const handleUrlChange = useCallback(event => {\n    const value = event.target.value.trim();\n    if (value === url) return;\n    setURL(value);\n  }, [url]);\n  const handleTitleChange = useCallback(event => {\n    const value = event.target.value;\n    if (value === title) return;\n    setTitle(value);\n  }, [title]);\n  return /*#__PURE__*/React.createElement(Modal, {\n    isOpen: true,\n    autoFocus: false,\n    toggle: closeDialog,\n    className: className,\n    zIndex: 1071,\n    returnFocusAfterClose: false\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    toggle: closeDialog\n  }, t('Insert_link')), /*#__PURE__*/React.createElement(ModalBody, null, /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\"\n  }, /*#__PURE__*/React.createElement(Label, {\n    for: \"addLink\"\n  }, t('Link_address')), /*#__PURE__*/React.createElement(\"input\", {\n    onKeyDown: onKeyDown,\n    autoFocus: true,\n    type: \"url\",\n    className: \"form-control\",\n    id: \"addLink\",\n    value: url,\n    onChange: handleUrlChange\n  }), linkErrorMessage && /*#__PURE__*/React.createElement(Alert, {\n    color: \"danger\",\n    className: \"mt-2\"\n  }, t(linkErrorMessage))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\"\n  }, /*#__PURE__*/React.createElement(Label, {\n    for: \"addTitle\"\n  }, t('Link_title')), /*#__PURE__*/React.createElement(\"input\", {\n    onKeyDown: onKeyDown,\n    type: \"text\",\n    className: \"form-control\",\n    id: \"addTitle\",\n    value: title,\n    onChange: handleTitleChange\n  }), titleErrorMessage && /*#__PURE__*/React.createElement(Alert, {\n    color: \"danger\",\n    className: \"mt-2\"\n  }, t(titleErrorMessage))))), /*#__PURE__*/React.createElement(ModalFooter, null, /*#__PURE__*/React.createElement(Button, {\n    color: \"secondary\",\n    onClick: closeDialog\n  }, t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    disabled: false,\n    onClick: submit\n  }, t('Add_link'))));\n};\nexport default AddLinkDialog;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}