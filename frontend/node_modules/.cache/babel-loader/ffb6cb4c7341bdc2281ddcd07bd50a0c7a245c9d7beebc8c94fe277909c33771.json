{"ast":null,"code":"\"use strict\";\n\nvar _objectSpread = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/objectSpread2.js\").default;\nvar _slicedToArray = require(\"/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setSeaTableColumn = exports.isMenuDisabled = exports.insertSeaTableColumn = exports.getColumnType = exports.getColumnByKey = void 0;\nvar _slate = require(\"slate\");\nvar _slugid = _interopRequireDefault(require(\"slugid\"));\nvar _elementTypes = require(\"../../constants/element-types\");\nvar _core = require(\"../../core\");\nvar _model = _interopRequireDefault(require(\"./model\"));\nvar isMenuDisabled = function isMenuDisabled(editor, readonly) {\n  if (readonly) return true;\n  if (editor.selection == null) return true;\n  var _slate$Editor$nodes = _slate.Editor.nodes(editor, {\n      match: function match(n) {\n        var type = (0, _core.getNodeType)(n);\n\n        // Only available for p and blockquote\n        if (type === _elementTypes.PARAGRAPH) return true;\n        if (type === _elementTypes.BLOCKQUOTE) return true;\n        if (type === _elementTypes.UNORDERED_LIST) return true;\n        if (type === _elementTypes.ORDERED_LIST) return true;\n        if (type === _elementTypes.CHECK_LIST_ITEM) return true;\n        if (type === _elementTypes.IMAGE) return true;\n        if (type === _elementTypes.TABLE_CELL) return true;\n        return false;\n      },\n      universal: true,\n      mode: 'highest' // Match top level\n    }),\n    _slate$Editor$nodes2 = _slicedToArray(_slate$Editor$nodes, 1),\n    nodeEntry = _slate$Editor$nodes2[0];\n\n  // Match to p blockquote, do not disable\n  if (nodeEntry) {\n    return false;\n  }\n  return true;\n};\nexports.isMenuDisabled = isMenuDisabled;\nvar getColumnType = function getColumnType(editor) {\n  var _slate$Editor$nodes3 = _slate.Editor.nodes(editor, {\n      match: function match(n) {\n        return (0, _core.getNodeType)(n) === _elementTypes.COLUMN;\n      },\n      universal: true\n    }),\n    _slate$Editor$nodes4 = _slicedToArray(_slate$Editor$nodes3, 1),\n    match = _slate$Editor$nodes4[0];\n  if (!match) return _elementTypes.PARAGRAPH;\n  var _match = _slicedToArray(match, 1),\n    n = _match[0];\n  return (0, _core.getNodeType)(n);\n};\nexports.getColumnType = getColumnType;\nvar insertSeaTableColumn = function insertSeaTableColumn(editor, active) {\n  if (!active) {\n    var column = new _model.default({});\n    column.id = _slugid.default.nice();\n    _slate.Transforms.insertNodes(editor, _objectSpread({}, column));\n  }\n  (0, _core.focusEditor)(editor);\n};\nexports.insertSeaTableColumn = insertSeaTableColumn;\nvar setSeaTableColumn = function setSeaTableColumn(editor, data) {\n  _slate.Transforms.setNodes(editor, {\n    data: data\n  }, {\n    match: function match(node) {\n      return node.type === _elementTypes.COLUMN;\n    },\n    at: editor.selection\n  });\n};\nexports.setSeaTableColumn = setSeaTableColumn;\nvar getColumnByKey = function getColumnByKey(columns, key) {\n  var column = columns.find(function (item) {\n    return item.key === key;\n  });\n  return column || null;\n};\nexports.getColumnByKey = getColumnByKey;","map":{"version":3,"names":["_objectSpread","require","default","_slicedToArray","_interopRequireDefault","Object","defineProperty","exports","value","setSeaTableColumn","isMenuDisabled","insertSeaTableColumn","getColumnType","getColumnByKey","_slate","_slugid","_elementTypes","_core","_model","editor","readonly","selection","_slate$Editor$nodes","Editor","nodes","match","n","type","getNodeType","PARAGRAPH","BLOCKQUOTE","UNORDERED_LIST","ORDERED_LIST","CHECK_LIST_ITEM","IMAGE","TABLE_CELL","universal","mode","_slate$Editor$nodes2","nodeEntry","_slate$Editor$nodes3","COLUMN","_slate$Editor$nodes4","_match","active","column","id","nice","Transforms","insertNodes","focusEditor","data","setNodes","node","at","columns","key","find","item"],"sources":["/Users/abel/Documents/Code-Experiments/cool-storage-api/frontend/node_modules/@seafile/seafile-editor/dist/extension/plugins/column/helpers.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setSeaTableColumn = exports.isMenuDisabled = exports.insertSeaTableColumn = exports.getColumnType = exports.getColumnByKey = void 0;\nvar _slate = require(\"slate\");\nvar _slugid = _interopRequireDefault(require(\"slugid\"));\nvar _elementTypes = require(\"../../constants/element-types\");\nvar _core = require(\"../../core\");\nvar _model = _interopRequireDefault(require(\"./model\"));\nconst isMenuDisabled = (editor, readonly) => {\n  if (readonly) return true;\n  if (editor.selection == null) return true;\n  const [nodeEntry] = _slate.Editor.nodes(editor, {\n    match: n => {\n      const type = (0, _core.getNodeType)(n);\n\n      // Only available for p and blockquote\n      if (type === _elementTypes.PARAGRAPH) return true;\n      if (type === _elementTypes.BLOCKQUOTE) return true;\n      if (type === _elementTypes.UNORDERED_LIST) return true;\n      if (type === _elementTypes.ORDERED_LIST) return true;\n      if (type === _elementTypes.CHECK_LIST_ITEM) return true;\n      if (type === _elementTypes.IMAGE) return true;\n      if (type === _elementTypes.TABLE_CELL) return true;\n      return false;\n    },\n    universal: true,\n    mode: 'highest' // Match top level\n  });\n\n  // Match to p blockquote, do not disable\n  if (nodeEntry) {\n    return false;\n  }\n  return true;\n};\nexports.isMenuDisabled = isMenuDisabled;\nconst getColumnType = editor => {\n  const [match] = _slate.Editor.nodes(editor, {\n    match: n => (0, _core.getNodeType)(n) === _elementTypes.COLUMN,\n    universal: true\n  });\n  if (!match) return _elementTypes.PARAGRAPH;\n  const [n] = match;\n  return (0, _core.getNodeType)(n);\n};\nexports.getColumnType = getColumnType;\nconst insertSeaTableColumn = (editor, active) => {\n  if (!active) {\n    const column = new _model.default({});\n    column.id = _slugid.default.nice();\n    _slate.Transforms.insertNodes(editor, {\n      ...column\n    });\n  }\n  (0, _core.focusEditor)(editor);\n};\nexports.insertSeaTableColumn = insertSeaTableColumn;\nconst setSeaTableColumn = (editor, data) => {\n  _slate.Transforms.setNodes(editor, {\n    data: data\n  }, {\n    match: node => node.type === _elementTypes.COLUMN,\n    at: editor.selection\n  });\n};\nexports.setSeaTableColumn = setSeaTableColumn;\nconst getColumnByKey = (columns, key) => {\n  const column = columns.find(item => item.key === key);\n  return column || null;\n};\nexports.getColumnByKey = getColumnByKey;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}